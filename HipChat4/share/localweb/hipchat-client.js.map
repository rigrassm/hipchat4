{"version":3,"sources":["webpack:///webpack/bootstrap a7139e933bed4c96d437","webpack:///./src/js/app/hipchat-client/client.js","webpack:///./src/js/app/helpers/polyfills.js","webpack:///./src/js/app/helpers/event_logger.js","webpack:///./~/babel-runtime/helpers/classCallCheck.js","webpack:///./~/babel-runtime/helpers/createClass.js","webpack:///./~/babel-runtime/core-js/object/define-property.js","webpack:///./~/core-js/library/fn/object/define-property.js","webpack:///./~/core-js/library/modules/$.js","webpack:///./src/js/app/dispatchers/app_dispatcher.js","webpack:///./~/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./~/core-js/library/fn/object/get-prototype-of.js","webpack:///./~/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./~/core-js/library/modules/$.to-object.js","webpack:///./~/core-js/library/modules/$.defined.js","webpack:///./~/core-js/library/modules/$.object-sap.js","webpack:///./~/core-js/library/modules/$.export.js","webpack:///./~/core-js/library/modules/$.global.js","webpack:///./~/core-js/library/modules/$.core.js","webpack:///./~/core-js/library/modules/$.ctx.js","webpack:///./~/core-js/library/modules/$.a-function.js","webpack:///./~/core-js/library/modules/$.fails.js","webpack:///./~/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./~/babel-runtime/helpers/typeof.js","webpack:///./~/babel-runtime/core-js/symbol.js","webpack:///./~/core-js/library/fn/symbol/index.js","webpack:///./~/core-js/library/modules/es6.symbol.js","webpack:///./~/core-js/library/modules/$.has.js","webpack:///./~/core-js/library/modules/$.descriptors.js","webpack:///./~/core-js/library/modules/$.redefine.js","webpack:///./~/core-js/library/modules/$.hide.js","webpack:///./~/core-js/library/modules/$.property-desc.js","webpack:///./~/core-js/library/modules/$.shared.js","webpack:///./~/core-js/library/modules/$.set-to-string-tag.js","webpack:///./~/core-js/library/modules/$.wks.js","webpack:///./~/core-js/library/modules/$.uid.js","webpack:///./~/core-js/library/modules/$.keyof.js","webpack:///./~/core-js/library/modules/$.to-iobject.js","webpack:///./~/core-js/library/modules/$.iobject.js","webpack:///./~/core-js/library/modules/$.cof.js","webpack:///./~/core-js/library/modules/$.get-names.js","webpack:///./~/core-js/library/modules/$.enum-keys.js","webpack:///./~/core-js/library/modules/$.is-array.js","webpack:///./~/core-js/library/modules/$.an-object.js","webpack:///./~/core-js/library/modules/$.is-object.js","webpack:///./~/core-js/library/modules/$.library.js","webpack:///./~/babel-runtime/helpers/get.js","webpack:///./~/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./~/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./~/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./~/babel-runtime/helpers/inherits.js","webpack:///./~/babel-runtime/core-js/object/create.js","webpack:///./~/core-js/library/fn/object/create.js","webpack:///./~/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./~/core-js/library/fn/object/set-prototype-of.js","webpack:///./~/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./~/core-js/library/modules/$.set-proto.js","webpack:///./src/js/lib/core/dispatcher.js","webpack:///./~/babel-runtime/core-js/promise.js","webpack:///./~/core-js/library/fn/promise.js","webpack:///./~/core-js/library/modules/es6.string.iterator.js","webpack:///./~/core-js/library/modules/$.string-at.js","webpack:///./~/core-js/library/modules/$.to-integer.js","webpack:///./~/core-js/library/modules/$.iter-define.js","webpack:///./~/core-js/library/modules/$.iterators.js","webpack:///./~/core-js/library/modules/$.iter-create.js","webpack:///./~/core-js/library/modules/web.dom.iterable.js","webpack:///./~/core-js/library/modules/es6.array.iterator.js","webpack:///./~/core-js/library/modules/$.add-to-unscopables.js","webpack:///./~/core-js/library/modules/$.iter-step.js","webpack:///./~/core-js/library/modules/es6.promise.js","webpack:///./~/core-js/library/modules/$.classof.js","webpack:///./~/core-js/library/modules/$.strict-new.js","webpack:///./~/core-js/library/modules/$.for-of.js","webpack:///./~/core-js/library/modules/$.iter-call.js","webpack:///./~/core-js/library/modules/$.is-array-iter.js","webpack:///./~/core-js/library/modules/$.to-length.js","webpack:///./~/core-js/library/modules/core.get-iterator-method.js","webpack:///./~/core-js/library/modules/$.same-value.js","webpack:///./~/core-js/library/modules/$.species-constructor.js","webpack:///./~/core-js/library/modules/$.microtask.js","webpack:///./~/core-js/library/modules/$.task.js","webpack:///./~/core-js/library/modules/$.invoke.js","webpack:///./~/core-js/library/modules/$.html.js","webpack:///./~/core-js/library/modules/$.dom-create.js","webpack:///./~/core-js/library/modules/$.redefine-all.js","webpack:///./~/core-js/library/modules/$.set-species.js","webpack:///./~/core-js/library/modules/$.iter-detect.js","webpack:///./~/events/events.js","webpack:///./src/js/app/helpers/logger.js","webpack:///./~/babel-runtime/core-js/json/stringify.js","webpack:///./~/core-js/library/fn/json/stringify.js","webpack:///external \"spi\"","webpack:///./src/js/app/helpers/utils.js","webpack:///./~/babel-runtime/core-js/object/keys.js","webpack:///./~/core-js/library/fn/object/keys.js","webpack:///./~/core-js/library/modules/es6.object.keys.js","webpack:///./~/moment/moment.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/js/app/helpers/linkify.js","webpack:///./src/js/app/helpers/regex_helpers.js","webpack:///./src/js/app/helpers/tld_list.js","webpack:///./src/js/app/helpers/link_utils.js","webpack:///./src/js/app/helpers/jid_utils.js","webpack:///./src/js/app/helpers/emoticons.js","webpack:///./~/babel-runtime/regenerator/index.js","webpack:///./~/babel-runtime/regenerator/runtime.js","webpack:///./~/process/browser.js","webpack:///./~/babel-runtime/core-js/get-iterator.js","webpack:///./~/core-js/library/fn/get-iterator.js","webpack:///./~/core-js/library/modules/core.get-iterator.js","webpack:///./~/babel-runtime/helpers/toConsumableArray.js","webpack:///./~/babel-runtime/core-js/array/from.js","webpack:///./~/core-js/library/fn/array/from.js","webpack:///./~/core-js/library/modules/es6.array.from.js","webpack:///./src/js/app/config/app_config.js","webpack:///./src/js/app/helpers/file_utils.js","webpack:///./src/js/app/helpers/file_types.js","webpack:///./src/js/app/helpers/mime_types.js","webpack:///./src/js/app/helpers/room_utils.js","webpack:///./src/js/app/helpers/user_utils.js","webpack:///./~/babel-runtime/helpers/slicedToArray.js","webpack:///./~/babel-runtime/core-js/is-iterable.js","webpack:///./~/core-js/library/fn/is-iterable.js","webpack:///./~/core-js/library/modules/core.is-iterable.js","webpack:///./src/js/app/strings/status_strings.js","webpack:///./src/js/app/helpers/video_utils.js","webpack:///./src/js/app/helpers/browser_utils.js","webpack:///./src/js/app/keys/client_subtype_keys.js","webpack:///./src/js/app/keys/browser_family_keys.js","webpack:///./~/babel-runtime/core-js/object/freeze.js","webpack:///./~/core-js/library/fn/object/freeze.js","webpack:///./~/core-js/library/modules/es6.object.freeze.js","webpack:///./~/ua-parser-js/src/ua-parser.js","webpack:///(webpack)/buildin/amd-options.js","webpack:///./src/js/app/version-info.json","webpack:///./src/js/app/helpers/uri.js","webpack:///./~/sanitizer/lib/uri.js","webpack:///./src/js/app/stores/preferences_store.js","webpack:///./~/babel-runtime/helpers/defineProperty.js","webpack:///./src/js/lib/core/model_store.js","webpack:///./~/babel-runtime/core-js/object/assign.js","webpack:///./~/core-js/library/fn/object/assign.js","webpack:///./~/core-js/library/modules/es6.object.assign.js","webpack:///./~/core-js/library/modules/$.object-assign.js","webpack:///./src/js/lib/core/store.js","webpack:///./src/js/lib/core/emitter.js","webpack:///./src/js/core/common/constants.js","webpack:///./src/js/core/dal.cache.js","webpack:///./~/babel-runtime/core-js/symbol/for.js","webpack:///./~/core-js/library/fn/symbol/for.js","webpack:///./src/js/core/models/dal-error.js","webpack:///./src/js/core/models/user.js","webpack:///./src/js/core/models/room.js","webpack:///./src/js/core/xmpp/lib/namespaces.js","webpack:///./src/js/core/models/emoticon.js","webpack:///./src/js/core/cache/browser_storage/browser_storage.js","webpack:///./src/js/core/cache/browser_storage/browser_storage_keys.js","webpack:///./src/js/app/actions/config_actions.js","webpack:///./src/js/core/cache/lib/compression.js","webpack:///./src/js/app/keys/preferences_keys.js","webpack:///./src/js/app/models/preferences_model.js","webpack:///./src/js/app/keys/client_preferences_keys.js","webpack:///./src/js/app/helpers/integration_helper.js","webpack:///./src/js/app/helpers/client_info_helper.js","webpack:///./src/js/app/stores/configuration_store.js","webpack:///./src/js/app/helpers/uri_template.js","webpack:///./src/js/app/helpers/logger_sanitizer.js","webpack:///./src/js/app/helpers/mouse_position.js","webpack:///./src/js/app/analytics/analytics.js","webpack:///./src/js/app/analytics/analytics_events.js","webpack:///./src/js/app/stores/application_store.js","webpack:///./~/babel-runtime/helpers/extends.js","webpack:///./src/js/app/processors/message_processor.js","webpack:///./~/babel-runtime/helpers/toArray.js","webpack:///./src/js/app/helpers/notifier.js","webpack:///./src/js/app/helpers/favicon_counter.js","webpack:///./src/js/app/helpers/title_counter.js","webpack:///./src/js/app/strings/common_strings.js","webpack:///./src/js/app/dispatchers/analytics_dispatcher.js","webpack:///./src/js/lib/enum/presence.js","webpack:///./src/js/app/strings/chat_panel_strings.js","webpack:///./src/js/core/models/file.js","webpack:///./src/js/app/actions/app_actions.js","webpack:///./src/js/app/actions/analytics_actions.js","webpack:///./src/js/app/keys/analytics_keys.js","webpack:///./src/js/app/strings/video_call_strings.js","webpack:///./src/js/app/api/api_integration_events.js","webpack:///./src/js/app/processors/iq_processor.js","webpack:///./src/js/app/helpers/general_error_helper.js","webpack:///./src/js/app/models/configuration_model.js","webpack:///./src/js/app/processors/presence_processor.js","webpack:///./src/js/app/strings/dialog_strings.js","webpack:///./src/js/app/actions/flag_actions.js","webpack:///./src/js/app/keys/analytics_event_keys.js","webpack:///./src/js/core/dal.js","webpack:///./src/js/core/hipchat.js","webpack:///./src/js/core/xmpp/connection_manager.js","webpack:///./src/js/core/common/timer.js","webpack:///./src/js/core/xmpp/connection/connection_manager_connection.js","webpack:///./src/js/core/xmpp/connection/connection_manager_request.js","webpack:///./src/js/lib/enum/client_type.js","webpack:///./src/js/core/common/x2js.js","webpack:///./~/x2js/xml2json.min.js","webpack:///./src/js/app/actions/connection_actions.js","webpack:///./src/js/core/xmpp/plugins/ping_plugin.js","webpack:///./src/js/core/xmpp/plugins/abstract_plugin.js","webpack:///./src/js/app/helpers/network_status_helper.js","webpack:///./src/js/app/actions/network_status_actions.js","webpack:///./src/js/core/rest/rest.js","webpack:///./~/pako/lib/deflate.js","webpack:///./~/pako/lib/zlib/deflate.js","webpack:///./~/pako/lib/utils/common.js","webpack:///./~/pako/lib/zlib/trees.js","webpack:///./~/pako/lib/zlib/adler32.js","webpack:///./~/pako/lib/zlib/crc32.js","webpack:///./~/pako/lib/zlib/messages.js","webpack:///./~/pako/lib/utils/strings.js","webpack:///./~/pako/lib/zlib/zstream.js","webpack:///./src/js/core/xmpp/plugins/connection_hooks_plugin.js","webpack:///./src/js/core/xmpp/plugins/rooms_plugin.js","webpack:///./src/js/core/xmpp/lib/xmpp-utils.js","webpack:///./src/js/core/xmpp/plugins/chat_plugin.js","webpack:///./src/js/core/xmpp/plugins/presence_plugin.js","webpack:///./src/js/core/xmpp/plugins/xmpp_trap_plugin.js","webpack:///./src/js/core/common/iq_processor.js","webpack:///./src/js/app/actions/bosh_actions.js","webpack:///./src/js/core/xmpp/plugins/roster_plugin.js","webpack:///./src/js/core/xmpp/plugins/emoticons_plugin.js","webpack:///./src/js/core/xmpp/plugins/cache_plugin.js","webpack:///./src/js/core/common/hash.js","webpack:///./~/blueimp-md5/js/md5.js","webpack:///./src/js/core/rest/readstate/index.js","webpack:///./src/js/core/rest/readstate/readstate_request.js","webpack:///./src/js/core/rest/readstate/readstate_error.js","webpack:///./src/js/core/rest/apiv2/apiV2.js","webpack:///./src/js/core/rest/apiv2/uploader.js","webpack:///./~/utf8/utf8.js","webpack:///./src/js/core/dal.user.js","webpack:///./src/js/core/dal.sync.js","webpack:///./src/js/core/dal.room.js","webpack:///./src/js/core/dal.emoticon.js","webpack:///./src/js/core/dal.connection.js","webpack:///./src/vendor/herment.2.5.7.min.js","webpack:///./src/js/app/stores/app_header_store.js","webpack:///./src/js/app/hipchat-client/app-dispatcher-events.js","webpack:///./src/js/core/idle/idle_manager.js","webpack:///./src/js/app/actions/current_user_actions.js","webpack:///./src/js/app/helpers/avatar_helper.js","webpack:///./src/js/app/helpers/upload_file_helper.js","webpack:///./src/js/app/actions/file_uploader_actions.js","webpack:///./src/js/app/actions/chat_input_actions.js","webpack:///./src/js/app/strings/forms_strings.js","webpack:///./src/js/app/strings/chat_input_strings.js","webpack:///./src/js/app/api/api.js","webpack:///./src/js/app/actions/preferences_actions.js","webpack:///./src/js/app/actions/dialog_actions.js","webpack:///./src/js/app/actions/layout_actions.js","webpack:///./src/js/app/stores/chat_header_store.js","webpack:///./src/js/app/strings/chat_header_strings.js","webpack:///./src/js/app/stores/permissions_store.js","webpack:///./src/js/app/stores/chat_input_store.js","webpack:///./src/js/app/stores/roster_store.js","webpack:///./src/js/lib/enum/room_size.js","webpack:///./src/js/app/helpers/chat_search.js","webpack:///./src/js/app/strings/file_input_errors.js","webpack:///./src/js/app/helpers/slash_command_helper.js","webpack:///./src/js/app/actions/app_header_actions.js","webpack:///./src/js/app/actions/inline_dialog_actions.js","webpack:///./src/js/app/stores/inline_dialog_store.js","webpack:///./src/js/app/helpers/keyboard_shortcuts.js","webpack:///./~/mousetrap/mousetrap.js","webpack:///./src/js/app/actions/keyboard_shortcut_actions.js","webpack:///./src/js/app/strings/keyboard_shortcut_strings.js","webpack:///./src/js/app/keys/keyboard_shortcut_action_keys.js","webpack:///./src/js/app/stores/modal_dialog_store.js","webpack:///./src/js/app/actions/chat_header_actions.js","webpack:///./src/js/app/keys/video_service_keys.js","webpack:///./src/js/app/actions/form_actions.js","webpack:///./src/js/app/actions/room_dropdown_actions.js","webpack:///./src/js/app/actions/room_nav_actions.js","webpack:///./src/js/app/helpers/sentry_helper.js","webpack:///./src/js/app/actions/video_actions.js","webpack:///./src/js/app/helpers/file_helper.js","webpack:///./src/js/app/actions/chat_window_actions.js","webpack:///./src/js/app/strings/fileviewer_strings.js","webpack:///./src/js/app/helpers/presence_subscription_helper.js","webpack:///./src/js/app/helpers/video_module.js","webpack:///./src/js/app/stores/current_user_store.js","webpack:///./src/js/app/models/current_user_model.js","webpack:///./src/js/app/helpers/hc_global.js","webpack:///./src/js/app/actions/index.js","webpack:///./src/js/app/actions/lobby_actions.js","webpack:///./src/js/app/actions/roster_actions.js","webpack:///./src/js/app/actions/tooltip_actions.js","webpack:///./src/js/app/helpers/experiment_registry.js","webpack:///./~/rehacked/src/js/main.js","webpack:///./~/rehacked/src/js/rehacked.js","webpack:///./~/rehacked/src/lib/Slick.Parser-1.1.7.js","webpack:///./~/rehacked/src/js/util.js","webpack:///./~/rehacked/src/js/element_matcher.js","webpack:///external \"React\"","webpack:///./src/js/app/components/experiments/rehacked_placeholder_builder.js","webpack:///./src/js/app/components/layout/main_layout.js","webpack:///./src/js/app/components/app_header/header.js","webpack:///./src/js/app/components/app_header/user_status.js","webpack:///./src/js/app/components/common/avatars/person_avatar.js","webpack:///./src/js/app/components/common/icon/presence-icon.js","webpack:///./src/js/app/components/common/icon/icon.js","webpack:///./~/classnames/index.js","webpack:///./~/react-addons-pure-render-mixin/index.js","webpack:///./~/react/lib/ReactComponentWithPureRenderMixin.js","webpack:///./~/react/lib/shallowCompare.js","webpack:///./~/fbjs/lib/shallowEqual.js","webpack:///./src/js/app/components/app_header/user_status_menu.js","webpack:///./src/js/app/strings/app_header_strings.js","webpack:///./src/js/app/components/common/aui/dropdown2/aui_section.js","webpack:///./src/js/app/components/app_header/connection_status.js","webpack:///./src/js/app/components/app_header/connection_offline_status.js","webpack:///./src/js/app/strings/connection_notification_strings.js","webpack:///./src/js/app/components/app_header/connection_cannot_connect_status.js","webpack:///./src/js/app/components/app_header/connection_countdown_status.js","webpack:///./src/js/app/stores/connection_status_store.js","webpack:///./src/js/lib/enum/connection.js","webpack:///./src/js/lib/enum/network.js","webpack:///./src/js/app/components/common/spinner/spinner.js","webpack:///./src/js/app/components/app_header/help_menu_content.js","webpack:///./src/js/app/components/app_header/search_input.js","webpack:///./src/js/app/components/common/aui/dropdown2/aui_dropdown2_trigger.js","webpack:///./src/js/app/components/common/aui/dropdown2/aui_dropdown2.js","webpack:///./src/js/app/components/app_header/notification_banner.js","webpack:///./src/js/app/strings/notification_banner_strings.js","webpack:///./src/js/app/components/mixins/inline_dialog_manager_mixin.js","webpack:///./src/js/app/components/common/modal_dialog/modal_dialog_container.js","webpack:///./src/js/app/components/dialogs/settings_dialog/settings_dialog.js","webpack:///./src/js/app/components/common/modal_dialog/modal_dialog.js","webpack:///./src/js/app/components/mixins/modal_dialog_visibility_mixin.js","webpack:///./src/js/app/components/common/nav_panel/nav_panel.js","webpack:///./src/js/app/components/common/nav_panel/nav_panel_content.js","webpack:///./src/js/app/components/dialogs/settings_dialog/preference_checkbox_field.js","webpack:///./src/js/app/components/common/aui/form/aui_checkbox_field.js","webpack:///./src/js/app/components/common/aui/form/aui_checkbox.js","webpack:///./src/js/app/components/dialogs/settings_dialog/preference_radio_field.js","webpack:///./src/js/app/components/common/aui/form/aui_radio.js","webpack:///./src/js/app/components/common/aui/form/aui_input.js","webpack:///./src/js/app/components/common/aui/form/aui_form_inline_fieldgroup.js","webpack:///./src/js/app/components/common/aui/form/aui_input_fieldgroup.js","webpack:///./src/js/app/components/common/aui/form/aui_form_fieldgroup.js","webpack:///./src/js/app/components/dialogs/settings_dialog/mac_dock_bounce_field.js","webpack:///./src/js/app/components/dialogs/settings_dialog/sounds_field.js","webpack:///./src/js/app/components/forms/global_room_notifications_form.js","webpack:///./src/js/app/components/common/aui/form/aui_form_fieldset.js","webpack:///./src/js/app/components/forms/do_not_disturb_form.js","webpack:///./src/js/app/components/dialogs/invite_user_dialog/invite_user_dialog.js","webpack:///./src/js/app/components/forms/invite_user_form.js","webpack:///./src/js/app/components/common/aui/form/aui_select2_fieldgroup.js","webpack:///./src/js/app/components/common/aui/form/aui_select2_input.js","webpack:///./src/js/app/components/common/aui/form/aui_textarea_fieldgroup.js","webpack:///./src/js/app/components/common/aui/form/aui_textarea.js","webpack:///./src/js/app/stores/forms_store.js","webpack:///./src/js/app/strings/form_error_strings.js","webpack:///./src/js/app/components/mixins/deep_equal_render_mixin.js","webpack:///./src/js/app/stores/rooms_nav_store.js","webpack:///./src/js/app/components/mixins/ie_submit_mixin.js","webpack:///./src/js/app/components/dialogs/remove_user_dialog/remove_user_dialog.js","webpack:///./src/js/app/components/forms/remove_users_form.js","webpack:///./src/js/app/components/dialogs/create_room_dialog/create_room_dialog.js","webpack:///./src/js/app/components/forms/create_room_form.js","webpack:///./src/js/app/components/forms/room_privacy_radios.js","webpack:///./src/js/app/components/dialogs/room_privacy_dialog/room_privacy_dialog.js","webpack:///./src/js/app/components/forms/room_privacy_form.js","webpack:///./src/js/app/components/dialogs/rename_room_dialog/rename_room_dialog.js","webpack:///./src/js/app/components/forms/rename_room_form.js","webpack:///./src/js/app/components/dialogs/delete_room_dialog/delete_room_dialog.js","webpack:///./src/js/app/components/dialogs/room_invite_dialog/room_invite_dialog.js","webpack:///./src/js/app/components/dialogs/archive_room_dialog/archive_room_dialog.js","webpack:///./src/js/app/components/dialogs/desktop_4_dialog/desktop_4_dialog.js","webpack:///./src/js/app/components/common/modal_dialog/modal_dialog_alternate.js","webpack:///./src/js/app/components/dialogs/addon_dialog/addon_dialog.js","webpack:///./src/js/app/helpers/connect_addon.js","webpack:///./~/simple-xdm/host.js","webpack:///./~/simple-xdm/src/host/index.js","webpack:///./~/simple-xdm/src/host/xdmrpc.js","webpack:///./~/babel-runtime/core-js/object/get-own-property-names.js","webpack:///./~/core-js/library/fn/object/get-own-property-names.js","webpack:///./~/core-js/library/modules/es6.object.get-own-property-names.js","webpack:///./~/simple-xdm/src/common/util.js","webpack:///./~/simple-xdm/src/common/postmessage.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_dialog.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_content.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_input.js","webpack:///./src/js/app/actions/quick_switcher_actions.js","webpack:///./src/js/app/strings/quick_switcher_strings.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_empty_state.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_hint.js","webpack:///./src/js/app/stores/quick_switcher_store.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_person.js","webpack:///./src/js/app/components/quick_switcher/quick_switcher_room.js","webpack:///./src/js/app/components/dialogs/invite_teammates_dialog/invite_teammates_dialog.js","webpack:///./src/js/app/helpers/cookies.js","webpack:///./src/js/app/components/dialogs/guest_access_dialog/guest_access_dialog.js","webpack:///./src/js/app/components/dialogs/room_notifications_dialog/room_notifications_dialog.js","webpack:///./src/js/app/components/forms/room_notifications_form.js","webpack:///./src/js/app/components/dialogs/keyboard_shortcuts_dialog/keyboard_shortcuts_dialog.js","webpack:///./src/js/app/components/dialogs/release_notes_dialog/release_notes_dialog.js","webpack:///./src/js/app/strings/release_notes_strings.js","webpack:///./src/js/app/components/dialogs/integration_dialog/integration_dialog.js","webpack:///./src/js/app/components/common/integration/integration_frame.js","webpack:///./src/js/app/api/api_integration.js","webpack:///./src/js/app/api/modules/auth_module.js","webpack:///./src/js/app/helpers/integrations_token_cache.js","webpack:///./src/js/app/helpers/jwt.js","webpack:///./src/js/app/keys/integrations_keys.js","webpack:///./src/js/app/api/modules/chat_module.js","webpack:///./src/js/app/actions/integrations_actions.js","webpack:///./src/js/app/stores/integrations_store.js","webpack:///./src/js/app/stores/integrations_storage.js","webpack:///./src/js/app/helpers/conditions.js","webpack:///./~/traverse/index.js","webpack:///./src/js/app/actions/integrations_view_actions.js","webpack:///./src/js/app/api/modules/dialog_module.js","webpack:///./src/js/app/actions/integration_dialog_actions.js","webpack:///./src/js/app/stores/integration_dialog_store.js","webpack:///./src/js/app/api/modules/room_module.js","webpack:///./src/js/app/helpers/path_parameter_converters.js","webpack:///./src/js/app/api/modules/scoped_api.js","webpack:///./src/js/app/api/modules/sidebar_module.js","webpack:///./src/js/app/api/modules/user_module.js","webpack:///./src/js/app/api/modules/file_module.js","webpack:///./src/js/app/actions/file_viewer_actions.js","webpack:///./src/js/app/stores/integrations_view_store.js","webpack:///./src/js/app/strings/integrations_strings.js","webpack:///./src/js/app/components/dialogs/integrations_dialog/integrations_management_dialog.js","webpack:///./src/js/app/components/dialogs/integrations_dialog/integrations_management_dialog_empty_state.js","webpack:///./src/js/app/strings/empty_state_strings.js","webpack:///./src/js/app/components/dialogs/integrations_dialog/integrations_section.js","webpack:///./src/js/app/components/dialogs/integrations_dialog/integration.js","webpack:///./src/js/app/components/dialogs/edit_message_dialog/edit_message_dialog.js","webpack:///./src/js/app/components/forms/edit_message_form.js","webpack:///./src/js/app/components/dialogs/delete_message_dialog/delete_message_dialog.js","webpack:///./src/js/app/components/forms/delete_message_form.js","webpack:///./src/js/app/components/chat_window/message_types/message.js","webpack:///./src/js/app/components/chat_window/expando.js","webpack:///./src/js/app/components/mixins/mention_emoticon_tooltip_mixin.js","webpack:///./src/js/app/components/mixins/scrolling_media_observer_mixin.js","webpack:///./src/js/app/components/chat_window/message_types/quote.js","webpack:///./src/js/app/components/chat_window/message_types/code.js","webpack:///./src/js/app/components/chat_window/message_types/monospace.js","webpack:///./src/js/app/components/dialogs/edit_message_dialog/not_editable_dialog.js","webpack:///./src/js/app/components/dialogs/welcome_dialog/welcome_dialog.js","webpack:///./src/js/app/stores/welcome_store.js","webpack:///./src/js/app/components/dialogs/welcome_dialog/welcome_people_item.js","webpack:///./src/js/app/actions/welcome_actions.js","webpack:///./src/js/app/components/dialogs/welcome_dialog/welcome_rooms_item.js","webpack:///./src/js/app/components/tooltip/tooltip.js","webpack:///./src/js/app/components/tooltip/tooltip_types/smiley_selector.js","webpack:///./src/js/app/strings/tooltip_strings.js","webpack:///./src/js/app/components/tooltip/tooltip_types/upload_preview.js","webpack:///./src/js/app/components/common/modal_dialog/modal_backdrop.js","webpack:///./src/js/app/components/common/inline_dialog/inline_dialog_container.js","webpack:///./src/js/app/components/app_header/user_status_message_form.js","webpack:///./src/js/app/components/common/inline_dialog/inline_dialog.js","webpack:///./src/js/app/components/app_header/connection_status_message.js","webpack:///./src/js/app/components/chat_header/guest_access_information.js","webpack:///./src/js/app/strings/guest_access_information_strings.js","webpack:///./src/js/app/components/tooltip/tooltip_types/add_integrations_discover.js","webpack:///./src/js/app/components/common/flags/flags_container.js","webpack:///./src/js/app/stores/flags_store.js","webpack:///./src/js/app/components/common/flags/flag.js","webpack:///./src/js/app/components/common/flags/video_popup_blocked_flag.js","webpack:///./src/js/app/components/common/flags/incoming_call_flag.js","webpack:///./src/js/app/actions/incoming_call_actions.js","webpack:///./src/js/app/components/layout/main_body_layout.js","webpack:///./src/js/app/stores/general_errors_store.js","webpack:///./src/js/app/stores/layout_store.js","webpack:///./src/js/app/components/left_sidebar/sidebar.js","webpack:///./src/js/app/components/left_sidebar/rooms_nav.js","webpack:///./src/js/app/components/left_sidebar/lobby_nav_item.js","webpack:///./src/js/app/components/left_sidebar/search_nav_item.js","webpack:///./src/js/app/components/left_sidebar/rooms_nav_people_list.js","webpack:///./src/js/app/components/left_sidebar/invite_users_nav_item.js","webpack:///./src/js/app/components/left_sidebar/rooms_nav_item_person.js","webpack:///./src/js/app/components/left_sidebar/unread_badge.js","webpack:///./src/js/app/components/left_sidebar/mixins/rooms_nav_item_mixin.js","webpack:///./src/js/app/components/left_sidebar/rooms_nav_room_list.js","webpack:///./src/js/app/components/left_sidebar/create_room_nav_item.js","webpack:///./src/js/app/components/left_sidebar/rooms_nav_item_room.js","webpack:///./src/js/app/components/left_sidebar/unread_scroller.js","webpack:///./src/js/app/strings/sidebar_strings.js","webpack:///./src/js/app/components/main_column/main_col.js","webpack:///./src/js/app/components/lobby/lobby.js","webpack:///./src/js/app/stores/lobby_store.js","webpack:///./src/js/app/components/lobby/empty_state.js","webpack:///./src/js/app/components/lobby/empty_search_state.js","webpack:///./src/js/app/components/lobby/lobby_item.js","webpack:///./src/js/app/components/lobby/lobby_message.js","webpack:///./src/js/app/components/search/search_results.js","webpack:///./src/js/app/stores/search_store.js","webpack:///./src/js/app/actions/search_actions.js","webpack:///./src/js/app/components/right_sidebar/sidebar.js","webpack:///./src/js/app/components/right_sidebar/roster.js","webpack:///./src/js/app/helpers/person_helper.js","webpack:///./src/js/app/components/right_sidebar/roster_empty_state.js","webpack:///./src/js/app/strings/roster_panel_strings.js","webpack:///./src/js/app/actions/right_panel_actions.js","webpack:///./src/js/app/actions/sidebar_actions.js","webpack:///./src/js/app/components/right_sidebar/files.js","webpack:///./src/js/app/components/right_sidebar/file.js","webpack:///./src/js/app/components/right_sidebar/files_empty_state.js","webpack:///./src/js/app/components/right_sidebar/sidebar_list_spinner.js","webpack:///./src/js/app/components/right_sidebar/links.js","webpack:///./src/js/app/components/right_sidebar/link.js","webpack:///./src/js/app/components/right_sidebar/links_empty_state.js","webpack:///./src/js/app/components/right_sidebar/integrations/integrations.js","webpack:///./src/js/app/stores/glances_metadata_store.js","webpack:///./src/js/app/helpers/html_sanitizer.js","webpack:///./~/babel-runtime/core-js/set.js","webpack:///./~/core-js/library/fn/set.js","webpack:///./~/core-js/library/modules/es6.set.js","webpack:///./~/core-js/library/modules/$.collection-strong.js","webpack:///./~/core-js/library/modules/$.collection.js","webpack:///./~/core-js/library/modules/es7.set.to-json.js","webpack:///./~/core-js/library/modules/$.collection-to-json.js","webpack:///./~/sanitizer/sanitizer.js","webpack:///./~/sanitizer/lib/html4.js","webpack:///./src/js/app/helpers/glance_helper.js","webpack:///./src/js/app/actions/glance_actions.js","webpack:///./~/jsonschema/lib/index.js","webpack:///./~/jsonschema/lib/validator.js","webpack:///./~/url/url.js","webpack:///./~/url/~/punycode/punycode.js","webpack:///./~/querystring/index.js","webpack:///./~/querystring/decode.js","webpack:///./~/querystring/encode.js","webpack:///./~/jsonschema/lib/attribute.js","webpack:///./~/jsonschema/lib/helpers.js","webpack:///./src/js/app/schemas/glance_metadata.json","webpack:///./src/js/app/components/right_sidebar/integrations/glance.js","webpack:///./src/js/app/components/right_sidebar/integrations/icon.js","webpack:///./src/js/app/components/right_sidebar/integrations/add_integrations_glance.js","webpack:///./src/js/app/components/right_sidebar/integrations/integration_view.js","webpack:///./src/js/app/components/right_sidebar/integrations/integrations_configure_button.js","webpack:///./src/js/app/components/right_sidebar/roster_mini.js","webpack:///./src/js/app/components/right_sidebar/roster_mini_expander.js","webpack:///./src/js/app/components/right_sidebar/roster_mini_item.js","webpack:///./src/js/app/components/chat_header/chat_header.js","webpack:///./src/js/app/components/chat_header/groupchat_header.js","webpack:///./src/js/app/components/chat_header/topic_input.js","webpack:///./src/js/app/components/chat_header/groupchat_header_buttons.js","webpack:///./src/js/app/components/chat_header/groupchat_room_dropdown.js","webpack:///./src/js/app/components/common/aui/dropdown2/aui_dropdown2_interactive_link.js","webpack:///./src/js/app/components/chat_header/notification_icon.js","webpack:///./src/js/app/strings/room_notification_icon.js","webpack:///./src/js/app/actions/groupchat_header_actions.js","webpack:///./src/js/app/components/chat_header/oto_header.js","webpack:///./src/js/app/components/chat_header/oto_header_buttons.js","webpack:///./src/js/app/components/chat_header/video_buttons.js","webpack:///./src/js/app/components/chat_window/chat_panel.js","webpack:///./src/js/app/components/chat_window/message_list.js","webpack:///./src/js/app/components/chat_window/empty_state.js","webpack:///./src/js/app/helpers/scroll_events.js","webpack:///./src/js/app/components/chat_window/history_spinner.js","webpack:///./src/js/app/components/chat_window/messages.js","webpack:///./src/js/app/helpers/card_helper.js","webpack:///./src/js/app/components/chat_window/message_group.js","webpack:///./src/js/app/components/chat_window/message_types/notification.js","webpack:///./src/js/app/components/chat_window/message_types/card.js","webpack:///./src/js/app/helpers/integration_link_helper.js","webpack:///./src/js/app/actions/route_actions.js","webpack:///./src/js/app/components/chat_window/message_types/info.js","webpack:///./src/js/app/components/chat_window/message_types/file.js","webpack:///./src/js/app/components/common/file_viewer/file_thumbnail.js","webpack:///./src/js/app/components/chat_window/message_types/file_error.js","webpack:///./src/js/app/strings/file_error_strings.js","webpack:///./src/js/app/components/chat_window/message_types/link.js","webpack:///./src/js/app/components/chat_window/message_types/image.js","webpack:///./src/js/app/components/chat_window/message_types/image/image.js","webpack:///./src/js/app/components/chat_window/message_types/image/gifv.js","webpack:///./src/js/app/components/chat_window/message_types/video.js","webpack:///./src/js/app/components/chat_window/message_types/user_state.js","webpack:///./src/js/app/components/chat_window/message_types/twitter_status.js","webpack:///./src/js/app/components/chat_window/message_types/twitter_user.js","webpack:///./src/js/app/components/chat_window/message_actions/wrapper.js","webpack:///./src/js/app/components/common/actions_dropdown/actions_dropdown.js","webpack:///./src/js/app/components/common/actions_dropdown/integration_dropdown_action.js","webpack:///./src/js/app/components/chat_window/message_actions/edit_message.js","webpack:///./src/js/app/actions/message_actions.js","webpack:///./src/js/app/components/chat_window/message_actions/delete_message.js","webpack:///./src/js/app/components/chat_window/attached_cards_toggle.js","webpack:///./src/js/app/components/chat_window/message_wrapper.js","webpack:///./src/js/app/stores/chat_window_store.js","webpack:///./~/babel-runtime/core-js/object/is-frozen.js","webpack:///./~/core-js/library/fn/object/is-frozen.js","webpack:///./~/core-js/library/modules/es6.object.is-frozen.js","webpack:///./src/js/app/helpers/analytics.js","webpack:///./src/js/app/components/chat_input/chat_input_box.js","webpack:///./src/js/app/components/chat_input/chat_input.js","webpack:///./src/js/app/actions/autocomplete_actions.js","webpack:///./src/js/app/components/chat_input/mention_autocomplete.js","webpack:///./src/js/app/components/common/autocomplete/auto_complete_box.js","webpack:///./src/js/app/components/common/autocomplete/textarea_caret_mirror.js","webpack:///./src/js/app/components/chat_input/mention_autocomplete_row.js","webpack:///./src/js/app/components/chat_input/emoticon_autocomplete_item.js","webpack:///./src/js/app/components/chat_input/slash_command_autocomplete_item.js","webpack:///./src/js/app/components/chat_input/emoticon_auto_complete.js","webpack:///./src/js/app/components/chat_input/slash_command_auto_complete.js","webpack:///./src/js/app/components/chat_input/actions/chat_action_button.js","webpack:///./src/js/app/components/common/actions_dropdown/dropdown_action.js","webpack:///./src/js/app/components/chat_input/actions/file_uploader.js","webpack:///./src/js/app/components/chat_input/actions/file_error_tooltip.js","webpack:///./src/js/app/components/common/overlays/resize-overlay.js","webpack:///./src/js/app/components/common/file_viewer/file_viewer.js","webpack:///./src/js/app/components/tipsify/tipsify.js","webpack:///./src/js/app/stores/window_store.js","webpack:///./src/js/app/routes.js","webpack:///./~/page/index.js","webpack:///./~/path-to-regexp/index.js","webpack:///./~/isarray/index.js","webpack:///./src/js/app/components/layout/guest_layout.js","webpack:///./src/js/app/components/layout/guest_body_layout.js","webpack:///./src/js/app/components/app_load/general_error_display.js","webpack:///./src/js/app/components/app_load/general_error_403.js","webpack:///./src/js/app/components/app_load/general_error_500.js","webpack:///./src/js/app/helpers/error_detect.js","webpack:///./src/js/app/stores/video_chat_store.js","webpack:///./src/js/app/helpers/video_chat.js","webpack:///./src/js/app/helpers/clipboard_helper.js","webpack:///./src/js/app/strings/clipboard_strings.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA,EAAC,G;;;;;;AC1BD,mBAAkB,uD;;;;;;ACAlB;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZA;;;;;;KAEM;;;;;;;;;;8BAEK,QAAiB;;;AACxB,WAAI,SAAS,oBAAQ,EAAR,CAAT,CADoB;;yCAAN;;QAAM;;AAExB,8BAAO,IAAP,CAAY,oBAAoB,MAApB,GAA4B,GAAxC,qBAA+C,IAA/C,EAFwB;AAGxB,iEALE,sEAKa,eAAW,MAA1B,CAHwB;;;UAFtB;;;mBASS,IAAI,aAAJ;;;;;;;ACXf,mBAAkB,wD;;;;;;ACAlB;AACA,gE;;;;;;ACDA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC,E;;;;;;ACPD;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA,oDAAmD,OAAO,EAAE;AAC5D,G;;;;;;ACTA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;AACnE,sFAAqF;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,gEAA+D;AAC/D;AACA;AACA;AACA,eAAc;AACd,eAAc;AACd,eAAc;AACd,eAAc;AACd,gBAAe;AACf,gBAAe;AACf,0B;;;;;;AC7CA;AACA;AACA;AACA,wCAAuC,gC;;;;;;ACHvC,8BAA6B;AAC7B,sCAAqC,gC;;;;;;ACDrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACnBA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,G;;;;;;ACNA;;AAEA;;AAEA;;AAEA;;AAEA,uCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA,G;;;;;;AChBA;;AAEA;;AAEA;AACA;AACA;;AAEA,2B;;;;;;ACRA,mBAAkB,wD;;;;;;ACAlB;AACA;AACA,iD;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA2B;AAC3B,qBAAoB,4BAA4B,SAAS,IAAI;AAC7D,IAAG;AACH,EAAC;AACD;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,+DAA8D;AAC9D;AACA,MAAK;AACL;AACA,uBAAsB,iCAAiC;AACvD,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAoD,KAAK,QAAQ,iCAAiC;AAClG,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH,yBAAwB,eAAe,EAAE;AACzC,yBAAwB,gBAAgB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA,iCAAgC,gBAAgB;;AAEhD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA,8EAA6E,sBAAsB;;AAEnG;AACA;AACA;AACA;AACA;AACA,2C;;;;;;AClOA,wBAAuB;AACvB;AACA;AACA,G;;;;;;ACHA;AACA;AACA,kCAAiC,QAAQ,gBAAgB,UAAU,GAAG;AACtE,EAAC,E;;;;;;ACHD,0C;;;;;;ACAA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA,oDAAmD;AACnD;AACA,wCAAuC;AACvC,G;;;;;;ACLA;AACA;AACA;;AAEA;AACA,mEAAkE,+BAA+B;AACjG,G;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACTA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;AACA;AACA,G;;;;;;ACJA,kBAAiB;;AAEjB;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA,mBAAkB;;AAElB;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,G;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACbA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA,G;;;;;;ACFA,uB;;;;;;;;;;;;ACAA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;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EAD6B;UAAd,CAAjB,CAD6B;QAAxB;;;UA3DL;GAAmB;;AAmEzB,QAAO,OAAP,GAAiB,UAAjB,C;;;;;;ACpEA,mBAAkB,wD;;;;;;ACAlB;AACA;AACA;AACA;AACA,kD;;;;;;ACJA;AACA;;AAEA;AACA;AACA,8BAA6B;AAC7B,eAAc;AACd;AACA,EAAC;AACD;AACA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,WAAU;AACV,EAAC,E;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6BAA4B,aAAa;;AAEzC;AACA;AACA;AACA;AACA;AACA,yCAAwC,oCAAoC;AAC5E,6CAA4C,oCAAoC;AAChF,MAAK,2BAA2B,oCAAoC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,mBAAmB;AACrC;AACA;AACA,oCAAmC,2BAA2B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,G;;;;;;ACjEA,qB;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA,4FAAkF,aAAa,EAAE;;AAEjG;AACA,wDAAuD,0BAA0B;AACjF;AACA,G;;;;;;ACZA;AACA;AACA,iE;;;;;;ACFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iCAAgC;AAChC,eAAc;AACd,kBAAiB;AACjB;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,6B;;;;;;ACjCA,6BAA4B,e;;;;;;ACA5B;AACA,WAAU;AACV,G;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,cAAc,WAAW;AACnE;AACA,yCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B,yBAAwB,2BAA2B;AACnD,QAAO;AACP;AACA;AACA,IAAG,UAAU,eAAe;AAC5B;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,oBAAmB,gCAAgC;AACnD,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAuB,qBAAqB;AAC5C;AACA;AACA,UAAS;AACT;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH,mBAAkB,oBAAoB,KAAK;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,2DAA0D,WAAW;AACrE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA,oCAAmC;AACnC,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA,EAAC,E;;;;;;AChSD;AACA;AACA;AACA;AACA,0BAAyB,kBAAkB,EAAE;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACfA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAgE,gBAAgB;AAChF;AACA,IAAG,2CAA2C,gCAAgC;AAC9E;AACA;AACA,G;;;;;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,G;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA,4DAA2D;AAC3D,G;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA,G;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA,sCAAqC,oBAAoB,EAAE;AAC3D;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH,G;;;;;;ACfA,+E;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACNA;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAoB,aAAa;AACjC,IAAG;AACH,G;;;;;;ACZA;AACA;;AAEA;AACA;AACA,gCAA+B,qBAAqB;AACpD,gCAA+B,SAAS,EAAE;AAC1C,EAAC,UAAU;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,aAAa;AACxC,gCAA+B,aAAa;AAC5C;AACA,IAAG,UAAU;AACb;AACA,G;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,gBAAe,SAAS;AACxB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACxSA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;KAAY;;;;;;;;;AAEZ,KAAM,UAAU,WAAV;AACN,KAAM,wBAAwB,SAAxB;AACN,KAAM,kBAAkB,YAAlB;;;;;;;KAMA;AAEJ,YAFI,MAEJ,GAAc;;;yCAFV,QAEU;;;AAEZ,YAAO,MAAP,GAAgB,OAAO,MAAP,IAAiB,KAAK,OAAL,CAAa,OAAb,CAAqB,SAArB,CAAjB,CAFJ;AAGZ,YAAO,cAAP,GAAwB,OAAO,cAAP,IAAyB,CAAC,CAAC,KAAK,OAAL,CAAa,OAAb,CAAqB,iBAArB,CAAD,CAHtC;AAIZ,YAAO,iBAAP,GAA2B,OAAO,iBAAP,IAA4B,CAAC,CAAC,KAAK,OAAL,CAAa,OAAb,CAAqB,oBAArB,CAAD,CAJ5C;AAKZ,YAAO,mBAAP,GAA6B,OAAO,mBAAP,IAA8B,CAAC,CAAC,KAAK,OAAL,CAAa,OAAb,CAAqB,sBAArB,CAAD,CALhD;AAMZ,YAAO,qBAAP,GAA+B,OAAO,qBAAP,IAAgC,CAAC,CAAC,KAAK,OAAL,CAAa,OAAb,CAAqB,wBAArB,CAAD,CANpD;;AAQZ,UAAK,oBAAL,GAA4B,OAAO,cAAP;;;AARhB,YAWZ,CAAQ,GAAR,GAAc,UAAC,KAAD,EAAQ,OAAR,EAAoB;AAChC,WAAI,MAAK,SAAL,MAAoB,MAAK,WAAL,EAApB,EAAwC;AAC1C,iBAAO,KAAP;;AAEE,gBAAK,QAAQ,QAAR,CAAiB,IAAjB;AACH,mBAAK,IAAL,CAAU,OAAV,EAAmB,OAAnB,EADF;AAEE,mBAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,GAAkC,IAAlC,CAAuC,OAAvC,EAFF;AAGE,mBAHF;;AAFF,gBAOO,QAAQ,QAAR,CAAiB,IAAjB;AACH,mBAAK,IAAL,CAAU,OAAV,EAAmB,OAAnB,EADF;AAEE,mBAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,GAAkC,IAAlC,CAAuC,OAAvC,EAFF;AAGE,mBAHF;;AAPF,gBAYO,QAAQ,QAAR,CAAiB,KAAjB,CAZP;AAaE,gBAAK,QAAQ,QAAR,CAAiB,KAAjB;AACH,mBAAK,KAAL,CAAW,OAAX,EAAoB,OAApB,EADF;AAEE,mBAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,GAAkC,KAAlC,CAAwC,OAAxC,EAFF;AAGE,mBAHF;;AAbF;AAmBI,mBAAK,KAAL,CAAW,OAAX,EAAoB,OAApB,EADF;AAEE,mBAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,GAAkC,KAAlC,CAAwC,OAAxC,EAFF;AAlBF,UAD0C;QAA5C;MADY,CAXF;;AAsCZ,UAAK,4BAAL,GAAoC,KAApC,CAtCY;;AAwCZ,UAAK,MAAL,GAAc,CACZ,QADY,EAEZ,OAFY,EAGZ,OAHY,EAIZ,QAJY,EAKZ,MALY,EAMZ,MANY,CAAd,CAxCY;;AAiDZ,UAAK,MAAL,GAAc,CACZ,OADY,EAEZ,MAFY,EAGZ,MAHY,EAIZ,OAJY,EAKZ,KALY,CAAd,CAjDY;;AAyDZ,UAAK,WAAL,GAzDY;IAAd;;8BAFI;;6BA8DW;yCAAN;;QAAM;;AACb,YAAK,OAAL,CAAa,OAAb,EADa;AAEb,cAAO,KAAK,KAAL,aAAc,IAAd,CAAP,CAFa;;;;4BAKD;0CAAN;;QAAM;;AACZ,YAAK,OAAL,CAAa,MAAb,EADY;AAEZ,cAAO,KAAK,KAAL,aAAc,IAAd,CAAP,CAFY;;;;4BAKA;0CAAN;;QAAM;;AACZ,YAAK,OAAL,CAAa,MAAb,EADY;AAEZ,cAAO,KAAK,KAAL,aAAc,IAAd,CAAP,CAFY;;;;6BAKC;0CAAN;;QAAM;;AACb,YAAK,OAAL,CAAa,OAAb,EADa;AAEb,cAAO,KAAK,KAAL,aAAc,IAAd,CAAP,CAFa;;;;2BAKF;0CAAN;;QAAM;;AACX,YAAK,OAAL,CAAa,KAAb,EADW;AAEX,cAAO,KAAK,KAAL,aAAc,IAAd,CAAP,CAFW;;;;4BAKN,MAAM,MAAM;AACjB,WAAI;AACF,aAAI,CAAC,KAAK,YAAL,EAAD,EAAsB;AACxB,kBADwB;UAA1B;;;;AADE,cAOG,IAAI,IAAI,CAAJ,EAAO,IAAI,KAAK,UAAL,CAAgB,MAAhB,EAAwB,GAA5C,EAAiD;AAC/C,eAAI,MAAM,KAAK,WAAL,CAAiB,KAAK,UAAL,CAAgB,CAAhB,CAAjB,CAAN,CAD2C;AAE/C,eAAI,YAAY,gBAAM,GAAN,CAAU,QAAV,CAAmB,GAAnB,CAAZ,CAF2C;AAG/C,eAAI,sBAAoB,cAAS,SAA7B,CAH2C;;AAK/C,eAAI,UAAU,MAAV,GAAmB,UAAU,kBAAV,EAA8B;AACnD,iBAAI,iBAAiB,UAAU,MAAV,GAAmB,UAAU,kBAAV,CADW;AAEnD,iBAAI,kBAAkB,UAAU,SAAV,CAAoB,CAApB,EAAuB,KAAK,GAAL,CAAS,UAAU,kBAAV,EAA8B,UAAU,MAAV,CAA9D,CAAlB,CAF+C;AAGnD,kBAAK,KAAL,CAAc,sCAAiC,0BAA/C,EAHmD;YAArD,MAIO;AACL,kBAAK,KAAL,CAAW,SAAX,EADK;YAJP;UALF;QAPF,CAoBE,OAAO,CAAP,EAAU;AACV,aAAI,aAAa,MAAb,EAAqB;AACvB,mBAAQ,KAAR,CAAc,EAAE,OAAF,CAAd,CADuB;UAAzB;AAGA,uBAAI,YAAJ,CAAiB,aAAa,EAAE,OAAF,CAA9B,CAJU;QAAV;;;;0BAQC,OAAK;AACR,YAAK,SAAL,GAAiB,KAAjB,CADQ;AAER,cAAO,IAAP,CAFQ;;;;0BAKL,aAAY;AACf,YAAK,gBAAL,GAAwB,WAAxB,CADe;AAEf,cAAO,IAAP,CAFe;;;;qCAKF;AACb,YAAK,eAAL,GAAuB,IAAvB,CADa;AAEb,cAAO,IAAP,CAFa;;;;sCAKC;AACd,YAAK,oBAAL,GAA4B,IAA5B,CADc;AAEd,cAAO,IAAP,CAFc;;;;kCAKJ;AACV,YAAK,gBAAL,GAAwB,IAAxB,CADU;AAEV,cAAO,IAAP,CAFU;;;;mCAKC;AACX,cAAO,OAAO,MAAP,IAAiB,OAAO,OAAO,MAAP,CAAP,KAA0B,CAA1B,IAA+B,MAAG,OAAO,MAAP,CAAH,CAAmB,MAAnB,CAD5C;;;;6BAIE;;;0CAAN;;QAAM;;AAEb,WAAI,cAAc,CAAC,IAAI,IAAJ,EAAD,CAFL;AAGb,WAAI,OAAO,eAAe,KAAK,QAAL,IAAiB,WAAjB,CAAf,CAHE;AAIb,YAAK,QAAL,GAAgB,WAAhB,CAJa;;AAMb,YAAK,iBAAL,CAAuB,OAAO,cAAP,CAAvB,CANa;;AAQb,WAAI;AACF,aAAI,QAAQ,KAAK,KAAL,EAAR;aACA,cAAc,EAAE,GAAF,CAAM,EAAE,MAAF,CAAS,IAAT,EAAe,SAAf,CAAN,EAAiC,SAAjC,CAAd,CAFF;;AAIF,aAAI,YAAY,MAAZ,GAAqB,CAArB,EAAwB;;AAE1B,kBAAO,EAAE,MAAF,CAAS,IAAT,EAAe,SAAf,CAAP,CAF0B;AAG1B,eAAI,KAAK,SAAL,EAAJ,EAAsB;;AAEpB,yBAAY,OAAZ,CAAoB,UAAC,GAAD,EAAS;AAC3B,oBAAK,IAAL,CAAU,GAAV,EAD2B;cAAT,CAApB,CAFoB;YAAtB,MAKO;;AAEL,kBAAK,IAAL,CAAU,WAAV,EAFK;AAGL,iBAAI,CAAC,KAAK,4BAAL,EAAmC;;AAEtC,oBAAK,4BAAL,GAAoC,IAApC,CAFsC;AAGtC,oBAAK,IAAL,CAAU,+DAAV,EAHsC;cAAxC;YARF;UAHF;;AAmBA,aAAI,CAAC,OAAO,MAAP,EAAe;AAClB,gBAAK,OAAL,CAAa,UAAb,CAAwB,SAAxB,EADkB;UAApB;;AAIA,aAAI,CAAC,OAAO,iBAAP,EAAyB;AAC5B,gBAAK,OAAL,CAAa,UAAb,CAAwB,oBAAxB,EAD4B;UAA9B;;AAIA,aAAI,CAAC,OAAO,mBAAP,EAA2B;AAC9B,gBAAK,OAAL,CAAa,UAAb,CAAwB,sBAAxB,EAD8B;UAAhC;;AAIA,aAAI,CAAC,OAAO,qBAAP,EAA6B;AAChC,gBAAK,OAAL,CAAa,UAAb,CAAwB,wBAAxB,EADgC;UAAlC;;AAIA,aAAI,aAAa,MAAb,IAAuB,OAAO,MAAP,EAAe;;AAExC,eAAI,oBAAJ,CAFwC;;AAIxC,gBAAK,OAAL,CAAa,OAAb,CAAqB,SAArB,EAAgC,OAAO,MAAP,CAAhC,CAJwC;;AAMxC,eAAI,OAAO,iBAAP,EAA0B;AAC5B,kBAAK,OAAL,CAAa,OAAb,CAAqB,oBAArB,EAA2C,IAA3C,EAD4B;YAA9B;;AAIA,eAAI,OAAO,mBAAP,EAA4B;AAC9B,kBAAK,OAAL,CAAa,OAAb,CAAqB,sBAArB,EAA6C,IAA7C,EAD8B;YAAhC;;AAIA,eAAI,OAAO,qBAAP,EAA6B;AAC/B,kBAAK,OAAL,CAAa,OAAb,CAAqB,wBAArB,EAA+C,IAA/C,EAD+B;YAAjC;;;AAdwC,eAmBpC,CAAC,KAAK,SAAL,EAAgB;AACnB,kBAAK,SAAL,GAAiB,eAAjB,CADmB;AAEnB,kBAAK,gBAAL,iEAAoF,qBAApF,CAFmB;AAGnB,kBAAK,eAAL,GAAuB,IAAvB,CAHmB;YAArB;;AAMA,eAAI,KAAK,WAAL,MAAsB,KAAK,SAAL,EAAe;;;AAGrC,iBAAI,EAAE,UAAU,KAAV,IAAmB,UAAU,OAAV,CAArB,EAAwC;AAC1C,oBAAK,SAAL,GAAoB,cAAS,KAAK,SAAL,CADa;cAA5C;;AAIA,iBAAI,KAAK,UAAL,KAAoB,OAAO,MAAP,EAAe;AACrC,oBAAK,UAAL,GAAkB,OAAO,MAAP,CADmB;AAErC,mBAAI,aAAa,MAAG,OAAO,MAAP,CAAH,CAAmB,KAAnB,CAAyB,GAAzB,EAA8B,GAA9B,CAAkC,UAAC,MAAD;wBAAY,OAAO,IAAP;gBAAZ,CAA/C,CAFiC;AAGrC,mBAAI,WAAW,SAAX,QAAW,CAAC,MAAD;wBAAY,IAAI,MAAJ,OAAe,OAAO,OAAP,CAAe,KAAf,EAAsB,KAAtB,OAAf;gBAAZ,CAHsB;AAIrC,oBAAK,cAAL,GAAsB,WAAW,MAAX,CAAkB,UAAC,MAAD;wBAAY,OAAO,OAAP,CAAe,GAAf,MAAwB,CAAxB;gBAAZ,CAAlB,CACW,GADX,CACe,UAAC,MAAD;wBAAY,OAAO,KAAP,CAAa,CAAb;gBAAZ,CADf,CAEW,GAFX,CAEe,QAFf,CAAtB,CAJqC;AAOrC,oBAAK,QAAL,GAAgB,WAAW,MAAX,CAAkB,UAAC,MAAD;wBAAY,OAAO,OAAP,CAAe,GAAf,MAAwB,CAAxB;gBAAZ,CAAlB,CACW,GADX,CACe,QADf,CAAhB,CAPqC;cAAvC;;AAWA,iBAAI,UAAU,KAAV,CAlBiC;;AAoBrC,kBAAK,cAAL,CAAoB,OAApB,CAA4B,UAAC,MAAD,EAAY;AACtC,mBAAI,OAAK,SAAL,CAAe,MAAf,CAAsB,MAAtB,MAAkC,CAAC,CAAD,EAAI;AACxC,2BAAU,IAAV,CADwC;gBAA1C;cAD0B,CAA5B,CApBqC;;AA0BrC,iBAAI,CAAC,OAAD,EAAS;AACX,oBAAK,QAAL,CAAc,OAAd,CAAsB,UAAC,MAAD,EAAY;AAChC,qBAAI,CAAC,OAAK,gBAAL,IACA,OAAK,gBAAL,IAAyB,OAAO,QAAP,OAAsB,qBAAtB;;AAEzB,wBAAK,SAAL,KAAmB,eAAnB,EAAmC;AACtC,uBAAI,OAAK,SAAL,CAAe,MAAf,CAAsB,MAAtB,MAAkC,CAAC,CAAD,EAAI;AACxC,mCAAc,IAAd,CADwC;oBAA1C;kBAJF;gBADoB,CAAtB,CADW;cAAb;YA1BJ;;AAwCA,eAAI,eAAe,KAAK,SAAL,EAAgB;;AAEjC,oBAAO,KAAK,GAAL,CAAS,UAAC,GAAD,EAAS;AACvB,mBAAI,EAAE,UAAF,CAAa,GAAb,CAAJ,EAAuB;AACrB,wBAAO,iBAAP,CADqB;gBAAvB,MAEO,IAAI,EAAE,aAAF,CAAgB,GAAhB,KAAwB,EAAE,OAAF,CAAU,GAAV,CAAxB,EAAuC;AAChD,qBAAI;AACF,0BAAO,KAAK,KAAL,CAAW,yBAAe,GAAf,CAAX,CAAP,CADE;kBAAJ,CAEE,OAAO,CAAP,EAAS;AACR,2BAAQ,KAAR,CAAc,CAAd,EADQ;kBAAT;gBAHG;AAOP,sBAAO,GAAP,CAVuB;cAAT,CAAhB,CAFiC;;AAejC,kBAAK,OAAL,GAAe,CAAC,KAAK,OAAL,CAfiB;AAgBjC,kBAAK,UAAL,GAAkB,KAAK,UAAL,IAAmB,CAAnB,CAhBe;;AAkBjC,iBAAI,YAAY,EAAZ,CAlB6B;;AAoBjC,iBAAI,gBAAM,OAAN,CAAc,EAAd,CAAiB,MAAjB,MAA6B,OAAO,mBAAP,EAA4B;AAC3D,yBAAU,IAAV,QACO,KAAK,SAAL,YAAqB,iBAAY,KAAK,gBAAL,eAC5B,IAAC,CAAK,OAAL,GAAgB,MAAjB,GAA0B,SAA1B,CAFZ,cAGY,KAAK,MAAL,CAAY,KAAK,UAAL,CAHxB,iBAD2D;cAA7D,MAOO;AACL,yBAAU,IAAV,CACK,KAAK,SAAL,UAAmB,eAAU,KAAK,gBAAL,CADlC,CADK;cAPP;;AAaA,iBAAI,KAAK,UAAL,IAAmB,KAAK,MAAL,CAAY,MAAZ,GAAqB,CAArB,EAAuB;AAC5C,oBAAK,UAAL,GAAkB,CAAlB,CAD4C;cAA9C,MAEO;AACL,oBAAK,UAAL,GADK;cAFP;;AAMA,iBAAI,oBAAoB,KAAK,MAAL,KAAgB,CAAhB,IACA,EAAE,QAAF,CAAW,KAAK,CAAL,CAAX,CADA,IAEA,CAAC,EAAE,OAAF,CAAU,KAAK,CAAL,CAAV,CAAD,IACA,EAAE,MAAF,CAAS,KAAK,CAAL,CAAT,EAAkB,KAAlB,CAAwB,UAAC,KAAD;sBAAW,CAAC,EAAE,QAAF,CAAW,KAAX,CAAD;cAAX,CAHxB,CAvCS;;AA4CjC,iBAAI,gBAAgB,KAAK,KAAL,CAAW,UAAC,KAAD;sBAAW,CAAC,EAAE,QAAF,CAAW,KAAX,CAAD;cAAX,CAA3B;;;AA5C6B,iBA+C7B,cAAc,KAAK,SAAL,KAAmB,eAAnB,IACE,CAAC,OAAO,qBAAP,IACF,CAAC,KAAK,oBAAL,IACD,CAAC,iBAAD,IACA,CAAC,aAAD,KACC,KAAK,IAAL,CAAU,EAAE,QAAF,CAAV,IAAyB,KAAK,KAAL,CAAW,EAAE,OAAF,CAApC,CAJA,KAKA,UAAU,KAAV,IAAmB,UAAU,OAAV,CANrB,CA/Ce;;AAuDjC,iBAAI,QAAQ,cAAc,QAAQ,cAAR,GAAyB,QAAQ,KAAR,CAvDlB;;AAyDjC,mBAAM,KAAN,CAAY,OAAZ,EAAqB,SAArB,EAzDiC;AA0DjC,qBAAQ,KAAR,EAAe,KAAf,CAAqB,OAArB,EAA8B,IAA9B,EA1DiC;AA2DjC,iBAAI,OAAO,iBAAP,IAA4B,KAAK,eAAL,EAAqB;AACnD,mBAAI,QAAQ,KAAR,EAAc;AAChB,yBAAQ,KAAR,GADgB;gBAAlB,MAEO;AACL,yBAAQ,GAAR,CAAY,IAAK,KAAJ,EAAD,CAAY,KAAZ,CAAZ,CADK;gBAFP;cADF;AAOA,qBAAQ,QAAR;;;AAlEiC,YAAnC,MAqEO,IAAK,OAAO,OAAO,MAAP,CAAP,KAA0B,CAA1B,KAAgC,CAAC,KAAK,SAAL,IAAkB,KAAK,SAAL,KAAmB,eAAnB,CAAnD,EAAyF;AACnG,uBAAQ,KAAR,EAAe,KAAf,CAAqB,OAArB,EAA8B,IAA9B,EADmG;cAA9F;UAtIT;;AA2IA,aAAI,KAAK,eAAL,OAA2B,CAAC,KAAK,SAAL,IAAkB,KAAK,SAAL,KAAmB,eAAnB,CAA9C,EAAmF;AACrF,eAAI,UAAU,KAAK,gBAAL,CAAsB,KAAtB,EAA6B,IAA7B,CAAV,CADiF;AAErF,yBAAI,YAAJ,CAAiB,OAAjB,EAFqF;UAAvF;QAlLF,CAsLE,OAAO,CAAP,EAAU;AACV,aAAI,aAAa,MAAb,EAAqB;AACvB,mBAAQ,KAAR,CAAc,EAAE,OAAF,CAAd,CADuB;UAAzB;AAGA,uBAAI,YAAJ,CAAiB,aAAa,EAAE,OAAF,CAA9B,CAJU;QAAV;;AAOF,YAAK,WAAL,GArMa;;;;mCAwMF;AACX,YAAK,SAAL,GAAiB,IAAjB,CADW;AAEX,YAAK,gBAAL,GAAwB,EAAxB,CAFW;AAGX,YAAK,eAAL,GAAuB,KAAvB,CAHW;AAIX,YAAK,gBAAL,GAAwB,KAAxB,CAJW;AAKX,YAAK,oBAAL,GAA4B,KAA5B,CALW;;;;sCAQI,OAAO,MAAM;;;AAC5B,WAAI,iBAAe,MAAM,WAAN,QAAf;WACA,gBAAgB,EAAhB,CAFwB;;AAI5B,WAAI;AACF,cAAK,OAAL,CAAa,UAAC,EAAD,EAAQ;AACnB,gBAAK,OAAK,QAAL,CAAc,EAAd,CAAL,CADmB;AAEnB,eAAI,EAAE,QAAF,CAAW,EAAX,CAAJ,EAAoB;AAClB,kBAAK,yBAAe,EAAf,CAAL,CADkB;YAApB;AAGA,yBAAc,IAAd,CAAmB,EAAnB,EALmB;UAAR,CAAb,CADE;QAAJ,CAQE,OAAO,CAAP,EAAU;AACV,gBAAO,yBAAP,CADU;QAAV;AAGF,cAAU,iBAAY,cAAc,IAAd,CAAmB,GAAnB,CAAtB,CAf4B;;;;uCAkBZ,MAAM;AACtB,cAAO,CAAC,CAAC,IAAD,CADc;AAEtB,WAAI,IAAJ,EAAU;AACR,cAAK,OAAL,CAAa,OAAb,CAAqB,iBAArB,EAAwC,IAAxC,EADQ;QAAV,MAEO;AACL,cAAK,OAAL,CAAa,UAAb,CAAwB,iBAAxB,EADK;QAFP;AAKA,WAAI,KAAK,SAAL,OAAqB,IAArB,EAA0B;AAC5B,cAAK,oBAAL,GAA4B,IAA5B,CAD4B;QAA9B;;;;iCAKU;AACV,cAAO,KAAK,oBAAL,CADG;;;;oCAIG;AACb,cAAO,KAAK,eAAL,MAA0B,KAAK,SAAL,EAA1B,CADM;;;;uCAIG;AAChB,cAAO,4BAAiB,SAAjB,MAAgC,8BAAY,eAAZ,EAAhC,CADS;;;;8BAIT,KAAK;AACZ,cAAO,2BAAa,QAAb,CAAsB,GAAtB,CAAP,CADY;;;;iCAIF,IAAI;AACd,cAAO,2BAAa,WAAb,CAAyB,EAAzB,CAAP,CADc;;;;sCAWA;AACd,cAAO,gBAAM,aAAN,CAAoB,QAApB,CAA6B,8BAAY,GAAZ,CAAgB,gBAAhB,CAA7B,CAAP,CADc;;;;yBAPH;AACX,WAAI,CAAC,KAAK,cAAL,EAAD,EAAuB;AACzB,gBAAO,OAAO,cAAP,CADkB;QAA3B;AAGA,cAAO,OAAO,YAAP,CAJI;;;UAnZT;;;AAgaN,QAAO,OAAP,GAAiB,IAAI,MAAJ,EAAjB,C;;;;;;AChbA,mBAAkB,wD;;;;;;ACAlB;AACA,yCAAwC;AACxC;AACA,G;;;;;;ACHA,iC;;;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAM,sBAAsB,sBAAa,mBAAb;AAC5B,KAAI,gBAAgB,SAAhB,aAAgB,CAAU,GAAV,EAAe,GAAf,EAAoB;AACtC,UAAO,KAAK,KAAL,CAAW,KAAK,MAAL,MAAiB,MAAM,GAAN,GAAY,CAAZ,CAAjB,CAAX,GAA8C,GAA9C,CAD+B;EAApB;;;;;;AAQpB,KAAI,QAAQ;;AAEV,mBAAgB,GAAhB;AACA,mBAAgB,CAAhB;;AAEA,cAAW,oBAAU,IAAV,EAAX;AACA,6BANU;AAOV,2BAPU;AAQV,6BARU;AASV,6BATU;AAUV,mCAVU;AAWV,+BAXU;AAYV,oCAZU;AAaV,8CAbU;;AAeV,iBAAc,EAAd;;AAEA,uBAAM;AACJ,YAAO,IAAI,IAAJ,GAAW,OAAX,EAAP,CADI;IAjBI;;;AAqBV,uBAAoB,4BAAS,GAAT,EAAc,IAAd,EAAoB,KAApB,EAA2B,cAA3B,EAA2C;AAC7D,YAAO,KAAK,GAAL,CAAS,GAAT,EAAc,cAAc,IAAd,EAAoB,QAAQ,cAAR,CAAlC,CAAP,CAD6D;IAA3C;;AAIpB,gBAAa,qBAAS,GAAT,EAAc;AACzB,YAAO,IAAI,OAAJ,CAAY,sBAAZ,EAAoC,MAApC,CAAP,CADyB;IAAd;;AAIb,sBAAmB,6BAAY;AAC7B,YAAO,OAAO,QAAP,CADsB;IAAZ;;AAInB,QAAK;AACH,+CAAgB,WAAW;AACzB,WAAI,EAAE,QAAF,CAAW,SAAX,CAAJ,EAA2B;AACzB,6BAAkB,kCAAlB,CADyB;QAA3B;MAFC;AAOH,mDAAkB,SAAS,OAAO;AAChC,WAAI,EAAE,QAAF,CAAW,OAAX,KAAuB,KAAvB,EAA8B;AAChC,6BAAkB,+BAA0B,KAA5C,CADgC;QAAlC;MARC;AAaH,+CAAgB,SAAS;AACvB,WAAI,EAAE,QAAF,CAAW,OAAX,CAAJ,EAAyB;AACvB,gBAAU,yBAAV,CADuB;QAAzB;MAdC;AAmBH,+CAAgB,SAAS;AACvB,WAAI,EAAE,QAAF,CAAW,OAAX,CAAJ,EAAyB;AACvB,6BAAkB,4BAAlB,CADuB;QAAzB;MApBC;IAAL;;;;;;;;AAgCA,mBAAgB,wBAAU,IAAV,EAAgB,IAAhB,EAAsB;AACpC,SAAI,SAAS,EAAE,KAAF,CAAQ,IAAR,EAAc,IAAd,CAAT,CADgC;AAEpC,SAAI,SAAS,MAAT,EAAiB;AACnB,cAAO,GAAP,GAAa,OAAO,GAAP,CAAW,KAAX,CAAiB,GAAjB,EAAsB,CAAtB,CAAb,CADmB;MAArB;AAGA,OAAE,OAAF,CAAU,MAAV,EAAkB,UAAU,CAAV,EAAa,CAAb,EAAgB;AAChC,WAAI,KAAK,IAAL,CAAU,CAAV,KAAgB,OAAO,cAAP,CAAsB,EAAE,SAAF,CAAY,CAAZ,CAAtB,CAAhB,EAAuD;AACzD,gBAAO,OAAO,CAAP,CAAP,CADyD;QAA3D;MADgB,CAAlB,CALoC;AAUpC,YAAO,MAAP,CAVoC;IAAtB;;AAahB,iBAAc,sBAAS,GAAT,EAAc;AAC1B,YAAO,IAAI,OAAJ,CAAY,MAAZ,EAAoB,GAApB,EAAyB,OAAzB,CAAiC,mBAAjC,EAAsD,OAAtD,EAA+D,WAA/D,EAAP,CAD0B;IAAd;;;;;;;;AAUd,yCAAe,KAA2B;SAAtB,qEAAe,qBAAO;;AACxC,aAAQ,GAAR;AACE,YAAK,IAAL,CADF;AAEE,YAAK,MAAL,CAFF;AAGE,YAAK,MAAL,CAHF;AAIE,YAAK,CAAL,CAJF;AAKE,YAAK,GAAL;AACE,gBAAO,IAAP,CADF;AALF,YAOO,KAAL,CAPF;AAQE,YAAK,OAAL,CARF;AASE,YAAK,OAAL,CATF;AAUE,YAAK,CAAL,CAVF;AAWE,YAAK,GAAL;AACE,gBAAO,KAAP,CADF;AAXF;AAcI,gBAAO,YAAP,CADF;AAbF,MADwC;IAxFhC;;;AA2GV,gBAAa,uBAAY;AACvB,SAAI,IAAI,IAAI,IAAJ,GAAW,OAAX,EAAJ,CADmB;AAEvB,SAAI,KAAK,uCAAuC,OAAvC,CAA+C,OAA/C,EAAwD,UAAU,CAAV,EAAa;AAC5E,WAAI,IAAI,CAAC,IAAI,KAAK,MAAL,KAAgB,EAAhB,CAAL,GAA2B,EAA3B,GAAgC,CAAhC,CADoE;AAE5E,WAAI,KAAK,KAAL,CAAW,IAAI,EAAJ,CAAf,CAF4E;AAG5E,cAAO,CAAC,MAAM,GAAN,GAAY,CAAZ,GAAiB,IAAI,GAAJ,GAAU,GAAV,CAAlB,CAAkC,QAAlC,CAA2C,EAA3C,CAAP,CAH4E;MAAb,CAA7D,CAFmB;AAOvB,YAAO,EAAP,CAPuB;IAAZ;;AAUb,gBAAa,qBAAU,GAAV,EAAe;AAC1B,SAAI,KAAK,4DAAL,CADsB;AAE1B,YAAO,GAAG,IAAH,CAAQ,GAAR,CAAP,CAF0B;IAAf;;AAKb,mBAAgB,wBAAS,GAAT,EAAc;AAC5B,YAAO,EAAE,GAAF,CAAM,GAAN,EAAW,cAAX,CAAP,CAD4B;IAAd;;AAIhB,+DAAyB,KAAyB;SAApB,mEAAa,qBAAO;;AAChD,YAAO,EAAE,GAAF,CAAM,GAAN,EAAW,6BAAX,EAA0C,UAA1C,CAAP,CADgD;IA9HxC;AAkIV,mCAAW,KAAI;AACb,YAAO,IAAI,KAAJ,CAAU,OAAV,EAAmB,CAAnB,CAAP,CADa;IAlIL;;;;;;;;;AA4IV,gBAAa,qBAAU,IAAV,EAAgB,MAAhB,EAAwB;AACnC,SAAI,SAAS,SAAW,OAAX,GAAqB,QAArB,CADsB;;AAGnC,SAAI,CAAC,IAAD,EAAO;AACT,cAAO,KAAK,cAAL,GAAsB,MAAtB,CAA6B,MAA7B,CAAP,CADS;MAAX,MAEO,IAAI,gBAAgB,IAAhB,CAAqB,IAArB,CAAJ,EAAgC;AACrC,cAAO,iBAAO,IAAP,CAAY,IAAZ,CAAP,CADqC;MAAhC,MAEA;AACL,cAAO,sBAAO,IAAP,CAAP,CADK;MAFA;;AAMP,SAAI,CAAC,KAAK,cAAL,GAAsB,MAAtB,CAA6B,IAA7B,EAAmC,KAAnC,CAAD,EAA4C;AAC9C,gBAAS,WAAW,MAAX,CADqC;MAAhD;;AAIA,YAAO,KAAK,MAAL,CAAY,MAAZ,CAAP,CAfmC;IAAxB;;;;;;;;AAwBb,4BAAyB,iCAAS,IAAT,EAAe;AACtC,SAAI,OAAO,sBAAO,IAAP,CAAP;SACA,MAAM,OAAO,KAAK,IAAL,EAAP,GAAqB,CAArB;SACN,QAAQ,OAAO,KAAK,KAAL,CAAW,GAAX,EAAgB,CAAhB,EAAmB,KAAnB,CAAyB,UAAzB,EAAqC,CAArC,CAAP,GAAiD,CAAjD,CAH0B;;AAKtC,YAAO,OAAO,MAAM,GAAN,GAAY,KAAZ,CAAd,CALsC;IAAf;;AAQzB,mBAAgB,0BAAW;AACzB,YAAO,uBAAP,CADyB;IAAX;;AAIhB,gBAAa,qBAAS,UAAT,EAAqB,WAArB,EAAkC,IAAlC,EAAwC;AACnD,SAAI,QAAQ,sBAAO,UAAP,CAAR;SACA,QAAQ,sBAAO,WAAP,CAAR,CAF+C;;AAInD,YAAO,MAAM,IAAN,CAAW,KAAX,EAAkB,IAAlB,CAAP,CAJmD;IAAxC;;AAOb,4BAAyB,iCAAU,EAAV,EAAc;AACrC,SAAI,OAAO,iBAAO,GAAP,CAAW,EAAX,EAAe,GAAf,CAAP;SACA,MAAM,KAAK,MAAL,CAAY,qBAAZ,CAAN;SACA,KAAK,KAAK,MAAL,CAAY,QAAZ,CAAL,CAHiC;;AAKrC,YAAU,aAAQ,EAAlB,CALqC;IAAd;;AAQzB,8BAA2B,mCAAU,IAAV,EAAgB;AACzC,YAAO,iBAAO,IAAP,CAAY,IAAZ,EAAkB,MAAlB,CAAyB,mBAAzB,CAAP,CADyC;IAAhB;;AAI3B,cAAW,mBAAU,IAAV,EAAgB;AACzB,SAAI,IAAI,OAAO,sBAAO,IAAP,CAAP,GAAsB,uBAAtB,CADiB;AAEzB,YAAO,SAAS,EAAE,MAAF,CAAS,GAAT,CAAT,EAAwB,EAAxB,IAA8B,IAA9B,CAFkB;IAAhB;;AAKX,YAAS,iBAAU,GAAV,EAAe;AACtB,SAAI,EAAE,OAAF,CAAU,GAAV,CAAJ,EAAoB;AAClB,cAAO,GAAP,CADkB;MAApB;AAGA,YAAO,CAAC,GAAD,CAAP,CAJsB;IAAf;;AAOT,WAAQ,gBAAU,GAAV,EAAe;AACrB,SAAI,CAAC,GAAD,EAAM;AACR,cAAO,GAAP,CADQ;MAAV;;AAIA,WAAM,IAAI,OAAJ,CAAY,IAAZ,EAAkB,OAAlB,CAAN,CALqB;AAMrB,WAAM,IAAI,OAAJ,CAAY,IAAZ,EAAkB,MAAlB,CAAN,CANqB;AAOrB,WAAM,IAAI,OAAJ,CAAY,IAAZ,EAAkB,MAAlB,CAAN,CAPqB;;AASrB,YAAO,GAAP,CATqB;IAAf;;AAYR,oBAAiB,yBAAU,YAAV,EAAwB;AACvC,SAAI,OAAO,EAAP,CADmC;AAEvC,SAAI,CAAC,EAAE,OAAF,CAAU,MAAM,YAAN,CAAX,EAAgC;AAClC,WAAI,YAAU,oBAAY,MAAM,YAAN,CAAZ,CAAgC,IAAhC,CAAqC,GAArC,OAAV,CAD8B;AAElC,WAAI,SAAS,IAAI,MAAJ,SAAiB,oBAAjB,EAAoC,GAApC,CAAT,CAF8B;AAGlC,WAAI,QAAQ,OAAO,IAAP,CAAY,GAAZ,CAAR,CAH8B;AAIlC,WAAI,KAAJ,EAAU;AACR,gBAAO,MAAM,YAAN,CAAmB,MAAM,CAAN,EAAS,IAAT,EAAnB,CAAP,CADQ;QAAV;MAJF;AAQA,YAAO,IAAP,CAVuC;IAAxB;;AAajB,sBAAmB,2BAAS,OAAT,EAAkB;;AACnC,YAAO,OAAP,CADmC;IAAlB;;AAInB,wBAAqB,6BAAS,WAAT,EAAsB,UAAtB,EAAkC;AACrD,YAAO,YAAY,OAAZ,CAAoB,qBAAU,WAAV,EAAuB,aAAa,GAAb,CAAlD,CADqD;IAAlC;;AAIrB,qBAAkB,0BAAS,GAAT,EAAc,IAAd,EAAoB;;;AAEpC,SAAI,CAAC,GAAD,EAAK;AACP,cAAO,GAAP,CADO;MAAT;;AAIA,SAAI,OAAO,GAAP,KAAe,QAAf,EAA0B;AAC5B,aAAM,IAAI,QAAJ,EAAN,CAD4B;MAA9B;AAGA,YAAO,EAAE,QAAF,CAAW,QAAQ,EAAR,EAAY;AAC5B,uBAAgB,IAAhB;AACA,sBAAe,IAAf;AACA,0BAAmB,KAAnB;AACA,gBAAS,IAAT;AACA,kBAAW,IAAX;AACA,mBAAY,IAAZ;AACA,qBAAc,IAAd;AACA,uBAAgB,IAAhB;AACA,oBAAa,IAAb;AACA,sBAAe,IAAf;MAVK,CAAP,CAToC;AAqBpC,SAAI,aAAa,EAAE,MAAF,CAAS,IAAT,EAAe,gBAAf,CAAb,CArBgC;AAsBpC,SAAI,gBAAgB,EAAE,MAAF,CAAS,IAAT,EAAe,eAAf,CAAhB,CAtBgC;AAuBpC,SAAI,cAAc,EAAE,MAAF,CAAS,IAAT,EAAe,aAAf,CAAd,CAvBgC;AAwBpC,SAAI,oBAAoB,EAAE,MAAF,CAAS,IAAT,EAAe,mBAAf,CAApB,CAxBgC;AAyBpC,SAAI,UAAU,EAAE,MAAF,CAAS,IAAT,EAAe,SAAf,CAAV,CAzBgC;AA0BpC,SAAI,YAAY,EAAE,MAAF,CAAS,IAAT,EAAe,WAAf,CAAZ,CA1BgC;AA2BpC,SAAI,aAAa,EAAE,MAAF,CAAS,IAAT,EAAe,YAAf,CAAb,CA3BgC;AA4BpC,SAAI,eAAe,EAAE,MAAF,CAAS,IAAT,EAAe,cAAf,CAAf,CA5BgC;AA6BpC,SAAI,iBAAiB,EAAE,MAAF,CAAS,IAAT,EAAe,gBAAf,CAAjB,CA7BgC;AA8BpC,SAAI,cAAc,EAAE,MAAF,CAAS,IAAT,EAAe,aAAf,CAAd,CA9BgC;AA+BpC,SAAI,gBAAgB,EAAE,MAAF,CAAS,IAAT,EAAe,eAAf,CAAhB,CA/BgC;;AAiCpC,SAAI,iBAAiB,IAAjB,CAjCgC;AAkCpC,SAAI,kBAAkB,GAAlB,CAlCgC;;AAoCpC,WAAM,IAAI,KAAJ,CAAU,cAAV,EAA0B,GAA1B,CAA8B,UAAC,IAAD,EAAU;AAC1C,cAAO,KAAK,KAAL,CAAW,eAAX,EAA4B,GAA5B,CAAgC,UAAC,KAAD,EAAW;AAChD,aAAI,SAAJ,EAAe;AACb,mBAAQ,MAAK,MAAL,CAAY,KAAZ,CAAR,CADa;UAAf;;AAIA,aAAI,YAAY,KAAZ,CAL4C;AAMhD,aAAI,UAAJ,EAAgB;AACd,eAAI,gBAAgB,EAAhB,CADU;AAEd,mBAAQ,kBAAQ,OAAR,CAAgB,KAAhB,EAAuB,aAAvB,EAAsC;AAC5C,8BAAiB,GAAjB;AACA,0BAAa,IAAb;AACA,uBAAU,cAAV;YAHM,CAAR,CAFc;AAOd,uBAAY,CAAC,EAAE,OAAF,CAAU,aAAV,CAAD;;AAPE,kBASd,GAAU,EAAE,KAAF,CAAQ,OAAR,EAAiB,aAAjB,CAAV,CATc;UAAhB;;AAYA,aAAI,aAAJ,EAAmB;AACjB,mBAAQ,MAAM,OAAN,CAAc,2BAAd,EACN,wEADM,CAAR,CADiB;UAAnB;;;AAlBgD,aAwB5C,CAAC,SAAD,IAAc,YAAd,EAA4B;AAC9B,mBAAQ,oBAAU,MAAV,CAAiB,KAAjB,CAAR,CAD8B;UAAhC;;AAIA,aAAI,CAAC,SAAD,IAAc,WAAd,EAA2B;AAC7B,eAAI,qBAAJ;eACE,wBADF;eAEE,sBAFF,CAD6B;;AAK7B,eAAI,UAAJ,EAAgB;AACd,4BAAe,MAAM,KAAN,CAAY,UAAZ,CAAf,CADc;AAEd,iBAAI,gBAAgB,aAAa,MAAb,EAAqB;AACvC,mBAAI,aAAa,aAAa,CAAb,EAAgB,MAAhB,CAAuB,CAAvB,CAAb,CADmC;AAEvC,mBAAI,WAAW,EAAE,MAAF,CAAS,MAAM,eAAN,CAAsB,UAAtB,CAAT,CAAX,CAFmC;AAGvC,mBAAI,0EAAqE,0BAArE,CAHmC;AAIvC,uBAAQ,MAAM,OAAN,CAAc,UAAd,EAA0B,OAA1B,CAAR,CAJuC;cAAzC;YAFF;AASA,eAAI,aAAJ,EAAmB;AACjB,+BAAkB,MAAM,KAAN,CAAY,aAAZ,CAAlB,CADiB;AAEjB,iBAAI,mBAAmB,gBAAgB,CAAhB,CAAnB,EAAuC;AACzC,mBAAI,cAAa,gBAAgB,CAAhB,EAAmB,MAAnB,CAA0B,CAA1B,CAAb,CADqC;AAEzC,mBAAI,YAAW,EAAE,MAAF,CAAS,MAAM,eAAN,CAAsB,WAAtB,CAAT,CAAX,CAFqC;AAGzC,mBAAI,8HAAsH,wDAAtH,CAHqC;AAIzC,uBAAQ,MAAM,OAAN,CAAc,aAAd,EAA6B,QAA7B,CAAR,CAJyC;cAA3C;YAFF;AASA,eAAI,WAAJ,EAAiB;AACf,6BAAgB,MAAM,KAAN,CAAY,WAAZ,CAAhB,CADe;AAEf,iBAAI,iBAAiB,cAAc,CAAd,CAAjB,IAAqC,CAAC,YAAD,IAAiB,CAAC,eAAD,EAAkB;AAC1E,mBAAI,WAAW,cAAc,CAAd,EAAiB,MAAjB,CAAwB,CAAxB,CAAX,CADsE;AAE1E,mBAAI,YAAY,EAAE,MAAF,CAAS,MAAM,eAAN,CAAsB,QAAtB,CAAT,CAAZ,CAFsE;AAG1E,mBAAI,gEAA2D,wDAA3D,CAHsE;AAI1E,uBAAQ,MAAM,OAAN,CAAc,WAAd,EAA2B,aAA3B,CAAR,CAJ0E;cAA5E;YAFF;UAvBF;;AAkCA,gBAAO,KAAP,CA9DgD;QAAX,CAAhC,CAgEJ,IAhEI,CAgEC,eAhED,CAAP,CAD0C;MAAV,CAA9B,CAkEH,IAlEG,CAkEE,cAlEF,CAAN;;;AApCoC,SAyGhC,iBAAJ,EAAuB;AACrB,aAAM,IAAI,OAAJ,CAAY,OAAZ,EAAqB,IAArB,EAA2B,OAA3B,CAAmC,eAAnC,EAAoD,QAApD,CAAN,CADqB;MAAvB;;AAIA,SAAI,WAAW,QAAQ,MAAR,KAAmB,CAAnB,IAAwB,cAAnC,IAAqD,CAAE,OAAO,IAAP,CAAY,GAAZ,CAAF,EAAqB;;AAE5E,aAAM,IAAI,OAAJ,CAAY,MAAZ,EAAoB,SAApB,CAAN;;;AAF4E,UAK5E,GAAM,IAAI,OAAJ,CAAY,kBAAZ,EAAgC,SAAhC,CAAN,CAL4E;MAA9E;;AAQA,SAAI,iBAAJ,EAAuB;AACrB,WAAI,IAAI,OAAJ,CAAY,IAAZ,MAAsB,CAAC,CAAD,EAAI;AAC5B,eAAM,IAAI,OAAJ,CAAY,OAAZ,EAAqB,cAArB,CAAN,CAD4B;QAA9B;AAGA,WAAI,IAAI,OAAJ,CAAY,IAAZ,MAAsB,CAAC,CAAD,EAAI;AAC5B,eAAM,IAAI,OAAJ,CAAY,KAAZ,EAAmB,cAAnB,CAAN,CAD4B;QAA9B;MAJF;;AASA,YAAO,GAAP,CA9HoC;IAApB;;AAiIlB,qBAAkB,0BAAS,WAAT,EAAsB;AACtC,SAAI,UAAU,YAAY,KAAZ,CAAkB,YAAlB,CAAV,CADkC;AAEtC,SAAI,CAAC,OAAD,IAAY,QAAQ,MAAR,KAAmB,CAAnB,EAAsB;AACpC,iBAAU,YAAY,KAAZ,CAAkB,kBAAlB,CAAV,CADoC;MAAtC;AAGA,YAAQ,UAAU,QAAQ,MAAR,GAAiB,CAAjB,GAAqB,CAA/B,CAL8B;IAAtB;;AAQlB,6BAA0B,kCAAS,WAAT,EAAsB;AAC9C,YAAO,MAAM,gBAAN,CAAuB,WAAvB,KAAuC,MAAM,cAAN,IAAwB,YAAY,MAAZ,IAAsB,MAAM,cAAN,CAD9C;IAAtB;;AAI1B,UAAO,eAAU,GAAV,EAAe,IAAf,EAAqB;AAC1B,YAAO,OAAO,IAAP,CADmB;IAArB;;AAIP,iBAAc,sBAAS,GAAT,EAAc;AAC1B,SAAI,OAAO,GAAP,KAAe,QAAf,IAA2B,IAAI,QAAJ,EAAc;AAC3C,aAAM,IAAI,QAAJ,EAAN,CAD2C;MAA7C;AAGA,YAAO,IAAI,OAAJ,CAAY,uBAAZ,EAAqC,GAArC,KAA6C,GAA7C,CAJmB;IAAd;;AAOd,yBAAsB,8BAAU,IAAV,EAAgB;AACpC,SAAI,UAAU,KAAK,KAAL,CAAW,QAAX,CAAV,CADgC;AAEpC,SAAI,CAAC,OAAD,EAAU;AACZ,cAAO,IAAP,CADY;MAAd;;;AAFoC,SAOhC,WAAW,QAAQ,MAAR,GAAiB,CAAjB,CAPqB;AAQpC,SAAI,WAAW,CAAX,EAAc;AAChB,iBAAU,KAAK,KAAL,CAAW,cAAX,CAAV;;AADgB,cAGT,WAAW,QAAQ,MAAR,KAAoB,QAApB,EAA+B;AAC/C,gBAAO,KAAK,OAAL,CAAa,cAAb,EAA6B,EAA7B,CAAP,CAD+C;AAE/C,mBAAU,KAAK,KAAL,CAAW,cAAX,CAAV,CAF+C;QAAjD;MAHF;AAQA,YAAO,IAAP,CAhBoC;IAAhB;;AAmBtB,mDAAmB,SAAQ;AACzB,YAAO,QAAQ,MAAR,KAAmB,WAAnB,IACA,QAAQ,MAAR,KAAmB,MAAnB,IACA,QAAQ,MAAR,KAAmB,WAAnB,CAHkB;IA3ZjB;;;AAiaV,qBAAkB,0BAAS,OAAT,EAAkB;AAClC,YAAO,OAAO,QAAQ,KAAR,KAAkB,WAAzB,IAAwC,CAAC,QAAQ,EAAR,CADd;IAAlB;;AAIlB,sBAAmB,2BAAU,IAAV,EAAgB;AACjC,SAAI,MAAJ,CADiC;;AAGjC,aAAQ,IAAR;AACE,YAAK,OAAL;AACE,kBAAS,OAAT,CADF;AAEE,eAFF;AADF,YAIO,gBAAL,CAJF;AAKE,YAAK,cAAL;AACE,kBAAS,SAAT,CADF;AAEE,eAFF;AALF,YAQO,MAAL;AACE,kBAAS,MAAT,CADF;AAEE,eAFF;AARF;AAYI,kBAAS,SAAT,CADF;AAEE,eAFF;AAXF,MAHiC;;AAmBjC,YAAO,MAAP,CAnBiC;IAAhB;;AAsBnB,qBAAkB,0BAAU,KAAV,EAAgB;AAChC,SAAI,oBAAoB,KAApB,EAA2B;AAC7B,cAAO,MAAM,cAAN,CADsB;MAA/B,MAEO,IAAI,SAAS,SAAT,EAAoB;;AAE7B,aAAM,KAAN,GAF6B;AAG7B,WAAI,MAAM,SAAS,SAAT,CAAmB,WAAnB,EAAN,CAHyB;AAI7B,WAAI,SAAS,SAAS,SAAT,CAAmB,WAAnB,GAAiC,IAAjC,CAAsC,MAAtC,CAJgB;AAK7B,WAAI,SAAJ,CAAc,WAAd,EAA2B,CAAC,MAAM,KAAN,CAAY,MAAZ,CAA5B,CAL6B;AAM7B,cAAO,IAAI,IAAJ,CAAS,MAAT,GAAkB,MAAlB,CANsB;MAAxB;IAHS;;AAalB,oBAAiB,yBAAU,KAAV,EAAiB;AAC9B,YAAO,MAAM,YAAN,CADuB;IAAjB;;AAIjB,qBAAkB,0BAAS,KAAT,EAAgB,IAAhB,EAAqB;AACrC,SAAI;AACF,WAAI,MAAM,eAAN,EAAuB;AACzB,aAAI,QAAQ,MAAM,eAAN,EAAR,CADqB;AAEzB,eAAM,IAAN,CAAW,WAAX,EAAwB,IAAxB,EAFyB;AAGzB,eAAM,MAAN,GAHyB;QAA3B,MAKK;AACH,aAAI,CAAC,EAAE,WAAF,CAAc,MAAM,cAAN,CAAf,EAAsC;AACxC,iBAAM,KAAN,GADwC;AAExC,iBAAM,iBAAN,CAAwB,IAAxB,EAA8B,IAA9B,EAFwC;AAGxC,iBAAM,KAAN,GAHwC;UAA1C,MAIO;AACL,iBAAM,KAAN,GADK;UAJP;QANF;MADF,CAeE,OAAO,CAAP,EAAU,aAAV;IAhBc;;;;AAqBlB,2BAAwB,gCAAS,IAAT,EAAe,MAAf,EAAuB,cAAvB,EAAuC;AAC7D,sBAAiB,UAAU,MAAV,KAAqB,CAArB,GAAyB,IAAzB,GAAgC,CAAC,CAAC,cAAD,CADW;;AAG7D,SAAI,CAAC,IAAD,EAAM;AACR,cADQ;MAAV;;AAIA,SAAI,4BAA4B,IAA5B,EAAkC;AACpC,YAAK,sBAAL,CAA4B,cAA5B,EADoC;AAEpC,cAFoC;MAAtC;;AAKA,SAAI,sBAAsB,OAAO,gBAAP,CAAwB,MAAxB,EAAgC,IAAhC,CAAtB;SACF,uBAAuB,SAAS,oBAAoB,gBAApB,CAAqC,kBAArC,CAAT,EAAmE,EAAnE,KAA0E,CAA1E;SACvB,wBAAwB,SAAS,oBAAoB,gBAApB,CAAqC,mBAArC,CAAT,EAAoE,EAApE,KAA2E,CAA3E;SACxB,UAAU,KAAK,SAAL,GAAiB,OAAO,SAAP,GAAmB,OAAO,SAAP;SAC9C,aAAa,IAAC,CAAK,SAAL,GAAiB,OAAO,SAAP,GAAmB,KAAK,YAAL,GAAoB,oBAAxD,GAAiF,OAAO,SAAP,GAAmB,OAAO,YAAP;SAClH,WAAW,KAAK,UAAL,GAAkB,OAAO,UAAP,GAAoB,OAAO,UAAP;SACjD,YAAY,IAAC,CAAK,UAAL,GAAkB,OAAO,UAAP,GAAoB,KAAK,WAAL,GAAmB,qBAAzD,GAAmF,OAAO,UAAP,GAAoB,OAAO,WAAP;SACpH,eAAe,WAAW,CAAC,UAAD,CAnBiC;;AAqB7D,SAAI,CAAC,WAAW,UAAX,CAAD,IAA2B,cAA3B,EAA2C;AAC7C,cAAO,SAAP,GAAmB,KAAK,SAAL,GAAiB,OAAO,SAAP,GAAmB,OAAO,YAAP,GAAsB,CAAtB,GAA0B,oBAA9D,GAAqF,KAAK,YAAL,GAAoB,CAApB,CAD3D;MAA/C;;AAIA,SAAI,CAAC,YAAY,SAAZ,CAAD,IAA2B,cAA3B,EAA2C;AAC7C,cAAO,UAAP,GAAoB,KAAK,UAAL,GAAkB,OAAO,UAAP,GAAoB,OAAO,WAAP,GAAqB,CAArB,GAAyB,qBAA/D,GAAuF,KAAK,WAAL,GAAmB,CAAnB,CAD9D;MAA/C;;AAIA,SAAI,CAAC,WAAW,UAAX,IAAyB,QAAzB,IAAqC,SAArC,CAAD,IAAoD,CAAC,cAAD,EAAiB;AACvE,YAAK,cAAL,CAAoB,YAApB,EADuE;MAAzE;IA7BsB;;AAkCxB,qDAAoB,WAAW,SAAS;AACtC,YAAO,YAAY;AACjB,WAAI;AACF,gBAAO,UAAU,KAAV,CAAgB,OAAhB,EAAyB,SAAzB,CAAP,CADE;QAAJ,CAEE,OAAO,CAAP,EAAU;AACV,gBAAO,IAAP,CADU;QAAV;MAHG,CAD+B;IAngB9B;AA6gBV,uDAAqB,KAAK,MAAM,OAAO;AACrC,SAAI,EAAE,UAAF,CAAa,GAAb,EAAkB,OAAlB,CAAJ,EAAgC;AAC9B,cAAO,GAAP,CAD8B;MAAhC;AAGA,SAAI,MAAM,cAAI,KAAJ,CAAU,GAAV,CAAN,CAJiC;AAKrC,SAAI,kBAAJ,CAAuB,IAAvB,EAA6B,KAA7B,EALqC;AAMrC,YAAO,IAAI,QAAJ,EAAP,CANqC;IA7gB7B;AAshBV,6CAAgB,KAAK,OAAO;AAC1B,SAAI,EAAE,UAAF,CAAa,GAAb,EAAkB,OAAlB,CAAJ,EAAgC;AAC9B,cAAO,GAAP,CAD8B;MAAhC;AAGA,SAAI,MAAM,cAAI,KAAJ,CAAU,GAAV,CAAN,CAJsB;AAK1B,SAAI,WAAJ,CAAgB,KAAhB,EAL0B;AAM1B,YAAO,IAAI,QAAJ,EAAP,CAN0B;IAthBlB;AA+hBV,iEAA0B,KAAK;AAC7B,YAAO,KAAK,oBAAL,CAA0B,GAA1B,EAA+B,4BAA/B,EAA6D,mBAA7D,CAAP,CAD6B;IA/hBrB;;;AAmiBV,YAAS;AACP,eAAU,kBAAU,OAAV,EAAmB,UAAnB,EAA+B;AACvC,WAAI,WAAW,KAAX;WACA,QADJ,CADuC;;AAIvC,WAAI,EAAE,QAAF,CAAW,OAAX,CAAJ,EAAyB;AACvB,mBAAU,QAAQ,IAAR,EAAV,CADuB;AAEvB,aAAK,QAAQ,MAAR,GAAiB,UAAjB,EAA8B;AACjC,sBAAW,QAAQ,SAAR,CAAkB,CAAlB,EAAqB,aAAa,SAAS,MAAT,CAA7C,CADiC;AAEjC,sBAAW,SAAS,IAAT,EAAX,CAFiC;AAGjC,sBAAW,SAAS,MAAT,CAAgB,QAAhB,CAAX,CAHiC;UAAnC,MAIO;AACL,sBAAW,OAAX,CADK;UAJP;QAFF;AAUA,cAAO,YAAY,EAAZ,CAdgC;MAA/B;;AAiBV,gBAAW,mBAAS,IAAT,EAAe;AACxB,WAAI,QAAQ,KAAK,KAAL,CAAW,kBAAX,CAAR,CADoB;AAExB,cAAO,QAAQ;AACb,cAAK,OAAO,MAAM,CAAN,CAAP,CAAL;AACA,eAAM,MAAM,CAAN,CAAN;QAFK,GAGH,IAHG,CAFiB;MAAf;;AAQX,4BAAuB,+BAAS,GAAT,EAAc;AACnC,WAAI,OAAO,GAAP,KAAe,QAAf,EAAyB;AAC3B,gBAAO,GAAP,CAD2B;QAA7B;AAGA,cAAO,IAAI,OAAJ,CAAY,oHAAZ,EAAoF,EAApF,CAAP,CAJmC;MAAd;IA1BzB;;AAkCA,WAAQ;AACN,yBAAoB,4BAAU,YAAV,EAAwB,MAAxB,EAAgC;AAClD,WAAI,cAAc,EAAE,IAAF,CAAO,MAAP,CAAd;WACA,mBAAmB,EAAE,UAAF,CAAa,WAAb,EAA0B,YAA1B,CAAnB;WACA,aAFJ,CADkD;;AAKlD,uBAAgB,EAAE,MAAF,CAAS,EAAE,GAAF,CAAM,gBAAN,EAAwB,UAAU,QAAV,EAAoB;AACjE,gBAAO,OAAO,QAAP,CAAP,CADiE;QAApB,CAAjC,EAEV,UAAU,MAAV,EAAkB;AACtB,gBAAO,OAAO,IAAP,CADe;QAAlB,CAFN,CALkD;;AAWlD,cAAO,EAAE,GAAF,CAAM,aAAN,EAAqB,UAAU,MAAV,EAAkB;AAC5C,gBAAO;AACL,eAAI,OAAO,GAAP;AACJ,iBAAM,OAAO,IAAP;UAFR,CAD4C;QAAlB,CAA5B,CAXkD;MAAhC;AAkBpB,uDAAoB,OAAO;AACzB,cAAO,EAAE,SAAF,CAAY,KAAZ,EAAmB,UAAC,GAAD,EAAM,KAAN,EAAa,GAAb,EAAqB;AAC7C,aAAI,CAAC,MAAM,QAAN,EAAgB;AACnB,eAAI,GAAJ,IAAW,KAAX,CADmB;UAArB;AAGA,gBAAO,GAAP,CAJ6C;QAArB,CAA1B,CADyB;MAnBrB;IAAR;;AA6BA,sBAAmB,2BAAC,IAAD,EAAO,OAAP,EAAmB;AACpC,SAAI,eAAe,EAAE,MAAF,CAAS,IAAT,CAAf,CADgC;;AAGpC,SAAI,EAAE,QAAF,CAAW,OAAX,CAAJ,EAAyB;AACvB,iBAAU,EAAE,MAAF,CAAS,OAAT,CAAV,CADuB;AAEvB,cAAO,aAAa,OAAb,CAAqB,OAArB,eAAyC,qBAAzC,CAAP,CAFuB;MAAzB;;AAKA,SAAI,MAAM,CAAN,CARgC;;AAUpC,YAAO,EAAE,MAAF,CAAS,OAAT,EAAkB,UAAU,MAAV,EAAkB,KAAlB,EAAyB;AAChD,eAAQ,EAAE,MAAF,CAAS,KAAT,CAAR,CADgD;AAEhD,WAAI,cAAc,aAAa,OAAb,CAAqB,KAArB,EAA4B,GAA5B,CAAd;WACA,uBAAuB,aAAa,KAAb,CAAmB,GAAnB,EAAwB,WAAxB,CAAvB,CAH4C;AAIhD,aAAM,cAAc,MAAM,MAAN,CAJ4B;AAKhD,cAAO,OAAO,MAAP,CAAiB,oCAA+B,mBAAhD,CAAP,CALgD;MAAzB,EAMtB,EANI,EAMA,MANA,CAMO,aAAa,KAAb,CAAmB,GAAnB,CANP,CAAP,CAVoC;IAAnB;;AAmBnB,YAAS;;AAEP,YAAO,iBAAY;AACjB,WAAI,SAAS,EAAT,CADa;AAEjB,cAAO,OAAP,GAAiB,sBAAY,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AACtD,gBAAO,OAAP,GAAiB,OAAjB,CADsD;AAEtD,gBAAO,MAAP,GAAgB,MAAhB,CAFsD;QAA3B,CAA7B,CAFiB;AAMjB,cAAO,MAAP,CANiB;MAAZ;IAFT;;AAYA,iBAAc,sBAAU,MAAV,EAAkB;AAC9B,SAAI,WAAW,sCAAX;SAAmD,OAAO,EAAP,CADzB;AAE9B,OAAE,KAAF,CAAQ,MAAR,EAAgB,YAAM;AAAC,eAAQ,SAAS,MAAT,CAAgB,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,SAAS,MAAT,CAA3C,CAAR,CAAD;MAAN,CAAhB,CAF8B;AAG9B,YAAO,IAAP,CAH8B;IAAlB;;AAMd,YAAS;AACP,oBAAe,yBAAY;;AAEzB,WAAI,iBAAiB;;AAEnB,yBAFmB,EAGnB,gBAHmB,EAInB,eAJmB,EAKnB,aALmB,EAMnB,YANmB,EAOnB,mBAPmB,EAQnB,iBARmB,EASnB,cATmB,EAUnB,YAVmB,EAWnB,uBAXmB,EAYnB,cAZmB,EAanB,eAbmB,EAcnB,aAdmB,EAenB,YAfmB,EAgBnB,gBAhBmB,EAiBnB,4BAjBmB,EAkBnB,0BAlBmB,EAmBnB,aAnBmB,EAoBnB,gBApBmB,EAqBnB,cArBmB,CAAjB,CAFqB;;AA0BzB,WAAI,OAAO,WAAP,IAAsB,OAAO,WAAP,CAAmB,MAAnB,IACxB,OAAO,OAAO,WAAP,CAAmB,MAAnB,CAA0B,eAA1B,KAA8C,WAArD,EAAkE;AAClE,aAAI,UAAU,EAAV,CAD8D;AAElE,wBAAe,OAAf,CAAuB,UAAU,QAAV,EAAoB;AACzC,eAAI,QAAQ,OAAO,WAAP,CAAmB,MAAnB,CAA0B,QAA1B,IAAsC,OAAO,WAAP,CAAmB,MAAnB,CAA0B,iBAA1B,CAAtC,CAD6B;AAEzC,eAAI,QAAQ,CAAR,EAAW;AACb,qBAAQ,QAAR,IAAoB,KAApB,CADa;YAAf;UAFqB,CAAvB,CAFkE;AAQlE,gBAAO,OAAP,CARkE;QADpE;AAWA,cAAO,EAAP,CArCyB;MAAZ;;AAwCf,UAAK,eAAW;AACd,WAAI,OAAO,WAAP,EAAoB;AACtB,gBAAO,OAAO,WAAP,CAAmB,GAAnB,EAAP,CADsB;QAAxB;AAGA,cAAO,KAAK,GAAL,EAAP,CAJc;MAAX;IAzCP;;AAiDA,YAAS;AACP,gBAAW,EAAX;AACA,cAAS,EAAT;AACA,iBAAY,EAAZ;AACA,gBAAW,EAAX;AACA,WAAM,EAAN;AACA,UAAK,EAAL;AACA,YAAO,EAAP;AACA,UAAK,EAAL;AACA,UAAK,CAAL;AACA,aAAQ,EAAR;AACA,eAAU,EAAV;AACA,aAAQ,EAAR;AACA,gBAAW,CAAX;AACA,YAAO,EAAP;AACA,qCAAW,KAAK;AACd,cAAO,IAAI,QAAJ,KAAiB,IAAI,OAAJ,KAAgB,KAAK,SAAL,IAAkB,IAAI,OAAJ,KAAgB,KAAK,UAAL,CAAnE,CADO;MAfT;AAkBP,qCAAW,KAAK;AACd,cAAO,IAAI,QAAJ,IAAgB,IAAI,OAAJ,IAAe,IAAI,MAAJ,IAAc,IAAI,OAAJ,CADtC;MAlBT;IAAT;;;;;;;AA4BA,iBAAc,sBAAC,IAAD,EAAU;AACtB,SAAI,KAAK,SAAS,aAAT,CAAuB,KAAvB,CAAL,CADkB;AAEtB,QAAG,SAAH,GAAe,IAAf,CAFsB;AAGtB,YAAO,GAAG,SAAH,CAHe;IAAV;;AAMd,SAAM;AACJ,cAAS,mBAAY;AACnB,oCADmB;MAAZ;;AAIT,mBAAc,sBAAU,GAAV,EAAe;AAC3B,WAAI,GAAJ,EAAS;AACP,uBAAY,sBAAZ,CADO;QAAT;MADY;IALhB;;AAYA,YAAS;AACP,+BAAS;AACP,cAAO,IAAI,cAAJ,EAAP,CADO;MADF;AAKP,qCAAW,KAAuC;WAAlC,2DAAK,EAAE,IAAF,gBAA6B;WAArB,4DAAM,KAAK,MAAL,kBAAe;;AAChD,WAAI,EAAE,QAAF,CAAW,GAAX,KAAmB,GAAnB,EAAwB;AAC1B,aAAI,IAAJ,CAAS,MAAT,EAAiB,GAAjB,EAAsB,IAAtB,EAD0B;AAE1B,aAAI,kBAAJ,GAAyB,YAAY;AACnC,eAAI,IAAI,UAAJ,KAAmB,CAAnB,EAAsB;AACxB,gBAAG,IAAI,YAAJ,CAAH,CADwB;YAA1B;UADuB,CAFC;AAO1B,aAAI,IAAJ,GAP0B;QAA5B;MANK;IAAT;;AAkBA,UAAO;AAEL,yBAAK,KAAK,iBAAiB;;AAEzB,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;;AAEtC,aAAI,MAAM,IAAI,KAAJ,EAAN;aACA,UAAU,IAAV;aACA,UAAU,SAAV,OAAU,GAAM;AACd,eAAI,OAAJ,EAAa;AACX,0BAAa,OAAb,EADW;YAAb;AAGA,eAAI,MAAJ,GAAa,IAAI,OAAJ,GAAc,IAAd,CAJC;UAAN,CAJwB;;AAWlC,aAAI,MAAJ,GAAa,YAAM;AACjB,qBADiB;AAEjB,mBAAQ,GAAR,EAFiB;UAAN,CAXqB;;AAgBlC,aAAI,OAAJ,GAAc,YAAM;AAClB,qBADkB;AAElB,oBAFkB;UAAN,CAhBoB;;AAqBlC,mBAAU,WAAW,YAAM;AACzB,qBADyB;AAEzB,oBAFyB;UAAN,EAGlB,eAHO,CAAV,CArBkC;;AA0BlC,aAAI,GAAJ,GAAU,GAAV,CA1BkC;QAArB,CAAnB,CAFyB;MAFtB;;;;;;;;;;AAyCL,mCAAU,OAAO,KAAsB;WAAjB,gEAAU,qBAAO;;AACrC,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,aAAI,YAAY,WAAW,YAAM;AAC/B,iBAAM,MAAN,GAAe,MAAM,OAAN,GAAgB,IAAhB,CADgB;AAE/B,oBAF+B;UAAN,EAGxB,OAHa,CAAZ,CADkC;;AAMtC,eAAM,MAAN,GAAe,YAAM;AACnB,iBAAM,SAAN,GAAkB,IAAlB,CADmB;AAEnB,wBAAa,SAAb,EAFmB;AAGnB,mBAAQ,KAAR,EAHmB;UAAN,CANuB;AAWtC,eAAM,OAAN,GAAgB,YAAa;AAC3B,wBAAa,SAAb,EAD2B;AAE3B,8CAF2B;UAAb,CAXsB;;AAgBtC,eAAM,GAAN,GAAY,GAAZ,CAhBsC;QAArB,CAAnB,CADqC;MAzClC;;;;;;;;;AAoEL,uCAAY,gBAAiD;;;WAAjC,iEAAW,mBAAsB;WAAjB,kEAAY,mBAAK;;AAC3D,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,aAAI,SAAS,SAAS,aAAT,CAAuB,QAAvB,CAAT,CADkC;AAEtC,aAAI,cAAJ,CAFsC;;AAItC,gBAAK,IAAL,CAAU,cAAV,EAA0B,qBAAU,6BAAV,CAA1B,CAAmE,IAAnE,CAAwE,UAAC,GAAD,EAAS;AAC/E,eAAI,cAAJ,CAD+E;AAE/E,eAAI,eAAJ,CAF+E;AAG/E,mBAAQ,IAAI,YAAJ,GAAmB,IAAI,aAAJ,CAHoD;;AAK/E,eAAI,SAAS,CAAT,IAAc,IAAI,YAAJ,GAAmB,QAAnB,EAA6B;AAC7C,sBAAS,IAAI,aAAJ,IAAqB,WAAW,IAAI,YAAJ,CAAhC,CADoC;AAE7C,qBAAQ,QAAR,CAF6C;YAA/C,MAGO,IAAI,IAAI,aAAJ,GAAoB,SAApB,EAA+B;AACxC,qBAAQ,IAAI,YAAJ,IAAoB,YAAY,IAAI,aAAJ,CAAhC,CADgC;AAExC,sBAAS,SAAT,CAFwC;YAAnC,MAGA;AACL,qBAAQ,IAAI,YAAJ,CADH;AAEL,sBAAS,IAAI,aAAJ,CAFJ;YAHA;;AAQP,kBAAO,KAAP,GAAe,KAAf,CAhB+E;AAiB/E,kBAAO,MAAP,GAAgB,MAAhB,CAjB+E;;AAmB/E,eAAI,UAAU,OAAO,UAAP,CAAkB,IAAlB,CAAV,CAnB2E;AAoB/E,mBAAQ,SAAR,CAAkB,GAAlB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,KAA7B,EAAoC,MAApC,EApB+E;;AAsB/E,eAAG,OAAO,MAAP,EAAe;AAChB,oBAAO,MAAP,CAAc,OAAd,EADgB;YAAlB,MAEO,IAAI,OAAO,QAAP,EAAiB;AAC1B,iBAAI,eAAe,OAAO,QAAP,EAAf,CADsB;AAE1B,qBAAQ,YAAR,EAF0B;YAArB,MAGA,IAAG,OAAO,SAAP,IAAoB,OAAK,eAAL,CAAqB,GAArB,CAApB,EAA+C;AACvD,iBAAI,UAAU,OAAO,SAAP,EAAV,CADmD;AAEvD,qBAAQ,MAAM,IAAN,CAAW,cAAX,CAA0B,OAA1B,CAAR,EAFuD;YAAlD,MAGA;AACL,oBAAO,IAAI,KAAJ,CAAU,gCAAV,CAAP,EADK;YAHA;UA3B+D,CAAxE,CAJsC;QAArB,CAAnB,CAD2D;MApExD;;;;;;;;;AAoHL,+CAAgB,KAAK;AACnB,cAAO,IAAI,aAAJ,IAAqB,qBAAU,yBAAV,IACrB,IAAI,YAAJ,IAAoB,qBAAU,yBAAV,CAFR;MApHhB;IAAP;;AA0HA,aAAU;AACR,4BAAuB,+BAAU,WAAV,EAAuB,YAAvB,EAAqC;AAC1D,WAAI,YAAY,EAAE,QAAF,CAAW,WAAX,IAA0B,WAA1B,GAAwC,EAAxC;WACZ,QAAQ,EAAE,QAAF,CAAW,YAAX,IAA2B,YAA3B,GAA0C,EAA1C,CAF8C;;AAI1D,cAAO,EAAE,MAAF,CAAS,EAAT,EAAa,KAAb,EAAoB,SAApB,CAAP,CAJ0D;MAArC;;AAOvB,uBAAkB,0BAAU,YAAV,EAAwB;AACxC,WAAI,mBAAmB,aAAa,cAAb,CAA4B,kBAA5B,CAAnB,CADoC;AAExC,WAAI,mBAAmB,aAAa,cAAb,CAA4B,6BAA5B,CAAnB;;;;;;;AAFoC,WASpC,eAAe,EAAf,CAToC;AAUxC,oBAAa,KAAb,GAAqB,gBAArB,CAVwC;AAWxC,oBAAa,KAAb,GAAqB,gBAArB,CAXwC;AAYxC,cAAO,YAAP,CAZwC;MAAxB;IARpB;;AAwBA,QAAK;AACH,qDAAmB,SAAS,UAAwB;WAAd,8DAAQ,oBAAM;;AAClD,WAAI,iBAAiB,OAAjB,CAD8C;AAElD,WAAI,gBAAgB,IAAhB,CAF8C;;AAIlD,cAAO,cAAP,EAAuB;AACrB,aAAI,SAAS,cAAT,CAAJ,EAA8B;AAC5B,2BAAgB,cAAhB,CAD4B;AAE5B,iBAF4B;UAA9B;;AAKA,aAAI,cAAC,CAAe,aAAf,KAAiC,SAAS,IAAT,IAAmB,SAAS,eAAe,aAAf,KAAiC,KAAjC,EAAyC;AACzG,iBADyG;UAA3G;;AAIA,0BAAiB,eAAe,aAAf,CAVI;QAAvB;;AAaA,cAAO,aAAP,CAjBkD;MADjD;;;AAqBH,eAAU;AACR,yBAAI,SAAS;AACX,gBAAO;kBAAK,EAAE,OAAF,KAAc,QAAQ,WAAR,EAAd;UAAL,CADI;QADL;MAAV;IArBF;;AA4BA,QAAK;AACH,eAAU,kBAAU,GAAV,EAAe;AACvB,cAAO,IAAK,aAAJ,EAAD,CAAsB,iBAAtB,CAAwC,GAAxC,CAAP,CADuB;MAAf;IADZ;;AAMA,gBAAa;AACX,WAAM,CAAN;AACA,aAAQ,CAAR;AACA,YAAO,CAAP;IAHF;;EA56BE;;mBAo7BW;;;;;;;AC18Bf,mBAAkB,wD;;;;;;ACAlB;AACA,sD;;;;;;ACDA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC,E;;;;;;ACPD;AACA;AACA;AACA;AACA;;AAEA,EAAC;AACD;AACA;AACA;AACA,EAAC,oBAAoB;;AAErB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,gBAAgB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,SAAS;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,uFAAsF,IAAI;AAC1F;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,YAAY;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iCAAgC;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yLAAwL,IAAI;;AAE5L,sEAAqE,IAAI;;AAEzE;;AAEA;;AAEA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2CAA0C,YAAY;AACtD;AACA;AACA,cAAa;AACb;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA8B;AAC9B,iCAAgC;AAChC,8BAA6B,EAAE,EAAE;AACjC,8BAA6B,EAAE,EAAE;AACjC,mCAAkC,EAAE,EAAE;AACtC,kCAAiC;AACjC,sCAAqC;AACrC,0CAAyC;AACzC,8BAA6B,IAAI,EAAE;AACnC,8BAA6B,IAAI,EAAE;AACnC,mCAAkC,IAAI,EAAE;;AAExC,gCAA+B;AAC/B,qCAAoC;;AAEpC,+CAA8C;AAC9C,sDAAqD;;AAErD,yCAAwC,IAAI,IAAI;;AAEhD;AACA;AACA,iIAAgI,IAAI;;;AAGpI;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA,+CAA8C;AAC9C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,4CAA2C,EAAE,IAAI,EAAE;AACnD,yCAAwC,EAAE,IAAI,EAAE;;AAEhD;;AAEA;AACA,kCAAiC,EAAE;AACnC,4BAA2B,EAAE;AAC7B,8BAA6B,EAAE;AAC/B,4BAA2B,EAAE;AAC7B,0BAAyB,EAAE,IAAI,EAAE;AACjC,yBAAwB,EAAE;AAC1B,gCAA+B,GAAG;AAClC,0BAAyB,EAAE;AAC3B;AACA,4BAA2B,EAAE,IAAI,EAAE;AACnC,2BAA0B,EAAE,IAAI,EAAE;AAClC,yBAAwB,EAAE;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,6CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oBAAmB,+BAA+B;AAClD;AACA;;AAEA;AACA,eAAc,OAAO;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,sBAAsB;AACzC;AACA,uCAAsC;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,0CAAyC,gBAAgB;AACzD;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yEAAwE,EAAE;;AAE1E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS,6BAA6B;AACtC;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB;;AAEnB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qBAAoB;AACpB;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,cAAc;AACxC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA2C,qBAAqB;AAChE,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,4CAA2C,qBAAqB;AAChE,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAwB;AACxB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,OAAO;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA,cAAa;AACb;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;;AAGL;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAwB,mBAAmB;AAC3C;AACA;;AAEA;AACA;AACA;;AAEA,sBAAqB,mBAAmB;AACxC;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,mCAAkC,IAAI;;AAEtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,WAAW;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,2BAA0B,IAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;;AAEL;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,EAAC,G;;;;;;;ACvmHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACTA;;;;AACA;;;;;;AAEA,KAAM,iBAAiB,CAAjB;AACN,KAAM,gBAAgB;AACpB,gBAAa,IAAI,MAAJ,CAAW,wBAAa,WAAb,EAA0B,IAArC,CAAb;EADI;;mBAIS;;;;;;;;;;;;;AAab,YAAS,iBAAS,IAAT,EAAe,aAAf,EAA8B,MAA9B,EAAsC;AAC7C,mBAAc,WAAd,CAA0B,SAA1B,GAAsC,CAAtC,CAD6C;AAE7C,SAAI,KAAK,MAAL,IAAe,cAAf,IAAiC,CAAC,cAAc,WAAd,CAA0B,IAA1B,CAA+B,IAA/B,CAAD,EAAsC;AACzE,cAAO,KAAK,iBAAL,CAAuB,wBAAa,KAAb,EAAoB,IAA3C,EAAiD,IAAjD,EAAuD,KAAvD,EAA8D,aAA9D,EAA6E,MAA7E,CAAP,CADyE;AAEzE,cAAO,KAAK,iBAAL,CAAuB,wBAAa,GAAb,EAAkB,IAAzC,EAA+C,KAA/C,EAAsD,IAAtD,EAA4D,aAA5D,EAA2E,MAA3E,CAAP,CAFyE;MAA3E;;AAKA,YAAO,IAAP,CAP6C;IAAtC;;;;;AAaT,sBAAmB,2BAAS,OAAT,EAAkB,KAAlB,EAAyB,QAAzB,EAAmC,QAAnC,EAA6C,aAA7C,EAA4D,MAA5D,EAAoE;AACrF,SAAI,QAAQ,CAAR,CADiF;AAErF,SAAI,SAAS,CAAT,CAFiF;AAGrF,SAAI,eAAe,CAAf,CAHiF;AAIrF,SAAI,cAAc,CAAd,CAJiF;AAKrF,SAAI,kBAAkB,UAAlB,CALiF;;AAOrF,SAAI,CAAC,cAAc,OAAd,CAAD,EAAwB;AAC1B,qBAAc,OAAd,IAAyB,IAAI,MAAJ,CAAW,OAAX,EAAoB,IAApB,CAAzB,CAD0B;MAA5B;;AAIA,SAAI,KAAK,cAAc,OAAd,CAAL,CAXiF;AAYrF,QAAG,SAAH,GAAe,CAAf;;;AAZqF,SAejF,WAAY,OAAO,cAAP,CAAsB,UAAtB,IAAoC,OAAO,QAAP,GAAkB,IAAtD,CAfqE;AAgBrF,SAAI,kBAAmB,OAAO,cAAP,CAAsB,iBAAtB,IAA2C,OAAO,eAAP,GAAyB,GAApE,CAhB8D;AAiBrF,SAAI,cAAe,OAAO,cAAP,CAAsB,aAAtB,IAAuC,OAAO,WAAP,GAAqB,QAA5D,CAjBkE;AAkBrF,SAAI,cAAe,OAAO,cAAP,CAAsB,aAAtB,IAAuC,OAAO,WAAP,GAAqB,IAA5D,CAlBkE;AAmBrF,SAAI,cAAe,OAAO,cAAP,CAAsB,aAAtB,IAAuC,OAAO,WAAP,GAAqB,IAA5D,CAnBkE;;AAqBrF,SAAI,QAAQ,EAAR,CArBiF;AAsBrF,SAAI,WAAW,EAAX,CAtBiF;AAuBrF,SAAI,WAAW,CAAX,CAvBiF;AAwBrF,YAAQ,QAAQ,GAAG,IAAH,CAAQ,KAAR,CAAR,EAAyB;AAC/B,kBAD+B;AAE/B,WAAI,WAAW,QAAX,EAAqB;AACvB,eADuB;QAAzB;;AAIA,eAAQ,MAAM,KAAN;;;AANuB,WAS3B,SAAS,MAAM,SAAN,CAAgB,MAAhB,EAAwB,KAAxB,CAAT,CAT2B;AAU/B,WAAI,OAAO,MAAP,CAAc,OAAd,KAA0B,CAA1B,EAA6B;AAC/B,yBAAgB,SAAhB,GAA4B,MAA5B,CAD+B;AAE/B,aAAI,mBAAmB,MAAM,SAAN,CAAgB,MAAhB,EAAwB,MAAM,MAAN,CAAxB,CAAsC,MAAtC,CAA6C,eAA7C,CAAnB;;;AAF2B,aAK3B,mBAAmB,CAAnB,EAAsB;AACxB,kBAAO,KAAP,CADwB;UAA1B;;AAIA,uBAAc,mBAAmB,MAAnB;;;AATiB,WAY/B,CAAG,SAAH,GAAe,cAAc,CAAd,CAZgB;AAa/B,kBAAS,cAAc,CAAd,CAbsB;;AAe/B,kBAf+B;QAAjC;;;;;;;;AAV+B,YAkC/B,CAAM,CAAN,IAAW,qBAAW,eAAX,CAA2B,KAA3B,EAAkC,MAAM,CAAN,CAAlC,CAAX;;;;;;AAlC+B,WAwC3B,CAAC,qBAAW,sBAAX,CAAkC,KAAlC,EAAyC,MAAM,CAAN,CAAzC,CAAD,EAAqD;AACvD,eADuD;QAAzD;;;AAxC+B,mBA6C/B,GAAe,MAAM,CAAN,EAAS,MAAT,CA7CgB;AA8C/B,WAAI,UAAU,MAAM,MAAN,CAAa,KAAb,EAAoB,YAApB,CAAV;;;;;AA9C2B,WAmD3B,yBAAyB,QAAQ,MAAR,CAAe,WAAf,CAAzB,CAnD2B;AAoD/B,WAAI,yBAAyB,CAAzB,IAA8B,MAAM,MAAN,GAAe,QAAQ,YAAR,IAAwB,MAAM,QAAQ,YAAR,CAAN,KAAgC,GAAhC,EAAqC;AAC5G,aAAI,oBAAoB,QAAQ,MAAR,GAAiB,sBAAjB,CADoF;AAE5G,yBAAgB,iBAAhB,CAF4G;AAG5G,mBAAU,MAAM,MAAN,CAAa,KAAb,EAAoB,YAApB,CAAV,CAH4G;QAA9G;AAKA,WAAI,SAAS,OAAT,CAzD2B;;AA2D/B,WAAI,YAAY,CAAC,MAAM,CAAN,CAAD,EAAW;AACzB,kBAAS,YAAY,MAAZ,CADgB;QAA3B;;AAIA,WAAI,cAAc,IAAd;;;AA/D2B,WAkE3B,WAAJ,EAAiB;AACf,wBAAe,cAAc,WAAd,GAA4B,GAA5B,CADA;QAAjB;;AAIA,WAAI,WAAJ,EAAiB;AACf,wBAAe,4BAAf,CADe;QAAjB;;AAIA,sBAAe,SAAf,CA1E+B;;AA4E/B,WAAI,QAAJ,EAAc;AACZ,wBAAe,SAAf,CADY;QAAd;;AAIA,gBAAS,OAAO,OAAP,CAAe,IAAf,EAAqB,KAArB,CAAT,CAhF+B;AAiF/B,sBAAe,SAAS,GAAT;;;AAjFgB,WAoF3B,WAAJ,EAAiB;AACf,aAAI,QAAQ,WAAW,WAAW,MAAX,GAAoB,MAA/B,CADG;AAEf,wBAAe,aAAa,KAAb,GAAqB,GAArB,CAFA;QAAjB;;;AApF+B,WA0F3B,mBAAmB,QAAQ,MAAR,GAAiB,eAAjB,EAAkC;AACvD,mBAAU,QAAQ,MAAR,CAAe,CAAf,EAAkB,eAAlB,IAAqC,KAArC,CAD6C;QAAzD;;;AA1F+B,WA+F3B,QAAJ,EAAc;AACZ,mBAAU,QAAQ,OAAR,CAAgB,IAAI,MAAJ,CAAW,QAAX,EAAqB,GAArB,CAAhB,EAA2C,SAA3C,CAAV,CADY;QAAd;;AAIA,sBAAe,MAAM,OAAN,GAAgB,MAAhB;;;AAnGgB,WAsG3B,aAAJ,EAAmB;AACjB,uBAAc,IAAd,CAAmB,MAAnB,EADiB;QAAnB;;;AAtG+B,YA2G/B,GAAQ,MAAM,KAAN,CAAY,CAAZ,EAAe,KAAf,IAAwB,WAAxB,GAAsC,MAAM,KAAN,CAAY,QAAQ,YAAR,EAAsB,MAAM,MAAN,CAAxE,CA3GuB;AA4G/B,UAAG,SAAH,GAAe,QAAQ,YAAY,MAAZ,CA5GQ;AA6G/B,gBAAS,QAAQ,YAAY,MAAZ,CA7Gc;MAAjC;;AAgHA,YAAO,KAAP,CAxIqF;IAApE;;;;;;;;;;;;;;AClCrB;;;;;;;AAGA,KAAI,gBAAgB,CAAC,IAAD,EAAO,IAAP,CAAhB;AACJ,KAAI,OAAO,EAAE,OAAF,qBAAoB,aAApB,EAAmC,IAAnC,CAAwC,GAAxC,CAAP;;AAEJ,KAAI,gBAAgB;;AAElB,0BAAuB,qHAAvB;AACA,0BAAuB,uHAAvB;AACA,4BAAyB,wBAAzB;AACA;;;AAGE,wCACA,+CADA,GAEA,oDAFA;AAGF;;;;;;AAME,8CACA,4CADA,GAEA,gDAFA;AAGF,cAAW,4DAAX;AACA,gBAAa,gEAAb;AACA,mBAAgB,cAAc,IAAd,GAAqB,WAArB,GAAmC,IAAnC,GAA0C,IAA1C;AAChB,gBAAa,+BAAb;AACA,gBAAa,gBAAb;AACA,kBAAe,kCAAf;EAzBE;;mBA4BW;AACb,gBAAa,gBAAb;AACA,UAAO,2HAAP;;AAEA,QACE,QACA,KADA,GAEE,GAFF,GAGI,cAAc,qBAAd,GACA,cAAc,uBAAd,GACA,KALJ,GAMM,oCANN,GAOI,GAPJ,GAQI,cAAc,WAAd,GACA,cAAc,aAAd,GACF,KAVF,GAWI,cAAc,qBAAd,GACA,cAAc,uBAAd,GACA,KAbJ,GAcM,WAdN,GAeM,GAfN,GAgBM,cAAc,kBAAd,GACA,GAjBN,GAkBM,cAAc,SAAd,GACA,cAAc,WAAd,GACA,cAAc,cAAd,GACF,GArBJ,GAsBI,cAAc,WAAd,GACA,cAAc,aAAd,GACF,GAxBF,GAyBA,GAzBA;AA0BF,wBAAqB,mCAArB;AACA,oBAAiB,iHAAjB;;;;;;;;;;;;;mBCjEa,CACb,MADa,EAEb,MAFa,EAGb,MAHa,EAIb,KAJa,EAKb,KALa,EAMb,KANa,EAOb,MAPa,EAQb,MARa,EASb,KATa,EAUb,KAVa,EAWb,OAXa,EAYb,MAZa,EAab,KAba,EAcb,IAda,EAeb,MAfa,EAgBb,OAhBa,EAiBb,KAjBa,EAkBb,MAlBa,EAmBb,QAnBa,EAoBb,MApBa,EAqBb,KArBa,EAsBb,KAtBa,EAuBb,MAvBa,EAwBb,KAxBa,EAyBb,OAzBa,EA0Bb,KA1Ba,EA2Bb,QA3Ba,EA4Bb,KA5Ba,EA6Bb,IA7Ba,EA8Bb,IA9Ba,EA+Bb,IA/Ba,EAgCb,IAhCa,EAiCb,IAjCa,EAkCb,IAlCa,EAmCb,IAnCa,EAoCb,IApCa,EAqCb,IArCa,EAsCb,IAtCa,EAuCb,IAvCa,EAwCb,IAxCa,EAyCb,IAzCa,EA0Cb,IA1Ca,EA2Cb,IA3Ca,EA4Cb,IA5Ca,EA6Cb,IA7Ca,EA8Cb,IA9Ca,EA+Cb,IA/Ca,EAgDb,IAhDa,EAiDb,IAjDa,EAkDb,IAlDa,EAmDb,IAnDa,EAoDb,IApDa,EAqDb,IArDa,EAsDb,IAtDa,EAuDb,IAvDa,EAwDb,IAxDa,EAyDb,IAzDa,EA0Db,IA1Da,EA2Db,IA3Da,EA4Db,IA5Da,EA6Db,IA7Da,EA8Db,IA9Da,EA+Db,IA/Da,EAgEb,IAhEa,EAiEb,IAjEa,EAkEb,IAlEa,EAmEb,IAnEa,EAoEb,IApEa,EAqEb,IArEa,EAsEb,IAtEa,EAuEb,IAvEa,EAwEb,IAxEa,EAyEb,IAzEa,EA0Eb,IA1Ea,EA2Eb,IA3Ea,EA4Eb,IA5Ea,EA6Eb,IA7Ea,EA8Eb,IA9Ea,EA+Eb,IA/Ea,EAgFb,IAhFa,EAiFb,IAjFa,EAkFb,IAlFa,EAmFb,IAnFa,EAoFb,IApFa,EAqFb,IArFa,EAsFb,IAtFa,EAuFb,IAvFa,EAwFb,IAxFa,EAyFb,IAzFa,EA0Fb,IA1Fa,EA2Fb,IA3Fa,EA4Fb,IA5Fa,EA6Fb,IA7Fa,EA8Fb,IA9Fa,EA+Fb,IA/Fa,EAgGb,IAhGa,EAiGb,IAjGa,EAkGb,IAlGa,EAmGb,IAnGa,EAoGb,IApGa,EAqGb,IArGa,EAsGb,IAtGa,EAuGb,IAvGa,EAwGb,IAxGa,EAyGb,IAzGa,EA0Gb,IA1Ga,EA2Gb,IA3Ga,EA4Gb,IA5Ga,EA6Gb,IA7Ga,EA8Gb,IA9Ga,EA+Gb,IA/Ga,EAgHb,IAhHa,EAiHb,IAjHa,EAkHb,IAlHa,EAmHb,IAnHa,EAoHb,IApHa,EAqHb,IArHa,EAsHb,IAtHa,EAuHb,IAvHa,EAwHb,IAxHa,EAyHb,IAzHa,EA0Hb,IA1Ha,EA2Hb,IA3Ha,EA4Hb,IA5Ha,EA6Hb,IA7Ha,EA8Hb,IA9Ha,EA+Hb,IA/Ha,EAgIb,IAhIa,EAiIb,IAjIa,EAkIb,IAlIa,EAmIb,IAnIa,EAoIb,IApIa,EAqIb,IArIa,EAsIb,IAtIa,EAuIb,IAvIa,EAwIb,IAxIa,EAyIb,IAzIa,EA0Ib,IA1Ia,EA2Ib,IA3Ia,EA4Ib,IA5Ia,EA6Ib,IA7Ia,EA8Ib,IA9Ia,EA+Ib,IA/Ia,EAgJb,IAhJa,EAiJb,IAjJa,EAkJb,IAlJa,EAmJb,IAnJa,EAoJb,IApJa,EAqJb,IArJa,EAsJb,IAtJa,EAuJb,IAvJa,EAwJb,IAxJa,EAyJb,IAzJa,EA0Jb,IA1Ja,EA2Jb,IA3Ja,EA4Jb,IA5Ja,EA6Jb,IA7Ja,EA8Jb,IA9Ja,EA+Jb,IA/Ja,EAgKb,IAhKa,EAiKb,IAjKa,EAkKb,IAlKa,EAmKb,IAnKa,EAoKb,IApKa,EAqKb,IArKa,EAsKb,IAtKa,EAuKb,IAvKa,EAwKb,IAxKa,EAyKb,IAzKa,EA0Kb,IA1Ka,EA2Kb,IA3Ka,EA4Kb,IA5Ka,EA6Kb,IA7Ka,EA8Kb,IA9Ka,EA+Kb,IA/Ka,EAgLb,IAhLa,EAiLb,IAjLa,EAkLb,IAlLa,EAmLb,IAnLa,EAoLb,IApLa,EAqLb,IArLa,EAsLb,IAtLa,EAuLb,IAvLa,EAwLb,IAxLa,EAyLb,IAzLa,EA0Lb,IA1La,EA2Lb,IA3La,EA4Lb,IA5La,EA6Lb,IA7La,EA8Lb,IA9La,EA+Lb,IA/La,EAgMb,IAhMa,EAiMb,IAjMa,EAkMb,IAlMa,EAmMb,IAnMa,EAoMb,IApMa,EAqMb,IArMa,EAsMb,IAtMa,EAuMb,IAvMa,EAwMb,IAxMa,EAyMb,IAzMa,EA0Mb,IA1Ma,EA2Mb,IA3Ma,EA4Mb,IA5Ma,EA6Mb,IA7Ma,EA8Mb,IA9Ma,EA+Mb,IA/Ma,EAgNb,IAhNa,EAiNb,IAjNa,EAkNb,IAlNa,EAmNb,IAnNa,EAoNb,IApNa,EAqNb,IArNa,EAsNb,IAtNa,EAuNb,IAvNa,EAwNb,IAxNa,EAyNb,IAzNa,EA0Nb,IA1Na,EA2Nb,IA3Na,EA4Nb,IA5Na,EA6Nb,IA7Na,EA8Nb,IA9Na,EA+Nb,IA/Na,EAgOb,IAhOa,EAiOb,IAjOa,EAkOb,IAlOa,EAmOb,IAnOa,EAoOb,IApOa,EAqOb,IArOa,EAsOb,IAtOa,EAuOb,IAvOa,EAwOb,IAxOa,EAyOb,IAzOa,EA0Ob,IA1Oa,EA2Ob,IA3Oa,EA4Ob,IA5Oa,EA6Ob,IA7Oa,EA8Ob,IA9Oa,EA+Ob,IA/Oa,EAgPb,IAhPa,EAiPb,IAjPa,EAkPb,IAlPa,EAmPb,IAnPa,EAoPb,IApPa,EAqPb,IArPa,EAsPb,IAtPa,EAuPb,IAvPa,EAwPb,IAxPa,EAyPb,IAzPa,EA0Pb,IA1Pa,EA2Pb,IA3Pa,EA4Pb,IA5Pa,EA6Pb,IA7Pa,EA8Pb,IA9Pa,EA+Pb,IA/Pa,EAgQb,IAhQa,EAiQb,IAjQa,EAkQb,IAlQa,EAmQb,IAnQa,EAoQb,IApQa,EAqQb,IArQa,EAsQb,IAtQa,EAuQb,IAvQa,EAwQb,IAxQa,EAyQb,IAzQa,EA0Qb,IA1Qa,EA2Qb,IA3Qa,EA4Qb,IA5Qa,EA6Qb,IA7Qa,EA8Qb,IA9Qa,EA+Qb,IA/Qa,EAgRb,IAhRa,EAiRb,IAjRa,EAkRb,IAlRa,EAmRb,IAnRa,EAoRb,IApRa,EAqRb,IArRa,EAsRb,IAtRa,EAuRb,IAvRa,EAwRb,IAxRa,EAyRb,IAzRa,EA0Rb,IA1Ra,EA2Rb,IA3Ra;;;;;;;;;;;;;ACDf;;;;AACA;;;;AACA;;;;;;mBAEe;;AAEb,cAAW,IAAI,MAAJ,CAAW,wBAAc,GAAd,EAAmB,GAA9B,CAAX;AACA,eAAY,IAAI,MAAJ,CAAW,wBAAc,GAAd,EAAmB,IAA9B,CAAZ;AACA,wBAAqB,IAAI,MAAJ,CAAW,wBAAc,mBAAd,CAAhC;AACA,uBAAoB;AAClB,UAAK,GAAL;AACA,UAAK,GAAL;AACA,UAAK,GAAL;IAHF;;;;;;;;;AAaA,wBAAqB,6BAAC,GAAD,EAAS;AAC5B,YAAO,IAAI,KAAJ,CAAU,MAAV,EAAkB,CAAlB,CAAP,CAD4B;IAAT;;;;;;;;;;;;AAcrB,uBAAoB,4BAAU,GAAV,EAAe,EAAf,EAAmB,GAAnB,EAAwB,WAAxB,EAAqC;AACvD,SAAI,CAAC,gBAAgB,IAAhB,CAAqB,GAArB,CAAD,EAA2B;AAC7B,yBAAgB,GAAhB,CAD6B;MAA/B;AAGA,YAAO;AACL,aAAM,iBAAO,GAAP,CAAW,KAAK,IAAL,CAAX,CAAsB,MAAtB,EAAN;AACA,iBAAU,oBAAU,QAAV,CAAmB,GAAnB,CAAV;AACA,WAAI,EAAE,QAAF,EAAJ;AACA,kBAAW,WAAX;AACA,YAAK,GAAL;AACA,oBAAa,IAAI,OAAJ,CAAY,WAAZ,EAAyB,EAAzB,CAAb;MANF,CAJuD;IAArC;;;;;;;;;AAqBpB,yBAAsB,8BAAU,KAAV,EAAiB;AACrC,YAAO,MAAM,KAAN,CAAY,KAAK,UAAL,CAAnB,CADqC;IAAjB;;;;;;;;;AAWtB,iBAAc,sBAAU,KAAV,EAAiB;AAC7B,YAAO,KAAK,SAAL,CAAe,IAAf,CAAoB,KAApB,CAAP,CAD6B;IAAjB;;;;;;;;;AAWd,iDAAkB,KAAI;AACpB,YAAO,IAAI,OAAJ,CAAY,QAAZ,EAAsB,EAAtB,CAAP,CADoB;IA3ET;;;;;;;;;;;;;;;AA2Fb,6CAAgB,OAAO,OAAO;AAC5B,SAAI,cAAc,MAAM,OAAN,CAAc,KAAd,CAAd,CADwB;AAE5B,SAAI,qBAAqB,MAAM,MAAN,CAAa,eAAe,MAAM,MAAN,GAAe,CAAf,CAAf,CAAlC,CAFwB;AAG5B,SAAI,aAAa,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,kBAA9B,CAAb,CAHwB;;AAK5B,SAAI,cAAc,KAAK,aAAL,CAAmB,KAAnB,EAA0B,KAA1B,CAAd,EAAgD;AAClD,cAAO,KAAK,eAAL,CAAqB,KAArB,EAA4B,MAAM,KAAN,CAAY,CAAZ,EAAe,CAAC,CAAD,CAA3C,CAAP,CADkD;MAApD;;AAIA,YAAO,KAAP,CAT4B;IA3FjB;;;;;;;;;;;;AAgHb,2DAAuB,OAAO,mBAAmB;AAC/C,SAAI,mBAAmB,KAAK,kBAAL,CAAwB,iBAAxB,CAAnB;;;AAD2C,SAI3C,gBAAgB,IAAI,MAAJ,OAAe,sBAAf,EAAoC,GAApC,CAAhB,CAJ2C;AAK/C,SAAI,iBAAiB,IAAI,MAAJ,OAAe,uBAAf,EAAqC,GAArC,CAAjB,CAL2C;;AAO/C,SAAI,eAAe,MAAM,KAAN,CAAY,aAAZ,KAA8B,EAA9B,CAP4B;AAQ/C,SAAI,gBAAgB,MAAM,KAAN,CAAY,cAAZ,KAA+B,EAA/B,CAR2B;;AAU/C,YAAO,aAAa,MAAb,KAAwB,cAAc,MAAd,GAAuB,IAA/C,GAAsD,KAAtD,CAVwC;IAhHpC;;;;;;;;;;AAoIb,yCAAc,OAAO,OAAO;AAC1B,SAAI,cAAc,MAAM,OAAN,CAAc,KAAd,CAAd,CADsB;AAE1B,SAAI,YAAY,MAAM,MAAN,CAAa,eAAe,MAAM,MAAN,GAAe,CAAf,CAAf,CAAzB,CAFsB;;AAI1B,SAAI,KAAK,kBAAL,CAAwB,SAAxB,CAAJ,EAAwC;AACtC,WAAI,CAAC,KAAK,sBAAL,CAA4B,KAA5B,EAAmC,SAAnC,CAAD,EAAgD;AAClD,gBAAO,IAAP,CADkD;QAApD;;AAIA,cAAO,KAAP,CALsC;MAAxC;;AAQA,YAAO,IAAP,CAZ0B;IApIf;;;;;;;;;;;;;AA6Jb,2DAAuB,OAAO,OAAO;AACnC,SAAI,cAAc,MAAM,OAAN,CAAc,KAAd,CAAd,CAD+B;AAEnC,SAAI,yBAAyB,MAAM,MAAN,CAAa,cAAc,MAAM,MAAN,CAApD,CAF+B;AAGnC,SAAI,0BAA0B,CAAC,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,sBAA9B,CAAD,EAAwD;AACpF,cAAO,KAAP,CADoF;MAAtF;AAGA,YAAO,IAAP,CANmC;IA7JxB;;;;;;;;;;AA6Kb,uDAAqB,OAAM;AACzB,SAAI,qBAAqB,IAAI,MAAJ,CAAW,wBAAc,eAAd,CAAhC,CADqB;AAEzB,YAAO,mBAAmB,IAAnB,CAAwB,KAAxB,CAAP,CAFyB;IA7Kd;;;;;;;;;;;;;mBCHA;;AAEb,kBAAe,EAAf;;AAEA,oBAAiB,yBAAU,GAAV,EAAe;AAC9B,YAAO,SAAQ,IAAR,CAAa,GAAb,CAAP;OAD8B;IAAf;;AAIjB,YAAS,iBAAU,GAAV,EAAe;AACtB,YAAO,SAAQ,IAAR,CAAa,GAAb,CAAP;OADsB;IAAf;;AAIT,aAAU,kBAAS,GAAT,EAAc;AACtB,YAAO,QAAQ,OAAR,IAAmB,UAAU,IAAV,CAAe,GAAf,CAAnB,CADe;IAAd;;AAIV,cAAW,mBAAS,GAAT,EAAc;AACvB,YAAO,QAAQ,QAAR,IAAoB,WAAW,IAAX,CAAgB,GAAhB,CAApB,CADgB;IAAd;;AAIX,YAAS,iBAAS,GAAT,EAAc;AACrB,YAAO,CAAC,KAAK,eAAL,CAAqB,GAArB,KAA6B,KAAK,OAAL,CAAa,GAAb,CAA7B,CAAD,IAAoD,CAAC,KAAK,QAAL,CAAc,GAAd,CAAD,IAAuB,CAAC,KAAK,SAAL,CAAe,GAAf,CAAD,CAD7D;IAAd;;AAIT,aAAU,kBAAU,GAAV,EAAe;AACvB,SAAI,CAAC,GAAD,EAAM;AACR,cAAO,KAAP,CADQ;MAAV;;AAIA,YAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAP,CALuB;IAAf;;AAQV,WAAQ,gBAAU,GAAV,EAAe;AACrB,SAAI,CAAC,GAAD,EAAM;AACR,cAAO,KAAP,CADQ;MAAV;;AAIA,YAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,EAAkB,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAP,CALqB;IAAf;;AAQR,aAAU,kBAAU,GAAV,EAAe;AACvB,SAAI,OAAO,KAAK,IAAL,CAAU,GAAV,CAAP,CADmB;AAEvB,SAAI,KAAK,KAAK,MAAL,CAAY,CAAZ,EAAe,KAAK,OAAL,CAAa,GAAb,CAAf,CAAL,CAFmB;AAGvB,YAAO,SAAS,EAAT,EAAa,EAAb,CAAP,CAHuB;IAAf;;AAMV,oBAAiB,yBAAU,OAAV,EAAmB;AAClC,YAAO,YAAY,SAAZ,CAD2B;IAAnB;;AAIjB,mBAAgB,wBAAU,OAAV,EAAmB;AACjC,YAAO,YAAY,QAAZ,CAD0B;IAAnB;;AAIhB,SAAM,cAAU,GAAV,EAAe;AACnB,SAAI,CAAC,GAAD,EAAM;AACR,cAAO,KAAP,CADQ;MAAV;;AAIA,YAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAP,CALmB;IAAf;;AAQN,aAAU,kBAAU,GAAV,EAAe;;;AAGvB,SAAI,IAAI,IAAI,OAAJ,CAAY,GAAZ,CAAJ,CAHmB;AAIvB,SAAI,MAAM,CAAC,CAAD,EAAI;AACZ,cAAO,IAAP,CADY;MAAd;AAGA,YAAO,IAAI,MAAJ,CAAW,IAAI,CAAJ,CAAlB,CAPuB;IAAf;;AAUV,cAAW,mBAAU,GAAV,EAAe;AACxB,SAAI,OAAO,KAAK,IAAL,CAAU,GAAV,CAAP,CADoB;AAExB,SAAI,OAAO,KAAK,MAAL,CAAY,KAAK,OAAL,CAAa,GAAb,IAAoB,CAApB,CAAnB,CAFoB;AAGxB,YAAO,IAAP,CAHwB;IAAf;;;AAOX,aAAU,kBAAU,GAAV,EAAe;AACvB,YAAO,IAAI,OAAJ,CAAY,IAAZ,EAAkB,MAAlB,CAAP,CADuB;IAAf;;AAIV,YAAS,iBAAU,GAAV,EAAe;AACtB,SAAI,OAAO,KAAK,IAAL,CAAU,GAAV,CAAP,CADkB;AAEtB,SAAI,IAAJ,EAAU;AACR,WAAI,KAAK,KAAK,MAAL,CAAY,KAAK,OAAL,CAAa,GAAb,IAAoB,CAApB,CAAjB,CADI;AAER,WAAI,GAAG,KAAH,CAAS,eAAT,CAAJ,EAA+B;AAC7B,gBAAO,SAAS,EAAT,EAAa,EAAb,CAAP,CAD6B;QAA/B;MAFF;;AAOA,YAAO,IAAP,CATsB;IAAf;;AAYT,cAAW,mBAAU,GAAV,EAAe;AACxB,YAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAP,CADwB;IAAf;;AAIX,qBAAkB,0BAAU,GAAV,EAAe,YAAf,EAA6B;;AAE7C,SAAI,OAAO,YAAP,KAAwB,WAAxB,EAAqC;AACvC,sBAAe,SAAf,CADuC;MAAzC;AAGA,SAAI,CAAC,GAAD,IAAQ,OAAO,GAAP,KAAe,WAAf,EAA4B;AACtC,cAAO,YAAP,CADsC;MAAxC;;AAIA,WAAM,KAAK,QAAL,CAAc,GAAd,CAAN,CAT6C;AAU7C,SAAI,SAAS,KAAK,aAAL,CAAmB,GAAnB,CAAT,CAVyC;AAW7C,SAAI,MAAJ,EAAY;AACV,cAAO,OAAO,IAAP,CADG;MAAZ;;AAIA,YAAO,YAAP,CAf6C;IAA7B;;;;;;;;;;AA0BlB,oBAAiB,yBAAS,SAAT,EAAoB,OAApB,EAA6B,IAA7B,EAAmC;AAClD,YAAO,UAAU,GAAV,IAAiB,OAAO,SAAP,KAAqB,QAArB,GAAgC,UAAU,WAAV,EAAhC,GAA0D,SAA1D,CAAjB,GAAwF,GAAxF,GAA8F,IAA9F,CAD2C;IAAnC;;;;;;;;;;;;;;;;;;;;;;;AC7HnB;;;;;;AADA,KAAI,kBAAkB,kBAAlB;;;AAGJ,UAAS,aAAT,CAAuB,QAAvB,EAAiC;;;AAG/B,OAAI,QAAQ,4EAAR,CAH2B;AAI/B,OAAI,SAAS,OAAT,CAAiB,GAAjB,MAA0B,CAA1B,EAA6B;AAC/B,cAAS,eAAe,QAAf,GAA0B,WAA1B,CADsB;IAAjC,MAEO;AACL,cAAS,MAAM,QAAN,GAAiB,IAAjB,CADJ;IAFP;AAKA,UAAO,IAAI,MAAJ,CAAW,KAAX,EAAkB,KAAlB,CAAP,CAT+B;EAAjC;;AAYA,KAAI,YAAY;AACd,gBAAa,GAAb;AACA,cAAW,EAAX;AACA,YAAS,EAAT;AACA,mBAAgB,EAAhB;AACA,eAAY,EAAZ;AACA,aAAU;AACR,cAAS,aAAT;AACA,iBAAY,YAAZ;IAFF;;AAKA,SAAM,gBAAW;AACf,UAAK,UAAL,CAAgB,KAAK,SAAL,CAAhB,CADe;AAEf,YAAO,IAAP,CAFe;IAAX;;AAKN,eAAY,oBAAS,OAAT,EAAkB;;;AAC5B,OAAE,IAAF,CAAO,OAAP,EAAgB,UAAC,MAAD,EAAS,GAAT,EAAiB;AAC/B,WAAI,OAAO,QAAP,KAAoB,GAApB,EAAyB;AAC3B,gBAAO,QAAP,GAAkB,KAAlB,CAD2B;QAA7B,MAEO,IAAI,OAAO,QAAP,KAAoB,SAApB,EAA+B;;AAExC,gBAAO,QAAP,GAAkB,MAAlB,CAFwC;QAAnC;AAIP,WAAI,CAAC,EAAE,QAAF,CAAW,OAAO,KAAP,CAAZ,EAA2B;AAC7B,gBAAO,KAAP,GAAe,cAAc,OAAO,KAAP,CAA7B,CAD6B;QAA/B;;AAIA,aAAK,OAAL,CAAa,GAAb,IAAoB,MAApB,CAX+B;MAAjB,CAAhB,CAD4B;;AAe5B,YAAO,KAAK,OAAL,CAfqB;IAAlB;;;;;;;;;;AA0BZ,QAAK,aAAS,QAAT,EAAmB,QAAnB,EAA6B,MAA7B,EAAqC,KAArC,EAA4C,IAA5C,EAAkD;AACrD,SAAI,MAAM,MAAM,QAAN,GAAiB,GAAjB;;;;AAD2C,SAKrD,CAAK,SAAL,CAAe,GAAf,IAAsB;AACpB,aAAM,QAAN;AACA,eAAQ,MAAR;AACA,cAAO,KAAP;AACA,iBAAU,MAAM,QAAN,GAAiB,GAAjB;AACV,aAAM,IAAN;MALF,CALqD;IAAlD;;AAcL,YAAS,iBAAS,SAAT,EAAqC;;;SAAjB,mEAAa,kBAAI;;AAC5C,UAAK,SAAL,GAAiB,EAAE,SAAF,CAAY,UAAZ,CAAjB,CAD4C;;AAG5C,OAAE,IAAF,CAAO,SAAP,EAAkB,UAAC,QAAD,EAAc;AAC9B,cAAK,GAAL,CAAS,SAAS,IAAT,EAAe,SAAS,QAAT,EAAmB,SAAS,CAAT,EAAY,SAAS,CAAT,EAAY,SAAS,IAAT,CAAnE,CAD8B;MAAd,CAAlB,CAH4C;;AAO5C,YAAO,KAAK,SAAL,CAPqC;IAArC;;AAUT,eAAY,oBAAS,SAAT,EAAoB;;;AAC9B,SAAI,eAAe,EAAf,CAD0B;;2DAGT,KAAK,gBAAL,CAAsB,SAAtB,IAHS;;AAG9B,8CAAyD;AAApD,WAAI,cAAJ,CAAoD;AACvD,oBAAa,GAAb,IAAoB,IAApB,CADuD;MAAzD;;AAIA,OAAE,KAAF,CAAQ,KAAK,SAAL,EAAgB,UAAC,QAAD,EAAW,GAAX,EAAmB;AACzC,WAAG,CAAC,aAAa,GAAb,CAAD,EAAoB;AACrB,gBAAO,OAAK,SAAL,CAAe,GAAf,CAAP,CADqB;QAAvB;MADsB,CAAxB,CAP8B;;AAa9B,YAAO,KAAK,SAAL,CAbuB;IAApB;;AAgBZ,gDAAkB,0BAAW,SAAX;yFACP;;;;;;;;;;oDAAY;;;;;;;;AAAZ;;oBACD,MAAM,SAAS,QAAT,GAAoB,GAA1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAFQ,CAAlB;;AAMA,iBAAc,sBAAS,OAAT,EAAkB;AAC9B,YAAO,QAAQ,KAAR,CAAc,eAAd,KAAkC,EAAlC,CADuB;IAAlB;;AAId,+CAAiB,SAAQ;AACvB,SAAI,gBAAgB,KAAK,YAAL,CAAkB,OAAlB,CAAhB,CADmB;AAEvB,YAAO,EAAE,MAAF,CAAS,KAAK,SAAL,EAAgB,UAAC,QAAD,EAAc;AAC3C,cAAO,cAAc,OAAd,CAAsB,SAAS,QAAT,CAAtB,KAA6C,CAAC,CAAD,CADT;MAAd,CAAhC,CAFuB;IA5FX;;;;;;AAsGd,WAAQ,gBAAS,OAAT,EAAkB;;;AACxB,SAAI,YAAY,KAAK,YAAL,CAAkB,OAAlB,CAAZ,CADoB;;AAGxB,SAAI,UAAU,MAAV,EAAkB;AACpB,SAAE,IAAF,CAAO,SAAP,EAAkB,oBAAY;AAC5B,aAAI,WAAW,OAAK,SAAL,CAAe,SAAS,WAAT,EAAf,CAAX,CADwB;;AAG5B,aAAI,QAAJ,EAAc;AACZ,qBAAU,OAAK,iBAAL,CAAuB,OAAvB,EAAgC,QAAhC,CAAV,CADY;UAAd;QAHgB,CAAlB,CADoB;MAAtB;;AAUA,OAAE,IAAF,CAAO,KAAK,OAAL,EAAc;cAAU,UAAU,OAAK,iBAAL,CAAuB,OAAvB,EAAgC,MAAhC,CAAV;MAAV,CAArB,CAbwB;;AAexB,YAAO,OAAP,CAfwB;IAAlB;;AAkBR,sBAAmB,2BAAS,IAAT,EAAe,QAAf,EAAyB;AAC1C,SAAI,MAAM,KAAK,YAAL,CAAkB,SAAS,IAAT,CAAxB,CADsC;AAE1C,SAAI,CAAC,SAAS,KAAT,EAAgB;AACnB,gBAAS,KAAT,GAAiB,cAAc,QAAQ,SAAS,QAAT,GAAoB,KAA5B,CAA/B,CADmB;MAArB;;;AAF0C,YAOnC,KAAK,OAAL,CAAa,SAAS,KAAT,EAAgB,UAAC,KAAD,EAAQ,EAAR,EAAY,EAAZ,EAAgB,EAAhB,EAAuB;AACzD,WAAI,EAAJ,EAAQ;AACN,wDAA6C,SAAS,QAAT,eAA2B,SAAS,QAAT,kBAA8B,SAAS,MAAT,iBAA2B,SAAS,KAAT,eAAwB,kGAAzJ,CADM;QAAR;AAGA,cAAO,KAAP,CAJyD;MAAvB,CAApC,CAP0C;IAAzB;;AAenB,kBAAe,uBAAS,OAAT,EAAkB;;;AAC/B,SAAI;AACF,WAAI,YAAY,KAAK,YAAL,CAAkB,OAAlB,CAAZ;WACA,OAAO,oFAAP;WACA,MAAM,OAAO,OAAP;WACN,OAAO,CAAC,IAAD,CAAP,CAJF;;AAMF,iBAAU,OAAV,CAAkB,UAAC,QAAD,EAAc;AAC9B,aAAI,eAAe,OAAK,gBAAL,CAAsB,QAAtB,EAAgC,CAAhC,CAAf,CAD0B;;AAG9B,aAAI,EAAE,QAAF,CAAW,YAAX,CAAJ,EAA8B;AAC5B,iBAAM,IAAI,OAAJ,CAAY,aAAa,KAAb,EAAoB,UAAS,KAAT,EAAgB,EAAhB,EAAoB,EAApB,EAAwB,EAAxB,EAA4B;AAAC,iBAAI,EAAJ,EAAQ;AAAE,sBAAO,MAAP,CAAF;cAAR;YAA7B,CAAtC,CAD4B;AAE5B,gBAAK,IAAL,CAAU,gBAAgB,aAAa,MAAb,GAAsB,oBAAtC,IAA8D,aAAa,KAAb,GAAqB,CAArB,CAA9D,GAAwF,KAAxF,GACR,sCADQ,GACiC,aAAa,GAAb,GAAmB,qBADpD,GAC4E,aAAa,MAAb,GAAsB,KADlG,CAAV,CAF4B;AAI5B,gBAAK,IAAL,CAAU,IAAV,EAJ4B;UAA9B;QAHgB,CAAlB,CANE;;AAiBF,YAAK,OAAL,CAAa,GAAb,EAjBE;AAkBF,eAAQ,GAAR,CAAY,KAAZ,CAAkB,OAAlB,EAA2B,IAA3B,EAlBE;MAAJ,CAmBE,OAAO,OAAP,EAAgB;AAChB,eAAQ,GAAR,CAAY,OAAZ,EADgB;MAAhB;IApBW;;AAyBf,qBAAkB,0BAAU,QAAV,EAAoB,UAApB,EAAgC;AAChD,SAAI,WAAW,KAAK,OAAL,CAAa,QAAb,KAA0B,KAAK,SAAL,CAAe,QAAf,CAA1B,CADiC;AAEhD,SAAI,CAAC,QAAD,EAAW;AACb,cAAO,SAAP,CADa;MAAf;AAGA,SAAI,WAAW,SAAS,IAAT,CALiC;AAMhD,SAAI,CAAC,SAAS,KAAT,EAAgB;AACnB,gBAAS,KAAT,GAAiB,cAAc,QAAQ,SAAS,QAAT,GAAoB,KAA5B,CAA/B,CADmB;MAArB;AAGA,YAAO;AACL,YAAK,KAAK,YAAL,CAAkB,QAAlB,EAA4B,UAA5B,CAAL;AACA,cAAO,SAAS,KAAT;AACP,eAAQ,SAAS,SAAS,MAAT,EAAiB,EAA1B,IAAgC,EAAhC,GAAqC,EAArC,GAA0C,SAAS,MAAT;AAClD,cAAO,SAAS,SAAS,KAAT,EAAgB,EAAzB,IAA+B,EAA/B,GAAoC,EAApC,GAAyC,SAAS,KAAT;MAJlD,CATgD;IAAhC;;AAiBlB,uCAAa,UAA0B;SAAhB,mEAAa,iBAAG;;AACrC,SAAI,aAAa,CAAb,EAAgB;AAClB,WAAI,yBAAuB,gBAAvB,CADc;AAElB,WAAI,SAAS,OAAT,CAAiB,gBAAjB,MAAuC,CAAC,CAAD,EAAG;AAC5C,oBAAW,SAAS,KAAT,CAAe,GAAf,EAAoB,IAApB,CAAyB,aAAa,CAAb,GAAoB,sBAApB,GAA0C,GAA1C,CAApC,CAD4C;QAA9C;MAFF;AAMA,YAAO,KAAK,WAAL,GAAmB,GAAnB,GAAyB,QAAzB,CAP8B;IAjLzB;;;AA2Ld,qBAAkB,0BAAU,IAAV,EAAgB;;;AAChC,SAAI,SAAS,EAAE,IAAF,EAAQ,IAAR,CAAa,eAAb,CAAT,CAD4B;AAEhC,OAAE,MAAF,CAAS,KAAK,QAAL,EAAe,UAAC,KAAD,EAAQ,KAAR,EAAkB;AACxC,YAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,MAAP,EAAe,GAAnC,EAAwC;AACtC,aAAI,OAAO,CAAP,EAAU,YAAV,CAAuB,KAAvB,EAA8B,KAA9B,oBAAqD,KAArD,KACC,OAAO,IAAI,CAAJ,CADR,IAEC,OAAO,CAAP,EAAU,WAAV,KAA0B,OAAO,IAAI,CAAJ,CAAjC,IACA,OAAO,CAAP,EAAU,YAAV,CAAuB,KAAvB,MAAkC,OAAO,IAAI,CAAJ,CAAP,CAAc,YAAd,CAA2B,KAA3B,CAAlC,EAAqE;AACxE,kBAAK,KAAL,EAAY,OAAO,CAAP,CAAZ,EAAuB,OAAO,IAAI,CAAJ,CAA9B,EADwE;UAH1E;QADF;MADsB,CAAxB,CAFgC;IAAhB;;AAclB,gBAAa,qBAAU,GAAV,EAAe,OAAf,EAAwB;AACnC,OAAE,OAAF,EAAW,EAAX,CAAc,MAAd,EAAsB,YAAY;AAChC,WAAI,QAAQ,EAAE,OAAF,EAAW,KAAX,EAAR,CAD4B;AAEhC,WAAI,KAAJ,CAAU,OAAV,GAAoB,OAApB,CAFgC;AAGhC,WAAI,UAAJ,CAAe,KAAf,CAAqB,QAArB,GAAgC,UAAhC,CAHgC;AAIhC,WAAI,KAAJ,CAAU,QAAV,GAAqB,UAArB,CAJgC;AAKhC,WAAI,KAAJ,CAAU,GAAV,GAAgB,QAAQ,SAAR,GAAoB,CAApB,GAAwB,IAAxB,CALgB;AAMhC,WAAI,KAAJ,CAAU,IAAV,GAAiB,QAAQ,UAAR,GAAqB,QAAQ,CAAR,GAAY,EAAjC,GAAsC,IAAtC,CANe;MAAZ,CAAtB,CADmC;IAAxB;;AAWb,eAAY,oBAAU,MAAV,EAAkB,QAAlB,EAA4B;AACtC,OAAE,MAAF,EAAU,IAAV,CAAe;AACb,YAAK,aAAW,KAAK,UAAL,SAAX,GAAmC,qBAAO,WAAP;AACxC,cAAO,EAAP;AACA,eAAQ,MAAR;MAHF,EADsC;AAMtC,OAAE,QAAF,EAAY,EAAZ,CAAe,MAAf,EAAuB,YAAY;AACjC,WAAI,QAAQ,EAAE,QAAF,EAAY,KAAZ,EAAR;WACF,SAAS,EAAE,QAAF,EAAY,MAAZ,EAAT,CAF+B;AAGjC,cAAO,UAAP,CAAkB,KAAlB,CAAwB,QAAxB,GAAmC,UAAnC,CAHiC;AAIjC,cAAO,KAAP,CAAa,OAAb,GAAuB,OAAvB,CAJiC;AAKjC,cAAO,KAAP,CAAa,QAAb,GAAwB,UAAxB,CALiC;AAMjC,cAAO,KAAP,CAAa,GAAb,GAAmB,SAAS,SAAT,GAAqB,SAAS,CAAT,GAAa,CAAlC,GAAsC,IAAtC,CANc;AAOjC,cAAO,KAAP,CAAa,IAAb,GAAoB,SAAS,UAAT,GAAsB,QAAQ,CAAR,GAAY,CAAlC,GAAsC,IAAtC,CAPa;AAQjC,SAAE,MAAF,EAAU,QAAV,CAAmB,WAAnB,EARiC;MAAZ,CAAvB,CANsC;IAA5B;EApNV;;AAuOJ,KAAI,OAAJ,EAAa;AACX,WAAQ,KAAR,GAAgB,UAAU,GAAV,EAAe;AAC7B,eAAU,aAAV,CAAwB,IAAxB,CAA6B,SAA7B,EAAwC,GAAxC,EAD6B;IAAf,CADL;EAAb;;AAMA,QAAO,OAAP,GAAiB,SAAjB,C;;;;;;AC5PA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA,mBAAkB;;;;;;;;AChClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd,MAAK;AACL,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,YAAW;AACX;;AAEA;AACA;AACA,yCAAwC,WAAW;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kCAAiC,kBAAkB;AACnD;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,kBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,aAAY;AACZ;AACA;;AAEA;AACA,aAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,+CAA8C,QAAQ;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;AACD;AACA;AACA;AACA,0H;;;;;;;ACtoBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;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ACA;AACA;AACA;AACA;AACA,oCAAmC,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;;AAEA;AACA;AACA;AACA,oCAAmC,mBAAmB;AACtD;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,+CAA8C,EAAE;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,8BAA6B;AAC7B;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,qDAAoD,IAAI;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAA+C,IAAI,kCAAkC,IAAI;AACzF;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,uDAAsD;AACtD;;AAEA,uBAAsB;AACtB;;AAEA,gCAA+B;AAC/B;;AAEA;AACA,mCAAkC,MAAM;AACxC;;AAEA,gDAA+C;AAC/C;;AAEA,wBAAuB;AACvB;;AAEA,gCAA+B,8BAA8B,gDAAgD;AAC7G;AACA;AACA;;AAEA;;AAEA,gCAA+B,QAAQ;AACvC;;AAEA;AACA;;AAEA,uBAAsB,IAAI;AAC1B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mCAAkC;AAClC;AACA,mCAAkC;AAClC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA,yCAAwC,KAAK;AAC7C;;AAEA;AACA;AACA;AACA,uCAAsC,EAAE;AACxC;;AAEA;AACA;AACA;;AAEA,wBAAuB;AACvB;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,qBAAoB;AACpB;AACA,qEAAoE;AACpE;AACA;;AAEA;AACA;;AAEA,oBAAmB,uBAAuB;AAC1C;AACA,4BAA2B,EAAE;AAC7B;;AAEA;AACA;AACA;AACA,oBAAmB,IAAI;AACvB;AACA;AACA,2CAA0C,IAAI;AAC9C;;AAEA,uDAAsD,EAAE;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;;AAEA,uBAAsB;AACtB;AACA;AACA;;AAEA;AACA;AACA;;AAEA,gCAA+B,GAAG,GAAG,KAAK,EAAE;AAC5C;;AAEA,gCAA+B,GAAG,GAAG,eAAe,IAAI;AACxD;AACA;AACA;AACA;AACA,mBAAkB;AAClB;;AAEA;AACA;;AAEA,oBAAmB,YAAY;AAC/B;;AAEA;AACA;;AAEA,wBAAuB;AACvB;;AAEA;AACA;AACA;AACA;;AAEA,0BAAyB;AACzB,0BAAyB;AACzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;;AAEA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA,oBAAmB,aAAa;AAChC;AACA,0CAAyC;AACzC;AACA,2BAA0B;AAC1B;AACA,gCAA+B;AAC/B;;AAEA;AACA;;AAEA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,6BAA4B,IAAI;AAChC;;AAEA,yDAAwD;AACxD;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA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AClC,uBAAsB,OAAO;AAC7B,qBAAoB,OAAO;AAC3B;AACA,qBAAoB,OAAO;AAC3B,sBAAqB,2BAA2B;AAChD;AACA;AACA,yBAAwB,OAAO;AAC/B,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,sBAAqB,OAAO;AAC5B,iBAAgB,YAAY;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE,GAAG;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,GAAG,mBAAmB,GAAG;AAC1D;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,aAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,+BAA+B;AAClD;AACA;;AAEA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,qEAAoE;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB,gBAAgB,GAAG,iBAAiB,GAAG;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,qCAAoC,6BAA6B;AACjE;AACA;AACA,8CAA6C,kCAAkC;AAC/E;AACA,uCAAsC,sCAAsC;AAC5E;AACA,mCAAkC,sBAAsB;AACxD,oCAAmC,4BAA4B;AAC/D,uCAAsC,+BAA+B;AACrE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,gCAA+B,sBAAsB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB,uBAAsB,eAAe;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,eAAe;AAC7C;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA,wBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA8E;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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gB,eAAhB,CAAN,EAAwC,KAAxC,EAA+C,KAA/C,IAAwD,gBAAM,GAAN,CAAU,eAAV,CAA0B,8BAAY,GAAZ,CAAgB,UAAhB,CAA1B,CAAxD,GAAiH,gBAAM,GAAN,CAAU,eAAV,CAA0B,8BAAY,GAAZ,CAAgB,UAAhB,CAA1B,CAAjH,CADG;AAEb,YAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,SAAE,IAAF,CAAO;AACL,cAAK,GAAL;AACA,eAAM,MAAN;AACA,kBAAS,KAAT;AACA,kBAAS;kBAAM;UAAN;AACT,gBAAO,eAAC,KAAD;kBAAW,OAAO,mBAAS,SAAT,CAAmB,KAAnB,CAAP;UAAX;QALT,EADsC;MAArB,CAAnB,CAFa;IAzaF;;;;;;;;ACbf;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC,UAAU;AAC7C;AACA;AACA,+BAA8B;AAC9B;AACA,sBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,eAAe;;AAElB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAkB;AAClB,oBAAmB;AACnB,uBAAsB;AACtB,oBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,cAAc;;AAEjC;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAqB,oBAAoB;;AAEzC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;;;ACvXA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iCAAgC;AAChC;;;AAGA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2BAA0B;AAC1B,2BAA0B;AAC1B,2BAA0B;AAC1B,2BAA0B;;AAE1B,oBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAoB,sBAAsB,qBAAqB,cAAc,EAAE;;;AAG/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAkB,QAAQ;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,YAAY;AAC/B,mBAAkB,UAAU;;AAE5B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAwC;AACxC,yBAAwB;AACxB,aAAY;AACZ,WAAU;AACV,gCAA+B;AAC/B,iCAAgC;AAChC;AACA;;AAEA,uBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,0BAA0B;;AAE3D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uDAAsD;AACtD;AACA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,cAAa;;AAEb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAmE;;AAEnE;AACA,0DAAyD;AACzD;;AAEA;;AAEA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,4DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,2DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,cAAa;;AAEb;;AAEA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA,gCAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,6DAA4D;AAC5D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,YAAW;AACX,oBAAmB;;AAEnB;;AAEA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA8B,OAAO,EAAE;AACvC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qEAAoE;AACpE;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,2DAA0D;AAC1D;;AAEA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,sBAAqB;AACrB,gBAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,oBAAmB;AACnB,mBAAkB;AAClB,2BAA0B;AAC1B,6BAA4B;AAC5B,wBAAuB;AACvB,oBAAmB;AACnB,iBAAgB;AAChB,sBAAqB;AACrB,oBAAmB;AACnB,4BAA2B;AAC3B,wBAAuB;;AAEvB,mBAAkB;AAClB,mBAAkB;AAClB,mBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;;AAEnB,kBAAiB;AACjB,sBAAqB;AACrB,sBAAqB;AACrB,sBAAqB;;AAErB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yBAAwB;AACxB,uBAAsB;AACtB,4BAA2B;AAC3B,qBAAoB;AACpB,wBAAuB;AACvB,sBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB;AACjB,qBAAoB;;AAEpB;AACA;;AAEA,uBAAsB;;AAEtB;;AAEA;;AAEA,4CAA2C;AAC3C,8CAA6C;AAC7C,6CAA4C;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB;AACvB,wBAAuB;AACvB,wBAAuB;;AAEvB;AACA;AACA;;AAEA,2BAA0B;AAC1B,4CAA2C;AAC3C;;AAEA,qBAAoB;AACpB,qBAAoB;AACpB;AACA;AACA;;AAEA,6CAA4C;AAC5C;AACA;AACA;;AAEA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB;;AAEpB;AACA;AACA;AACA;AACA;;AAEA,oBAAmB;AACnB,uBAAsB;AACtB,oBAAmB;AACnB,mBAAkB;;;AAGlB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,8BAA6B,uBAAuB;AACpD,+BAA8B,uBAAuB;AACrD;AACA;AACA;;;AAGA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;;AAEA,wBAAuB;AACvB;AACA;AACA;;AAEA;AACA,cAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,sBAAqB;;AAErB,uCAAsC;;AAEtC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA,gBAAe;;AAEf;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAgB;AAChB;AACA;;AAEA;AACA;;AAEA,wBAAuB;AACvB,sBAAqB;AACrB;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA;AACA,8BAA6B,uBAAuB;AACpD;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;;AAEA;AACA;AACA;AACA,uBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAsB;AACtB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,wBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,+BAA8B;;AAE9B,4BAA2B,aAAa;AACxC,qBAAoB,qBAAqB;;AAEzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpuDA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,mBAAkB,UAAU;;AAE5B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA,6BAA4B,YAAY;AACxC,sBAAqB,8BAA8B;AACnD;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,+BAA8B,KAAK;AACnC;AACA;;AAEA;AACA;AACA;AACA,+BAA8B,KAAK;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrGA;;;AAGA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B;AAC9B;;AAEA;;;AAGA,qBAAoB,sBAAsB,qBAAqB,cAAc,EAAE;;AAE/E;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,yBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;AAEA,mCAAkC;AAClC,kCAAiC;AACjC,kCAAiC;AACjC,6BAA4B;AAC5B,kCAAiC;;AAEjC;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA,4BAA2B;AAC3B,qBAAoB;AACpB,8BAA6B;AAC7B;;;;AAIA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR,YAAW;AACX,YAAW;AACX,aAAY;AACZ,SAAQ;AACR,oBAAmB;;AAEnB,iBAAgB,kBAAkB;AAClC;AACA;;AAEA;AACA;AACA;AACA,8CAA6C;;AAE7C,yBAAwB,eAAe;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAuB,UAAU,EAAE;;AAEnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,QAAQ;;AAE/B;AACA;;AAEA;AACA;AACA;AACA,qCAAoC,QAAQ;AAC5C,wBAAuB;AACvB,6BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,0BAAyB,YAAY;AACrC;AACA;AACA;AACA,0BAAyB,UAAU;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,oBAAmB;AACnB,sBAAqB;AACrB;AACA,yCAAwC;AACxC,gBAAe;AACf,YAAW;AACX,SAAQ;;AAER;AACA;AACA;AACA,iBAAgB,kBAAkB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa,gBAAgB;AAC7B;AACA,qBAAoB,UAAU;AAC9B;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAQ;AACR,YAAW;AACX,cAAa;AACb,YAAW;AACX,YAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAgB,uBAAuB;AACvC;AACA,gBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,WAAW;AAC5B;AACA,gBAAe,4BAA4B;AAC3C;AACA;AACA;AACA;AACA,cAAa;AACb,SAAQ,gBAAgB;AACxB;AACA,gBAAe,gCAAgC;AAC/C;AACA;AACA;AACA;;AAEA;AACA,iBAAgB,kBAAkB;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa,aAAa;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA,SAAQ;;AAER;AACA,cAAa,aAAa,QAAQ,+BAA+B;AACjE,cAAa,aAAa,QAAQ,+BAA+B;AACjE,cAAa,cAAc,OAAO,6BAA6B;;AAE/D;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB,gBAAe;AACf,mBAAkB;AAClB;AACA,gBAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,aAAY;AACZ;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C,OAAO;;AAEtD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA2B;AAC3B,4BAA2B;AAC3B;AACA,YAAW;AACX,UAAS;AACT,cAAa;AACb,YAAW;AACX,aAAY;;AAEZ;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC;AAChC;AACA,QAAO;AACP;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA,mCAAkC;AAClC;AACA,gBAAe;AACf;AACA;;AAEA,mCAAkC;AAClC;AACA;AACA;AACA,qCAAoC;AACpC;AACA,QAAO;;AAEP;AACA;AACA;;AAEA,MAAK;AACL;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,8DAA6D;AAC7D;AACA;AACA;AACA;AACA,uBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,qBAAoB;AACpB,YAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa,WAAW;AACxB;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wCAAuC,QAAQ,OAAO,wBAAwB;;AAE9E;AACA;AACA;AACA,gBAAe;AACf;AACA,4BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA,+BAA8B;;AAE9B,8BAA6B;AAC7B;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,IAAG;;AAEH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,oBAAmB;AACnB;AACA,SAAQ;AACR,oBAAmB;AACnB,cAAa;;AAEb,uCAAsC;;AAEtC,iBAAgB;AAChB,qBAAoB;AACpB,qBAAoB;;AAEpB;AACA;AACA;AACA;AACA,6CAA4C;;AAE5C,cAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,MAAK;AACL;;AAEA,MAAK;;AAEL,gCAA+B,kCAAkC;AACjE;;AAEA,MAAK;AACL;;AAEA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,oBAAmB;AACnB;AACA,SAAQ;AACR,oBAAmB;AACnB,cAAa;;AAEb,uCAAsC;;AAEtC,iBAAgB;AAChB,qBAAoB;AACpB,qBAAoB;;AAEpB,gCAA+B;AAC/B;AACA;AACA;AACA;;AAEA,cAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,MAAK;AACL,WAAU,iCAAiC,EAAE;;AAE7C,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;;AAEA,MAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,mBAAkB;;AAElB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iCAAgC,kBAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA,YAAW;;AAEX;AACA;AACA;AACA;AACA,+BAA8B;AAC9B;AACA,+BAA8B;AAC9B,iBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA,uCAAsC;AACtC;;AAEA,uCAAsC;AACtC;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA0B,IAAI,MAAM,GAAG,MAAM,GAAG;AAChD;AACA;AACA;AACA,UAAS,IAAI,KAAK,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,IAAI,MAAM,IAAI;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAa,SAAS;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAc,cAAc;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,kBAAiB;AACjB,YAAW;AACX;AACA,qDAAoD;AACpD,wCAAuC;AACvC;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb,kBAAiB;AACjB,YAAW;AACX;AACA,6BAA4B;AAC5B,uBAAsB;;AAEtB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mCAAkC,wBAAwB;;AAE1D,IAAG;AACH;AACA,6CAA4C;AAC5C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAG;;AAEH;AACA;;AAEA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB,mBAAkB;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;AC9qCA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;;;AAGA;;;;;;;AC/BA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA,iBAAgB,SAAS;AACzB;AACA,mBAAkB,OAAO;AACzB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA,oBAAmB,SAAS;AAC5B;AACA;;AAEA,uBAAsB;AACtB;;;AAGA;;;;;;;ACxCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAK,sCAAsC,EAAE,YAAY,sBAAsB;AAC/E,MAAK,oDAAoD,EAAE,YAAY,0BAA0B;;;AAGjG;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA,+BAA8B;;;AAG9B;AACA;AACA;;AAEA;AACA,kBAAiB,iBAAiB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAsB,aAAa;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,SAAS;AACxB;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA,gCAA+B,SAAS;AACxC;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAkB,OAAO;AACzB;AACA;AACA,oBAAmB,qBAAqB,UAAU;;AAElD;AACA;AACA,qBAAoB,0BAA0B,cAAc,UAAU;;AAEtE;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB,0BAA0B,UAAU;;AAExD;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAAyB,kBAAkB;;AAE3C;AACA;AACA,mDAAkD,OAAO;;AAEzD;AACA;AACA,iBAAgB,YAAY;;AAE5B;AACA;AACA,mBAAkB,YAAY;;AAE9B;AACA;;;;;;;ACxLA;;;AAGA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5BA;;;;;;;;;;;;;;;;;;;;;;KAiBqB;;;AAEnB,YAFmB,qBAEnB,GAAc;yCAFK,uBAEL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,CAER,IAFQ,CAEH,UAAC,CAAD,EAAI,CAAJ,EAAU;AACd,SAAI,MAAM,OAAO,EAAE,EAAF,CAAb;SACJ,MAAM,OAAO,EAAE,EAAF,CAAb,CAFc;;AAId,SAAI,MAAM,GAAN,EAAW;AACb,cAAO,CAAC,CAAD,CADM;MAAf,MAEO,IAAI,MAAM,GAAN,EAAW;AACpB,cAAO,CAAP,CADoB;MAAf;AAGP,YAAO,CAAP,CATc;IAAV,CAFG,CAaR,GAbQ,CAaJ,UAAC,IAAD;YAAa,KAAK,EAAL,SAAW,KAAK,OAAL;IAAxB,CAbH,CADqB;;AAgBzB,UAAO,KAAK,IAAL,CAAU,GAAV,CAAP,CAhByB;EAAX;;;;;;;;AAyBhB,KAAI,SAAS,SAAT,MAAS,CAAC,KAAD,EAAW;AACtB,OAAI,CAAC,MAAM,OAAN,CAAc,KAAd,CAAD,EAAuB;AACzB,YAAO,EAAP,CADyB;IAA3B;AAGA,UAAO,IAAI,UAAU,KAAV,CAAJ,CAAP,CAJsB;EAAX;;AAOb,QAAO,OAAP,GAAiB;AACf,iBADe;AAEf,uBAFe;EAAjB,C;;;;;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,uBAAuB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,MAAK;AACL;AACA;AACA,EAAC;;;;;;;;;;;;;;;;;;;;;;;;;ACjRD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;KAAY;;AACZ;;;;;;;;KAGM;AAEJ,YAFI,SAEJ,GAAyB;SAAb,+DAAS,kBAAI;yCAFrB,WAEqB;;AACvB,UAAK,OAAL,GAAe,iCAAf;;;AADuB,SAIvB,CAAK,QAAL,GAAgB,IAAhB,CAJuB;;AAMvB,UAAK,MAAL,GAAc,KAAd,CANuB;AAOvB,UAAK,OAAL,GAAe,KAAf,CAPuB;AAQvB,UAAK,QAAL,GAAgB,KAAhB,CARuB;AASvB,UAAK,OAAL,GAAe,KAAf,CATuB;;AAWvB,UAAK,KAAL,GAAa,IAAb,CAXuB;AAYvB,UAAK,OAAL,GAAe,UAAU,yBAAV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;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAEA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF,oBAAmB;AACnB;AACA,IAAG,OAAO;AACV;AACA;AACA;AACA;AACA;AACA;AACA,GAAE,OAAO;AACT;AACA;;AAEA,EAAC;;;;;;;;;;;;;;;;;;ACnPD;;;;AACA;;;;AACA;;KAAY;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBZ,KAAM,UAAU;;;;;;;;;;AASd,+CAAkB;AAChB,YAAO,KAAK,SAAL,GAAiB,IAAjB,CAAsB,UAAC,MAAD,EAAY;AACvC,cAAO;AACL,aAAI;AACF,kBAAO;AACL,mBAAM,oBAAY,MAAZ,EAAoB,GAApB,CAAwB,UAAC,EAAD;sBAAQ,eAAK,MAAL,CAAY,OAAO,EAAP,CAAZ;cAAR,CAA9B;AACA,oBAAO,GAAG,MAAH;YAFT;AAIA,iBAAM,QAAN;AACA,kBAAO,GAAG,MAAH;UANT;QADF,CADuC;MAAZ,CAA7B,CADgB;IATJ;;;;;;;;;;AA+Bd,mCAAY;AACV,YAAO,cAAQ,SAAR,EAAP,CADU;IA/BE;EAAV;;mBAqCS;;;;;;;;;;;;;;;;;;;;;AC7Df;;;;AACA;;KAAY;;AACZ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YAAO,KAAP,CAFgB;IA1XI;AA+XtB,mDAAoB;AAClB,yCAAgB,iBAAhB,GADkB;AAElB,YAAO,KAAP,CAFkB;IA/XE;AAoYtB,yCAAe;AACb,yCAAgB,YAAhB,GADa;AAEb,YAAO,KAAP,CAFa;IApYO;AAyYtB,iEAA2B;AACzB,yCAAgB,wBAAhB,GADyB;AAEzB,YAAO,KAAP,CAFyB;IAzYL;AA8YtB,+CAAkB;AAChB,yCAAgB,eAAhB,GADgB;AAEhB,YAAO,KAAP,CAFgB;IA9YI;AAmZtB,+CAAkB;AAChB,yCAAgB,eAAhB,GADgB;AAEhB,YAAO,KAAP,CAFgB;IAnZI;AAwZtB,uEAA8B;AAC5B,8BAAc,2BAAd,CAA0C,KAAK,QAAL,CAA1C,CAD4B;AAE5B,YAAO,KAAP,CAF4B;IAxZR;AA6ZtB,6CAAiB;AACf,yCAAgB,cAAhB,GADe;AAEf,YAAO,KAAP,CAFe;IA7ZK;AAkatB,6DAAwB,SAAS,GAAG;AAClC,yCAAgB,uBAAhB,CAAwC,CAAxC,EADkC;AAElC,YAAO,KAAP,CAFkC;IAlad;AAuatB,6DAAwB,SAAS,GAAG;AAClC,yCAAgB,uBAAhB,CAAwC,CAAxC,EADkC;AAElC,YAAO,KAAP,CAFkC;IAvad;EAApB;;mBA8aW;;;;;;;ACvbf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;;AAEA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA,gBAAe,qBAAqB;AACpC,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,iBAAgB;AAChB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,MAAM;AACrB,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,MAAM;AACrB,gBAAe,QAAQ;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA,+CAA8C,EAAE;AAChD;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,OAAO;AACvB,iBAAgB,QAAQ;AACxB,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,iBAAiB;AACpC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,MAAM;AACzB,oBAAmB,aAAa;AAChC,oBAAmB,QAAQ;AAC3B,oBAAmB,QAAQ;AAC3B,oBAAmB,QAAQ;AAC3B,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,wBAAuB,uCAAuC;AAC9D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,SAAS;AAC5B,oBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,MAAM;AACzB,oBAAmB,MAAM;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,sBAAsB;;AAE7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,MAAM;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,MAAM;AACzB,oBAAmB,SAAS;AAC5B,oBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,OAAO;AAC9B,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAuB,MAAM;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,OAAO;AAC1B,oBAAmB,SAAS;AAC5B,oBAAmB,QAAQ;AAC3B,oBAAmB,QAAQ;AAC3B,oBAAmB,QAAQ;AAC3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,oDAAmD,kBAAkB;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;;AAEA;AACA;AACA;AACA,oBAAmB,MAAM;AACzB,oBAAmB,SAAS;AAC5B,oBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,4BAA2B,yBAAyB;AACpD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,SAAS;AACxB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,aAAa;AAC5B,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,wDAAuD;AACvD;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,QAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,oDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,MAAM;AACrB,gBAAe,QAAQ;AACvB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;;;;;;;;;;;;ACx/BD;;;;AACA;;;;;;;;;;mBAEe;;AAEb,cAAW,qBAAY;AACrB,mBAAI,SAAJ,GADqB;AAErB,iCAAiB,gCAAjB,GAFqB;IAAZ;;AAKX,eAAY,sBAAY;AACtB,mBAAI,UAAJ,GADsB;AAEtB,iCAAiB,sBAAjB,CAAwC,mBAAxC,EAFsB;IAAZ;;AAKZ,sBAAmB,6BAAY;AAC7B,mBAAI,iBAAJ,GAD6B;IAAZ;;AAInB,kBAAe,yBAAY;AACzB,mBAAI,WAAJ,GADyB;IAAZ;;AAIf,cAAW,qBAAY;AACrB,mBAAI,eAAJ,GADqB;IAAZ;;AAIX,oBAAiB,2BAAY;AAC3B,mBAAI,cAAJ,GAD2B;IAAZ;;AAIjB,sBAAmB,6BAAY;AAC7B,mBAAI,gBAAJ,GAD6B;IAAZ;;AAInB,iBAAc,wBAAY;AACxB,mBAAI,YAAJ,GADwB;IAAZ;;AAId,oBAAiB,2BAAY;AAC3B,mBAAI,eAAJ,GAD2B;IAAZ;;AAIjB,oBAAiB,2BAAY;AAC3B,mBAAI,eAAJ,GAD2B;IAAZ;;AAIjB,6BAA0B,oCAAY;AACpC,mBAAI,wBAAJ,GADoC;IAAZ;;AAI1B,mBAAgB,0BAAY;AAC1B,mBAAI,cAAJ,GAD0B;IAAZ;;AAIhB,4BAAyB,iCAAU,CAAV,EAAa;AACpC,mBAAI,uBAAJ,CAA4B,CAA5B,EADoC;IAAb;;AAIzB,4BAAyB,iCAAU,CAAV,EAAa;AACpC,mBAAI,uBAAJ,CAA4B,CAA5B,EADoC;IAAb;;;;;;;;;;;;;;mBC/DZ;AACb,iBADa;AAEb,kBAFa;AAGb,aAHa;AAIb,mBAJa;AAKb,iBALa;AAMb,iBANa;AAOb,aAPa;AAQb,aARa;AASb,eATa;AAUb,gBAVa;AAWb,kBAXa;AAYb,kBAZa;AAab,mBAba;AAcb,uBAda;AAeb,sCAfa;AAgBb,wCAhBa;AAiBb,2BAjBa;AAkBb,6BAlBa;AAmBb,yCAnBa;AAoBb,6CApBa;AAqBb,2DArBa;AAsBb,+CAtBa;AAuBb,+CAvBa;AAwBb,kEAxBa;AAyBb,oEAzBa;AA0Bb,mCA1Ba;;;;;;;;;;;;;;ACIf,QAAO,OAAP,GAAiB;AACf,aAAU,SAAV;AACA,mBAAgB,mBAAhB;AACA,eAAY,WAAZ;AACA,gBAAa,YAAb;AACA,sBAAmB,iBAAnB;AACA,wBAAqB,mBAArB;AACA,mBAAgB,eAAhB;AACA,+BAA4B,0BAA5B;AACA,uBAAoB,iBAApB;AACA,uBAAoB,iBAApB;AACA,mBAAgB,eAAhB;AACA,qBAAkB,gBAAlB;AACA,+BAA4B,yBAA5B;AACA,+BAA4B,yBAA5B;EAdF,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;;;;AACA;;;;AACA;;;;;;KAEM;;;AAEJ,YAFI,gBAEJ,GAAc;yCAFV,kBAEU;;;;;8FAFV,8BAEU;;AAIZ,WAAK,aAAL,GAAqB,qBAAU,0BAAV,CAJT;AAKZ,WAAK,YAAL,GAAoB,IAApB,CALY;;AAOZ,WAAK,eAAL,GAAuB,GAAvB,CAPY;;AASZ,WAAK,KAAL,GAAa;AACX,yBAAkB,KAAlB;MADF,CATY;;IAAd;;8BAFI;;mCAgBU;AACZ,cAAO;AACL,uBAAc,KAAd;AACA,qBAAY,KAAZ;AACA,wBAAe,KAAf;AACA,qBAAY,KAAZ;AACA,oBAAW,IAAX;AACA,qBAAY,qBAAU,kBAAV;AACZ,wBAAe,EAAf;QAPF,CADY;;;;yCAYM;;;AAClB,gCAAc,QAAd,CAAuB;AACrB,8BAAqB,yBAAC,IAAD,EAAU;AAC7B,eAAI,aAAa;AACf,2BAAc,KAAK,WAAL;AACd,4BAAe,KAAf;AACA,yBAAY,KAAK,WAAL;AACZ,yBAAY,KAAZ;YAJE,CADyB;;AAQ7B,eAAI,CAAC,OAAK,iBAAL,CAAuB,UAAvB,CAAD,IAAuC,OAAK,cAAL,CAAoB,UAApB,CAAvC,EAAwE;AAC1E,oBAD0E;YAA5E;;;;AAR6B,eAczB,OAAK,iBAAL,EAAwB;AAC1B,0BAAa,OAAK,iBAAL,CAAb,CAD0B;AAE1B,oBAAK,iBAAL,GAAyB,IAAzB,CAF0B;AAG1B,oBAAK,IAAL,CAAU,UAAV,GAAuB,IAAvB,CAH0B;AAI1B,oBAAK,IAAL,CAAU,YAAV,GAAyB,IAAzB,CAJ0B;YAA5B;;AAOA,eAAI,OAAK,iBAAL,CAAuB,UAAvB,KAAsC,OAAK,iBAAL,EAAtC,EAAgE;AAClE,oBAAK,IAAL,CAAU,aAAV,CAAwB,IAAxB,CAA6B,UAA7B,EADkE;YAApE,MAEO;AACL,oBAAK,UAAL,CAAgB,UAAhB,EADK;YAFP;UArBmB;AA2BrB,8BAAqB,2BAAM;;;AAGzB,eAAI,OAAK,eAAL,EAAsB;AACxB,0BAAa,OAAK,eAAL,CAAb,CADwB;AAExB,oBAAK,eAAL,GAAuB,IAAvB,CAFwB;YAA1B;;;AAHyB,iBASzB,CAAK,GAAL,CAAS;AACP,4BAAe,KAAf;AACA,yBAAY,KAAZ;YAFF;;;AATyB,iBAezB,CAAK,gBAAL,GAfyB;;AAiBzB,eAAI,OAAK,IAAL,CAAU,aAAV,CAAwB,MAAxB,EAAgC;AAClC,iBAAI,aAAa,OAAK,IAAL,CAAU,aAAV,CAAwB,KAAxB,EAAb,CAD8B;AAElC,oBAAK,UAAL,CAAgB,UAAhB,EAFkC;YAApC;UAjBmB;AAsBrB,qCAA4B,+BAAC,IAAD,EAAU;AACpC,kBAAK,GAAL,CAAS,YAAT,EAAuB,CAAC,CAAC,KAAK,OAAL,CAAzB,CADoC;UAAV;AAG5B,+BAAsB,2BAAC,UAAD,EAAgB;AACpC,kBAAK,GAAL,CAAS,YAAT,EAAuB,UAAvB,EADoC;UAAhB;AAGtB,gCAAuB,4BAAM;AAC3B,kBAAK,KAAL,CAAW,gBAAX,GAA8B,IAA9B,CAD2B;UAAN;AAGvB,+BAAsB,4BAAM;AAC1B,kBAAK,KAAL,CAAW,gBAAX,GAA8B,KAA9B,CAD0B;;AAG1B,eAAI,OAAK,IAAL,CAAU,aAAV,CAAwB,MAAxB,EAAgC;AAClC,iBAAI,aAAa,OAAK,IAAL,CAAU,aAAV,CAAwB,KAAxB,EAAb,CAD8B;AAElC,oBAAK,UAAL,CAAgB,UAAhB,EAFkC;YAApC;UAHoB;QA3DxB,EADkB;;;;gCAuET,MAAM;;AAEf,YAAK,GAAL,CAAS;AACP,uBAAc,KAAK,YAAL;AACd,wBAAe,KAAK,aAAL;AACf,qBAAY,KAAK,UAAL;AACZ,qBAAY,KAAK,UAAL;QAJd;;;AAFe,WAUf,CAAK,cAAL,GAVe;;;;sCAaA;;;AACf,WAAI,WAAW,SAAX,QAAW,GAAM;AACnB,gBAAK,GAAL,CAAS,eAAT,EAA0B,IAA1B,EADmB;AAEnB,gBAAK,eAAL,GAAuB,IAAvB,CAFmB;QAAN,CADA;;AAMf,WAAI,KAAK,eAAL,EAAsB;AACxB,cAAK,eAAL,GAAuB,WAAW,QAAX,EAAqB,KAAK,eAAL,CAA5C,CADwB;QAA1B,MAEO;AACL,oBADK;QAFP;;;;wCAQiB;;;AACjB,WAAI,aAAa,SAAb,UAAa,GAAM;AACrB,gBAAK,GAAL,CAAS;AACP,yBAAc,IAAd;AACA,uBAAY,KAAZ;UAFF,EADqB;QAAN,CADA;;AAQjB,WAAI,KAAK,aAAL,EAAmB;AACrB,cAAK,iBAAL,GAAyB,WAAW,YAAI;AACtC,eAAI,CAAC,OAAK,GAAL,CAAS,eAAT,CAAD,EAA2B;AAC7B,0BAD6B;AAE7B,oBAAK,YAAL,GAAoB,IAApB,CAF6B;YAA/B;UADkC,EAKjC,KAAK,aAAL,CALH,CADqB;QAAvB,MAOO;AACL,sBADK;QAPP;;;;6CAYsB;AACtB,cAAO,KAAK,GAAL,CAAS,cAAT,CAAP,CADsB;;;;oCAIT,QAAQ;AACrB,cAAO,KAAK,GAAL,CAAS,cAAT,MAA6B,OAAO,YAAP,CADf;;;;uCAIL,QAAQ;AACxB,cAAO,CAAC,CAAC,EAAE,GAAF,CAAM,MAAN,EAAc,yBAAd,CAAD,CADgB;;;;yCAIN;AAClB,cAAO,KAAK,IAAL,CAAU,aAAV,IAA2B,KAAK,KAAL,CAAW,gBAAX,CADhB;;;UA9JhB;;;mBAoKS,IAAI,gBAAJ;;;;;;;;;;;;;;;;;SCvJC;SAqBA;SAoBA;;AA1DhB;;;;AACA;;;;AACA;;;;;;AAEA,KAAM,iBAAiB,GAAjB;;AAEN,KAAM,mBAAmB,sBAAc;AACrC,YAAS,IAAT;AACA,aAAU,KAAV;EAFuB,CAAnB;;;;;;;;AAWC,UAAS,gBAAT,CAA0B,IAA1B,EAAgC;AACrC,kCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,WAAM,oCAAN;AACA,iBAAY;AACV,gBAAS,6BAAiB,OAAjB;MADX;IAFF,EADqC;AAOrC,4BAAc,QAAd,CAAuB,0BAAvB,EAAmD;AACjD,UAAK,KAAK,GAAL;AACL,iBAAY,KAAK,UAAL;AACZ,WAAM,MAAN;AACA,WAAM,KAAK,IAAL,IAAa,EAAb;IAJR,EAPqC;EAAhC;;;;;;;;AAqBA,UAAS,aAAT,CAAuB,IAAvB,EAA6B;AAClC,kCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,WAAM,oCAAN;AACA,iBAAY;AACV,gBAAS,6BAAiB,IAAjB;MADX;IAFF,EADkC;AAOlC,4BAAc,QAAd,CAAuB,uBAAvB,EAAgD;AAC9C,UAAK,KAAK,GAAL;AACL,iBAAY,KAAK,UAAL;AACZ,WAAM,MAAN;AACA,WAAM,KAAK,IAAL,IAAa,EAAb;IAJR,EAPkC;EAA7B;;;;;;;AAoBA,UAAS,kBAAT,CAA4B,IAA5B,EAAkC;AACvC,kCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,WAAM,qCAAN;AACA,iBAAY;AACV,aAAM,KAAK,OAAL;MADR;IAFF,EADuC;AAOvC,4BAAc,QAAd,CAAuB,uBAAvB,EAAgD;AAC9C,UAAK,KAAK,GAAL;AACL,cAAS,KAAK,OAAL;AACT,iBAAY,KAAZ;AACA,WAAM,MAAN;AACA,WAAM,KAAK,IAAL,IAAa,EAAb;IALR,EAPuC;EAAlC;;;;;;mBAqBQ;;;;;;;;;AAQb,iDAAkB,MAAM;AACtB,8BAAc,QAAd,CAAuB,cAAvB,EAAuC;AACrC,oBAAa,KAAK,IAAL;MADf,EADsB;IARX;;;;;;AAiBb,2DAAwB;AACtB,8BAAc,QAAd,CAAuB,YAAvB,EADsB;IAjBX;;;;;;AAwBb,iDAAmB;AACjB,8BAAc,QAAd,CAAuB,oBAAvB,EADiB;IAxBN;;;;;;;AAgCb,qCAAY,UAAU;AACpB,8BAAc,QAAd,CAAuB,WAAvB,EAAoC,QAApC,EADoB;IAhCT;;;AAoCb,qBAAkB,EAAE,QAAF,CAAW,gBAAX,EAA6B,cAA7B,EAA6C,gBAA7C,CAAlB;AACA,kBAAe,EAAE,QAAF,CAAW,aAAX,EAA0B,cAA1B,EAA0C,gBAA1C,CAAf;AACA,uBAAoB,EAAE,QAAF,CAAW,kBAAX,EAA+B,cAA/B,EAA+C,gBAA/C,CAApB;;AAEA,iCAAU,MAAM;AACd,SAAI,KAAK,OAAL,KAAiB,6BAAiB,IAAjB,EAAuB;AAC1C,YAAK,aAAL,CAAmB,IAAnB,EAD0C;MAA5C,MAEO,IAAI,KAAK,OAAL,KAAiB,6BAAiB,OAAjB,EAA0B;AACpD,YAAK,gBAAL,CAAsB,IAAtB,EADoD;MAA/C;IA3CI;;;;;;;;;;;;;;;;;;;;;;;AC3Ef,KAAM,mBAAmB,sBAAc;AACrC,SAAM,MAAN;AACA,YAAS,SAAT;EAFuB,CAAnB;mBAIS;;;;;;;;;;;;;ACRf;;;;AACA;;;;;;mBAEe;;AAEb,sBAAmB,2BAAU,WAAV,EAAuB,QAAvB,EAAiC;AAClD,8BAAc,QAAd,CAAuB,qBAAvB,EAA8C,WAA9C,EAA2D,QAA3D,EADkD;IAAjC;;AAInB,mBAAgB,wBAAU,WAAV,EAAuB,QAAvB,EAAiC;AAC/C,8BAAc,QAAd,CAAuB,kBAAvB,EAA2C,WAA3C,EAAwD,QAAxD,EAD+C;IAAjC;;AAIhB,eAAY,oBAAU,WAAV,EAAuB,QAAvB,EAAiC;AAC3C,8BAAc,QAAd,CAAuB,aAAvB,EAAsC,WAAtC,EAAmD,QAAnD,EAD2C;AAE3C,oCAAoB,QAApB,CAA6B,uBAA7B,EAAsD,WAAtD,EAF2C;IAAjC;;AAKZ,gBAAa,qBAAU,WAAV,EAAuB;AAClC,8BAAc,QAAd,CAAuB,cAAvB,EAAuC,WAAvC,EADkC;IAAvB;;AAIb,gBAAa,qBAAU,WAAV,EAAuB,QAAvB,EAAiC;AAC5C,8BAAc,QAAd,CAAuB,cAAvB,EAAuC,WAAvC,EAAoD,QAApD,EAD4C;IAAjC;;AAIb,gBAAa,qBAAS,WAAT,EAAsB;AACjC,8BAAc,QAAd,CAAuB,cAAvB,EAAuC,WAAvC,EADiC;IAAtB;;AAIb,kBAAe,uBAAS,WAAT,EAAsB;AACnC,8BAAc,QAAd,CAAuB,gBAAvB,EAAyC,WAAzC,EADmC;IAAtB;;;;;;;;;;;;;;;AC1BjB,KAAI,gBAAgB,oBAAQ,CAAR,CAAhB;;AAEJ,QAAO,OAAP,GAAiB;;AAEf,cAAW,qBAAY;AACrB,mBAAc,QAAd,CAAuB,YAAvB,EADqB;IAAZ;;AAIX,eAAY,oBAAU,IAAV,EAAgB,EAAhB,EAAoB;AAC9B,mBAAc,QAAd,CAAuB,aAAvB,EAAsC;AACpC,YAAK,KAAK,GAAL;AACL,WAAI,KAAK,EAAL;MAFN,EAGG,EAHH,EAD8B;IAApB;;AAOZ,cAAW,mBAAS,GAAT,EAAc;AACvB,mBAAc,QAAd,CAAuB,YAAvB,EAAqC;AACnC,YAAK,GAAL;AACA,sBAAe,IAAf;MAFF,EADuB;IAAd;;AAOX,gBAAa,qBAAU,IAAV,EAAgB,EAAhB,EAAoB;AAC/B,mBAAc,QAAd,CAAuB,cAAvB,EAAuC;AACrC,YAAK,KAAK,GAAL;AACL,WAAI,KAAK,EAAL;MAFN,EAGG,EAHH,EAD+B;IAApB;;AAOb,kBAAe,uBAAU,IAAV,EAAgB,EAAhB,EAAoB;AACjC,mBAAc,QAAd,CAAuB,gBAAvB,EAAyC;AACvC,YAAK,KAAK,GAAL;AACL,WAAI,KAAK,EAAL;MAFN,EAGG,EAHH,EADiC;IAApB;;AAOf,sBAAmB,2BAAU,IAAV,EAAgB,EAAhB,EAAoB;AACrC,mBAAc,QAAd,CAAuB,kBAAvB,EAA2C;AACzC,YAAK,KAAK,GAAL;AACL,eAAQ,IAAR;MAFF,EAGG,EAHH,EADqC;IAApB;;AAOnB,uBAAoB,4BAAU,IAAV,EAAgB,EAAhB,EAAoB;AACtC,mBAAc,QAAd,CAAuB,kBAAvB,EAA2C;AACzC,YAAK,KAAK,GAAL;AACL,eAAQ,KAAR;MAFF,EAGG,EAHH,EADsC;IAApB;;EAzCtB,C;;;;;;;;;;;;ACFA,KAAI,gBAAgB,oBAAQ,CAAR,CAAhB;AACJ,KAAI,sBAAsB,oBAAQ,GAAR,CAAtB;;AAEJ,KAAI,iBAAiB;;;;;AAKnB,WAAQ,gBAAS,GAAT,EAAc,IAAd,EAAoB;AAC1B,SAAI,OAAO;AACT,YAAK,GAAL;AACA,aAAM,IAAN;MAFE,CADsB;AAK1B,mBAAc,QAAd,CAAuB,WAAvB,EAAoC,IAApC,EAL0B;AAM1B,yBAAoB,QAApB,CAA6B,uBAA7B,EAAsD,IAAtD,EAN0B;IAApB;;;;;AAYR,UAAO,eAAS,GAAT,EAAc,IAAd,EAAoB;AACzB,mBAAc,QAAd,CAAuB,YAAvB,EAAqC;AACnC,YAAK,GAAL;AACA,aAAM,IAAN;MAFF,EADyB;IAApB;;AAOP,uBAAoB,8BAAW;AAC7B,mBAAc,QAAd,CAAuB,YAAvB,EAAqC,EAAC,KAAK,QAAL,EAAtC,EAD6B;AAE7B,mBAAc,QAAd,CAAuB,wBAAvB,EAF6B;IAAX;;AAKpB,sBAAmB,6BAAW;AAC5B,mBAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,YAAK,QAAL;MADF,EAD4B;IAAX;;AAMnB,cAAW,qBAAW;AACpB,SAAI,OAAO;AACT,YAAK,OAAL;MADE,CADgB;AAIpB,mBAAc,QAAd,CAAuB,WAAvB,EAAoC,EAAC,KAAK,OAAL,EAArC,EAJoB;AAKpB,yBAAoB,QAApB,CAA6B,uBAA7B,EAAsD,IAAtD,EALoB;IAAX;;AAQX,sBAAmB,2BAAS,SAAT,EAAoB;AACrC,mBAAc,QAAd,CAAuB,mBAAvB,EAA4C,SAA5C,EADqC;IAApB;;AAInB,cAAW,mBAAS,IAAT,EAAe;AACxB,mBAAc,QAAd,CAAuB,sBAAvB,EAA+C;AAC7C,eAAQ,KAAK,MAAL;MADV,EADwB;IAAf;;AAMX,aAAU,kBAAS,IAAT,EAAe;AACvB,mBAAc,QAAd,CAAuB,qBAAvB,EAA8C;AAC5C,cAAO,KAAK,KAAL;MADT,EADuB;IAAf;;AAMV,YAAS,mBAAY;AACnB,mBAAc,QAAd,CAAuB,oBAAvB,EADmB;IAAZ;;EA3DP;;AAiEJ,QAAO,OAAP,GAAiB,cAAjB,C;;;;;;;;;ACvEA,QAAO,OAAP,GAAiB;;AAEf,cAAW;AACT,cAAS,SAAT;AACA,eAAU,GAAV;AACA,eAAU,SAAV;IAHF;;AAMA,qCAAY,QAAQ,KAAK;AACvB,SAAI,CAAC,EAAE,QAAF,CAAW,MAAX,CAAD,IAAuB,CAAC,EAAE,QAAF,CAAW,GAAX,CAAD,EAAkB;AAC3C,cAAO,KAAP,CAD2C;MAA7C;AAGA,YAAO,OAAO,OAAP,CAAe,GAAf,MAAwB,CAAC,CAAD,CAJR;IARV;AAef,2CAAe,YAAY,UAAU;AACnC,SAAI,CAAC,EAAE,OAAF,CAAU,UAAV,CAAD,IAA0B,EAAE,OAAF,CAAU,UAAV,KAAyB,CAAC,WAAW,MAAX,EAAmB;AACzE,cAAO,QAAP,CADyE;MAA3E;AAGA,YAAO,WAAW,WAAW,MAAX,GAAoB,CAApB,CAAlB,CAJmC;IAftB;AAsBf,uCAAa,QAAQ;AACnB,SAAI,oBAAJ;SACI,MAAM,KAAK,SAAL,CAAe,QAAf;SACN,WAAW,KAAK,SAAL,CAAe,QAAf;SACX,iBAHJ,CADmB;;AAMnB,SAAI,UAAU,KAAK,WAAL,CAAiB,MAAjB,EAAyB,GAAzB,CAAV,EAAyC;AAC3C,qBAAc,OAAO,KAAP,CAAa,GAAb,CAAd,CAD2C;AAE3C,kBAAW,KAAK,cAAL,CAAoB,WAApB,EAAiC,QAAjC,CAAX,CAF2C;MAA7C,MAGO;AACL,kBAAW,QAAX,CADK;MAHP;AAMA,YAAO,QAAP,CAZmB;IAtBN;AAqCf,mDAAmB,MAAM,QAAQ;AAC/B,SAAI,MAAM,KAAK,SAAL,CAAe,QAAf;SACN,UAAU,KAAK,SAAL,CAAe,OAAf;SACV,WAAW,KAAK,SAAL,CAAe,QAAf,CAHgB;;AAK/B,UAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,OAAO,MAAP,EAAe,GAAnC,EAAwC;AACtC,WAAI,WAAW,MAAC,CAAO,CAAP,KAAa,OAAO,CAAP,EAAU,QAAV,GAAsB,OAAO,CAAP,EAAU,QAAV,GAAqB,KAAzD,CADuB;AAEtC,WAAI,YAAY,KAAK,WAAL,CAAiB,QAAjB,EAA2B,OAA3B,CAAZ,EAAiD;AACnD,aAAI,gBAAgB,SAAS,KAAT,CAAe,GAAf,CAAhB,CAD+C;AAEnD,cAAK,UAAL,CAAgB,MAAhB,CAAuB,CAAvB,EAA0B,QAA1B,GAAqC,KAAK,cAAL,CAAoB,aAApB,EAAmC,QAAnC,CAArC,CAFmD;QAArD;MAFF;IA1Ca;AAmDf,+BAAS,MAAM;AACb,SAAI,EAAE,QAAF,CAAW,IAAX,CAAJ,EAAsB;AACpB,WAAI,KAAK,OAAL,EAAc;AAChB,cAAK,OAAL,GAAe,KAAK,YAAL,CAAkB,KAAK,OAAL,CAAjC,CADgB;QAAlB;;AAIA,WAAI,EAAE,GAAF,CAAM,IAAN,EAAY,aAAZ,CAAJ,EAAgC;AAC9B,cAAK,OAAL,CAAa,GAAb,GAAmB,KAAK,YAAL,CAAkB,KAAK,OAAL,CAAa,GAAb,CAArC,CAD8B;QAAhC;;AAIA,WAAI,EAAE,GAAF,CAAM,IAAN,EAAY,yBAAZ,CAAJ,EAA4C;AAC1C,cAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,GAA+B,KAAK,YAAL,CAAkB,KAAK,OAAL,CAAa,OAAb,CAAqB,OAArB,CAAjD,CAD0C;QAA5C;;AAIA,WAAI,EAAE,GAAF,CAAM,IAAN,EAAY,mBAAZ,CAAJ,EAAsC;AACpC,cAAK,kBAAL,CAAwB,IAAxB,EAA8B,KAAK,UAAL,CAAgB,MAAhB,CAA9B,CADoC;QAAtC;MAbF;AAiBA,YAAO,IAAP,CAlBa;IAnDA;EAAjB,C;;;;;;;;;;;;ACDA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe;;AAEb,qBAAkB,0BAAU,GAAV,EAAe;AAC/B,8BAAc,QAAd,CAA0B,6BAAiB,IAAjB,wBAA1B,EAAsE,EAAC,QAAD,EAAtE,EAD+B;IAAf;;AAIlB,2CAAe,MAAM;AACnB,8BAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,WAAI,KAAK,EAAL;AACJ,aAAM,OAAN;AACA,eAAQ,KAAK,MAAL;AACR,cAAO,KAAK,SAAL;AACP,gBAAS,KAAK,OAAL;AACT,gBAAS,6BAAiB,IAAjB;MANX,EADmB;IANR;AAiBb,2DAAuB,MAAM;AAC3B,8BAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,WAAI,KAAK,OAAL;AACJ,aAAM,qBAAN;AACA,aAAM,KAAK,OAAL;AACN,gBAAS,KAAK,OAAL;MAJX,EAD2B;IAjBhB;AA0Bb,+CAAiB,MAAM;AACrB,8BAAc,QAAd,CAAuB,aAAvB,EAAsC,KAAK,KAAL,CAAtC,CADqB;IA1BV;AA8Bb,yEAA8B,MAAM;AAClC,8BAAc,QAAd,CAAuB,oBAAvB,EAA6C;AAC3C,YAAK,KAAK,GAAL;AACL,aAAM,SAAN;AACA,eAAQ,KAAK,MAAL;AACR,gBAAS,6BAAiB,IAAjB;MAJX,EADkC;IA9BvB;AAuCb,qEAA4B,MAAM;AAChC,8BAAc,QAAd,CAAuB,eAAvB,EAAwC,KAAK,OAAL,CAAxC,CADgC;IAvCrB;AA2Cb,uEAA6B,MAAM;AACjC,8BAAc,QAAd,CAAuB,oBAAvB,EAA6C;AAC3C,YAAK,KAAK,GAAL;AACL,aAAM,QAAN;AACA,gBAAS,6BAAiB,IAAjB;MAHX,EADiC;IA3CtB;AAmDb,2DAAuB,MAAM;AAC3B,8BAAc,QAAd,CAAuB,oBAAvB,EAA6C;AAC3C,YAAK,KAAK,GAAL;AACL,YAAK,KAAK,GAAL;AACL,aAAM,MAAN;AACA,gBAAS,6BAAiB,IAAjB;AACT,iBAAU,KAAK,QAAL;MALZ,EAD2B;IAnDhB;AA6Db,iDAAkB,MAAM;AACtB,SAAI,OAAO,oBAAU,OAAV,CAAkB,KAAK,GAAL,CAAlB,GAA8B,MAA9B,GAAuC,KAAvC,CADW;AAEtB,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,sCAA6B,sBAA7B;AACA,mBAAY;AACV,eAAM,KAAK,OAAL;AACN,kBAAS,6BAAiB,IAAjB;QAFX;MAFF,EAFsB;AAStB,8BAAc,QAAd,CAAuB,oBAAvB,EAA6C;AAC3C,YAAK,KAAK,GAAL;AACL,aAAM,QAAN;AACA,gBAAS,6BAAiB,IAAjB;MAHX,EATsB;IA7DX;AA6Eb,iEAA0B,MAAM;AAC9B,8BAAc,QAAd,CAAuB,aAAvB,EAAsC,KAAK,OAAL,CAAtC,CAD8B;IA7EnB;AAiFb,2DAAwB;AACtB,8BAAc,QAAd,CAA0B,6BAAiB,IAAjB,6BAA1B,EADsB;IAjFX;AAqFb,uDAAsB;AACpB,8BAAc,QAAd,CAA0B,6BAAiB,IAAjB,2BAA1B,EADoB;IArFT;AAyFb,uDAAsB;AACpB,8BAAc,QAAd,CAA0B,6BAAiB,IAAjB,6BAA1B,EADoB;IAzFT;AA6Fb,yDAAgD;SAA3B,eAA2B;2BAAtB,MAAsB;SAAtB,mCAAQ,eAAc;0BAAX,KAAW;SAAX,iCAAO,cAAI;;AAC9C,SAAI,OAAO,oBAAU,OAAV,CAAkB,GAAlB,IAAyB,MAAzB,GAAkC,KAAlC,CADmC;AAE9C,SAAI,OAAO,OAAO,KAAP,CAFmC;;AAI9C,SAAI,QAAQ,CAAR,EAAW;AACb,cADa;MAAf;;AAIA,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,sCAA6B,yBAA7B;AACA,mBAAY;AACV,mBADU;AAEV,kBAAS,6BAAiB,IAAjB;QAFX;MAFF,EAR8C;IA7FnC;AA8Gb,iDAAkB,MAAM;AACtB,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,kDAD8C;AAE9C,mBAAY;AACV,eAAM,KAAK,OAAL;AACN,kBAAS,6BAAiB,IAAjB;QAFX;MAFF,EADsB;AAQtB,8BAAc,QAAd,CAA0B,6BAAiB,IAAjB,qBAA1B,EAAmE,IAAnE,EARsB;IA9GX;AAyHb,6CAAgB,MAAM;AACpB,8BAAc,QAAd,CAA0B,6BAAiB,OAAjB,sBAA1B,EAAuE;AACrE,gBAAS,6BAAiB,OAAjB;AACT,aAAM,MAAN;AACA,YAAK,KAAK,GAAL;AACL,mBAAY,KAAK,UAAL;MAJd,EADoB;IAzHT;AAkIb,+CAAiB,KAAK;AACpB,8BAAc,QAAd,CAA0B,6BAAiB,OAAjB,8BAA1B,EAA+E;AAC7E,eAAQ;AACN,iBADM;QAAR;MADF,EADoB;IAlIT;AA0Ib,2DAAuB,KAAK;AAC1B,8BAAc,QAAd,CAA0B,6BAAiB,OAAjB,wBAA1B,EAAyE;AACvE,aAAM,qBAAN;AACA,aAAM;AACJ,cAAK,GAAL;AACA,oBAAW,KAAX;QAFF;MAFF,EAD0B;IA1If;;;;;;;;;;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEM;AACJ,YADI,UACJ,GAAc;yCADV,YACU;;AACZ,SAAI,UAAU,qBAAU,wBAAV,CADF;AAEZ,SAAI,gBAAgB,KAAK,8BAAL,CAAoC,IAApC,CAAyC,IAAzC,CAAhB,CAFQ;;AAIZ,UAAK,YAAL,GAAoB,EAApB,CAJY;AAKZ,UAAK,wCAAL,GAAgD,EAAE,QAAF,CAAW,aAAX,EAA0B,OAA1B,EAAmC;AACjF,gBAAS,KAAT;AACA,iBAAU,IAAV;MAF8C,CAAhD,CALY;IAAd;;;;;;;;;8BADI;;4CAiB6B;WAAZ,8DAAQ,kBAAI;;AAC/B,cAAQ,MAAM,MAAN,KAAiB,CAAjB,CADuB;;;;;;;;;;;gCASb;WAAX,6DAAO,kBAAI;;AAClB,cAAO,KAAK,KAAL,CAAW,GAAX,EAAgB,GAAhB,EAAP,CADkB;;;;;;;;;;;kCASE;WAAX,6DAAO,kBAAI;;AACpB,WAAI,WAAW,KAAK,QAAL,CAAc,IAAd,CAAX,CADgB;AAEpB,WAAI,SAAS,SAAS,KAAT,CAAe,GAAf,EAAoB,GAApB,EAAT,CAFgB;AAGpB,cAAO,aAAa,MAAb,GAAsB,MAAtB,GAA+B,EAA/B,CAHa;;;;;;;;;;;0CAWQ;WAAX,6DAAO,kBAAI;;AAC5B,WAAI,aAAa,KAAK,cAAL,CAAoB,IAApB,CAAb,CADwB;AAE5B,cAAO,KAAK,cAAL,CAAoB,UAApB,MAAoC,SAApC,CAFqB;;;;;;;;;;;8CAUI;WAAX,6DAAO,kBAAI;;AAChC,WAAI,aAAa,KAAK,cAAL,CAAoB,IAApB,CAAb,CAD4B;AAEhC,WAAI,OAAO;AACT,2BAAkB,WAAW,gBAAX;AAClB,cAAK,WAAW,UAAX,IAAyB,WAAW,GAAX;AAC9B,sBAAa,WAAW,GAAX;AACb,gBAAO,WAAW,IAAX;;;AAGP,eAAM,WAAW,gBAAX,GAA8B,eAA9B,GAAgD,KAAK,cAAL,CAAoB,UAApB,CAAhD;;AAEN,uBAAc,KAAK,eAAL,CAAqB,UAArB,CAAd;AACA,eAAM,WAAW,IAAX;AACN,eAAM,WAAW,IAAX;QAXJ,CAF4B;;AAgBhC,WAAI,KAAK,IAAL,KAAc,eAAd,EAA+B;AACjC,cAAK,KAAL,GAAa,KAAK,KAAL,IAAc,eAAd,CADoB;QAAnC;;AAIA,cAAO,IAAP,CApBgC;;;;qCAuBlB,MAAM,QAAQ;AAC5B,WAAI,gBAAgB,IAAhB,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,gBAAO,iBAAO,IAAP,CAAY,IAAZ,CAAP,CAD8B;QAAhC,MAEO;AACL,gBAAO,sBAAO,IAAP,CAAP,CADK;QAFP;;AAMA,cAAO,KAAK,MAAL,CAAY,MAAZ,CAAP,CAP4B;;;;;;;;;;;oCAef,MAAM;AACnB,WAAI,mBAAmB,YAAnB,CADe;AAEnB,WAAI,mBAAmB,4BAAiB,iBAAjB,KAAuC,OAAvC,GAAiD,QAAjD,CAFJ;;AAInB,cAAO;AACL,cAAK,KAAK,KAAL,IAAc,KAAK,QAAL,IAAiB,KAAK,GAAL;AACpC,eAAM,KAAK,QAAL,CAAc,KAAK,IAAL,IAAa,KAAK,KAAL,IAAc,KAAK,GAAL,CAA/C;AACA,eAAM,KAAK,IAAL,IAAa,EAAb;AACN,2BAAkB,CAAC,CAAC,KAAK,gBAAL;AACpB,eAAM;AACJ,sBAAW,KAAK,aAAL;AACX,mBAAQ,KAAK,SAAL,IAAkB,KAAK,MAAL;AAC1B,yBAAc,6BAAQ,6BAAR;AACd,iBAAM,KAAK,eAAL,CAAqB,KAAK,IAAL,EAAW,gBAAhC,CAAN;AACA,iBAAM,KAAK,eAAL,CAAqB,KAAK,IAAL,EAAW,gBAAhC,CAAN;AACA,qBAAU,gBAAM,IAAN,CAAW,eAAX,CAA2B,KAAK,IAAL,CAArC;AACA,qBAAU,KAAK,UAAL,CAAgB,KAAK,KAAL,IAAc,KAAK,QAAL,IAAiB,KAAK,IAAL,IAAa,KAAK,GAAL,CAAtE;UAPF;QALF,CAJmB;;;;;;;;;;;oCA0BN,MAAM;AACnB,WAAI,OAAO,CAAC,KAAK,GAAL,IAAY,EAAZ,CAAD,CAAiB,KAAjB,CAAuB,GAAvB,EAA4B,CAA5B,EAA+B,WAA/B,MAAgD,CAAC,KAAK,IAAL,IAAa,EAAb,CAAD,CAAkB,WAAlB,EAAhD,CADQ;AAEnB,WAAI,WAAW,KAAK,IAAL,IAAa,KAAK,IAAL,CAAU,QAAV,GAAqB,KAAK,IAAL,CAAU,QAAV,GAAqB,EAAvD,CAFI;;AAInB,WAAI,UAAU,KAAK,KAAL,CAAW,4BAAX,KAA4C,SAAS,KAAT,CAAe,0BAAf,CAA5C,CAJK;AAKnB,WAAI,QAAQ,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAS,KAAT,CAAe,OAAf,CAAzB,CALO;AAMnB,WAAI,UAAU,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAS,KAAT,CAAe,OAAf,CAAzB,CANK;AAOnB,WAAI,UAAU,KAAK,KAAL,CAAW,SAAX,KAAyB,SAAS,KAAT,CAAe,OAAf,CAAzB,CAPK;AAQnB,WAAI,YAAY,KAAK,KAAL,CAAW,0BAAX,CAAZ,CARe;;AAUnB,WAAI,OAAJ,EAAa;AACX,gBAAO,WAAW,QAAQ,CAAR,EAAW,OAAX,CAAmB,KAAnB,EAA0B,MAA1B,EAAkC,OAAlC,CAA0C,KAA1C,EAAiD,SAAjD,CAAX,CADI;QAAb;AAGA,WAAI,KAAJ,EAAW;AACT,gBAAO,iBAAP,CADS;QAAX;AAGA,WAAI,SAAJ,EAAe;AACb,gBAAO,eAAP,CADa;QAAf;AAGA,WAAI,OAAJ,EAAa;AACX,gBAAO,WAAP,CADW;QAAb;AAGA,WAAI,OAAJ,EAAa;AACX,gBAAO,WAAP,CADW;QAAb;;AAIA,cAAO,SAAP,CA1BmB;;;;;;;;;;;qCAkCL,MAAM;AACpB,cAAO,KAAK,cAAL,CAAoB,IAApB,MAA8B,eAA9B,CADa;;;;;;;;;;;uCASJ,KAAK;;;;;AAKrB,sCAAoB,QAApB,CAA6B,gCAA7B,EALqB;AAMrB,WAAI,QAAQ,SAAS,aAAT,CAAuB,QAAvB,CAAR;WACF,SAAS,SAAT,MAAS,GAAM;AACb,eAAM,UAAN,CAAiB,WAAjB,CAA6B,KAA7B,EADa;AAEb,kCAAc,QAAd,CAAuB,oBAAvB,EAFa;QAAN,CAPU;AAWrB,gBAAS,IAAT,CAAc,WAAd,CAA0B,KAA1B;;;AAXqB,QAcrB,CAAE,KAAF,CAAQ,MAAR,EAAgB,qBAAU,qBAAV,CAAhB,CAdqB;AAerB,aAAM,GAAN,GAAY,GAAZ,CAfqB;;;;;;;;;sDAqBU;AAC/B,qCAAkB,8BAAlB,CAAiD,KAAK,YAAL,CAAjD,CAD+B;AAE/B,YAAK,YAAL,GAAoB,EAApB,CAF+B;;;;;;;;;;;;gDAWyB;WAAnC,aAAmC;WAA7B,2DAAK,EAAE,IAAF,gBAAwB;WAAhB,8DAAQ,EAAE,IAAF,gBAAQ;;AACxD,WAAI,OAAO,EAAE,MAAF,EAAM,YAAN,EAAP,CADoD;;AAGxD,YAAK,YAAL,CAAkB,EAAlB,IAAwB,IAAxB,CAHwD;AAIxD,YAAK,wCAAL,GAJwD;;;UAnMtD;;;AA2MN,QAAO,OAAP,GAAiB,IAAI,UAAJ,EAAjB,C;;;;;;;;;;;;AChNA;;;;AACA;;;;;;;;;;mBAEe;;;;;;;AAOb,0BAAuB,+BAAS,IAAT,EAAe;AACpC,8BAAc,QAAd,CAAuB,4BAAvB,EAAqD,IAArD,EADoC;IAAf;;AAIvB,mBAAgB,wBAAS,IAAT,EAAe;AAC7B,8BAAc,QAAd,CAAuB,kBAAvB,EAA2C,IAA3C,EAD6B;IAAf;;AAIhB,wBAAqB,+BAAoB;SAAX,6DAAO,kBAAI;;AACvC,8BAAc,QAAd,CAAuB,uBAAvB,EAAgD,IAAhD,EADuC;IAApB;;AAIrB,yBAAsB,8BAAS,IAAT,EAAe;AACnC,oCAAoB,QAApB,CAA6B,kBAA7B,EAAiD;AAC/C,aAAM,iDAAN;MADF,EADmC;;AAKnC,8BAAc,QAAd,CAAuB,wBAAvB,EAAiD,IAAjD,EALmC;IAAf;;AAQtB,sBAAmB,2BAAS,IAAT,EAAe;AAChC,oCAAoB,QAApB,CAA6B,kBAA7B,EAAiD;AAC/C,aAAM,kDAAN;MADF,EADgC;;AAKhC,8BAAc,QAAd,CAAuB,qBAAvB,EAA8C,IAA9C,EALgC;IAAf;;AAQnB,sBAAmB,2BAAS,GAAT,EAAc;AAC/B,8BAAc,QAAd,CAAuB,mBAAvB,EAA4C,EAAC,WAAW,IAAX,EAAiB,KAAK,GAAL,EAA9D,EAD+B;IAAd;;AAInB,yBAAsB,8BAAS,IAAT,EAAe;AACnC,8BAAc,QAAd,CAAuB,wBAAvB,EAAiD,IAAjD,EADmC;IAAf;;AAItB,sBAAmB,2BAAS,GAAT,EAAc;AAC/B,8BAAc,QAAd,CAAuB,mBAAvB,EAA4C,EAAC,WAAW,KAAX,EAAkB,KAAK,GAAL,EAA/D,EAD+B;IAAd;;AAInB,gBAAa,qBAAU,IAAV,EAAgB;AAC3B,8BAAc,QAAd,CAAuB,cAAvB,EAAuC;AACrC,YAAK,KAAK,GAAL;AACL,YAAK,KAAK,GAAL;MAFP,EAD2B;IAAhB;;AAOb,gBAAa,qBAAS,IAAT,EAAe;AAC1B,8BAAc,QAAd,CAAuB,gBAAvB,EAAyC,IAAzC,EAD0B;IAAf;;AAIb,qBAAkB,0BAAS,IAAT,EAAe;AAC/B,oCAAoB,QAApB,CAA6B,sBAA7B,EAAqD,IAArD,EAD+B;IAAf;;AAIlB,mBAAgB,wBAAS,GAAT,EAAc;AAC5B,8BAAc,QAAd,CAAuB,uBAAvB,EAAgD,GAAhD,EAD4B;IAAd;;AAIhB,kBAAe,uBAAS,GAAT,EAAc;AAC3B,8BAAc,QAAd,CAAuB,sBAAvB,EAA+C,GAA/C,EAD2B;IAAd;;;;;;AAQf,0BAAuB,+BAAS,IAAT,EAAc;AACnC,8BAAc,QAAd,CAAuB,2BAAvB,EAAoD,KAAK,WAAL,CAApD,CADmC;IAAd;;AAIvB,2BAAwB,kCAAW;AACjC,8BAAc,QAAd,CAAuB,iCAAvB,EADiC;IAAX;;AAIxB,mDAAmB,MAAK;AACtB,8BAAc,QAAd,CAAuB,sBAAvB,EAA+C,IAA/C,EADsB;IAlFX;AAsFb,yDAAsB,MAAK;AACzB,8BAAc,QAAd,CAAuB,0BAAvB,EAAmD,IAAnD,EADyB;IAtFd;;;AA0Fb,wBAAqB,6BAAU,GAAV,EAAe;AAClC,8BAAc,QAAd,CAAuB,uBAAvB,EAAgD,GAAhD,EADkC;IAAf;;AAIrB,uDAAqB,MAAM,IAAI,OAAO;AACpC,8BAAc,QAAd,CAAuB,4BAAvB,EAAqD,IAArD,EAA2D,EAA3D,EAA+D,KAA/D,EADoC;IA9FzB;AAkGb,2EAA+B,SAAS;AACtC,8BAAc,QAAd,CAAuB,uCAAvB,EAAgE,OAAhE,EADsC;IAlG3B;AAsGb,mDAAmB,UAAU;AAC3B,8BAAc,QAAd,CAAuB,sBAAvB,EAA+C,QAA/C,EAD2B;IAtGhB;AA0Gb,2DAAuB,UAAU;AAC/B,8BAAc,QAAd,CAAuB,0BAAvB,EAAmD,QAAnD,EAD+B;IA1GpB;AA8Gb,uDAAqB,MAAM;AACzB,8BAAc,QAAd,CAAuB,wBAAvB,EAAiD,IAAjD,EADyB;IA9Gd;;;;;;;;;;;;;mBCPA;AACb,kCAA+B,WAA/B;;;;;;;;;;;;;;;;;;;;;;;ACDF;;;;AACA;;;;AACA;;;;;;KAEM;AAEJ,YAFI,0BAEJ,CAAY,MAAZ,EAAoB;yCAFhB,4BAEgB;;;AAElB,UAAK,WAAL,GAAmB,KAAnB,CAFkB;;AAIlB,UAAK,mBAAL,GAA2B,EAA3B;;;;;;AAJkB,SAUlB,CAAK,UAAL,GAAkB,EAAlB;;;;;;AAVkB,SAgBlB,CAAK,sBAAL,GAA8B,EAA9B,CAhBkB;;AAkBlB,UAAK,wBAAL,GAAgC,EAAE,QAAF,CAAW,KAAK,gBAAL,EAAuB,OAAO,oCAAP,EAA6C;AAC7G,gBAAS,KAAT;AACA,iBAAU,IAAV;MAF8B,CAAhC,CAlBkB;;AAuBlB,UAAK,yBAAL,GAAiC,EAAE,QAAF,CAAW,KAAK,iBAAL,EAAwB,OAAO,qCAAP,EAA8C;AAChH,gBAAS,KAAT;AACA,iBAAU,IAAV;MAF+B,CAAjC,CAvBkB;IAApB;;;;;;;;;8BAFI;;4BAqCG;AACL,YAAK,WAAL,GAAmB,IAAnB,CADK;AAEL,YAAK,WAAL,GAFK;;;;;;;;;;;;yCAWa,MAAM;;AAExB,WAAI,aAAa,gBAAM,OAAN,CAAc,IAAd,CAAb,CAFoB;;AAIxB,YAAK,4BAAL,CAAkC,UAAlC,EAJwB;;AAMxB,YAAK,yBAAL,GANwB;AAOxB,YAAK,wBAAL,GAPwB;;;;;;;;;;;;6CAgBF,MAAM;;AAE5B,WAAI,aAAa,gBAAM,OAAN,CAAc,IAAd,CAAb,CAFwB;;AAI5B,YAAK,4BAAL,CAAkC,UAAlC,EAJ4B;;AAM5B,YAAK,wBAAL,GAN4B;;;;;;;;;;;mCAchB;AACZ,YAAK,sBAAL,GAA8B,EAAE,IAAF,CAAO,KAAK,UAAL,CAArC,CADY;AAEZ,YAAK,yBAAL,GAFY;AAGZ,YAAK,wBAAL,GAHY;;;;kDAMe,MAAM;;;AACjC,SAAE,OAAF,CAAU,IAAV,EAAgB,UAAC,GAAD,EAAS;AACvB,eAAM,IAAI,QAAJ,EAAN,CADuB;AAEvB,aAAI,MAAK,UAAL,CAAgB,GAAhB,CAAJ,EAA0B;AACxB,iBAAK,UAAL,CAAgB,GAAhB,IADwB;UAA1B,MAEO;AACL,iBAAK,UAAL,CAAgB,GAAhB,IAAuB,CAAvB;;;AADK,eAID,CAAC,EAAE,QAAF,CAAW,MAAK,mBAAL,EAA0B,GAArC,CAAD,IAA8C,CAAC,EAAE,QAAF,CAAW,MAAK,sBAAL,EAA6B,GAAxC,CAAD,EAA+C;AAC/F,mBAAK,sBAAL,CAA4B,IAA5B,CAAiC,GAAjC,EAD+F;YAAjG;UANF;QAFc,CAAhB,CADiC;;;;kDAgBN,MAAM;;;AACjC,SAAE,OAAF,CAAU,IAAV,EAAgB,UAAC,GAAD,EAAS;AACvB,eAAM,IAAI,QAAJ,EAAN,CADuB;AAEvB,aAAI,OAAK,UAAL,CAAgB,GAAhB,IAAuB,CAAvB,EAA0B;AAC5B,kBAAK,UAAL,CAAgB,GAAhB,IAD4B;UAA9B,MAEO;AACL,kBAAK,UAAL,GAAkB,EAAE,IAAF,CAAO,OAAK,UAAL,EAAiB,GAAxB,CAAlB,CADK;AAEL,aAAE,IAAF,CAAO,OAAK,sBAAL,EAA6B,GAApC,EAFK;UAFP;QAFc,CAAhB,CADiC;;;;wCAYhB;;;AAGjB,WAAI,SAAS,EAAE,IAAF,CAAO,KAAK,UAAL,CAAhB;WACF,YAAY,EAAE,GAAF,CAAM,KAAK,mBAAL,EAA0B,MAAhC,CAAZ;WACA,UAAU,CAAC,EAAE,OAAF,CAAU,SAAV,CAAD;;;AALK,WAQb,WAAW,KAAK,WAAL,IAAoB,OAAO,MAAP,EAAe;AAChD,cAAK,mBAAL,GAA2B,MAA3B,CADgD;AAEhD,kCAAc,QAAd,CAAuB,kBAAvB,EAA2C,KAAK,mBAAL,CAA3C,CAFgD;QAAlD;;;;yCAMkB;;AAElB,WAAI,OAAO,EAAE,IAAF,CAAO,KAAK,sBAAL,CAAd;;;AAFc,WAKd,KAAK,MAAL,IAAe,KAAK,WAAL,EAAkB;AACnC,kCAAc,QAAd,CAAuB,iBAAvB,EAA0C,IAA1C;;;AADmC,aAInC,CAAK,sBAAL,GAA8B,EAA9B,CAJmC;QAArC;;;UAnIE;;;SA6IgC,kCAA9B;mBAEO,IAAI,0BAAJ,uB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnJf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEM;;;;;;AAKJ,YALI,WAKJ,GAAc;yCALV,aAKU;;AACZ,UAAK,IAAL,GAAY,KAAK,WAAL,EAAZ,CADY;AAEZ,UAAK,iBAAL,GAFY;IAAd;;;;;;;;;;;;;;8BALI;;mCAoBU;AACZ,cAAO;AACL,wBAAe,EAAf;AACA,2BAAkB,EAAlB;AACA,iBAAQ,EAAR;AACA,wBAAe,EAAf;AACA,yBAAgB,IAAhB;AACA,yBAAgB,IAAhB;AACA,oBAAW,gBAAM,aAAN,CAAoB,QAApB,CAA6B,8BAAY,GAAZ,CAAgB,gBAAhB,CAA7B,CAAX;QAPF,CADY;;;;;;;;;yCAeM;;;AAClB,YAAK,UAAL,GAAkB;AAChB,2BAAkB,KAAK,aAAL;AAClB,2BAAkB,KAAK,aAAL;AAClB,kCAAyB,KAAK,iBAAL;AACzB,oCAA2B,KAAK,iBAAL;AAC3B,kCAAyB,KAAK,qBAAL;AACzB,iCAAwB,KAAK,iBAAL;AACxB,4CAAmC,KAAK,qBAAL;AACnC,yCAAgC,KAAK,uBAAL;AAChC,2CAAkC,KAAK,6BAAL;AAClC,2CAAkC,KAAK,qBAAL;AAClC,0CAAiC,KAAK,wBAAL;AACjC,0CAAiC,KAAK,mBAAL;AACjC,oCAA2B,KAAK,iBAAL;AAC3B,yCAAgC,KAAK,2BAAL;AAChC,uCAA8B,KAAK,yBAAL;AAC9B,yCAAgC,KAAK,yBAAL;QAhBlC,CADkB;;AAoBlB,SAAE,SAAF,CAAY,KAAK,UAAL,EAAiB,UAAC,EAAD,EAAK,GAAL,EAAU,GAAV,EAAkB;AAC7C,aAAI,GAAJ,IAAW,EAAE,IAAF,CAAO,EAAP,QAAX,CAD6C;QAAlB,CAA7B,CApBkB;;AAwBlB,gCAAc,QAAd,CAAuB,KAAK,UAAL,CAAvB,CAxBkB;;;;wCA2BD;AACjB,gCAAc,UAAd,CAAyB,KAAK,UAAL,CAAzB,CADiB;;;;mCAIL,QAAQ;AACpB,WAAI,OAAO,cAAP,EAAuB;AACzB,cAAK,IAAL,CAAU,cAAV,GAA2B,OAAO,cAAP,CADF;QAA3B;AAGA,WAAI,OAAO,cAAP,EAAuB;AACzB,cAAK,IAAL,CAAU,cAAV,GAA2B,OAAO,cAAP,CADF;QAA3B;AAGA,WAAI,EAAE,GAAF,CAAM,MAAN,EAAc,eAAd,KAAkC,EAAE,QAAF,CAAW,OAAO,aAAP,CAA7C,EAAoE;AACtE,cAAK,IAAL,CAAU,aAAV,GAA0B,EAAE,MAAF,CAAS,EAAT,EAAa,KAAK,IAAL,CAAU,aAAV,EAAyB,OAAO,aAAP,CAAhE,CADsE;QAAxE;;;;mCAKY,QAAQ;AACpB,YAAK,IAAL,CAAU,MAAV,GAAmB,MAAnB,CADoB;;;;yCAIF;;;AAClB,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,UAAJ,EAAgB;AACd,kBAAK,IAAL,CAAU,aAAV,CAAwB,MAAxB,CAA+B,KAA/B,GADc;UAAhB;QADiC,CAAnC,CADkB;;;;6CAQI,KAAK;AAC3B,WAAI,OAAO,IAAI,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAP,CADuB;AAE3B,cAAO,KAAK,KAAL,CAAW,KAAK,WAAL,CAAiB,GAAjB,IAAwB,CAAxB,EAA2B,KAAK,MAAL,CAA7C,CAF2B;;;;oCAKd,KAAK,OAAO;AACzB,WAAI,CAAC,KAAD,EAAQ;AACV,gBAAO,GAAP,CADU;QAAZ;AAGA,cAAO,gBAAM,oBAAN,CAA2B,GAA3B,EAAgC,KAAhC,EAAuC,KAAvC,CAAP,CAJyB;;;;mCAOb,KAAK;;AAEjB,WAAI,KAAK,IAAL,CAAU,aAAV,CAAwB,oCAAxB,EAA8D;AAChE,eAAM,gBAAM,eAAN,CAAsB,GAAtB,EAA2B;AAC/B,8CAAmC,MAAnC;UADI,CAAN,CADgE;QAAlE;AAKA,cAAO,GAAP,CAPiB;;;;;;;;;;;;uCAgBD,MAAM;;;AACtB,WAAI,QAAQ,KAAK,GAAL,EAAR;;;AADkB,cAIf,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,UAAJ,EAAgB;AACd,kBAAK,0BAAL,CAAgC,IAAhC,EAAsC,OAAK,iBAAL,CAAtC,CADc;UAAhB,MAEO;;;AAEL,iBAAI,cAAc,KAAK,IAAL,KAAc,MAAd;;wBACe,cAC7B,CAAC,gBAAM,GAAN,CAAU,OAAV,CAAkB,KAAK,GAAL,CAAnB,EAA8B,gBAAM,YAAN,CAAmB,EAAnB,CAA9B,CAD6B,GAE7B,CAAC,IAAD,EAAO,OAAK,uBAAL,CAA6B,KAAK,GAAL,CAApC,CAF6B;;;;iBAA5B;iBAAW;;AAGhB,iBAAI,2BAA2B,OAAK,kBAAL,EAA3B;;AAEJ,oBAAK,kBAAL;AACA,2BAAI,eAAJ,CAAoB,SAApB,EAA+B,aAA/B,EAA8C,IAA9C,CAAmD,oBAAY;AAC7D,oBAAK,GAAL,GAAW,KAAK,GAAL,IAAe,OAAK,IAAL,CAAU,cAAV,SAA4B,mBAA3C,CADkD;AAE7D,mBAAI,WAAJ,EAAiB;AACf,8BAAa,OAAK,IAAL,CAAU,gBAAV,CAAb,CADe;AAEf,wBAAO,OAAK,cAAL,CAAoB,IAApB,EACJ,IADI,CACC,YAAM;AACV,wBAAK,GAAL,GAAW,OAAK,aAAL,CAAmB,KAAK,GAAL,CAA9B,CADU;AAEV,wBAAK,GAAL,GAAW,OAAK,cAAL,CAAoB,KAAK,GAAL,EAAU,SAAS,KAAT,CAAzC,CAFU;AAGV,0BAAO,OAAK,iBAAL,CAAuB,IAAvB,EAA6B,wBAA7B,EAAuD,IAAvD,CAA4D,wBAAgB;AACjF,4BAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CADiF;AAEjF,yBAAI,aAAa,MAAb,IAAuB,OAAK,IAAL,CAAU,SAAV,EAAqB;AAC9C,8BAAK,qBAAL,GAD8C;sBAAhD,MAEO;AACL,8BAAK,qBAAL,CAA2B,IAA3B,EADK;sBAFP;oBAFiE,CAAnE,CAHU;kBAAN,CADD,CAaJ,KAbI,CAaE,UAAC,MAAD,EAAS,MAAT,EAAoB;AACzB,oCAAO,KAAP,CAAa,QAAb,EAAuB,MAAvB,EAA+B,MAA/B,EADyB;kBAApB,CAbT,CAFe;gBAAjB,MAkBO,IAAI,KAAK,IAAL,KAAc,QAAd,EAAwB;AACjC,sBAAK,GAAL,GAAW,OAAK,cAAL,CAAoB,KAAK,GAAL,EAAU,SAAS,KAAT,CAAzC,CADiC;AAEjC,wBAAO,OAAK,iBAAL,CAAuB,IAAvB,EAA6B,wBAA7B,EAAuD,IAAvD,CAA4D,wBAAgB;AACjF,0BAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CADiF;AAEjF,uBAAI,CAAC,aAAa,MAAb,IAAuB,CAAC,OAAK,IAAL,CAAU,SAAV,EAAqB;AAChD,4BAAK,qBAAL,CAA2B,IAA3B,EADgD;oBAAlD;kBAFiE,CAAnE,CAFiC;gBAA5B;cApB0C,CAAnD,CA6BG,KA7BH,CA6BS,iBAAS;AAChB,gCAAO,KAAP,CAAa,YAAb,EAA2B,KAA3B;;AADgB,cAAT,CA7BT;gBATK;UAFP;QADiC,CAAnC,CAJsB;;;;2CAqDF,MAAM;;;AAC1B,WAAI,QAAQ,KAAK,GAAL,EAAR,CADsB;;AAG1B,YAAK,GAAL,GAAc,KAAK,IAAL,CAAU,cAAV,SAA4B,gBAAM,YAAN,CAAmB,EAAnB,OAA1C,CAH0B;;AAK1B,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,UAAJ,EAAgB;AACd,kBAAK,0BAAL,CAAgC,IAAhC,EAAsC,OAAK,qBAAL,CAAtC,CADc;UAAhB,MAEO;AACL,kBAAO,OAAK,kBAAL,CAAwB;AAC7B,kBAAK,KAAK,GAAL;AACL,kBAAK,KAAK,GAAL,CAAS,OAAT,CAAiB,QAAjB,EAA2B,QAA3B,CAAL;YAFK,EAGJ,IAHI,CAGC,YAAM;AACZ,oBAAK,kBAAL,CAAwB,IAAxB,EAA8B,KAA9B,EADY;YAAN,CAHR,CADK;UAFP;QADiC,CAAnC,CAL0B;;;;yCAmBU;;;WAApB,6DAAO,EAAE,KAAK,EAAL,kBAAW;;AACpC,WAAI,QAAQ,KAAK,GAAL,EAAR,CADgC;;AAGpC,YAAK,GAAL,GAAW,KAAK,GAAL,CAAS,OAAT,CAAiB,QAAjB,EAA2B,QAA3B,CAAX,CAHoC;;AAKpC,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,UAAJ,EAAgB;AACd,kBAAK,0BAAL,CAAgC,IAAhC,EAAsC,OAAK,iBAAL,CAAtC,CADc;UAAhB,MAEO;AACL,kBAAK,kBAAL,CAAwB,IAAxB,EAA8B,KAA9B,EADK;UAFP;QADiC,CAAnC,CALoC;;;;wCAcnB,MAAM,OAAO;;;AAC9B,WAAI,gBAAgB,KAAK,uBAAL,CAA6B,KAAK,GAAL,CAA7C,CAD0B;AAE9B,WAAI,2BAA2B,KAAK,kBAAL,EAA3B,CAF0B;;AAI9B,YAAK,kBAAL,GAJ8B;AAK9B,cAAO,cAAI,eAAJ,CAAoB,IAApB,EAA0B,aAA1B,EAAyC,IAAzC,CAA8C,oBAAY;AAC/D,cAAK,GAAL,GAAW,OAAK,cAAL,CAAoB,KAAK,GAAL,EAAU,SAAS,KAAT,CAAzC,CAD+D;;AAG/D,gBAAK,iBAAL,CAAuB,IAAvB,EAA6B,wBAA7B,EACG,IADH,CACQ,wBAAgB;AACpB,kBAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CADoB;AAEpB,eAAI,CAAC,aAAa,MAAb,IAAuB,CAAC,OAAK,IAAL,CAAU,SAAV,EAAqB;AAChD,oBAAK,qBAAL,CAA2B,IAA3B,EADgD;YAAlD;UAFI,CADR,CAOG,KAPH,CAOS,UAAC,MAAD,EAAS,MAAT,EAAoB;AACzB,4BAAO,KAAP,CAAa,QAAb,EAAuB,MAAvB,EAA+B,MAA/B,EADyB;UAApB,CAPT,CAH+D;QAAZ,CAA9C,CAaJ,KAbI,CAaE,iBAAS;AAChB,0BAAO,KAAP,CAAa,YAAb,EAA2B,KAA3B;;AADgB,QAAT,CAbT,CAL8B;;;;gDAwBL,MAAuB;;;WAAjB,6DAAO,YAAM,EAAN,gBAAU;;AAChD,WAAI,UAAU,KAAK,IAAL,CAAU,aAAV;WACV,qBAAqB,SAArB,kBAAqB,GAAM;AACzB,gBAAK,yBAAL,GAAiC,IAAjC,CAAsC,YAAM;AAC1C,gBAAK,IAAL,SAAgB,IAAhB,EAD0C;UAAN,CAAtC,CADyB;QAAN;;;AAFuB,WAS5C,KAAK,GAAL,KAAa,QAAQ,GAAR,EAAa;;AAE5B,aAAI,QAAQ,SAAR,IAAqB,QAAQ,UAAR,EAAoB;AAC3C,mBAAQ,MAAR,CAAe,KAAf,GAD2C;UAA7C,MAEO;AACL,gCADK;UAFP;QAFF,MAOO,IAAI,QAAQ,SAAR,EAAmB;;AAE5B,aAAI,QAAQ,6BAAQ,aAAR,CAAZ,EAAoC;AAClC,gCADkC;UAApC,MAEO;;AAEL,kBAAO,IAAP,CAFK;UAFP;QAFK,MAQA;;AAEL,8BAFK;QARA;;;;0CAcY;AACnB,WAAI,KAAK,IAAL,CAAU,aAAV,CAAwB,gCAAxB,IAA4D,KAAK,IAAL,CAAU,SAAV,EAAqB;AACnF,gCAAY,QAAZ,CAAqB;AACnB,iBAAM,MAAN;AACA,iBAAM,6BAAQ,UAAR;AACN,kBAAO,MAAP;AACA,kBAAO,KAAP;UAJF,EADmF;QAArF;;;;oCAUa,MAAM;;;AACnB,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,iCAAa,sBAAb,CAAoC;AAClC,gBAAK,KAAK,GAAL;AACL,gBAAK,KAAK,GAAL;AACL,qBAAU,EAAE,IAAF,CAAO,OAAK,8BAAL,QAAP,EAAkD,OAAlD,EAA2D,MAA3D,CAAV;UAHF,EADsC;QAArB,CAAnB,CADmB;;;;wCAUF,MAAM;AACvB,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,iCAAa,sBAAb,CAAoC;AAClC,gBAAK,KAAK,GAAL;AACL,gBAAK,KAAK,GAAL;UAFP,EADsC;AAKtC,mBALsC;QAArB,CAAnB,CADuB;;;;oDAUM,SAAS,MAAM,SAAS;AACrD,WAAI,cAAc,EAAE,GAAF,CAAM,OAAN,EAAe,GAAf,CAAd,CADiD;;yBAE9B,EAAE,SAAF,CAAY,WAAZ,EAAyB,UAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAmB;AAC/D,aAAI,QAAQ,OAAR,EAAiB;AACrB,eAAI,IAAJ,CAAS,GAAT,EAAc,IAAI,MAAJ,CAAd,CADqB;UAArB;AAGF,gBAAO,GAAP,CAJiE;QAAnB,EAK7C,EALoB,EAF8B;;;;WAEhD,yBAFgD;WAExC,yBAFwC;;;AASrD,eAAQ,MAAR;AACE,cAAK,SAAL,CADF;AAEE,cAAK,QAAL;AACE,gBAAK,MAAL,EAAa,MAAb,EADF;AAEE,iBAFF;AAFF,cAKO,QAAL,CALF;AAME,cAAK,SAAL;AACE,qBADF;AAEE,iBAFF;AANF;AAUI,gBAAK,yBAAL,EAAgC,OAAhC,EADF;AATF,QATqD;;;;;;;;;;;;2CA6BjC,MAAM;;;AAC1B,WAAI,MAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,MAAL,CAAY,GAAZ,CAAzB,CADsB;;AAG1B,WAAI,QAAQ,6BAAiB,GAAjB,CAAqB,KAArB,CAAR,EAAqC;;AACvC,eAAI,OAAO,OAAK,SAAL,CAAe,GAAf,CAAP;eACA,UAAU,OAAK,IAAL,CAAU,aAAV;eACV,uBAFJ;;AAIA;gBAAO,OAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,mBAAI,UAAJ,EAAgB;AACd,qBAAI,QAAQ,GAAR,KAAgB,GAAhB,IAAuB,QAAQ,SAAR,EAAmB;;AAE5C,2CAAa,6BAAb,CAA2C;AACzC,0BAAK,GAAL;AACA,6BAAQ,WAAR;oBAFF,EAF4C;AAM5C,0BAAO,IAAP,CAN4C;kBAA9C,MAOO,IAAI,QAAQ,GAAR,KAAgB,GAAhB,IAAuB,CAAC,QAAQ,SAAR,EAAmB;;AAEpD,oDAA+B,gBAAM,GAAN,EAA/B,CAFoD;kBAA/C,MAGA,IAAI,QAAQ,GAAR,KAAgB,GAAhB,IAAuB,QAAQ,SAAR,EAAmB;;AAEnD,0BAAO,IAAP,CAFmD;kBAA9C;gBAXT,MAeO;AACL,kDAA+B,gBAAM,GAAN,EAA/B,CADK;gBAfP;;;AAD+C,sCAqB/C,CAAa,cAAb,CAA4B;AAC1B,qBAAI,cAAJ;AACA,yBAAQ,KAAK,MAAL,CAAY,IAAZ;AACR,4BAAW,KAAK,SAAL;AACX,0BAAS,KAAK,OAAL;gBAJX,EArB+C;AA2B/C,sBAAK,qBAAL,CAA2B,IAA3B,EA3B+C;AA4B/C,mBAAI,SAAS;AACX,iCAAgB,cAAhB;AACA,yBAAQ,IAAR;AACA,+BAAc,WAAW,YAAM;AAC7B,0BAAK,gBAAL,CAAsB,IAAtB,EAD6B;kBAAN,EAEtB,qBAAU,yBAAV,CAFH;gBAHE,CA5B2C;AAmC/C,sBAAK,IAAL,CAAU,gBAAV,CAA2B,IAA3B,CAAgC,MAAhC,EAnC+C;AAoC/C,6BAAI,qBAAJ,CACE,OAAK,uBAAL,CAA6B,IAA7B,SAAwC,KAAK,OAAL,CAD1C,EAEE,OAAK,wBAAL,CAA8B,IAA9B,SAAyC,KAAK,OAAL,CAF3C,EAGE;AACE,qBAAI,cAAJ;AACA,uBAAM,KAAK,MAAL,CAAY,IAAZ;AACN,yBAAQ,KAAK,SAAL;gBANZ,EApC+C;cAAd;YAAnC;aALuC;;;QAAzC;;;;;;;;;;kCA0DW,KAAK;AAChB,WAAI,SAAS,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,gBAAV,EAA4B;AAC9C,iBAAQ,EAAE,QAAF,EAAR;QADW,CAAT,CADY;;AAKhB,WAAI,MAAJ,EAAY;AACV,sBAAa,OAAO,YAAP,CAAb,CADU;AAEV,cAAK,aAAL,GAFU;AAGV,WAAE,IAAF,CAAO,KAAK,IAAL,CAAU,gBAAV,EAA4B,MAAnC,EAHU;AAIV,iCAAa,gBAAb,CAA8B;AAC5B,kBAAO,OAAO,cAAP;UADT,EAJU;AAOV,uBAAI,sBAAJ,CAA2B,OAAO,cAAP,CAA3B,CAPU;QAAZ;;;;;;;;;;6CAesB,MAAM;AAC5B,WAAI,MAAM,EAAE,GAAF,CAAM,IAAN,EAAY,YAAZ,EAA0B,EAA1B,CAAN;WACF,MAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,IAAL,CAAzB,CAF0B;;AAI5B,YAAK,aAAL,GAJ4B;AAK5B,YAAK,wBAAL,CAA8B,GAA9B,EAL4B;AAM5B,YAAK,YAAL,CAAkB,GAAlB,EAN4B;AAO5B,+BAAa,4BAAb,CAA0C;AACxC,cAAK,GAAL;QADF,EAP4B;AAU5B,YAAK,iBAAL,CAAuB;AACrB,cAAK,GAAL;AACA,eAAM,QAAN;AACA,cAAK,GAAL;AACA,kBAAS,6BAAiB,IAAjB;QAJX,EAV4B;;;;;;;;;;8CAsBL,MAAM;AAC7B,WAAI,MAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,IAAL,CAAzB,CADyB;AAE7B,YAAK,aAAL,GAF6B;AAG7B,YAAK,wBAAL,CAA8B,GAA9B,EAH6B;AAI7B,YAAK,YAAL,CAAkB,GAAlB,EAJ6B;AAK7B,+BAAa,6BAAb,CAA2C;AACzC,cAAK,GAAL;AACA,iBAAQ,SAAR;QAFF,EAL6B;;;;;;;;;;sCAed,QAAQ;AACvB,YAAK,aAAL,GADuB;AAEvB,YAAK,wBAAL,CAA8B,OAAO,GAAP,CAA9B,CAFuB;AAGvB,WAAI,MAAM;AACR,eAAM,6BAAQ,mBAAR,CAA4B,OAAO,IAAP,CAAlC;AACA,eAAM,aAAN;AACA,eAAM,OAAO,GAAP;AACN,gBAAO,KAAP;AACA,iBAAQ,GAAR;QALE,CAHmB;AAUvB,+BAAa,yBAAb,CAAuC;AACrC,kBAAS,GAAT;QADF,EAVuB;;;;;;;;;;wCAmBN,OAAO,QAAQ;AAChC,YAAK,aAAL,GADgC;AAEhC,WAAI,MAAM;AACR,eAAM,6BAAQ,aAAR,CAAsB,MAAtB,EAA8B,MAAM,IAAN,CAApC;AACA,eAAM,QAAN;AACA,eAAM,MAAM,GAAN;AACN,gBAAO,KAAP;AACA,iBAAQ,SAAR;AACA,wBAAe,EAAf;QANE,CAF4B;AAUhC,+BAAa,2BAAb,CAAyC;AACvC,kBAAS,GAAT;QADF,EAVgC;;;;;;;;;0CAkBb;AACnB,WAAI,QAAQ,gBAAM,KAAN,CAAY,sBAAZ,EAAR,CADe;AAEnB,cAAO,cAAI,kBAAJ,CAAuB,wBAAvB,EAAiD,KAAjD,CAAP,CAFmB;;;;;;;;;;;8CAUoB,0BAA0B;;;WAA/C,gBAA+C;WAA1C,wBAA0C;WAAjC,gBAAiC;;AACjE,WAAI,QAAQ,gBAAM,KAAN,CAAY,sBAAZ,EAAR,CAD6D;AAEjE,cAAO,cAAI,qBAAJ,CAA0B,GAA1B,EAA+B,wBAA/B,EAAyD,KAAzD,EAAgE,wBAAhE,EAA0F,IAA1F,CAA+F,UAAC,WAAD,EAAiB;AACrH,iBAAK,IAAL,CAAU,aAAV,GAA0B;AACxB,mBADwB;AAExB,uBAAY,IAAZ;AACA,sBAAW,KAAX;AACA,mBAAQ,WAAR;UAJF,CADqH;AAOrH,gBAAO,WAAP,CAPqH;QAAjB,CAAtG,CAFiE;;;;;;;;;;2CAiB7C,MAAM;AAC1B,WAAI,MAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,OAAL,CAAa,IAAb,CAAzB;WACA,SAAS,EAAE,GAAF,CAAM,KAAK,OAAL,EAAc,kBAApB,EAAwC,EAAxC,CAAT,CAFsB;;AAI1B,YAAK,aAAL,GAJ0B;AAK1B,oBAAa,KAAK,IAAL,CAAU,gBAAV,CAAb,CAL0B;AAM1B,YAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CAN0B;AAO1B,WAAI,QAAQ,6BAAiB,GAAjB,CAAqB,KAArB,CAAR,IAAuC,MAAvC,EAA+C;AACjD,cAAK,kBAAL,CAAwB,KAAK,MAAL,EAAa,MAArC,EADiD;AAEjD,wCAAmB,SAAnB,GAFiD;QAAnD;AAIA,WAAI,WAAW,WAAX,EAAwB;AAC1B,aAAI;AACF,eAAM,cAAc,EAAE,GAAF,CAAM,KAAK,IAAL,EAAW,sBAAjB,CAAd,CADJ;AAEF,uBAAY,KAAZ,CAAkB,IAAlB,CAAuB,WAAvB,EAFE;UAAJ,CAGE,OAAO,GAAP,EAAY;AACZ,4BAAO,KAAP,CAAa,QAAb,EAAuB,sEAAvB,EADY;UAAZ;QAJJ;;;;;;;;;;yCAckB,MAAM;;;AACxB,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,cAAc,QAAK,IAAL,CAAU,aAAV,CAAwB,GAAxB,KAAgC,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,MAAL,CAAY,GAAZ,CAAnD,EAAqE;AACrF,kBADqF;UAAvF;AAGA,iBAAK,aAAL,GAJ+C;AAK/C,iBAAK,YAAL,CAAkB,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,OAAL,CAAa,IAAb,CAArC,EAL+C;AAM/C,wCAAmB,SAAnB,GAN+C;QAAd,CAAnC,CADwB;;;;;;;;;qDAcM;AAC9B,oBAAa,KAAK,IAAL,CAAU,gBAAV,CAAb,CAD8B;AAE9B,YAAK,aAAL,GAF8B;;;;;;;;;2CAQV;;;AACpB,SAAE,OAAF,CAAU;gBAAM,QAAK,IAAL,CAAU,aAAV,CAAwB,MAAxB,CAA+B,KAA/B;QAAN,CAAV,CADoB;AAEpB,YAAK,IAAL,CAAU,aAAV,GAA0B,EAA1B,CAFoB;;;;;;;;;iDAQM;;;AAC1B,cAAO,KAAK,yBAAL,GAAiC,IAAjC,CAAsC,YAAM;AACjD,iBAAK,mBAAL,GADiD;QAAN,CAA7C,CAD0B;;;;;;;;;;;+BAWlB,KAAK;AACb,cAAO,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,MAAV,EAAkB,EAAC,KAAK,GAAL,EAA1B,CAAP,CADa;;;;;;;;;;;;2CAUO,QAAQ;AAC5B,0BAAS,oBAAT,CAA8B;AAC5B,aAAI,OAAO,GAAP;AACJ,eAAM,6BAAQ,0BAAR,CAAmC,OAAO,IAAP,CAAzC;QAFF,EAD4B;;AAM5B,WAAM,gBAAgB,4BAAiB,wBAAjB,MAA+C,4BAAiB,gBAAjB,EAA/C,CANM;AAO5B,WAAM,QAAQ,6BAAiB,GAAjB,CAAqB,MAArB,MAAiC,mBAAS,GAAT,CAPnB;AAQ5B,WAAM,eAAe,iBAAiB,KAAjB,IAA0B,CAAC,KAAD,CARnB;;AAU5B,WAAI,YAAJ,EAAkB;AAChB,+BAAW,gBAAX,CAA4B;AAC1B,qBAAU,8BAAY,GAAZ,CAAgB,UAAhB,CAAV;AACA,uBAAY,8BAAY,GAAZ,CAAgB,YAAhB,CAAZ;AACA,gBAAK,OAAO,GAAP;AACL,kBAAO,OAAO,IAAP;AACP,iBAAM,6BAAQ,0BAAR,CAAmC,OAAO,IAAP,CAAzC;AACA,iBAAM,KAAK,IAAL,CAAU,cAAV,GAA2B,qBAAU,iBAAV;AACjC,iBAAM,eAAN;UAPF,EADgB;QAAlB;AAWA,0BAAS,SAAT,CAAmB,eAAnB,EAAoC,IAApC,EArB4B;;;;;;;;;6CA2BN;;;AACtB,WAAI,KAAK,IAAL,CAAU,aAAV,CAAwB,oCAAxB,EAA8D;AAChE,4BAAS,SAAT,CAAmB,eAAnB,EAAoC,IAApC,EADgE;QAAlE;AAGA,oBAAa,KAAK,IAAL,CAAU,gBAAV,CAAb,CAJsB;AAKtB,YAAK,IAAL,CAAU,gBAAV,GAA6B,WAAW,YAAM;AAC5C,iBAAK,oBAAL,GAD4C;QAAN,EAErC,qBAAU,yBAAV,CAFH,CALsB;;;;4CAUD;AACrB,YAAK,aAAL,GADqB;AAErB,YAAK,IAAL,CAAU,aAAV,CAAwB,SAAxB,GAAoC,KAApC,CAFqB;AAGrB,YAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CAHqB;;;;;;;;;2CASD,MAAM;;;AAC1B,+BAAa,sBAAb,CAAoC;AAClC,kBAAS,sBAAT;AACA,kBAAS,oCAAT;AACA,kBAAS,EAAE,IAAF,CAAO,YAAM;AACpB,kBAAO,QAAK,iBAAL,CAAuB,IAAvB,CAAP,CADoB;UAAN,EAEb,IAFM,CAAT;QAHF,EAD0B;;;;;;;;;;uCAcV;;;AAChB,cAAO,cAAI,qBAAJ,GAA4B,IAA5B,CAAiC,0BAAkB;AACxD,gBAAO,kBAAkB,CAAC,CAAC,QAAK,IAAL,CAAU,aAAV,CAAwB,GAAxB,CAD6B;QAAlB,CAAxC,CADgB;;;;;;;;;qCASF;AACd,0BAAS,UAAT,GADc;;;;;;;;;;8CAQS,YAAY;AACnC,0BAAS,sBAAT,CAAgC,UAAhC,EADmC;;;;;;;;;mDAOP;;;AAC5B,WAAI,OAAO,KAAK,GAAL,EAAP,CADwB;AAE5B,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,UAAJ,EAAgB;AACd,mBAAK,IAAL,CAAU,aAAV,CAAwB,SAAxB,GAAoC,IAApC,CADc;AAEd,mBAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CAFc;AAGd,mCAAa,kBAAb,CAAgC;AAC9B,kBAAK,QAAK,IAAL,CAAU,aAAV,CAAwB,GAAxB;AACL,oBAAO,QAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB;AACP,uBAH8B;YAAhC,EAHc;AAQd,0CAAmB,MAAnB,GARc;UAAhB;QADiC,CAAnC,CAF4B;;;;;;;;;iDAmBF;;;AAC1B,YAAK,aAAL,GAD0B;AAE1B,cAAO,KAAK,eAAL,GAAuB,IAAvB,CAA4B,sBAAc;AAC/C,aAAI,eAAe,QAAK,IAAL,CAAU,aAAV,CAAwB,SAAxB,IAAqC,QAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,CADT;AAE/C,aAAI,cAAc,YAAd,EAA4B;AAC9B,mBAAK,IAAL,CAAU,aAAV,CAAwB,SAAxB,GAAoC,KAApC,CAD8B;AAE9B,mBAAK,IAAL,CAAU,aAAV,CAAwB,UAAxB,GAAqC,KAArC,CAF8B;AAG9B,eAAI,MAAM,QAAK,IAAL,CAAU,aAAV,CAAwB,GAAxB,CAHoB;AAI9B,eAAI,UAAU,QAAK,IAAL,CAAU,aAAV,CAAwB,OAAxB,CAJgB;AAK9B,mCAAa,iBAAb,CAA+B,EAAE,QAAF,EAAO,gBAAP,EAA/B,EAL8B;AAM9B,0CAAmB,SAAnB,GAN8B;UAAhC;QAFiC,CAAnC,CAF0B;;;UAvqBxB;;;mBAwrBS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1sBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAM,mBAAmB;AACvB,SAAM,mBAAS,GAAT;AACN,WAAQ,6BAAiB,WAAjB;EAFJ;;KAKA;;;AAEJ,YAFI,gBAEJ,GAAc;yCAFV,kBAEU;;8FAFV,8BAEU;;AAGZ,WAAK,KAAL,GAAa;AACX,wBAAiB;AACf,eAAM,mBAAS,SAAT;AACN,iBAAQ,EAAR;QAFF;MADF,CAHY;;IAAd;;;;;;;8BAFI;;gCAgBO;AACT,2CADS;;;;mCAIG;AACZ,cAAO;AACL,gBAAO,EAAP;AACA,oBAAW,IAAX;AACA,mBAAU,KAAV;AACA,mBAAU,KAAV;AACA,cAAK,EAAL;AACA,kBAAS,EAAT;AACA,sBAAa,EAAb;AACA,sBAAa,EAAb;AACA,gBAAO,EAAP;AACA,2BAAkB,IAAlB;AACA,aAAI,IAAJ;AACA,oBAAW,EAAX;AACA,eAAM,mBAAS,SAAT;AACN,iBAAQ,EAAR;AAdK,QAAP,CADY;;;;yCAmBM;;;AAClB,gCAAc,QAAd,CAAuB;AACrB,iCAAwB,6BAAC,IAAD,EAAU;AAChC,kBAAK,aAAL,CAAmB,IAAnB,EADgC;UAAV;AAGxB,2BAAkB,uBAAC,MAAD,EAAY;AAC5B,eAAI,OAAO,OAAO,OAAK,IAAL,CAAU,GAAV,CAAd,CADwB;AAE5B,eAAI,QAAQ,KAAK,QAAL,EAAe;AACzB,oBAAK,aAAL,CAAmB;AACjB,qBAAM,KAAK,QAAL,CAAc,IAAd;AACN,uBAAQ,KAAK,QAAL,CAAc,MAAd;cAFV,EADyB;YAA3B;UAFgB;AASlB,oCAA2B,8BAAC,QAAD,EAAc;AACvC,kBAAK,mBAAL,CAAyB,QAAzB,EADuC;AAEvC,kBAAK,eAAL,CAAqB,QAArB,EAFuC;UAAd;AAI3B,kCAAyB,8BAAM;AAC7B,eAAI,CAAC,OAAK,cAAL,EAAD,EAAwB;AAC1B,oBAAK,QAAL,GAD0B;YAA5B;UADuB;AAKzB,oCAA2B,gCAAM;AAC/B,eAAI,CAAC,OAAK,cAAL,EAAD,EAAwB;AAC1B,oBAAK,UAAL,GAD0B;YAA5B;UADyB;AAK3B,yBAAgB,sBAAM;AACpB,kBAAK,UAAL,GADoB;UAAN;AAGhB,4BAAmB,yBAAM;AACvB,kBAAK,aAAL,GADuB;UAAN;AAGnB,gCAAuB,8BAAM;;AAE3B,eAAI,OAAK,IAAL,CAAU,IAAV,KAAmB,mBAAS,IAAT,EAAe;AACpC,oBAAK,UAAL,GADoC;YAAtC;UAFqB;QAjCzB,EADkB;;;;gCA2CT;AACT,YAAK,eAAL,CAAqB,EAAE,MAAM,mBAAS,IAAT,EAA7B,EADS;;;;kCAIE;AACX,YAAK,eAAL,CAAqB,KAAK,KAAL,CAAW,eAAX,CAArB,CADW;;;;sCAII;AACf,cAAO,KAAK,IAAL,CAAU,MAAV,KAAqB,iBAAiB,MAAjB,IAA2B,KAAK,IAAL,CAAU,IAAV,KAAmB,iBAAiB,IAAjB,CAD3D;;;;kCAIJ;AACX,YAAK,eAAL,CAAqB,gBAArB,EADW;;;;qCAIG;AACd,YAAK,eAAL,CAAqB,KAAK,KAAL,CAAW,eAAX,CAArB,CADc;;;;yCAII,UAAU;;;AAG5B,WAAI,SAAS,IAAT,KAAkB,mBAAS,IAAT,EAAe;AACnC,cAAK,KAAL,CAAW,eAAX,8BAAkC,SAAlC,CADmC;QAArC;;;;4CAKqB;AACrB,YAAK,KAAL,CAAW,eAAX,GAA6B;AAC3B,eAAM,mBAAS,SAAT;AACN,iBAAQ,EAAR;QAFF,CADqB;;;;uCAOoD;wEAAJ,kBAAI;;4BAAzD,KAAyD;WAAzD,iCAAO,KAAK,IAAL,CAAU,IAAV,aAAkD;8BAAlC,OAAkC;WAAlC,qCAAS,KAAK,IAAL,CAAU,MAAV,eAAyB;;AACzE,WAAI,WAAW,EAAE,UAAF,EAAQ,cAAR,EAAX;WACA,UAAU,EAAE,MAAM,KAAK,IAAL,CAAU,IAAV,EAAgB,QAAQ,KAAK,IAAL,CAAU,MAAV,EAA1C,CAFqE;;AAIzE,WAAI,CAAC,EAAE,OAAF,CAAU,QAAV,EAAoB,OAApB,CAAD,EAA+B;AACjC,kBAAS,MAAT,GAAkB,SAAS,MAAT,CAAgB,IAAhB,EAAlB,CADiC;;AAGjC,aAAI,SAAS,MAAT,CAAgB,MAAhB,GAAyB,qBAAU,wBAAV,EAAoC;AAC/D,oBAAS,MAAT,GAAkB,SAAS,MAAT,CAAgB,SAAhB,CAA0B,CAA1B,EAA6B,qBAAU,wBAAV,CAA/C,CAD+D;UAAjE;;AAIA,cAAK,GAAL,CAAS,QAAT,EAPiC;AAQjC,kCAAc,QAAd,CAAuB,iBAAvB,EAA0C,QAA1C,EARiC;QAAnC;;;;;;;;;6BAeM;AACN,YAAK,oBAAL,GADM;AAEN,wDA1IE,sDA0IF,CAFM;;;UAxIJ;;;mBA+IS,IAAI,gBAAJ;;;;;;;;;;;;;;;;;;;;;;;;;AC3Jf;;;;;;;;;;;;;;;;;;;;;;;;;AAqBA,UAAS,oBAAT,CAA+B,KAA/B,EAAsC;AACpC,UAAO,EAAE,SAAF,CAAY,KAAZ,EAAmB,UAAC,MAAD,EAAS,GAAT,EAAc,GAAd,EAAsB;AAC9C,aAAQ,GAAR;;AAEE,YAAK,OAAL,CAFF;AAGE,YAAK,WAAL,CAHF;AAIE,YAAK,SAAL,CAJF;AAKE,YAAK,aAAL,CALF;AAME,YAAK,aAAL,CANF;AAOE,YAAK,OAAL,CAPF;AAQE,YAAK,MAAL,CARF;AASE,YAAK,QAAL,CATF;AAUE,YAAK,qBAAL;AACE,gBAAO,GAAP,IAAc,GAAd,CADF;AAEE,eAFF;;AAVF,YAcO,WAAL,CAdF;AAeE,YAAK,MAAL;AACE,gBAAO,SAAP,GAAmB,GAAnB,CADF;AAEE,eAFF;;AAfF,YAmBO,KAAL,CAnBF;AAoBE,YAAK,UAAL;AACE,gBAAO,GAAP,GAAa,GAAb,CADF;AAEE,eAFF;;AApBF,YAwBO,kBAAL;AACE,gBAAO,GAAP,IAAc,CAAC,EAAE,KAAF,CAAQ,GAAR,CAAD,GAAgB,SAAS,GAAT,EAAc,EAAd,CAAhB,GAAoC,IAApC,CADhB;AAEE,eAFF;;AAxBF,YA4BO,SAAL,CA5BF;AA6BE,YAAK,IAAL;AACE,gBAAO,EAAP,GAAY,CAAC,EAAE,KAAF,CAAQ,GAAR,CAAD,GAAgB,SAAS,GAAT,EAAc,EAAd,CAAhB,GAAoC,IAApC,CADd;AAEE,eAFF;;AA7BF,YAiCO,UAAL,CAjCF;AAkCE,YAAK,UAAL;AACE,gBAAO,GAAP,IAAc,gBAAM,aAAN,CAAoB,GAApB,EAAyB,KAAzB,CAAd,CADF;AAEE,eAFF;;AAlCF,YAsCO,UAAL;AACE,gBAAO,IAAP,GAAc,IAAI,IAAJ,CADhB;AAEE,gBAAO,MAAP,GAAgB,IAAI,MAAJ,CAFlB;AAGE,eAHF;AAtCF,MAD8C;IAAtB,CAA1B,CADoC;EAAtC;;KAiDqB,mBACnB,SADmB,gBACnB,GAAyC;OAA7B,8DAAQ,sBAAc,IAAd,iBAAqB;uCADtB,kBACsB;;AACvC,yBAAc,IAAd,EAAoB,qBAAqB,KAArB,CAApB,EADuC;EAAzC;;mBADmB;;;;;;;;;;;;;;;;;ACrErB;;;;;;KAEM;AAEJ,YAFI,QAEJ,CAAY,IAAZ,EAAkB;yCAFd,UAEc;;AAChB,SAAI,IAAJ,EAAU;AACR,YAAK,UAAL,CAAgB,IAAhB,EADQ;MAAV;AAGA,UAAK,OAAL,GAAe,oBAAQ,GAAR,CAAf,CAJgB;AAKhB,UAAK,aAAL,GAAqB,oBAAQ,CAAR,CAArB,CALgB;AAMhB,UAAK,mBAAL,GAA2B,oBAAQ,GAAR,CAA3B,CANgB;AAOhB,UAAK,gBAAL,GAAwB,oBAAQ,GAAR,CAAxB,CAPgB;AAQhB,UAAK,SAAL,GAAiB,oBAAQ,GAAR,CAAjB,CARgB;AAShB,UAAK,KAAL,GAAa,oBAAQ,EAAR,CAAb,CATgB;AAUhB,UAAK,SAAL,GAAiB,oBAAQ,GAAR,CAAjB,CAVgB;AAWhB,UAAK,QAAL,GAAgB,oBAAQ,GAAR,CAAhB,CAXgB;AAYhB,UAAK,GAAL,GAAW,WAAX,CAZgB;AAahB,UAAK,GAAL,GAAW,oBAAQ,GAAR,CAAX,CAbgB;AAchB,UAAK,UAAL,GAAkB,KAAK,IAAL,CAAU,OAAO,gBAAP,CAA5B,CAdgB;AAehB,UAAK,0BAAL,GAAkC,UAAU,GAAV,EAAe;AAC/C,WAAI,OAAJ,GAAc,IAAd,CAD+C;AAE/C,WAAI,GAAJ,GAAU,qBAAW,iBAAX,CAA6B,IAAI,GAAJ,CAAvC,CAF+C;MAAf,CAflB;;AAoBhB,SAAI,gBAAQ,YAAR,EAAsB;AACxB,YAAK,GAAL,GAAW,oBAAQ,GAAR,CAAX,CADwB;MAA1B;IApBF;;8BAFI;;gCA2BO,MAAM;;;AACf,SAAE,MAAF,CAAS,IAAT,EAAe,UAAC,KAAD,EAAQ,GAAR,EAAgB;AAC7B,eAAK,GAAL,IAAY,KAAZ,CAD6B;QAAhB,CAAf,CADe;;;UA3Bb;;;;AAmCN,QAAO,OAAP,GAAiB,QAAjB,C;;;;;;;;ACtCA,QAAO,OAAP,GAAiB;AACf,iBAAc,oBAAQ,GAAR,CAAd;AACA,wBAAqB,oBAAQ,GAAR,CAArB;AACA,uBAAoB,oBAAQ,GAAR,CAApB;AACA,wBAAqB,oBAAQ,GAAR,CAArB;AACA,wBAAqB,oBAAQ,GAAR,CAArB;AACA,uBAAoB,oBAAQ,GAAR,CAApB;AACA,oBAAiB,oBAAQ,GAAR,CAAjB;AACA,kBAAe,oBAAQ,GAAR,CAAf;AACA,kBAAe,oBAAQ,GAAR,CAAf;AACA,0BAAuB,oBAAQ,GAAR,CAAvB;AACA,mBAAgB,oBAAQ,GAAR,CAAhB;AACA,wBAAqB,oBAAQ,GAAR,CAArB;AACA,0BAAuB,oBAAQ,GAAR,CAAvB;AACA,qBAAkB,oBAAQ,GAAR,CAAlB;AACA,oBAAiB,oBAAQ,GAAR,CAAjB;AACA,qBAAkB,oBAAQ,GAAR,CAAlB;EAhBF,C;;;;;;;;;;;;ACIA,KAAI,gBAAgB,oBAAQ,CAAR,CAAhB;AACJ,KAAI,sBAAsB,oBAAQ,GAAR,CAAtB;AACJ,KAAI,mBAAmB,oBAAQ,GAAR,CAAnB;;AAEJ,KAAI,eAAe;;;;;AAKjB,gBAAa,qBAAS,IAAT,EAAe;AAC1B,mBAAc,QAAd,CAAuB,cAAvB,EAAuC,IAAvC,EAD0B;AAE1B,yBAAoB,QAApB,CAA6B,wBAA7B,EAAuD,IAAvD,EAF0B;IAAf;;AAKb,aAAU,kBAAS,IAAT,EAAe;AACvB,mBAAc,QAAd,CAAuB,WAAvB,EAAoC,EAAC,KAAK,KAAK,GAAL,EAA1C,EADuB;AAEvB,UAAK,MAAL,GAAc,OAAd,CAFuB;AAGvB,yBAAoB,QAApB,CAA6B,qBAA7B,EAAoD,IAApD,EAHuB;IAAf;;AAMV,gBAAa,uBAAW;AACtB,mBAAc,QAAd,CAAuB,uBAAvB,EAAgD,EAAC,MAAM,EAAN,EAAjD,EADsB;AAEtB,mBAAc,QAAd,CAAuB,cAAvB,EAAuC;AACrC,cAAO,EAAP;AACA,cAAO,KAAP;MAFF,EAFsB;IAAX;;AAQb,yBAAsB,gCAAW;;AAE/B,yBAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,8CAAN;MADF,EAF+B;AAK/B,sBAAiB,sBAAjB,CAAwC,OAAxC,EAL+B;AAM/B,mBAAc,QAAd,CAAuB,mBAAvB,EAA4C;AAC1C,oBAAa,oBAAb;AACA,oBAAa,KAAb;MAFF,EAN+B;IAAX;;AAYtB,iBAAc,wBAAW;AACvB,yBAAoB,QAApB,CAA6B,uBAA7B,EAAsD,EAAC,IAAI,OAAJ,EAAvD,EADuB;IAAX;;AAId,iBAAc,sBAAS,IAAT,EAAe;AAC3B,mBAAc,QAAd,CAAuB,uBAAvB,EAAgD,EAAC,MAAM,IAAN,EAAjD,EAD2B;IAAf;;AAId,sBAAmB,6BAAW;AAC5B,mBAAc,QAAd,CAAuB,2BAAvB,EAD4B;IAAX;;AAInB,gBAAa,qBAAS,IAAT,EAAe;AAC1B,mBAAc,QAAd,CAAuB,kBAAvB,EAA2C;AACzC,cAAO,KAAK,KAAL;MADT,EAD0B;IAAf;;AAMb,qBAAkB,4BAAW;AAC3B,mBAAc,QAAd,CAAuB,wBAAvB,EAD2B;IAAX;;AAIlB,qBAAkB,4BAAW;AAC3B,mBAAc,QAAd,CAAuB,wBAAvB,EAD2B;IAAX;EA1DhB;;AA+DJ,QAAO,OAAP,GAAiB,YAAjB,C;;;;;;;;;;;;ACnEA,KAAI,gBAAgB,oBAAQ,CAAR,CAAhB;;AAEJ,KAAI,qBAAqB;;AAEvB,kBAAe,yBAAW;AACxB,mBAAc,QAAd,CAAuB,gBAAvB,EADwB;IAAX;;EAFb;;AAQJ,QAAO,OAAP,GAAiB,kBAAjB,C;;;;;;;;;;;;ACVA,KAAI,gBAAgB,oBAAQ,CAAR,CAAhB;AACJ,KAAI,sBAAsB,oBAAQ,GAAR,CAAtB;;AAGJ,KAAI,iBAAiB;;AAEnB,gBAAa,qBAAS,IAAT,EAAe;AAC1B,mBAAc,QAAd,CAAuB,cAAvB,EAAuC,IAAvC,EAD0B;IAAf;;AAIb,iBAAc,sBAAS,IAAT,EAAe;AAC3B,mBAAc,QAAd,CAAuB,eAAvB,EAAwC,IAAxC,EAD2B;AAE3B,yBAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,iDAAN;AACA,mBAAY;AACV,yBAAgB,KAAK,QAAL;QADlB;MAFF,EAF2B;IAAf;;AAUd,wBAAqB,+BAAW;AAC9B,yBAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,6CAAN;MADF,EAD8B;IAAX;;AAMrB,0BAAuB,iCAAW;AAChC,yBAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,+CAAN;MADF,EADgC;IAAX;;EAtBrB;;AA8BJ,QAAO,OAAP,GAAiB,cAAjB,C;;;;;;;;ACtCA,KAAI,WAAW,oBAAQ,GAAR,EAAoB,oBAAQ,GAAR,CAApB,CAAX;AACJ,KAAI,6BAA6B,oBAAQ,GAAR,CAA7B;;AAEJ,KAAI,UAAU,SAAS,MAAT;AACd,KAAI,SAAS,SAAS,KAAT;AACb,KAAI,MAAM,SAAS,EAAT;;AAEV,UAAS,iBAAT,CAA2B,IAA3B,EAAiC;AAC/B,OAAI,OAAO,KAAK,IAAL,IAAa,KAAb,CADoB;AAE/B,UAAO,2BAA2B,IAA3B,EAAiC,KAAK,KAAL,EAAY,KAAK,SAAL,CAApD,CAF+B;EAAjC;;AAKA,UAAS,EAAT,GAAc,UAAU,aAAV,EAAyB,QAAzB,EAAmC,wBAAnC,EAA6D;AACzE,OAAI,EAAE,aAAF,CAAgB,OAAhB,CAAJ,EAA8B;AAC5B,WAAM,SAAN,CAAgB,MAAhB,CAAuB,IAAvB,CAA4B,SAA5B,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,kBAAkB,OAAlB,CAA7C,EAD4B;IAA9B;AAGA,UAAO,IAAI,KAAJ,CAAU,QAAV,EAAoB,SAApB,CAAP,CAJyE;EAA7D;;AAOd,UAAS,MAAT,GAAkB,UAAU,aAAV,EAAyB,QAAzB,EAAmC,wBAAnC,EAA6D;AAC7E,OAAI,EAAE,aAAF,CAAgB,OAAhB,CAAJ,EAA8B;AAC5B,WAAM,SAAN,CAAgB,MAAhB,CAAuB,IAAvB,CAA4B,SAA5B,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,kBAAkB,OAAlB,CAA7C,EAD4B;IAA9B;AAGA,UAAO,QAAQ,KAAR,CAAc,QAAd,EAAwB,SAAxB,CAAP,CAJ6E;EAA7D;;AAOlB,UAAS,KAAT,GAAiB,UAAU,aAAV,EAAyB,QAAzB,EAAmC,wBAAnC,EAA6D;AAC5E,OAAI,EAAE,aAAF,CAAgB,OAAhB,CAAJ,EAA8B;AAC5B,WAAM,SAAN,CAAgB,MAAhB,CAAuB,IAAvB,CAA4B,SAA5B,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,kBAAkB,OAAlB,CAA7C,EAD4B;IAA9B;AAGA,UAAO,OAAO,KAAP,CAAa,QAAb,EAAuB,SAAvB,CAAP,CAJ4E;EAA7D;;AAOjB,QAAO,OAAP,GAAiB,QAAjB,C;;;;;;;;ACjCA,KAAI,WAAW,oBAAQ,GAAR,CAAX;AACJ,KAAI,iBAAiB,oBAAQ,GAAR,CAAjB;AACJ,KAAI,IAAI,oBAAQ,GAAR,CAAJ;;AAEJ,QAAO,OAAP,GAAiB,UAAU,KAAV,EAAiB;AAChC,YAAS,MAAT,CAAgB,UAAhB,EAA4B,GAA5B,EAAiC,YAAjC,EAA+C,IAA/C,EAAqD;AACnD,SAAI,SAAS,WAAW,MAAX,KAAsB,MAAI,CAAJ,CADgB;AAEnD,SAAI,UAAU,IAAI,cAAJ,CAAmB,WAAW,GAAX,CAAnB,CAAV,CAF+C;AAGnD,SAAI,gBAAgB,EAAhB,CAH+C;AAInD,OAAE,OAAF,CAAU,YAAV,EAAwB,OAAxB,CAAgC,UAAC,KAAD,EAAW;AACzC,WAAI,EAAE,OAAF,CAAU,KAAV,CAAJ,EAAsB;AACpB,gBAAO,UAAP,EAAmB,GAAnB,EAAwB,KAAxB,EAA+B,IAA/B,EADoB;QAAtB,MAEO;AACL,aAAI,UAAU,QAAQ,IAAR,CAAa,KAAb,CAAV,CADC;AAEL,aAAI,cAAc,MAAM,KAAN,IAAe,MAAM,KAAN,CAAY,QAAZ,CAF5B;AAGL,aAAI,CAAC,OAAD,IAAY,WAAZ,IAA2B,QAAQ,cAAR,EAA3B,EAAqD;AACvD,iBAAM,KAAN,CAAY,QAAZ,GAAuB,EAAE,OAAF,CAAU,MAAM,KAAN,CAAY,QAAZ,CAAjC,CADuD;AAEvD,kBAAO,UAAP,EAAmB,GAAnB,EAAwB,MAAM,KAAN,CAAY,QAAZ,EAAsB,IAA9C,EAFuD;UAAzD,MAGO,IAAI,WAAW,CAAC,MAAD,IAAW,WAAtB,EAAmC;AAC5C,iBAAM,KAAN,CAAY,QAAZ,GAAuB,EAAE,OAAF,CAAU,MAAM,KAAN,CAAY,QAAZ,CAAjC,CAD4C;AAE5C,kBAAO,UAAP,EAAmB,MAAI,CAAJ,EAAO,MAAM,KAAN,CAAY,QAAZ,EAAsB,IAAhD,EAF4C;UAAvC,MAGA,IAAI,WAAW,MAAX,EAAmB;AAC5B,yBAAc,IAAd,CAAmB,KAAnB,EAD4B;UAAvB;QAXT;MAD8B,CAAhC,CAJmD;AAqBnD,mBAAc,OAAd,CAAsB,UAAC,UAAD,EAAgB;AACpC,WAAI,MAAM,aAAa,OAAb,CAAqB,UAArB,CAAN,CADgC;AAEpC,WAAI,cAAc,MAAM,aAAN,CAAoB,KAAK,UAAL,EAAiB,EAAC,WAAW,UAAX,EAAtC,CAAd,CAFgC;AAGpC,WAAI,KAAK,QAAL,KAAkB,CAAC,CAAD,EAAI;AACxB,sBAAa,MAAb,CAAoB,GAApB,EAAyB,CAAzB,EAA4B,WAA5B,EADwB;QAA1B,MAEO,IAAI,KAAK,QAAL,KAAkB,CAAlB,EAAqB;AAC9B,sBAAa,MAAb,CAAoB,MAAI,CAAJ,EAAO,CAA3B,EAA8B,WAA9B,EAD8B;QAAzB,MAEA,IAAI,KAAK,QAAL,KAAkB,CAAlB,EAAqB;AAC9B,sBAAa,MAAb,CAAoB,GAApB,EAAyB,CAAzB,EAA4B,WAA5B,EAD8B;QAAzB;MAPa,CAAtB,CArBmD;IAArD;;AAkCA,OAAI,OAAO,IAAI,QAAJ,EAAP,CAnC4B;AAoChC,OAAI,eAAe,MAAM,WAAN,CApCa;AAqChC,SAAM,WAAN,GAAoB,UAAS,oBAAT,EAA+B;AACjD,SAAI,UAAU,KAAK,MAAL,CADmC;AAEjD,SAAI,gBAAgB,KAAK,WAAL,CAF6B;AAGjD,UAAK,MAAL,GAAc,2BAA2B;AACvC,WAAI,oBAAoB,QAAQ,KAAR,CAAc,IAAd,EAAoB,SAApB,CAApB,CADmC;AAEvC,WAAI,KAAK,qBAAL,MAAgC,KAAK,aAAL,CAAmB,aAAnB,CAAhC,EAAmE;AACrE,aAAI,QAAQ,KAAK,SAAL,CAAe,aAAf,CAAR,CADiE;AAErE,eAAM,OAAN,CAAc,UAAC,IAAD,EAAU;AACtB,eAAI,cAAc,KAAK,QAAL,CAAc,WAAd,CADI;AAEtB,0BAAe,YAAY,OAAZ,CAAoB,UAAC,UAAD,EAAgB;AACjD,oBAAO,UAAP,EAAmB,CAAnB,EAAsB,CAAC,iBAAD,CAAtB,EAA2C,IAA3C,EADiD;YAAhB,CAAnC,CAFsB;UAAV,CAAd,CAFqE;QAAvE;AASA,cAAO,iBAAP,CAXuC;MAA3B,CAHmC;AAgBjD,YAAO,aAAa,KAAb,CAAmB,KAAnB,EAA0B,SAA1B,CAAP,CAhBiD;IAA/B,CArCY;;AAwDhC,UAAO,IAAP,CAxDgC;EAAjB,C;;;;;;;;ACJjB,KAAI,QAAQ,oBAAQ,GAAR,EAAqC,KAArC,CAA2C,KAA3C;AACZ,KAAI,IAAI,oBAAQ,GAAR,CAAJ;;AAEJ,UAAS,QAAT,GAAoB;AAClB,QAAK,aAAL,GAAqB,EAArB,CADkB;EAApB;;AAIA,KAAI,UAAU,SAAV,OAAU,CAAS,SAAT,EAAoB,OAApB,EAA6B;AACzC,OAAI,CAAC,SAAD,EAAY,MAAM,OAAN,CAAhB;EADY;;;;;;AAQd,UAAS,SAAT,CAAmB,qBAAnB,GAA2C,YAAY;AACrD,UAAO,KAAK,aAAL,CAAmB,MAAnB,KAA8B,CAA9B,CAD8C;EAAZ;;;;;;;AAS3C,UAAS,SAAT,CAAmB,aAAnB,GAAmC,UAAU,aAAV,EAAyB;AAC1D,UAAO,OAAO,KAAK,aAAL,CAAmB,aAAnB,CAAP,KAA6C,WAA7C,CADmD;EAAzB;;;;;;;;;AAWnC,UAAS,SAAT,CAAmB,MAAnB,GAA4B,UAAU,aAAV,EAAyB,QAAzB,EAAmC,UAAnC,EAA+C,IAA/C,EAAqD;AAC/E,QAAK,KAAL,CAAW,aAAX,EAA0B,QAA1B,EAAoC,UAApC,EAAgD,EAAE,MAAF,CAAS,EAAC,UAAU,CAAC,CAAD,EAApB,EAAyB,IAAzB,CAAhD,EAD+E;EAArD;;;;;;;;;AAW5B,UAAS,SAAT,CAAmB,KAAnB,GAA2B,UAAU,aAAV,EAAyB,QAAzB,EAAmC,UAAnC,EAA+C,IAA/C,EAAqD;AAC9E,QAAK,KAAL,CAAW,aAAX,EAA0B,QAA1B,EAAoC,UAApC,EAAgD,EAAE,MAAF,CAAS,EAAC,UAAU,CAAV,EAAV,EAAwB,IAAxB,CAAhD,EAD8E;EAArD;;;;;;;;;AAW3B,UAAS,SAAT,CAAmB,EAAnB,GAAwB,UAAU,aAAV,EAAyB,QAAzB,EAAmC,UAAnC,EAA+C,IAA/C,EAAqD;AAC3E,QAAK,KAAL,CAAW,aAAX,EAA0B,QAA1B,EAAoC,UAApC,EAAgD,EAAE,MAAF,CAAS,EAAC,UAAU,CAAV,EAAV,EAAwB,IAAxB,CAAhD,EAD2E;EAArD;;AAIxB,UAAS,SAAT,CAAmB,SAAnB,GAA+B,UAAU,aAAV,EAAyB;AACtD,UAAO,KAAK,aAAL,CAAmB,aAAnB,CAAP,CADsD;EAAzB;;AAI/B,UAAS,SAAT,CAAmB,KAAnB,GAA2B,UAAU,aAAV,EAAyB,QAAzB,EAAmC,UAAnC,EAA+C,IAA/C,EAAqD;AAC9E,WAAQ,aAAR,EAAuB,2CAAvB,EAD8E;AAE9E,WAAQ,QAAR,EAAkB,6BAAlB,EAF8E;AAG9E,WAAQ,UAAR,EAAoB,uCAApB,EAH8E;AAI9E,WAAQ,KAAK,QAAL,KAAkB,CAAC,CAAD,IAAM,KAAK,QAAL,KAAkB,CAAlB,IAAuB,KAAK,QAAL,KAAkB,CAAlB,EAAqB,iDAA5E,EAJ8E;;AAM9E,OAAI,yBAAyB,KAAK,aAAL,CAAmB,aAAnB,CAAzB,CAN0E;AAO9E,OAAI,QAAQ;AACV,eAAU,MAAM,QAAN,CAAV;AACA,eAAU,KAAK,QAAL;AACV,iBAAY,UAAZ;IAHE,CAP0E;;AAa9E,OAAI,sBAAJ,EAA4B;AAC1B,UAAK,aAAL,CAAmB,aAAnB,EAAkC,IAAlC,CAAuC,KAAvC,EAD0B;IAA5B,MAEO;AACL,UAAK,aAAL,CAAmB,aAAnB,IAAoC,CAAC,KAAD,CAApC,CADK;IAFP;EAbyB;;AAoB3B,UAAS,SAAT,CAAmB,MAAnB,GAA4B,YAAY;AACtC,QAAK,aAAL,GAAqB,EAArB,CADsC;EAAZ;;AAI5B,QAAO,OAAP,GAAiB,QAAjB,C;;;;;;;;;;;;;;;;ACjFA,EAAC,CAAC,YAAU;;AAEZ,MAAI,MAAJ;MACC,cADD;MAEC,eAFD;MAGC,QAHD;MAIC,QAAQ,EAAR;MACA,eAAe,EAAf;MACA,aAAa,KAAb,CARW;;AAUZ,MAAI,QAAQ,SAAR,KAAQ,CAAS,UAAT,EAAqB,UAArB,EAAgC;AAC3C,OAAI,cAAc,IAAd,EAAoB,OAAO,IAAP,CAAxB;AACA,OAAI,WAAW,KAAX,KAAqB,IAArB,EAA2B,OAAO,UAAP,CAA/B;AACA,gBAAa,CAAC,KAAK,UAAL,CAAD,CAAkB,OAAlB,CAA0B,YAA1B,EAAwC,EAAxC,CAAb,CAH2C;AAI3C,cAAW,CAAC,CAAC,UAAD,CAJ+B;AAK3C,OAAI,eAAe,WAAa,YAAb,GAA4B,KAA5B,CALwB;AAM3C,OAAI,aAAa,UAAb,CAAJ,EAA8B,OAAO,aAAa,UAAb,CAAP,CAA9B;AACA,YAAS;AACR,WAAO,IAAP;AACA,iBAAa,EAAb;AACA,SAAK,UAAL;AACA,aAAS,mBAAU;AAClB,YAAO,MAAM,KAAK,GAAL,EAAU,IAAhB,CAAP,CADkB;KAAV;IAJV,CAP2C;AAe3C,oBAAiB,CAAC,CAAD,CAf0B;AAgB3C,UAAO,eAAe,aAAa,WAAW,OAAX,CAAmB,MAAnB,EAA2B,MAA3B,CAAb,CAAf,IAAP;AACA,UAAO,MAAP,GAAgB,OAAO,WAAP,CAAmB,MAAnB,CAjB2B;AAkB3C,UAAO,aAAa,OAAO,GAAP,CAAb,GAA2B,WAAa,QAAQ,MAAR,CAAb,GAA+B,MAA/B,CAlBS;GAAhC,CAVA;;AA+BZ,MAAI,oBAAoB,SAApB,iBAAoB,CAAS,UAAT,EAAoB;AAC3C,OAAI,eAAe,GAAf,EAAoB,OAAO,GAAP,CAAxB,KACK,IAAI,eAAe,GAAf,EAAoB,OAAO,GAAP,CAAxB,KACA,IAAI,KAAO,IAAP,CAAY,UAAZ,CAAJ,EAA6B,OAAO,WAAW,OAAX,CAAmB,IAAnB,EAAyB,EAAzB,CAAP,CAA7B,KACA,OAAO,MAAM,UAAN,CADP;GAHkB,CA/BZ;;AAsCZ,MAAI,UAAU,SAAV,OAAU,CAAS,UAAT,EAAoB;AACjC,OAAI,cAAc,WAAW,WAAX,CADe;AAEjC,QAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,YAAY,MAAZ,EAAoB,GAAxC,EAA4C;AAC3C,QAAI,MAAM,YAAY,CAAZ,CAAN,CADuC;AAE3C,QAAI,OAAO,EAAC,OAAO,EAAP,EAAW,KAAK,GAAL,EAAU,YAAY,kBAAkB,IAAI,CAAJ,EAAO,UAAP,CAA9B,EAA7B,CAFuC;;AAI3C,SAAK,IAAI,IAAI,CAAJ,EAAO,IAAI,IAAI,MAAJ,EAAY,GAAhC,EAAoC;AACnC,SAAI,OAAO,IAAI,CAAJ,CAAP,CAD+B;AAEnC,SAAI,CAAC,KAAK,iBAAL,EAAwB,KAAK,iBAAL,GAAyB,GAAzB,CAA7B;AACA,UAAK,UAAL,GAAkB,KAAK,iBAAL,CAHiB;AAInC,YAAO,KAAK,iBAAL,CAJ4B;KAApC;;AAOA,QAAI,OAAJ,GAAc,IAAd,CAAmB,IAAnB,EAX2C;IAA5C;AAaA,UAAO,UAAP,CAfiC;GAApB,CAtCF;;AAwDZ,MAAI,eAAe,SAAf,YAAe,CAAS,MAAT,EAAgB;;AAClC,UAAO,OAAO,OAAP,CAAe,0BAAf,EAA2C,UAAS,KAAT,EAAe;AAChE,WAAO,OAAO,KAAP,CADyD;IAAf,CAAlD,CADkC;GAAhB,CAxDP;;AA8DZ,MAAI,SAAS,IAAI,MAAJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BZ,4QACC,OADD,CACS,cADT,EACyB,MAAM,aAAa,oBAAb,CAAN,GAA2C,GAA3C,CADzB,CAEC,OAFD,CAES,YAFT,EAEuB,4CAFvB,EAGC,OAHD,CAGS,aAHT,EAGwB,6CAHxB,CA7BY,CAAT,CA9DQ;;AAiGZ,WAAS,MAAT,CACC,QADD,EAGC,SAHD,EAIC,UAJD,EAKC,kBALD,EAOC,OAPD,EAQC,EARD,EASC,SATD,EAWC,YAXD,EAYC,iBAZD,EAaC,cAbD,EAcC,cAdD,EAgBC,YAhBD,EAiBC,WAjBD,EAkBC,WAlBD,EAmBC,sBAnBD,EAoBC,gBApBD,EAqBC;AACA,OAAI,aAAa,mBAAmB,CAAC,CAAD,EAAG;AACtC,WAAO,WAAP,CAAmB,EAAE,cAAF,CAAnB,GAAuC,EAAvC,CADsC;AAEtC,sBAAkB,CAAC,CAAD,CAFoB;AAGtC,QAAI,SAAJ,EAAe,OAAO,EAAP,CAAf;IAHD;;AAMA,OAAI,cAAc,kBAAd,IAAoC,oBAAoB,CAAC,CAAD,EAAG;AAC9D,iBAAa,cAAc,GAAd,CADiD;AAE9D,QAAI,mBAAmB,OAAO,WAAP,CAAmB,cAAnB,CAAnB,CAF0D;AAG9D,QAAI,YAAY,iBAAiB,eAAjB,CAAZ,EACH,iBAAiB,eAAjB,EAAkC,iBAAlC,GAAsD,kBAAkB,UAAlB,CAAtD,CADD;AAEA,qBAAiB,EAAE,eAAF,CAAjB,GAAsC,EAAC,YAAY,UAAZ,EAAwB,KAAK,GAAL,EAA/D,CAL8D;IAA/D;;AAQA,OAAI,gBAAgB,OAAO,WAAP,CAAmB,cAAnB,EAAmC,eAAnC,CAAhB,CAfJ;;AAiBA,OAAI,OAAJ,EAAY;AACX,kBAAc,GAAd,GAAoB,QAAQ,OAAR,CAAgB,UAAhB,EAA4B,EAA5B,CAApB,CADW;IAAZ,MAGO,IAAI,EAAJ,EAAO;AACb,kBAAc,EAAd,GAAmB,GAAG,OAAH,CAAW,UAAX,EAAuB,EAAvB,CAAnB,CADa;IAAP,MAGA,IAAI,SAAJ,EAAc;AACpB,gBAAY,UAAU,OAAV,CAAkB,UAAlB,EAA8B,EAA9B,CAAZ,CADoB;;AAGpB,QAAI,CAAC,cAAc,SAAd,EAAyB,cAAc,SAAd,GAA0B,EAA1B,CAA9B;AACA,QAAI,CAAC,cAAc,OAAd,EAAuB,cAAc,OAAd,GAAwB,EAAxB,CAA5B;AACA,kBAAc,SAAd,CAAwB,IAAxB,CAA6B,SAA7B,EALoB;AAMpB,kBAAc,OAAd,CAAsB,IAAtB,CAA2B;AAC1B,YAAO,SAAP;AACA,aAAQ,IAAI,MAAJ,CAAW,YAAY,aAAa,SAAb,CAAZ,GAAsC,SAAtC,CAAnB;KAFD,EANoB;IAAd,MAWA,IAAI,WAAJ,EAAgB;AACtB,uBAAmB,oBAAoB,sBAApB,CADG;AAEtB,uBAAmB,mBAAmB,iBAAiB,OAAjB,CAAyB,UAAzB,EAAqC,EAArC,CAAnB,GAA8D,IAA9D,CAFG;;AAItB,QAAI,CAAC,cAAc,OAAd,EAAuB,cAAc,OAAd,GAAwB,EAAxB,CAA5B;AACA,kBAAc,OAAd,CAAsB,IAAtB,CAA2B;AAC1B,UAAK,YAAY,OAAZ,CAAoB,UAApB,EAAgC,EAAhC,CAAL;AACA,YAAO,gBAAP;AACA,WAAM,aAAa,MAAb,IAAuB,CAAvB,GAA2B,OAA3B,GAAqC,SAArC;KAHP,EALsB;IAAhB,MAWA,IAAI,YAAJ,EAAiB;AACvB,mBAAe,aAAa,OAAb,CAAqB,UAArB,EAAiC,EAAjC,CAAf,CADuB;AAEvB,qBAAiB,CAAC,kBAAkB,EAAlB,CAAD,CAAuB,OAAvB,CAA+B,UAA/B,EAA2C,EAA3C,CAAjB,CAFuB;;AAIvB,QAAI,IAAJ,EAAU,MAAV,CAJuB;;AAMvB,YAAQ,iBAAR;AACC,UAAK,IAAL;AAAY,eAAS,IAAI,MAAJ,CAAkB,MAAK,aAAa,cAAb,CAAL,CAA3B,CAAZ;AADD,UAEM,IAAL;AAAY,eAAS,IAAI,MAAJ,CAAuB,aAAa,cAAb,IAA8B,GAA9B,CAAhC,CAAZ;AAFD,UAGM,IAAL;AAAY,eAAS,IAAI,MAAJ,CAAY,YAAW,aAAa,cAAb,CAAX,GAAyC,SAAzC,CAArB,CAAZ;AAHD,UAIM,IAAL;AAAY,eAAS,IAAI,MAAJ,CAAkB,MAAK,aAAa,cAAb,CAAL,GAAmC,OAAnC,CAA3B,CAAZ;AAJD,UAKO,GAAN;AAAY,aAAO,cAAS,KAAT,EAAe;AACjC,cAAO,kBAAkB,KAAlB,CAD0B;OAAf,CAAnB;AALD,UAQM,IAAL;AAAY,aAAO,cAAS,KAAT,EAAe;AACjC,cAAO,SAAS,MAAM,OAAN,CAAc,cAAd,IAAgC,CAAC,CAAD,CADf;OAAf,CAAnB;AARD,UAWM,IAAL;AAAY,aAAO,cAAS,KAAT,EAAe;AACjC,cAAO,kBAAkB,KAAlB,CAD0B;OAAf,CAAnB;AAXD;AAca,aAAO,cAAS,KAAT,EAAe;AACjC,cAAO,CAAC,CAAC,KAAD,CADyB;OAAf,CAAnB;AAdD,KANuB;;AAyBvB,QAAI,kBAAkB,EAAlB,IAAwB,WAAa,IAAb,CAAkB,iBAAlB,CAAxB,EAA8D,OAAO,gBAAU;AAClF,YAAO,KAAP,CADkF;KAAV,CAAzE;;AAIA,QAAI,CAAC,IAAD,EAAO,OAAO,cAAS,KAAT,EAAe;AAChC,YAAO,SAAS,OAAO,IAAP,CAAY,KAAZ,CAAT,CADyB;KAAf,CAAlB;;AAIA,QAAI,CAAC,cAAc,UAAd,EAA0B,cAAc,UAAd,GAA2B,EAA3B,CAA/B;AACA,kBAAc,UAAd,CAAyB,IAAzB,CAA8B;AAC7B,UAAK,YAAL;AACA,eAAU,iBAAV;AACA,YAAO,cAAP;AACA,WAAM,IAAN;KAJD,EAlCuB;IAAjB;;AA2CP,UAAO,EAAP,CAxFA;GArBD;;;;AAjGY,MAmNR,QAAS,KAAK,KAAL,IAAc,EAAd,CAnND;;AAqNZ,QAAM,KAAN,GAAc,UAAS,UAAT,EAAoB;AACjC,UAAO,MAAM,UAAN,CAAP,CADiC;GAApB,CArNF;;AAyNZ,QAAM,YAAN,GAAqB,YAArB,CAzNY;;AA2NZ,MAAI,CAAC,KAAK,KAAL,EAAY,KAAK,KAAL,GAAa,KAAb,CAAjB;EA3NE,CAAD,CA6NE,KA7NF,gBA6NsB,KAAC,GAAiC,OAAlC,2BA7NtB,E;;;;;;;;ACRD,KAAI,iBAAiB,OAAO,SAAP,CAAiB,cAAjB;AACrB,KAAI,WAAW,OAAO,SAAP,CAAiB,QAAjB;;AAEf,QAAO,OAAP,GAAiB;AACf,WAAQ,gBAAS,GAAT,EAAc,MAAd,EAAsB;AAC5B,SAAI,IAAJ,CAD4B;AAE5B,UAAK,IAAL,IAAa,MAAb,EAAqB;AACnB,WAAI,eAAe,IAAf,CAAoB,MAApB,EAA4B,IAA5B,CAAJ,EAAuC;AACrC,aAAI,IAAJ,IAAY,OAAO,IAAP,CAAZ,CADqC;QAAvC;MADF;AAKA,YAAO,GAAP,CAP4B;IAAtB;AASR,YAAS,iBAAS,GAAT,EAAc;AACrB,YAAO,SAAS,IAAT,CAAc,GAAd,MAAuB,gBAAvB,CADc;IAAd;AAGT,UAAO,eAAS,GAAT,EAAc,GAAd,EAAmB;AACxB,SAAI,SAAS,EAAT,CADoB;AAExB,SAAI,OAAJ,CAAY,UAAC,IAAD,EAAU;AACpB,cAAO,IAAP,CAAY,KAAK,GAAL,CAAZ,EADoB;MAAV,CAAZ,CAFwB;AAKxB,YAAO,MAAP,CALwB;IAAnB;AAOP,UAAO,eAAS,GAAT,EAAc,SAAd,EAAyB,GAAzB,EAA8B;AACnC,SAAI,WAAW,IAAX,CAD+B;AAEnC,SAAI,OAAJ,CAAY,UAAC,IAAD,EAAU;AACpB,kBAAW,YAAY,UAAU,IAAV,CAAe,GAAf,EAAoB,IAApB,CAAZ,CADS;MAAV,CAAZ,CAFmC;AAKnC,YAAO,QAAP,CALmC;IAA9B;AAOP,YAAS,iBAAU,GAAV,EAAe;AACtB,SAAI,UAAU,EAAV,CADkB;AAEtB,SAAI,OAAJ,CAAY,UAAC,IAAD,EAAU;AAClB,WAAI,IAAJ,EAAU,QAAQ,IAAR,CAAa,IAAb,EAAV;MADQ,CAAZ,CAFsB;AAKtB,YAAO,OAAP,CALsB;IAAf;AAOT,YAAS,iBAAS,GAAT,EAAc;AACrB,YAAO,KAAK,OAAL,CAAa,GAAb,IAAoB,GAApB,GAA0B,CAAC,GAAD,CAA1B,CADc;IAAd;EAlCX,C;;;;;;;;ACHA,KAAI,IAAI,oBAAQ,GAAR,CAAJ;;AAEJ,UAAS,cAAT,CAAwB,QAAxB,EAAkC;AAChC,QAAK,SAAL,GAAiB,QAAjB,CADgC;EAAlC;;AAIA,gBAAe,SAAf,CAAyB,IAAzB,GAAgC,UAAU,IAAV,EAAgB;AAC9C,OAAI,WAAW,IAAX,CAD0C;AAE9C,OAAI,YAAY,KAAK,SAAL,CAAe,GAAf,IAAsB,KAAK,SAAL,CAAe,GAAf,KAAuB,GAAvB,EAA4B;AAChE,gBAAW,IAAC,CAAK,IAAL,KAAc,KAAK,SAAL,CAAe,GAAf,IAAwB,KAAK,IAAL,IAAa,KAAK,IAAL,CAAU,WAAV,KAA0B,KAAK,SAAL,CAAe,GAAf,CADzB;IAAlE;;AAIA,OAAI,YAAY,KAAK,SAAL,CAAe,OAAf,EAAwB;AACtC,gBAAW,KAAK,KAAL,IAAc,KAAK,KAAL,CAAW,SAAX,IACtB,EAAE,KAAF,CACD,EAAE,KAAF,CAAQ,KAAK,SAAL,CAAe,OAAf,EAAwB,QAAhC,CADC,EAED,UAAC,MAAD,EAAY;AACV,cAAO,OAAO,IAAP,CAAY,KAAK,KAAL,CAAW,SAAX,CAAnB,CADU;MAAZ,CAHS,CAD2B;IAAxC;;AASA,OAAI,YAAY,KAAK,SAAL,CAAe,EAAf,EAAmB;AACjC,gBAAW,KAAK,KAAL,CAAW,EAAX,KAAkB,KAAK,SAAL,CAAe,EAAf,CADI;IAAnC;;AAIA,OAAI,YAAY,KAAK,SAAL,CAAe,OAAf,EAAwB;AACtC,WAAM,kDAAN,CADsC;IAAxC;;AAIA,OAAI,YAAY,KAAK,SAAL,CAAe,UAAf,EAA2B;AACzC,gBAAW,EAAE,KAAF,CAAQ,KAAK,SAAL,CAAe,UAAf,EAA2B,UAAC,SAAD,EAAe;AACzD,WAAI,QAAQ,KAAK,KAAL,CAAW,UAAU,GAAV,CAAnB,CADqD;AAEzD,cAAO,SAAS,UAAU,IAAV,CAAe,KAAf,CAAT,CAFkD;MAAf,CAA9C,CADyC;IAA3C;;AAOA,UAAO,QAAP,CA9B8C;EAAhB;;AAiChC,gBAAe,SAAf,CAAyB,cAAzB,GAA0C,YAAW;AACnD,UAAO,KAAK,SAAL,CAAe,UAAf,KAA8B,GAA9B,CAD4C;EAAX;;AAI1C,QAAO,OAAP,GAAiB,cAAjB,C;;;;;;AC3CA,wB;;;;;;;;ACAA,QAAO,OAAP,GAAiB,UAAU,IAAV,EAAgB,KAAhB,EAAuB,SAAvB,EAAkC;AACjD,OAAI,wBAAwB,CAC1B,oBAD0B,EAE1B,mBAF0B,EAG1B,2BAH0B,EAI1B,qBAJ0B,EAK1B,oBAL0B,EAM1B,sBAN0B,CAAxB,CAD6C;;AAUjD,OAAI,OAAO;AACT,kBAAa,qBAAb;;AAEA,aAAQ,kBAAY;AAClB,cAAO,MAAM,aAAN,CAAoB,IAApB,EAA0B,KAA1B,CAAP,CADkB;MAAZ;IAHN,CAV6C;;AAkBjD,OAAI,wBAAwB,SAAxB,qBAAwB,CAAU,IAAV,EAAgB;AAC1C,SAAI,mBAAmB,sBAAsB,GAAtB,CAA0B,UAAC,MAAD,EAAY;AAC3D,cAAO,2BAA2B;AAChC,aAAI,YAAY,UAAU,MAAV,CAAZ,CAD4B;AAEhC,aAAI,SAAJ,EAAe;AACb,qBAAU,KAAV,CAAgB,IAAhB,EAAsB,SAAtB,EADa;UAAf;QAFK,CADoD;MAAZ,CAA7C,CADsC;AAS1C,YAAO,EAAE,MAAF,CAAS,EAAE,SAAF,CAAY,qBAAZ,EAAmC,gBAAnC,CAAT,EAA+D,IAA/D,CAAP,CAT0C;IAAhB,CAlBqB;;AA8BjD,UAAO,MAAM,WAAN,CAAkB,sBAAsB,IAAtB,CAAlB,CAAP,CA9BiD;EAAlC,C;;;;;;;;;;;;ACAjB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,YAAb;;AAEA,WAAQ,uCAAR;;AAEA,6BAAU;AACR,YACE;;SAAK,IAAG,MAAH,EAAL;OACE,wCAAQ,UAAU,KAAK,KAAL,CAAW,QAAX,EAAlB,CADF;OAEE,kDAAgB,UAAU,KAAK,KAAL,CAAW,QAAX,EAA1B,CAFF;OAGE,2DAHF;OAIE,4DAJF;OAKE,oDALF;OAME,6CAAY,KAAI,YAAJ,EAAiB,OAAO,KAAK,KAAL,CAAW,KAAX,EAApC,CANF;OAOE,4CAPF;MADF,CADQ;IANqB;EAAlB;;;;;;;;;;;;;ACVf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,WAAb;;AAEA,oBAAiB,2BAAW;AAC1B,YAAO,KAAK,SAAL,EAAP,CAD0B;IAAX;;AAIjB,cAAW,qBAAW;AACpB,YAAO,2BAAe,MAAf,EAAP,CADoB;IAAX;;AAIX,sBAAmB,6BAAW;AAC5B,gCAAe,EAAf,CAAkB,QAAlB,EAA4B,KAAK,SAAL,CAA5B,CAD4B;IAAX;;AAInB,yBAAsB,gCAAW;AAC/B,gCAAe,GAAf,CAAmB,QAAnB,EAA6B,KAAK,SAAL,CAA7B,CAD+B;IAAX;;AAItB,iBAAc,wBAAW;AACvB,2BAAW,WAAX,GADuB;IAAX;;AAId,oBAAiB,yBAAS,GAAT,EAAc;AAC7B,iCAAiB,oBAAjB,GAD6B;AAE7B,8BAAc,uBAAd,GAF6B;AAG7B,SAAI,cAAJ,GAH6B;IAAd;;AAMjB,mBAAgB,0BAAW;AACzB,SAAI,KAAK,KAAL,CAAW,KAAX,EAAkB;AACpB,cAAO,6CAAY,aAAa,KAAK,KAAL,CAAW,WAAX;AACb,uBAAc,KAAK,KAAL,CAAW,YAAX;AACd,sBAAa,KAAK,KAAL,CAAW,WAAX;AACb,8BAAqB,KAAK,KAAL,CAAW,aAAX,CAAyB,mCAAzB;AACrB,yBAAgB,KAAK,KAAL,CAAW,aAAX,CAAyB,0BAAzB;AAChB,gCAAuB,KAAK,KAAL,CAAW,qBAAX;AACvB,mBAAU,KAAK,KAAL,CAAW,QAAX,EANtB,CAAP,CADoB;MAAtB;IADc;;AAYhB,sBAAmB,6BAAY;AAC7B,SAAI,KAAK,KAAL,CAAW,KAAX,EAAkB;AACpB,WAAI,iBAAiB,0BAAG;AACtB,uBAAc,IAAd;AACA,+BAAsB,IAAtB;AACA,sBAAa,gBAAM,aAAN,CAAoB,QAApB,CAA6B,KAAK,KAAL,CAAW,cAAX,CAA1C;QAHmB,CAAjB,CADgB;;AAOpB,cACE;;WAAI,WAAU,SAAV,EAAoB,2BAAxB;SACE;;;WACE;;eAAG,SAAS,KAAK,eAAL,EAAsB,IAAG,cAAH,EAAkB,KAAI,cAAJ,EAAmB,WAAW,cAAX,EAA2B,cAAY,6BAAiB,kBAAjB,EAAqC,6BAAnJ;aAAwK,6BAAiB,kBAAjB;YAD1K;UADF;QADF,CAPoB;MAAtB;IADiB;;AAkBnB,yBAAsB,gCAAY;AAChC,SAAI,CAAC,KAAK,KAAL,CAAW,aAAX,CAAyB,4BAAzB,EAAuD;AAC1D,WAAI,KAAK,KAAL,CAAW,KAAX,KAAqB,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,UAAX,CAAjD,EAAyE;AAC3E,gBACE;;aAAI,WAAU,SAAV,EAAoB,2BAAxB;WACE;;;aACE;;iBAAG,SAAS,KAAK,kBAAL;AACT,4BAAU,sEAAV;AACA,+BAAY,6BAAiB,0BAAjB;AACZ,8CAHH;eAGwB,6BAAiB,0BAAjB;cAJ1B;YADF;UADF,CAD2E;QAA7E;MADF;IADoB;;AAiBtB,gBAAa,uBAAW;AACtB,YACE;;SAAG,IAAG,UAAH,EAAc,KAAI,UAAJ,EAAe,mBAAiB,KAAK,KAAL,CAAW,UAAX,UAAjB,EAA+C,SAAS,KAAK,YAAL,EAAmB,QAAO,QAAP,EAA3G;OACE;;WAAM,WAAU,wBAAV,EAAN;SAA0C,yBAAc,OAAd;QAD5C;MADF,CADsB;IAAX;;AAQb,uBAAoB,8BAAW;AAC7B,8BAAc,yBAAd,CAAwC,EAAC,MAAM,yBAAc,GAAd,EAA/C,EAD6B;AAE7B,iCAAiB,sBAAjB,CAAwC,gBAAxC,EAF6B;IAAX;;AAKpB,cAAW,qBAAW;AACpB,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADoB;IAAX;;AAIX,WAAQ,kBAAY;AAClB,SAAI,cAAc,CAAC,gBAAM,aAAN,CAAoB,QAApB,CAA6B,KAAK,KAAL,CAAW,cAAX,CAA9B,GAA2D,KAAK,WAAL,EAA3D,GAAgF,KAAhF,CADA;AAElB,SAAI,aAAa,KAAK,cAAL,EAAb,CAFc;AAGlB,SAAI,gBAAgB,IAAC,CAAK,KAAL,CAAW,QAAX,GAAuB,KAAxB,GAAgC,KAAK,iBAAL,EAAhC,CAHF;AAIlB,SAAI,oBAAoB,IAAC,CAAK,KAAL,CAAW,QAAX,GAAuB,KAAxB,GAAgC,KAAK,oBAAL,EAAhC,CAJN;;AAMlB,SAAI,MAAJ,CANkB;AAOlB,SAAI,cAAc,KAAK,KAAL,CAAW,KAAX,IAAoB,KAAK,KAAL,CAAW,sBAAX,IAAqC,CAAC,KAAK,KAAL,CAAW,8BAAX,IAA6C,CAAC,KAAK,KAAL,CAAW,uBAAX,CAPxG;AAQlB,SAAI,WAAJ,EAAiB;AACf,gBAAS,mDAAwB,KAAK,KAAL,CAAjC,CADe;MAAjB;;AAIA,SAAI,UAAU,0BAAG;AACf,qBAAc,IAAd;AACA,2BAAoB,CAAC,KAAK,KAAL,CAAW,YAAX;AACrB,uBAAgB,KAAK,KAAL,CAAW,YAAX,IAA2B,WAA3B;MAHJ,CAAV,CAZc;;AAkBlB,YACE;;SAAQ,IAAG,QAAH,EAAY,WAAW,OAAX,EAAoB,MAAK,QAAL,EAAxC;OACG,MADH;OAEE;;WAAK,WAAU,wCAAV,EAAmD,MAAK,YAAL,EAAkB,uBAAoB,MAApB,EAA1E;SACE;;aAAK,WAAU,kBAAV,EAAL;WACE;;eAAK,WAAU,oBAAV,EAAL;aACE;;iBAAI,IAAG,MAAH,EAAU,WAAU,oCAAV,EAAd;eACG,WADH;cADF;aAIG,aAJH;aAKG,iBALH;YADF;WAQG,UARH;UADF;QAFF;MADF,CAlBkB;IAAZ;EA9FK;;;;;;;;;;;;;ACZf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,YAAb;;AAEA,WAAQ,sCAAR;;AAEA,+CAAkB;AAChB,YAAO,KAAK,SAAL,EAAP,CADgB;IANa;AAU/B,mDAAoB;AAClB,kCAAiB,EAAjB,CAAoB,CAAC,QAAD,CAApB,EAAgC,KAAK,SAAL,CAAhC,CADkB;AAElB,mCAAY,EAAZ,CAAe,mBAAf,EAAoC,KAAK,SAAL,CAApC,CAFkB;AAGlB,uCAAsB,EAAtB,CAAyB,QAAzB,EAAmC,KAAK,SAAL,CAAnC,CAHkB;;AAKlB,UAAK,gBAAL,GAAwB,EAAE,QAAF,CAAW,KAAK,gBAAL,EAAuB,EAAlC,EAAsC,EAAC,SAAS,KAAT,EAAgB,UAAU,IAAV,EAAvD,CAAxB,CALkB;AAMlB,OAAE,MAAF,EAAU,EAAV,CAAa,QAAb,EAAuB,KAAK,gBAAL,CAAvB,CANkB;IAVW;AAmB/B,yDAAuB;AACrB,kCAAiB,GAAjB,CAAqB,CAAC,QAAD,CAArB,EAAiC,KAAK,SAAL,CAAjC,CADqB;AAErB,mCAAY,GAAZ,CAAgB,mBAAhB,EAAqC,KAAK,SAAL,CAArC,CAFqB;AAGrB,uCAAsB,GAAtB,CAA0B,QAA1B,EAAoC,KAAK,SAAL,CAApC,CAHqB;;AAKrB,OAAE,MAAF,EAAU,GAAV,CAAc,QAAd,EAAwB,KAAK,gBAAL,CAAxB,CALqB;AAMrB,UAAK,gBAAL,CAAsB,MAAtB,GANqB;IAnBQ;AA4B/B,yDAAuB;AACrB,kCAAiB,iBAAjB,GADqB;IA5BQ;AAgC/B,uEAA8B;AAC5B,kCAAiB,0BAAjB,GAD4B;IAhCC;AAoC/B,+CAAkB;AAChB,YACE;;;OACE,8CAAa,KAAK,KAAK,KAAL,CAAW,WAAX;AACL,eAAM,KAAK,KAAL,CAAW,WAAX;AACN,uBAAc,KAAK,KAAL,CAAW,YAAX;AACd,yBAAgB,KAAK,KAAL,CAAW,cAAX,EAH7B,CADF;MADF,CADgB;IApCa;AA+C/B,uCAAa,UAAU;AACrB,SAAI,SAAJ,CADqB;;AAGrB,SAAI,CAAC,QAAD,EAAW;AACb,mBACE;;;SACE;;aAAoB,MAAK,MAAL,EAAY,IAAG,uBAAH,EAA2B,YAAW,kBAAX,EAA8B,WAAU,qBAAV,EAAgC,WAAW,IAAX,EAAzH;WACE,8BAAM,WAAU,2CAAV,EAAN,CADF;UADF;SAIE;;aAAa,YAAW,kBAAX,EAA8B,WAAU,yBAAV,EAA3C;WACE,sDADF;UAJF;QADF,CADa;MAAf;;AAaA,YAAO,SAAP,CAhBqB;IA/CQ;AAkE/B,6BAAS;AACP,SAAI,cAAc,IAAC,CAAK,KAAL,CAAW,QAAX,IAAuB,KAAK,sBAAL,EAAvB,GAAwD,KAAzD,GAAiE,KAAK,eAAL,EAAjE;SACd,YAAY,KAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,QAAX,CAA9B,CAFG;;AAIP,YACE;;SAAK,WAAU,sBAAV,EAAL;OACE;;WAAI,WAAU,SAAV,EAAoB,2BAAxB;SACE;;;WACE,sDADF;UADF;SAIG,WAJH;SAKG,SALH;SAME;;aAAI,IAAG,iBAAH,EAAqB,KAAI,iBAAJ,EAAsB,WAAU,iBAAV,EAA4B,SAAS,KAAK,2BAAL,EAApF;WACE;;eAAoB,MAAK,MAAL,EAAY,YAAW,qBAAX,EAAiC,WAAU,uBAAV,EAAjE;aACE,+CAAc,YAAY,KAAK,KAAL,CAAW,WAAX;AACf,qBAAK,OAAL;AACA,8BAAe,KAAK,KAAL,CAAW,qBAAX;AACf,8BAAe,KAAf,EAHX,CADF;aAKE,8CAAc,UAAU,KAAK,KAAL,CAAW,IAAX,EAAiB,QAAQ,IAAR,EAAc,KAAK,KAAK,KAAL,CAAW,EAAX,EAA5D,CALF;YADF;WAQE;;eAAa,YAAW,qBAAX,EAAiC,WAAU,yBAAV,EAA9C;aACE;AACE,2BAAY,KAAK,KAAL,CAAW,UAAX;AACZ,yBAAU,KAAK,KAAL,CAAW,QAAX;AACV,oCAAqB,KAAK,KAAL,CAAW,mBAAX;AACrB,8BAAe,KAAK,KAAL,CAAW,IAAX;AACf,gCAAiB,KAAK,KAAL,CAAW,MAAX;AACjB,iCAAkB,KAAK,KAAL,CAAW,EAAX,EANpB,CADF;YARF;UANF;QADF;MADF,CAJO;IAlEsB;AAqG/B,6DAAyB;AACvB,SAAI,cAAc,EAAE,aAAF,EAAiB,KAAjB,EAAd,CADmB;;AAGvB,YAAQ,CAAC,KAAK,KAAL,CAAW,gBAAX,KAAgC,qBAAiB,SAAjB,IAA8B,KAAK,KAAL,CAAW,aAAX,KAA6B,kBAAc,MAAd,CAA5F,IAAqH,cAAc,GAAd,CAHtG;IArGM;AA2G/B,mCAAY;AACV,YAAO,EAAE,MAAF,CAAS;AACZ,mBAAY,8BAAY,GAAZ,CAAgB,YAAhB,CAAZ;AACA,8BAAuB,KAAvB;AACA,oBAAa,gBAAM,SAAN,EAAb;AACA,yBAAkB,kCAAsB,GAAtB,CAA0B,mBAA1B,CAAlB;AACA,sBAAe,kCAAsB,GAAtB,CAA0B,gBAA1B,CAAf;MALG,EAOL,6BAAiB,MAAjB,EAPK,CAAP,CADU;IA3GmB;AAuH/B,mCAAW;AACT,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADS;IAvHoB;AA2H/B,iDAAkB;AAChB,kCAAiB,eAAjB,GADgB;AAEhB,UAAK,SAAL,GAFgB;IA3Ha;EAAlB;;;;;;;;;;;;;ACjBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,cAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,aAAQ,MAAM,SAAN,CAAgB,IAAhB;AACR,oBAAe,MAAM,SAAN,CAAgB,IAAhB;AACf,WAAM,MAAM,SAAN,CAAgB,MAAhB;AACN,iBAAY,MAAM,SAAN,CAAgB,MAAhB;AACZ,sBAAiB,MAAM,SAAN,CAAgB,MAAhB;AACjB,WAAM,MAAM,SAAN,CAAgB,MAAhB;AACN,WAAM,MAAM,SAAN,CAAgB,MAAhB;AACN,UAAK,MAAM,SAAN,CAAgB,SAAhB,CAA0B,CAAC,MAAM,SAAN,CAAgB,MAAhB,EAAwB,MAAM,SAAN,CAAgB,MAAhB,CAAnD,CAAL;AACA,oBAAe,MAAM,SAAN,CAAgB,IAAhB;IATjB;;AAYA,oBAAiB,2BAAY;AAC3B,YAAO;AACL,eAAQ,IAAR;AACA,sBAAe,IAAf;AACA,aAAM,QAAN;AACA,mBAAY,EAAZ;AACA,wBAAiB,qBAAU,uBAAV;AACjB,aAAM,EAAN;AACA,aAAM,EAAN;AACA,YAAK,EAAL;AACA,sBAAe,IAAf;AACA,gBAAS,mBAAM,EAAN;MAVX,CAD2B;IAAZ;;AAejB,+CAAkB;AAChB,YAAO;AACL,YAAK,IAAL;AACA,uBAAgB,8BAAY,GAAZ,CAAgB,gBAAhB,CAAhB;AACA,6BAAsB,KAAtB;MAHF,CADgB;IAjCa;;;;;;;;AA8C/B,eAAY,KAAZ;;AAEA,mDAAoB;;;AAClB,UAAK,UAAL,GAAkB,IAAlB,CADkB;AAElB,SAAI,KAAK,KAAL,CAAW,UAAX,EAAsB;AACxB,uBAAM,KAAN,CAAY,IAAZ,CAAiB,KAAK,KAAL,CAAW,UAAX,EAAuB,qBAAU,sBAAV,CAAxC,CACG,IADH,CACQ,UAAC,KAAD,EAAW;AACf,aAAI,MAAK,UAAL,EAAiB;AACnB,eAAI,MAAK,KAAL,CAAW,GAAX,KAAmB,KAAnB,EAA0B;AAC5B,mBAAK,QAAL,CAAc;AACZ,oBAAK,KAAL;cADF,EAD4B;YAA9B;AAKA,iBAAK,WAAL,GANmB;UAArB;QADI,CADR,CAWG,KAXH,CAWS,YAAM;AACX,aAAI,MAAK,UAAL,EAAiB;AACnB,iBAAK,QAAL,CAAc;AACZ,mCAAsB,IAAtB;YADF,EADmB;UAArB;QADK,CAXT,CADwB;MAA1B;IAlD6B;AAwE/B,qDAAqB;AACnB,UAAK,WAAL,GADmB;IAxEU;AA4E/B,yDAAuB;AACrB,UAAK,UAAL,GAAkB,KAAlB,CADqB;IA5EQ;;;AAgF/B,eAAY,sBAAY;AACtB,SAAI,CAAC,KAAK,KAAL,CAAW,aAAX,IAA4B,gBAAM,IAAN,CAAW,MAAX,CAAkB,KAAK,KAAL,CAAW,UAAX,CAA/C,EAAuE;AACzE,cAAO,gCAAQ,WAAU,gBAAV,EAA2B,KAAI,QAAJ,EAAnC,CAAP,CADyE;MAA3E;;AAIA,SAAI,QAAQ;AACV,iCAAwB,KAAK,KAAL,CAAW,UAAX,MAAxB;MADE,CALkB;;AAStB,YAAO,8BAAM,WAAU,gBAAV,EAA2B,OAAO,KAAP,EAAjC,CAAP,CATsB;IAAZ;;AAYZ,gBAAa,uBAAY;AACvB,SAAI,QAAQ,KAAK,KAAL,CAAW,GAAX,CADW;AAEvB,SAAI,SAAS,KAAK,IAAL,CAAU,MAAV,CAFU;;AAIvB,SAAI,SAAS,MAAT,EAAiB;AACnB,WAAI,IAAI,MAAM,KAAN,CADW;AAEnB,WAAI,IAAI,MAAM,MAAN,CAFW;AAGnB,WAAI,MAAM,CAAN,CAHe;AAInB,WAAI,IAAI,CAAJ,CAJe;AAKnB,WAAI,IAAI,CAAJ;;;AALe,WAQf,IAAI,CAAJ,EAAO;AACT,eAAM,CAAN,CADS;AAET,aAAI,CAAC,IAAI,GAAJ,CAAD,GAAY,CAAZ,CAFK;QAAX,MAGO,IAAI,IAAI,CAAJ,EAAO;AAChB,eAAM,CAAN,CADgB;AAEhB,aAAI,CAAC,IAAI,GAAJ,CAAD,GAAY,CAAZ,CAFY;QAAX;;AAKP,cAAO,MAAP,GAAgB,OAAO,KAAP,GAAe,GAAf,CAhBG;AAiBnB,cAAO,UAAP,CAAkB,IAAlB,EAAwB,SAAxB,CAAkC,KAAlC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,GAA/C,EAAoD,GAApD,EAAyD,CAAzD,EAA4D,CAA5D,EAA+D,GAA/D,EAAoE,GAApE,EAjBmB;MAArB;IAJW;;AAyBb,sBAAmB,6BAAY;AAC7B,SAAI,QAAQ;AACN,wBAAiB,KAAK,KAAL,CAAW,eAAX;MADnB;SAGA,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,WAAhB,EAAP,CAJyB;;AAM7B,SAAI,KAAK,KAAL,CAAW,IAAX,IAAmB,CAAC,IAAD,EAAO;AAC5B,cAAO,wBAAa,yBAAb,CAAuC,KAAK,KAAL,CAAW,IAAX,CAA9C,CAD4B;MAA9B;;AAIA,SAAI,KAAK,KAAL,CAAW,cAAX,IAA6B,CAAC,IAAD,EAAM;AACrC,aAAM,eAAN,YAA+B,KAAK,KAAL,CAAW,cAAX,uCAA0D,MAAC,CAAO,EAAP,CAAU,UAAV,GAAuB,CAAvB,QAAD,gBAAzF,CADqC;MAAvC;;AAIA,YACE;;SAAK,WAAU,mBAAV,EAA8B,OAAO,KAAP,EAAnC;OACG,IADH;MADF,CAd6B;IAAZ;;AAqBnB,eAAY,sBAAY;AACtB,SAAI,CAAC,KAAK,KAAL,CAAW,aAAX,EAA0B;AAC7B,cAAO,KAAP,CAD6B;MAA/B;;AAIA,YAAO,8CAAc,UAAU,KAAK,KAAL,CAAW,QAAX;AACV,eAAQ,KAAK,KAAL,CAAW,MAAX;AACR,eAAQ,KAAK,KAAL,CAAW,MAAX;AACR,YAAK,KAAK,KAAL,CAAW,GAAX,EAHnB,CAAP,CALsB;IAAZ;;AAWZ,WAAQ,kBAAY;AAClB,SAAI,SAAS,KAAK,KAAL,CAAW,UAAX,IAAyB,CAAC,KAAK,KAAL,CAAW,oBAAX,GAAkC,KAAK,UAAL,EAA5D,GAAgF,KAAK,iBAAL,EAAhF;SACT,SAAS,KAAK,UAAL,EAAT;SACA,wDAAsD,KAAK,KAAL,CAAW,IAAX,CAHxC;;AAKlB,YACE;;SAAM,WAAW,OAAX,EAAoB,SAAS,KAAK,KAAL,CAAW,OAAX,EAAnC;OACE;;WAAM,WAAU,kBAAV,EAAN;SACG,MADH;QADF;OAIG,MAJH;MADF,CALkB;IAAZ;;EArJK;;;;;;;;;;;;;ACPf;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,cAAb;;AAEA,WAAQ,sCAAR;;AAEA,qDAAqB;AACnB,SAAI,KAAK,KAAL,CAAW,GAAX,EAAgB;AAClB,8CAA2B,mBAA3B,CAA+C,KAAK,KAAL,CAAW,GAAX,CAA/C,CADkB;MAApB;IAP6B;AAY/B,mDAAmB,WAAW;AAC5B,SAAI,UAAU,GAAV,KAAkB,KAAK,KAAL,CAAW,GAAX,EAAgB;AACpC,8CAA2B,uBAA3B,CAAmD,UAAU,GAAV,CAAnD,CADoC;AAEpC,8CAA2B,mBAA3B,CAA+C,KAAK,KAAL,CAAW,GAAX,CAA/C,CAFoC;MAAtC;IAb6B;AAmB/B,yDAAuB;AACrB,SAAI,KAAK,KAAL,CAAW,GAAX,EAAgB;AAClB,8CAA2B,uBAA3B,CAAmD,KAAK,KAAL,CAAW,GAAX,CAAnD,CADkB;MAApB;IApB6B;;;AAyB/B,oBAAiB,2BAAW;AAC1B,YAAO;AACL,mBAAY;AACV,2BAAkB,IAAlB;QADF;AAGA,iBAAU,MAAV;AACA,eAAQ,KAAR;AACA,eAAQ,KAAR;AACA,YAAK,EAAL;MAPF,CAD0B;IAAX;;AAYjB,yBAAsB,8BAAS,UAAT,EAAqB;AACzC,SAAI,WAAW,UAAX,CADqC;;AAGzC,SAAI,eAAe,MAAf,EAAuB;AACzB,kBAAW,WAAX,CADyB;MAA3B,MAEO,IAAI,eAAe,SAAf,EAA0B;AACnC,kBAAW,aAAX,CADmC;MAA9B;;AAIP,SAAI,KAAK,KAAL,CAAW,MAAX,EAAmB;AACrB,mBAAY,WAAZ,CADqB;MAAvB;;AAIA,YAAO,QAAP,CAbyC;IAArB;;AAgBtB,mBAAgB,0BAAW;AACzB,SAAI,aAAa,SAAb,CADqB;;AAGzB,SAAI,KAAK,KAAL,CAAW,QAAX,KAAwB,SAAxB,IAAqC,KAAK,KAAL,CAAW,MAAX,EAAmB;AAC1D,oBAAa,QAAb,CAD0D;MAA5D,MAEO,IAAI,KAAK,KAAL,CAAW,QAAX,EAAqB;AAC9B,oBAAa,KAAK,KAAL,CAAW,QAAX,CADiB;MAAzB;;AAIP,YAAO,UAAP,CATyB;IAAX;;AAYhB,WAAQ,kBAAW;AACjB,SAAI,aAAa,KAAK,cAAL,EAAb,CADa;AAEjB,SAAI,WAAW,KAAK,oBAAL,CAA0B,UAA1B,CAAX,CAFa;AAGjB,SAAI,YAAY,UAAU,UAAV,CAHC;AAIjB,SAAI,IAAI,EAAJ,CAJa;AAKjB,OAAE,SAAF,IAAe,IAAf,CALiB;AAMjB,SAAI,UAAU,EAAE,MAAF,CAAS,EAAT,EAAa,KAAK,KAAL,CAAW,UAAX,EAAuB,CAApC,CAAV,CANa;;AAQjB,YACE,sCAAM,SAAS,OAAT,EAAkB,UAAU,QAAV,EAAoB,KAAK,KAAK,KAAL,CAAW,GAAX,EAAjD,CADF,CARiB;IAAX;EAjEK;;;;;;;;;ACJf,KAAI,KAAK,oBAAQ,GAAR,CAAL;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,MAAb;;AAEA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,gBAAS,EAAT;AACA,iBAAU,MAAV;AACA,eAAQ,KAAR;AACA,YAAK,EAAL;MAJF,CAD0B;IAAX;;AASjB,mBAAgB,0BAAW;AACzB,YAAO,EAAE,MAAF,CAAS,EAAT,EAAa;AAClB,mBAAY,IAAZ;AACA,6BAAsB,IAAtB;MAFK,EAGJ,KAAK,KAAL,CAAW,OAAX,CAHH,CADyB;IAAX;;AAOhB,WAAQ,kBAAW;AACjB,SAAI,aAAa,KAAK,cAAL,EAAb,CADa;AAEjB,SAAI,WAAW,iBAAiB,GAAG,UAAH,CAAjB,GAAkC,cAAlC,GAAmD,KAAK,KAAL,CAAW,GAAX,GAAiB,2BAApE,GAAkG,KAAK,KAAL,CAAW,QAAX,GAAsB,gBAAxH,CAFE;;AAIjB,YACE,8BAAM,yBAAyB,EAAC,QAAQ,QAAR,EAA1B,EAAN,CADF,CAJiB;IAAX;EApBO,CAAjB,C;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAgB;;AAEhB;AACA;;AAEA,kBAAiB,sBAAsB;AACvC;AACA;;AAEA;;AAEA;AACA;AACA,KAAI;AACJ;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF;AACA;AACA,EAAC;;;;;;;AC/CD,2C;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAgC,qBAAqB;AACrD;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,oD;;;;;;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;;AAEA,+B;;;;;;;;;;;;ACjDA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,gBAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,iBAAY,MAAM,SAAN,CAAgB,MAAhB;AACZ,eAAU,MAAM,SAAN,CAAgB,IAAhB;AACV,0BAAqB,MAAM,SAAN,CAAgB,IAAhB;AACrB,oBAAe,MAAM,SAAN,CAAgB,MAAhB;AACf,sBAAiB,MAAM,SAAN,CAAgB,MAAhB;IALnB;;AAQA,oBAAiB,2BAAY;AAC3B,YAAO;AACL,eAAQ,IAAR;MADF,CAD2B;IAAZ;;AAMjB,qCAAa;AACX,2BAAW,OAAX,GADW;IApBkB;AAwB/B,iDAAoB;AAClB,kCAAiB,wBAAjB,GADkB;IAxBW;AA4B/B,2DAAyB;AACvB,2BAAW,kBAAX,GADuB;IA5BM;AAgC/B,iDAAmB,GAAG;AACpB,SAAI,OAAO,EAAE,aAAF,CAAgB,YAAhB,CAA6B,WAA7B,CAAP,CADgB;AAEpB,oCAAmB,YAAnB,CAAgC;AAC9B,eAAQ,KAAK,KAAL,CAAW,eAAX;AACR,iBAF8B;AAG9B,aAAM,MAAN;MAHF,EAFoB;AAOpB,qCAAoB,qBAApB,CAA0C;AACxC,eAAQ,SAAS,cAAT,CAAwB,iBAAxB,CAAR;AACA,eAAQ,KAAK,KAAL,CAAW,eAAX;AACR,iBAHwC;MAA1C,EAPoB;IAhCS;;;AA8C/B,mCAAgC,0CAAY;AAC1C,YAAO,CAAC,KAAK,KAAL,CAAW,QAAX,IAAuB,KAAK,KAAL,CAAW,mBAAX,CADW;IAAZ;;AAIhC,iBAAc,wBAAY;AACxB,YACE;;SAAI,WAAU,UAAV,EAAqB,MAAK,UAAL,EAAzB;OACE;;WAAG,IAAG,aAAH,EAAiB,SAAS,KAAK,gBAAL,EAA7B;SACE,8BAAM,WAAU,gDAAV,EAAN,CADF;;SAC4E,6BAAQ,QAAR;QAF9E;MADF,CADwB;IAAZ;;AAUd,2BAAwB,kCAAY;AAClC,YACE;;SAAY,WAAU,YAAV,EAAZ;OACE;;WAAI,MAAK,MAAL,EAAJ;SACE;;aAAI,WAAU,uBAAV,EAAkC,MAAK,UAAL,EAAtC;WACE;;eAAG,IAAG,eAAH,EAAmB,SAAS,KAAK,qBAAL,EAA/B;aACE,8BAAM,WAAU,+CAAV,EAAN,CADF;;aAC2E,6BAAQ,sBAAR;YAF7E;UADF;QADF;MADF,CADkC;IAAZ;;AAcxB,uBAAoB,8BAAY;AAC9B,YACE;;;OACE;;WAAI,MAAK,MAAL,EAAJ;SACE;;aAAI,MAAK,UAAL,EAAJ;WACE;;eAAG,SAAS,KAAK,mBAAL,EAA0B,WAAU,cAAV,EAAyB,mBAAiB,KAAK,KAAL,CAAW,UAAX,aAAjB,EAAkD,QAAO,QAAP,EAAjH;aAAkI,6BAAQ,OAAR;YADpI;UADF;QADF;MADF,CAD8B;IAAZ;;AAYpB,uDAAqB;AACnB,iCAAiB,kBAAjB,GADmB;IAtFU;;;AA0F/B,WAAQ,kBAAY;AAClB,SAAI,WAAW,IAAC,CAAK,KAAL,CAAW,QAAX,GAAuB,KAAxB,GAAgC,KAAK,YAAL,EAAhC,CADG;AAElB,SAAI,qBAAqB,IAAC,CAAK,KAAL,CAAW,QAAX,GAAuB,IAAxB,GAA+B,KAAK,kBAAL,EAA/B,CAFP;AAGlB,SAAI,qBAAqB,IAAC,CAAK,8BAAL,EAAD,GAA0C,KAAK,sBAAL,EAA1C,GAA0E,KAA1E,CAHP;;AAKlB,YACE;;SAAK,MAAK,aAAL,EAAL;OACG,kBADH;OAEE;;WAAY,WAAU,iBAAV,EAAZ;SACE;;aAAI,MAAK,MAAL,EAAJ;WACE;;eAAI,WAAU,gCAAV,EAA2C,MAAK,UAAL,EAA/C;aACE;;iBAAG,IAAG,UAAH,EAAc,aAAW,mBAAS,SAAT,EAAoB,SAAS,KAAK,iBAAL,EAAzD;eACE;AACE,2BAAU,mBAAS,SAAT;AACV,yBAAQ,KAAK,KAAL,CAAW,MAAX,EAFV,CADF;eAIG,6BAAQ,SAAR;cALL;YADF;WASE;;eAAI,WAAU,8BAAV,EAAyC,MAAK,UAAL,EAA7C;aACE;;iBAAG,IAAG,OAAH,EAAW,aAAW,mBAAS,IAAT,EAAe,SAAS,KAAK,iBAAL,EAAjD;eACE;AACE,2BAAU,mBAAS,IAAT;AACV,yBAAQ,KAAK,KAAL,CAAW,MAAX,EAFV,CADF;eAIG,6BAAQ,IAAR;cALL;YATF;WAiBE;;eAAI,WAAU,+BAAV,EAA0C,MAAK,UAAL,EAA9C;aACE;;iBAAG,IAAG,QAAH,EAAY,aAAW,mBAAS,GAAT,EAAc,SAAS,KAAK,iBAAL,EAAjD;eACE;AACE,2BAAU,mBAAS,GAAT;AACV,yBAAQ,KAAK,KAAL,CAAW,MAAX,EAFV,CADF;eAIG,6BAAQ,GAAR;cALL;YAjBF;UADF;QAFF;OA8BE;;WAAY,WAAU,YAAV,EAAZ;SACE;;aAAI,MAAK,MAAL,EAAJ;WACG,QADH;WAEE;;eAAI,WAAU,SAAV,EAAoB,MAAK,UAAL,EAAxB;aACE;;iBAAG,IAAG,YAAH,EAAgB,SAAS,KAAK,UAAL,EAA5B;eACE,8BAAM,WAAU,wDAAV,EAAN,CADF;;eACoF,6BAAQ,OAAR;cAFtF;YAFF;UADF;QA9BF;OAwCG,kBAxCH;MADF,CALkB;IAAZ;EA1FK;;;;;;;;;;;;mBCXA;AACb,uCADa;AAEb,qBAFa;AAGb,yBAHa;AAIb,6BAJa;AAKb,2CALa;AAMb,0BANa;AAOb,iCAPa;AAQb,mBARa;AASb,yBATa;AAUb,eAVa;AAWb,wBAXa;AAYb,uBAZa;AAab,qBAba;AAcb,mDAda;AAeb,iCAfa;AAgBb,iDAhBa;;;;;;;;;;;;;;;;;;ACAf;;;;;;mBAEe,MAAM,WAAN,CAAkB;;;;AAE/B,cAAW;AACT,cAAS,MAAM,SAAN,CAAgB,MAAhB;IADX;;AAIA,+CAAkB;AAChB,YAAO;AACL,gBAAS,EAAT;MADF,CADgB;IANa;AAY/B,uCAAc;AACZ,SAAI,CAAC,KAAK,KAAL,CAAW,OAAX,EAAoB;AACvB,cAAO,SAAP,CADuB;MAAzB;AAGA,YAAO;;SAAQ,aAAU,cAAV,EAAyB,SAAM,uBAAN,EAAjC;OAAiE,KAAK,KAAL,CAAW,OAAX;MAAxE,CAJY;IAZiB;AAmB/B,6BAAS;;;AAEP,SAAI,QAAQ;AACV,eAAQ,cAAR;AACA,oBAAa,wEACV,KAAK,KAAL,CAAW,SAAX,EAAuB,CAAC,CAAC,KAAK,KAAL,CAAW,SAAX,sCAC1B,yBAAyB,WAFd,CAAb;MAFE,CAFG;;AAUP,SAAI,UAAU,KAAK,WAAL,CAVP;;AAYP,YACE;;OAAS,KAAT;OACI,OADJ;OAEE;;WAAK,MAAK,OAAL,EAAL;SACI,KAAK,KAAL,CAAW,QAAX;QAHN;MADF,CAZO;IAnBsB;EAAlB;;;;;;;;;;;;;ACFf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,kBAAb;;AAEA,+CAAkB;AAChB,YAAO,KAAK,SAAL,EAAP,CADgB;IAJa;AAQ/B,mDAAoB;AAClB,uCAAsB,EAAtB,CAAyB,QAAzB,EAAmC,KAAK,SAAL,CAAnC,CADkB;IARW;AAY/B,yDAAuB;AACrB,uCAAsB,GAAtB,CAA0B,QAA1B,EAAoC,KAAK,SAAL,CAApC,CADqB;IAZQ;AAgB/B,qDAAoB,WAAW,WAAW;;;;;AAKxC,SAAI,KAAK,KAAL,CAAW,MAAX,KAAsB,UAAU,MAAV,IACtB,KAAK,KAAL,CAAW,cAAX,KAA8B,UAAU,cAAV,EAA0B;AAC1D,uCAAoB,gBAApB,GAD0D;MAD5D;IArB6B;AA2B/B,yDAAsB,WAAW,WAAW;;;;;;;;;;;;AAY1C,YAAO,KAAK,KAAL,CAAW,MAAX,KAAsB,UAAU,MAAV,IACtB,KAAK,KAAL,CAAW,cAAX,KAA8B,UAAU,cAAV,IAC9B,KAAK,KAAL,CAAW,MAAX,KAAsB,qBAAiB,eAAjB,IACtB,KAAK,KAAL,CAAW,cAAX,KAA8B,CAA9B,IAAmC,UAAU,cAAV,KAA6B,CAA7B,CAfA;IA3Bb;AA6C/B,6BAAS;AACP,SAAI,KAAK,KAAL,CAAW,cAAX,KAA8B,kBAAc,OAAd,EAAuB;AACvD,mCAAiB,wBAAjB,GADuD;AAEvD,cAAO,2DAAe,QAAQ,KAAK,KAAL,CAAW,cAAX,EAAvB,CAAP,CAFuD;MAAzD;;AAKA,aAAQ,KAAK,KAAL,CAAW,MAAX;AACN,YAAK,qBAAiB,YAAjB;AACH,qCAAiB,2BAAjB,GADF;AAEE,gBAAO,KAAK,sBAAL,EAAP,CAFF;;AADF,YAKO,qBAAiB,eAAjB;AACH,qCAAiB,6BAAjB,GADF;AAEE,gBAAO,KAAK,eAAL,EAAP,CAFF;;AALF,YASO,qBAAiB,YAAjB;AACH,qCAAiB,8BAAjB,GADF;AAEE,gBAAO,kEAAqB,QAAQ,KAAK,KAAL,CAAW,MAAX,EAA7B,CAAP,CAFF;;AATF;AAcI,gBAAO,iCAAP,CADF;AAbF,MANO;IA7CsB;AAqE/B,6DAAyB;AACvB,SAAI,SAAS,iCAAT,CADmB;AAEvB,cACE;;SAAK,WAAU,mCAAV,EAAL;OACE;;WAAM,WAAU,wBAAV,EAAN;SACE,yCAAS,MAAM,IAAN,EAAY,eAAc,oBAAd,EAAmC,MAAK,OAAL,EAAa,OAAM,OAAN,EAAc,MAAK,OAAL,EAAa,KAAI,MAAJ,EAAhG,CADF;QADF;OAIE;;WAAM,WAAU,mBAAV,EAAN;SAAqC,0CAAQ,UAAR;QAJvC;MADF,CAFuB;AAUvB,YAAO,MAAP,CAVuB;IArEM;AAkF/B,+CAAkB;AAChB,SAAI,SAAS,iCAAT,CADY;AAEhB,cAAS,6DAAiB,SAAS,KAAK,KAAL,CAAW,cAAX,EAA2B,QAAQ,KAAK,KAAL,CAAW,MAAX,EAA7D,CAAT,CAFgB;AAGhB,YAAO,MAAP,CAHgB;IAlFa;AAwF/B,mCAAY;AACV,SAAI,kBAAkB,kCAAsB,MAAtB,EAAlB;SACA,YAAY,gBAAgB,cAAhB;SACZ,iBAAiB,KAAK,KAAL,CAAW,YAAY,IAAZ,CAA5B;;;;;;;AAHM,SAUN,gBAAgB,iBAAhB,KAAsC,qBAAiB,SAAjB,EAA4B;AACpE,yCAAsB,GAAtB,CAA0B,QAA1B,EAAoC,KAAK,SAAL,CAApC,CADoE;MAAtE;;AAIA,YAAO;AACL,eAAQ,gBAAgB,iBAAhB;AACR,uBAAgB,gBAAgB,cAAhB;AAChB,kBAAW,SAAX;AACA,uBAAgB,cAAhB;MAJF,CAdU;IAxFmB;AA8G/B,mCAAY;AACV,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADU;IA9GmB;EAAlB;;;;;;;;;;;;;ACXf;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,yBAAb;;AAEA,mDAAoB;AAClB,qCAAoB,2BAApB,CAAgD;AAC9C,eAAQ,KAAK,IAAL,CAAU,MAAV;AACR,eAAQ,KAAK,KAAL,CAAW,MAAX;MAFV,EADkB;IAJW;AAW/B,mDAAoB;AAClB,qCAAoB,gBAApB,GADkB;IAXW;AAe/B,6BAAU;AACR,YACE;;SAAK,KAAI,QAAJ,EAAa,WAAU,6DAAV,EAAwE,cAAc,KAAK,iBAAL,EAAwB,SAAS,KAAK,iBAAL,EAAzI;OACE;;WAAM,WAAU,wBAAV,EAAN;SACE,8BAAM,WAAU,8CAAV,EAAN,CADF;QADF;OAIE;;WAAM,WAAU,mBAAV,EAAN;SAAsC,0CAAQ,OAAR;QAJxC;MADF,CADQ;IAfqB;EAAlB;;;;;;;;;;;;mBCHA;AACb,8BADa;AAEb,uBAAoB,4BAAC,GAAD,EAAS;AAC3B,+BAAwB,mBAAa,QAAQ,CAAR,GAAY,GAAZ,GAAkB,EAAlB,CAArC,CAD2B;IAAT;AAGpB,mGALa;AAMb,yBANa;AAOb,8BAA2B,mCAAC,UAAD;sGAAwG;IAAxG;AAC3B,oCARa;AASb,iCATa;AAUb,qBAVa;AAWb,uGAXa;;;;;;;;;;;;;;ACAf;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,+BAAb;;AAEA,mDAAoB;AAClB,qCAAoB,2BAApB,CAAgD;AAC9C,eAAQ,KAAK,IAAL,CAAU,MAAV;AACR,eAAQ,KAAK,KAAL,CAAW,MAAX;MAFV,EADkB;IAJW;AAW/B,uEAA8B;AAC5B,kCAAkB,SAAlB,GAD4B;AAE5B,qCAAoB,gBAApB,GAF4B;AAG5B,iCAAiB,wBAAjB,GAH4B;IAXC;AAiB/B,mDAAoB;AAClB,qCAAoB,gBAApB,GADkB;IAjBW;AAqB/B,6BAAU;AACR,YACE;;SAAK,KAAI,QAAJ,EAAa,WAAU,6DAAV,EAAwE,cAAc,KAAK,iBAAL,EAAwB,SAAS,KAAK,iBAAL,EAAzI;OACE;;WAAM,WAAU,wBAAV,EAAN;SACE,8BAAM,WAAU,8CAAV,EAAN,CADF;QADF;OAIE;;WAAM,WAAU,mBAAV,EAAN;SAAsC,0CAAQ,YAAR;QAJxC;OAKE;;WAAG,WAAU,eAAV,EAA0B,SAAS,KAAK,2BAAL,EAAtC;SAAyE,0CAAQ,SAAR;QAL3E;MADF,CADQ;IArBqB;EAAlB;;;;;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,2BAAb;;AAEA,cAAW;AACT,cAAS,MAAM,SAAN,CAAgB,MAAhB;AACT,cAAS,MAAM,SAAN,CAAgB,MAAhB;IAFX;;AAKA,+CAAkB;AAChB,YAAO;AACL,gBAAS,CAAT;AACA,gBAAS,CAAT;MAFF,CADgB;IATa;AAgB/B,mDAAoB;AAClB,qCAAoB,2BAApB,CAAgD;AAC9C,eAAQ,KAAK,IAAL,CAAU,MAAV;AACR,eAAQ,KAAK,KAAL,CAAW,MAAX;MAFV,EADkB;IAhBW;AAuB/B,2DAAwB;AACtB,kCAAkB,wBAAlB,GADsB;AAEtB,qCAAoB,gBAApB,GAFsB;AAGtB,iCAAiB,wBAAjB,GAHsB;IAvBO;AA6B/B,mDAAoB;AAClB,qCAAoB,gBAApB,GADkB;IA7BW;;;;;;AAoC/B,yDAAuB;AACrB,YAAO,0CAAQ,kBAAR,CAA2B,KAAK,KAAL,CAAW,OAAX,CAAlC,CADqB;IApCQ;AAwC/B,6BAAU;AACR,SAAI,UAAU,KAAK,oBAAL,EAAV,CADI;AAER,YACE;;SAAK,KAAI,QAAJ,EAAa,WAAU,0DAAV,EAAqE,cAAc,KAAK,iBAAL,EAAwB,SAAS,KAAK,iBAAL,EAAtI;OACG,OADH;OAEE;;WAAG,WAAU,eAAV,EAA0B,SAAS,KAAK,qBAAL,EAAtC;SAAmE,0CAAQ,SAAR;QAFrE;MADF,CAFQ;IAxCqB;EAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEM;;;AAEJ,YAFI,qBAEJ,GAAc;yCAFV,uBAEU;;8FAFV,mCAEU;;AAEZ,WAAK,eAAL,GAAuB,oBAAU;cAAM,MAAK,iBAAL;MAAN,EAAgC,IAA1C,EAAgD,IAAhD,EAAsD,IAAtD,CAAvB,CAFY;AAGZ,WAAK,mBAAL,GAA2B,oBAAU;cAAM,MAAK,qBAAL;MAAN,EAAoC,IAA9C,CAA3B,CAHY;;IAAd;;8BAFI;;yCAQgB;;;AAClB,gCAAc,QAAd,CAAuB;AACrB,uBAAc,qBAAM;AAClB,kBAAK,mBAAL,CAAyB,KAAzB,GADkB;AAElB,kBAAK,GAAL,CAAS,EAAC,kBAAkB,kBAAc,MAAd,EAA5B,EAFkB;UAAN;AAId,yBAAgB,uBAAM;AACpB,kBAAK,mBAAL,CAAyB,KAAzB,GADoB;UAAN;AAGhB,8BAAqB,4BAAM;AACzB,kBAAK,mBAAL,CAAyB,qBAAiB,SAAjB,CAAzB,CADyB;UAAN;AAGrB,gCAAuB,8BAAM;AAC3B,kBAAK,mBAAL,CAAyB,qBAAiB,SAAjB,CAAzB,CAD2B;UAAN;AAGvB,iCAAwB,6BAAC,IAAD,EAAU;AAChC,kBAAK,mBAAL,CAAyB,qBAAiB,YAAjB,EAA+B,IAAxD,EADgC;UAAV;AAGxB,oCAA2B,+BAAC,IAAD,EAAU;AACnC,kBAAK,mBAAL,CAAyB,qBAAiB,eAAjB,EAAkC,IAA3D,EADmC;AAEnC,kBAAK,eAAL,CAAqB,KAArB,GAA6B,KAA7B,GAFmC;UAAV;AAI3B,sCAA6B,mCAAM;AACjC,kBAAK,mBAAL,CAAyB,qBAAiB,YAAjB,CAAzB,CADiC;UAAN;AAG7B,uBAAc,qBAAM;AAClB,kBAAK,mBAAL,CAAyB,qBAAiB,SAAjB,CAAzB,CADkB;UAAN;AAGd,qBAAY,mBAAM;AAChB,kBAAK,mBAAL,CAAyB,qBAAiB,SAAjB,CAAzB,CADgB;UAAN;QA3Bd,EADkB;;;;mCAkCN;AACZ,cAAO;AACL,4BAAmB,qBAAiB,SAAjB;AACnB,yBAAgB,kBAAc,MAAd;AAChB,yBAAgB,CAAhB;AACA,+BAAsB,CAAtB;QAJF,CADY;;;;yCASM,QAAQ,MAAM;AAChC,YAAK,GAAL,CAAS;AACP,4BAAmB,MAAnB;AACA,+BAAsB,EAAE,GAAF,CAAM,IAAN,EAAY,mBAAZ,KAAoC,KAAK,IAAL,CAAU,oBAAV;AAC1D,yBAAgB,EAAE,GAAF,CAAM,IAAN,EAAY,gBAAZ,KAAiC,KAAK,IAAL,CAAU,cAAV;QAHnD,EADgC;;;;yCAQd;AAClB,WAAI,UAAU,KAAK,IAAL,CAAU,cAAV;WACV,OAAO,UAAU,IAAV,GAAiB,UAAU,IAAV,GAAiB,CAAlC,CAFO;AAGlB,YAAK,GAAL,CAAS,gBAAT,EAA2B,IAA3B,EAHkB;AAIlB,WAAI,SAAS,CAAT,EAAY;AACd,cAAK,eAAL,CAAqB,KAArB,GADc;QAAhB;;;;6CAKsB;AACtB,YAAK,GAAL,CAAS,EAAC,kBAAkB,kBAAc,OAAd,EAA5B,EADsB;;;UApEpB;;;mBAyES,IAAI,qBAAJ;;;;;;;;;;;;;;;;;;;mBC/EA,sBAAc;AAC3B,cAAW,WAAX;AACA,iBAAc,cAAd;AACA,iBAAc,cAAd;AACA,oBAAiB,iBAAjB;AACA,cAAW,WAAX;EALa;;;;;;;;;;;;;;;;;;;mBCAA,sBAAc;AAC3B,WAAQ,QAAR;AACA,YAAS,SAAT;EAFa;;;;;;;;;;;;;ACAf;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,SAAb;;AAEA,cAAW;AACT,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAtB,EAAoD,UAApD;AACN,YAAO,MAAM,SAAN,CAAgB,MAAhB;IAFT;;AAKA,yDAAuB;AACrB,UAAK,YAAL,GADqB;IATQ;AAa/B,uDAAsB;AACpB,UAAK,YAAL,GADoB;IAbS;AAiB/B,+CAAkB;AAChB,YAAO;AACL,aAAM,QAAN;AACA,eAAQ,GAAR;AACA,YAAK,SAAL;AACA,cAAO,CAAP;MAJF,CADgB;IAjBa;AA0B/B,mDAAoB;AAClB,UAAK,WAAL,GADkB;IA1BW;AA8B/B,qDAAqB;AACnB,UAAK,WAAL,GADmB;IA9BU;AAkC/B,uCAAa;AACX,YAAO,SAAS,WAAT,CAAqB,IAArB,CAAP,CADW;IAlCkB;AAsC/B,uCAAc;AACZ,SAAI,OAAJ,CADY;;AAGZ,SAAI,KAAK,KAAL,CAAW,IAAX,EAAiB;AACnB,iBAAU,KAAK,WAAL,EAAV,CADmB;AAEnB,YAAK,aAAL,CAAmB,KAAK,KAAL,CAAW,IAAX,EAAiB,OAApC,EAFmB;MAArB,MAGO;AACL,YAAK,YAAL,GADK;MAHP;IAzC6B;AAiD/B,mCAAY;AACV,SAAI,QAAQ,4BAAiB,QAAjB,EAAR,CADM;AAEV,YAAO,qBAAU,cAAV,CAAyB,KAAzB,CAAP,CAFU;IAjDmB;AAsD/B,uCAAc;AACZ,SAAI,UAAU,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAlB,CADQ;;AAGZ,SAAI,CAAC,QAAQ,KAAR,EAAe;AAClB,eAAQ,KAAR,GAAgB,KAAK,SAAL,EAAhB,CADkB;MAApB;;AAIA,YAAO,OAAP,CAPY;IAtDiB;AAgE/B,yCAAc,cAAc,MAAM;AAChC,SAAI,UAAU,IAAI,CAAJ,CAAM,KAAK,WAAL,EAAN,CAAV,CAD4B;AAEhC,SAAI,KAAK,KAAL,CAAW,KAAX,GAAmB,CAAnB,EAAsB;AACxB,YAAK,KAAL,GAAa,WAAW,YAAM;AAAE,iBAAQ,IAAR,CAAa,YAAb,EAA2B,IAA3B,EAAF;QAAN,EAA6C,KAAK,KAAL,CAAW,KAAX,CAArE,CADwB;MAA1B,MAEO;AACL,eAAQ,IAAR,CAAa,YAAb,EAA2B,IAA3B,EADK;MAFP;IAlE6B;AAyE/B,yCAAe;AACb,SAAI,KAAK,KAAL,EAAY;AACd,YAAK,KAAL,GAAa,aAAa,KAAK,KAAL,CAA1B,CADc;MAAhB;AAGA,SAAI,CAAJ,CAAM,KAAK,WAAL,EAAN,EAA0B,QAA1B,GAJa;IAzEgB;AAgF/B,6BAAQ;AACN,YACE,6BAAK,WAAW,iBAAiB,IAAC,CAAK,KAAL,CAAW,aAAX,GAA4B,KAAK,KAAL,CAAW,aAAX,GAA2B,EAAxD,CAAjB,EAA8E,KAAK,KAAK,KAAL,CAAW,GAAX,EAAnG,CADF,CADM;IAhFuB;EAAlB;;;;;;;;;;;;;ACHf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,iBAAb;;AAEA,+CAAmB;AACjB,YAAO,KAAK,SAAL,EAAP,CADiB;IAJY;AAQ/B,mDAAqB;AACnB,mCAAY,EAAZ,CAAe,CAAC,mBAAD,EAAsB,sBAAtB,CAAf,EAA8D,KAAK,SAAL,CAA9D,CADmB;IARU;AAY/B,yDAAwB;AACtB,mCAAY,GAAZ,CAAgB,CAAC,mBAAD,EAAsB,sBAAtB,CAAhB,EAA+D,KAAK,SAAL,CAA/D,CADsB;IAZO;AAgB/B,mCAAa;AACX,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADW;IAhBkB;AAoB/B,mCAAa;AACX,SAAI,iBAAiB,8BAAY,GAAZ,CAAgB,gBAAhB,CAAjB,CADO;AAEX,YAAO;AACL,mBAAY,8BAAY,GAAZ,CAAgB,YAAhB,CAAZ;AACA,kBAAW,gBAAM,aAAN,CAAoB,SAApB,CAA8B,cAA9B,CAAX;AACA,cAAO,gBAAM,aAAN,CAAoB,KAApB,CAA0B,cAA1B,CAAP;AACA,iBAAU,gBAAM,aAAN,CAAoB,QAApB,CAA6B,cAA7B,CAAV;AACA,cAAO,EAAE,GAAF,CAAM,8BAAY,GAAZ,CAAgB,eAAhB,CAAN,EAAwC,KAAxC,EAA+C,KAA/C,CAAP;MALF,CAFW;IApBkB;AA+B/B,mEAA6B;AAC3B,SAAI,WAAW,6BAAkB,cAAlB,EAAX,CADuB;AAE3B,8BAAc,2BAAd,CAA0C,QAA1C,EAF2B;IA/BE;AAoC/B,iDAAoB;AAClB,kCAAiB,yBAAjB,GADkB;IApCW;AAwC/B,6CAAkB;AAChB,YACE;;;OACE;;WAAG,WAAU,gBAAV,EAA2B,MAAM,qBAAU,aAAV,EAAyB,QAAO,QAAP,EAA7D;SAA8E,6BAAc,IAAd;QADhF;MADF,CADgB;IAxCa;AAgD/B,qDAAsB;AACpB,YACE;;;OACE;;WAAG,WAAU,gBAAV,EAA2B,MAAM,qBAAU,eAAV,EAA2B,QAAO,QAAP,EAA/D;SAAgF,6BAAc,WAAd;QADlF;MADF,CADoB;IAhDS;AAwD/B,mEAA6B;AAC3B,YACE;;;OACE;;WAAG,WAAU,uBAAV,EAAkC,SAAS,KAAK,yBAAL,EAA9C;SAA+E,6BAAc,kBAAd;QADjF;MADF,CAD2B;IAxDE;AAgE/B,yDAAwB;AACtB,SAAI,oBAAkB,KAAK,KAAL,CAAW,UAAX,eAAlB,CADkB;AAEtB,YACE;;;OACE;;WAAG,WAAU,uBAAV,EAAkC,MAAM,IAAN,EAAY,QAAO,QAAP,EAAjD;SAAkE,6BAAc,aAAd;QADpE;MADF,CAFsB;IAhEO;AAyE/B,iDAAoB;AAClB,SAAI,KAAK,KAAL,CAAW,QAAX,IAAuB,KAAK,KAAL,CAAW,KAAX,EAAkB;AAC3C,cAAO,IAAP,CAD2C;MAA7C;AAGA,YACE;;;OACE;;WAAG,IAAG,WAAH,EAAe,SAAS,KAAK,gBAAL,EAA3B;SAAmD,6BAAc,SAAd;QADrD;MADF,CAJkB;IAzEW;AAoF/B,6CAAkB;AAChB,YACE;;;OACE;;WAAG,WAAU,qBAAV,EAAgC,MAAM,qBAAU,eAAV,EAA2B,QAAO,QAAP,EAApE;SAAqF,6BAAc,MAAd;QADvF;MADF,CADgB;IApFa;AA4F/B,iDAAoB;AAClB,YACE;;;OACE;;WAAG,IAAG,eAAH,EAAmB,MAAM,qBAAU,kBAAV,EAA8B,QAAO,QAAP,EAA1D;SAA2E,6BAAc,gBAAd;QAD7E;MADF,CADkB;IA5FW;AAoG/B,6BAAU;AACR,SAAI,iBAAiB,KAAK,cAAL,EAAjB;SACA,iBAAiB,KAAK,kBAAL,EAAjB;SACA,wBAAwB,KAAK,yBAAL,EAAxB;SACA,aAAa,IAAC,CAAK,KAAL,CAAW,KAAX,GAAoB,KAArB,GAA6B,KAAK,cAAL,EAA7B;SACb,eAAe,KAAK,oBAAL,EAAf;SACA,eAAe,CAAE,KAAK,KAAL,CAAW,KAAX,IAAoB,CAAC,KAAK,KAAL,CAAW,QAAX,GAAuB,KAAK,gBAAL,EAA9C,GAAwE,KAAxE;SACf,eAAe,KAAK,gBAAL,EAAf,CAPI;;AASR,YACE;;SAAK,WAAU,uBAAV,EAAL;OACE;;;SACG,cADH;SAEG,cAFH;SAGG,qBAHH;SAIG,YAJH;SAKG,YALH;SAMG,UANH;SAOG,YAPH;QADF;MADF,CATQ;IApGqB;EAAlB;;;;;;;;;;;;;ACRf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,aAAb;;AAEA,mDAAoB;AAClB,UAAK,YAAL,GADkB;IAJW;AAQ/B,qDAAqB;AACnB,UAAK,YAAL,GADmB;IARU;AAY/B,yCAAe;AACb,SAAI,QAAQ,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,WAAV,CAA7B,CADS;AAEb,SAAI,KAAK,KAAL,CAAW,YAAX,IAA2B,KAA3B,EAAkC;AACpC,YAAK,eAAL,CAAqB,KAArB,EADoC;MAAtC;IAd6B;AAmB/B,6CAAgB,OAAO;AACrB,SAAI,UAAU,SAAS,aAAT,EAAwB;AACpC,aAAM,KAAN,GADoC;AAEpC,aAAM,MAAN,GAFoC;MAAtC;IApB6B;AA0B/B,6BAAS;AACP,SAAI,eAAe,0BAAG;AACpB,oBAAa,IAAb;MADiB,CAAf,CADG;;AAKP,YACE;;SAAK,WAAU,iBAAV,EAAL;OACE,+BAAO,IAAG,cAAH;AACA,mBAAS,IAAT;AACA,eAAK,MAAL;AACA,oBAAW,YAAX;AACA,sBAAY,gBAAZ;AACA,eAAK,MAAL;AACA,uBAAa,KAAb;AACA;AACA,uBAAW,sBAAX;AACA,cAAI,aAAJ;AACA,oBAAW,KAAK,UAAL;AACX,mBAAU,KAAK,SAAL;AACV,iBAAQ,KAAK,OAAL;AACR,kBAAS,KAAK,QAAL;AACT,gBAAO,KAAK,KAAL,CAAW,IAAX,EAdd,CADF;MADF,CALO;IA1BsB;AAoD/B,mCAAW,KAAK;AACd,SAAI,IAAI,OAAJ,KAAgB,gBAAM,OAAN,CAAc,KAAd,EAAqB;AACvC,WAAI,KAAK,KAAL,CAAW,cAAX,EAA2B;AAC7B,sCAAiB,aAAjB,CAA+B,KAAK,KAAL,CAAW,GAAX,EAAgB,KAAK,KAAL,CAAW,IAAX,CAA/C,CAD6B;QAA/B,MAEO;AACL,sCAAiB,uBAAjB,CAAyC,KAAK,KAAL,CAAW,GAAX,EAAgB,KAAK,KAAL,CAAW,IAAX,CAAzD,CADK;QAFP;AAKA,mCAAiB,oBAAjB,CAAsC,KAAK,KAAL,CAAW,GAAX,CAAtC,CANuC;MAAzC,MAOO,IAAI,IAAI,OAAJ,KAAgB,gBAAM,OAAN,CAAc,GAAd,EAAmB;AAC5C,oCAAiB,aAAjB,CAA+B;AAC7B,eAAM,EAAN;QADF,EAD4C;AAI5C,WAAI,KAAK,KAAL,CAAW,GAAX,KAAmB,QAAnB,EAA6B;AAC/B,cAAK,oBAAL,GAD+B;QAAjC;MAJK;IA5DsB;AAsE/B,yDAAuB;AACrB,cAAS,cAAT,MAA2B,qBAAU,aAAV,CAA3B,CAAsD,KAAtD,GADqB;IAtEQ;AA0E/B,iCAAU,KAAK;AACb,kCAAiB,aAAjB,CAA+B;AAC7B,aAAM,IAAI,MAAJ,CAAW,KAAX;MADR,EADa;IA1EgB;AAgF/B,+BAAU;AACR,kCAAiB,aAAjB,GADQ;IAhFqB;AAoF/B,iCAAU;AACR,iCAAiB,kBAAjB,GADQ;IApFqB;EAAlB;;;;;;;;;;;;;;;;;ACNf;;;;;;;;;;;;;;;;;mBAae,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,qBAAb;;AAEA,cAAW;AACT,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB,CAAC,GAAD,EAAM,MAAN,EAAc,QAAd,CAAtB,CAAN;AACA,iBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACZ,gBAAW,MAAM,SAAN,CAAgB,IAAhB;AACX,eAAU,MAAM,SAAN,CAAgB,IAAhB;AACV,yBAAoB,MAAM,SAAN,CAAgB,MAAhB;AACpB,mBAAc,MAAM,SAAN,CAAgB,MAAhB;AANL,IAAX;;AASA,+CAAkB;AAChB,YAAO;AACL,aAAM,QAAN;AACA,kBAAW,KAAX;AACA,iBAAU,KAAV;MAHF,CADgB;IAba;AAqB/B,6BAAS;;;AACP,SAAI,QAAQ;AACV,aAAM,KAAK,KAAL,CAAW,EAAX,IAAiB,EAAE,QAAF,EAAjB;AACN,qBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,oBAAa,KAAK,KAAL,CAAW,UAAX;AACb,gBAAS,KAAK,KAAL,CAAW,KAAX,IAAoB,EAApB;AACT,qBAAc,KAAK,KAAL,CAAW,YAAX,KAA4B,KAAK,KAAL,CAAW,KAAX,IAAoB,EAAhD;AACd,wBAAiB,KAAK,KAAL,CAAW,UAAX;AACjB,wBAAiB,KAAK,KAAL,CAAW,QAAX;AACjB,wBAAiB,IAAjB;AACA,oBAAa,wEACV,KAAK,KAAL,CAAW,SAAX,EAAuB,CAAC,CAAC,KAAK,KAAL,CAAW,SAAX,sCAC1B,yBAAyB,0CACzB,mCAAmC,KAAK,KAAL,CAAW,SAAX,OAHxB,CAAb;MATE,CADG;;AAiBP,SAAI,KAAK,KAAL,CAAW,kBAAX,EAA+B;AACjC,aAAM,gBAAN,IAA0B,KAAK,KAAL,CAAW,kBAAX;AADO,YAEjC,CAAM,8BAAN,IAAwC,KAAK,KAAL,CAAW,kBAAX;AAFP,MAAnC;;AAKA,SAAI,KAAK,KAAL,CAAW,YAAX,EAAyB;AAC3B,aAAM,8BAAN,IAAwC,KAAK,KAAL,CAAW,YAAX,CADb;MAA7B;;AAIA,aAAQ,KAAK,KAAL,CAAW,IAAX;AACN,YAAK,GAAL,CADF;AAEE,YAAK,MAAL;AACE,gBAAO;;WAAO,KAAP;WAAgB,KAAK,KAAL,CAAW,QAAX;UAAvB,CADF;;AAFF,YAKO,QAAL,CALF;AAME;AACE,gBAAO;;WAAY,KAAZ;WAAqB,KAAK,KAAL,CAAW,QAAX;UAA5B,CADF;AANF,MA1BO;IArBsB;EAAlB;;;;;;;;;;;;;;;;;ACbf;;;;;;;;;;;;;;;;;;;mBAee,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,cAAb;;AAEA,cAAW;AACT,iBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACZ,aAAQ,MAAM,SAAN,CAAgB,IAAhB;AACR,aAAQ,MAAM,SAAN,CAAgB,IAAhB;IAHV;;AAMA,+CAAkB;AAChB,YAAO;AACL,eAAQ,EAAE,IAAF;AACR,eAAQ,EAAE,IAAF;MAFV,CADgB;IAVa;;;;;;;;;;;AAyB/B,mDAAoB;AAClB,SAAI,CAAJ,CAAM,KAAK,mBAAL,EAAN,EAAkC,EAAlC,CAAqC;AACnC,6BAAsB,KAAK,sBAAL;AACtB,6BAAsB,KAAK,sBAAL;MAFxB,EADkB;IAzBW;;;;;;AAmC/B,yDAAuB;AACrB,UAAK,sBAAL,GADqB;AAErB,SAAI,CAAJ,CAAM,KAAK,mBAAL,EAAN,EAAkC,GAAlC,GAFqB;IAnCQ;;;;;;;AA4C/B,2DAAwB;AACtB,YAAO,KAAP,CADsB;IA5CO;;;;;;;;;;AAuD/B,6BAAS;;;AACP,SAAI,QAAQ;AACV,aAAM,KAAK,KAAL,CAAW,UAAX;AACN,sBAAe,MAAf;AACA,eAAQ,MAAR;AACA,oBAAa,wEACV,KAAK,KAAL,CAAW,SAAX,EAAuB,CAAC,CAAC,KAAK,KAAL,CAAW,SAAX,sCAC1B,iBAAiB,0CACjB,qBAAqB,WAHV,CAAb;AAKA,kCAA2B;AACzB,iBAAQ,KAAK,qBAAL,EAAR;QADF;MATE,CADG;;AAeP,YAAO,2BAAS,KAAT,CAAP,CAfO;IAvDsB;AAyE/B,2CAAgB;AACd,SAAI,CAAJ,kBAAqB,KAAK,KAAL,CAAW,UAAX,OAArB,EAAgD,OAAhD,CAAwD,mBAAxD,EADc;IAzEe;;;;;;;;AAkF/B,6DAAyB;AACvB,cAAS,MAAT,CAAgB,KAAK,KAAL,CAAW,QAAX,EAAqB,KAAK,mBAAL,EAArC,EADuB;AAEvB,SAAI,CAAJ,CAAM,MAAN,EAAc,GAAd,CAAkB,QAAlB,EAA4B,KAAK,aAAL,CAA5B,CAFuB;AAGvB,UAAK,KAAL,CAAW,MAAX,GAHuB;IAlFM;;;;;;;;;;AA+F/B,6DAAyB;AACvB,SAAI,CAAJ,CAAM,MAAN,EAAc,GAAd,CAAkB,QAAlB,EAA4B,KAAK,aAAL,CAA5B,CADuB;AAEvB,cAAS,sBAAT,CAAgC,KAAK,mBAAL,EAAhC,EAFuB;AAGvB,SAAI,CAAJ,CAAM,KAAK,mBAAL,EAAN,EACG,KADH,GAEG,IAFH,CAEQ,KAAK,qBAAL,EAFR,EAHuB;AAMvB,UAAK,KAAL,CAAW,MAAX,GANuB;IA/FM;;;;;;AA2G/B,uDAAsB;AACpB,YAAO,SAAS,cAAT,CAAwB,KAAK,KAAL,CAAW,UAAX,CAA/B,CADoB;IA3GS;;;;;;AAkH/B,2DAAwB;AACtB,YAAO,eAAe,oBAAf,CAAoC,KAAK,KAAL,CAAW,QAAX,CAA3C,CADsB;IAlHO;EAAlB;;;;;;;;;;;;;ACff;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,oBAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,YAAO,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACP,8BAAyB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACzB,8BAAyB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACzB,6BAAwB,MAAM,SAAN,CAAgB,SAAhB,CAA0B,CAChD,MAAM,SAAN,CAAgB,IAAhB,EACA,MAAM,SAAN,CAAgB,MAAhB,CAFsB,EAGrB,UAHqB;IAJ1B;;AAUA,+CAAkB;AAChB,YAAO;AACL,kBAAW,KAAX;MADF,CADgB;IAhBa;AAsB/B,mDAAmB;AACjB,SAAI,KAAK,KAAL,CAAW,uBAAX,IAAsC,CAAC,KAAK,KAAL,CAAW,uBAAX,EAAoC;AAC7E,YAAK,kBAAL,CAAwB,IAAxB,EAD6E;MAA/E;IAvB6B;AA4B/B,iEAA2B,WAAW;;AAEpC,SAAI,KAAK,KAAL,CAAW,SAAX,EAAqB;AACvB,cADuB;MAAzB;;AAIA,SAAI,CAAC,KAAK,KAAL,CAAW,uBAAX,IAAsC,UAAU,uBAAV,EAAmC;AACzE,YAAK,kBAAL,CAAwB,IAAxB,EADyE;MAA9E,MAEO,IAAI,KAAK,KAAL,CAAW,uBAAX,IAAsC,CAAC,UAAU,uBAAV,EAAmC;AAChF,YAAK,kBAAL,CAAwB,KAAxB,EADgF;MAA9E;IApCsB;AAyC/B,6BAAU;AACR,YACE;;SAAK,WAAU,8BAAV,EAAyC,MAAK,QAAL,EAAc,eAAY,OAAZ,EAA5D;OAAiF,sCAAQ,cAAR;UAAjF;OACE;;WAAG,SAAS,KAAK,oBAAL,EAA2B,KAAI,YAAJ,EAAiB,WAAU,QAAV,EAAxD;SAA4E,sCAAQ,WAAR;QAD9E;;OACwG,KAAK,KAAL,CAAW,sBAAX,GAAoC,CAApC,GAAwC,sCAAQ,qBAAR,GAAgC,sCAAQ,WAAR;OAC9K;;;;QAFF;OAGE;;WAAG,SAAS,KAAK,QAAL,EAAe,KAAI,aAAJ,EAA3B;SAA8C,sCAAQ,YAAR;QAHhD;OAKM,KAAK,KAAL,CAAW,sBAAX,GAAoC,CAApC,GAAwC;;;SACtC;;;;UADsC;SAEtC;;aAAG,SAAS,KAAK,eAAL,EAAsB,KAAI,qBAAJ,EAAlC;WAA6D,sCAAQ,oBAAR;UAFvB;QAAxC,GAGU,iCAHV;MANR,CADQ;IAzCqB;AAyD/B,mDAAoB,OAAM;AACxB,OAAE,KAAF,CAAQ,YAAM;AACZ,gCAAc,QAAd,CAAuB,6BAAvB,EADY;AAEZ,gCAAc,QAAd,CAAuB,4BAAvB,EAAqD,EAAC,OAAO,KAAP,EAAtD,EAFY;MAAN,EAGL,qBAAU,yBAAV,CAHH,CADwB;IAzDK;AAgE/B,yDAAwB;AACtB,UAAK,WAAL,GADsB;AAEtB,kCAAiB,6BAAjB,GAFsB;IAhEO;AAqE/B,iCAAY;AACV,UAAK,WAAL,GADU;AAEV,kCAAiB,yBAAjB,GAFU;IArEmB;AA0E/B,+CAAmB;AACjB,UAAK,WAAL,GADiB;AAEjB,kCAAiB,gCAAjB,GAFiB;IA1EY;AA+E/B,uCAAe;AACb,UAAK,QAAL,CAAc;AACZ,kBAAW,IAAX;MADF,EADa;AAIb,8BAAc,QAAd,CAAuB,4BAAvB,EAAqD;AACnD,cAAO,KAAP;MADF,EAJa;IA/EgB;EAAlB;;;;;;;;;;;;mBCNA;AACb,oEADa;AAEb,8CAFa;AAGb,gCAHa;AAIb,6CAJa;AAKb,+BALa;AAMb,yDANa;;;;;;;;;;ACAf,KAAI,sBAAsB,oBAAQ,GAAR,CAAtB;;AAEJ,UAAS,yBAAT,CAAmC,CAAnC,EAAsC;AACpC,OAAI,SAAS,MAAC,CAAO,KAAP,GAAgB,EAAE,KAAF,GAAU,EAAE,OAAF,CADJ;AAEpC,OAAI,WAAW,EAAX,EAAe;AACjB,yBAAoB,gBAApB,GADiB;IAAnB;EAFF;;AAOA,UAAS,mBAAT,CAA6B,CAA7B,EAAgC;AAC9B,OAAI,UAAU,EAAE,EAAE,MAAF,CAAZ,CAD0B;AAE9B,OAAI,QAAQ,OAAR,CAAgB,4BAAhB,EAA8C,MAA9C,KAAyD,CAAzD,IAA8D,QAAQ,OAAR,CAAgB,oBAAhB,EAAsC,MAAtC,KAAiD,CAAjD,EAAoD;AACpH,yBAAoB,gBAApB,GADoH;IAAtH;EAFF;;AAOA,QAAO,OAAP,GAAiB;AACf,sBAAmB,6BAAW;AAC5B,YAAO,gBAAP,CAAwB,SAAxB,EAAmC,yBAAnC,EAD4B;AAE5B,YAAO,gBAAP,CAAwB,OAAxB,EAAiC,mBAAjC,EAF4B;IAAX;;AAKnB,yBAAsB,gCAAW;AAC/B,YAAO,mBAAP,CAA2B,SAA3B,EAAsC,yBAAtC,EAD+B;AAE/B,YAAO,mBAAP,CAA2B,OAA3B,EAAoC,mBAApC,EAF+B;IAAX;;AAKtB,eAAY,yBAAZ;EAXF,C;;;;;;;;;;;;;;;;AChBA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,sBAAb;;AAEA,sBAAmB,6BAAW;AAC5B,kCAAiB,EAAjB,CAAoB,QAApB,EAA8B,KAAK,SAAL,CAA9B,CAD4B;IAAX;;AAInB,yBAAsB,gCAAW;AAC/B,kCAAiB,GAAjB,CAAqB,QAArB,EAA+B,KAAK,SAAL,CAA/B,CAD+B;IAAX;;AAItB,oBAAiB,2BAAW;AAC1B,YAAO,6BAAiB,MAAjB,EAAP,CAD0B;IAAX;;AAIjB,cAAW,qBAAW;AACpB,UAAK,QAAL,CAAc,6BAAiB,MAAjB,EAAd,EADoB;IAAX;;AAIX,uBAAoB,8BAAW;AAC7B,SAAI,aAAa,KAAK,KAAL,CAAW,UAAX,IAAyB,EAAzB;SACb,YAAY,WAAW,SAAX,KAAyB,KAAzB,GAAiC,WAAW,SAAX,GAAuB,qBAAU,iCAAV,CAF3C;;AAI7B,YAAO,gDAAe,YAAY,KAAK,KAAL,CAAW,UAAX;AACZ,kBAAW,SAAX,EADf,CAAP,CAJ6B;IAAX;;AAQpB,eAAY,sBAAW;AACrB,SAAI,kBAAkB,6BAAiB,qBAAjB,EAAlB,CADiB;AAErB,SAAI,gBAAgB,KAAhB,CAFiB;;AAIrB,SAAI,eAAJ,EAAqB;AACnB,eAAQ,eAAR;AACE,cAAK,2BAAL;AACE,2BAAgB,yDAA6B,KAAK,KAAL,CAAW,UAAX,CAA7C,CADF;AAEE,iBAFF;;AADF,cAKO,iBAAL;AACE,2BAAgB,+CAAoB,KAAK,KAAL,CAAW,UAAX,CAApC,CADF;AAEE,iBAFF;;AALF,cASO,qBAAL;AACE,2BAAgB,kDAAsB,KAAK,KAAL,CAAW,UAAX,CAAtC,CADF;AAEE,iBAFF;;AATF,cAaO,qBAAL;AACE,2BAAgB,kDAAsB,KAAK,KAAL,CAAW,UAAX,CAAtC,CADF;AAEE,iBAFF;;AAbF,cAiBO,oBAAL;AACE,2BAAgB,6EAAsB,KAAK,KAAL,CAAW,UAAX,IAAuB,YAAY,KAAK,KAAL,CAAW,UAAX,GAAzD,CAAhB,CADF;AAEE,iBAFF;;AAjBF,cAqBO,qBAAL;AACE,2BAAgB,8EAAuB,KAAK,KAAL,CAAW,UAAX,IAAuB,YAAY,KAAK,KAAL,CAAW,UAAX,GAA1D,CAAhB,CADF;AAEE,iBAFF;;AArBF,cAyBO,oBAAL;AACE,2BAAgB,6EAAsB,KAAK,KAAL,CAAW,UAAX,IAAuB,YAAY,KAAK,KAAL,CAAW,UAAX,GAAzD,CAAhB,CADF;AAEE,iBAFF;;AAzBF,cA6BO,oBAAL;AACE,2BAAgB,6EAAsB,KAAK,KAAL,CAAW,UAAX,IAAuB,YAAY,KAAK,KAAL,CAAW,UAAX,GAAzD,CAAhB,CADF;AAEE,iBAFF;;AA7BF,cAiCO,oBAAL;AACE,2BAAgB,kDAAsB,KAAK,KAAL,CAAW,UAAX,CAAtC,CADF;AAEE,iBAFF;;AAjCF,cAqCO,qBAAL;AACE,2BAAgB,mDAAuB,KAAK,KAAL,CAAW,UAAX,CAAvC,CADF;AAEE,iBAFF;;AArCF,cAyCO,sBAAL;AACE,2BAAgB,mDAA8B,KAAK,KAAL,CAAW,UAAX,CAA9C,CADF;AAEE,iBAFF;;AAzCF,cA6CO,cAAL;AACE,2BAAgB,4CAAiB,KAAK,KAAL,CAAW,UAAX,CAAjC,CADF;AAEE,iBAFF;;AA7CF,cAiDO,yBAAL;AACE,2BAAgB,kFAA2B,KAAK,KAAL,CAAW,UAAX,IAAuB,YAAY,KAAK,KAAL,CAAW,UAAX,GAA9D,CAAhB,CADF;AAEE,iBAFF;;AAjDF,cAqDO,2BAAL;AACE,2BAAgB,yDAA6B,KAAK,KAAL,CAAW,UAAX,CAA7C,CADF;AAEE,iBAFF;;AArDF,cAyDO,sBAAL;AACE,2BAAgB,oDAAwB,KAAK,KAAL,CAAW,UAAX,CAAxC,CADF;AAEE,iBAFF;;AAzDF,cA6DO,uBAAL;AACE,2BAAgB,qDAAyB,KAAK,KAAL,CAAW,UAAX,CAAzC,CADF;AAEE,iBAFF;;AA7DF,cAiEO,oBAAL;AACE,2BAAgB,kDAAuB,KAAK,KAAL,CAAW,UAAX,CAAvC,CADF;AAEE,iBAFF;;AAjEF,cAqEO,kBAAL;AACE,2BAAgB,gDAAoB,KAAK,KAAL,CAAW,UAAX,CAApC,CADF;AAEE,iBAFF;;AArEF,cAyEO,gCAAL;AACE,2BAAgB,8DAAkC,KAAK,KAAL,CAAW,UAAX,CAAlD,CADF;AAEE,iBAFF;;AAzEF,cA6EO,qBAAL;AACE,2BAAgB,mDAAuB,KAAK,KAAL,CAAW,UAAX,CAAvC,CADF;AAEE,iBAFF;;AA7EF,cAiFO,uBAAL;AACE,2BAAgB,qDAAyB,KAAK,KAAL,CAAW,UAAX,CAAzC,CADF;AAEE,iBAFF;;AAjFF,cAqFO,qBAAL;AACE,2BAAgB,mDAAuB,KAAK,KAAL,CAAW,UAAX,CAAvC,CADF;AAEE,iBAFF;;AArFF,cAyFO,gBAAL;AACE,2BAAgB,8CAAmB,KAAK,KAAL,CAAW,UAAX,CAAnC,CADF;AAEE,iBAFF;;AAzFF,QADmB;MAArB;;AAiGA,YAAO,aAAP,CArGqB;IAAX;;AAwGZ,WAAQ,kBAAW;AACjB,SAAI,SAAS,KAAK,UAAL,EAAT;SACA,cADJ,CADiB;;AAKjB,SAAI,MAAJ,EAAY;AACV,wBAAiB,KAAK,kBAAL,EAAjB,CADU;MAAZ;;AAIA;;AAEE;;WAAK,KAAK,KAAK,KAAL,CAAW,YAAX,EAAV;SACG,MADH;SAEG,cAFH;QAFF;OATiB;IAAX;EApIK;;;;;;;;;;;;;;;;;;;;;AC1Bf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,gBAAb;;AAEA,mDAAoB;AAClB,iCAAiB,EAAjB,CAAoB,QAApB,EAA8B,KAAK,SAAL,CAA9B,CADkB;AAElB,mCAAY,EAAZ,CAAe,QAAf,EAAyB,KAAK,SAAL,CAAzB,CAFkB;AAGlB,cAAS,aAAT,CAAuB,MAAvB,EAA+B,gBAA/B,CAAgD,SAAhD,EAA2D,KAAK,UAAL,CAA3D,CAHkB;IAJW;AAU/B,yDAAuB;AACrB,iCAAiB,GAAjB,CAAqB,QAArB,EAA+B,KAAK,SAAL,CAA/B,CADqB;AAErB,mCAAY,GAAZ,CAAgB,QAAhB,EAA0B,KAAK,SAAL,CAA1B,CAFqB;AAGrB,cAAS,aAAT,CAAuB,MAAvB,EAA+B,mBAA/B,CAAmD,SAAnD,EAA8D,KAAK,UAAL,CAA9D,CAHqB;IAVQ;AAgB/B,mCAAY;AACV,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADU;AAEV,UAAK,QAAL,CAAc,EAAC,OAAO,IAAP,EAAf,EAFU;IAhBmB;AAqB/B,+CAAkB;AAChB,SAAI,YAAY,KAAK,SAAL,EAAZ;SACA,gBAAgB;AACd,eAAQ,EAAR;AACA,cAAO,KAAP;MAFF,CAFY;;AAOhB,YAAO,EAAE,KAAF,CAAQ,SAAR,EAAmB,aAAnB,CAAP,CAPgB;IArBa;AA+B/B,mCAAY;AACV,SAAI,QAAQ,EAAR;SACA,cAAc,4BAAiB,MAAjB,EAAd,CAFM;;AAIV,OAAE,MAAF,CAAS,KAAT,EAAgB,WAAhB,EAA6B;AAC3B,sBAAe,8BAAY,GAAZ,CAAgB,eAAhB,CAAf;AACA,uBAAgB,8BAAY,GAAZ,CAAgB,gBAAhB,CAAhB;AACA,qBAAc,8BAAY,GAAZ,CAAgB,cAAhB,CAAd;AACA,mBAAY,8BAAY,GAAZ,CAAgB,YAAhB,CAAZ;MAJF,EAJU;;AAWV,YAAO,KAAP,CAXU;IA/BmB;;;;;;;;;AAmD/B,qCAAa;AACX,YAAO,gBAAM,aAAN,CAAoB,SAApB,CAA8B,KAAK,KAAL,CAAW,cAAX,CAArC,CADW;IAnDkB;;;;;;;;AA4D/B,iCAAW;AACT,YAAO,gBAAM,aAAN,CAAoB,OAApB,CAA4B,KAAK,KAAL,CAAW,cAAX,CAAnC,CADS;IA5DoB;;;;;;;;AAqE/B,6BAAS;AACP,YAAO,gBAAM,aAAN,CAAoB,KAApB,CAA0B,KAAK,KAAL,CAAW,cAAX,CAAjC,CADO;IArEsB;;;;;;;;AA8E/B,mCAAY;AACV,YAAO,gBAAM,aAAN,CAAoB,QAApB,CAA6B,KAAK,KAAL,CAAW,cAAX,CAApC,CADU;IA9EmB;AAkF/B,iDAAmB;AACjB,SAAI,4BAA4B,KAAK,6BAAL,EAA5B,CADa;AAEjB,SAAI,sBAAsB,KAAK,uBAAL,EAAtB,CAFa;;AAIjB,YACE;;SAAiB,MAAM,yBAAQ,OAAR,EAAiB,KAAI,wBAAJ,EAAxC;OACE;;WAAM,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAhC;SACE,2DAAyB,IAAI,2BAAgB,sBAAhB;AAC3B,kBAAO,yBAAQ,sBAAR;AACP,kBAAM,OAAN;AACA,sBAAW,IAAX,EAHF,CADF;SAKE,2DAAyB,IAAI,2BAAgB,gBAAhB;AAC3B,kBAAO,yBAAQ,kBAAR,EADT,CALF;SAOG,mBAPH;SAQE,2DAAyB,IAAI,kCAAsB,oBAAtB;AAC3B,kBAAO,yBAAQ,oBAAR,EADT,CARF;SAUE,2DAAyB,IAAI,kCAAsB,sBAAtB;AAC3B,kBAAO,yBAAQ,sBAAR,EADT,CAVF;SAYE,2DAAyB,IAAI,kCAAsB,mBAAtB;AAC3B,kBAAO,yBAAQ,mBAAR,EADT,CAZF;SAcG,yBAdH;QADF;MADF,CAJiB;IAlFY;AA4G/B,2EAAgC;AAC9B,SAAI,gBAAgB,EAAhB,CAD0B;;AAG9B,SAAI,KAAK,UAAL,EAAJ,EAAuB;AACpB,qBAAc,IAAd,CAAmB,KAAK,yBAAL,EAAnB,EADoB;MAAvB;AAGA,SAAI,KAAK,SAAL,EAAJ,EAAsB;AACpB,qBAAc,IAAd,CAAmB,KAAK,wBAAL,EAAnB,EADoB;MAAtB;AAGA,SAAI,KAAK,MAAL,EAAJ,EAAmB;AACjB,qBAAc,IAAd,CAAmB,KAAK,qBAAL,EAAnB,EADiB;MAAnB;AAGA,YAAO,aAAP,CAZ8B;IA5GD;AA2H/B,+DAA0B;AACxB,SAAI,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,aAAX,EAA0B,0CAAhC,CAAJ,EAAiF;AAC/E,cAAO;AACL,aAAI,kCAAsB,8BAAtB;AACJ,gBAAO,yBAAQ,8BAAR,EAFF,CAAP,CAD+E;MAAjF;AAKA,YAAO,SAAP,CANwB;IA3HK;AAoI/B,mEAA4B;AAC1B,YAAO,CACL,2DAAyB,IAAI,kCAAsB,sBAAtB,EAA8C,OAAO,yBAAQ,qBAAR,EAAlF,CADK,CAAP,CAD0B;IApIG;AA0I/B,2DAAwB;AACtB,YAAO,CACL,2DAAyB,IAAI,kCAAsB,kBAAtB,EAA0C,OAAO,yBAAQ,kBAAR,EAA9E,CADK,CAAP,CADsB;IA1IO;AAgJ/B,iEAA2B;AACzB,YAAO,CACL;;;OACE;AACE,aAAI,2BAAgB,WAAhB;AACJ,gBAAO,yBAAQ,IAAR,EAFT,CADF;OAIE;AACE,aAAI,2BAAgB,YAAhB;AACJ,cAAK,2BAAgB,YAAhB;AACL,gBAAO,yBAAQ,OAAR;AACP,wBAAc,OAAd;AACA,eAAK,aAAL;AACA,uBAAc,KAAK,KAAL,CAAW,2BAAgB,YAAhB,CAAzB;AACA,gBAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,2BAAgB,YAAhB,CAAzB;AACA,eAAK,MAAL;AACA,mBAAU,KAAK,oBAAL;AACV,iBAAQ,KAAK,oBAAL,EAVV,CAJF;MADK,EAiBL,2DAAyB,IAAI,kCAAsB,cAAtB,EAAsC,OAAO,yBAAQ,cAAR,EAA1E,CAjBK,EAkBL,2DAAyB,IAAI,kCAAsB,kBAAtB,EAA0C,OAAO,yBAAQ,kBAAR,EAA9E,CAlBK,CAAP,CADyB;IAhJI;AAuK/B,uDAAsB;AACpB,SAAI,QAAQ,8BAAM,MAAM,yBAAQ,UAAR,EAAZ,CAAR,CADgB;AAEpB,SAAI,mBAAmB,IAAnB,CAFgB;;AAIpB,SAAI,8BAAY,GAAZ,CAAgB,eAAhB,EAAiC,sBAAjC,EAAyD;AAC3D,0BACE,wDAAsB,IAAI,kCAAsB,gBAAtB;AACxB,gBAAO,yBAAQ,gBAAR;AACP,kBAAS,4BAAiB,yBAAjB,EAAT,EAFF,CADF,CAD2D;MAA7D;;AAQA,SAAI,IAAC,CAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,aAAX,CAAyB,8BAAzB,IAA4D,GAAG,GAAH,KAAW,YAAX,IAA2B,KAAK,SAAL,EAApH,EAAsI;AACxI,eACE;;WAAiB,MAAM,yBAAQ,UAAR,EAAoB,KAAI,2BAAJ,EAA3C;SACE;;aAAM,WAAU,KAAV,EAAN;WACE,wDAAsB,IAAI,2BAAgB,KAAhB;AACxB,oBAAO,yBAAQ,KAAR;AACP,sBAAS,4BAAiB,eAAjB,EAAT,EAFF,CADF;WAIE,wDAAsB,IAAI,2BAAgB,OAAhB;AACxB,oBAAO,yBAAQ,OAAR;AACP,sBAAS,4BAAiB,iBAAjB,EAAT,EAFF,CAJF;WAOE,wDAAsB,IAAI,2BAAgB,SAAhB;AACxB,oBAAO,yBAAQ,SAAR;AACP,sBAAS,4BAAiB,kBAAjB,EAAT,EAFF,CAPF;WAUE,wDAAsB,IAAI,2BAAgB,YAAhB;AACxB,oBAAO,yBAAQ,YAAR;AACP,sBAAS,4BAAiB,qBAAjB,EAAT,EAFF,CAVF;WAaG,gBAbH;UADF;QADF,CADwI;MAA1I;;AAsBA,YAAO,KAAP,CAlCoB;IAvKS;AA4M/B,6DAAyB;AACvB,SAAI,gBAAgB,EAAE,GAAF,CAAM,KAAK,KAAL,EAAY,qCAAlB,EAAyD,KAAzD,CAAhB;SACA,6BAA6B,EAAE,GAAF,CAAM,KAAK,KAAL,EAAY,iDAAlB,EAAqE,KAArE,CAA7B;SACA,6BAA6B,KAAK,4BAAL,CAAkC,0BAAlC,CAA7B;SACA,+BAA+B,KAAK,8BAAL,EAA/B;SACA,eAAe,KAAK,eAAL,CAAqB,aAArB,CAAf;SACA,cALJ;SAMI,eANJ;SAOI,cAPJ,CADuB;;AAUvB,SAAI,0BAAJ,EAAgC;AAC9B,wBACE;AACE,aAAI,2BAAgB,kBAAhB;AACJ,gBAAO,yBAAQ,+BAAR,EAFT,CADF,CAD8B;MAAhC;;AAQA,SAAI,aAAJ,EAAmB;AACjB,wBACE;AACE,yBAAgB,KAAK,KAAL,CAAW,2BAAgB,yBAAhB,CAA3B;AACA,uBAAc,KAAK,KAAL,CAAW,2BAAgB,eAAhB,CAAzB,EAFF,CADF,CADiB;MAAnB,MAMO;AACL,yBACE;AACE,aAAI,2BAAgB,eAAhB;AACJ,gBAAO,yBAAQ,4BAAR,EAFT,CADF,CADK;MANP;;AAcA,YACE;;SAAiB,MAAM,yBAAQ,aAAR,EAAuB,KAAI,8BAAJ,EAA9C;OACE;;WAAM,WAAU,KAAV,EAAN;SACG,YADH;SAEG,cAFH;SAGG,4BAHH;SAIE;AACE,eAAI,2BAAgB,aAAhB;AACJ,kBAAO,yBAAQ,aAAR,EAFT,CAJF;SAOG,eAPH;QADF;OAUG,0BAVH;OAWG,cAXH;MADF,CAhCuB;IA5MM;AA6P/B,6CAAgB,eAAe;AAC7B,SAAI,YAAJ,CAD6B;AAE7B,SAAI,aAAJ,EAAmB;AACjB,sBACE;AACE,wBAAe,KAAK,KAAL,CAAW,2BAAgB,cAAhB,CAA1B;AACA,wBAAe,KAAK,KAAL,CAAW,2BAAgB,cAAhB,CAA1B;AACA,sBAAa,KAAK,KAAL,CAAW,2BAAgB,YAAhB,CAAxB,EAHF,CADF,CADiB;MAAnB,MAOO;AACL,sBACE;AACE,aAAI,2BAAgB,cAAhB;AACJ,gBAAO,yBAAQ,gBAAR,EAFT,CADF,CADK;MAPP;AAcA,YAAO,YAAP,CAhB6B;IA7PA;AAgR/B,uEAA6B,4BAA4B;AACvD,SAAI,0BAAJ,EAAgC;AAC9B,cAAO,mEAAP,CAD8B;MAAhC;;AAIA,YACE;;SAAM,WAAU,KAAV,EAAN;OACE;;;SAAK,yBAAQ,kBAAR;QADP;OAEE,2DAAyB,IAAI,2BAAgB,eAAhB;AAC3B,gBAAO,yBAAQ,eAAR,EADT,CAFF;OAIE,2DAAyB,IAAI,2BAAgB,uBAAhB;AAC3B,gBAAO,yBAAQ,uBAAR,EADT,CAJF;OAME,2DAAyB,IAAI,2BAAgB,cAAhB;AAC3B,gBAAO,yBAAQ,cAAR,EADT,CANF;OAQE,2DAAyB,IAAI,2BAAgB,kBAAhB;AAC3B,gBAAO,yBAAQ,cAAR,EADT,CARF;MADF,CALuD;IAhR1B;AAoS/B,6EAAiC;AAC/B,SAAI,KAAK,UAAL,EAAJ,EAAuB;AACrB,cAAO,CACL,2DAAyB,IAAI,kCAAsB,mBAAtB;AAC3B,gBAAO,yBAAQ,mBAAR,EADT,CADK,EAGL,2DAAyB,IAAI,kCAAsB,aAAtB;AAC3B,gBAAO,yBAAQ,aAAR,EADT,CAHK,CAAP,CADqB;MAAvB,MAOO,IAAI,KAAK,QAAL,EAAJ,EAAqB;AAC1B,cAAO,CACL,2DAAyB,IAAI,kCAAsB,mBAAtB;AAC3B,gBAAO,yBAAQ,mBAAR,EADT,CADK,CAAP,CAD0B;MAArB,MAKA,IAAI,KAAK,MAAL,EAAJ,EAAmB;AACxB,cAAO,CACL;AACE,qBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,qBAAY,KAAK,KAAL,CAAW,UAAX,EAFd,CADK,CAAP,CADwB;MAAnB;IAjTsB;AA0T/B,uDAAsB;AACpB,YACE;;SAAiB,MAAM,yBAAQ,UAAR,EAAoB,KAAI,2BAAJ,EAA3C;OACE;;;SAAI,yBAAQ,0BAAR,CAAmC,KAAK,KAAL,CAAW,YAAX,CAAvC;QADF;OACsE,+BADtE;OAEE;;;AACE,sBAAU,+BAAV;AACA,4BAAe,KAAK,KAAL,CAAW,UAAX;AACf,oBAAS,KAAK,qBAAL,EAHX;SAIG,yBAAQ,cAAR,CAAuB,KAAK,KAAL,CAAW,YAAX,CAJ1B;QAFF;MADF,CADoB;IA1TS;AAwU/B,uCAAc;AACZ,SAAI,eAAe,KAAK,gBAAL,EAAf;SACA,kBAAkB,KAAK,mBAAL,EAAlB;SACA,qBAAqB,KAAK,sBAAL,EAArB;SACA,kBAAkB,KAAK,mBAAL,EAAlB;SACA,kBAAkB,CAChB,YADgB,EAEhB,eAFgB,EAGhB,kBAHgB,CAAlB,CALQ;;AAWZ,SAAI,KAAK,UAAL,EAAJ,EAAuB;AACrB,uBAAgB,IAAhB,CAAqB,eAArB,EADqB;MAAvB;;AAIA,YACE;;;AACE,mBAAU,KAAK,oBAAL;AACV,qBAAY,KAAK,KAAL,CAAW,SAAX,EAFd;OAGG,eAHH;MADF,CAfY;IAxUiB;;;AAgW/B,uBAAoB,EAApB;;AAEA,uDAAqB,GAAG;AACtB,OAAE,eAAF,GADsB;AAEtB,UAAK,kBAAL,CAAwB,EAAE,MAAF,CAAS,EAAT,CAAxB,GAAuC,EAAE,MAAF,CAAS,KAAT,CAFjB;IAlWO;AAuW/B,mCAAW,GAAG;;;AACZ,SAAI,MAAM,OAAO,KAAP,GAAe,EAAE,KAAF,GAAU,EAAE,OAAF,CADvB;;AAGZ,SAAI,QAAQ,gBAAM,OAAN,CAAc,GAAd,EAAmB;AAC7B,SAAE,OAAF,CAAU,KAAK,kBAAL,EAAyB,UAAC,KAAD,EAAQ,EAAR,EAAe;AAChD,aAAI,SAAS;AACX,eAAI,EAAJ;AACA,kBAAO,KAAP;AACA,iBAAM,MAAN;UAHE,CAD4C;AAMhD,eAAK,oBAAL,CAA0B,EAAE,QAAQ,MAAR,EAA5B,EANgD;QAAf,CAAnC,CAD6B;MAA/B;IA1W6B;AAsX/B,2CAAe,QAAQ;AACrB,SAAI,OAAO,EAAP,CADiB;;AAGrB,aAAO,OAAO,IAAP;AACL,YAAK,OAAL;AACE,aAAI,UAAU,SAAS,aAAT,mBAAsC,OAAO,IAAP,gBAAtC,CAAV,CADN;AAEE,cAAK,OAAO,IAAP,CAAL,GAAoB,QAAQ,EAAR,CAFtB;AAGA,eAHA;AADF,YAKO,UAAL;AACE,aAAI,QAAS,OAAO,KAAP,KAAiB,MAAjB,CADf;AAEE,cAAK,OAAO,EAAP,CAAL,GAAkB,MAAC,CAAO,OAAP,GAAkB,KAAnB,GAA2B,CAAC,KAAD,CAF/C;AAGA,eAHA;AALF,YASO,MAAL;AACE,cAAK,OAAO,EAAP,CAAL,GAAkB,OAAO,KAAP,CADpB;AAEA,eAFA;AATF,MAHqB;;AAiBrB,YAAO,IAAP,CAjBqB;IAtXQ;AA0Y/B,uDAAqB,GAAG;AACtB,SAAI,SAAS,EAAE,MAAF;SACT,aAAa,KAAK,cAAL,CAAoB,MAApB,CAAb;SACA,gBAAgB,KAAK,SAAL,CAAe,MAAf,CAAhB,CAHkB;;AAKtB,SAAI,aAAJ,EAAmB;AACjB,qCAAmB,eAAnB,CAAmC,UAAnC,EADiB;AAEjB,qBAAI,oBAAJ,CAAyB,UAAzB,EAFiB;MAAnB;IA/Y6B;AAqZ/B,iCAAU,QAAQ;AAChB,SAAI,QAAQ,OAAO,KAAP,CADI;;AAGhB,SAAI,oBAAY,KAAK,KAAL,CAAW,MAAX,CAAZ,CAA+B,MAA/B,EAAuC;AACzC,YAAK,YAAL,GADyC;MAA3C;;AAIA,SAAI,OAAO,EAAP,KAAc,2BAAgB,YAAhB,EAA8B;AAC9C,WAAI,EAAC,CAAC,KAAD,EAAQ;AACX,cAAK,QAAL,CAAc;AACZ,qDACG,2BAAgB,YAAhB,EAA+B,yBAAQ,oBAAR,CADlC;UADF,EADW;AAMX,gBAAO,KAAP,CANW;QAAb,MAOO,IAAI,CAAC,KAAD,GAAS,CAAT,EAAY;AACrB,cAAK,QAAL,CAAc;AACZ,qDACG,2BAAgB,YAAhB,EAA+B,yBAAQ,oBAAR,CADlC;UADF,EADqB;AAMrB,gBAAO,KAAP,CANqB;QAAhB,MAOA,IAAI,CAAC,KAAD,GAAS,EAAT,EAAa;AACtB,cAAK,QAAL,CAAc;AACZ,qDACG,2BAAgB,YAAhB,EAA+B,yBAAQ,oBAAR,CADlC;UADF,EADsB;AAMtB,gBAAO,KAAP,CANsB;QAAjB;MAfT;;AAyBA,YAAO,IAAP,CAhCgB;IArZa;AAwb/B,yCAAe;AACb,UAAK,QAAL,CAAc;AACZ,eAAQ,EAAR;MADF,EADa;IAxbgB;AA8b/B,iCAAU,GAAG;AACX,OAAE,cAAF,GADW;IA9bkB;AAkc/B,2DAAwB;AACtB,SAAI,cAAI,0BAAJ,EAAgC;AAClC,qBAAI,0BAAJ,GADkC;MAApC;IAnc6B;AAwc/B,6BAAS;AACP,YACE;AACE,iBAAS,iBAAT;AACA,cAAO,yBAAQ,cAAR,CAAuB,KAAK,KAAL,CAAW,UAAX,CAA9B;AACA,mBAAY,KAAK,WAAL;AACZ,0BAJF,CADF,CADO;IAxcsB;EAAlB;;;;;;;;;;;;;;ACrBf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,aAAb;;AAEA,cAAW;AACT,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,EAA6B,QAA7B,CAAtB,CAAN;IADF;;AAIA,WAAQ,yCAAR;;AAEA,sBAAmB,6BAAW;AAC5B,cAAS,aAAT,CAAuB,MAAvB,EAA+B,gBAA/B,CAAgD,SAAhD,EAA2D,KAAK,UAAL,CAA3D,CAD4B;IAAX;;AAInB,yBAAsB,gCAAW;AAC/B,cAAS,aAAT,CAAuB,MAAvB,EAA+B,mBAA/B,CAAmD,SAAnD,EAA8D,KAAK,UAAL,CAA9D,CAD+B;IAAX;;AAItB,oBAAiB,2BAAW;AAC1B,YAAO;AACL,sBAAe,yBAAQ,KAAR;AACf,iBAAU,QAAV;AACA,mBAAY,EAAE,IAAF;AACZ,2BAAoB,EAAE,IAAF;AACpB,0BAAmB,EAAE,IAAF;AACnB,qBAAc,KAAd;AACA,gCAAyB,EAAzB;AACA,6BAAsB,EAAE,IAAF;AACtB,mBAAY,KAAZ;AACA,aAAM,QAAN;AACA,aAAM,EAAN;AACA,kBAAW,KAAX;AACA,mBAAY,IAAZ;MAbF,CAD0B;IAAX;;AAkBjB,cAAW,qBAAY;AACrB,SAAI,KAAJ,CADqB;AAErB,SAAI,KAAK,KAAL,CAAW,YAAX,EAAyB;AAC3B,eACE;;WAAI,WAAU,yBAAV,EAAJ;SACG,KAAK,KAAL,CAAW,KAAX;SACD;;aAAM,WAAU,iCAAV,EAAN;WAAmD,KAAK,KAAL,CAAW,YAAX;UAFrD;QADF,CAD2B;MAA7B,MAOO;AACL,eAAQ;;WAAI,WAAU,yBAAV,EAAJ;SAAyC,KAAK,KAAL,CAAW,KAAX;QAAjD,CADK;MAPP;AAUA,YAAO,KAAP,CAZqB;IAAZ;;AAeX,wBAAqB,+BAAW;AAC9B,SAAI,kBAAkB,KAAlB,CAD0B;AAE9B,SAAI,KAAK,KAAL,CAAW,YAAX,EAAyB;AAC3B,yBACE;;WAAK,WAAU,8BAAV,EAAL;SACE;;aAAM,WAAU,KAAV,EAAgB,QAAO,GAAP,EAAtB;WACE,+BAAO,WAAU,MAAV,EAAiB,MAAK,QAAL,EAAc,MAAK,QAAL;AAC/B,0BAAa,KAAK,KAAL,CAAW,uBAAX,EAAoC,UAAU,KAAK,KAAL,CAAW,oBAAX,EADlE,CADF;UADF;QADF,CAD2B;MAA7B;AAUA,YAAO,eAAP,CAZ8B;IAAX;;AAerB,aAAU,oBAAY;AACpB,SAAI,IAAJ,CADoB;AAEpB,SAAI,KAAK,KAAL,CAAW,MAAX,EAAmB;AACrB,cAAO,KAAP,CADqB;MAAvB,MAEO;AACL,cACE;;WAAK,WAAU,yBAAV,EAAL;SAA0C,KAAK,KAAL,CAAW,IAAX;QAD5C,CADK;MAFP;AAOA,YAAO,IAAP,CAToB;IAAZ;;AAYV,iBAAc,wBAAY;AACxB,SAAI,GAAJ,CADwB;AAExB,SAAI,KAAK,KAAL,CAAW,UAAX,EAAuB;AACzB,aAAM,KAAN,CADyB;MAA3B,MAEO;AACL,aACE;;WAAG,WAAU,0BAAV,EAAqC,SAAS,KAAK,aAAL,EAAjD;SACE;;aAAM,WAAU,mDAAV,EAAN;WAAqE,yBAAQ,KAAR;UADvE;QADF,CADK;MAFP;AASA,YAAO,GAAP,CAXwB;IAAZ;;AAcd,kBAAe,yBAAY;AACzB,SAAI,IAAJ,CADyB;AAEzB,SAAI,KAAK,KAAL,CAAW,WAAX,EAAwB;AAC1B,cAAO,KAAP,CAD0B;MAA5B,MAEO;AACL,cACE;;WAAQ,WAAU,4BAAV,EAAuC,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,SAAS,KAAK,aAAL,EAA9F;SACG,KAAK,KAAL,CAAW,aAAX;QAFL,CADK;MAFP;AASA,YAAO,IAAP,CAXyB;IAAZ;;AAcf,iDAAmB;AACjB,SAAI,QAAQ,EAAR,CADa;AAEjB,SAAI,KAAK,KAAL,CAAW,WAAX,EAAwB;AAC1B,eAAQ;AACN,gBAAO,KAAK,KAAL,CAAW,WAAX;QADT,CAD0B;MAA5B;AAKA,YAAO,KAAP,CAPiB;IA1GY;AAoH/B,6DAAyB;AACvB,SAAI,QAAQ,EAAR,CADmB;AAEvB,SAAI,KAAK,KAAL,CAAW,YAAX,EAAyB;AAC3B,eAAQ;AACN,iBAAQ,KAAK,KAAL,CAAW,YAAX;QADV,CAD2B;MAA7B;AAKA,YAAO,KAAP,CAPuB;IApHM;;;AA8H/B,UAAO,iBAAW;AAChB,8BAAc,WAAd,GADgB;IAAX;;AAIP,eAAY,oBAAU,CAAV,EAAa;AACvB,SAAI,MAAM,MAAC,CAAO,KAAP,GAAgB,EAAE,KAAF,GAAU,EAAE,OAAF,CADd;AAEvB,SAAI,QAAQ,gBAAM,OAAN,CAAc,GAAd,IAAqB,CAAC,KAAK,KAAL,CAAW,UAAX,EAAuB;AACvD,YAAK,KAAL,GADuD;MAAzD;IAFU;;AAOZ,kBAAe,yBAAY;AACzB,SAAI,CAAC,KAAK,KAAL,CAAW,UAAX,EAAuB;AAC1B,YAAK,KAAL,GAD0B;MAA5B;IADa;;AAMf,eAAY,sBAAW;AACrB,SAAI,YAAY,KAAK,aAAL,EAAZ;SACA,OAAO,KAAK,QAAL,EAAP,CAFiB;;AAIrB,YACE;;SAAQ,WAAU,oBAAV,EAAR;OACE;;WAAK,WAAU,4BAAV,EAAL;SACE;;aAAK,WAAU,uBAAV,EAAL;WACE,yCAAS,MAAM,KAAK,KAAL,CAAW,UAAX,EAAuB,MAAK,OAAL,EAAa,OAAO,qBAAU,cAAV,CAAyB,OAAzB,CAAP,EAAnD,CADF;UADF;SAIG,KAAK,KAAL,CAAW,kBAAX,EAJH;SAKG,KAAK,KAAL,CAAW,iBAAX,EALH;SAMG,SANH;QADF;OASG,IATH;MADF,CAJqB;IAAX;;AAmBZ,WAAQ,kBAAW;AACjB,SAAI,WAAW,KAAK,YAAL,EAAX;SACA,SAAS,KAAK,KAAL,CAAW,UAAX,GAAwB,KAAK,UAAL,EAAxB,GAA4C,IAA5C;SACT,QAAQ,KAAK,SAAL,EAAR;SACA,kBAAkB,KAAK,mBAAL,EAAlB,CAJa;;AAMjB,SAAI,UAAU,0BAAG;AACf,oBAAa,IAAb;AACA,sBAAe,IAAf;AACA,8BAAuB,KAAK,KAAL,CAAW,SAAX;MAHX,mBAII,KAAK,KAAL,CAAW,IAAX,CAJd,CANa;;AAYjB,YACE;;SAAS,MAAK,QAAL,EAAc,IAAI,KAAK,KAAL,CAAW,QAAX,EAAqB,WAAW,OAAX,EAAoB,OAAO,KAAK,gBAAL,EAAP;AAClE,wBAAa,CAAC,KAAK,KAAL,CAAW,aAAX,EADhB;OAEE;;WAAQ,WAAU,oBAAV,EAAR;SACG,KADH;SAEG,eAFH;SAGG,QAHH;QAFF;OAOE;;WAAK,WAAU,uCAAV,EAAkD,OAAO,KAAK,sBAAL,EAAP,EAAvD;SACG,KAAK,KAAL,CAAW,UAAX,EADH;QAPF;OAUG,MAVH;MADF,CAZiB;IAAX;EAlKK;;;;;;;;;;;;;ACRf;;;;;;mBAEe;;AAEb,oBAAiB,2BAAW;AAC1B,YAAO,6BAAiB,MAAjB,EAAP,CAD0B;IAAX;;AAIjB,cAAW,qBAAW;AACpB,SAAI,KAAK,SAAL,EAAJ,EAAsB;AACpB,YAAK,QAAL,CAAc,6BAAiB,MAAjB,EAAd,EADoB;MAAtB;IADS;;AAMX,uBAAoB,8BAAW;AAC7B,kCAAiB,EAAjB,CAAoB,QAApB,EAA8B,KAAK,SAAL,CAA9B,CAD6B;IAAX;;AAIpB,yBAAsB,gCAAW;AAC/B,kCAAiB,GAAjB,CAAqB,QAArB,EAA+B,KAAK,SAAL,CAA/B,CAD+B;IAAX;;;;;;;;;;;;;;;;;;;AClBxB;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,UAAb;;AAEA,cAAW;AACT,eAAU,kBAAC,KAAD,EAAQ,QAAR,EAAqB;AAC7B,WAAI,MAAM,QAAN,EAAgB,MAAhB,GAAyB,CAAzB,EAA4B;AAC9B,gBAAO,IAAI,KAAJ,CAAU,kEAAV,CAAP,CAD8B;QAAhC;AAGA,WAAI,CAAC,EAAE,KAAF,CAAQ,MAAM,QAAN,CAAR,EAAyB,UAAC,KAAD;gBAAW,MAAM,KAAN,CAAY,IAAZ;QAAX,CAA1B,EAAwD;AAC1D,gBAAO,IAAI,KAAJ,CAAU,4DAAV,CAAP,CAD0D;QAA5D;MAJQ;IADZ;;AAWA,+BAAS,GAAG;AACV,SAAI,OAAO,EAAE,MAAF,CAAS,YAAT,CAAsB,MAAtB,CAAP,CADM;AAEV,SAAI,KAAK,KAAL,CAAW,SAAX,KAAyB,IAAzB,EAA+B;;AAEjC,YAAK,wBAAL,CAA8B,IAA9B,EAFiC;MAAnC;AAIA,UAAK,QAAL,CAAc;AACZ,kBAAW,IAAX;MADF,EANU;IAfmB;AA0B/B,+CAAkB;AAChB,SAAI,YAAY,EAAC,WAAW,KAAK,KAAL,CAAW,QAAX,CAAoB,CAApB,EAAuB,KAAvB,CAA6B,IAA7B,EAAxB,CADY;;AAGhB,SAAI,KAAK,KAAL,CAAW,UAAX,IAAyB,EAAE,IAAF,CAAO,KAAK,KAAL,CAAW,QAAX,EAAqB,EAAC,OAAO,EAAC,MAAM,KAAK,KAAL,CAAW,UAAX,EAAd,EAA7B,CAAzB,EAA8F;AAChG,mBAAY,EAAC,WAAW,KAAK,KAAL,CAAW,UAAX,EAAxB,CADgG;MAAlG;;AAIA,YAAO,SAAP,CAPgB;IA1Ba;AAoC/B,+DAAyB,MAAM;AAC7B,aAAQ,IAAR;AACE,YAAK,yBAAQ,OAAR;AACH,qCAAiB,4BAAjB,GADF;AAEE,eAFF;AADF,YAIO,yBAAQ,aAAR;AACH,qCAAiB,kCAAjB,GADF;AAEE,eAFF;AAJF,YAOO,yBAAQ,UAAR;AACH,qCAAiB,+BAAjB,GADF;AAEE,eAFF;AAPF,MAD6B;IApCA;AAkD/B,6BAAS;;;AACP,SAAI,YAAY,MAAM,QAAN,CAAe,GAAf,CAAmB,KAAK,KAAL,CAAW,QAAX,EAAqB,UAAC,KAAD,EAAW;AACjE,WAAI,MAAM,IAAN,CAAW,WAAX,KAA2B,iBAA3B,EAA8C;;AAEhD,aAAI,UAAU,0BAAG;AACf,+BAAoB,MAAK,KAAL,CAAW,SAAX,KAAyB,MAAM,KAAN,CAAY,IAAZ;UADjC,CAAV,CAF4C;;AAMhD,gBACE;;aAAI,MAAK,KAAL,EAAW,WAAW,OAAX,EAAoB,UAAU,MAAK,KAAL,CAAW,SAAX,KAAyB,MAAM,KAAN,CAAY,IAAZ,EAAkB,KAAK,EAAE,QAAF,EAAL,EAAxF;WACE;;eAAG,SAAS,MAAK,QAAL;AACJ,qBAAM,MAAM,KAAN,CAAY,IAAZ,EADd;aACiC,MAAM,KAAN,CAAY,IAAZ;YAFnC;UADF,CANgD;QAAlD;MADsD,CAApD,CADG;AAgBP,SAAI,YAAY,MAAM,QAAN,CAAe,GAAf,CAAmB,KAAK,KAAL,CAAW,QAAX,EAAqB,UAAC,KAAD,EAAW;AACjE,WAAI,MAAM,IAAN,CAAW,WAAX,KAA2B,iBAA3B,EAA8C;AAChD,gBACE;;aAAiB,MAAM,MAAM,KAAN,CAAY,IAAZ,EAAkB,UAAU,MAAK,KAAL,CAAW,SAAX,KAAyB,MAAM,KAAN,CAAY,IAAZ;AAC3D,kBAAK,EAAE,QAAF,EAAL,EAAmB,cAAc,MAAM,KAAN,CAAY,YAAZ,EADlD;WAC6E,MAAM,KAAN,CAAY,QAAZ;UAF/E,CADgD;QAAlD;MADsD,CAApD,CAhBG;;AAyBP,YACE;;kCAAS,KAAK,KAAL,IAAY,WAAU,wBAAV,GAArB;OACE;;WAAK,WAAU,6CAAV,EAAL;SACE;;aAAI,WAAU,SAAV,EAAoB,2BAAxB;WACG,SADH;UADF;QADF;OAME;;WAAK,WAAU,UAAV,EAAL;SACG,SADH;QANF;MADF,CAzBO;IAlDsB;EAAlB;;;;;;;;;ACLf,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,iBAAb;;AAEA,cAAW,qBAAY;AACrB,SAAI,KAAJ,CADqB;AAErB,SAAI,KAAK,KAAL,CAAW,YAAX,EAAyB;AAC3B,eACE;;;SACG,KAAK,KAAL,CAAW,IAAX;SACD;;aAAM,WAAU,iCAAV,EAAN;WAAmD,KAAK,KAAL,CAAW,YAAX;UAFrD;QADF,CAD2B;MAA7B,MAOO;AACL,eAAQ;;;SAAK,KAAK,KAAL,CAAW,IAAX;QAAb,CADK;MAPP;AAUA,YAAO,KAAP,CAZqB;IAAZ;;AAeX,WAAQ,kBAAW;AACjB,SAAI,QAAQ,KAAK,SAAL,EAAR,CADa;;AAGjB,YACE;;SAAK,WAAU,mBAAV,EAA8B,eAAa,CAAC,KAAK,KAAL,CAAW,QAAX,EAAqB,kBAAgB,KAAK,KAAL,CAAW,KAAX,EAAtF;OACG,KADH;OAEG,KAAK,KAAL,CAAW,QAAX;MAHL,CAHiB;IAAX;EAnBO,CAAjB,C;;;;;;;;;;;;;;ACAA,KAAI,mBAAmB,oBAAQ,GAAR,CAAnB;AACJ,KAAI,mBAAmB,oBAAQ,GAAR,CAAnB;AACJ,KAAI,kBAAkB,oBAAQ,GAAR,CAAlB;AACJ,KAAI,wBAAwB,oBAAQ,GAAR,CAAxB;AACJ,KAAI,mBAAmB,oBAAQ,GAAR,CAAnB;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,yBAAb;;AAEA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,kBAAW,KAAX;MADF,CAD0B;IAAX;;AAMjB,sBAAmB,6BAAW;AAC5B,SAAI,YAAY,iBAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAAjC,CADwB;;AAG5B,SAAI,KAAK,KAAL,CAAW,SAAX,EAAsB;AACxB,mBAAY,CAAC,SAAD,CADY;MAA1B;;AAIA,YAAO,SAAP,CAP4B;IAAX;;AAUnB,qBAAkB,4BAAY;AAC5B,aAAQ,KAAK,KAAL,CAAW,EAAX;AACN,YAAK,sBAAsB,oBAAtB;AACH,cAAK,kBAAL,GADF;AAEE,eAFF;AADF,YAIO,gBAAgB,uBAAhB;AACH,cAAK,qCAAL,GADF;AAEE,eAFF;AAJF,YAOO,gBAAgB,eAAhB;AACH,cAAK,kCAAL,GADF;AAEE,eAFF;AAPF,MAD4B;IAAZ;;AAclB,uBAAoB,8BAAY;AAC9B,SAAI,UAAU,iBAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAA/B;SACA,UAAU,CAAC,OAAD,CAFgB;AAG9B,sBAAiB,eAAjB,CAAiC,OAAjC,EAA0C,OAA1C,EAH8B;IAAZ;;AAMpB,0CAAuC,iDAAY;AACjD,SAAI,UAAU,iBAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAA/B;SACA,UAAU,CAAC,OAAD,CAFmC;AAGjD,sBAAiB,8BAAjB,CAAgD,OAAhD,EAAyD,OAAzD,EAHiD;IAAZ;;AAMvC,uCAAoC,8CAAY;AAC9C,SAAI,UAAU,iBAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAA/B;SACA,UAAU,CAAC,OAAD,CAFgC;AAG9C,sBAAiB,2BAAjB,CAA6C,OAA7C,EAAsD,OAAtD,EAH8C;IAAZ;;AAMpC,WAAQ,kBAAW;AACjB,YACE,oBAAC,gBAAD,6BAAsB,KAAK,KAAL,IAAY,UAAU,KAAK,gBAAL,EAAuB,gBAAgB,KAAK,iBAAL,EAAhB,GAAnE,CADF,CADiB;IAAX;EApDO,CAAjB,C;;;;;;;;;;;;;;ACNA,KAAI,cAAc,oBAAQ,GAAR,CAAd;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,WAAQ,kBAAW;AACjB,YACE;;SAAK,WAAU,UAAV,EAAL;OACE,oBAAC,WAAD,2BAAa,KAAK,EAAE,QAAF,EAAL,IAAuB,KAAK,KAAL,CAApC,CADF;OAEE;;WAAO,SAAS,KAAK,KAAL,CAAW,EAAX,EAAe,KAAK,EAAE,QAAF,EAAL,EAA/B;SAAmD,KAAK,KAAL,CAAW,KAAX;QAFrD;MADF,CADiB;IAAX;EAJO,CAAjB,C;;;;;;;;;;;;;;;;;;mBCFe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,aAAb;;AAEA,cAAW;AACT,qBAAgB,MAAM,SAAN,CAAgB,IAAhB;AAChB,eAAU,MAAM,SAAN,CAAgB,IAAhB;IAFZ;;AAKA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,cAAO,IAAP;AACA,uBAAgB,KAAhB;AACA,iBAAU,oBAAM,EAAN;MAHZ,CAD0B;IAAX;;AAQjB,WAAQ,kBAAW;AACjB,SAAI,QAAQ,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAhB,CADa;AAEb,WAAM,IAAN,GAAa,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX,CAFnB;AAGjB,YACE,sDAAO,MAAK,UAAL,EAAgB,WAAU,UAAV,IAAyB,MAAhD,CADF,CAHiB;IAAX;EAjBK;;;;;;;;;ACAf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,sBAAb;;AAEA,cAAW;AACT,cAAS,MAAM,SAAN,CAAgB,KAAhB;AACT,YAAO,MAAM,SAAN,CAAgB,MAAhB;IAFT;;AAKA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,gBAAS,EAAT;MADF,CAD0B;IAAX;;AAMjB,sBAAmB,2BAAS,GAAT,EAAc;AAC/B,YAAO,QAAQ,4BAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAA7B,CADwB;IAAd;;AAInB,qBAAkB,0BAAU,MAAV,EAAkB;AAClC,aAAQ,KAAK,KAAL,CAAW,EAAX;AACN,YAAK,2BAAgB,KAAhB;AACH,cAAK,mBAAL,CAAyB,MAAzB,EADF;AAEE,eAFF;AADF,YAIO,2BAAgB,OAAhB;AACH,cAAK,qBAAL,CAA2B,MAA3B,EADF;AAEE,eAFF;AAJF,YAOO,2BAAgB,SAAhB;AACH,cAAK,sBAAL,CAA4B,MAA5B,EADF;AAEE,eAFF;AAPF,YAUO,2BAAgB,YAAhB;AACH,cAAK,yBAAL,CAA+B,MAA/B,EADF;AAEE,eAFF;AAVF,YAaO,kCAAsB,gBAAtB;AACH,cAAK,6BAAL,CAAmC,MAAnC,EADF;AAEE,eAFF;AAbF,MADkC;IAAlB;;AAoBlB,oBAAiB,2BAAY;AAC3B,YAAO,4BAAiB,GAAjB,CAAqB,KAAK,KAAL,CAAW,EAAX,CAA5B,CAD2B;IAAZ;;AAIjB,wBAAqB,6BAAU,MAAV,EAAkB;AACrC,SAAI,mBAAmB,KAAK,eAAL,EAAnB,CADiC;AAErC,SAAI,WAAW,OAAX,IAAsB,WAAW,gBAAX,EAA6B;AACrD,mCAAiB,kBAAjB,GADqD;MAAvD,MAEO,IAAI,WAAW,MAAX,IAAqB,WAAW,gBAAX,EAA6B;AAC3D,mCAAiB,iBAAjB,GAD2D;MAAtD;IAJY;;AASrB,0BAAuB,+BAAU,MAAV,EAAkB;AACvC,SAAI,mBAAmB,KAAK,eAAL,EAAnB,CADmC;AAEvC,SAAI,WAAW,QAAX,IAAuB,WAAW,gBAAX,EAA6B;AACtD,mCAAiB,yBAAjB,GADsD;MAAxD,MAEO,IAAI,WAAW,SAAX,IAAwB,WAAW,gBAAX,EAA6B;AAC9D,mCAAiB,0BAAjB,GAD8D;MAAzD;IAJc;;AASvB,2BAAwB,gCAAU,MAAV,EAAkB;AACxC,SAAI,mBAAmB,KAAK,eAAL,EAAnB,CADoC;AAExC,SAAI,WAAW,SAAX,IAAwB,WAAW,gBAAX,EAA6B;AACvD,mCAAiB,uBAAjB,GADuD;MAAzD,MAEO,IAAI,WAAW,cAAX,IAA6B,WAAW,gBAAX,EAA6B;AACnE,mCAAiB,2BAAjB,GADmE;MAA9D;IAJe;;AASxB,8BAA2B,mCAAU,MAAV,EAAkB;AAC3C,SAAI,mBAAmB,KAAK,eAAL,EAAnB,CADuC;AAE3C,SAAI,WAAW,OAAX,IAAsB,WAAW,gBAAX,EAA6B;AACrD,mCAAiB,4BAAjB,GADqD;MAAvD,MAEO,IAAI,WAAW,UAAX,IAAyB,WAAW,gBAAX,EAA6B;AAC/D,mCAAiB,+BAAjB,GAD+D;MAA1D;IAJkB;;AAS3B,kCAA+B,uCAAU,MAAV,EAAkB;AAC/C,SAAI,mBAAmB,KAAK,eAAL,EAAnB,CAD2C;AAE/C,SAAI,WAAW,UAAX,IAAyB,WAAW,gBAAX,EAA6B;AACxD,mCAAiB,uBAAjB,GADwD;MAA1D,MAEO,IAAI,WAAW,QAAX,IAAuB,WAAW,gBAAX,EAA6B;AAC7D,mCAAiB,qBAAjB,GAD6D;MAAxD;IAJsB;;AAS/B,WAAQ,kBAAY;;;AAClB,YACE;;SAAU,WAAU,OAAV,EAAV;OACE;;;SACE;;;WAAO,KAAK,KAAL,CAAW,KAAX;UADT;QADF;OAKI,KAAK,KAAL,CAAW,OAAX,CAAmB,GAAnB,CAAuB,UAAC,MAAD,EAAY;AAC/B,aAAI,iBAAe,MAAK,KAAL,CAAW,EAAX,SAAiB,MAAhC,CAD2B;AAE/B,gBAAO;AACL,gBAAK,MAAL;AACA,eAAI,MAAJ;AACA,gBAAK,GAAL;AACA,kBAAO,yBAAQ,MAAR,CAAP;AACA,iBAAM,MAAK,KAAL,CAAW,EAAX;AACN,2BAAgB,MAAK,iBAAL,CAAuB,MAAvB,CAAhB;AACA,qBAAU,MAAK,gBAAL,CAAsB,IAAtB,QAAiC,MAAjC,CAAV,EAPK,CAAP,CAF+B;QAAZ,CAL3B;MADF,CADkB;IAAZ;EAxFO,CAAjB,C;;;;;;;;ACPA,KAAI,WAAW,oBAAQ,GAAR,CAAX;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,UAAb;;AAEA,oBAAiB,2BAAW;AAC1B,SAAI,OAAO,KAAP,CADsB;AAE1B,SAAI,KAAK,KAAL,CAAW,WAAX,EAAwB;AAC1B,WAAI,KAAK,KAAL,CAAW,mBAAX,IAAkC,KAAK,KAAL,CAAW,uBAAX,EAAoC;AACxE,gBACE;;aAAK,WAAU,aAAV,EAAL;WACE;;eAAG,SAAS,KAAK,KAAL,CAAW,uBAAX,CAAmC,IAAnC,CAAwC,IAAxC,CAAT,EAAH;aAA4D,KAAK,KAAL,CAAW,WAAX;YAD9D;UADF,CADwE;QAA1E,MAMO;AACL,gBACE;;aAAK,WAAU,aAAV,EAAL;WAA8B,KAAK,KAAL,CAAW,WAAX;UADhC,CADK;QANP;MADF;AAaA,YAAO,IAAP,CAf0B;IAAX;;AAkBjB,aAAU,oBAAW;AACnB,SAAI,KAAK,KAAL,CAAW,IAAX,EAAiB;AACnB,WAAI,kDAAgD,KAAK,KAAL,CAAW,IAAX,CADjC;AAEnB,cACE;;WAAM,WAAW,SAAX,EAAN;SAA6B,KAAK,KAAL,CAAW,IAAX;QAD/B,CAFmB;MAArB;IADQ;;AAWV,WAAQ,kBAAW;AACjB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX,CADb;AAEjB,SAAI,cAAc,KAAK,eAAL,EAAd,CAFa;AAGjB,SAAI,aAAa,KAAK,KAAL,CAAW,SAAX,IAAwB,EAAxB,CAHA;AAIjB,SAAI,OAAO,KAAK,QAAL,EAAP,CAJa;;AAMjB,YACE;;SAAK,sBAAoB,UAApB,EAAL;OACE,oBAAC,QAAD,IAAU,MAAK,OAAL;AACA,cAAI,OAAJ;AACA,aAAI,KAAK,KAAL,CAAW,EAAX;AACJ,eAAM,IAAN;AACA,gBAAO,KAAK,KAAL,CAAW,KAAX;AACP,kBAAS,KAAK,KAAL,CAAW,OAAX;AACT,yBAAgB,KAAK,KAAL,CAAW,cAAX;AAChB,mBAAU,KAAK,KAAL,CAAW,QAAX,EAPpB,CADF;OASE;;WAAO,SAAS,KAAK,KAAL,CAAW,EAAX,EAAhB;SACG,IADH;SAEG,KAAK,KAAL,CAAW,KAAX;QAXL;OAaG,WAbH;MADF,CANiB;IAAX;EAjCO,CAAjB,C;;;;;;;;;;;;;;ACFA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,UAAb;;AAEA,cAAW;AACT,eAAU,MAAM,SAAN,CAAgB,IAAhB;AACV,cAAS,MAAM,SAAN,CAAgB,IAAhB;AACT,aAAQ,MAAM,SAAN,CAAgB,IAAhB;IAHV;;AAMA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,aAAM,MAAN;AACA,iBAAU,oBAAM,EAAN;AACV,gBAAS,mBAAM,EAAN;AACT,eAAQ,kBAAM,EAAN;MAJV,CAD0B;IAAX;;AASjB,UAAO,iBAAW;AAChB,cAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,KAAV,CAArB,CAAsC,KAAtC,GADgB;IAAX;;AAIP,WAAQ,kBAAW;;AAEjB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX,CAFb;AAGjB,SAAI,UAAU,IAAC,CAAK,KAAL,CAAW,IAAX,GAAmB,KAAK,KAAL,CAAW,IAAX,GAAkB,GAAlB,GAAwB,KAAK,KAAL,CAAW,IAAX,GAAkB,KAAK,KAAL,CAAW,IAAX,CAH3D;;AAKjB,YACE,wDAAW,KAAK,KAAL,IAAY,KAAI,OAAJ,EAAY,WAAW,OAAX,EAAoB,MAAM,IAAN,GAAvD,CADF,CALiB;IAAX;;EAvBO,CAAjB,C;;;;;;;;ACAA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,yBAAb;;AAEA,gBAAa,uBAAW;AACtB,YAAO;AACL,kBAAW,EAAX;MADF,CADsB;IAAX;;AAMb,WAAQ,kBAAW;AACjB,YACE;;SAAK,mCAAiC,KAAK,KAAL,CAAW,SAAX,EAAtC;OACG,KAAK,KAAL,CAAW,QAAX;MAFL,CADiB;IAAX;;EAVO,CAAjB,C;;;;;;;;;;;;;;ACAA,KAAI,oBAAoB,oBAAQ,GAAR,CAApB;KACA,WAAW,oBAAQ,GAAR,CAAX;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,oBAAb;;AAEA,UAAO,iBAAW;AAChB,UAAK,IAAL,CAAU,KAAV,CAAgB,KAAhB,GADgB;IAAX;;AAIP,WAAQ,kBAAW;AACjB,YACE;AAAC,wBAAD;OAAuB,KAAK,KAAL;OACrB,oBAAC,QAAD,2BAAU,KAAI,OAAJ,IAAgB,KAAK,KAAL,CAA1B,CADF;MADF,CADiB;IAAX;;EARO,CAAjB,C;;;;;;;;ACHA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,mBAAb;;AAEA,oBAAiB,2BAAY;AAC3B,SAAI,KAAK,KAAL,CAAW,WAAX,EAAwB;AAC1B,cACE;;WAAK,WAAU,aAAV,EAAL;SAA8B,KAAK,KAAL,CAAW,WAAX;QADhC,CAD0B;MAA5B;IADe;;AAQjB,qBAAkB,4BAAY;AAC5B,SAAI,KAAK,KAAL,CAAW,QAAX,EAAqB;AACvB,cACE;;WAAM,WAAU,wBAAV,EAAN;;QADF,CADuB;MAAzB;IADgB;;AAQlB,aAAU,oBAAW;AACnB,SAAI,KAAK,KAAL,CAAW,KAAX,EAAkB;AACpB,cACE;;WAAK,WAAU,OAAV,EAAL;SAAwB,KAAK,KAAL,CAAW,KAAX;QAD1B,CADoB;MAAtB;IADQ;;AAQV,WAAQ,kBAAW;AACjB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX,CADb;AAEjB,SAAI,cAAc,KAAK,eAAL,EAAd,CAFa;AAGjB,SAAI,eAAe,KAAK,gBAAL,EAAf,CAHa;AAIjB,SAAI,QAAQ,KAAK,QAAL,EAAR,CAJa;AAKjB,SAAI,UAAU,aAAV,CALa;;AAOjB,SAAI,KAAK,KAAL,CAAW,aAAX,EAA0B;AAC5B,kBAAW,qBAAqB,KAAK,KAAL,CAAW,aAAX,CADJ;MAA9B;;AAIA,YACE;;SAAK,WAAW,OAAX,EAAL;OACE;;WAAO,SAAS,IAAT,EAAP;SACG,KAAK,KAAL,CAAW,KAAX;SACA,YAFH;QADF;OAKG,KAAK,KAAL,CAAW,QAAX;OACA,WANH;OAOG,KAPH;MADF,CAXiB;IAAX;;EA5BO,CAAjB,C;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;AAC/B,gBAAa,wBAAb;;AAEA,WAAQ,CAAC,MAAM,MAAN,CAAa,eAAb,CAAT;;AAEA,cAAW;AACT,iBAAY,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACZ,iBAAY,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;IAFd;;AAKA,mDAAoB;AAClB,SAAI,CAAJ,CAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CACG,UADH,CACc;AACV,gCAAyB,QAAzB;MAFJ,EAIG,EAJH,CAIM,wBAJN,EAIgC,KAAK,mBAAL,CAJhC,CADkB;IAVW;AAkB/B,yDAAuB;AACrB,SAAI,CAAJ,CAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CAA0B,GAA1B,CAA8B,kBAA9B,EAAkD,UAAlD,CAA6D,SAA7D,EADqB;AAErB,SAAI,CAAJ,CAAM,oBAAN,EAA4B,MAA5B,GAFqB;AAGrB,SAAI,CAAJ,CAAM,gBAAN,EAAwB,MAAxB,GAHqB;IAlBQ;AAwB/B,qDAAoB,GAAG;AACrB,SAAI,OAAO;AACT,mBAAY,EAAE,MAAF,CAAS,OAAT;MADV;;;;AADiB,SAOjB,CAAC,KAAK,UAAL,EAAiB;AACpB,YAAK,UAAL,GAAkB,IAAlB,CADoB;MAAtB;;AAIA,OAAE,eAAF,GAXqB;;AAarB,mCAAmB,eAAnB,CAAmC,IAAnC,EAbqB;IAxBQ;AAwC/B,qDAAoB,GAAG;AACrB,SAAI,OAAO;AACT,mBAAY,EAAE,MAAF,CAAS,KAAT,KAAmB,MAAnB;MADV,CADiB;;AAKrB,OAAE,eAAF,GALqB;;AAOrB,mCAAmB,eAAnB,CAAmC,IAAnC,EAPqB;IAxCQ;AAkD/B,6BAAS;kBAC0B,KAAK,KAAL,CAD1B;SACD,+BADC;AACH,SAAc,8BAAd,CADG;AAEH,kBAAS;AACP,aAAM,MAAN;AACA,gBAAS,SAAT;MAFF,CAFG;AAMH,gCAAuB,aAAa,OAAO,IAAP,GAAc,OAAO,OAAP,CAN/C;AAOH,4BAAmB,CAAC,UAAD,CAPhB;AAQH,mBAAU,0BAAG;AACX,qCAA8B,IAA9B;AACA,iCAA0B,IAA1B;AACA,mBAAY,gBAAZ;MAHQ,CAAV,CARG;;AAcP,YACE;;SAAyB,WAAW,OAAX,EAAoB,KAAK,kCAAsB,WAAtB,EAAlD;OACE;;WAAK,WAAU,UAAV,EAAL;SACE,8CAAa,IAAI,kCAAsB,WAAtB;AACJ,2BAAgB,UAAhB;AACA,oBAAS,KAAK,mBAAL,EAFtB,CADF;SAIE;;aAAO,SAAS,kCAAsB,WAAtB,EAAhB;WACG,yBAAQ,WAAR;UALL;SAOE;;aAAQ,cAAc,oBAAd;AACA,kBAAI,UAAJ;AACA,uBAAU,gBAAV;AACA,8BAAe,gBAAf,EAHR;WAIE;;eAAQ,OAAO,OAAO,IAAP,EAAf;aACG,yBAAQ,gBAAR;YALL;WAOE;;eAAQ,OAAO,OAAO,OAAP,EAAf;aACG,yBAAQ,mBAAR;YARL;UAPF;QADF;MADF,CAdO;IAlDsB;EAAlB;;;;;;;;;;;;;;;;;ACPf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAM,iBAAiB,GAAjB;AACN,KAAM,eAAe,GAAf;AACN,KAAM,aAAa,GAAb;;mBAES,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,aAAb;;AAEA,WAAQ,CAAC,MAAM,MAAN,CAAa,eAAb,CAAT;;AAEA,cAAW;AACT,oBAAe,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACf,oBAAe,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AACf,kBAAa,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;IAHf;;AAMA,mDAAoB;AAClB,SAAI,CAAJ,CAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CACG,UADH,CACc;AACV,gCAAyB,QAAzB;MAFJ,EAIG,EAJH,CAIM,QAJN,EAIgB,KAAK,kBAAL,CAJhB,CADkB;IAZW;AAoB/B,yDAAuB;AACrB,SAAI,CAAJ,CAAM,KAAK,IAAL,CAAU,QAAV,CAAN,CAA0B,GAA1B,CAA8B,QAA9B,EAAwC,UAAxC,CAAmD,SAAnD,EADqB;AAErB,SAAI,CAAJ,CAAM,oBAAN,EAA4B,MAA5B,GAFqB;AAGrB,SAAI,CAAJ,CAAM,gBAAN,EAAwB,MAAxB,GAHqB;IApBQ;AA0B/B,2DAAuB,GAAG;AACxB,OAAE,eAAF,GADwB;AAExB,mCAAmB,eAAnB,mCACG,2BAAgB,cAAhB,EAAiC,CAAC,KAAK,KAAL,CAAW,aAAX,CADrC,EAFwB;IA1BK;AAiC/B,mDAAmB,GAAG;;;AACpB,SAAI,WAAW,EAAE,MAAF,CAAS,KAAT,CADK;AAEpB,OAAE,eAAF,GAFoB;;AAIpB,mCAAmB,eAAnB,qFACG,2BAAgB,cAAhB,EAAiC,aAAa,UAAb,IAA2B,aAAa,cAAb,yDAC5D,2BAAgB,YAAhB,EAA+B,aAAa,UAAb,IAA2B,aAAa,YAAb,0BAF7D,EAJoB;IAjCS;AA2C/B,6BAAS;kBAC6C,KAAK,KAAL,CAD7C;SACD,qCADC;SACc,qCADd;AACH,SAAgC,gCAAhC,CADG;AAEH,mCAA0B,iBAAiB,CAAC,WAAD,GAAe,cAAhC,GAAiD,KAAjD,CAFvB;AAGH,iCAAwB,CAAC,aAAD,IAAkB,WAAlB,GAAgC,YAAhC,GAA+C,KAA/C,CAHrB;AAIH,+BAAsB,iBAAiB,WAAjB,GAA+B,UAA/B,GAA4C,KAA5C,CAJnB;AAKH,gCAAuB,uBAAuB,qBAAvB,IAAgD,uBAAhD,CALpB;AAMH,4BAAmB,CAAC,aAAD,CANhB;AAOH,mBAAU,0BAAG;AACX,4BAAqB,IAArB;AACA,iCAA0B,IAA1B;AACA,mBAAY,gBAAZ;MAHQ,CAAV,CAPG;;AAaP,YACE;;SAAyB,WAAW,OAAX,EAAoB,KAAK,2BAAgB,cAAhB,EAAlD;OACE;;WAAK,WAAU,UAAV,EAAL;SACE;AACE,eAAI,2BAAgB,cAAhB;AACJ,2BAAgB,aAAhB;AACA,oBAAS,KAAK,sBAAL,EAHX,CADF;SAKE;;aAAO,WAAU,cAAV,EAAyB,SAAS,2BAAgB,cAAhB,EAAzC;WAA0E,yBAAQ,iBAAR;UAL5E;SAME;;;AACE,2BAAc,oBAAd;AACA,kBAAI,UAAJ;AACA,uBAAU,gBAAV;AACA,8BAAe,gBAAf,EAJF;WAKI;;eAAQ,OAAO,cAAP,EAAR;aAAgC,yBAAQ,qBAAR;YALpC;WAMI;;eAAQ,OAAO,YAAP,EAAR;aAA8B,yBAAQ,mBAAR;YANlC;WAOI;;eAAQ,OAAO,UAAP,EAAR;aAA4B,yBAAQ,+BAAR;YAPhC;UANF;SAeE;;aAAO,WAAU,cAAV,EAAyB,SAAS,2BAAgB,cAAhB,EAAzC;WAA0E,yBAAQ,iBAAR;UAf5E;QADF;MADF,CAbO;IA3CsB;EAAlB;;;;;;;;;ACXf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,uBAAb;;AAEA,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,SAAL,EAAP,CAD2B;IAAZ;;AAIjB,6BAA0B,oCAAW;AACnC,YAAO;AACL,cAAO,4BAAiB,4BAAjB,EAAP;MADF,CADmC;IAAX;;AAM1B,8BAA2B,mCAAS,WAAT,EAAsB;AAC/C,iCAAiB,4BAAjB,CAA8C,YAAY,KAAZ,CAA9C,CAD+C;IAAtB;;AAI3B,cAAW,mBAAS,KAAT,EAAe;AACxB,SAAI,WAAW,MAAM,MAAN,CAAa,KAAb,CAAmB,IAAnB,EAAX;;;AADoB,SAIrB,KAAK,KAAL,CAAW,KAAX,KAAqB,QAArB,EAA+B;AAChC,mCAAiB,8BAAjB,CAAgD,KAAK,KAAL,CAAW,KAAX,EAAkB,QAAlE,EADgC;MAAlC;AAGA,UAAK,QAAL,CAAc,EAAE,OAAO,QAAP,EAAhB,EAPwB;AAQxB,UAAK,yBAAL,CAA+B,EAAC,OAAO,QAAP,EAAhC,EARwB;IAAf;;AAWX,cAAW,qBAAU;AACnB,SAAI,WAAW,KAAK,wBAAL,EAAX;SACA,qBAAqB,EAAE,GAAF,CAAM,QAAN,EAAgB,OAAhB,EAAyB,QAAzB,CAArB,CAFe;AAGnB,YAAO;AACL,gBAAS,6BAAiB,GAAjB,CAAqB,SAArB,KAAmC,EAAnC;AACT,cAAO,kBAAP;MAFF,CAHmB;IAAV;;AASX,wBAAqB,+BAAY;AAC/B,8BAAc,iBAAd,GAD+B;IAAZ;;AAIrB,iBAAc,wBAAY;AACxB,8BAAc,WAAd,GADwB;IAAZ;;AAId,WAAQ,kBAAY;AAClB,YACE;;SAAM,IAAG,yBAAH,EAA6B,KAAI,MAAJ,EAAW,WAAU,qBAAV,EAAgC,UAAU,KAAK,SAAL,EAAxF;OACE;;;SAAK,yBAAc,mBAAd;QADP;OAEE;;WAAa,KAAI,eAAJ,EAAb;SACE,2CAAU,IAAG,YAAH;AACA,iBAAK,cAAL;AACA,2BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,MAArB;AAChB,kBAAM,MAAN;AACA,iBAAK,aAAL;AACA,kBAAO,wBAAa,KAAb,CAAmB,IAAnB;AACP,wBAAa,wBAAa,WAAb,CAAyB,UAAzB,EANvB,CADF;SAQE,2CAAU,IAAG,cAAH;AACA,iBAAK,cAAL;AACA,2BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,QAArB;AAChB,kBAAM,QAAN;AACA,iBAAK,eAAL;AACA,kBAAO,wBAAa,KAAb,CAAmB,MAAnB;AACP,wBAAa,wBAAa,WAAb,CAAyB,YAAzB,CAAsC,KAAK,KAAL,CAAW,OAAX,CAAnD,EANV,CARF;SAeE,2CAAU,IAAG,aAAH;AACA,iBAAK,cAAL;AACA,2BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,OAArB;AAChB,kBAAM,OAAN;AACA,iBAAK,cAAL;AACA,kBAAO,wBAAa,KAAb,CAAmB,KAAnB;AACP,wBAAa,wBAAa,WAAb,CAAyB,WAAzB,CAAqC,KAAK,KAAL,CAAW,OAAX,CAAlD,EANV,CAfF;QAFF;MADF,CADkB;IAAZ;EA9CO,CAAjB,C;;;;;;;;ACTA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,iBAAb;;AAEA,WAAQ,kBAAW;AACjB,SAAI,aAAa,KAAK,KAAL,CAAW,SAAX,IAAwB,EAAxB,CADA;AAEjB,YACE;;SAAU,sBAAoB,UAApB,EAAV;OACE;;;SAAQ;;aAAO,SAAS,KAAK,KAAL,CAAW,EAAX,EAAhB;WAAgC,KAAK,KAAL,CAAW,KAAX;UAAxC;QADF;OAEG,KAAK,KAAL,CAAW,QAAX;MAHL,CAFiB;IAAX;;EAJO,CAAjB,C;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,kBAAb;;AAEA,WAAQ,CAAC,MAAM,MAAN,CAAa,eAAb,CAAT;;AAEA,cAAW;AACT,qBAAgB,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;AAChB,mBAAc,MAAM,SAAN,CAAgB,IAAhB,CAAqB,UAArB;IAFhB;;AAKA,iCAAU,GAAG;;;AACX,SAAI,gBAAgB,EAAE,MAAF,CAAS,EAAT,KAAgB,2BAAgB,eAAhB;SAChC,mBAAmB,EAAE,MAAF,CAAS,EAAT,KAAgB,2BAAgB,yBAAhB,CAF5B;;AAIX,OAAE,eAAF,GAJW;AAKX,mCAAmB,eAAnB,mFACG,2BAAgB,yBAAhB,EAA4C,wEAC5C,2BAAgB,eAAhB,EAAkC,sCAFrC,EALW;IAXkB;AAsB/B,6BAAS;AACP,SAAI,WAAW,CAAC,KAAK,KAAL,CAAW,iBAAX,IAAgC,CAAC,KAAK,KAAL,CAAW,iBAAX,CAD1C;;AAGP,YACE;;SAAM,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAhC;OACE;;;SAAK,yBAAQ,UAAR;QADP;OAEE;;;SACE;AACE,eAAG,SAAH;AACA,iBAAK,aAAL;AACA,2BAAgB,QAAhB;AACA,kBAAO,yBAAQ,sBAAR,EAJT,CADF;SAME;AACE,eAAI,2BAAgB,yBAAhB;AACJ,iBAAK,aAAL;AACA,2BAAgB,KAAK,KAAL,CAAW,cAAX;AAChB,kBAAO,yBAAQ,yBAAR,EAJT,CANF;SAWE;AACE,eAAI,2BAAgB,eAAhB;AACJ,iBAAK,aAAL;AACA,2BAAgB,KAAK,KAAL,CAAW,YAAX;AAChB,kBAAO,yBAAQ,eAAR,EAJT,CAXF;QAFF;MADF,CAHO;IAtBsB;EAAlB;;;;;;;;;ACLf,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,kBAAkB,oBAAQ,GAAR,CAAlB;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;KACA,QAAQ,oBAAQ,EAAR,CAAR;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;KACA,wBAAwB,oBAAQ,GAAR,CAAxB;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,WAAQ,CAAC,aAAD,EAAgB,qBAAhB,CAAR;;AAEA,sBAAmB,6BAAY;AAC7B,mBAAc,EAAd,CAAiB,CAAC,QAAD,CAAjB,EAA6B,KAAK,cAAL,CAA7B,CAD6B;IAAZ;;AAInB,yBAAsB,gCAAY;AAChC,mBAAc,GAAd,CAAkB,CAAC,QAAD,CAAlB,EAA8B,KAAK,cAAL,CAA9B,CADgC;IAAZ;;AAItB,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,mBAAL,EAAP,CAD2B;IAAZ;;AAIjB,wBAAqB,+BAAY;AAC/B,YAAO;AACL,oBAAa,cAAc,GAAd,CAAkB,aAAlB,CAAb;AACA,cAAO,cAAc,GAAd,CAAkB,OAAlB,CAAP;MAFF,CAD+B;IAAZ;;AAOrB,mBAAgB,0BAAY;AAC1B,UAAK,QAAL,CAAc,KAAK,mBAAL,EAAd,EAD0B;IAAZ;;AAIhB,iBAAc,wBAAY;AACxB,YAAO,QAAQ,YAAR,CAAqB,MAAM,IAAN,CAAW,aAAX,CAAyB,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAwB,KAAhC,CAAzB,EAAiE,KAAK,KAAL,CAAW,WAAX,CAAtF,CAAP,CADwB;IAAZ;;AAId,gBAAa,uBAAY;AACvB,SAAI,MAAM,GAAN,CAAU,OAAV,CAAkB,KAAK,KAAL,CAAW,WAAX,CAAtB,EAA+C;AAC7C,WAAI,OAAO,KAAK,KAAL,CAAW,UAAX,GAAwB,KAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,GAA6B,KAArD,CADkC;AAE7C,cAAO,oBAAC,eAAD,IAAiB,MAAM,IAAN,EAAY,eAAe,KAAK,KAAL,CAAW,aAAX,EAA0B,UAAU,KAAK,KAAL,CAAW,WAAX,EAAwB,kBAAkB,KAAK,KAAL,CAAW,YAAX,EAA1H,CAAP,CAF6C;MAA/C;IADW;;AAOb,wBAAqB,+BAAY;AAC/B,YACE;;SAAQ,MAAK,mBAAL,EAAyB,WAAU,+BAAV,EAA0C,MAAK,QAAL,EAAc,SAAS,KAAK,QAAL,EAAlG;;MADF,CAD+B;IAAZ;;AAMrB,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,qBAAT;AACA,cAAO,KAAK,YAAL,EAAP;AACA,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,sBAAc,QAAd,EAJb,CADF,CADkB;IAAZ;EA9CO,CAAjB,C;;;;;;;;;;;;;;;;ACRA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAM,2BAA2B,sCAA3B;;mBAES,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,iBAAb;;AAEA,WAAQ,mCAAR;;AAEA,sBAAmB,6BAAW;AAC5B,2BAAW,EAAX,CAAc,CAAC,+BAAD,EAAkC,cAAlC,EAAkD,mBAAlD,CAAd,EAAsF,KAAK,SAAL,CAAtF,CAD4B;AAE5B,UAAK,eAAL,GAAuB,IAAvB,CAF4B;AAG5B,cAAS,gBAAT,CAA0B,OAA1B,EAAmC,KAAK,gBAAL,EAAuB,IAA1D,EAH4B;IAAX;;AAMnB,uBAAoB,8BAAW;AAC7B,SAAI,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,eAAL,EAAsB;AACpD,YAAK,WAAL,GADoD;AAEpD,YAAK,eAAL,GAAuB,KAAvB,CAFoD;MAAtD;IADkB;;AAOpB,yBAAsB,gCAAW;AAC/B,2BAAW,GAAX,CAAe,CAAC,+BAAD,EAAkC,cAAlC,EAAkD,mBAAlD,CAAf,EAAuF,KAAK,SAAL,CAAvF,CAD+B;AAE/B,cAAS,mBAAT,CAA6B,OAA7B,EAAsC,KAAK,gBAAL,EAAuB,IAA7D,EAF+B;IAAX;;AAKtB,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,SAAL,EAAP,CAD2B;IAAZ;;AAIjB,cAAW,qBAAU;AACnB,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADmB;IAAV;;AAIX,cAAW,qBAAU;AACnB,YAAO;AACL,sBAAe,sBAAW,GAAX,CAAe,eAAf,CAAf;AACA,mBAAY,sBAAW,GAAX,CAAe,YAAf,CAAZ;AACA,mBAAY,sBAAW,GAAX,CAAe,YAAf,CAAZ;AACA,cAAO,sBAAW,GAAX,CAAe,OAAf,CAAP;AACA,YAAK,6BAAiB,GAAjB,CAAqB,KAArB,CAAL;AACA,+BAAwB,sBAAW,GAAX,CAAe,wBAAf,CAAxB;AACA,eAAQ,EAAE,GAAF,CAAM,IAAN,EAAY,cAAZ,EAA4B,EAA5B,CAAR;MAPF,CADmB;IAAV;;AAYX,+CAAiB,KAAI;AACnB,SAAI,IAAI,MAAJ,CAAW,EAAX,KAAkB,wBAAlB,EAA2C;AAC7C,WAAI,IAAI,MAAJ,CAAW,YAAX,CAAwB,QAAxB,MAAsC,QAAtC,EAA+C;AACjD,aAAI,eAAJ,GADiD;AAEjD,gBAFiD;QAAnD;AAIA,WAAI,cAAJ,GAL6C;AAM7C,gCAAc,yBAAd,CAAwC,EAAE,MAAM,yBAAc,mBAAd,EAAmC,cAAc,IAAI,MAAJ,CAAW,YAAX,CAAwB,WAAxB,CAAd,EAAnF,EAN6C;AAO7C,mCAAiB,sBAAjB,CAAwC,yBAAc,mBAAd,CAAxC,CAP6C;MAA/C;IA7C6B;;;AAwD/B,qBAAkB,4BAAY;AAC5B,SAAI,gBAAgB,gBAAM,MAAN,CAAa,mBAAb,CAAiC,KAAK,KAAL,CAAW,KAAX,CAAjD,CADwB;;AAG5B,YAAO,gBAAM,MAAN,CAAa,kBAAb,CAAgC,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,GAAX,EAAgB,KAAK,KAAL,CAAW,sBAAX,CAAxD,EAA4F,aAA5F,CAAP,CAH4B;IAAZ;;AAMlB,cAAW,mBAAU,CAAV,EAAa;AACtB,OAAE,cAAF,GADsB;AAEtB,SAAI,cAAc,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAAvB,EAAwC,cAAxC,EAAd;SACA,QAAQ,YAAY,CAAZ,EAAe,KAAf;SACR,MAAM,gBAAM,OAAN,CAAc,qBAAd,CAAoC,YAAY,CAAZ,EAAe,KAAf,CAAqB,IAArB,EAApC,EAAiE,KAAjE,CAAuE,CAAvE,EAA0E,GAA1E,CAAN;SACA,WAAW,EAAX;SACA,MAJJ,CAFsB;;AAQtB,cAAS,KAAK,SAAL,CAAe,KAAf,EAAsB,GAAtB,CAAT,CARsB;AAStB,SAAI,MAAJ,EAAY;AACV,YAAK,QAAL,CAAc;AACZ,iBAAQ,MAAR;QADF,EADU;MAAZ,MAIO;AACL,gBAAS,IAAT,CAAc,KAAK,YAAL,CAAkB,MAAM,KAAN,CAAY,GAAZ,CAAlB,EAAoC,GAApC,CAAd,EADK;AAEL,YAAK,eAAL,CAAqB,QAArB,EAFK;AAGL,YAAK,YAAL,GAHK;MAJP;IATS;;AAoBX,cAAW,mBAAU,KAAV,EAAiB,GAAjB,EAAsB;AAC/B,SAAI,CAAC,KAAD,EAAQ;AACV,cAAO;AACL,eAAM,6BAAW,iBAAX,CAA6B,QAA7B;QADR,CADU;MAAZ;IADS;;AAQX,iBAAc,sBAAU,SAAV,EAAqB,GAArB,EAA0B;;;AACtC,YAAO,sBAAa,UAAC,OAAD,EAAa;AAC/B,8BAAY,WAAZ,CAAwB;AACtB,mBAAU,MAAK,KAAL,CAAW,QAAX;AACV,oBAAW,SAAX;AACA,iBAAQ,GAAR;QAHF,EAD+B;AAM/B,eAAQ,SAAR,EAN+B;MAAb,CAApB,CADsC;IAA1B;;AAWd,oBAAiB,yBAAU,QAAV,EAAoB;AACnC,uBAAQ,GAAR,CAAY,QAAZ,EAAsB,IAAtB,CAA2B,UAAS,IAAT,EAAe;AACxC,YAAK,iBAAL,GADwC;AAExC,WAAI,KAAK,KAAL,CAAW,IAAX,EAAgB;AACjB,qCAAiB,qBAAjB,CAAuC,KAAK,KAAL,CAAW,IAAX,EAAiB,KAAK,CAAL,EAAQ,MAAR,CAAxD,CADiB;QAApB;MAFyB,CAKzB,IALyB,CAKpB,IALoB,CAA3B,EAKc,YAAW;AACvB,YAAK,eAAL,GADuB;MAAX,CAEZ,IAFY,CAEP,IAFO,CALd,EADmC;IAApB;;AAWjB,sBAAmB,6BAAY;AAC7B,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,wBAAQ,OAAR,CAAgB,aAAhB;AACN,cAAO,MAAP;MAHF,EAD6B;IAAZ;;AAQnB,oBAAiB,2BAAY;AAC3B,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,iBAAL,CAAuB,wBAAQ,IAAR,CAAa,WAAb,CAA7B;AACA,cAAO,QAAP;MAHF,EAD2B;IAAZ;;AAQjB,sBAAmB,2BAAU,SAAV,EAAqB;;;AACtC,YAAO;cACH;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,SAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,OAAK,gBAAL,EAAuB,MAAK,GAAL,EAAnC;;cAAJ;YADF;UAFF;;MADG,CAD+B;IAArB;;AAWnB,qBAAkB,0BAAU,CAAV,EAAa;AAC7B,OAAE,cAAF,GAD6B;AAE7B,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,UAApB,EAAgC,IAAhC,CAAqC,YAArC,CAAb,CAFyB;AAG7B,4BAAY,UAAZ,CAAuB,UAAvB,EAH6B;AAI7B,UAAK,WAAL,GAJ6B;IAAb;;AAOlB,gBAAa,uBAAY;AACvB,8BAAc,qBAAd,GADuB;IAAZ;;AAIb,iBAAc,wBAAY;AACxB,8BAAc,WAAd,GADwB;IAAZ;;AAId,gBAAa,uBAAY;;AAEvB,cAAS,WAAT,CAAqB,IAArB,EAA2B,aAA3B,CAAyC,gCAAzC,EAA2E,KAA3E,GAFuB;IAAZ;;AAKb,2BAAwB,gCAAS,IAAT,EAAe;;AAErC,SAAI,OAAO,EAAP,CAFiC;;AAIrC,SAAI,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,UAAX,EAAsB;;AAEpD,6CAAiC,oBAAa,2EAAmE,yBAAc,OAAd,CAAsB,kCAAtB,SAAjH,CAFoD;;AAIpD,WAAI,CAAC,KAAK,KAAL,CAAW,UAAX,EAAuB;AAC1B,uCAA2B,KAAK,KAAL,CAAW,UAAX,wCAAoD,2EAAmE,yBAAc,OAAd,CAAsB,kCAAtB,SAAlJ,CAD0B;QAA5B;MAJF;;AASA,YAAU,yBAAc,YAAd,UAA+B,IAAzC,CAbqC;IAAf;;AAgBxB,WAAQ,kBAAY;AAClB,SAAI,SAAS,KAAK,KAAL,CAAW,MAAX,CADK;AAElB,YACE;;SAAM,IAAG,mBAAH,EAAuB,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAlE;OACE;AACE,aAAG,qBAAH;AACA,gBAAO,wBAAQ,KAAR,CAAc,YAAd;AACP,mBAAU,IAAV;AACA,eAAM,KAAK,gBAAL,EAAN;AACA,mBAAU,KAAK,KAAL,CAAW,gBAAX;AACV,sBAAa,qBAAC,OAAD,EAAU,GAAV,EAAe,MAAf;kBAA0B,qBAAU,UAAV,CAAqB,OAArB,EAA8B,OAAO,IAAP,EAAa,MAA3C;UAA1B;AACb,gBAAO,OAAO,IAAP;AACP,cAAI,aAAJ;AACA,0BAAmB,KAAK,sBAAL;QATrB,CADF;OAYE;AACE,aAAG,sBAAH;AACA,gBAAO,wBAAQ,KAAR,CAAc,OAAd;AACP,eAAK,GAAL;AACA,oBAAU,KAAV;AACA,cAAI,gBAAJ,EALF,CAZF;MADF,CAFkB;IAAZ;EA/KK;;;;;;;;;AClBf,KAAI,oBAAoB,oBAAQ,GAAR,CAApB;KACA,kBAAkB,oBAAQ,GAAR,CAAlB;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,sBAAb;;AAEA,WAAQ,kBAAW;kBAMb,KAAK,KAAL,CANa;SAEf,eAFe;SAEX,mBAFW;SAEL,mBAFK;SAGf,iCAHe;SAGF,2BAHE;SAGQ,2BAHR;SAIf,6CAJe;SAII,mBAJJ;SAIU,yCAJV;SAKf,iCALe;;;AAQjB,SAAI,iBAAiB;AACnB,aADmB,EACf,UADe,EACT,UADS;AAEnB,+BAFmB,EAEN,kBAFM,EAEI,kBAFJ;AAGnB,2CAHmB,EAGA,UAHA,EAGM,gCAHN;MAAjB,CARa;;AAcjB,SAAI,WAAJ,EAAiB;AACf,sBAAe,WAAf,GAA6B,WAA7B,CADe;MAAjB;;AAIA,YACE;AAAC,wBAAD;OAAuB,KAAK,KAAL;OACrB,oBAAC,eAAD,EAAqB,cAArB,CADF;MADF,CAlBiB;IAAX;;EAJO,CAAjB,C;;;;;;;;;;;;ACHA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,iBAAb;;AAEA,cAAW;AACT,eAAU,MAAM,SAAN,CAAgB,IAAhB;AACV,kBAAa,MAAM,SAAN,CAAgB,MAAhB;AACb,WAAM,MAAM,SAAN,CAAgB,KAAhB;AACN,kBAAa,MAAM,SAAN,CAAgB,IAAhB;AACb,wBAAmB,MAAM,SAAN,CAAgB,MAAhB;AACnB,eAAU,MAAM,SAAN,CAAgB,KAAhB;IANZ;;AASA,sBAAmB,6BAAY;AAC7B,UAAK,YAAL,GAD6B;IAAZ;;AAInB,yBAAsB,gCAAW;AAC/B,SAAI,CAAJ,CAAM,SAAS,WAAT,CAAqB,IAArB,CAAN,EAAkC,UAAlC,CAA6C,SAA7C,EAD+B;AAE/B,SAAI,CAAJ,CAAM,oBAAN,EAA4B,MAA5B,GAF+B;AAG/B,SAAI,CAAJ,CAAM,gBAAN,EAAwB,MAAxB,GAH+B;IAAX;;AAMtB,0BAAuB,+BAAS,SAAT,EAAoB;AACzC,YAAO,CAAC,EAAE,OAAF,CAAU,SAAV,EAAqB,KAAK,KAAL,CAAtB,CADkC;IAApB;;AAIvB,qDAAoB;AAClB,UAAK,YAAL,GADkB;IA3BW;;;AA+B/B,oBAAiB,2BAAW;;;AAC1B,YAAO;AACL,iBAAU,KAAV;AACA,oBAAa,EAAb;AACA,aAAM,EAAN;AACA,oBAAa,qBAAC,OAAD;gBAAa,QAAQ,KAAR,CAAc,CAAd,EAAiB,MAAK,iBAAL;QAA9B;AACb,0BAAmB,qBAAU,2BAAV;AACnB,iBAAU,EAAV;AACA,wBAAiB,2BAAW;AAC1B,gBAAO,mBAAP,CAD0B;QAAX;MAPnB,CAD0B;IAAX;;AAcjB,iBAAc,wBAAY;AACxB,SAAI,UAAU,KAAK,iBAAL,EAAV,CADoB;AAExB,SAAI,CAAJ,CAAM,SAAS,WAAT,CAAqB,IAArB,CAAN,EAAkC,UAAlC,CAA6C,OAA7C,EAFwB;AAGxB,SAAG,QAAQ,QAAR,IAAoB,QAAQ,QAAR,CAAiB,MAAjB,GAA0B,CAA1B,EAA4B;AACjD,WAAI,CAAJ,CAAM,SAAS,WAAT,CAAqB,IAArB,CAAN,EAAkC,GAAlC,CAAsC,QAAQ,QAAR,CAAtC,CAAwD,OAAxD,CAAgE,QAAhE,EADiD;MAAnD;IAHY;;AAQd,sBAAmB,6BAAY;;;AAC7B,YAAO;AACL,iBAAU,KAAK,KAAL,CAAW,QAAX;AACV,oBAAa,KAAK,KAAL,CAAW,WAAX;AACb,aAAM,KAAK,KAAL,CAAW,IAAX;AACN,iBAAU,KAAK,KAAL,CAAW,QAAX;AACV,oBAAa;;;gBAAa,iBAAK,KAAL,EAAW,WAAX,0BAAgC,KAAhC,CAAsC,CAAtC,EAAyC,OAAK,KAAL,CAAW,iBAAX;QAAtD;AACb,wBAAiB,KAAK,KAAL,CAAW,eAAX;MANnB,CAD6B;IAAZ;;AAWnB,WAAQ,kBAAY;AAClB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX;SAC1B,UAAU,IAAC,CAAK,KAAL,CAAW,IAAX,GAAmB,iBAAiB,KAAK,KAAL,CAAW,IAAX,GAAkB,aAAvD,CAFI;;AAIlB,YACE,+BAAO,MAAK,QAAL,EAAc,IAAI,KAAK,KAAL,CAAW,EAAX,EAAe,WAAW,OAAX,EAAoB,MAAM,IAAN,EAA5D,CADF,CAJkB;IAAZ;EAhEK;;;;;;;;;ACFf,KAAI,oBAAoB,oBAAQ,GAAR,CAApB;KACA,cAAc,oBAAQ,GAAR,CAAd;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,uBAAb;;AAEA,WAAQ,kBAAW;AACjB,YACE;AAAC,wBAAD;OAAuB,KAAK,KAAL;OACrB,oBAAC,WAAD,EAAiB,KAAK,KAAL,CADnB;MADF,CADiB;IAAX;EAJO,CAAjB,C;;;;;;;;;;;;;;ACHA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,aAAb;;AAEA,cAAW;AACT,eAAU,MAAM,SAAN,CAAgB,IAAhB;AACV,cAAS,MAAM,SAAN,CAAgB,IAAhB;AACT,aAAQ,MAAM,SAAN,CAAgB,IAAhB;IAHV;;AAMA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,iBAAU,oBAAM,EAAN;AACV,gBAAS,mBAAM,EAAN;AACT,eAAQ,kBAAM,EAAN;MAHV,CAD0B;IAAX;;AAQjB,WAAQ,kBAAW;;AAEjB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,IAAmB,KAAK,KAAL,CAAW,EAAX,CAFb;AAGjB,SAAI,UAAU,IAAC,CAAK,KAAL,CAAW,IAAX,GAAmB,cAAc,KAAK,KAAL,CAAW,IAAX,GAAkB,UAApD,CAHG;;AAKjB,YACE,2DAAc,KAAK,KAAL,IAAY,WAAW,OAAX,EAAoB,MAAM,IAAN,GAA9C,CADF,CALiB;IAAX;;EAlBO,CAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEM;;;AAEJ,YAFI,UAEJ,GAAc;yCAFV,YAEU;yFAFV,wBAEU;IAAd;;8BAFI;;mCAMU;AACZ,cAAO;AACL,qBAAY,IAAZ;AACA,iCAAwB,EAAxB;AACA,oBAAW,EAAX;AACA,gBAAO,EAAP;AACA,wBAAe,KAAf;AACA,qBAAY,qBAAU,kBAAV;AACZ,qBAAY,KAAZ;QAPF,CADY;;;;yCAYM;;;AAElB,gCAAW,YAAX,CAAwB;AACtB,oBAAW,gBAAC,IAAD,EAAU;AACnB,kBAAK,GAAL,CAAS;AACP,4BAAe,KAAK,QAAL;AACf,yBAAY,KAAK,UAAL;YAFd,EADmB;UAAV;QADb,EAFkB;;AAWlB,gCAAW,QAAX,CAAoB;AAClB,gCAAuB,8BAAM;AAC3B,eAAI,OAAK,IAAL,CAAU,UAAV,EAAsB;AACxB,oBAAK,sBAAL,CAA4B,OAAK,IAAL,CAAU,UAAV,CAAqB,GAArB,CAA5B,CADwB;YAA1B;UADqB;AAKvB,6BAAoB,yBAAC,KAAD,EAAW;AAC7B,kBAAK,oBAAL,CAA0B,KAA1B,EAD6B;UAAX;AAGpB,2BAAkB,uBAAC,MAAD,EAAY;AAC5B,kBAAK,kBAAL,CAAwB,MAAxB,EAD4B;UAAZ;AAGlB,gCAAuB,4BAAC,eAAD,EAAqB;AAC1C,kBAAK,sBAAL,CAA4B,eAA5B,EAD0C;UAArB;AAGvB,+BAAsB,2BAAC,UAAD,EAAgB;AACpC,kBAAK,GAAL,CAAS,YAAT,EAAuB,UAAvB,EADoC;UAAhB;QAfxB,EAXkB;;;;0CAgCC,OAAO;AAC1B,WAAI,YAAY,EAAE,GAAF,CAAM,KAAN,EAAa,MAAb,CAAZ,CADsB;AAE1B,YAAK,GAAL,CAAS,WAAT,EAAsB,SAAtB,EAF0B;;;;wCAKT,QAAQ;AACzB,WAAI,QAAQ,EAAE,KAAF,CAAQ,EAAE,GAAF,CAAM,MAAN,EAAc,UAAC,IAAD,EAAU;AAC1C,aAAI,WAAW,CAAC,CAAC,KAAK,QAAL,CADyB;;AAG1C,gBAAO;AACL,iBAAM,KAAK,IAAL;AACN,gBAAK,KAAK,GAAL;AACL,eAAI,OAAO,KAAK,EAAL,CAAX;AACA,6BAJK;UAAP,CAH0C;QAAV,CAAtB,EAUR,KAVQ,CAAR,CADqB;;AAazB,YAAK,GAAL,CAAS,OAAT,EAAkB,KAAlB,EAbyB;;;;4CAgBJ,iBAAiB;AACtC,WAAI,WAAJ;WACI,2BAA2B,EAA3B;WACA,eAAe,4BAAS,GAAT,CAAa,aAAb,CAAf,CAHkC;;AAKtC,WAAI,YAAJ,EAAkB;AAChB,uBAAc,aAAa,eAAb,CAAd,CADgB;AAEhB,aAAI,WAAJ,EAAiB;AACf,gBAAK,GAAL,CAAS;AACP,yBAAY,WAAZ;YADF,EADe;AAIf,aAAE,IAAF,CAAO,YAAY,YAAZ,EAA0B,UAAC,KAAD,EAAW;AAC1C,eAAE,IAAF,CAAO,KAAP,EAAc,UAAC,GAAD,EAAS;AACrB,wCAAyB,IAAzB,CAA8B,GAA9B,EADqB;cAAT,CAAd,CAD0C;YAAX,CAAjC,CAJe;UAAjB;AAUA,aAAI,yBAAyB,MAAzB,EAAiC;AACnC,gBAAK,GAAL,CAAS;AACP,qCAAwB,wBAAxB;YADF,EADmC;UAArC;QAZF;;;UA5EE;;;AAiGN,QAAO,OAAP,GAAiB,IAAI,UAAJ,EAAjB,C;;;;;;;;;;;mBCtGe;AACb,qBAAkB;AAChB,uEADgB;AAEhB,6CAFgB;AAGhB,2DAHgB;AAIhB,uEAJgB;IAAlB;AAMA,qBAAkB;AAChB,6CADgB;AAEhB,uCAFgB;AAGhB,uEAHgB;AAIhB,0DAJgB;IAAlB;AAMA,sBAAmB;AACjB,2CADiB;IAAnB;;;;;;;;;;;;;mBCba;AACb,yDAAsB,WAAW,WAAW;AAC1C,YAAO,CAAC,EAAE,OAAF,CAAU,KAAK,KAAL,EAAY,SAAtB,CAAD,IAAqC,CAAC,EAAE,OAAF,CAAU,KAAK,KAAL,EAAY,SAAtB,CAAD,CADF;IAD/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEM;;;AAEJ,YAFI,aAEJ,GAAc;yCAFV,eAEU;;8FAFV,2BAEU;;AAGZ,WAAK,KAAL,GAAa;AACX,kBAAW,EAAX;AACA,yBAAkB,EAAlB;MAFF,CAHY;;AAQZ,WAAK,kBAAL,GAA0B,EAAE,QAAF,CAAW,MAAK,SAAL,EAAgB,IAA3B,EAAiC,EAAC,SAAS,KAAT,EAAgB,UAAU,IAAV,EAAlD,CAA1B,CARY;;IAAd;;8BAFI;;mCAaU;AACZ,cAAO;AACL,uBAAc,EAAd;AACA,sBAAa,4BAAiB,cAAjB,EAAb;AACA,2BAAkB,EAAlB;AACA,gBAAO;AACL,mBAAQ,EAAR;AACA,kBAAO,EAAP;UAFF;AAIA,qBAAY,EAAZ;AACA,kCAAyB,KAAzB;AACA,qBAAY,EAAZ;AACA,2BAAkB,EAAlB;AACA,0BAAiB,EAAjB;AACA,wBAAe,EAAf;AACA,sBAAa,KAAb;AACA,2BAAkB,KAAlB;AACA,4BAAmB,KAAnB;AACA,mBAAU,KAAV;AACA,uBAAc,KAAd;QAlBF,CADY;;;;yCAuBM;;;AAClB,gCAAc,YAAd,CAA2B;AACzB,4BAAmB,yBAAM;AACvB,kBAAK,gBAAL,GAAwB,IAAxB,CADuB;UAAN;AAGnB,iCAAwB,6BAAC,GAAD,EAAS;;AAE/B,kBAAK,GAAL,CAAS,cAAT,EAAyB,GAAzB,EAF+B;UAAT;QAJ1B,EADkB;AAUlB,gCAAc,QAAd,CAAuB;AACrB,2BAAkB,uBAAC,MAAD,EAAY;AAC5B,kBAAK,YAAL,CAAkB,MAAlB,EAD4B;UAAZ;AAGlB,iCAAwB,6BAAC,IAAD,EAAU;AAChC,kBAAK,GAAL,CAAS,cAAT,EAAyB,IAAzB,EADgC;UAAV;AAGxB,2BAAkB,uBAAC,MAAD,EAAY;AAC5B,kBAAK,kBAAL,CAAwB,MAAxB,EAD4B;UAAZ;AAGlB,gCAAuB,4BAAC,KAAD,EAAW;AAChC,kBAAK,iBAAL,CAAuB,KAAvB,EADgC;UAAX;AAGvB,gCAAuB,4BAAC,GAAD,EAAS;AAC9B,kBAAK,gBAAL,CAAsB,GAAtB,EAD8B;UAAT;AAGvB,6BAAoB,yBAAC,QAAD,EAAc;AAChC,kBAAK,cAAL,CAAoB,QAApB,EADgC;UAAd;AAGpB,wBAAe,0BAAa;eAAV,eAAU;;AAC1B,kBAAK,gBAAL,CAAsB,GAAtB,EAD0B;UAAb;AAGf,2BAAkB,yBAAM;AACtB,kBAAK,GAAL,CAAS,yBAAT,EAAoC,IAApC,EADsB;UAAN;AAGlB,mCAA0B,+BAAM;AAC9B,kBAAK,GAAL,CAAS,yBAAT,EAAoC,KAApC,EAD8B;UAAN;AAG1B,8BAAqB,yBAAC,SAAD,EAAe;AAClC,kBAAK,GAAL,CAAS;AACP,0BAAa,KAAb;YADF,EADkC;AAIlC,kBAAK,eAAL,CAAqB,SAArB,EAJkC;UAAf;AAMrB,+BAAsB,iCAAa;eAAV,gBAAU;;AACjC,eAAI,WAAW,OAAK,KAAL,CAAW,gBAAX,CAA4B,GAA5B,CAAX,CAD6B;AAEjC,eAAI,aAAa,SAAb,EAAwB;AAC1B,iBAAI,YAAY,EAAE,SAAF,CAAY,OAAK,IAAL,CAAU,UAAV,CAAxB,CADsB;AAE1B,iBAAI,WAAW,OAAK,IAAL,CAAU,UAAV,CAAqB,OAArB,CAA6B,GAA7B,CAAX,CAFsB;AAG1B,iBAAI,aAAa,QAAb,IAAyB,WAAW,OAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,EAA4B;AAClE,yBAAU,MAAV,CAAiB,QAAjB,EAA2B,CAA3B,EADkE;AAElE,yBAAU,MAAV,CAAiB,QAAjB,EAA2B,CAA3B,EAA8B,GAA9B,EAFkE;AAGlE,sBAAK,eAAL,CAAqB,SAArB,EAHkE;cAApE;AAKA,iBAAI,gCAAoB,QAApB,EAAJ,EAAoC;AAClC,sBAAO,OAAK,KAAL,CAAW,gBAAX,CAA4B,GAA5B,CAAP,CADkC;cAApC;YARF;UAFoB;AAetB,2BAAkB,uBAAC,IAAD,EAAU;AAC1B,kBAAK,aAAL,CAAmB,IAAnB,EAD0B;UAAV;AAGlB,iCAAwB,2BAAC,IAAD,EAAU;AAChC,kBAAK,eAAL,CAAqB,KAAK,MAAL,CAArB,CADgC;UAAV;AAGxB,gCAAuB,0BAAC,IAAD,EAAU;AAC/B,kBAAK,cAAL,CAAoB,KAAK,KAAL,CAApB,CAD+B;UAAV;AAGvB,+BAAsB,2BAAM;AAC1B,kBAAK,aAAL,GAD0B;UAAN;QA1DxB,EAVkB;;;;;;;;;;gCA8ET,MAAM;AACf,cAAO,EAAE,OAAF,CAAU,EAAE,MAAF,CAAS,IAAT,EAAe,UAAU,IAAV,EAAgB;AAC5C,gBAAO,CAAC,IAAD,IAAS,KAAK,IAAL,KAAc,EAAd,CAD4B;QAAhB,CAAzB,EAED,UAAU,IAAV,EAAgB;AACpB,gBAAO,KAAK,IAAL,KAAc,WAAd,GAA4B,OAA5B,GAAsC,QAAtC,CADa;QAAhB,CAFN,CADe;AAMf,cAAO,IAAP,CANe;;;;;;;;;;gCAaN,OAAO;AAChB,WAAI,KAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,EAA6B;AAC/B,aAAI,UAAU,EAAE,OAAF,CAAU,EAAE,GAAF,CAAM,KAAK,IAAL,CAAU,UAAV,EAAsB,UAAC,GAAD,EAAS;AAC3D,eAAI,MAAM,GAAN,CAAJ,EAAgB;AACd,oBAAO,MAAM,GAAN,CAAP,CADc;YAAhB;UADkD,CAAtC,CAAV,CAD2B;AAM/B,aAAI,WAAW,EAAE,GAAF,CAAM,KAAN,EAAa,UAAU,IAAV,EAAgB;AAC1C,eAAI,UAAU,EAAE,IAAF,CAAO,OAAP,EAAgB,UAAU,IAAV,EAAgB;AAC5C,oBAAO,KAAK,GAAL,KAAa,KAAK,GAAL,CADwB;YAAhB,CAA1B,CADsC;AAI1C,eAAI,CAAC,OAAD,EAAU;AACZ,oBAAO,IAAP,CADY;YAAd;UAJ0B,CAAxB,CAN2B;AAc/B,gBAAO,EAAE,OAAF,CAAU,QAAQ,MAAR,CAAe,QAAf,CAAV,CAAP,CAd+B;QAAjC;AAgBA,cAAO,KAAP,CAjBgB;;;;;;;;;;kCAwBL,UAAU;;;AACrB,WAAI,IAAJ,CADqB;AAErB,WAAI,QAAJ,EAAc;AACZ,gBAAO,EAAE,GAAF,CAAM,QAAN,EAAgB,UAAC,IAAD,EAAU;AAC/B,kBAAO,KAAK,GAAL,CADwB;UAAV,CAAvB,CADY;QAAd,MAIO;AACL,gBAAO,EAAE,OAAF,CAAU,EAAE,GAAF,CAAM,CAAC,OAAD,EAAU,QAAV,CAAN,EAA2B,UAAC,SAAD,EAAe;AACzD,kBAAO,EAAE,GAAF,CAAM,OAAK,IAAL,CAAU,KAAV,CAAgB,SAAhB,CAAN,EAAkC,UAAC,IAAD,EAAU;AACjD,oBAAO,KAAK,GAAL,CAD0C;YAAV,CAAzC,CADyD;UAAf,CAArC,CAAP,CADK;QAJP;AAWA,YAAK,GAAL,CAAS;AACP,qBAAY,IAAZ;QADF,EAbqB;;;;kCAkBV,QAAQ;AACnB,WAAI,mBAAmB,wBAAa,cAAb,CAA4B,EAAE,GAAF,CAAM,MAAN,EAAc,kBAAd,CAA5B,CAAnB,CADe;AAEnB,YAAK,GAAL,CAAS;AACP,0BAAiB,EAAE,GAAF,CAAM,MAAN,EAAc,iBAAd,CAAjB;AACA,2BAAkB,gBAAlB;AACA,qBAAY,EAAE,GAAF,CAAM,MAAN,EAAc,YAAd,CAAZ;AACA,wBAAe,EAAE,GAAF,CAAM,MAAN,EAAc,eAAd,CAAf;QAJF,EAFmB;;;;wCAUF,QAAQ;;;AACzB,SAAE,GAAF,CAAM,MAAN,EAAc,UAAC,IAAD,EAAO,GAAP,EAAe;AAC3B,aAAI,OAAO,EAAE,IAAF,CAAO,OAAK,IAAL,CAAU,KAAV,CAAgB,QAAhB,CAAP,EAAkC,UAAC,IAAD,EAAU;AACrD,kBAAO,KAAK,GAAL,KAAa,GAAb,CAD8C;UAAV,CAAzC,CADuB;AAI3B,aAAI,IAAJ,EAAU;AACR,aAAE,MAAF,CAAS,KAAK,QAAL,EAAe,OAAO,GAAP,EAAY,QAAZ,CAAxB,CADQ;AAER,eAAI,EAAE,GAAF,CAAM,IAAN,EAAY,MAAZ,CAAJ,EAAyB;AACvB,kBAAK,IAAL,GAAY,KAAK,IAAL,CADW;YAAzB;UAFF;QAJY,CAAd,CADyB;;AAazB,YAAK,GAAL,CAAS;AACP,gBAAO,KAAK,IAAL,CAAU,KAAV;QADT,EAbyB;AAgBzB,YAAK,YAAL,GAhByB;;;;;;;;;;uCAuBT,aAAa;AAC7B,WAAI,cAAJ,CAD6B;AAE7B,WAAI,qBAAJ,CAF6B;;AAI7B,SAAE,MAAF,CAAS,WAAT,EAAsB,UAAC,IAAD,EAAU;AAAC,gBAAO,CAAC,IAAD,CAAR;QAAV,CAAtB,CAJ6B;AAK7B,sBAAe,KAAK,UAAL,CAAgB,WAAhB,CAAf,CAL6B;AAM7B,eAAQ,KAAK,UAAL,CAAgB,YAAhB,CAAR,CAN6B;AAO7B,SAAE,MAAF,CAAS,KAAK,IAAL,EAAW;AAClB,gBAAO,EAAE,QAAF,CAAW,KAAX,EAAkB,EAAC,OAAO,EAAP,EAAW,QAAQ,EAAR,EAA9B,CAAP;AACA,sBAAa,KAAK,IAAL,CAAU,WAAV;QAFf,EAP6B;AAW7B,WAAI,KAAK,gBAAL,IAAyB,CAAC,YAAY,KAAK,IAAL,CAAU,WAAV,CAAb,IAAuC,CAAC,gBAAM,GAAN,CAAU,SAAV,CAAoB,KAAK,IAAL,CAAU,WAAV,CAArB,EAA6C;AAC/G,cAAK,IAAL,CAAU,WAAV,GAAwB,OAAxB,CAD+G;QAAjH;AAGA,YAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,IAAL,CAAU,WAAV,EAAuB,KAAK,IAAL,CAAU,KAAV,CAApD,CAd6B;;;;oCAiBhB,UAAU;AACvB,SAAE,MAAF,CAAS,KAAK,IAAL,CAAU,KAAV,CAAgB,MAAhB,EAAwB,UAAC,IAAD,EAAU;AACzC,aAAI,OAAO,EAAE,GAAF,CAAM,QAAN,SAAqB,KAAK,GAAL,YAArB,CAAP,CADqC;AAEzC,aAAI,IAAJ,EAAU;AACR,gBAAK,IAAL,GAAY,IAAZ,CADQ;UAAV;QAF+B,CAAjC,CADuB;AAOvB,YAAK,GAAL,CAAS;AACP,gBAAO,KAAK,IAAL,CAAU,KAAV;QADT,EAPuB;;;;kCAYZ,KAAI;AACf,cAAO,KAAK,IAAL,CAAU,UAAV,CAAqB,OAArB,CAA6B,GAA7B,CAAP,CADe;;;;iCAIL,KAAK;AACf,WAAI,QAAJ,EAAc,GAAd,CADe;AAEf,WAAI,KAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,EAA6B;AAC/B,eAAM,KAAK,YAAL,CAAkB,GAAlB,CAAN,CAD+B;AAE/B,aAAI,OAAO,CAAP,EAAU;AACZ,eAAI,QAAQ,KAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,GAA8B,CAA9B,EAAiC;AAC3C,mBAD2C;YAA7C,MAEO;AACL,mBADK;YAFP;AAKA,eAAI,MAAM,CAAC,CAAD,EAAI;AACZ,wBAAW,KAAK,IAAL,CAAU,UAAV,CAAqB,GAArB,CAAX,CADY;YAAd;UANF;QAFF;AAaA,cAAO,YAAY,OAAZ,CAfQ;;;;sCAkBA,KAAK;AACpB,WAAI,QAAQ,KAAK,YAAL,CAAkB,GAAlB,CAAR,CADgB;AAEpB,WAAI,UAAU,CAAC,CAAD,EAAG;AACX,cAAK,KAAL,CAAW,gBAAX,CAA4B,GAA5B,IAAmC,KAAnC,CADW;QAAjB;AAGA,WAAI,QAAQ,KAAK,IAAL,CAAU,WAAV,EAAuB;AACjC,aAAI,OAAO;AACT,gBAAK,KAAK,WAAL,CAAiB,GAAjB,CAAL;AACA,qBAAU,IAAV;UAFE,CAD6B;AAKjC,kCAAc,QAAd,CAAuB,WAAvB,EAAoC,IAApC,EALiC;AAMjC,wCAAoB,QAApB,CAA6B,uBAA7B,EAAsD,IAAtD,EANiC;QAAnC;AAQA,gCAAc,QAAd,CAAuB,mBAAvB,EAboB;;;;sCAgBL,KAAK;AACpB,WAAI,WAAW,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,KAAhB,EAAuB,EAAC,KAAK,GAAL,EAA/B,KAA6C,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,MAAhB,EAAwB,EAAC,KAAK,GAAL,EAAhC,CAA7C,CADK;AAEpB,WAAI,cAAc,YAAY,gBAAM,GAAN,CAAU,SAAV,CAAoB,GAApB,CAAZ,GAAuC,GAAvC,GAA6C,OAA7C,CAFE;AAGpB,SAAE,GAAF,CAAM,KAAK,IAAL,CAAU,KAAV,EAAiB,UAAC,KAAD,EAAW;AAChC,WAAE,MAAF,CAAS,EAAE,IAAF,CAAO,KAAP,EAAc,UAAC,IAAD,EAAU;AAC/B,kBAAO,KAAK,GAAL,KAAa,GAAb,CADwB;UAAV,CAAvB,EADgC;QAAX,CAAvB,CAHoB;AAQpB,YAAK,GAAL,CAAS;AACP,gBAAO,KAAK,IAAL,CAAU,KAAV;AACP,sBAAa,WAAb;QAFF,EARoB;AAYpB,YAAK,YAAL,GAZoB;AAapB,WAAI,KAAK,gBAAL,EAAuB;AACzB,cAAK,kBAAL,GADyB;QAA3B;;;;mCAKY,cAAc;;;AAC1B,WAAI,YAAY,EAAE,SAAF,CAAY,KAAK,IAAL,CAAU,UAAV,EAAsB,UAAC,GAAD,EAAS;AACzD,gBAAO,QAAQ,OAAK,IAAL,CAAU,WAAV,CAD0C;QAAT,CAA9C,CADsB;;AAK1B,WAAI,aAAa,SAAb,KAA2B,IAA3B,EAAiC;AACnC,cAAK,eAAL,CAAqB,SAArB,EADmC;QAArC,MAEO,IAAI,aAAa,SAAb,KAA2B,MAA3B,EAAmC;AAC5C,cAAK,iBAAL,CAAuB,SAAvB,EAD4C;QAAvC,MAEA,IAAI,aAAa,SAAb,KAA2B,KAA3B,EAAkC;AAC3C,cAAK,iBAAL,GAD2C;QAAtC,MAEA,IAAI,aAAa,SAAb,KAA2B,QAA3B,EAAqC;AAC9C,cAAK,oBAAL,GAD8C;QAAzC,MAEA,IAAI,aAAa,SAAb,KAA2B,OAA3B,EAAoC;AAC7C,cAAK,qBAAL,CAA2B,aAAa,KAAb,CAA3B,CAD6C;QAAxC;;AAIP,gCAAc,QAAd,CAAuB,mBAAvB,EAjB0B;;;;yCAoBR;AAClB,WAAI,SAAS,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,UAAV,CAAhB,CADc;AAElB,WAAI,UAAU,WAAW,KAAK,IAAL,CAAU,WAAV,EAAuB;AAC9C,kCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,gBAAK,MAAL;UADF,EAD8C;QAAhD;;;;4CAOqB;AACrB,WAAI,SAAS,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,UAAV,CAAhB,CADiB;AAErB,WAAI,UAAU,WAAW,KAAK,IAAL,CAAU,WAAV,EAAuB;AAC9C,kCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,gBAAK,MAAL;UADF,EAD8C;QAAhD;;;;2CAOoB,OAAO;AAC3B,WAAI,SAAS,KAAK,IAAL,CAAU,UAAV,CAAqB,KAArB,CAAT,CADuB;AAE3B,WAAI,UAAU,WAAW,KAAK,IAAL,CAAU,WAAV,EAAuB;AAC9C,kCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,gBAAK,MAAL;UADF,EAD8C;QAAhD;;;;qCAOc,WAAW;AACzB,WAAI,MAAJ,CADyB;AAEzB,WAAI,cAAc,CAAC,CAAD,IAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,IAAL,CAAU,WAAV,CAAvC,EAA+D;AACjE,kBAAS,KAAK,IAAL,CAAU,UAAV,CAAqB,KAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,GAA8B,CAA9B,CAA9B,CADiE;QAAnE,MAEO,IAAI,cAAc,CAAd,EAAiB;AAC1B,kBAAS,OAAT,CAD0B;QAArB,MAEA;AACL,kBAAS,KAAK,IAAL,CAAU,UAAV,CAAqB,YAAY,CAAZ,CAA9B,CADK;QAFA;;AAMP,WAAI,MAAJ,EAAY;AACV,kCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,gBAAK,MAAL;UADF,EADU;QAAZ;;;;uCAOgB,WAAW;AAC3B,WAAI,MAAJ,CAD2B;AAE3B,WAAI,cAAc,CAAC,CAAD,IAAM,gBAAM,GAAN,CAAU,QAAV,CAAmB,KAAK,IAAL,CAAU,WAAV,CAAvC,EAA+D;AACjE,kBAAS,KAAK,IAAL,CAAU,UAAV,CAAqB,CAArB,CAAT,CADiE;QAAnE,MAEO,IAAI,cAAc,KAAK,IAAL,CAAU,UAAV,CAAqB,MAArB,GAA8B,CAA9B,EAAiC;AACxD,kBAAS,OAAT,CADwD;QAAnD,MAEA;AACL,kBAAS,KAAK,IAAL,CAAU,UAAV,CAAqB,YAAY,CAAZ,CAA9B,CADK;QAFA;;AAMP,WAAI,MAAJ,EAAY;AACV,kCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,gBAAK,MAAL;UADF,EADU;QAAZ;;;;;;;qCAQc,MAAM;AACpB,WAAI,kBAAkB,EAAlB,CADgB;AAEpB,WAAI,qBAAJ,CAFoB;AAGpB,WAAI,cAAJ,CAHoB;;AAKpB,yBAAkB,gBAAgB,MAAhB,CAAuB,KAAK,IAAL,CAAU,KAAV,CAAgB,OAAhB,CAAvB,EAAiD,KAAK,IAAL,CAAU,KAAV,CAAgB,QAAhB,CAAjD,CAAlB,CALoB;AAMpB,sBAAe,EAAE,GAAF,CAAM,IAAN,EAAY,UAAC,GAAD,EAAS;AAClC,gBAAO,EAAE,IAAF,CAAO,eAAP,EAAwB,UAAU,IAAV,EAAgB;AAC7C,kBAAO,KAAK,GAAL,KAAa,GAAb,CADsC;UAAhB,CAA/B,CADkC;QAAT,CAA3B,CANoB;AAWpB,eAAQ,EAAE,OAAF,CAAU,YAAV,EAAwB,UAAU,IAAV,EAAgB;AAC9C,gBAAO,KAAK,IAAL,KAAc,WAAd,GAA4B,OAA5B,GAAsC,QAAtC,CADuC;QAAhB,CAAhC,CAXoB;AAcpB,YAAK,SAAL,CAAe,YAAf,EAA6B,KAAK,IAAL,CAAU,WAAV,EAAuB,KAApD,EAdoB;;;;+BAiBZ,UAAU,YAAY,SAAS;AACvC,WAAI,WAAW,EAAE,GAAF,CAAM,QAAN,EAAgB,UAAU,IAAV,EAAgB;AAC7C,gBAAO;AACL,gBAAK,KAAK,GAAL;AACL,iBAAM,KAAK,IAAL;UAFR,CAD6C;QAAhB,CAA3B,CADmC;;AAQvC,YAAK,GAAL,CAAS;AACP,gBAAO,OAAP;AACA,sBAAa,UAAb;QAFF,EARuC;AAYvC,YAAK,KAAL,CAAW,SAAX,GAAuB,QAAC,CAAS,MAAT,GAAmB,QAApB,GAA+B,KAA/B,CAZgB;AAavC,WAAI,KAAK,gBAAL,EAAuB;AACzB,cAAK,kBAAL,GADyB;AAEzB,cAAK,YAAL,GAFyB;QAA3B;;;;iCAMU;AACV,WAAI,QAAQ,EAAR,CADM;;AAGV,aAAM,UAAN,IAAoB,KAAK,KAAL,CAAW,SAAX,CAHV;AAIV,WAAI,KAAK,IAAL,CAAU,WAAV,KAA0B,QAA1B,EAAoC;AACtC,eAAM,aAAN,IAAuB,KAAK,IAAL,CAAU,WAAV,CADe;QAAxC;;AAIA,qCAAmB,eAAnB,CAAmC,KAAnC,EARU;;;;qCAWI,QAAQ;AACtB,WAAI,MAAJ,EAAY;AACV,cAAK,GAAL,CAAS;AACP,wBAAa,MAAb;AACA,qBAAU,IAAV;UAFF,EADU;QAAZ;;;;oCAQa,OAAO;AACpB,WAAI,SAAS,MAAM,MAAN,IAAgB,MAAM,OAAN,EAAe;AAC1C,cAAK,GAAL,CAAS;AACP,6BAAkB,MAAM,MAAN;AAClB,8BAAmB,MAAM,OAAN;AACnB,qBAAU,IAAV;UAHF,EAD0C;QAA5C;;;;qCASc;AACd,YAAK,GAAL,CAAS;AACP,2BAAkB,KAAlB;AACA,4BAAmB,KAAnB;AACA,mBAAU,KAAV;QAHF,EADc;;;UAnbZ;;;AA6bN,QAAO,OAAP,GAAiB,IAAI,aAAJ,EAAjB,C;;;;;;;;;;;;mBCrce;;AAEb,aAAU,kBAAC,CAAD,EAAO;;AAEf,SAAI,CAAC,UAAU,aAAV,EAAyB;;AAE5B,SAAE,cAAF,GAF4B;;AAI5B,WAAI,OAAO,SAAS,cAAT,CAAwB,EAAE,MAAF,CAAS,YAAT,CAAsB,MAAtB,CAAxB,CAAP,CAJwB;;AAM5B,WAAI,IAAJ,EAAS;AACP,aAAI,SAAS,KAAK,aAAL,CAAmB,aAAnB,CAAiC,OAAjC,CAAT,CADG;AAEP,gBAAO,KAAP,CAAa,OAAb,GAAuB,MAAvB,CAFO;AAGP,gBAAO,IAAP,GAAc,QAAd,CAHO;AAIP,cAAK,WAAL,CAAiB,MAAjB,EAAyB,KAAzB,GAJO;AAKP,cAAK,WAAL,CAAiB,MAAjB,EALO;QAAT;MANF;IAFQ;;;;;;;;;;ACHZ,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,kBAAkB,oBAAQ,GAAR,CAAlB;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,WAAQ,CAAC,aAAD,CAAR;;AAEA,iBAAc,wBAAY;AACxB,YAAO,QAAQ,sBAAR,CADiB;IAAZ;;AAId,gBAAa,uBAAY;AACvB,YACE,oBAAC,eAAD,OADF,CADuB;IAAZ;;AAMb,wBAAqB,+BAAY;AAC/B,YACE;;SAAQ,MAAK,mBAAL,EAAyB,WAAU,+BAAV,EAA0C,MAAK,QAAL,EAAc,SAAS,KAAK,QAAL,EAAlG;OAAkH,QAAQ,EAAR;MADpH,CAD+B;IAAZ;;AAMrB,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,qBAAT;AACX,cAAO,KAAK,YAAL,EAAP;AACA,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,sBAAc,QAAd;AACA,aAAK,OAAL,EALF,CADF,CADkB;IAAZ;EAtBO,CAAjB,C;;;;;;;;;;;;ACLA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,iBAAb;;AAEA,2DAAwB;AACtB,YAAO,CAAC,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,MAAV,CAArB,EAAwC,gBAAxC,CAAyD,UAAzD,EAAqE,MAArE,CADc;IAJO;AAQ/B,mDAAoB;AAClB,2BAAW,EAAX,CAAc,CAAC,cAAD,EAAiB,mBAAjB,EAAsC,+BAAtC,CAAd,EAAsF,KAAK,SAAL,CAAtF,CADkB;IARW;AAY/B,qDAAqB;AACnB,cAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAArB,CAAqC,KAArC,GADmB;AAEnB,SAAI,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAAvB,EAAwC,IAAxC,CAA6C,cAA7C,CAAJ,EAAkE;AAChE,WAAI,CAAJ,CAAM,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAA3B,EAA4C,IAA5C,CAAiD,cAAjD,EAAiE,UAAjE,CAA4E,MAA5E,EAAoF,IAApF,EADgE;MAAlE;IAd6B;AAmB/B,yDAAuB;AACrB,2BAAW,GAAX,CAAe,CAAC,cAAD,EAAiB,mBAAjB,EAAsC,+BAAtC,CAAf,EAAuF,KAAK,SAAL,CAAvF,CADqB;IAnBQ;AAuB/B,+CAAkB;AAChB,YAAO,KAAK,SAAL,EAAP,CADgB;IAvBa;AA2B/B,mCAAW;AACT,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADS;IA3BoB;AA+B/B,mCAAW;AACT,YAAO;AACL,+BAAwB,sBAAW,GAAX,CAAe,wBAAf,CAAxB;AACA,cAAO,sBAAW,GAAX,CAAe,OAAf,CAAP;AACA,mBAAY,sBAAW,GAAX,CAAe,YAAf,CAAZ;MAHF,CADS;IA/BoB;AAuC/B,+BAAS,KAAK;AACZ,YAAO,KAAK,KAAL,CAAW,KAAX,CAAiB,GAAjB,EAAsB,IAAtB,CADK;IAvCiB;AA2C/B,6BAAQ,KAAK;AACX,YAAO,OAAO,KAAK,KAAL,CAAW,KAAX,CAAiB,GAAjB,EAAsB,EAAtB,CAAd,CADW;IA3CkB;AA+C/B,+BAAS,KAAK;AACZ,YAAO,EAAE,QAAF,CAAW,KAAK,KAAL,CAAW,UAAX,CAAsB,MAAtB,EAA8B,KAAK,OAAL,CAAa,GAAb,CAAzC,CAAP,CADY;IA/CiB;AAmD/B,mDAAoB;;;AAClB,SAAI,eAAe,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,sBAAX,EAAmC,UAAC,GAAD,EAAS;AACnE,cAAO;AACL,cAAK,GAAL;AACA,eAAM,MAAK,QAAL,CAAc,GAAd,CAAN;AACA,kBAAS,MAAK,QAAL,CAAc,GAAd,CAAT;QAHF,CADmE;MAAT,CAAxD,CADc;AAQlB,YAAO,EAAE,MAAF,CAAS,YAAT,EAAuB,CAAC,SAAD,EAAY,MAAZ,CAAvB,CAAP,CARkB;IAnDW;AA8D/B,iCAAU,GAAG;AACX,OAAE,cAAF,GADW;AAEX,SAAI,cAAc,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAAvB,EAAwC,cAAxC,EAAd;SACA,cAAc;AACZ,iBAAU,KAAK,KAAL,CAAW,UAAX,CAAsB,GAAtB;AACV,kBAAW,EAAE,GAAF,CAAM,WAAN,EAAmB,OAAnB,CAAX;MAFF,CAHO;;AAQX,SAAI,YAAY,SAAZ,CAAsB,MAAtB,EAA8B;AAChC,8BAAY,WAAZ,CAAwB,WAAxB,EAAqC,KAAK,eAAL,CAArC,CADgC;MAAlC,MAEO;AACL,YAAK,eAAL,CAAqB,wBAAQ,IAAR,CAAa,aAAb,CAArB,CADK;MAFP;AAKA,UAAK,YAAL,GAbW;IA9DkB;AA8E/B,6CAAgB,MAAM;AACpB,SAAI,KAAK,KAAL,EAAY;AACd,WAAI,YAAY,CAAC,CAAE,GAAF,CAAM,IAAN,EAAY,mBAAZ,CAAD,GAAqC,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,GAAyB,wBAAQ,IAAR,CAAa,YAAb,CADhE;AAEd,YAAK,eAAL,CAAqB,SAArB,EAFc;MAAhB,MAGO;AACL,YAAK,iBAAL,CAAuB,wBAAQ,OAAR,CAAgB,aAAhB,CAAvB,CADK;MAHP;IA/E6B;AAuF/B,iDAAkB,KAAK;AACrB,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADqB;IAvFQ;AA+F/B,6CAAgB,OAAO;AACrB,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,SAAL,CAAe,KAAf,CAAN;AACA,cAAO,QAAP;MAHF,EADqB;IA/FQ;AAuG/B,+CAAiB,GAAG;AAClB,OAAE,cAAF,GADkB;AAElB,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,UAApB,EAAgC,IAAhC,CAAqC,YAArC,CAAb,CAFc;AAGlB,4BAAY,UAAZ,CAAuB,UAAvB,EAHkB;AAIlB,UAAK,WAAL,GAJkB;IAvGW;AA8G/B,iCAAU,WAAW;;;AACnB,YAAO;cACH;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,SAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,OAAK,gBAAL,EAAuB,MAAK,GAAL,EAAnC;eAA6C,wBAAQ,MAAR,CAAe,SAAf;cAAjD;YADF;UAFF;;MADG,CADY;IA9GU;AAyH/B,uCAAc;AACZ,8BAAc,qBAAd,GADY;IAzHiB;AA6H/B,yCAAe;AACb,8BAAc,WAAd,GADa;IA7HgB;AAiI/B,6BAAS;AACP,SAAI,qBAAqB,KAAK,iBAAL,EAArB,CADG;AAEP,YACE;;SAAM,IAAG,mBAAH,EAAuB,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAlE;OACE;;;SAAO,wBAAQ,WAAR,CAAoB,uBAApB;QADT;OAGI,EAAE,GAAF,CAAM,kBAAN,EAA0B,UAAC,IAAD,EAAO,KAAP,EAAiB;AACzC,gBAAO,oDAAkB,IAAI,KAAK,GAAL,EAAU,OAAO,KAAK,GAAL,EAAU,OAAO,KAAK,IAAL,EAAW,UAAU,KAAK,OAAL,EAAc,KAAK,KAAL,EAA3F,CAAP,CADyC;QAAjB,CAH9B;MADF,CAFO;IAjIsB;EAAlB;;;;;;;;;ACPf,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,iBAAiB,oBAAQ,GAAR,CAAjB;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;KACA,wBAAwB,oBAAQ,GAAR,CAAxB;KACA,KAAK,oBAAQ,GAAR,CAAL;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,WAAQ,CAAC,aAAD,EAAgB,qBAAhB,CAAR;;AAEA,gBAAa,uBAAY;AACvB,YACE,oBAAC,cAAD,IAAgB,eAAe,KAAK,KAAL,CAAW,aAAX;AACf,gBAAS,KAAK,KAAL,CAAW,UAAX;AACT,kBAAW,KAAK,KAAL,CAAW,SAAX;AACX,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,gBAAS,KAAK,KAAL,CAAW,OAAX,EAJzB,CADF,CADuB;IAAZ;;AAUb,wBAAqB,+BAAY;AAC/B,SAAI,aAAa,GAAG;AACd,qBAAc,IAAd;AACA,6BAAsB,IAAtB;MAFW,CAAb,CAD2B;;AAM/B,YACE;;SAAQ,MAAK,kBAAL,EAAwB,WAAW,UAAX,EAAuB,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,UAAU,KAAK,KAAL,CAAW,UAAX,EAAuB,MAAK,QAAL,EAAc,SAAS,KAAK,QAAL,EAArJ;OAAqK,QAAQ,WAAR;MADvK,CAN+B;IAAZ;;AAWrB,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,oBAAT;AACX,cAAO,QAAQ,iBAAR;AACP,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,sBAAc,QAAd,EALF,CADF,CADkB;IAAZ;EA3BO,CAAjB,C;;;;;;;;;;;;ACPA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,gBAAb;;AAEA,WAAQ,mCAAR;;AAEA,sBAAmB,6BAAW;AAC5B,2BAAW,EAAX,CAAc,kBAAd,EAAkC,KAAK,SAAL,CAAlC,CAD4B;AAE5B,UAAK,eAAL,GAAuB,IAAvB,CAF4B;IAAX;;AAKnB,yBAAsB,gCAAW;AAC/B,2BAAW,GAAX,CAAe,kBAAf,EAAmC,KAAK,SAAL,CAAnC,CAD+B;IAAX;;AAItB,uBAAoB,8BAAW;AAC7B,SAAI,KAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,IAA2B,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,eAAL,EAAuB;AAChF,YAAK,WAAL,GADgF;AAEhF,YAAK,eAAL,GAAuB,KAAvB,CAFgF;MAAlF;IADkB;;AAOpB,oBAAiB,2BAAY;AAC3B,SAAI,eAAe,EAAE,MAAF,CAAS;AAC1B,kBAAW,KAAK,KAAL,CAAW,SAAX,IAAwB,IAAxB;AACX,mBAAY,KAAK,KAAL,CAAW,UAAX,IAAyB,IAAzB;AACZ,gBAAS,KAAK,KAAL,CAAW,OAAX,IAAsB,QAAtB;MAHQ,EAIhB,KAAK,SAAL,EAJgB,CAAf,CADuB;AAM3B,YAAO,YAAP,CAN2B;IAAZ;;AASjB,cAAW,qBAAU;AACnB,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADmB;IAAV;;AAIX,cAAW,qBAAU;AACnB,YAAO;AACL,kBAAW,sBAAW,GAAX,CAAe,WAAf,CAAX;AACA,eAAQ,EAAR;MAFF,CADmB;IAAV;;AAOX,cAAW,mBAAU,CAAV,EAAa;AACtB,OAAE,cAAF,GADsB;AAEtB,SAAI,cAAc,EAAE,KAAK,IAAL,CAAU,IAAV,CAAF,CAAkB,cAAlB,EAAd;SACA,UAAU,WAAC,CAAY,CAAZ,CAAD,GAAmB,YAAY,CAAZ,EAAe,KAAf,GAAuB,QAA1C;SACV,cAAc;AACZ,aAAM,YAAY,CAAZ,EAAe,KAAf,CAAqB,IAArB,EAAN;AACA,cAAO,WAAC,CAAY,CAAZ,CAAD,GAAmB,YAAY,CAAZ,EAAe,KAAf,CAAqB,IAArB,EAAnB,GAAiD,EAAjD;AACP,uBAHY;MAAd,CAJkB;;AAUtB,SAAI,SAAS,KAAK,iBAAL,CAAuB,WAAvB,CAAT,CAVkB;AAWtB,SAAI,MAAJ,EAAY;AACV,YAAK,QAAL,CAAc,EAAE,cAAF,EAAU,gBAAV,EAAd,EADU;MAAZ,MAEO;AACL,YAAK,QAAL,CAAc,EAAE,QAAQ,EAAR,EAAY,gBAAd,EAAd,EADK;AAEL,gCAAc,eAAd,GAFK;AAGL,8BAAY,UAAZ,CAAuB,WAAvB,EAAoC,KAAK,eAAL,CAApC,CAHK;MAFP;IAXS;;AAoBX,sBAAmB,2BAAU,QAAV,EAAoB;AACrC,SAAI,SAAS,EAAT;;;AADiC,SAIjC,CAAC,SAAS,IAAT,EAAe;AAClB,cAAO,IAAP,GAAc,6BAAW,gBAAX,CAA4B,YAA5B,CADI;MAApB,MAEO,IAAI,SAAS,IAAT,CAAc,MAAd,GAAuB,EAAvB,EAA2B;AACpC,cAAO,IAAP,GAAc,6BAAW,gBAAX,CAA4B,aAA5B,CADsB;MAA/B,MAEA,IAAI,EAAE,IAAF,CAAO,KAAK,KAAL,CAAW,SAAX,EAAsB,UAAU,QAAV,EAAoB;AAAE,cAAO,EAAE,QAAF,CAAW,QAAX,KAAyB,SAAS,WAAT,OAA2B,SAAS,IAAT,CAAc,WAAd,EAA3B,CAAlC;MAApB,CAAjC,EAAoJ;AACzJ,cAAO,IAAP,GAAc,6BAAW,gBAAX,CAA4B,mBAA5B,CAD2I;MAApJ;;;AAR8B,SAajC,SAAS,KAAT,CAAe,MAAf,GAAwB,qBAAU,qBAAV,EAAiC;AAC3D,cAAO,KAAP,GAAe,8BAAkB,kBAAlB,CAAqC,qBAAU,qBAAV,CAApD,CAD2D;MAA7D;;AAIA,YAAO,CAAC,EAAE,OAAF,CAAU,MAAV,CAAD,GAAqB,MAArB,GAA8B,IAA9B,CAjB8B;IAApB;;AAoBnB,oBAAiB,yBAAU,KAAV,EAAiB,IAAjB,EAAuB;AACtC,SAAI,KAAJ,EAAW;AACT,YAAK,QAAL,CAAc;AACZ,iBAAQ;AACN,iBAAM,MAAM,MAAN,KAAiB,GAAjB,GAAuB,6BAAW,gBAAX,CAA4B,aAA5B,GAA6C,MAAM,OAAN,IAAiB,wBAAQ,IAAR,CAAa,WAAb;UAD7F;QADF,EADS;AAMT,gCAAc,cAAd,GANS;MAAX,MAOO;AACL,WAAI,OAAO,KAAK,IAAL,IAAa,MAAb;WACP,cAAc,wBAAQ,OAAR,CAAgB,YAAhB,CAA6B,IAA7B,CAAd,CAFC;AAGL,YAAK,iBAAL,CAAuB,WAAvB,EAHK;AAIL,kCAAe,MAAf,CAAsB,KAAK,GAAL,EAAU,WAAhC,EAJK;MAPP;IADe;;AAgBjB,sBAAmB,2BAAU,GAAV,EAAe;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADgC;IAAf;;AAQnB,gBAAa,uBAAY;AACvB,8BAAc,oBAAd,GADuB;IAAZ;;AAIb,gBAAa,uBAAY;AACvB,cAAS,cAAT,CAAwB,kBAAxB,EAA4C,KAA5C,GADuB;IAAZ;;AAIb,WAAQ,kBAAY;AAClB,SAAI,SAAS,KAAK,KAAL,CAAW,MAAX,CADK;AAElB,SAAI,YAAY,KAAK,KAAL,CAAW,SAAX,CAFE;AAGlB,SAAI,aAAa,KAAK,KAAL,CAAW,UAAX,CAHC;AAIlB,SAAI,UAAU,KAAK,KAAL,CAAW,OAAX,CAJI;AAKlB,YACE;;SAAM,IAAG,kBAAH,EAAsB,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAjE;OACE,sDAAoB,OAAO,SAAP;AACA,mBAAU,KAAK,KAAL,CAAW,OAAX;AACV,cAAI,WAAJ;AACA,aAAG,kBAAH;AACA,gBAAO,wBAAQ,KAAR,CAAc,SAAd;AACP,oBAAU,IAAV;AACA,sBAAa,wBAAQ,WAAR,CAAoB,uBAApB;AACb,gBAAO,OAAO,IAAP,EAP3B,CADF;OASE,sDAAoB,OAAO,UAAP;AACA,mBAAU,KAAK,KAAL,CAAW,OAAX;AACV,cAAI,YAAJ;AACA,aAAG,mBAAH;AACA,gBAAO,wBAAQ,KAAR,CAAc,UAAd;AACP,oBAAW,qBAAU,qBAAV;AACX,sBAAa,wBAAQ,WAAR,CAAoB,iBAApB;AACb,gBAAO,OAAO,KAAP,EAP3B,CATF;OAiBE,qDAAmB,UAAU,KAAK,KAAL,CAAW,OAAX;AACV,yBAAgB,OAAhB,EADnB,CAjBF;MADF,CALkB;IAAZ;EAlHK;;;;;;;;;ACbf,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,WAAW,oBAAQ,GAAR,CAAX;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,mBAAb;;AAEA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,oBAAa,QAAQ,WAAR,CAAoB,WAApB;AACb,qBAAc,QAAQ,WAAR,CAAoB,YAApB;MAFhB,CAD0B;IAAX;;AAOjB,WAAQ,kBAAW;AACjB,YACE;AAAC,kBAAD;SAAa,OAAM,SAAN,EAAb;OACE,oBAAC,QAAD,IAAU,IAAG,aAAH,EAAiB,KAAK,EAAE,QAAF,EAAL,EAAmB,MAAK,SAAL,EAAe,gBAAgB,KAAK,KAAL,CAAW,cAAX,KAA8B,QAA9B,EAAwC,OAAM,QAAN,EAAe,OAAO,QAAQ,KAAR,CAAc,WAAd,EAA2B,aAAa,KAAK,KAAL,CAAW,WAAX,EAAnL,CADF;OAEE,oBAAC,QAAD,IAAU,IAAG,cAAH,EAAkB,KAAK,EAAE,QAAF,EAAL,EAAmB,MAAK,SAAL,EAAe,gBAAgB,KAAK,KAAL,CAAW,cAAX,KAA8B,SAA9B,EAAyC,OAAM,SAAN,EAAgB,OAAO,QAAQ,KAAR,CAAc,YAAd,EAA4B,aAAa,KAAK,KAAL,CAAW,YAAX,EAAvL,CAFF;MADF,CADiB;IAAX;;EAXO,CAAjB,C;;;;;;;;ACJA,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,kBAAkB,oBAAQ,GAAR,CAAlB;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;KACA,KAAK,oBAAQ,GAAR,CAAL;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,mBAAb;;AAEA,WAAQ,CAAC,aAAD,CAAR;;AAEA,gBAAa,uBAAY;AACvB,YACE,oBAAC,eAAD,IAAiB,KAAK,KAAK,KAAL,CAAW,GAAX,EAAgB,MAAM,KAAK,KAAL,CAAW,IAAX,EAAiB,SAAS,KAAK,KAAL,CAAW,OAAX,EAAoB,SAAS,KAAK,KAAL,CAAW,UAAX,EAAnG,CADF,CADuB;IAAZ;;AAMb,wBAAqB,+BAAY;AAC/B,SAAI,aAAa,GAAG;AACd,qBAAc,IAAd;AACA,6BAAsB,IAAtB;MAFW,CAAb,CAD2B;;AAM/B,YACE;;SAAQ,MAAK,mBAAL,EAAyB,WAAW,UAAX,EAAuB,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,UAAU,KAAK,KAAL,CAAW,UAAX,EAAuB,MAAK,QAAL,EAAc,SAAS,KAAK,QAAL,EAAtJ;OAAsK,QAAQ,WAAR;MADxK,CAN+B;IAAZ;;AAWrB,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,qBAAT;AACX,cAAO,QAAQ,cAAR;AACP,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,sBAAe,QAAQ,MAAR,EALjB,CADF,CADkB;IAAZ;EAvBO,CAAjB,C;;;;;;;;;;;;ACNA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,iBAAb;;AAEA,0BAAuB,+BAAU,SAAV,EAAqB;AAC1C,SAAI,GAAJ,CAD0C;AAE1C,SAAI,CAAC,UAAU,OAAV,EAAmB;AACtB,aAAM,IAAN,CADsB;MAAxB,MAEO;AACL,aAAM,KAAN,CADK;MAFP;AAKA,YAAO,GAAP,CAP0C;IAArB;;AAUvB,cAAW,mBAAU,CAAV,EAAa;AACtB,OAAE,cAAF,GADsB;AAEtB,SAAI,cAAc,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAAvB,EAAwC,cAAxC,EAAd;SACA,cAAc;AACZ,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,gBAAS,YAAY,CAAZ,EAAe,KAAf;MAFX,CAHkB;;AAQtB,SAAI,YAAY,OAAZ,KAAwB,KAAK,KAAL,CAAW,OAAX,EAAoB;AAC9C,gCAAc,eAAd,GAD8C;AAE9C,8BAAY,iBAAZ,CAA8B,WAA9B,EAA2C,KAAK,eAAL,CAA3C,CAF8C;MAAhD;IARS;;AAcX,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,SAAI,KAAJ,EAAW;AACT,YAAK,eAAL,CAAqB,MAAM,OAAN,IAAiB,wBAAQ,IAAR,CAAa,mBAAb,CAAtC,CADS;MAAX,MAEO;AACL,WAAI,UAAU,IAAC,CAAK,KAAL,CAAW,OAAX,KAAuB,QAAvB,GAAmC,SAApC,GAAgD,QAAhD,CADT;AAEL,WAAI,cAAc,wBAAQ,OAAR,CAAgB,eAAhB,CAAgC,KAAK,KAAL,CAAW,IAAX,EAAiB,OAAjD,CAAd,CAFC;AAGL,YAAK,iBAAL,CAAuB,WAAvB,EAHK;MAFP;AAOA,UAAK,YAAL,GARgC;IAAjB;;AAWjB,sBAAmB,2BAAU,GAAV,EAAe;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADgC;IAAf;;AAQnB,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,SAAL,CAAe,KAAf,CAAN;AACA,cAAO,QAAP;MAHF,EADgC;IAAjB;;AAQjB,uBAAoB,4BAAU,CAAV,EAAa;AAC/B,OAAE,cAAF,GAD+B;AAE/B,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,UAApB,EAAgC,IAAhC,CAAqC,YAArC,CAAb,CAF2B;AAG/B,4BAAY,UAAZ,CAAuB,UAAvB,EAH+B;AAI/B,UAAK,WAAL,GAJ+B;IAAb;;AAOpB,cAAW,mBAAU,SAAV,EAAqB;;;AAC9B,YAAO;cACH;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,SAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,MAAK,kBAAL,EAAyB,MAAK,GAAL,EAArC;eAA+C,wBAAQ,MAAR,CAAe,SAAf;cAAnD;YADF;UAFF;;MADG,CADuB;IAArB;;AAWX,gBAAa,uBAAY;AACvB,8BAAc,qBAAd,CAAoC;AAClC,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,aAAM,KAAK,KAAL,CAAW,IAAX;AACN,gBAAS,KAAK,KAAL,CAAW,OAAX;MAHX,EADuB;IAAZ;;AAQb,iBAAc,wBAAY;AACxB,8BAAc,WAAd,GADwB;IAAZ;;AAId,WAAQ,kBAAY;AAClB,YACE;;SAAM,IAAG,mBAAH,EAAuB,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAlE;OACE,qDAAmB,gBAAgB,KAAK,KAAL,CAAW,OAAX,EAAoB,cAAc,wBAAQ,WAAR,CAAoB,OAApB,EAArE,CADF;MADF,CADkB;IAAZ;EArFK;;;;;;;;;ACNf,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,iBAAiB,oBAAQ,GAAR,CAAjB;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;KACA,wBAAwB,oBAAQ,GAAR,CAAxB;KACA,KAAK,oBAAQ,GAAR,CAAL;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,WAAQ,CAAC,aAAD,EAAgB,qBAAhB,CAAR;;AAEA,gBAAa,uBAAY;AACvB,YACE,oBAAC,cAAD,IAAgB,eAAe,KAAK,KAAL,CAAW,aAAX;AACf,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,aAAM,KAAK,KAAL,CAAW,IAAX;AACN,gBAAS,KAAK,KAAL,CAAW,UAAX,EAHzB,CADF,CADuB;IAAZ;;AASb,wBAAqB,+BAAY;AAC/B,SAAI,aAAa,GAAG;AACd,qBAAc,IAAd;AACA,6BAAsB,IAAtB;MAFW,CAAb,CAD2B;;AAM/B,YACE;;SAAQ,MAAK,kBAAL,EAAwB,WAAW,UAAX,EAAuB,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,UAAU,KAAK,KAAL,CAAW,UAAX,EAAuB,MAAK,QAAL,EAAc,SAAS,KAAK,QAAL,EAArJ;OAAqK,QAAQ,MAAR;MADvK,CAN+B;IAAZ;;AAWrB,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,oBAAT;AACX,cAAO,QAAQ,WAAR,CAAoB,KAAK,KAAL,CAAW,IAAX,CAA3B;AACA,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,sBAAe,QAAQ,MAAR,EALjB,CADF,CADkB;IAAZ;EA1BO,CAAjB,C;;;;;;;;ACPA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,gBAAb;;AAEA,sBAAmB,6BAAW;AAC5B,2BAAW,EAAX,CAAc,kBAAd,EAAkC,KAAK,SAAL,CAAlC,CAD4B;IAAX;;AAInB,yBAAsB,gCAAW;AAC/B,2BAAW,GAAX,CAAe,kBAAf,EAAmC,KAAK,SAAL,CAAnC,CAD+B;IAAX;;AAItB,uBAAoB,8BAAW;AAC7B,SAAI,KAAK,KAAL,CAAW,MAAX,CAAkB,IAAlB,IAA0B,KAAK,KAAL,CAAW,aAAX,EAA0B;AACpD,YAAK,WAAL,GADoD;MAAxD;IADkB;;AAMpB,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,SAAL,EAAP,CAD2B;IAAZ;;AAIjB,cAAW,qBAAU;AACnB,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADmB;IAAV;;AAIX,cAAW,qBAAU;AACnB,YAAO;AACL,kBAAW,sBAAW,GAAX,CAAe,WAAf,CAAX;AACA,eAAQ,EAAR;MAFF,CADmB;IAAV;;AAOX,cAAW,mBAAU,CAAV,EAAa;AACtB,OAAE,cAAF,GADsB;AAEtB,SAAI,cAAc,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,IAAV,CAAvB,EAAwC,cAAxC,EAAd;SACA,OAAO,YAAY,CAAZ,EAAe,KAAf,CAAqB,IAArB,EAAP,CAHkB;;AAKtB,SAAI,SAAS,KAAK,SAAL,CAAe,IAAf,CAAT,CALkB;AAMtB,SAAI,MAAJ,EAAY;AACV,YAAK,QAAL,CAAc;AACZ,iBAAQ,MAAR;QADF,EADU;MAAZ,MAIO;AACL,YAAK,YAAL,GADK;AAEL,gCAAc,eAAd,GAFK;AAGL,8BAAY,cAAZ,CAA2B;AACzB,cAAK,KAAK,KAAL,CAAW,GAAX;AACL,eAAM,IAAN;QAFF,EAGG,KAAK,eAAL,CAHH,CAHK;MAJP;IANS;;AAoBX,cAAW,mBAAU,IAAV,EAAgB;AACzB,SAAI,CAAC,IAAD,EAAO;AACT,cAAO;AACL,eAAM,6BAAW,gBAAX,CAA4B,YAA5B;QADR,CADS;MAAX,MAIO,IAAI,KAAK,MAAL,GAAc,EAAd,EAAkB;AAC3B,cAAO;AACL,eAAM,6BAAW,gBAAX,CAA4B,aAA5B;QADR,CAD2B;MAAtB,MAIA,IAAI,SAAS,KAAK,KAAL,CAAW,IAAX,EAAiB;AACnC,cAAO;AACL,eAAM,6BAAW,gBAAX,CAA4B,SAA5B;QADR,CADmC;MAA9B,MAIA,IAAI,EAAE,IAAF,CAAO,KAAK,KAAL,CAAW,SAAX,EAAsB,UAAU,QAAV,EAAoB;AAAE,cAAO,EAAE,QAAF,CAAW,QAAX,KAAyB,SAAS,WAAT,OAA2B,KAAK,WAAL,EAA3B,CAAlC;MAApB,CAAjC,EAA2I;AAChJ,cAAO;AACL,eAAM,6BAAW,gBAAX,CAA4B,mBAA5B;QADR,CADgJ;MAA3I;IAbE;;AAoBX,iBAAc,wBAAY;AACxB,UAAK,QAAL,CAAc;AACZ,eAAQ,EAAR;MADF,EADwB;IAAZ;;AAMd,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,SAAI,KAAJ,EAAW;AACT,YAAK,QAAL,CAAc;AACZ,iBAAQ;AACN,iBAAO,MAAM,OAAN,IAAiB,wBAAQ,IAAR,CAAa,WAAb;UAD1B;QADF,EADS;AAMT,gCAAc,cAAd,GANS;MAAX,MAOO;AACL,YAAK,iBAAL,CAAuB,wBAAQ,OAAR,CAAgB,WAAhB,CAAvB,CADK;AAEL,YAAK,YAAL,GAFK;MAPP;IADe;;AAcjB,sBAAmB,2BAAU,GAAV,EAAe;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADgC;IAAf;;AAQnB,qBAAkB,0BAAU,CAAV,EAAa;AAC7B,OAAE,cAAF,GAD6B;AAE7B,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,UAApB,EAAgC,IAAhC,CAAqC,YAArC,CAAb,CAFyB;AAG7B,4BAAY,UAAZ,CAAuB,UAAvB,EAH6B;AAI7B,UAAK,WAAL,GAJ6B;IAAb;;AAOlB,cAAW,qBAAY;;;AACrB,YAAO;cACH;;;SACE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,MAAK,gBAAL,EAAuB,MAAK,GAAL,EAAnC;eAA6C,wBAAQ,MAAR,CAAe,SAAf;cAAjD;YADF;UADF;;MADG,CADc;IAAZ;;AAUX,gBAAa,uBAAY;AACvB,8BAAc,oBAAd,CAAmC;AACjC,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,aAAM,KAAK,KAAL,CAAW,IAAX;MAFR,EADuB;IAAZ;;AAOb,iBAAc,wBAAY;AACxB,8BAAc,WAAd,GADwB;IAAZ;;AAId,gBAAa,uBAAY;AACvB,cAAS,cAAT,CAAwB,WAAxB,EAAqC,KAArC,GADuB;IAAZ;;AAIb,WAAQ,kBAAY;AAClB,SAAI,SAAS,KAAK,KAAL,CAAW,MAAX,CADK;;AAGlB,YACE;;SAAM,IAAG,kBAAH,EAAsB,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAjE;OACE,sDAAoB,IAAG,WAAH,EAAe,KAAI,WAAJ,EAAgB,UAAU,KAAK,KAAL,CAAW,OAAX,EAAoB,WAAU,IAAV,EAAe,OAAO,wBAAQ,KAAR,CAAc,aAAd,EAA6B,OAAO,OAAO,IAAP,EAA3I,CADF;MADF,CAHkB;IAAZ;EArIO,CAAjB,C;;;;;;;;;;;;ACRA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,kBAAb;;AAEA,cAAW;AACT,UAAK,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;IADP;;AAIA,sBAAmB,6BAAY;AAC7B,UAAK,YAAL,GAD6B;IAAZ;;AAInB,gBAAa,uBAAY;AACvB,YAAO,yBAAQ,cAAR,CAAuB,KAAK,KAAL,CAAW,IAAX,CAA9B,CADuB;IAAZ;;AAIb,wBAAqB,+BAAY;AAC/B,SAAI,aAAa,0BAAG;AACd,qBAAc,IAAd;AACA,6BAAsB,IAAtB;MAFW,CAAb,CAD2B;;AAM/B,YACE;;SAAQ,SAAS,KAAK,WAAL,EAAkB,WAAW,UAAX,EAAuB,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,UAAU,KAAK,KAAL,CAAW,UAAX,EAA1G;OAAkI,yBAAQ,WAAR;MADpI,CAN+B;IAAZ;;AAWrB,gBAAa,qBAAU,CAAV,EAAa;AACxB,OAAE,cAAF,GADwB;AAExB,8BAAc,eAAd,GAFwB;AAGxB,qCAAoB,UAApB,CAA+B;AAC7B,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,WAAI,KAAK,KAAL,CAAW,OAAX;MAFN,EAGG,KAAK,eAAL,CAHH,CAHwB;IAAb;;AASb,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,SAAI,KAAJ,EAAW;AACT,YAAK,eAAL,CAAqB,MAAM,OAAN,IAAiB,yBAAQ,gBAAR,CAAtC,CADS;MAAX,MAEO;AACL,WAAI,cAAc,yBAAQ,YAAR,CAAqB,KAAK,KAAL,CAAW,IAAX,CAAnC,CADC;AAEL,YAAK,iBAAL,CAAuB,WAAvB,EAFK;AAGL,uCAAoB,SAApB,CAA8B,KAAK,KAAL,CAAW,GAAX,CAA9B,CAHK;MAFP;AAOA,UAAK,YAAL,GARgC;IAAjB;;AAWjB,sBAAmB,2BAAU,GAAV,EAAe;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADgC;IAAf;;AAQnB,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,SAAL,CAAe,KAAf,CAAN;AACA,cAAO,QAAP;MAHF,EADgC;IAAjB;;AAQjB,cAAW,mBAAU,SAAV,EAAqB;;;AAC9B,YAAO;cACL;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,SAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,MAAK,gBAAL,EAAuB,MAAK,GAAL,EAAnC;eAA6C,yBAAQ,SAAR;cAAjD;YADF;UAFF;;MADK,CADuB;IAArB;;AAWX,qBAAkB,0BAAU,CAAV,EAAa;AAC7B,OAAE,cAAF,GAD6B;AAE7B,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,OAApB,EAA6B,IAA7B,CAAkC,YAAlC,CAAb,CAFyB;AAG7B,4BAAY,UAAZ,CAAuB,UAAvB,EAH6B;AAI7B,UAAK,WAAL,GAJ6B;IAAb;;AAOlB,gBAAa,uBAAY;AACvB,8BAAc,oBAAd,CAAmC;AACjC,YAAK,KAAK,KAAL,CAAW,GAAX;AACL,aAAM,KAAK,KAAL,CAAW,IAAX;MAFR,EADuB;IAAZ;;AAOb,iBAAc,wBAAY;AACxB,8BAAc,WAAd,GADwB;IAAZ;;AAId,iBAAc,wBAAY;AACxB,cAAS,WAAT,CAAqB,IAArB,EAA2B,aAA3B,CAAyC,qBAAzC,EAAgE,KAAhE,GADwB;IAAZ;;AAId,WAAQ,kBAAY;AAClB,YACE,8CAAa,UAAS,oBAAT;AACX,cAAO,yBAAQ,WAAR;AACP,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,sBAAe,yBAAQ,MAAR;AACf,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,aAAK,OAAL,EANF,CADF,CADkB;IAAZ;EAhGK;;;;;;;;;ACFf;;;;;;AALA,KAAI,cAAc,oBAAQ,GAAR,CAAd;KACA,gBAAgB,oBAAQ,CAAR,CAAhB;KACA,UAAU,oBAAQ,GAAR,CAAV;KACA,gBAAgB,oBAAQ,GAAR,CAAhB;;AAIJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,kBAAb;;AAEA,gBAAa,uBAAY;AACvB,SAAI,eAAe,QAAQ,eAAR,CAAwB,KAAK,KAAL,CAAW,SAAX,EAAsB,KAAK,KAAL,CAAW,SAAX,CAA7D,CADmB;AAEvB,YACE;;;OAAM,YAAN;OAAmB,+BAAnB;OAAyB,+BAAzB;OAA+B,8BAAM,yBAAyB,KAAK,cAAL,EAAzB,EAAN,CAA/B;MADF,CAFuB;IAAZ;;AAOb,6CAAiB;AACf,SAAI,gBAAgB;AAClB,wBAAiB,EAAjB;MADE,CADW;;AAKf,SAAI,KAAK,KAAL,CAAW,MAAX,EAAmB;AACrB,WAAI,SAAS,kBAAQ,OAAR,CAAgB,KAAK,KAAL,CAAW,MAAX,EAAmB,SAAnC,EAA8C,aAA9C,CAAT,CADiB;;AAGrB,cAAO;AACL,wBAAY,aAAZ;QADF,CAHqB;MAAvB;;AAQA,YAAO;AACL,eAAQ,EAAR;MADF,CAbe;IAXgB;;;AA6BjC,wBAAqB,+BAAY;AAC/B,YACE;;SAAQ,SAAS,KAAK,aAAL,EAAoB,WAAU,+BAAV,EAArC;OAAgF,QAAQ,IAAR;MADlF,CAD+B;IAAZ;;AAMrB,kBAAe,uBAAU,CAAV,EAAa;AAC1B,OAAE,cAAF,GAD0B;AAE1B,mBAAc,QAAd,CAAuB,2BAAvB,EAAoD;AAClD,YAAK,KAAK,KAAL,CAAW,QAAX;MADP,EAF0B;AAK1B,mBAAc,WAAd,GAL0B;IAAb;;AAQf,WAAQ,kBAAY;AAClB,YACE,oBAAC,WAAD,IAAa,UAAS,oBAAT;AACX,cAAO,QAAQ,SAAR,CAAkB,KAAK,KAAL,CAAW,SAAX,CAAzB;AACA,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,sBAAc,QAAd;AACA,aAAK,OAAL,EALF,CADF,CADkB;IAAZ;EA3CO,CAAjB,C;;;;;;;;;;;;ACPA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,mBAAb;;AAEA,sBAAmB,6BAAY;AAC7B,+BAAc,EAAd,CAAiB,CAAC,QAAD,CAAjB,EAA6B,KAAK,SAAL,CAA7B,CAD6B;IAAZ;;AAInB,yBAAsB,gCAAY;AAChC,+BAAc,GAAd,CAAkB,CAAC,QAAD,CAAlB,EAA8B,KAAK,SAAL,CAA9B,CADgC;IAAZ;;AAItB,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,mBAAL,EAAP,CAD2B;IAAZ;;AAIjB,wBAAqB,+BAAY;AAC/B,YAAO;AACL,oBAAa,0BAAc,GAAd,CAAkB,aAAlB,CAAb;AACA,cAAO,0BAAc,GAAd,CAAkB,OAAlB,CAAP;MAFF,CAD+B;IAAZ;;AAOrB,cAAW,qBAAY;AACrB,UAAK,QAAL,CAAc,KAAK,mBAAL,EAAd,EADqB;IAAZ;;AAIX,gBAAa,uBAAY;AACvB,YACE,KAAK,KAAL,CAAW,OAAX,GACE;;;OACA;;;SAAG;;;WAAS,yBAAQ,cAAR,CAAuB,KAAK,YAAL,EAAvB,CAAT;UAAH;QADA;OAEA;;;SAAI,yBAAQ,eAAR;QAFJ;MADF,GAIS;;;OAAI,yBAAQ,gBAAR,CAAyB,KAAK,YAAL,EAAzB,CAAJ;MAJT,CAFqB;IAAZ;;AAUb,wBAAqB,+BAAY;AAC/B,YACE;;SAAQ,SAAS,KAAK,QAAL,CAAc,KAAK,KAAL,CAAW,OAAX,CAAvB,EAA4C,WAAU,+BAAV,EAApD;OAA+F,KAAK,KAAL,CAAW,OAAX,GAAqB,yBAAQ,OAAR,GAAkB,yBAAQ,SAAR;MADxI,CAD+B;IAAZ;;AAMrB,iBAAc,wBAAY;AACxB,YAAO,gBAAM,IAAN,CAAW,aAAX,CAAyB,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAwB,KAAhC,CAAzB,EAAiE,KAAK,KAAL,CAAW,WAAX,CAAxE,CADwB;IAAZ;;AAId,eAAY,sBAAY;AACtB,YAAO,gBAAM,IAAN,CAAW,WAAX,CAAuB,EAAE,KAAF,CAAQ,KAAK,KAAL,CAAW,KAAX,CAAiB,KAAjB,EAAwB,KAAhC,CAAvB,EAA+D,KAAK,KAAL,CAAW,WAAX,CAAtE,CADsB;IAAZ;;AAIZ,+BAAS,SAAQ;;AAEf,SAAI,OAAO;AACT,YAAK,KAAK,KAAL,CAAW,WAAX;AACL,WAAI,KAAK,UAAL,EAAJ;MAFE,CAFW;;AAOf,SAAI,KAAK,KAAK,qBAAL,CAA2B,OAA3B,CAAL,CAPW;;AASf,YAAO,UAAC,GAAD,EAAS;AACd,WAAI,GAAJ,EAAS;AACP,aAAI,cAAJ,GADO;QAAT;AAGA,WAAI,OAAJ,EAAa;AACX,yCAAoB,WAApB,CAAgC,IAAhC,EAAsC,EAAtC,EADW;QAAb,MAEO;AACL,yCAAoB,aAApB,CAAkC,IAAlC,EAAwC,EAAxC,EADK;QAFP;AAKA,gCAAc,WAAd,GATc;MAAT,CATQ;IAnDc;AAyE/B,yDAAsB,SAAS;;;AAC7B,YAAO,UAAC,IAAD,EAAU;AACf,WAAI,KAAK,KAAL,EAAY;AACd,aAAI,YAAY,UAAU,yBAAQ,YAAR,GAAuB,yBAAQ,cAAR,CADnC;AAEd,eAAK,eAAL,CAAqB,SAArB,EAFc;QAAhB,MAGO;AACL,aAAI,cAAc,UAAU,yBAAQ,aAAR,GAAwB,yBAAQ,eAAR,CAD/C;AAEL,eAAK,iBAAL,CAAuB,WAAvB,EAFK;QAHP;MADK,CADsB;IAzEA;;;AAqF/B,sBAAmB,2BAAU,GAAV,EAAe;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,SAAN;AACA,aAAM,GAAN;AACA,cAAO,MAAP;MAHF,EADgC;IAAf;;AAQnB,oBAAiB,yBAAU,KAAV,EAAiB;AAChC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,SAAL,CAAe,KAAf,CAAN;AACA,cAAO,QAAP;MAHF,EADgC;IAAjB;;AAQjB,cAAW,mBAAU,SAAV,EAAqB;;;AAC9B,YAAO;cACL;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,SAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAU,OAAK,iBAAL,CAAuB,OAAK,KAAL,CAAW,OAAX,CAAjC,EAAH;eAA2D,yBAAQ,SAAR;cAA/D;YADF;UAFF;;MADK,CADuB;IAArB;;AAWX,iDAAkB,SAAQ;;AAExB,SAAI,SAAS,KAAK,QAAL,CAAc,OAAd,CAAT,CAFoB;;AAIxB,YAAO,UAAC,CAAD,EAAO;AACZ,WAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,OAApB,EAA6B,IAA7B,CAAkC,YAAlC,CAAb,CADQ;AAEZ,8BAAY,UAAZ,CAAuB,UAAvB,EAFY;AAGZ,cAAO,CAAP,EAHY;MAAP,CAJiB;IAhHK;;;AA2H/B,WAAQ,kBAAY;AAClB,YACE,8CAAa,UAAS,qBAAT;AACX,cAAO,KAAK,KAAL,CAAW,OAAX,GAAqB,yBAAQ,iBAAR,CAA0B,KAAK,YAAL,EAA1B,CAArB,GAAsE,yBAAQ,mBAAR,CAA4B,KAAK,YAAL,EAA5B,CAAtE;AACP,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,sBAAc,QAAd,EAJF,CADF,CADkB;IAAZ;EA3HK;;;;;;;;;;;;;ACRf;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,gBAAb;;AAEA,mDAAoB;AAClB,mBAAI,qBAAJ,GADkB;IAJW;AAQ/B,+CAAkB;AAChB,YAAO;AACL,gBAAS,EAAT;MADF,CADgB;IARa;AAc/B,iCAAW;AACT,8BAAc,WAAd,GADS;IAdoB;AAkB/B,mCAAY;AACV,SAAI,QAAQ,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,OAAX,EAAoB,OAA1B,CAAR,CADM;;AAGV,SAAI,EAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AACrB,cACE;;;SAAK,KAAL;QADF,CADqB;MAAvB;IArB6B;AA4B/B,mCAAY;AACV,SAAI,QAAQ,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,OAAX,EAAoB,OAA1B,CAAR,CADM;;AAGV,SAAI,EAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AACrB,cACE;;;SAAI,KAAJ;QADF,CADqB;MAAvB;IA/B6B;AAsC/B,uCAAc;AACZ,SAAI,UAAU,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,OAAX,EAAoB,SAA1B,CAAV,CADQ;;AAGZ,SAAI,EAAE,OAAF,CAAU,OAAV,KAAsB,QAAQ,MAAR,EAAgB;AACxC,cACE;;;SACG,QAAQ,GAAR,CAAY,UAAS,MAAT,EAAiB;AAC5B,kBACE;;;aAAK,MAAL;YADF,CAD4B;UAAjB,CADf;QADF,CADwC;MAA1C;IAzC6B;AAsD/B,mCAAY;AACV,SAAI,QAAQ,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,OAAX,EAAoB,OAA1B,CAAR,CADM;;AAGV,SAAI,EAAE,QAAF,CAAW,KAAX,CAAJ,EAAuB;AACrB,cACE;;;SAAI,KAAJ;QADF,CADqB;MAAvB;IAzD6B;AAgE/B,+BAAU;AACR,SAAI,MAAM,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,OAAX,EAAoB,KAA1B,EAAiC,yBAAQ,KAAR,CAAvC,CADI;;AAGR,SAAI,EAAE,QAAF,CAAW,GAAX,CAAJ,EAAqB;AACnB,cACE;;WAAQ,WAAU,+BAAV,EAA0C,SAAS,KAAK,QAAL,EAA3D;SAA2E,GAA3E;QADF,CADmB;MAArB;IAnE6B;AA0E/B,uCAAc;AACZ,SAAI,QAAQ,KAAK,SAAL,EAAR;SACA,QAAQ,KAAK,SAAL,EAAR;SACA,UAAU,KAAK,WAAL,EAAV;SACA,QAAQ,KAAK,SAAL,EAAR;SACA,MAAM,KAAK,OAAL,EAAN,CALQ;;AAOZ,YACE;;;OACE,6BAAK,WAAU,KAAV,EAAL,CADF;OAEG,KAFH;OAGE;;WAAK,WAAU,eAAV,EAAL;SACG,KADH;SAEG,OAFH;SAGG,KAHH;QAHF;OAQG,GARH;MADF,CAPY;IA1EiB;AA+F/B,6BAAS;AACP,YACE,wDAAgB,UAAS,kBAAT;AACd,mBAAY,KAAK,WAAL;AACZ,aAAK,OAAL,EAFF,CADF,CADO;IA/FsB;EAAlB;;;;;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,sBAAb;;AAEA,cAAW;AACT,WAAM,MAAM,SAAN,CAAgB,KAAhB,CAAsB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,EAA6B,QAA7B,CAAtB,CAAN;IADF;;AAIA,WAAQ,yCAAR;;AAEA,sBAAmB,6BAAW;AAC5B,cAAS,aAAT,CAAuB,MAAvB,EAA+B,gBAA/B,CAAgD,SAAhD,EAA2D,KAAK,UAAL,CAA3D,CAD4B;IAAX;;AAInB,yBAAsB,gCAAW;AAC/B,cAAS,aAAT,CAAuB,MAAvB,EAA+B,mBAA/B,CAAmD,SAAnD,EAA8D,KAAK,UAAL,CAA9D,CAD+B;IAAX;;AAItB,oBAAiB,2BAAW;AAC1B,YAAO;AACL,iBAAU,QAAV;AACA,aAAM,QAAN;AACA,mBAAY,EAAE,IAAF;MAHd,CAD0B;IAAX;;AAQjB,UAAO,iBAAW;AAChB,8BAAc,WAAd,GADgB;IAAX;;AAIP,eAAY,oBAAU,CAAV,EAAa;AACvB,SAAI,MAAM,MAAC,CAAO,KAAP,GAAgB,EAAE,KAAF,GAAU,EAAE,OAAF,CADd;AAEvB,SAAI,QAAQ,gBAAM,OAAN,CAAc,GAAd,EAAmB;AAC7B,YAAK,KAAL,GAD6B;MAA/B;IAFU;;AAOZ,aAAU,oBAAY;AACpB,UAAK,KAAL,GADoB;IAAZ;;AAIV,WAAQ,kBAAW;AACjB,SAAI,YAAY,iBAAiB,KAAK,KAAL,CAAW,IAAX;SAC7B,UAAU,0BAAG;AACX,oBAAa,IAAb;AACA,sBAAe,IAAf;AACA,2BAAoB,IAApB;MAHQ,EAIP,SAJO,CAAV,CAFa;;AAQjB,YACE;;SAAS,MAAK,QAAL,EAAc,IAAI,KAAK,KAAL,CAAW,QAAX,EAAqB,WAAW,OAAX,EAAoB,eAAa,CAAC,KAAK,KAAL,CAAW,aAAX,EAAlF;OACE;;WAAK,WAAU,qBAAV,EAAL;SACG,KAAK,KAAL,CAAW,UAAX,EADH;QADF;MADF,CARiB;IAAX;EAzCK;;;;;;;;;ACLf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,KAAI,qBAAqB,0BAArB;AACJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,aAAb;;AAEA,qBAAkB,4BAAW;AAC3B,SAAI,eAAe,EAAE,MAAF,CAAS,EAAT,EAAa,KAAK,KAAL,CAAW,aAAX,CAA5B,CADuB;AAE3B,SAAG,aAAa,MAAb,KAAwB,SAAxB,EAAmC;AACpC,oBAAa,MAAb,GAAsB,IAAtB,CADoC;MAAtC;;AAIA,SAAG,aAAa,MAAb,KAAwB,SAAxB,KAAsC,KAAK,KAAL,CAAW,aAAX,CAAyB,KAAzB,IAAkC,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB,CAAxE,EAAyG;AACxG,oBAAa,MAAb,GAAsB,KAAtB,CADwG;MAA5G;;AAIA,kBAAa,KAAb,GAAqB,KAAK,SAAL,CAAe,aAAa,KAAb,IAAsB,qBAAU,4BAAV,CAA1D,CAV2B;AAW3B,kBAAa,MAAb,GAAsB,KAAK,UAAL,CAAgB,aAAa,MAAb,IAAuB,qBAAU,6BAAV,EAAyC,aAAa,MAAb,CAAtG,CAX2B;AAY3B,YAAO,YAAP,CAZ2B;IAAX;;AAelB,kBAAe,uBAAS,SAAT,EAAoB,KAApB,EAA0B;AACvC,UAAK,SAAL,GAAiB,wBAAmB,MAAnB,CAA0B,WAA1B,EAAjB,CADuC;AAEvC,UAAK,UAAL,GAAkB,wBAAmB,MAAnB,CAA0B,YAA1B,EAAlB,CAFuC;;AAIvC,SAAG,CAAC,KAAD,IAAU,SAAS,KAAT,EAAgB,EAAhB,IAAsB,KAAK,SAAS,SAAT,CAA3B,EAA+C;AAC1D,cAAO,KAAK,SAAS,SAAT,CAAZ,CAD0D;MAA5D,MAEO,IAAG,KAAH,EAAU;AACf,cAAO,SAAS,KAAT,EAAgB,EAAhB,CAAP,CADe;MAAV;;AAIP,YAAO,qBAAU,4BAA4B,SAA5B,CAAjB,CAVuC;IAA1B;AAYf,cAAW,mBAAS,KAAT,EAAgB;AACzB,SAAG,UAAU,SAAV,EAAoB;AACrB,eAAQ,SAAS,KAAK,KAAL,CAAW,aAAX,CAAyB,KAAzB,EAAgC,EAAzC,KAAgD,qBAAU,4BAAV,CADnC;MAAvB;AAGA,YAAO,KAAK,aAAL,CAAmB,OAAnB,EAA4B,KAA5B,CAAP,CAJyB;IAAhB;AAMX,eAAY,oBAAS,MAAT,EAAiB,MAAjB,EAAwB;AAClC,SAAG,WAAW,SAAX,EAAqB;AACtB,gBAAS,SAAS,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB,EAAiC,EAA1C,KAAiD,qBAAU,6BAAV,CADpC;MAAxB;AAGA,cAAS,KAAK,aAAL,CAAmB,QAAnB,EAA6B,MAA7B,CAAT,CAJkC;AAKlC,SAAI,kBAAkB,wBAAmB,MAAnB,CAA0B,YAA1B,KAA2C,qBAAU,gCAAV,CAL/B;;AAOlC,SAAG,UAAU,SAAS,eAAT,EAA0B;AACrC,cAAO,eAAP,CADqC;MAAvC;;AAIA,YAAO,MAAP,CAXkC;IAAxB;AAaZ,gBAAa,uBAAU;AACrB,YAAO,EAAE,MAAF,CAAS,IAAT,EAAe,KAAK,gBAAL,EAAf,EAAwC;AAC7C,qBAAc,wBAAmB,MAAnB,CAA0B,YAA1B;MADT,CAAP,CADqB;IAAV;AAKb,kBAAe,yBAAY;AACzB,SAAI,UAAU,KAAK,WAAL,EAAV;SACA,eAAe,IAAI,CAAJ,CAAM,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,aAAV,CAA3B,CAAf,CAFqB;;AAIzB,kBAAa,GAAb,CAAiB;AACf,cAAO,KAAK,SAAL,EAAP;AACA,eAAQ,KAAK,UAAL,CAAgB,SAAhB,EAA2B,QAAQ,MAAR,CAAnC;MAFF,EAJyB;AAQzB,UAAK,MAAL,CAAY,KAAK,SAAL,EAAZ,EAA8B,KAAK,UAAL,CAAgB,SAAhB,EAA2B,QAAQ,MAAR,CAAzD,EARyB;;AAUzB,kBAAa,IAAb,CAAkB,mBAAlB,EAAuC,IAAvC,GAVyB;AAWzB,kBAAa,EAAb,CAAgB,mBAAhB,EAAqC,YAAU;AAC7C,gCAAc,WAAd,GAD6C;MAAV,CAArC,CAXyB;IAAZ;AAgBf,sBAAmB,6BAAY;AAC7B,6BAAmB,sBAAnB,GAD6B;AAE7B,+BAAc,EAAd,CAAiB,CAAC,QAAD,CAAjB,EAA6B,KAAK,SAAL,CAA7B,CAF6B;AAG7B,UAAK,aAAL,GAH6B;IAAZ;AAKnB,yBAAsB,gCAAY;AAChC,6BAAmB,wBAAnB,GADgC;AAEhC,+BAAc,GAAd,CAAkB,CAAC,QAAD,CAAlB,EAA8B,KAAK,SAAL,CAA9B,CAFgC;AAGhC,SAAI,YAAY,KAAK,KAAL,CAAW,SAAX,CAHgB;AAIhC,iCAAiB,wBAAjB,CAA0C,SAA1C,EAJgC;IAAZ;;AAOtB,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,mBAAL,EAAP,CAD2B;IAAZ;;AAIjB,wBAAqB,+BAAY;AAC/B,YAAO;AACL,oBAAa,0BAAc,GAAd,CAAkB,aAAlB,CAAb;AACA,cAAO,0BAAc,GAAd,CAAkB,OAAlB,CAAP;MAFF,CAD+B;IAAZ;;AAOrB,cAAW,qBAAY;AACrB,UAAK,QAAL,CAAc,KAAK,mBAAL,EAAd,EADqB;IAAZ;;AAIX,aAAU,kBAAU,KAAV,EAAiB,MAAjB,EAAyB;AAC/B,UAAK,MAAL,CAAY,KAAZ,EAAmB,MAAnB,EAD+B;IAAzB;AAGV,gBAAa,qBAAU,KAAV,EAAiB,MAAjB,EAAyB;AACpC,SAAI,aAAa,wBAAmB,MAAnB,CAA0B,YAA1B,EAAb;SACA,YAAY,wBAAmB,MAAnB,CAA0B,WAA1B,EAAZ,CAFgC;;AAIpC,YAAO;AACL,eAAQ,KAAK,GAAL,CAAS,SAAS,MAAT,EAAiB,EAAjB,CAAT,EAA+B,UAA/B,CAAR;AACA,cAAO,KAAK,GAAL,CAAS,SAAS,KAAT,EAAgB,EAAhB,CAAT,EAA8B,SAA9B,CAAP;MAFF,CAJoC;IAAzB;AASb,WAAQ,gBAAU,KAAV,EAAiB,MAAjB,EAAyB;AAC/B,SAAI,GAAJ;SAAS,aAAa,KAAK,WAAL,CAAiB,KAAjB,EAAwB,MAAxB,CAAb,CADsB;AAE/B,WAAM,CAAC,EAAE,QAAF,EAAY,MAAZ,KAAuB,WAAW,MAAX,CAAxB,GAA6C,CAA7C,CAFyB;AAG/B,SAAI,MAAM,EAAE,MAAM,kBAAN,CAAF,CAA4B,GAA5B,CAAgC,KAAhC,EAAuC,GAAvC,CAAN,CAH2B;AAI/B,SAAI,KAAJ,CAAU,GAAV,EAAe,UAAf,CAA0B,WAAW,KAAX,EAAkB,WAAW,MAAX,CAA5C,CAJ+B;IAAzB;AAMR,eAAY,sBAAY;AACtB,SAAI,MAAM,eAAU,MAAV,CAAiB;AACzB,kBAAW,KAAK,KAAL,CAAW,SAAX;AACX,YAAK,KAAK,KAAL,CAAW,UAAX;MAFG,CAAN,CADkB;AAKtB,SAAI,KAAK,wBAAmB,YAAnB,CAAgC,KAAK,KAAL,CAAW,SAAX,EAAsB,KAAK,KAAL,CAAW,UAAX,CAA3D;SACF,UAAU,KAAK,WAAL,EAAV;SACA,MAAM,wBAAmB,YAAnB,CAAgC,KAAK,KAAL,CAAW,SAAX,EAAsB,EAAtD,EAA0D,OAA1D,CAAN,CAPoB;;AAStB,YAAQ,gCAAQ,WAAU,iBAAV,EAA4B,IAAI,IAAI,EAAJ,EAAQ,MAAM,IAAI,IAAJ,EAAU,KAAK,GAAL;AACxD,eAAQ,KAAK,OAAL,EADhB,CAAR,CATsB;IAAZ;;AAaZ,WAAQ,kBAAY;AAClB,SAAI,UAAU,KAAK,WAAL,EAAV;SACF,aAAa,KAAK,WAAL,CAAiB,KAAK,SAAL,EAAjB,EAAmC,KAAK,UAAL,CAAgB,SAAhB,EAA2B,QAAQ,MAAR,CAA9D,CAAb,CAFgB;AAGlB,YACE,8CAAa,KAAI,eAAJ,EAAoB,UAAU,kBAAV;AAC/B,cAAO,KAAK,KAAL,CAAW,aAAX,CAAyB,MAAzB;AACP,mBAAY,KAAK,UAAL;AACZ,sBAAe,yBAAQ,KAAR;AACf,oBAAa,WAAW,KAAX;AACb,qBAAc,WAAW,MAAX,EALhB,CADF,CAHkB;IAAZ;EAjIO,CAAjB,C;;;;;;;;;;;;;;;;ACVA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,UAAS,mBAAT,CAA6B,MAA7B,EAAqC;AACnC,OAAI,MAAM,EAAN,CAD+B;;AAGnC,uBAAY,MAAZ,EAAoB,OAApB,CAA4B,UAAS,GAAT,EAAa;AACvC,YAAO,MAAM,GAAN,GAAY,mBAAmB,OAAO,GAAP,CAAnB,CAAZ,GAA8C,GAA9C,CADgC;IAAb,CAA5B,CAHmC;;AAOnC,UAAO,IAAI,SAAJ,CAAc,CAAd,EAAiB,IAAI,MAAJ,GAAa,CAAb,CAAxB,CAPmC;EAArC;;;AAWA,UAAS,aAAT,CAAwB,KAAxB,EAA+B,MAA/B,EAAsC;AACpC,OAAI,OAAO,MAAP,KAAkB,WAAlB,EAA+B;AAC/B,oCAAoB,QAApB,CAA6B,yBAA7B,EAAwD,MAAxD,EAD+B;IAAnC;EADF;;AAMA,QAAO,OAAP,GAAiB;AACf,6DAAyB;AACvB,SAAI,OAAO,OAAO,IAAI,IAAJ,KAAa,UAApB,EAAgC;AACzC,WAAI,IAAJ,CAAS,gBAAT,EAA2B,aAA3B,EADyC;MAA3C;IAFa;AAMf,iEAA2B;AACzB,SAAI,OAAO,OAAO,IAAI,MAAJ,KAAe,UAAtB,EAAkC;AAC3C,WAAI,MAAJ,CAAW,gBAAX,EAA6B,aAA7B,EAD2C;MAA7C;IAPa;AAWf,+CAAkB;AAChB,YAAO;AACL,gBAAS,aAAa,4BAAiB,GAAjB,CAAqB,YAArB,CAAb,GAAkD,0DAAlD;MADX,CADgB;IAXH;AAgBf,uCAAa,KAAK,WAAW,uBAA4C;;AAEvE,SAAI,MAAM,cAAI,KAAJ,CAAU,OAAO,QAAP,CAAgB,IAAhB,CAAhB,CAFmE;AAGvE,SAAI,SAAS;AACX,gBAAS,IAAI,OAAJ,EAAT;AACA,gBAAS,aAAa,SAAb;AACT,aAAM,EAAN;AACA,cAAO,MAAP;AACA,mBAAY,IAAZ;MALE;SAOJ,eAAe,EAAE,MAAF,CAAS,EAAT,EAAa,KAAK,eAAL,EAAb,EAAqC,qBAArC,CAAf;SACA,iBAAe,OAAO,EAAE,QAAF,CAAW,GAAX,EAAgB,GAAhB,IAAuB,GAAvB,GAA6B,GAA7B,IAAoC,oBAAoB,MAApB,UAA+B,yBAAe,YAAf,CAAzF,CAXuE;;AAavE,YAAO,SAAP,CAbuE;IAhB1D;AA+Bf,uCAAa,WAAW,YAAY;AAClC,YAAO,YAAY,IAAZ,GAAmB,UAAnB,CAD2B;IA/BrB;AAkCf,mDAAoB;AAClB,YAAO,EAAE,QAAF,EAAY,MAAZ,EAAP,CADkB;IAlCL;;AAqCf,WAAQ;AACN,kBAAa,uBAAY;AACvB,WAAI,gBAAgB,EAAE,QAAF,EAAY,KAAZ,EAAhB,CADmB;AAEvB,cAAO,gBAAgB,KAAK,GAAL,CAAS,GAAT,EAAc,aAAC,GAAgB,GAAhB,GAAuB,EAAxB,CAA9B,CAFgB;MAAZ;AAIb,mBAAc,sBAAU,MAAV,EAAkB;AAC9B,WAAI,YAAY,OAAO,OAAP,CAAe,iBAAf,EAAZ,CAD0B;AAE9B,WAAG,MAAH,EAAU;AACR,sBAAa,qBAAU,gCAAV,CADL;QAAV;AAGA,cAAO,YAAY,KAAK,GAAL,CAAS,EAAT,EAAa,SAAC,GAAY,GAAZ,GAAmB,EAApB,CAAzB,CALuB;MAAlB;AAOd,mBAAc;AACZ,eAAQ,EAAR;AACA,cAAO,EAAP;MAFF;IAZF;EArCF,C;;;;;;;;ACtBA;;;;;;AACA,QAAO,OAAP,mB;;;;;;;;;;;;;;;;;;;;ACDA;;;;AACA;;;;;;KAEM;AAEJ,YAFI,OAEJ,GAAc;yCAFV,SAEU;;AACZ,UAAK,IAAL,GAAY,sBAAZ,CADY;IAAd;;;;;;;;;;;;;;8BAFI;;8BAgBK,MAAM,YAAY,OAAO,UAAU;AAC1C,YAAK,IAAL,CAAU,UAAV,CAAqB,IAArB,EAA2B,UAA3B,EAAuC,KAAvC,EAA8C,QAA9C,EAD0C;AAE1C,cAAO,KAAK,aAAL,CAAmB,UAAnB,CAAP,CAF0C;;;;;;;;;;;;;;;+BAclC,MAAM,YAAY,OAAO;AACjC,YAAK,IAAL,CAAU,QAAV,CAAmB,IAAnB,EAAyB,UAAzB,EAAqC,KAArC,EAA4C,IAA5C,EAAkD,IAAlD,EADiC;AAEjC,cAAO,KAAK,aAAL,CAAmB,UAAnB,CAAP,CAFiC;;;;+BAKzB,WAAW;AACnB,WAAG,CAAC,UAAU,SAAV,IAAuB,CAAC,UAAU,GAAV,EAAc;AACxC,eAAM,MAAM,sCAAN,CAAN,CADwC;QAA1C;AAGA,cAAO,UAAU,SAAV,GAAsB,IAAtB,GAA6B,UAAU,GAAV,GAAgB,IAA7C,GAAoD,eAAM,YAAN,EAApD,CAJY;;;;;;;;;;;;;;;;;;;;4BAqBd,WAAW,cAAc;AAC9B,WAAI,eAAe,KAAK,iBAAL,CAAuB,SAAvB,EAAkC,YAAlC,CAAf,CAD0B;;AAG9B,WAAI,OAAO;AACT,uBAAc,YAAd;AACA,cAAK,KAAK,IAAL,CAAU,UAAV,EAAL;AACA,iBAAQ,eAAM,cAAN,EAAR;AACA,kBAAS,UAAU,OAAV,IAAqB,EAArB;QAJP,CAH0B;;AAU9B,cAAO;AACL,aAAI,YAAJ;AACA,eAAM,yBAAe,IAAf,CAAN;AACA,cAAK,UAAU,GAAV;QAHP,CAV8B;;;;6CAiBR,UAAU;AAChC,YAAK,IAAL,CAAU,uBAAV,CAAkC,QAAlC,EADgC;;;;uCAIhB,WAAW,cAAc;AACzC,WAAI,eAAe,KAAK,SAAL,CAAe,SAAf,CAAf,CADqC;AAEzC,YAAK,IAAL,CAAU,iBAAV,CAA4B,YAA5B,EAA0C;AACxC,oBAAW,SAAX;AACA,uBAAc,YAAd;QAFF,EAFyC;AAMzC,cAAO,YAAP,CANyC;;;;yCASvB,cAAc,KAAK,WAAW,UAAU;AAC1D,YAAK,IAAL,CAAU,mBAAV,CAA8B,YAA9B,EAA4C,GAA5C,EAAiD,SAAjD,EAA4D,QAA5D,EAD0D;;;;2CAItC,cAAc,KAAK,WAAW,UAAU;AAC7D,YAAK,IAAL,CAAU,qBAAV,CAAgC,YAAhC,EAA8C,GAA9C,EAAmD,SAAnD,EAA8D,QAA9D,EAD6D;;;;kCAIjD,YAAY,QAAQ;AAC/B,YAAK,IAAL,CAAU,eAAV,CAA0B,MAA1B,EAAkC,UAAlC,EAD+B;;;;mCAInB,QAAQ;AACpB,YAAK,IAAL,CAAU,eAAV,CAA0B,MAA1B,EADoB;;;;mCAIR,QAAQ;AACpB,cAAO,KAAK,IAAL,CAAU,uBAAV,CAAkC,MAAlC,CAAP,CADoB;;;;yCAIF,QAAQ;AAC1B,cAAO,KAAK,IAAL,CAAU,mBAAV,CAA8B,MAA9B,CAAP,CAD0B;;;UA1GxB;;;AAgHN,QAAO,OAAP,GAAiB,IAAI,OAAJ,EAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EA;;;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,KAAI,sBAAsB,KAAtB;;KAEE;;;AAEJ,YAFI,MAEJ,CAAY,MAAZ,EAAoB;yCAFhB,QAEgB;;AAClB,cAAS,UAAU,EAAV,CADS;;8FAFhB,mBAII,SAFY;;AAGlB,WAAK,qBAAL,GAA6B,OAAO,UAAP,IAAqB,EAArB,CAHX;AAIlB,WAAK,qBAAL,GAA6B,EAA7B,CAJkB;AAKlB,WAAK,iBAAL,GAAyB,EAAzB,CALkB;AAMlB,WAAK,iBAAL,GAAyB,EAAzB,CANkB;AAOlB,WAAK,cAAL,GAAsB,EAAtB,CAPkB;AAQlB,WAAK,gBAAL,GAAwB;AACtB,aAAM,MAAK,WAAL;AACN,YAAK,MAAK,cAAL;AACL,aAAM,MAAK,eAAL;AACN,oBAAa,MAAK,iBAAL;AACb,kBAAW,MAAK,gBAAL;AACX,mBAAY,MAAK,gBAAL;MANd,CARkB;;IAApB;;8BAFI;;iCAoBQ,OAAO,KAAK;AACtB,YAAK,qBAAL,CAA2B,IAAI,YAAJ,CAA3B,CAA6C,MAA7C,GAAsD,MAAM,MAAN,CADhC;AAEtB,WAAI,IAAI,YAAJ,EAAkB;AACpB,aAAI,YAAJ,CAAiB,MAAM,IAAN,CAAW,GAAX,CAAjB,CADoB;AAEpB,gBAAO,IAAI,YAAJ,CAFa;QAAtB;;;;qCAMc,OAAO;AACrB,WAAI,OAAO,MAAM,IAAN,CADU;AAErB,WAAI,kBAAkB,KAAK,iBAAL,CAAuB,KAAK,GAAL,CAAzC,CAFiB;AAGrB,WAAI,eAAJ,EAAqB;AACnB,gBAAO,KAAK,iBAAL,CAAuB,KAAK,GAAL,CAA9B,CADmB;AAEnB,yBAAgB,KAAhB,CAAsB,MAAtB,EAA8B,KAAK,IAAL,CAA9B,CAFmB;QAArB;;;;6CAMsB,IAAI;AAC1B,YAAK,0BAAL,GAAkC,EAAlC,CAD0B;;;;oCAIb,OAAO,KAAK;AACzB,gBAAS,YAAT,GAAwB;AACtB,aAAI,OAAO,eAAM,gBAAN,CAAuB,SAAvB,CAAP,CADkB;AAEtB,eAAM,MAAN,CAAa,WAAb,CAAyB;AACvB,gBAAK,MAAM,IAAN,CAAW,GAAX;AACL,iBAAM,MAAN;AACA,iBAAM,IAAN;UAHF,EAIG,IAAI,SAAJ,CAAc,GAAd,CAJH,CAFsB;QAAxB;;AASA,WAAI,OAAO,MAAM,IAAN,CAVc;AAWzB,WAAI,SAAS,KAAK,qBAAL,CAA2B,KAAK,GAAL,CAApC,CAXqB;AAYzB,WAAM,YAAY,KAAK,uBAAL,CAA6B,IAAI,SAAJ,CAA7B,CAA4C,CAA5C,CAAZ,CAZmB;AAazB,WAAI,MAAJ,EAAY;AACV,aAAI,SAAS,KAAK,EAAL,CADH;AAEV,aAAI,KAAK,IAAL,EAAW;;AACb,iBAAM,MAAM,OAAO,KAAK,IAAL,CAAb;AACN,iBAAM,KAAK,KAAK,GAAL,GAAW,GAAX,GAAiB,KAAK,IAAL,GAAY,GAA7B;AACX,0BAAa,GAAb,GAAmB,KAAK,GAAL;AACnB,iBAAI,WAAW,aAAX,EAA0B;AAC5B,mBAAI,CAAC,IAAI,UAAJ,EAAgB;AACnB,qBAAI,WAAJ,CAAgB,SAAhB,CAA0B,QAA1B,GAAqC,YAAW;AAC9C,0BAAO,KAAK,QAAL,CAAc,QAAd,CAAuB,KAAK,KAAK,GAAL,CAAnC,CAD8C;kBAAX,CADlB;AAInB,qBAAI,UAAJ,GAAiB,YAAkB;qDAAN;;oBAAM;;AACjC,uBAAM,0CAAW,IAAI,WAAJ,gBAAmB,SAA9B,CAD2B;AAEjC,uBAAM,WAAW,KAAK,KAAK,MAAL,GAAc,CAAd,CAAhB,CAF2B;AAGjC,wBAAK,GAAL,GAAW,SAAS,GAAT,CAHsB;AAIjC,wBAAK,QAAL,GAAgB,SAAS,QAAT,CAJiB;AAKjC,wBAAK,QAAL,CAAc,QAAd,CAAuB,KAAK,KAAK,GAAL,CAA5B,GAAwC,IAAxC,CALiC;AAMjC,0BAAO,IAAP,CANiC;kBAAlB,CAJE;gBAArB;AAaA,wBAAS,GAAT,CAd4B;AAe5B,wBAAS,YAAT,CAf4B;cAA9B,MAgBO;AACL,wBAAS,UAAU,QAAV,CAAmB,KAAK,KAAK,GAAL,CAAjC,CADK;cAhBP;gBAJa;UAAf;AAwBA,aAAI,SAAS,OAAO,MAAP,CAAT,CA1BM;AA2BV,aAAI,MAAJ,EAAY;AACV,eAAI,aAAa,KAAK,IAAL,CADP;AAEV,wBAAa,QAAb,GAAwB,SAAxB,CAFU;AAGV,sBAAW,IAAX,CAAgB,YAAhB,EAHU;AAIV,kBAAO,KAAP,CAAa,MAAb,EAAqB,UAArB,EAJU;AAKV,eAAG,KAAK,0BAAL,EAAiC;AAClC,kBAAK,0BAAL,CAAgC,IAAhC,CAAqC,IAArC,EAA2C;AACzC,uBAAQ,KAAK,GAAL;AACR,mBAAI,KAAK,EAAL;AACJ,qBAAM,KAAK,IAAL;AACN,0BAAW,IAAI,SAAJ,CAAc,SAAd;AACX,oBAAK,IAAI,SAAJ,CAAc,GAAd;AACL,6BAAc,IAAI,YAAJ;cANhB,EADkC;YAApC;UALF;QA3BF;;;;sCA8Ce,OAAO,KAAK;AAC3B,WAAI,aAAa,MAAM,IAAN,CADU;AAE3B,WAAI,aAAa,SAAb,UAAa;gBAAK,EAAE,SAAF,CAAY,SAAZ,KAA0B,IAAI,SAAJ,CAAc,SAAd,IAA2B,EAAE,YAAF,KAAmB,IAAI,YAAJ;QAA7E,CAFU;AAG3B,YAAK,QAAL,CAAc,WAAW,IAAX,EAAiB,UAA/B,EAA2C,WAAW,IAAX,EAAiB,IAA5D,EAAkE,IAAlE,EAH2B;;;;sCAMZ,OAAO,KAAK;AAC3B,WAAI,YAAY,MAAM,IAAN,CADW;AAE3B,WAAI,eAAe,KAAK,WAAL,CAAiB,UAAU,OAAV,EAAmB,UAAU,SAAV,EAAqB,IAAI,YAAJ,CAAxE,CAFuB;AAG3B,WAAI,YAAY,KAAK,iBAAL,CAAuB,YAAvB,CAAZ,CAHuB;AAI3B,WAAG,SAAH,EAAc;AACZ,mBAAU,OAAV,CAAkB,UAAC,QAAD,EAAc;AAC9B,oBAAS,IAAT,CAAc,IAAd,EAAoB;AAClB,wBAAW,IAAI,SAAJ,CAAc,SAAd;AACX,kBAAK,IAAI,SAAJ,CAAc,GAAd;AACL,2BAAc,IAAI,YAAJ;AACd,sBAAS,UAAU,OAAV;AACT,wBAAW,UAAU,SAAV;YALb,EAD8B;UAAd,EAQf,IARH,EADY;QAAd;;;;qCAac,QAAQ,YAAW;AACjC,WAAG,UAAH,EAAc;AACZ,cAAK,qBAAL,CAA2B,UAA3B,IAAyC,MAAzC,CADY;QAAd,MAEO;AACL,cAAK,qBAAL,CAA2B,QAA3B,GAAsC,eAAM,MAAN,CAAa,EAAb,EAAiB,KAAK,qBAAL,CAA2B,QAA3B,EAAqC,MAAtD,CAAtC,CADK;QAFP;AAKA,cAAO,KAAK,qBAAL,CAN0B;;;;8BAS1B,YAAW;AAClB,WAAI,MAAM,WAAW,SAAX,IAAwB,QAAxB,CADQ;AAElB,WAAG,WAAW,GAAX,EAAe;AAChB,eAAS,aAAQ,WAAW,GAAX,CADD;QAAlB;;AAIA,cAAO,GAAP,CANkB;;;;gCAST,MAAM,YAAY,OAAO,UAAU;AAC5C,WAAI,YAAJ;WACA,UAAU,KAAK,kBAAL,CAAwB,UAAxB,CAAV,CAF4C;;AAI5C,sBAAe,QAAQ,IAAR,CAAa,UAAC,MAAD,EAAY;AACtC,gBAAO,OAAO,iBAAP,KAA6B,SAA7B,CAD+B;QAAZ,EAEzB,IAFY,CAAf,CAJ4C;;AAQ5C,WAAG,YAAH,EAAgB;AACd,cAAK,QAAL,CAAc,IAAd,EAAoB,UAApB,EAAgC,KAAhC,EAAuC,QAAvC,EADc;QAAhB,MAEO;AACL,cAAK,cAAL,CAAoB,KAAK,QAAL,CAAc,UAAd,CAApB,IAAiD;AAC/C,qBAD+C;AAE/C,iCAF+C;AAG/C,uBAH+C;AAI/C,6BAJ+C;AAK/C,iBAAM,IAAI,IAAJ,GAAW,OAAX,EAAN;AACA,gBAAK,eAAM,YAAN,EAAL;UANF,CADK;QAFP;;;;uCAcgB,SAAS,WAAW;;;AACpC,WAAI,WAAW,EAAX,CADgC;AAEpC,WAAI,MAAM,IAAI,IAAJ,GAAW,OAAX,EAAN,CAFgC;AAGpC,WAAI,OAAO,oBAAY,KAAK,cAAL,CAAnB,CAHgC;AAIpC,YAAK,OAAL,CAAa,UAAC,KAAD,EAAW;AACtB,aAAI,UAAU,OAAK,cAAL,CAAoB,KAApB,CAAV,CADkB;AAEtB,aAAI,eAAe,GAAC,GAAM,QAAQ,IAAR,IAAiB,mBAAxB,CAFG;AAGtB,aAAI,eAAe,CAAC,QAAQ,UAAR,IAAsB,OAAK,kBAAL,CAAwB,QAAQ,UAAR,CAAxB,CAA4C,MAA5C,KAAuD,CAAvD,CAHpB;;AAKtB,aAAI,gBAAgB,YAAhB,EAA8B;AAChC,oBAAS,KAAT,IAAkB,OAAlB,CADgC;AAEhC,mBAAQ,UAAR,GAAqB,QAAQ,UAAR,IAAsB,EAAtB,CAFW;AAGhC,mBAAQ,UAAR,CAAmB,SAAnB,GAA+B,UAAU,SAAV,CAAoB,SAApB,CAHC;AAIhC,mBAAQ,UAAR,CAAmB,GAAnB,GAAyB,UAAU,SAAV,CAAoB,GAApB,CAJO;AAKhC,kBAAK,QAAL,CAAc,QAAQ,IAAR,EAAc,QAAQ,UAAR,EAAoB,QAAQ,KAAR,EAAe,QAAQ,QAAR,EAAkB,QAAQ,MAAR,CAAjF,CALgC;UAAlC,MAMO,IAAI,CAAC,YAAD,EAAe;AACxB,kBAAO,OAAK,cAAL,CAAoB,KAApB,CAAP,CADwB;UAAnB;QAXI,CAAb,CAJoC;;AAoBpC,YAAK,qBAAL,CAA2B,UAAU,YAAV,CAA3B,CAAmD,iBAAnD,GAAuE,QAAQ,IAAR,CAAa,IAAb,CApBnC;;AAsBpC,cAAO,QAAP,CAtBoC;;;;8BAyB7B,MAAM,YAAY,OAAO,UAAU,QAAQ;AAClD,gBAAS,SAAT,CAAmB,GAAnB,EAAwB,IAAxB,EAA8B;AAC5B,aAAI,IAAI,MAAJ,EAAY;AACd,eAAI,GAAJ,CADc;AAEd,eAAI,QAAJ,EAAc;AACZ,mBAAM,eAAM,YAAN,EAAN,CADY;AAEZ,kBAAK,iBAAL,CAAuB,GAAvB,IAA8B,QAA9B,CAFY;YAAd;;AAKA,eAAI,MAAJ,CAAW,WAAX,CAAuB;AACrB,mBAAM,KAAN;AACA,kBAAK,GAAL;AACA,mBAAM,IAAN;AACA,mBAAM,IAAN;YAJF,EAKG,IAAI,SAAJ,CAAc,GAAd,CALH,CAPc;UAAhB;QADF;;AAiBA,WAAI,gBAAgB,KAAK,kBAAL,CAAwB,cAAc,EAAd,CAAxC,CAlB8C;AAmBlD,qBAAc,OAAd,CAAsB,UAAU,GAAV,EAAe;AACnC,aAAG,MAAH,EAAU;AACR,eAAI,MAAJ,GAAa,MAAb,CADQ;UAAV;;AAIA,aAAI,IAAI,MAAJ,EAAY;AACd,0BAAM,KAAN,CAAY,IAAZ,EAAkB,SAAlB,EAA6B,GAA7B,EAAkC,KAAlC,EADc;UAAhB;QALoB,EAQnB,IARH,EAnBkD;;;;wCA8BjC,YAAY;;;AAC7B,WAAG,KAAK,qBAAL,CAA2B,MAA3B,KAAsC,CAAtC,EAAwC;AACzC,wBAAM,KAAN,CAAY,0BAAZ,EAAwC,KAAK,qBAAL,CAAxC,CADyC;AAEzC,gBAAO,EAAP,CAFyC;QAA3C;AAIA,WAAI,OAAO,mCAA2B,UAA3B,CAAP,CALyB;AAM7B,WAAI,gBAAgB,mCAA2B,KAAK,qBAAL,CAA3B,CAAuD,GAAvD,CAA2D,UAAC,GAAD,EAAS;AACtF,gBAAO,OAAK,qBAAL,CAA2B,GAA3B,CAAP,CADsF;QAAT,CAA3E,CANyB;;AAU7B,WAAI,sBAAsB,QAAtB,EAAgC;AAClC,gBAAO,cAAc,MAAd,CAAqB,UAArB,CAAP,CADkC;QAApC,MAEO;AACL,gBAAO,cAAc,MAAd,CAAqB,UAAU,GAAV,EAAe;AACzC,kBAAO,KAAK,KAAL,CAAW,UAAU,GAAV,EAAe;AAC/B,oBAAO,IAAI,SAAJ,CAAc,GAAd,MAAuB,WAAW,GAAX,CAAvB,CADwB;YAAf,CAAlB,CADyC;UAAf,CAA5B,CADK;QAFP;;;;uCAWgB,cAAc,MAAM;;AAEpC,WAAG,KAAK,SAAL,CAAe,SAAf,IAA4B,KAAK,SAAL,CAAe,GAAf,EAAmB;AAChD,aAAI,eAAe,KAAK,kBAAL,CAAwB;AACzC,sBAAW,KAAK,SAAL,CAAe,SAAf;AACX,gBAAK,KAAK,SAAL,CAAe,GAAf;UAFY,CAAf,CAD4C;AAKhD,aAAG,aAAa,MAAb,KAAwB,CAAxB,EAA0B;AAC3B,kBAAO,KAAK,qBAAL,CAA2B,aAAa,CAAb,EAAgB,YAAhB,CAAlC,CAD2B;UAA7B;QALF;AASA,YAAK,QAAL,GAAgB,EAAhB,CAXoC;AAYpC,YAAK,YAAL,GAAoB,YAApB,CAZoC;AAapC,YAAK,qBAAL,CAA2B,YAA3B,IAA2C,IAA3C,CAboC;;;;iCAgB1B,KAAK,WAAW,cAAc;AACxC,WAAI,OAAO,GAAP,CADoC;;AAGxC,WAAG,SAAH,EAAc;AACZ,aAAG,OAAO,SAAP,KAAqB,QAArB,EAA+B;AAChC,uBAAY,CAAC,SAAD,CAAZ,CADgC;UAAlC;AAGA,mBAAU,IAAV,GAJY;AAKZ,mBAAU,OAAV,CAAkB,UAAC,QAAD,EAAc;AAC9B,mBAAQ,OAAO,QAAP,CADsB;UAAd,EAEf,IAFH,EALY;QAAd;;AAUA,cAAO,OAAO,IAAP,GAAc,YAAd,CAbiC;;;;yCAgBtB,cAAc,KAAK,WAAW,UAAU;AAC1D,WAAG,OAAO,SAAP,KAAqB,QAArB,EAA+B;AAChC,qBAAY,CAAC,SAAD,CAAZ,CADgC;QAAlC;AAGA,WAAI,YAAY,KAAK,qBAAL,CAA2B,YAA3B,CAAZ,CAJsD;AAK1D,WAAI,eAAe,KAAK,WAAL,CAAiB,GAAjB,EAAsB,SAAtB,EAAiC,YAAjC,CAAf,CALsD;AAM1D,WAAG,CAAC,KAAK,iBAAL,CAAuB,YAAvB,CAAD,EAAuC;AACxC,cAAK,iBAAL,CAAuB,YAAvB,IAAuC,EAAvC,CADwC;AAExC,mBAAU,MAAV,CAAiB,WAAjB,CAA6B;AAC3B,iBAAM,YAAN;AACA,oBAAS,GAAT;AACA,sBAAW,SAAX;AACA,mBAAQ,KAAR;UAJF,EAKG,UAAU,MAAV,CAAiB,QAAjB,CAA0B,IAA1B,CALH,CAFwC;QAA1C;AASA,YAAK,iBAAL,CAAuB,YAAvB,EAAqC,IAArC,CAA0C,QAA1C,EAf0D;;;;2CAkBtC,cAAc,KAAK,WAAW,UAAU;AAC5D,WAAI,eAAe,KAAK,WAAL,CAAiB,GAAjB,EAAsB,SAAtB,EAAiC,YAAjC,CAAf,CADwD;AAE5D,WAAI,qBAAqB,KAAK,iBAAL,CAAuB,YAAvB,CAArB,CAFwD;AAG5D,WAAI,YAAY,KAAK,qBAAL,CAA2B,YAA3B,CAAZ,CAHwD;;AAK5D,WAAG,kBAAH,EAAuB;AACrB,aAAG,QAAH,EAAa;AACX,eAAI,QAAQ,mBAAmB,OAAnB,CAA2B,QAA3B,CAAR,CADO;AAEV,gBAAK,iBAAL,CAAuB,YAAvB,EAAqC,MAArC,CAA4C,KAA5C,EAAmD,CAAnD,EAFU;UAAb,MAGO;AACL,kBAAO,KAAK,iBAAL,CAAuB,YAAvB,CAAP,CADK;UAHP;;AAOA,mBAAU,MAAV,CAAiB,WAAjB,CAA6B;AAC3B,iBAAM,YAAN;AACA,oBAAS,GAAT;AACA,sBAAW,SAAX;AACA,mBAAQ,QAAR;UAJF,EAKG,UAAU,MAAV,CAAiB,QAAjB,CAA0B,IAA1B,CALH,CARqB;QAAvB;;;;kCAiBW;AACX,WAAI,OAAO,IAAP,CADO;AAEX,gBAAS,YAAT,CAAsB,UAAtB,EAAkC;AAChC,aAAI,SAAS,KAAK,qBAAL,CAA2B,UAA3B,CAAT,CAD4B;AAEhC,aAAG,CAAC,MAAD,EAAQ;AACT,iBAAM,IAAI,KAAJ,CAAU,8BAA8B,UAA9B,CAAhB,CADS;UAAX;AAGA,kBAAS,mBAAT,CAA6B,GAA7B,EAAkC;AAChC,kBAAO,mCAA2B,GAA3B,EAAgC,MAAhC,CAAuC,UAAC,WAAD,EAAc,UAAd,EAA6B;AACzE,iBAAM,SAAS,IAAI,UAAJ,CAAT,CADmE;AAEzE,4BAAe,oEAAf;AACE,oBAAK,UAAL;AACE,6BAAY,UAAZ,IAA0B;AACxB,yBAAM,eAAM,aAAN,CAAoB,MAApB,CAAN;kBADF,CADF;AAIE,uBAJF;AADF,oBAMO,QAAL;AACE,qBAAI,OAAO,cAAP,CAAsB,aAAtB,CAAJ,EAA0C;AACxC,+BAAY,UAAZ,IAA0B,oBAAoB,MAApB,CAA1B,CADwC;kBAA1C;AAGA,uBAJF;AANF,cAFyE;AAczE,oBAAO,WAAP,CAdyE;YAA7B,EAe3C,EAfI,CAAP,CADgC;UAAlC;AAkBA,gBAAO,oBAAoB,MAApB,CAAP,CAvBgC;QAAlC;AAyBA,cAAO,mCAA2B,KAAK,qBAAL,CAA3B,CAAuD,MAAvD,CAA8D,UAAC,WAAD,EAAc,UAAd,EAA6B;AAC9F,qBAAY,UAAZ,IAA0B,aAAa,UAAb,CAA1B,CAD8F;AAE9F,gBAAO,WAAP,CAF8F;QAA7B,EAGlE,EAHI,CAAP,CA3BW;;;;;;;kCAmCA,OAAO,KAAK;AACvB,WAAI,kBAAkB,CAAC,MAAD,EAAS,aAAT,CAAlB,CADmB;AAEvB,WAAI,iBAAiB,OAAO,CAAC,IAAI,MAAJ,IAAc,gBAAgB,OAAhB,CAAwB,MAAM,IAAN,CAAW,IAAX,CAAxB,GAA2C,CAAC,CAAD,CAF/D;AAGvB,WAAI,oBAAoB,OAAO,MAAM,MAAN,KAAiB,IAAI,MAAJ,CAHzB;AAIvB,WAAI,kBAAkB,OAAO,IAAI,SAAJ,CAAc,GAAd,CAAkB,OAAlB,CAA0B,MAAM,MAAN,CAA1B,KAA4C,CAA5C,CAJN;AAKvB,WAAI,gBAAgB,oBAAoB,kBAAkB,iBAAlB,CAApB,CALG;AAMvB,WAAG,CAAC,aAAD,EAAgB;AACf,wBAAM,IAAN,CAAW,gCAAgC,MAAM,MAAN,CAA3C,CADe;QAAnB;AAGA,cAAO,aAAP,CATuB;;;;6CAYD,QAAQ;AAC9B,WAAG,MAAH,EAAW;AACT,gBAAO,KAAK,kBAAL,CAAwB,MAAxB,CAAP,CADS;QAAX;AAGA,cAAO,KAAK,qBAAL,CAJuB;;;;yCAOZ,QAAQ;AAC1B,WAAI,gBAAgB,KAAK,kBAAL,CAAwB,MAAxB,CAAhB,CADsB;AAE1B,WAAG,cAAc,MAAd,KAAyB,CAAzB,EAA2B;AAC5B,uBAAc,OAAd,CAAsB,UAAS,YAAT,EAAuB;;;AAC3C,eAAI,OAAO,oBAAY,KAAK,cAAL,CAAnB,CADuC;AAE3C,gBAAK,OAAL,CAAa,UAAC,KAAD,EAAW;AACtB,iBAAI,UAAU,OAAK,cAAL,CAAoB,KAApB,CAAV,CADkB;AAEtB,iBAAI,aAAa,QAAQ,UAAR,IAAsB,EAAtB,CAFK;;AAItB,iBAAI,WAAW,SAAX,KAAyB,aAAa,SAAb,CAAuB,SAAvB,EAAkC;AAC7D,sBAAO,OAAK,cAAL,CAAoB,KAApB,CAAP,CAD6D;cAA/D;YAJW,CAAb,CAF2C;;AAW3C,kBAAO,KAAK,qBAAL,CAA2B,aAAa,YAAb,CAAlC,CAX2C;UAAvB,EAYnB,IAZH,EAD4B;QAA9B;;;UA/WE;;;AAkYN,QAAO,OAAP,GAAiB,MAAjB,C;;;;;;AC/aA,mBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA,G;;;;;;ACJA;AACA;AACA;AACA,EAAC,E;;;;;;;;;;;;;;;;;;;;;;;;;;ACHD,KAAM,aAAa,eAAb;;KAEA;;;;;;;sCAEa;AACf,WAAI,CAAC,OAAO,QAAP,CAAgB,MAAhB,EAAwB;AAC3B,gBAAO,OAAO,QAAP,CAAgB,QAAhB,GAA2B,IAA3B,GAAkC,OAAO,QAAP,CAAgB,QAAhB,IAA6B,OAAO,QAAP,CAAgB,IAAhB,GAAuB,MAAM,OAAO,QAAP,CAAgB,IAAhB,GAAuB,EAApD,CAA/D,CADoB;QAA7B,MAEO;AACL,gBAAO,OAAO,QAAP,CAAgB,MAAhB,CADF;QAFP;;;;oCAOa;AACb,cAAO,KAAK,KAAL,CAAW,KAAK,MAAL,KAAgB,UAAhB,CAAX,CAAuC,QAAvC,CAAgD,EAAhD,CAAP,CADa;;;;8BAIN,KAAK;AACZ,cAAO,OAAO,GAAP,KAAe,QAAf,IAA2B,eAAe,MAAf,CADtB;;;;sCAIG,WAAW;AAC1B,cAAO,MAAM,SAAN,CAAgB,KAAhB,CAAsB,IAAtB,CAA2B,SAA3B,CAAP,CAD0B;;;;mCAId,IAAI;AAChB,cAAO,GAAG,QAAH,GACJ,OADI,CACI,+BADJ,EACqC,EADrC;QAEJ,OAFI,CAEI,oBAFJ,EAE0B,IAF1B;QAGJ,KAHI,CAGE,YAHF,KAGmB,EAHnB,CADS;;;;iCAON,MAAM;AAChB,WAAI,SAAS,KAAK,MAAL,CADG;AAEhB,cAAO,SAAS,CAAT,IAAc,OAAO,KAAK,SAAS,CAAT,CAAZ,KAA4B,UAA5B,CAFL;;;;2BAKZ,KAAK;AACP,WAAI,OAAO,OAAP,EAAgB;AAChB,iBAAQ,KAAR,CAAc,aAAa,GAAb,CAAd,CADgB;QAApB;;;;0BAKC,KAAK;AACN,WAAI,OAAO,OAAP,EAAgB;AAChB,iBAAQ,IAAR,CAAa,aAAa,GAAb,CAAb,CADgB;QAApB;;;;2BAKE,OAAO,IAAG;AACd,WAAG,SAAS,SAAT,CAAmB,IAAnB,EAAyB;AAC1B,gBAAO,GAAG,IAAH,CAAQ,KAAR,CAAP,CAD0B;QAA5B;AAGA,cAAO,YAAY;AACjB,gBAAO,GAAG,KAAH,CAAS,KAAT,EAAgB,SAAhB,CAAP,CADiB;QAAZ,CAJO;;;;0BASX,GAAG,IAAI;AACV,WAAI,CAAJ,CADU;AAEV,WAAI,CAAJ,CAFU;AAGV,WAAI,CAAJ,EAAO;AACL,aAAI,EAAE,MAAF,CADC;AAEL,aAAI,KAAK,IAAL,IAAa,OAAO,CAAP,KAAa,UAAb,EAAyB;AACxC,eAAI,CAAJ,CADwC;AAExC,kBAAO,IAAI,CAAJ,EAAO;AACZ,iBAAI,GAAG,IAAH,CAAQ,EAAE,CAAF,CAAR,EAAc,CAAd,EAAiB,EAAE,CAAF,CAAjB,MAA2B,KAA3B,EAAiC;AACnC,qBADmC;cAArC;AAGA,kBAAK,CAAL,CAJY;YAAd;UAFF,MAQO;AACL,gBAAK,CAAL,IAAU,CAAV,EAAa;AACX,iBAAI,EAAE,cAAF,CAAiB,CAAjB,CAAJ,EAAyB;AACvB,mBAAI,GAAG,IAAH,CAAQ,EAAE,CAAF,CAAR,EAAc,CAAd,EAAiB,EAAE,CAAF,CAAjB,MAA2B,KAA3B,EAAiC;AACnC,uBADmC;gBAArC;cADF;YADF;UATF;QAFF;;;;4BAsBK,MAAM;AACX,WAAI,OAAO,SAAP,CADO;AAEX,WAAI,OAAO,GAAG,KAAH,CAAS,IAAT,CAAc,IAAd,EAAoB,CAApB,EAAuB,KAAK,MAAL,CAA9B,CAFO;AAGX,YAAK,OAAL,CAAa,UAAS,MAAT,EAAiB;AAC5B,aAAG,QAAO,qEAAP,KAAkB,QAAlB,EAA4B;AAC7B,8CAA2B,MAA3B,EAAmC,OAAnC,CAA2C,UAAU,IAAV,EAAgB;AACzD,kBAAK,IAAL,IAAa,OAAO,IAAP,CAAb,CADyD;YAAhB,CAA3C,CAD6B;UAA/B;QADW,CAAb,CAHW;AAUX,cAAO,IAAP,CAVW;;;UAhFT;;;AA+FN,QAAO,OAAP,GAAiB,IAAI,IAAJ,EAAjB,C;;;;;;;;;;;;;;;;ACjGA;;;;;;KACM;AAEJ,YAFI,WAEJ,CAAY,IAAZ,EAAkB;yCAFd,aAEc;;AAChB,SAAI,IAAI,QAAQ,EAAR,CADQ;AAEhB,UAAK,iBAAL,CAAuB,EAAE,QAAF,CAAvB,CAFgB;IAAlB;;;;;8BAFI;;uCAQc,UAAU;AAC1B,WAAG,CAAC,QAAD,IAAa,CAAC,SAAS,gBAAT,EAA2B;AAC1C,oBAAW,MAAX,CAD0C;QAA5C;AAGA,gBAAS,gBAAT,CAA0B,SAA1B,EAAqC,eAAK,KAAL,CAAW,IAAX,EAAiB,KAAK,eAAL,CAAtD,EAA6E,KAA7E,EAJ0B;;;;qCAOX,OAAO;AACtB,WAAI,cAAc,MAAM,IAAN,CAAW,GAAX;WAClB,YADA,CADsB;;AAItB,WAAG,eAAe,KAAK,qBAAL,EAA2B;AAC3C,eAAM,KAAK,qBAAL,CAA2B,WAA3B,CAAN,CAD2C;QAA7C;;AAIA,WAAI,CAAC,KAAK,YAAL,CAAkB,KAAlB,EAAyB,GAAzB,CAAD,EAAgC;AAClC,gBAAO,KAAP,CADkC;QAApC;;AAIA,WAAI,UAAU,KAAK,gBAAL,CAAsB,MAAM,IAAN,CAAW,IAAX,CAAhC,CAZkB;AAatB,WAAI,OAAJ,EAAa;AACX,iBAAQ,IAAR,CAAa,IAAb,EAAmB,KAAnB,EAA0B,GAA1B,EADW;QAAb;;;UA5BE;;;AAmCN,QAAO,OAAP,GAAiB,WAAjB,C;;;;;;;;;;;;ACpCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,qBAAb;;AAEA,WAAQ,yCAAR;;AAEA,mDAAqB;AACnB,iCAAiB,mBAAjB,GADmB;AAEnB,cAAS,aAAT,CAAuB,MAAvB,EAA+B,gBAA/B,CAAgD,SAAhD,EAA2D,KAAK,UAAL,EAAiB,IAA5E,EAFmB;AAGnB,UAAK,WAAL,GAHmB;IANU;AAY/B,yDAAwB;AACtB,kBAAa,KAAK,OAAL,CAAb,CADsB;AAEtB,cAAS,aAAT,CAAuB,MAAvB,EAA+B,mBAA/B,CAAmD,SAAnD,EAA8D,KAAK,UAAL,EAAiB,IAA/E,EAFsB;IAZO;AAiB/B,2BAAS;AACP,SAAI,CAAC,KAAK,OAAL,EAAa;AAChB,YAAK,OAAL,GAAe,WAAW,YAAM;AAC9B,kCAAc,WAAd,GAD8B;QAAN,EAEvB,GAFY,CAAf,CADgB;MAAlB;IAlB6B;AAyB/B,mCAAY,GAAG;AACb,SAAI,MAAM,MAAC,CAAO,KAAP,GAAgB,EAAE,KAAF,GAAU,EAAE,OAAF,CADxB;AAEb,SAAI,QAAQ,gBAAM,OAAN,CAAc,GAAd,EAAmB;AAC7B,SAAE,eAAF,GAD6B;AAE7B,SAAE,cAAF,GAF6B;AAG7B,YAAK,KAAL,GAH6B;MAA/B;IA3B6B;AAkC/B,uCAAe;AACb,SAAI,SAAS,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,UAAV,CAAvB,EAA8C,IAA9C,CAAmD,OAAnD,CAAT,CADS;AAEb,SAAI,OAAO,MAAP,EAAe;AACjB,cAAO,KAAP,GADiB;MAAnB;IApC6B;AAyC/B,6BAAU;AACR,YACE;;SAAS,MAAK,QAAL,EAAc,IAAG,uBAAH,EAA2B,WAAU,OAAV,EAAkB,eAAa,CAAC,KAAK,KAAL,CAAW,aAAX,EAAlF;OACE,wDAAsB,KAAI,YAAJ,EAAiB,UAAU,KAAK,KAAL,CAAW,QAAX,EAAjD,CADF;MADF,CADQ;IAzCqB;EAAlB;;;;;;;;;;;;;ACNf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,sBAAb;;AAEA,mDAAqB;AACnB,oCAAmB,EAAnB,CAAsB,CAAC,QAAD,CAAtB,EAAkC,KAAK,SAAL,CAAlC,CADmB;AAEnB,iCAAiB,EAAjB,CAAoB,aAAW,kCAAe,wBAAf,CAA/B,EAA2E,KAAK,SAAL,CAA3E,CAFmB;AAGnB,UAAK,0BAAL,GAAkC,EAAE,QAAF,CAAW,KAAK,iBAAL,EAAwB,GAAnC,EAAwC,EAAC,SAAS,KAAT,EAAgB,UAAU,IAAV,EAAzD,CAAlC,CAHmB;IAJU;AAU/B,yDAAwB;AACtB,oCAAmB,GAAnB,CAAuB,CAAC,QAAD,CAAvB,EAAmC,KAAK,SAAL,CAAnC,CADsB;AAEtB,iCAAiB,GAAjB,CAAqB,aAAW,kCAAe,wBAAf,CAAhC,EAA4E,KAAK,SAAL,CAA5E,CAFsB;AAGtB,sCAAqB,KAArB,GAHsB;AAItB,UAAK,0BAAL,CAAgC,MAAhC,GAJsB;IAVO;AAiB/B,qDAAoB,WAAW,WAAW;;AAExC,SAAG,UAAU,KAAV,KAAoB,CAApB,IAAyB,KAAK,KAAL,CAAW,KAAX,GAAmB,CAAnB,EAAsB;AAChD,mCAAiB,sBAAjB,CAAwC,UAAU,IAAV,CAAxC,CADgD;MAAlD;IAnB6B;AAwB/B,qDAAsB;AACpB,cAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,KAAV,CAAgB,IAAhB,CAAqB,WAArB,CAArB,CAAuD,KAAvD,GADoB;IAxBS;AA4B/B,+CAAmB;AACjB,YAAO,KAAK,SAAL,EAAP,CADiB;IA5BY;AAgC/B,mCAAa;AACX,SAAI,SAAS,+BAAmB,MAAnB,EAAT,CADO;;AAGX,YAAO;AACL,aAAM,OAAO,IAAP;AACN,iBAAU,OAAO,QAAP;AACV,sBAAe,OAAO,aAAP;AACf,sBAAe,OAAO,aAAP;AACf,aAAM,OAAO,IAAP;AACN,cAAO,OAAO,IAAP,CAAY,MAAZ;AACP,kBAAW,4BAAiB,wBAAjB,EAAX;AACA,8BAAuB,4BAAiB,oBAAjB,EAAvB;MARF,CAHW;IAhCkB;AA+C/B,mCAAa;AACX,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADW;IA/CkB;AAmD/B,6CAAiB;AACf,SAAI,cAAc,IAAd,CADW;;AAGf,SAAI,KAAK,KAAL,CAAW,IAAX,IAAmB,CAAC,KAAK,KAAL,CAAW,KAAX,IAAoB,KAAK,KAAL,CAAW,QAAX,EAAqB;AAC/D,qBAAc,4DAAyB,KAAI,aAAJ,EAAzB,CAAd,CAD+D;MAAjE;;AAIA,YAAO,WAAP,CAPe;IAnDc;AA6D/B,iCAAW;AACT,SAAI,OAAO,IAAP,CADK;;AAGT,SAAI,KAAK,KAAL,CAAW,SAAX,IAAwB,CAAC,KAAK,KAAL,CAAW,QAAX,EAAqB;AAChD,cAAO,qDAAmB,KAAI,SAAJ,EAAc,cAAc,KAAK,KAAL,CAAW,KAAX,GAAmB,CAAnB,EAA/C,CAAP,CADgD;MAAlD;;AAIA,YAAO,IAAP,CAPS;IA7DoB;AAuE/B,qCAAa;AACX,SAAI,KAAK,IAAL,CAAU,UAAV,EAAqB;AACvB,YAAK,IAAL,CAAU,UAAV,CAAqB,QAArB,CAA8B,CAA9B,EADuB;MAAzB;IAxE6B;AA6E/B,mDAAoB;;AAElB,SAAI,CAAC,KAAK,IAAL,CAAU,UAAV,IAAwB,CAAC,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,EAAuB;AACnD,cADmD;MAArD;;AAIA,SAAI,YAAY,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,eAAV,CAAjC;SACA,YAAY,SAAS,sBAAT,CAAgC,YAAhC,EAA8C,CAA9C,EAAiD,YAAjD;SACZ,QAAQ,KAAK,IAAL,CAAU,UAAU,SAAV,GAAsB,SAAtB,CAAlB;SACA,MAAM,KAAK,KAAL,CAAW,CAAC,UAAU,YAAV,GAAyB,UAAU,SAAV,CAA1B,GAAiD,SAAjD,CAAjB,CATc;;AAWlB,SAAI,KAAK,KAAL,CAAW,aAAX,GAA2B,KAA3B,IAAoC,KAAK,KAAL,CAAW,aAAX,GAA2B,MAAM,CAAN,EAAQ;AACzE,WAAI,gBAAgB,UAAU,aAAV,CAAwB,sBAAxB,CAAhB,CADqE;AAEzE,WAAI,CAAC,aAAD,EAAe;AACjB,yBAAgB,UAAU,aAAV,CAAwB,8CAAxB,CAAhB,CADiB;QAAnB;AAGA,uBAAM,sBAAN,CAA6B,aAA7B,EAA4C,SAA5C,EAAuD,KAAvD,EALyE;MAA3E;IAxF6B;AAiG/B,mCAAW,OAAO,KAAI;;AAEpB,SAAI,OAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,CAAP;SACA,aADJ,CAFoB;;AAKpB,SAAI,KAAK,SAAL,KAAmB,MAAnB,EAA2B;AAC7B,WAAI,uBAAqB,KAAK,oBAAL,CADI;AAE7B,uBAAgB,uDAAqB,KAAK,aAAa,KAAK,GAAL;AACrD,eAAM,KAAK,IAAL;AACN,aAAI,KAAK,EAAL;AACJ,sBAAa,KAAK,iBAAL;AACb,uBAAc,KAAK,YAAL;AACd,yBAAgB,cAAhB;AACA,cAAK,KAAK,GAAL;AACL,oBAAW,KAAK,SAAL;AACX,eAAM,KAAK,aAAL;AACN,iBAAQ,KAAK,eAAL;AACR,cAAK,KAAL;AACA,gCAAuB,KAAK,KAAL,CAAW,qBAAX;AACvB,mBAAU,KAAK,KAAL,CAAW,aAAX,KAA6B,KAA7B,EAZI,CAAhB,CAF6B;MAA/B,MAeO;AACL,uBAAgB,qDAAmB,KAAK,aAAa,KAAK,GAAL;AACnD,eAAM,KAAK,IAAL;AACN,sBAAa,KAAK,iBAAL;AACb,cAAK,KAAK,GAAL;AACL,kBAAS,KAAK,OAAL;AACT,cAAK,KAAL;AACA,mBAAU,KAAK,KAAL,CAAW,aAAX,KAA6B,KAA7B,EANI,CAAhB,CADK;MAfP;;AAyBA,YACE;;SAAK,KAAK,GAAL,EAAU,WAAU,sBAAV,EAAf;OACI,aADJ;MADF,CA9BoB;IAjGS;AAsI/B,6BAAS;;AAEP,SAAI,wBAAwB,0BAAG;AACzB,0BAAmB,IAAnB;AACA,oBAAa,KAAK,KAAL,CAAW,SAAX;MAFS,CAAxB;SAIA,cAAc,KAAK,cAAL,EAAd;SACA,OAAO,KAAK,QAAL,EAAP,CAPG;;AASP,YACE;;SAAK,WAAU,eAAV,EAAL;OACE;AACE,eAAM,KAAK,KAAL,CAAW,IAAX;AACN,oBAAW,KAAK,UAAL;AACX,sBAAa,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,GAAyB,CAAzB;AACb,2BAAkB,KAAK,0BAAL;AAClB,cAAI,OAAJ,EALF,CADF;OAOE;;WAAK,KAAI,iBAAJ,EAAsB,WAAW,qBAAX,EAA3B;SACI,WADJ;SAEE,oBAAC,SAAD;AACE,gBAAI,YAAJ;AACA,yBAAc,KAAK,UAAL;AACd,mBAAQ,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB;AACR,qBAAU,KAAK,KAAL,CAAW,aAAX;AACV,0BAAe,KAAK,KAAL,CAAW,aAAX;AACf,sBAAW,EAAX;AACA,iBAAK,QAAL,EAPF,CAFF;QAPF;OAkBI,IAlBJ;MADF,CATO;IAtIsB;EAAlB;;;;;;;;;;;;;ACbf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,oBAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,gBAAW,MAAM,SAAN,CAAgB,IAAhB;AACX,uBAAkB,MAAM,SAAN,CAAgB,IAAhB;AAClB,WAAM,MAAM,SAAN,CAAgB,MAAhB;AACN,kBAAa,MAAM,SAAN,CAAgB,IAAhB;IAJf;;AAOA,mDAAqB;AACnB,UAAK,eAAL,GAAuB,EAAE,QAAF,CAAW,KAAK,OAAL,EAAc,GAAzB,CAAvB,CADmB;IAbU;AAiB/B,yDAAwB;AACtB,UAAK,eAAL,CAAqB,MAArB,GADsB;IAjBO;AAqB/B,2CAAgB,GAAG;AACjB,sCAAqB,YAArB,CAAkC;AAChC,aAAM,EAAE,MAAF,CAAS,KAAT;MADR,EADiB;AAIjB,UAAK,eAAL,GAJiB;IArBY;AA4B/B,+BAAW;AACT,sCAAqB,MAArB,GADS;AAET,UAAK,KAAL,CAAW,SAAX,GAFS;IA5BoB;AAiC/B,mCAAY,GAAG;;AAEb,SAAI,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,OAAd,IAAyB,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,SAAd,EAAwB;AAC/E,SAAE,cAAF,GAD+E;AAE/E,gCAAc,SAAd,GAF+E;;AAI/E,WAAI,CAAC,KAAK,KAAL,CAAW,WAAX,EAAuB;AAC1B,gBAD0B;QAA5B;;AAIA,WAAI,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,OAAd,EAAuB;AACvC,0CAAqB,UAArB,GADuC;AAEvC,cAAK,KAAL,CAAW,gBAAX,GAFuC;QAAzC;;AAKA,WAAI,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,SAAd,EAAyB;AACzC,0CAAqB,UAArB,GADyC;AAEzC,cAAK,KAAL,CAAW,gBAAX,GAFyC;QAA3C;MAbF,MAiBO,IAAI,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,GAAd,EAAkB;AACzC,SAAE,cAAF,GADyC;MAApC,MAEA,IAAI,EAAE,OAAF,KAAc,gBAAM,OAAN,CAAc,KAAd,EAAqB;AAC5C,SAAE,cAAF,GAD4C;AAE5C,gCAAc,WAAd,GAF4C;AAG5C,wCAAqB,UAArB,GAH4C;MAAvC;IAtDsB;AA6D/B,6BAAU;;;;;;;AAOR,SAAI,aAAa,KAAK,KAAL,CAAW,IAAX,CAAgB,MAAhB,GAAyB,QAAzB,GAAoC,EAApC,CAPT;;AASR,YACE;;SAAK,WAAU,kBAAV,EAAL;OACE;;WAAM,WAAU,KAAV,EAAgB,cAAa,KAAb,EAAtB;SACE;;aAAO,KAAI,aAAJ,EAAkB,SAAQ,eAAR,EAAwB,WAAY,UAAZ,EAAjD;WAA2E,iCAAQ,iBAAR;UAD7E;SAEE,+BAAO,MAAK,eAAL;AACL,eAAG,eAAH;AACA,sBAAU,6BAAV;AACA,iBAAK,MAAL;AACA,gBAAI,aAAJ;AACA,qBAAU,KAAK,cAAL;AACV,sBAAW,KAAK,UAAL;AACX,kBAAO,KAAK,KAAL,CAAW,IAAX,EAPT,CAFF;QADF;MADF,CATQ;IA7DqB;EAAlB;;;;;;;;;;;;;ACPf;;;;;;mBAEe;AAEb,uCAAa,MAAM;AACjB,8BAAc,QAAd,CAAuB,gBAAvB,EAAyC,IAAzC,EADiB;IAFN;AAMb,qCAAa;AACX,8BAAc,QAAd,CAAuB,gBAAvB,EADW;IANA;AAUb,qCAAa;AACX,8BAAc,QAAd,CAAuB,gBAAvB,EADW;IAVA;AAcb,qCAAa;AACX,8BAAc,QAAd,CAAuB,gBAAvB,EADW;IAdA;AAkBb,qCAAY,MAAM;AAChB,8BAAc,QAAd,CAAuB,eAAvB,EAAwC;AACtC,cAAO,KAAK,KAAL;MADT,EADgB;IAlBL;AAwBb,2BAAQ;AACN,8BAAc,QAAd,CAAuB,UAAvB,EADM;IAxBK;AA4Bb,6BAAS;AACP,8BAAc,QAAd,CAAuB,WAAvB,EADO;IA5BI;AAgCb,iCAAW;AACT,8BAAc,QAAd,CAAuB,cAAvB,EADS;IAhCE;;;;;;;;;;;;;mBCFA;AACb,6CADa;AAEb,6CAFa;AAGb,6CAHa;;;;;;;;;;;;;;ACAf;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,yBAAb;;AAEA,6BAAS;AACP,YACE;;SAAK,WAAU,YAAV,EAAL;OACE;;WAAK,WAAU,8BAAV,EAAyC,KAAI,MAAJ,EAA9C;SACG,iCAAQ,WAAR;QAFL;MADF,CADO;IAJsB;EAAlB;;;;;;;;;;;;;ACFf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,mBAAb;;AAEA,qDAAqB;AACnB,SAAI,aAAa,6BAAkB,iBAAlB,CAAoC,oCAAwB,QAAxB,CAAjD,CADe;AAEnB,SAAI,UAAJ,EAAgB;AACd,YAAK,WAAL,GAAmB,WAAW,IAAX,CAAgB,GAAhB,EAAqB,WAArB,EAAnB,CADc;MAAhB;IAN6B;AAW/B,+BAAU;AACR,SAAI,aAAJ,CADQ;;AAGR,SAAI,gBAAM,QAAN,CAAe,KAAf,EAAJ,EAA4B;AAC1B,cACE;;WAAM,WAAU,6BAAV,EAAN;SACG,oCAAwB,OAAxB;QAFL,CAD0B;MAA5B,MAMO;AACL,cACE;;WAAM,WAAU,gBAAV,EAAN;SACE,8BAAM,WAAU,2CAAV,EAAN,CADF;QADF,CADK;MANP;AAaA,YAAO,IAAP,CAhBQ;IAXqB;AA8B/B,iCAAW;AACT,sCAAqB,QAArB,GADS;IA9BoB;AAkC/B,6BAAS;;AAEP,SAAI,UAAU,0BAAG;AACX,qBAAc,IAAd;AACA,iBAAU,CAAC,KAAK,WAAL;AACX,uBAAgB,KAAK,KAAL,CAAW,YAAX;MAHR,CAAV;SAKA,YAAY,KAAK,OAAL,EAAZ,CAPG;;AASP,YACE;;SAAK,WAAW,OAAX,EAAoB,KAAI,MAAJ,EAAzB;OACG,SADH;OAEE;;WAAM,WAAU,iBAAV,EAAN;SACM,iCAAQ,SAAR,SAAqB,KAAK,WAAL;QAH7B;OAKE;AACE,kBAAS,KAAK,QAAL;AACT,cAAI,YAAJ;AACA,oBAAU,oEAAV,EAHF,CALF;MADF,CATO;IAlCsB;EAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACPf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;KAEM;;;AAEJ,YAFI,kBAEJ,GAAc;yCAFV,oBAEU;;8FAFV,gCAEU;;AAGZ,WAAK,KAAL,GAAa,MAAK,gBAAL,EAAb,CAHY;;IAAd;;8BAFI;;mCAQU;AACZ,cAAO;AACL,eAAM,EAAN;AACA,eAAM,EAAN;AACA,mBAAU,KAAV;AACA,wBAAe,IAAf;AACA,wBAAe,CAAf;QALF,CADY;;;;wCAUK;AACjB,cAAO;AACL,kBAAS,KAAT;AACA,cAAK,EAAL;AACA,iBAAQ,EAAR;AACA,gBAAO,EAAP;AACA,iBAAQ,EAAR;QALF,CADiB;;;;yCAUC;;;AAClB,gCAAc,QAAd,CAAuB;AACrB,2BAAkB,sBAAC,IAAD,EAAU;AAC1B,kBAAK,sBAAL,CAA4B,KAAK,IAAL,CAA5B,CAD0B;UAAV;AAGlB,0BAAiB,qBAAC,IAAD,EAAU;AACzB,kBAAK,GAAL,CAAS;AACP,4BAAe,KAAK,KAAL;YADjB,EADyB;UAAV;AAKjB,2BAAkB,wBAAM;AACtB,kBAAK,UAAL,GADsB;UAAN;AAGlB,2BAAkB,wBAAM;AACtB,kBAAK,UAAL,GADsB;UAAN;AAGlB,2BAAkB,wBAAM;AACtB,kBAAK,UAAL,GADsB;UAAN;AAGlB,sBAAa,oBAAM;AACjB,kBAAK,UAAL,CAAgB,IAAhB,EADiB;UAAN;AAGb,qBAAY,mBAAM;AAChB,kBAAK,kBAAL,GADgB;UAAN;AAGZ,yBAAgB,sBAAM;AACpB,kBAAK,QAAL,GADoB;UAAN;AAGhB,qCAA4B,+BAAC,IAAD,EAAU;AACpC,kBAAK,mBAAL,CAAyB,IAAzB,EADoC;UAAV;AAG5B,qCAA4B,iCAAM;AAChC,kBAAK,oBAAL,GADgC;UAAN;AAG5B,2BAAkB,yBAAM;AACtB,eAAI,OAAK,KAAL,CAAW,OAAX,EAAoB;AACtB,oBAAK,cAAL,GADsB;AAEtB,oBAAK,UAAL,GAFsB;YAAxB;UADgB;QAjCpB,EADkB;;;;yCA2CA,MAAM;AACxB,WAAI,CAAC,KAAK,KAAL,CAAW,OAAX,IAAsB,EAAE,GAAF,CAAM,IAAN,EAAY,aAAZ,MAA+B,uBAA/B,EAAwD;AACjF,cAAK,KAAL,CAAW,OAAX,GAAqB,IAArB,CADiF;AAEjF,cAAK,cAAL,GAFiF;QAAnF;;;;4CAMqB;AACrB,WAAI,KAAK,KAAL,CAAW,OAAX,EAAoB;AACtB,cAAK,cAAL,GADsB;QAAxB;;;;sCAKe;AACf,YAAK,WAAL,CAAiB,4BAAS,GAAT,CAAa,UAAb,CAAjB,EADe;AAEf,YAAK,YAAL,CAAkB,4BAAS,GAAT,CAAa,aAAb,CAAlB,EAFe;AAGf,YAAK,YAAL,CAAkB,4BAAS,GAAT,CAAa,QAAb,CAAlB,EAHe;;;;sCAMA;AACf,YAAK,KAAL,GAAa,KAAK,gBAAL,EAAb,CADe;;;;kCAIe;WAArB,oEAAc,qBAAO;;AAC9B,WAAI,QAAQ,KAAK,IAAL,CAAU,IAAV,CADkB;;AAG9B,WAAI,KAAJ,EAAW;AACT,aAAI,aAAa,EAAE,MAAF,CAAS,KAAK,KAAL,CAAW,MAAX,CAAtB;aACA,cAAc,6BAAW,KAAK,KAAL,CAAW,GAAX,EAAgB,KAA3B,EAAkC,UAAlC,CAAd,CAFK;;AAIT,aAAI,eAAe,KAAK,IAAL,CAAU,aAAV,GAA0B,YAAY,MAAZ,GAAqB,CAArB,EAAuB;AAClE,gBAAK,IAAL,CAAU,aAAV,GAA0B,CAA1B,CADkE;UAApE;;AAIA,cAAK,GAAL,CAAS;AACP,iBAAM,WAAN;AACA,0BAAe,IAAI,IAAJ,GAAW,OAAX,EAAf;AACA,0BAAe,KAAK,IAAL,CAAU,aAAV;AACf,qBAAU,IAAV;UAJF,EARS;QAAX,MAeO;AACL,cAAK,GAAL,CAAS;AACP,iBAAM,EAAN;AACA,0BAAe,CAAf;AACA,0BAAe,IAAf;AACA,qBAAU,KAAV;UAJF,EADK;QAfP;;;;4CAyBqB,MAAM;AAC3B,YAAK,GAAL,CAAS;AACP,eAAM,IAAN;AACA,mBAAU,KAAV;QAFF,EAD2B;;;;iCAOjB;;;AACV,YAAK,KAAL,CAAW,GAAX,GAAiB,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,GAAX,EAAgB,UAAC,IAAD,EAAU;AAC/C,aAAI,OAAK,KAAL,CAAW,MAAX,CAAkB,KAAK,GAAL,CAAtB,EAAgC;AAC9B,aAAE,MAAF,CAAS,IAAT,EAAe,OAAK,KAAL,CAAW,MAAX,CAAkB,KAAK,GAAL,CAAjC,EAD8B;UAAhC,MAEO;;AAEL,aAAE,MAAF,CAAS,IAAT,EAAe;AACX,0BAAa,CAAb;AACA,iCAAoB,CAApB;AACA,yBAAY,KAAZ;YAHJ,EAFK;UAFP;AAUA,gBAAO,IAAP,CAX+C;QAAV,CAAvC,CADU;;;;kCAgBC,eAAe;AAC1B,YAAK,KAAL,CAAW,MAAX,GAAoB,EAAE,SAAF,CAAY,aAAZ,EAA2B,UAAC,IAAD,EAAU;AACvD,gBAAO,EAAE,IAAF,CAAO,IAAP,EAAa,aAAb,EAA4B,oBAA5B,EAAkD,YAAlD,CAAP,CADuD;QAAV,CAA/C,CAD0B;AAI1B,YAAK,SAAL,GAJ0B;;;;iCAOhB,eAAe;AACzB,WAAI,QAAQ,EAAR,CADqB;AAEzB,SAAE,MAAF,CAAS,aAAT,EAAwB,UAAS,IAAT,EAAe;AACrC,eAAM,IAAN,CAAW;AACT,sBAAW,MAAX;AACA,iBAAM,KAAK,IAAL;AACN,gBAAK,KAAK,GAAL;AACL,oBAAS,KAAK,OAAL;UAJX,EADqC;QAAf,CAAxB,CAFyB;AAUzB,YAAK,KAAL,CAAW,KAAX,GAAmB,KAAnB,CAVyB;AAWzB,YAAK,kBAAL,GAXyB;;;;kCAcd,QAAQ;AACnB,cAAO,EAAE,MAAF,CAAS,MAAT,EAAiB,gBAAM,IAAN,CAAW,QAAX,CAAxB,CADmB;;;;iCAIT,MAAM;AAChB,cAAO;AACL,oBAAW,MAAX;AACA,aAAI,KAAK,EAAL;AACJ,eAAM,KAAK,YAAL,IAAqB,KAAK,IAAL;AAC3B,uBAAc,KAAK,YAAL;AACd,cAAK,KAAK,GAAL;AACL,oBAAW,KAAK,SAAL;AACX,wBAAe,KAAK,QAAL,CAAc,IAAd;AACf,0BAAiB,KAAK,QAAL,CAAc,MAAd;QARnB,CADgB;;;;kCAaL,gBAAgB;;AAE3B,WAAI,SAAS,EAAE,MAAF,CAAS,cAAT,CAAT,CAFuB;;AAI3B,YAAK,KAAL,CAAW,MAAX,GAAoB,KAAK,YAAL,CAAkB,MAAlB,EAA0B,GAA1B,CAA8B,KAAK,WAAL,CAAlD,CAJ2B;AAK3B,YAAK,kBAAL,GAL2B;;;;0CAQR;AACnB,YAAK,KAAL,CAAW,GAAX,GAAiB,GAAG,MAAH,CAAU,KAAK,KAAL,CAAW,MAAX,EAAmB,KAAK,KAAL,CAAW,KAAX,CAA9C,CADmB;AAEnB,YAAK,SAAL,GAFmB;;;;kCAKR;AACX,WAAI,OAAO,KAAK,IAAL,CAAU,IAAV,CAAe,KAAK,IAAL,CAAU,aAAV,CAAtB,CADO;;AAGX,WAAI,CAAC,IAAD,EAAM;AAAE,gBAAF;QAAV;;AAEA,gCAAc,QAAd,CAAuB,WAAvB,EAAoC;AAClC,cAAK,KAAK,GAAL;QADP,EALW;AAQX,sCAAoB,QAApB,CAA6B,qBAA7B,EAAoD;AAClD,cAAK,KAAK,GAAL;AACL,iBAAQ,UAAR;QAFF,EARW;;;;kCAcA;AACX,WAAI,aAAJ,CADW;AAEX,WAAI,KAAK,IAAL,CAAU,aAAV,KAA6B,KAAK,IAAL,CAAU,IAAV,CAAe,MAAf,GAAwB,CAAxB,EAA4B;AAC3D,yBAAgB,KAAK,IAAL,CAAU,aAAV,GAA0B,CAA1B,CAD2C;QAA7D;AAGA,YAAK,GAAL,CAAS,eAAT,EAA0B,aAA1B,EALW;;;;kCAQA;AACX,WAAI,aAAJ,CADW;AAEX,WAAI,KAAK,IAAL,CAAU,aAAV,KAA4B,CAA5B,EAA+B;AACjC,yBAAgB,KAAK,IAAL,CAAU,aAAV,GAA0B,CAA1B,CADiB;QAAnC;AAGA,YAAK,GAAL,CAAS,eAAT,EAA0B,aAA1B,EALW;;;;0CAQQ;AACnB,YAAK,GAAL,CAAS;AACP,eAAM,EAAN;AACA,eAAM,EAAN;AACA,wBAAe,CAAf;AACA,mBAAU,KAAV;QAJF,EADmB;;;;gCASV;AACT,qCAAmB,eAAnB,mCACG,kCAAe,wBAAf,EAA0C,MAD7C,EADS;;;UA3OP;;;mBAkPS,IAAI,kBAAJ;;;;;;;;;;;;;AC3Pf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,qBAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,iBAAY,MAAM,SAAN,CAAgB,IAAhB;AACZ,kBAAa,MAAM,SAAN,CAAgB,MAAhB;AACb,aAAQ,MAAM,SAAN,CAAgB,MAAhB;AACR,oBAAe,MAAM,SAAN,CAAgB,MAAhB;AACf,qBAAgB,MAAM,SAAN,CAAgB,MAAhB;AAChB,uBAAkB,MAAM,SAAN,CAAgB,MAAhB;AAClB,aAAQ,MAAM,SAAN,CAAgB,MAAhB;AACR,eAAU,MAAM,SAAN,CAAgB,MAAhB;AACV,YAAO,MAAM,SAAN,CAAgB,MAAhB;AACP,WAAM,MAAM,SAAN,CAAgB,SAAhB,CAA0B,CAAC,MAAM,SAAN,CAAgB,MAAhB,EAAwB,MAAM,SAAN,CAAgB,MAAhB,CAAnD,CAAN;AACA,8BAAyB,MAAM,SAAN,CAAgB,IAAhB;IAX3B;;AAcA,+BAAU,KAAK;AACb,SAAI,yBAAc,UAAd,CAAyB,GAAzB,CAAJ,EAAmC;AACjC,wCAAqB,WAArB,CAAiC;AAC/B,gBAAO,KAAK,KAAL,CAAW,GAAX;QADT,EADiC;MAAnC;IArB6B;AA4B/B,+BAAU,GAAG;AACX,OAAE,cAAF,GADW;AAEX,8BAAc,WAAd,GAFW;AAGX,sCAAqB,UAArB,GAHW;IA5BkB;AAkC/B,6BAAU;AACR,SAAI,UAAU,0BAAG;AACf,qBAAc,IAAd;AACA,mBAAY,KAAK,KAAL,CAAW,QAAX;MAFA,CAAV,CADI;;AAMR,YACE;;SAAK,WAAW,OAAX,EAAoB,SAAS,KAAK,QAAL,EAAe,cAAc,KAAK,QAAL,EAA/D;OACE;;WAAM,WAAU,kBAAV,EAAN;SACE;AACE,uBAAY,KAAK,KAAL,CAAW,SAAX;AACZ,iBAAK,QAAL;AACA,gBAAK,KAAK,KAAL,CAAW,EAAX;AACL,qBAAU,KAAK,KAAL,CAAW,IAAX;AACV,mBAAQ,KAAK,KAAL,CAAW,MAAX;AACR,0BAAe,KAAK,KAAL,CAAW,qBAAX;AACf,mBAAO,OAAP,EAPF,CADF;QADF;OAWE,8BAAM,WAAU,YAAV,EAAuB,yBAAyB,EAAC,QAAQ,KAAK,KAAL,CAAW,WAAX,IAA0B,KAAK,KAAL,CAAW,IAAX,EAA5D,EAA7B,CAXF;OAYE,8BAAM,WAAU,oBAAV,EAA+B,yBAAyB,EAAC,QAAQ,KAAK,KAAL,CAAW,cAAX,IAA6B,KAAK,KAAL,CAAW,YAAX,EAA/D,EAArC,CAZF;MADF,CANQ;IAlCqB;EAAlB;;;;;;;;;;;;;ACPf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,mBAAb;;AAEA,WAAQ,sCAAR;;AAEA,cAAW;AACT,iBAAY,MAAM,SAAN,CAAgB,IAAhB;AACZ,aAAQ,MAAM,SAAN,CAAgB,MAAhB;AACR,oBAAe,MAAM,SAAN,CAAgB,MAAhB;AACf,gBAAW,MAAM,SAAN,CAAgB,MAAhB;AACX,YAAO,MAAM,SAAN,CAAgB,MAAhB;IALT;;AAQA,+BAAU,KAAK;AACb,SAAI,yBAAc,UAAd,CAAyB,GAAzB,CAAJ,EAAmC;AACjC,wCAAqB,WAArB,CAAiC;AAC/B,gBAAO,KAAK,KAAL,CAAW,GAAX;QADT,EADiC;MAAnC;IAf6B;AAsB/B,+BAAU,GAAG;AACX,OAAE,cAAF,GADW;AAEX,8BAAc,WAAd,GAFW;AAGX,sCAAqB,UAArB,GAHW;IAtBkB;AA4B/B,6BAAS;;AAEP,SAAI,UAAU,0BAAG;AACX,qBAAc,IAAd;AACA,mBAAY,KAAK,KAAL,CAAW,QAAX;MAFJ,CAAV,CAFG;;AAOP,YACE;;SAAK,WAAW,OAAX,EAAoB,SAAS,KAAK,QAAL,EAAe,cAAc,KAAK,QAAL,EAA/D;OACE,8BAAM,WAAW,wDAAwD,KAAK,KAAL,CAAW,OAAX,IAAsB,KAAtB,CAAxD,EAAjB,CADF;OAEE,8BAAM,WAAU,YAAV,EAAuB,yBAAyB,EAAC,QAAQ,KAAK,KAAL,CAAW,WAAX,IAA0B,KAAK,KAAL,CAAW,IAAX,EAA5D,EAA7B,CAFF;MADF,CAPO;IA5BsB;EAAlB;;;;;;;;;;;;;ACNf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,uBAAb;;AAEA,WAAQ,yCAAR;;AAEA,mDAAoB;;;AAClB,UAAK,gBAAL,GADkB;AAElB,UAAK,UAAL,GAAkB,EAAlB,CAAqB,MAArB,EAA6B,KAAK,aAAL,CAA7B,CAFkB;AAGlB,UAAK,SAAL,GAAiB,EAAE,KAAF,CAAQ,YAAM;AAC7B,WAAI,CAAC,MAAK,UAAL,GAAkB,QAAlB,CAA2B,QAA3B,CAAD,EAAuC;AACzC,aAAI,CAAJ,CAAM,gDAAN,EAAwD,IAAxD,CAA6D,OAA7D,EADyC;QAA3C;MADuB,EAItB,qBAAO,0BAAP,CAJH,CAHkB;AAQlB,OAAE,MAAF,EAAU,EAAV,CAAa,cAAb,EAA6B,KAAK,mBAAL,CAA7B,CARkB;IANW;AAiB/B,yDAAuB;AACrB,UAAK,mBAAL,GADqB;AAErB,kBAAa,KAAK,SAAL,CAAb,CAFqB;AAGrB,UAAK,UAAL,GAAkB,GAAlB,CAAsB,MAAtB,EAA8B,KAAK,aAAL,CAA9B,CAHqB;AAIrB,OAAE,MAAF,EAAU,GAAV,CAAc,cAAd,EAA8B,KAAK,mBAAL,CAA9B,CAJqB;IAjBQ;;;AAwB/B,qBAAkB,4BAAY;AAC5B,uBAAQ,OAAR,CAAgB,QAAhB,EAA0B,KAA1B,EAD4B;IAAZ;;AAIlB,wBAAqB,+BAAY;AAC/B,uBAAQ,UAAR,CAAmB,QAAnB,EAA6B,KAA7B,EAD+B;IAAZ;;AAIrB,2CAAgB;;;AACd,SAAI,CAAJ,CAAM,gDAAN,EAAwD,QAAxD,GADc;AAEd,UAAK,UAAL,GAAkB,QAAlB,CAA2B,QAA3B,EAFc;AAGd,SAAI,QAAQ,EAAE,KAAK,cAAL,EAAF,CAAR,CAHU;AAId,WAAM,IAAN,CAAW,uBAAX,EAAoC,MAApC,GAJc;AAKd,WAAM,IAAN,CAAW,gBAAX,EAA6B,KAA7B,CAAmC,UAAC,CAAD,EAAO;AACxC,WAAI,UAAU,EAAE,EAAE,MAAF,CAAZ,CADoC;AAExC,eAAQ,IAAR,CAAa,QAAb,EAAuB,QAAvB,EAFwC;AAGxC,eAAQ,IAAR,CAAa,MAAb,EAAqB,OAAK,eAAL,CAAqB,QAAQ,IAAR,CAAa,MAAb,CAArB,CAArB,EAHwC;MAAP,CAAnC,CALc;AAUd,WAAM,IAAN,CAAW,2BAAX,EAAwC,KAAxC,CAA8C,KAAK,MAAL,CAA9C,CAVc;AAWd,WAAM,EAAN,CAAS,SAAT,EAAoB,KAAK,UAAL,CAApB,CAXc;AAYd,WAAM,IAAN,CAAW,mBAAX,EAAgC,KAAhC,CAAsC,UAAC,CAAD,EAAO;AAC3C,WAAI,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,eAAjB,MAAsC,MAAtC,EAA6C;AAC/C,aAAI,SAAS,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,GAAmB,OAAnB,CAA2B,KAA3B,EAAiC,EAAjC,CAAT,CAD2C;AAE/C,aAAI,OAAK,KAAL,CAAW,UAAX,IAAyB,OAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,EAA2B;AACtD,uCAAiB,cAAjB,CAAgC,OAAK,KAAL,CAAW,UAAX,CAAsB,IAAtB,EAA4B,MAA5D,EADsD;UAAxD;QAFF;MADoC,CAAtC,CAZc;IAhCe;;;AAsD/B,oBAAiB,yBAAS,IAAT,EAAe;AAC9B,SAAI,GAAJ,CAD8B;;AAG9B,SAAI,MAAM,gCAAN,CAH0B;;AAK9B,SAAI,WAAW,KAAK,OAAL,CAAa,GAAb,CAAX,CAL0B;AAM9B,SAAI,WAAW,CAAC,CAAD,EAAI;AACjB,WAAI,MAAM,mBAAmB,KAAK,MAAL,CAAY,WAAW,IAAI,MAAJ,CAA1C,CAAN,CADa;AAEjB,WAAI;AACF,aAAI,OAAO,KAAK,KAAL,CAAW,GAAX,CAAP,CADF;AAEF,eAAM,KAAK,GAAL,CAFJ;QAAJ,CAGE,OAAO,CAAP,EAAU;AACV,eAAM,IAAN,CADU;QAAV;MALJ;;AAUA,YAAO,GAAP,CAhB8B;IAAf;;AAmBjB,qCAAa;AACX,YAAO,EAAE,SAAS,WAAT,CAAqB,KAAK,IAAL,CAAU,iBAAV,CAAvB,CAAP,CADW;IAzEkB;AA6E/B,6CAAiB;AACf,YAAO,EAAE,GAAF,CAAM,KAAK,UAAL,GAAkB,GAAlB,CAAsB,CAAtB,CAAN,EAAgC,6BAAhC,CAAP,CADe;IA7Ec;AAiF/B,6BAAS;AACP,8BAAc,WAAd,GADO;IAjFsB;;;AAqF/B,eAAY,oBAAU,CAAV,EAAa;AACvB,SAAI,MAAM,MAAC,CAAO,KAAP,GAAgB,EAAE,KAAF,GAAU,EAAE,OAAF,CADd;AAEvB,SAAI,QAAQ,gBAAM,OAAN,CAAc,GAAd,EAAmB;AAC7B,YAAK,MAAL,GAD6B;MAA/B;IAFU;;AAOZ,gBAAa,uBAAY;AACvB,YAAO,gCAAQ,KAAI,mBAAJ,EAAwB,IAAG,oBAAH,EAAwB,kBAAgB,KAAK,KAAL,CAAW,UAAX,qCAAoD,KAAK,KAAL,CAAW,YAAX,IAA2B,EAA3B,CAApE,EAAxD,CAAP,CADuB;IAAZ;;AAIb,WAAQ,kBAAY;AAClB,YACE;;SAAS,MAAK,QAAL,EAAc,IAAG,yBAAH,EAA6B,WAAU,0CAAV;AAClD,wBAAa,CAAC,KAAK,KAAL,CAAW,aAAX,EADhB;OAEE;;WAAK,WAAU,qBAAV,EAAL;SACG,KAAK,WAAL,EADH;QAFF;MADF,CADkB;IAAZ;EAhGK;;;;;;;;;ACPf,QAAO,OAAP,GAAiB;AACf,YAAS,iBAAU,IAAV,EAAgB;AACvB,SAAI,CAAC,IAAD,EAAO;AAAE,cAAO,IAAP,CAAF;MAAX;AACA,YAAO,mBAAmB,SAAS,MAAT,CAAgB,OAAhB,CAAwB,IAAI,MAAJ,CAAW,qBAAqB,mBAAmB,IAAnB,EAAyB,OAAzB,CAAiC,aAAjC,EAAgD,MAAhD,CAArB,GAA+E,6BAA/E,CAAnC,EAAkJ,IAAlJ,CAAnB,KAA+K,IAA/K,CAFgB;IAAhB;AAIT,YAAS,iBAAU,IAAV,EAAgB,MAAhB,EAAwB,IAAxB,EAA8B,KAA9B,EAAqC,OAArC,EAA8C,OAA9C,EAAuD;AAC9D,SAAI,CAAC,IAAD,IAAS,6CAA6C,IAA7C,CAAkD,IAAlD,CAAT,EAAkE;AAAE,cAAO,KAAP,CAAF;MAAtE;AACA,SAAI,WAAW,EAAX,CAF0D;AAG9D,SAAI,IAAJ,EAAU;AACR,eAAQ,KAAK,WAAL;AACN,cAAK,MAAL;AACE,sBAAW,SAAS,QAAT,GAAoB,yCAApB,GAAgE,eAAe,IAAf,CAD7E;AAEE,iBAFF;AADF,cAIO,MAAL;AACE,sBAAW,eAAe,IAAf,CADb;AAEE,iBAFF;AAJF,cAOO,IAAL;AACE,sBAAW,eAAe,KAAK,WAAL,EAAf,CADb;AAEE,iBAFF;AAPF,QADQ;MAAV;AAaA,cAAS,MAAT,GAAkB,mBAAmB,IAAnB,IAA2B,GAA3B,GAAiC,mBAAmB,MAAnB,CAAjC,GAA8D,QAA9D,IAA0E,UAAU,cAAc,OAAd,GAAwB,EAAlC,CAA1E,IAAmH,QAAQ,YAAY,KAAZ,GAAoB,EAA5B,CAAnH,IAAsJ,UAAU,UAAV,GAAuB,EAAvB,CAAtJ,CAhB4C;AAiB9D,YAAO,IAAP,CAjB8D;IAAvD;AAmBT,eAAY,oBAAU,IAAV,EAAgB,KAAhB,EAAuB,OAAvB,EAAgC;AAC1C,SAAI,CAAC,KAAK,OAAL,CAAa,IAAb,CAAD,EAAqB;AAAE,cAAO,KAAP,CAAF;MAAzB;AACA,cAAS,MAAT,GAAkB,mBAAmB,IAAnB,IAA2B,0CAA3B,IAAyE,UAAU,cAAc,OAAd,GAAwB,EAAlC,CAAzE,IAAkH,QAAQ,YAAY,KAAZ,GAAoB,EAA5B,CAAlH,CAFwB;AAG1C,YAAO,IAAP,CAH0C;IAAhC;AAKZ,YAAS,iBAAU,IAAV,EAAgB;AACvB,SAAI,CAAC,IAAD,EAAO;AAAE,cAAO,KAAP,CAAF;MAAX;AACA,YAAO,IAAK,MAAJ,CAAW,gBAAgB,mBAAmB,IAAnB,EAAyB,OAAzB,CAAiC,aAAjC,EAAgD,MAAhD,CAAhB,GAA0E,SAA1E,CAAZ,CAAkG,IAAlG,CAAuG,SAAS,MAAT,CAA9G,CAFuB;IAAhB;AAIT,SAAM,gBAAY;AAChB,SAAI,QAAQ,SAAS,MAAT,CAAgB,OAAhB,CAAwB,yDAAxB,EAAmF,EAAnF,EAAuF,KAAvF,CAA6F,qBAA7F,CAAR,CADY;AAEhB,UAAK,IAAI,OAAO,MAAM,MAAN,EAAc,OAAO,CAAP,EAAU,OAAO,IAAP,EAAa,MAArD,EAA6D;AAAE,aAAM,IAAN,IAAc,mBAAmB,MAAM,IAAN,CAAnB,CAAd,CAAF;MAA7D;AACA,YAAO,KAAP,CAHgB;IAAZ;EAjCR,C;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,mBAAb;;AAEA,WAAQ,yCAAR;;AAEA,oBAAiB,2BAAY;AAC3B,YAAO,KAAK,mBAAL,EAAP,CAD2B;IAAZ;;AAIjB,wBAAqB,+BAAY;AAC/B,YAAO;AACL,oBAAa,0BAAc,GAAd,CAAkB,aAAlB,CAAb;AACA,cAAO,0BAAc,GAAd,CAAkB,OAAlB,CAAP;MAFF,CAD+B;IAAZ;;AAOrB,gBAAa,uBAAY;AACvB,YACE;;;OACE;;;SAAG;;;WAAS,yBAAQ,oBAAR;UAAZ;QADF;OAEE;;;SAAI,yBAAQ,qBAAR;QAFN;MADF,CADuB;IAAZ;;AASb,wBAAqB,+BAAY;AAC/B,YACE;;SAAQ,SAAS,KAAK,sBAAL,EAA6B,WAAU,+BAAV,EAA0C,iBAAe,KAAK,KAAL,CAAW,UAAX,EAAuB,UAAU,KAAK,KAAL,CAAW,UAAX,EAAxI;OAAgK,yBAAQ,EAAR;MADlK,CAD+B;IAAZ;;AAMrB,2BAAwB,gCAAS,CAAT,EAAY;AAClC,OAAE,cAAF,GADkC;AAElC,UAAK,mBAAL,GAFkC;IAAZ;;AAKxB,wBAAqB,+BAAY;AAC/B,8BAAc,eAAd,GAD+B;;AAG/B,qCAAoB,kBAApB,CAAuC;AACrC,YAAK,KAAK,KAAL,CAAW,WAAX;MADP,EAEG,KAAK,qBAAL,CAFH,CAH+B;IAAZ;;AAQrB,0BAAuB,+BAAU,KAAV,EAAiB;AACtC,SAAI,KAAJ,EAAW;AACT,YAAK,eAAL,CAAqB,MAAM,OAAN,IAAiB,yBAAQ,kBAAR,CAAtC,CADS;MAAX;AAGA,8BAAc,WAAd,GAJsC;IAAjB;;AAOvB,oBAAiB,yBAAU,YAAV,EAAwB;AACvC,4BAAY,QAAZ,CAAqB;AACnB,aAAM,OAAN;AACA,aAAM,KAAK,SAAL,CAAe,YAAf,CAAN;AACA,cAAO,QAAP;MAHF,EADuC;IAAxB;;AAQjB,cAAW,mBAAU,YAAV,EAAwB;;;AACjC,YAAO;cACL;;;SACE;;aAAG,WAAU,iBAAV,EAAH;WAAgC,YAAhC;UADF;SAEE;;aAAI,WAAU,sBAAV,EAAJ;WACE;;;aAAI;;iBAAG,SAAS,MAAK,gBAAL,EAAuB,MAAK,GAAL,EAAnC;eAA6C,yBAAQ,SAAR;cAAjD;YADF;UAFF;;MADK,CAD0B;IAAxB;;AAWX,qBAAkB,0BAAU,CAAV,EAAa;AAC7B,OAAE,cAAF,GAD6B;AAE7B,SAAI,aAAa,EAAE,EAAE,MAAF,CAAF,CAAY,OAAZ,CAAoB,OAApB,EAA6B,IAA7B,CAAkC,YAAlC,CAAb,CAFyB;AAG7B,4BAAY,UAAZ,CAAuB,UAAvB,EAH6B;AAI7B,UAAK,WAAL,GAJ6B;IAAb;;AAOlB,gBAAa,uBAAY;AACvB,8BAAc,4BAAd,GADuB;IAAZ;;AAIb,WAAQ,kBAAY;AAClB,YACE,8CAAa,UAAS,sBAAT;AACX,cAAO,yBAAQ,aAAR;AACP,mBAAY,KAAK,WAAL;AACZ,2BAAoB,KAAK,mBAAL;AACpB,mBAAY,KAAK,KAAL,CAAW,UAAX;AACZ,sBAAe,yBAAQ,MAAR,EALjB,CADF,CADkB;IAAZ;EAlFK;;;;;;;;;ACRf;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,yBAAb;;AAEA,WAAQ,2BAAR;;AAEA,gBAAa,uBAAY;AACvB,YACE,yDAAuB,KAAK,KAAK,KAAL,CAAW,GAAX,EAAgB,WAAW,KAAK,KAAL,CAAW,SAAX,EAAvD,CADF,CADuB;IAAZ;;AAMb,WAAQ,kBAAY;AAClB,YACE,8CAAa,UAAS,2BAAT;AACX,cAAO,yBAAQ,kBAAR;AACP,aAAK,OAAL;AACA,mBAAY,KAAK,WAAL;AACZ,oBAAa,IAAb,EAJF,CADF,CADkB;IAAZ;EAZO,CAAjB,C;;;;;;;;ACLA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,uBAAb;;AAEA,+CAAkB;AAChB,YAAO,KAAK,SAAL,EAAP,CADgB;IAJe;AAQjC,iEAA2B;AACzB,YAAO,EAAE,GAAF,CAAM,4BAAiB,4BAAjB,EAAN,EAAuD,KAAK,KAAL,CAAW,GAAX,EAAgB,EAAvE,CAAP,CADyB;IARM;AAYjC,iEAA0B,aAAa;;;AAGrC,SAAG,YAAY,KAAZ,KAAsB,QAAtB,EAAgC;AACjC,mCAAiB,8BAAjB,CAAgD,KAAK,KAAL,CAAW,GAAX,CAAhD,CADiC;MAAnC,MAEO;;AAEL,mCAAiB,2BAAjB,CAA6C,KAAK,KAAL,CAAW,GAAX,EAAgB,WAA7D,EAFK;MAFP;IAf+B;;;;;;;AA2BjC,yCAAc,OAAO;AACnB,SAAI,WAAW,EAAE,GAAF,CAAM,KAAN,EAAa,WAAb,EAA0B,cAA1B,CAAX;SACA,SAAS;AACP,sBAAe,IAAf;MADF,CAFe;;AAMnB,aAAO,QAAP;AACE,YAAK,YAAL;AACE,gBAAO,KAAP,GAAe,MAAf,CADF;AAEE,eAFF;AADF,YAIO,cAAL;AACE,gBAAO,KAAP,GAAe,QAAf,CADF;AAEE,eAFF;AAJF,YAOO,aAAL;AACE,gBAAO,KAAP,GAAe,OAAf,CADF;AAEE,eAFF;AAPF,YAUO,cAAL;AACE,gBAAO,KAAP,GAAe,KAAK,KAAL,CAAW,cAAX,CADjB;AAEE,eAFF;AAVF,YAaO,cAAL;AACE,gBAAO,KAAP,GAAe,QAAf,CADF;AAEE,gBAAO,aAAP,GAAuB,KAAvB,CAFF;AAGE,eAHF;AAbF,MANmB;;AAyBnB,YAAO,MAAP,CAzBmB;IA3BY;AAuDjC,iCAAU,OAAO;AACf,SAAI,YAAY,KAAK,aAAL,CAAmB,KAAnB,CAAZ;;;AADW,SAIZ,KAAK,KAAL,CAAW,KAAX,KAAqB,UAAU,KAAV,IAAmB,KAAK,KAAL,CAAW,aAAX,KAA6B,UAAU,aAAV,EAAyB;AAC/F,mCAAiB,4BAAjB,CAA8C,KAAK,KAAL,CAAW,KAAX,EAAkB,UAAU,KAAV,CAAhE,CAD+F;MAAjG;AAGA,SAAI,SAAS,EAAE,KAAF,CAAQ,EAAR,EAAY,KAAK,SAAL,EAAZ,EAA8B,EAAC,OAAO,UAAU,KAAV,EAAiB,eAAe,UAAU,aAAV,EAAtE,CAAT,CAPW;AAQf,UAAK,QAAL,CAAc,MAAd,EARe;AASf,UAAK,yBAAL,CAA+B,EAAC,OAAO,UAAU,KAAV,EAAvC,EATe;IAvDgB;AAmEjC,mCAAY;AACV,SAAI,iBAAiB,4BAAiB,4BAAjB,EAAjB,CADM;AAEV,SAAI,WAAW,KAAK,wBAAL,EAAX;SACA,qBAAqB,EAAE,GAAF,CAAM,QAAN,EAAgB,OAAhB,EAAyB,QAAzB,CAArB;SACA,gBAAgB,uBAAuB,QAAvB,CAJV;;AAMV,YAAO;AACL,gBAAS,6BAAiB,GAAjB,CAAqB,SAArB,KAAmC,EAAnC;AACT,uBAAgB,cAAhB;AACA,cAAO,kBAAP;AACA,sBAAe,aAAf;MAJF,CANU;IAnEqB;AAiFjC,uDAAsB;AACpB,8BAAc,iBAAd,CAAgC,EAAC,WAAW,yBAAc,aAAd,EAA5C,EADoB;IAjFW;AAqFjC,yCAAe;AACb,8BAAc,WAAd,GADa;IArFkB;AAyFjC,qEAA6B;AAC3B,SAAI,6BAA2B,KAAK,KAAL,CAAW,cAAX,CADJ;AAE3B,SAAI,aAAa,wBAAQ,KAAR,CAAc,KAAK,KAAL,CAAW,cAAX,CAA3B,CAFuB;AAG3B,SAAI,qDAAmD,SAAnD,CAHuB;;AAK3B,YACE;;;OACE;;WAAM,WAAW,UAAX,EAAN;SAA8B,UAA9B;QADF;OAEE;;WAAM,WAAU,oBAAV,EAAN;SAAsC,UAAtC;QAFF;MADF,CAL2B;IAzFI;AAsGjC,6BAAS;AACP,SAAI,yBAAyB,KAAK,0BAAL,EAAzB,CADG;AAEP,YACE;;;OACE;;WAAK,WAAU,SAAV,EAAL;SACE;;aAAM,WAAU,QAAV,EAAN;WAA0B,wBAAQ,WAAR,CAAoB,mBAApB;UAD5B;SAEE;;aAAM,WAAU,WAAV,EAAsB,OAAO,KAAK,KAAL,CAAW,SAAX,EAAnC;WAA0D,KAAK,KAAL,CAAW,SAAX;UAF5D;SAGE;;aAAK,WAAU,eAAV,EAAL;WACG,wBAAQ,WAAR,CAAoB,0BAApB;WACD;;eAAG,SAAS,KAAK,mBAAL,EAAZ;aAAuC,wBAAQ,WAAR,CAAoB,mBAApB;YAFzC;WAGG,wBAAQ,WAAR,CAAoB,0BAApB;UANL;QADF;OAUE;;WAAM,IAAG,yBAAH,EAA6B,KAAI,MAAJ,EAAW,WAAU,KAAV,EAAgB,UAAU,KAAK,SAAL,EAAxE;SACE;;aAAa,KAAI,QAAJ,EAAb;WACG,sBADH;WAEE,2CAAU,IAAG,cAAH;AACA,mBAAK,UAAL;AACA,wBAAU,oBAAV;AACA,6BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,QAArB;AAChB,sBAAS,CAAC,KAAK,KAAL,CAAW,aAAX;AACV,oBAAM,QAAN;AACA,oBAAO,wBAAQ,KAAR,CAAc,YAAd,EANjB,CAFF;WASE,2CAAU,IAAG,cAAH;AACA,mBAAK,UAAL;AACA,6BAAgB,KAAK,KAAL,CAAW,aAAX;AAChB,sBAAS,KAAK,KAAL,CAAW,aAAX;AACT,oBAAM,QAAN;AACA,oBAAO,wBAAQ,KAAR,CAAc,MAAd,EALjB,CATF;UADF;SAiBE;;aAAa,KAAI,eAAJ,EAAoB,WAAU,eAAV,EAAjC;WACE,2CAAU,IAAG,YAAH;AACA,mBAAK,cAAL;AACA,6BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,MAArB;AAChB,sBAAS,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,KAAX,KAAqB,MAArB;AACrC,oBAAM,MAAN,EAAa,OAAO,wBAAQ,KAAR,CAAc,IAAd;AACpB,mBAAK,aAAL;AACA,0BAAa,wBAAQ,WAAR,CAAoB,UAApB,EANvB,CADF;WAQE,2CAAU,IAAG,cAAH;AACA,mBAAK,cAAL;AACA,6BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,QAArB;AAChB,sBAAS,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,KAAX,KAAqB,QAArB;AACrC,oBAAM,QAAN,EAAe,OAAO,wBAAQ,KAAR,CAAc,MAAd;AACtB,mBAAK,eAAL;AACA,0BAAa,wBAAQ,WAAR,CAAoB,YAApB,CAAiC,KAAK,KAAL,CAAW,OAAX,CAA9C,EANV,CARF;WAeE,2CAAU,IAAG,aAAH;AACA,mBAAK,cAAL;AACA,6BAAgB,KAAK,KAAL,CAAW,KAAX,KAAqB,OAArB;AAChB,sBAAS,KAAK,KAAL,CAAW,aAAX,IAA4B,KAAK,KAAL,CAAW,KAAX,KAAqB,OAArB;AACrC,oBAAM,OAAN,EAAc,OAAO,wBAAQ,KAAR,CAAc,KAAd;AACrB,mBAAK,cAAL;AACA,0BAAa,wBAAQ,WAAR,CAAoB,WAApB,CAAgC,KAAK,KAAL,CAAW,OAAX,CAA7C,EANV,CAfF;UAjBF;QAVF;MADF,CAFO;IAtGwB;EAAlB,CAAjB,C;;;;;;;;ACTA,KAAI,cAAc,oBAAQ,GAAR,CAAd;AACJ,KAAI,0BAA0B,oBAAQ,GAAR,CAA1B;;AAEJ,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,yBAAb;;AAEA,oBAAiB,2BAAW;AAC1B,YAAO;AACL,kBAAW,EAAX;MADF,CAD0B;IAAX;;AAMjB,gBAAa,qBAAU,OAAV,EAAmB,KAAnB,EAA0B;AACrC,SAAI,OAAO,KAAK,aAAL,CAAmB,QAAQ,IAAR,CAA1B,CADiC;AAErC,YACE;;SAAI,WAAU,cAAV,EAAyB,KAAK,KAAL,EAA7B;OACE;;WAAM,WAAU,mBAAV,EAAN;SAAqC,QAAQ,KAAR;QADvC;OAEG,IAFH;MADF,CAFqC;IAA1B;;AAUb,kBAAe,uBAAU,IAAV,EAAgB;;;AAC7B,YACE;;SAAM,WAAU,qBAAV,EAAN;OAEI,EAAE,GAAF,CAAM,IAAN,EAAY,UAAC,IAAD,EAAO,KAAP,EAAiB;AAC3B,gBAAO,MAAK,OAAL,CAAa,IAAb,EAAmB,KAAnB,CAAP,CAD2B;QAAjB,CAFhB;MADF,CAD6B;IAAhB;;AAYf,YAAS,iBAAU,GAAV,EAAe,KAAf,EAAsB;AAC7B,SAAI,WAAW,YAAY,IAAI,IAAJ;SACvB,OAAO,IAAI,IAAJ;SACP,SAFJ,CAD6B;AAI7B,SAAI,UAAU,CAAV,EAAa;AACf,mBACE;;WAAM,KAAK,KAAL,EAAN;SACE;;aAAM,WAAU,kBAAV,EAAN;WAAoC,wBAAwB,SAAxB;UADtC;SAEE;;aAAK,WAAW,QAAX,EAAL;WAA2B,IAA3B;UAFF;QADF,CADe;MAAjB,MAOO;AACL,mBACE;;WAAK,WAAW,QAAX,EAAqB,KAAK,KAAL,EAA1B;SAAuC,IAAvC;QADF,CADK;MAPP;AAYA,YAAO,SAAP,CAhB6B;IAAtB;;AAmBT,gBAAa,uBAAW;;;AACtB,YACE;;SAAI,WAAU,SAAV,EAAJ;OAEI,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,SAAX,EAAsB,UAAC,OAAD,EAAU,KAAV,EAAoB;AAC9C,gBAAO,OAAK,WAAL,CAAiB,OAAjB,EAA0B,KAA1B,CAAP,CAD8C;QAApB,CAFhC;MADF,CADsB;IAAX;;AAYb,WAAQ,kBAAW;AACjB,SAAI,QAAQ;AACN,mBAAY,2BAAZ;AACA,gBAAS,oBAAT;AACA,qBAAc,KAAK,WAAL;AACd,eAAQ,QAAR;MAJF,CADa;;AAQjB,YACE,oBAAC,WAAD,EAAiB,KAAjB,CADF,CARiB;IAAX;EA/DO,CAAjB,C;;;;;;;;;;;;ACHA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,UAAS,aAAT,CAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AACpC,WAAQ,IAAR;AACE,UAAK,IAAL;AACE,cAAO,cAAc,OAAd,CAAP,CADF;;AADF,UAIO,SAAL;AACE,cAAO,WAAP,CADF;;AAJF,UAOO,OAAL;AACE,cAAO,SAAP,CADF;;AAPF;AAWI,cAAO,IAAP,CADF;AAVF,IADoC;EAAtC;;mBAgBe,MAAM,WAAN,CAAkB;;AAE/B,gBAAa,oBAAb;;AAEA,oBAAiB,2BAAY;AAC3B,YAAO;AACL,uBAAgB,4BAAS,GAAT,CAAa,gBAAb,CAAhB;AACA,0BAAmB,4BAAS,GAAT,CAAa,mBAAb,CAAnB;AACA,iBAAU,cAAc,4BAAS,GAAT,CAAa,aAAb,CAAd,EAA2C,4BAAS,GAAT,CAAa,gBAAb,CAA3C,CAAV;MAHF,CAD2B;IAAZ;;AAQjB,aAAU,oBAAW;AACnB,8BAAc,WAAd,GADmB;IAAX;;AAIV,gBAAa,uBAAW;AACtB,YACE;;SAAK,WAAU,eAAV,EAAL;OACE,6BAAK,KAAK,KAAK,KAAL,CAAW,cAAX,GAA4B,qBAAU,uBAAV,EAAtC,CADF;OAEE;;WAAI,WAAU,sBAAV,EAAJ;SAAsC,gCAAoB,MAApB;QAFxC;OAGE;;WAAK,WAAU,eAAV,EAAL;SACE,gCAAQ,KAAI,QAAJ,EAAa,6DAA2D,KAAK,KAAL,CAAW,QAAX,qBAAmC,KAAK,KAAL,CAAW,iBAAX,EAAnH,CADF;QAHF;OAME;;WAAQ,WAAU,+BAAV,EAA0C,SAAS,KAAK,QAAL,EAA3D;SAA4E,gCAAoB,KAApB;QAN9E;MADF,CADsB;IAAX;;AAab,WAAQ,kBAAW;AACjB,YACE,wDAAgB,UAAS,sBAAT;AACA,mBAAY,KAAK,WAAL;AACZ,aAAK,OAAL,EAFhB,CADF,CADiB;IAAX;EA7BK;;;;;;;;;;;;mBCtBA;AACb,0BADa;AAEb,iBAFa;;;;;;;;;;ACAf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,mBAAb;;AAEA,cAAW;AACT,kBAAa,MAAM,SAAN,CAAgB,KAAhB,CAAsB;AACjC,iBAAU,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;MADC,EAEV,UAFU;AAGb,cAAS,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACT,iBAAY,MAAM,SAAN,CAAgB,MAAhB;IALd;;AAQA,uBAAoB,8BAAY;AAC9B,UAAK,YAAL,GAAoB,EAAE,QAAF,CAAW,qCAAyB,YAAzB,EAAuC,qBAAU,MAAV,CAAiB,oBAAjB,CAAtE,CAD8B;IAAZ;;AAIpB,sBAAmB,6BAAY;AAC7B,wCAAuB,EAAvB,CAA0B,QAA1B,EAAoC,KAAK,SAAL,CAApC,CAD6B;AAE7B,uCAAsB,6BAAtB,CAAoD,KAAK,KAAL,CAAW,OAAX,EAAoB,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,EAAiC,KAAK,SAAL,CAAzG,CAF6B;AAG7B,iCAAiB,EAAjB,CAAoB,cAApB,EAAoC,KAAK,SAAL,CAApC,CAH6B;IAAZ;;AAMnB,yBAAsB,gCAAY;AAChC,wCAAuB,GAAvB,CAA2B,QAA3B,EAAqC,KAAK,SAAL,CAArC,CADgC;AAEhC,uCAAsB,8BAAtB,CAAqD,KAAK,KAAL,CAAW,OAAX,EAAoB,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,EAAiC,KAAK,SAAL,CAA1G,CAFgC;AAGhC,iCAAiB,GAAjB,CAAqB,cAArB,EAAqC,KAAK,SAAL,CAArC,CAHgC;IAAZ;;AAMtB,oBAAiB,2BAAY;AAC3B,YAAO,EAAE,KAAF,CAAQ;AACb,aAAM;AACJ,6BAAoB,IAApB;QADF;MADK,EAIJ,KAAK,SAAL,EAJI,CAAP,CAD2B;IAAZ;;AAQjB,cAAW,qBAAY;AACrB,UAAK,QAAL,CAAc,KAAK,SAAL,EAAd,EADqB;IAAZ;;AAIX,cAAW,qBAAY;AACrB,YAAO;AACL,eAAQ,mCAAuB,MAAvB,EAAR;AACA,aAAM,kCAAsB,wBAAtB,CAA+C,KAAK,KAAL,CAAW,OAAX,EAAoB,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,CAAnE,IAAuG,EAAvG;AACN,cAAO,4BAAiB,GAAjB,CAAqB,OAArB,CAAP;MAHF,CADqB;IAAZ;;AAQX,sBAAmB,6BAAY;AAC7B,SAAI,CAAC,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,EAAuB;AAC1B,cAAO,IAAP,CAD0B;MAA5B;;AAIA,YAAO;;SAAK,WAAU,uBAAV,EAAL;OACL,6BAAK,WAAU,6BAAV,EAAL,CADK;OAEL;;;SAAI,+BAAoB,0BAApB;QAFC;OAGL;;WAAQ,SAAS,KAAK,kBAAL,EAAyB,WAAU,+BAAV,EAA1C;SACG,+BAAoB,KAApB;QAJE;MAAP,CAL6B;IAAZ;;AAcnB,4BAAyB,mCAAY;AACnC,SAAI,CAAC,KAAK,UAAL,EAAD,EAAoB;AACtB,cAAO,IAAP,CADsB;MAAxB;;AAIA,SAAI,aAAa,gBAAM,oBAAN,CAA2B,KAAK,KAAL,CAAW,IAAX,CAAgB,UAAhB,EAA4B,OAAvD,EAAgE,KAAK,KAAL,CAAW,KAAX,CAA7E,CAL+B;;AAOnC,YACE,mDAAkB,aAAa,KAAK,KAAL,CAAW,MAAX;AACb,mBAAY,UAAZ;AACA,gBAAS,KAAK,KAAL,CAAW,OAAX;AACT,mBAAY,KAAK,KAAL,CAAW,UAAX,EAH9B,CADF,CAPmC;IAAZ;;AAezB,gBAAa,uBAAY;AACvB,SAAI,UAAU,KAAV,CADmB;AAEvB,SAAI,iBAAiB,4BAAjB,CAFmB;AAGvB,SAAI,CAAC,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,EAAiC;AACpC,iBAAU,KAAK,KAAL,CAAW,IAAX,CAAgB,kBAAhB,IAAuC,KAAK,KAAL,CAAW,IAAX,CAAgB,UAAhB,IAA8B,KAAK,KAAL,CAAW,IAAX,CAAgB,aAAhB,KAAkC,KAAlC,CAD3C;AAEpC,yBAAkB,qCAAlB,CAFoC;MAAtC;;AAKA,YACE;;SAAK,WAAW,cAAX,EAAL;OACE,yCAAS,MAAM,OAAN,EAAT,CADF;OAEG,KAAK,uBAAL,EAFH;OAGG,KAAK,iBAAL,EAHH;MADF,CARuB;IAAZ;;AAiBb,6BAA0B,oCAAY;AACpC,SAAI,SAAS,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,MAA1B,CADuB;AAEpC,YAAO,SAAS,OAAO,WAAP,GAAqB,EAA9B,CAF6B;IAAZ;;AAK1B,wBAAqB,+BAAY;AAC/B,SAAI,gBAAgB,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,aAA1B,CADW;AAE/B,SAAI,aAAJ,EAAmB;AACjB,cAAO,KAAK,aAAL,CAAmB,aAAnB,EAAkC,oBAAlC,CAAP,CADiB;MAAnB;IAFmB;;AAOrB,uBAAoB,8BAAY;;;AAC9B,SAAI,mBAAmB,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,gBAA1B,CADO;AAE9B,SAAI,gBAAJ,EAAsB;AACpB,cAAO,EAAE,GAAF,CAAM,gBAAN,EAAwB,UAAC,MAAD,EAAS,KAAT,EAAmB;AAChD,aAAI,MAAS,MAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,SAAmC,KAA5C,CAD4C;AAEhD,gBAAO,MAAK,aAAL,CAAmB,MAAnB,EAA2B,iBAA3B,EAA8C,GAA9C,CAAP,CAFgD;QAAnB,CAA/B,CADoB;MAAtB;AAMA,YAAO,KAAK,aAAL,CAAmB,EAAC,SAAS,IAAT,EAAe,MAAM,yBAAQ,KAAR,EAAzC,EAAyD,iBAAzD,CAAP,CAR8B;IAAZ;;AAWpB,kBAAe,uBAAU,MAAV,EAAkB,KAAlB,EAAyB,GAAzB,EAA8B;AAC3C,SAAI,WAAW,CAAC,EAAE,GAAF,CAAM,MAAN,EAAc,SAAd,EAAyB,IAAzB,CAAD,CAD4B;AAE3C,YACE;;SAAQ,iBAAe,QAAf,EAAyB,UAAU,QAAV,EAAoB,WAAW,gBAAgB,KAAhB,EAAuB,KAAK,GAAL;AAC/E,kBAAS,KAAK,cAAL,EAAqB,mBAAiB,OAAO,GAAP,EADvD;OACoE,OAAO,IAAP;MAFtE,CAF2C;IAA9B;;AAQf,eAAY,sBAAY;AACtB,YAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,KAA1B,KAAoC,SAApC,CADe;IAAZ;;AAIZ,mBAAgB,0BAAY;AAC1B,SAAI,OAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,IAA1B,CADe;AAE1B,SAAI,EAAE,QAAF,CAAW,IAAX,CAAJ,EAAsB;AACpB,cAAO,IAAP,CADoB;MAAtB;AAGA,YAAO,QAAP,CAL0B;IAAZ;;AAQhB,uBAAoB,8BAAW;AAC7B,YAAO,KAAK,sBAAL,CAA4B,OAA5B,EAAqC,EAAE,MAAF,EAAU,KAAV,EAArC,CAAP,CAD6B;IAAX;;AAIpB,wBAAqB,+BAAW;AAC9B,YAAO,KAAK,sBAAL,CAA4B,QAA5B,EAAsC,EAAE,MAAF,EAAU,MAAV,KAAqB,qBAAU,MAAV,CAAiB,eAAjB,CAAlE,CAD8B;IAAX;;AAIrB,2BAAwB,gCAAS,GAAT,EAAc,UAAd,EAA0B;AAChD,SAAI,WAAW,EAAE,GAAF,CAAM,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,EAA2B,CAAC,MAAD,EAAS,GAAT,CAAjC,CAAX,CAD4C;AAEhD,SAAI,QAAJ,EAAc;AACZ,WAAI,QAAQ,gBAAM,OAAN,CAAc,SAAd,CAAwB,QAAxB,CAAR,CADQ;AAEZ,WAAI,KAAJ,EAAW;AACT,iBAAQ,MAAM,IAAN;AACN,gBAAK,GAAL;AAAU,oBAAU,KAAK,GAAL,CAAS,GAAT,EAAc,MAAM,GAAN,OAAxB,CAAV;AADF,gBAEO,IAAL;AAAW,oBAAU,KAAK,GAAL,CAAS,UAAT,EAAqB,MAAM,GAAN,QAA/B,CAAX;AAFF;AAGW,8BAAO,KAAP,CAAa,mBAAb,yBAAuD,MAAM,IAAN,CAAvD,CAAT;AAHF,UADS;QAAX,MAMO;AACL,0BAAO,KAAP,CAAa,mBAAb,4BAA0D,QAA1D,EADK;QANP;MAFF;IAFsB;;AAgBxB,mBAAgB,wBAAU,CAAV,EAAa;AAC3B,SAAI,YAAY,EAAE,MAAF,CAAS,YAAT,CAAsB,iBAAtB,CAAZ,CADuB;AAE3B,0CAAyB,WAAzB,CAAqC,KAAK,KAAL,CAAW,MAAX,EAAmB,SAAxD,EAF2B;IAAb;;AAKhB,oBAAiB,yBAAU,CAAV,EAAa;AAC5B,UAAK,YAAL,CAAkB,KAAK,KAAL,CAAW,MAAX,EAAmB,EAAE,MAAF,CAAS,KAAT,CAArC,CAD4B;IAAb;;AAIjB,eAAY,sBAAW;AACrB,YAAO,EAAE,QAAF,CAAW,KAAK,KAAL,CAAW,IAAX,CAAgB,UAAhB,CAAX,IACF,EAAE,QAAF,CAAW,KAAK,KAAL,CAAW,MAAX,CAAkB,SAAlB,CADT,IAEF,EAAE,QAAF,CAAW,KAAK,KAAL,CAAW,MAAX,CAAkB,GAAlB,CAFT,CADc;IAAX;;AAMZ,WAAQ,kBAAY;AAClB,YACE,8CAAa,UAAS,oBAAT;AACA,aAAM,KAAK,cAAL,EAAN;AACA,oBAAa,KAAK,kBAAL,EAAb;AACA,qBAAc,KAAK,mBAAL,EAAd;AACA,cAAO,KAAK,KAAL,CAAW,MAAX,CAAkB,KAAlB;AACP,mBAAY,KAAK,WAAL;AACZ,qBAAc,CAAC,CAAC,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,MAA1B;AAChB,gCAAyB,KAAK,wBAAL,EAAzB;AACA,6BAAsB,KAAK,eAAL;AACtB,2BAAoB,KAAK,mBAAL;AACpB,0BAAmB,KAAK,kBAAL;AACnB,aAAM,KAAK,KAAL,CAAW,MAAX,CAAkB,OAAlB,CAA0B,IAA1B;AACN,kBAAW,KAAK,UAAL,EAAX;AACA,oBAAa,IAAb,EAbb,CADF,CADkB;IAAZ;;AAmBR,qDAAqB;AACnB,SAAI,KAAK,KAAL,CAAW,IAAX,CAAgB,KAAhB,EAAuB;AACzB,2CAAmB,cAAnB,CAAkC,KAAK,KAAL,CAAW,MAAX,EAAmB,KAAK,KAAL,CAAW,OAAX,EAAoB,KAAK,KAAL,CAAW,IAAX,CAAgB,mBAAhB,CAAzE,CADyB;MAA3B;IApM+B;EAAlB,CAAjB,C;;;;;;;;ACdA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,QAAO,OAAP,GAAiB,MAAM,WAAN,CAAkB;;AAEjC,gBAAa,sBAAb;;AAEA,cAAW;AACT,kBAAa,MAAM,SAAN,CAAgB,KAAhB,CAAsB;AACjC,kBAAW,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACX,YAAK,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;MAFM,EAGV,UAHU;AAIb,iBAAY,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACZ,cAAS,MAAM,SAAN,CAAgB,MAAhB,CAAuB,UAAvB;AACT,iBAAY,MAAM,SAAN,CAAgB,MAAhB;IAPd;;AAUA,WAAQ,sCAAR;AACA,oBAAiB,2BAAW;AAC1B,+BAAe,eAAf,GAD0B;AAE1B,SAAI,MAAM,eAAU,MAAV,CAAiB,KAAK,KAAL,CAAW,WAAX,CAAvB,CAFsB;AAG1B,YAAO,EAAC,KAAK,GAAL,EAAR,CAH0B;IAAX;;AAMjB,yBAAsB,gCAAW;AAC/B,oBAAU,mBAAV,CAA8B;AAC5B,kBAAW,KAAK,KAAL,CAAW,WAAX,CAAuB,SAAvB;AACX,YAAK,KAAK,KAAL,CAAW,WAAX,CAAuB,GAAvB;MAFP,EAD+B;IAAX;;AAOtB,sBAAmB,6BAAW;AAC5B,UAAK,kBAAL,GAD4B;IAAX;;AAInB,uBAAoB,8BAAW;AAC7B,UAAK,kBAAL,GAD6B;IAAX;;AAIpB,uBAAoB,8BAAW;AAC7B,SAAI,KAAK,KAAL,CAAW,UAAX,EAAuB;AACzB,wBAAO,KAAP,CAAa,mBAAb,yBAAuD,KAAK,KAAL,CAAW,UAAX,CAAsB,KAAtB,YAAkC,KAAK,KAAL,CAAW,WAAX,CAAuB,QAAvB,EAAmC,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,CAA5H,CADyB;AAEzB,sBAAU,QAAV,CAAmB,KAAK,KAAL,CAAW,UAAX,CAAsB,KAAtB,EAA6B,KAAK,KAAL,CAAW,WAAX,EAAwB,KAAK,KAAL,CAAW,UAAX,CAAsB,UAAtB,CAAxE,CAFyB;MAA3B;IADkB;;AAOpB,YAAS,mBAAW;AAClB,yCAAuB,YAAvB,CAAoC;AAClC,oBAAa,KAAK,KAAL,CAAW,WAAX;AACb,gBAAS,KAAK,KAAL,CAAW,OAAX;AACT,iBAAU,KAAK,KAAL,CAAW,gBAAM,OAAN,CAAc,GAAd,KAAsB,KAAK,cAAL,CAA3C;MAHF,EADkB;IAAX;;AAQT,WAAQ,kBAAW;AACjB,UAAK,cAAL,GAAsB,gBAAM,OAAN,CAAc,GAAd,EAAtB,CADiB;AAEjB,SAAI,MAAM,KAAK,KAAL,CAAW,GAAX,CAFO;AAGjB,YAAQ,gCAAQ,WAAU,iBAAV,EAA4B,IAAI,IAAI,EAAJ,EAAQ,MAAM,IAAI,IAAJ,EAAU,KAAK,KAAK,KAAL,CAAW,UAAX;AAC7D,eAAQ,KAAK,OAAL,EADhB,CAAR,CAHiB;IAAX;;EAnDO,CAAjB,C;;;;;;;;;;;;;;;;;;;;;ACPA;;;;AAEA;;;;AACA;;KAAY;;AACZ;;KAAY;;AACZ;;KAAY;;AACZ;;KAAY;;AACZ;;KAAY;;AACZ;;KAAY;;AACZ;;KAAY;;;;;;AAEZ,0BAAc,QAAd,CAAuB,0BAAvB,EAAmD,UAAC,KAAD,EAAQ,MAAR,EAAgB,IAAhB,EAAyB;AAC1E,kBAAU,SAAV,CAAoB,KAApB,EAA2B,MAA3B,EAAmC,IAAnC,EAD0E;EAAzB,CAAnD;;AAIO,KAAI,4BAAU;AACnB,WAAQ,YAAR;AACA,YAAS,aAAT;AACA,SAAM,UAAN;AACA,SAAM,UAAN;AACA,SAAM,UAAN;AACA,SAAM,UAAN;AACA,SAAM,UAAN;EAPS;;KAUL;;;;;;;uCACc;AAChB,SAAE,IAAF,CAAO,OAAP,EAAgB,UAAC,MAAD,EAAS,GAAT,EAAiB;AAC/B,wBAAU,YAAV,CAAuB,GAAvB,EAA4B,MAA5B,EAD+B;QAAjB,CAAhB,CADgB;;;UADd;;;mBASS,IAAI,cAAJ,G;;;;;;;;;;;SC9BC;;AAJhB;;;;AACA;;;;AACA;;;;;;AAEO,UAAS,SAAT,CAAmB,QAAnB,EAA6B;AAClC,OAAI,YAAY,SAAS,QAAT,CAAkB,SAAlB,CADkB;AAElC,OAAI,SAAS,cAAM,aAAN,GAAsB,EAAtB,CAFqB;AAGlC,sCAAW,QAAX,CAAoB,SAApB,EAA+B,MAA/B,EACG,IADH,CACQ,eAAO;AACX,cAAS,IAAT,EAAe,IAAI,QAAJ,EAAf,EADW;IAAP,CADR,CAIG,KAJH,CAIS,eAAO;AACZ,sBAAO,KAAP,CAAa,mBAAb,oCAAiE,UAAU,QAAV,mBAA+B,MAAhG,EAA0G,GAA1G,EADY;AAEZ,cAAS,EAAC,SAAS,wBAAT,EAAV,EAFY;IAAP,CAJT,CAHkC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJpC;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,KAAM,uBAAuB,KAAvB;;KAEA;AAEJ,YAFI,UAEJ,GAAc;;;yCAFV,YAEU;;AACZ,UAAK,KAAL,GAAa,EAAb,CADY;AAEZ,UAAK,oBAAL,GAA4B,EAAE,QAAF,CAAW,KAAK,WAAL,EAAkB,oBAA7B,CAA5B,CAFY;AAGZ,8BAAc,QAAd,CAAuB,+BAAY,8BAAZ,EAA4C;cAAiB,MAAK,MAAL,CAAY,aAAZ;MAAjB,CAAnE,CAHY;IAAd;;8BAFI;;8BAQK,WAAW,QAAQ;;;AAC1B,YAAK,oBAAL,GAD0B;AAE1B,cAAO,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AACtC,aAAI,MAAM,OAAK,IAAL,CAAU,SAAV,EAAqB,MAArB,CAAN,CADkC;AAEtC,aAAI,OAAO,CAAC,IAAI,WAAJ,EAAD,EAAoB;AAC7B,mBAAQ,GAAR,EAD6B;UAA/B,MAEO;AACL,yBAAI,YAAJ,CAAiB,EAAC,oBAAD,EAAY,SAAS,MAAT,EAA7B,EAA+C,EAA/C,EAAmD,UAAC,YAAD,EAAe,QAAf,EAA4B;AAC7E,iBAAI,gBAAgB,CAAC,aAAa,KAAb,IAAsB,SAAS,MAAT,GAAkB,GAAlB,EAAuB;AAChE,mBAAI;AACF,uBAAM,OAAK,IAAL,CAAU,SAAV,EAAqB,MAArB,EAA6B,aAAa,GAAb,CAAnC,CADE;AAEF,yBAAQ,GAAR,EAFE;gBAAJ,CAGE,OAAO,CAAP,EAAU;AACV,kCAAO,KAAP,CAAa,mBAAb,sBAAoD,aAAa,GAAb,WAAsB,EAAE,OAAF,CAA1E,CADU;AAEV,0BAFU;gBAAV;cAJJ,MAQO;AACL,mBAAI,2CAAyC,SAAS,MAAT,MAAzC,CADC;AAEL,gCAAO,KAAP,CAAa,mBAAb,EAAkC,OAAlC,EAA2C,YAA3C,EAFK;AAGL,wBAHK;cARP;YADiD,CAAnD,CADK;UAFP;QAFiB,CAAnB,CAF0B;;;;0BA0BvB,WAAW,QAAQ;AACtB,cAAO,EAAE,GAAF,CAAM,KAAK,KAAL,EAAY,CAAC,MAAD,EAAS,UAAU,SAAV,EAAqB,UAAU,GAAV,CAAhD,CAAP,CADsB;;;;0BAInB,WAAW,QAAQ,UAAU;AAChC,WAAI,MAAM,cAAI,KAAJ,CAAU,QAAV,CAAN,CAD4B;AAEhC,SAAE,GAAF,CAAM,KAAK,KAAL,EAAY,CAAC,MAAD,EAAS,UAAU,SAAV,EAAqB,UAAU,GAAV,CAAhD,EAAgE,GAAhE,EAFgC;AAGhC,cAAO,GAAP,CAHgC;;;;mCAMpB;AACZ,YAAK,KAAL,GAAa,EAAE,SAAF,CAAY,KAAK,KAAL,EAAY,kBAAU;AAC7C,gBAAO,EAAE,SAAF,CAAY,MAAZ,EAAoB,sBAAc;AACvC,kBAAO,EAAE,MAAF,CAAS,UAAT,EAAqB;oBAAO,IAAI,SAAJ;YAAP,CAA5B,CADuC;UAAd,CAA3B,CAD6C;QAAV,CAArC,CADY;AAMZ,YAAK,KAAL,GAAa,EAAE,MAAF,CAAS,KAAK,KAAL,EAAY;gBAAU,EAAE,OAAF,CAAU,MAAV;QAAV,CAAlC,CANY;AAOZ,wBAAO,KAAP,CAAa,mBAAb,EAAkC,oBAAlC,EAAwD,KAAK,KAAL,CAAxD,CAPY;;;;4BAUP,eAAe;;;AACpB,SAAE,MAAF,CAAS,aAAT,EAAwB,gBAAqB,MAArB,EAAgC;;;aAA9B,mBAA8B;aAArB,mBAAqB;;AACtD,aAAI,mBAAmB,EAAE,OAAF,CAAU,CAAC,OAAD,EAAU,OAAV,CAAV,CAAnB,CADkD;AAEtD,aAAI,mBAAmB,EAAE,GAAF,CAAM,gBAAN,EAAwB;kBAAS,MAAM,SAAN;UAAT,CAA3C,CAFkD;AAGtD,aAAI,UAAU,aAAa,MAAb,GAAsB,EAAE,IAAF,CAAO,OAAK,KAAL,CAA7B,GAA2C,CAAC,MAAD,CAA3C,CAHwC;AAItD,WAAE,IAAF,CAAO,OAAP,EAAgB,cAAM;AACpB,eAAI,SAAS,EAAE,GAAF,CAAM,OAAK,KAAL,EAAY,CAAC,EAAD,CAAlB,EAAwB,EAAxB,CAAT,CADgB;AAEpB,aAAE,GAAF,CAAM,OAAK,KAAL,EAAY,CAAC,EAAD,CAAlB,EAAwB,EAAE,IAAF,CAAO,MAAP,EAAe,gBAAf,CAAxB,EAFoB;UAAN,CAAhB,CAJsD;AAQtD,0BAAO,KAAP,CAAa,mBAAb,6BAA2D,gBAA3D,EAA+E,OAAK,KAAL,CAA/E,CARsD;QAAhC,CAAxB,CADoB;;;UAtDlB;;;mBAqES,IAAI,UAAJ;;;;;;;;;;;;;;;;;;;;;;;AC7Ef,KAAM,SAAS,IAAI,EAAJ;;AAEf,UAAS,GAAT,GAAe;AACb,UAAO,KAAK,KAAL,CAAW,KAAK,GAAL,KAAa,IAAb,CAAlB,CADa;EAAf;;KAIM;;;2BAES,OAAO;AAClB,WAAI,QAAQ,MAAM,KAAN,CAAY,GAAZ,CAAR,CADc;AAElB,WAAI,MAAM,MAAN,KAAiB,CAAjB,EAAoB;AACtB,eAAM,IAAI,KAAJ,0BAAiC,KAAjC,CAAN,CADsB;QAAxB;AAGA,WAAI,MAAM,KAAK,KAAL,CAAW,KAAK,MAAM,CAAN,CAAL,CAAX,CAAN,CALc;AAMlB,cAAO,IAAI,GAAJ,CAAQ,GAAR,EAAa,KAAb,CAAP,CANkB;;;;AASpB,YAXI,GAWJ,CAAY,GAAZ,EAAiB,KAAjB,EAAwB;yCAXpB,KAWoB;;AACtB,UAAK,GAAL,GAAW,GAAX,CADsB;AAEtB,UAAK,KAAL,GAAa,KAAb,CAFsB;IAAxB;;8BAXI;;iCAgBQ;AACV,cAAO,QAAQ,KAAK,GAAL,CAAS,GAAT,CADL;;;;mCAIE;AACZ,cAAO,QAAQ,MAAR,GAAiB,KAAK,GAAL,CAAS,GAAT,CADZ;;;;gCAIH;AACT,cAAO,KAAK,KAAL,CADE;;;UAxBP;;;mBA6BS;;;;;;;;;;;;;;;;;;;;ACnCR,KAAM,oCAAc,sBAAc;AACvC,0BAAuB,oCAAvB;AACA,4BAAyB,sBAAzB;AACA,4BAAyB,oBAAzB;AACA,mCAAgC,6BAAhC;EAJyB,CAAd;;AAON,KAAM,0BAAS,sBAAc;AAClC,SAAM,MAAN;AACA,aAAU,UAAV;AACA,YAAS,SAAT;AACA,YAAS,SAAT;AACA,aAAU,UAAV;AACA,UAAO,OAAP;EANoB,CAAT;;AASN,KAAM,kDAAqB,sBAAc;AAC9C,YAAS,SAAT;AACA,SAAM,MAAN;AACA,YAAS,SAAT;AACA,WAAQ,QAAR;AACA,UAAO,OAAP;EALgC,CAArB;;AAQN,KAAM,4CAAkB,sBAAc;AAC3C,WAAQ,QAAR;AACA,WAAQ,QAAR;AACA,WAAQ,QAAR;AACA,kBAAe,cAAf;AACA,cAAW,UAAX;EAL6B,CAAlB,C;;;;;;;;;;;SCrBG;SAIA;SAQA;;AAfhB;;;;AACA;;;;;;AAEO,UAAS,KAAT,GAAiB;AACtB,kCAAoB,aAApB,GADsB;EAAjB;;AAIA,UAAS,aAAT,CAAuB,UAAvB,EAAmC;AACxC,OAAI,OAAO,OAAQ,UAAP,KAAsB,QAAtB,GAAkC,UAAnC,GAAgD,EAAhD,CAD6B;;AAGxC,iBAAM,aAAN,CAAoB;AAClB,WAAM,IAAN;IADF,EAHwC;EAAnC;;AAQA,UAAS,0BAAT,CAAoC,GAApC,EAAyC,IAAzC,EAA+C;AACpD,iBAAM,0BAAN,CAAiC,GAAjC,EAAsC,IAAtC,EAA4C,OAA5C,EADoD;;;;;;;;;;;;;ACftD;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA,QAAO,OAAP,GAAiB;AAEf,uCAAa,QAAmB;;;SAAX,6DAAO,kBAAI;;AAC9B,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,2CAAN;AACA,mBAAY;AACV,oBAAW,OAAO,SAAP;AACX,qBAAY,OAAO,QAAP;AACZ,qBAAY,OAAO,MAAP,CAAc,GAAd;QAHd;MAFF,EAD8B;;AAU9B,SAAI,KAAK,GAAL,IAAY,KAAK,GAAL,CAAS,SAAT,IAAsB,KAAK,GAAL,CAAS,SAAT,CAAmB,gBAAnB,IAAuC,CAAC,KAAK,GAAL,CAAS,SAAT,CAAmB,WAAnB,EAAgC;AAC5G,gCAAc,QAAd,CAAuB,uBAAvB,EAAgD,KAAK,GAAL,CAAS,SAAT,EAAoB,UAAC,QAAD,EAAc;AAChF,cAAK,GAAL,CAAS,SAAT,CAAmB,WAAnB,GAAiC,SAAS,QAAT,CAD+C;AAEhF,gBAAO,MAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,CAAP,CAFgF;QAAd,CAApE,CAD4G;MAA9G,MAKO;AACL,cAAO,KAAK,SAAL,CAAe,MAAf,EAAuB,IAAvB,CAAP,CADK;MALP;IAZa;AAsBf,iCAAU,QAAQ,MAAM;AACtB,SAAI,MAAM,EAAE,SAAF,CAAY,KAAK,GAAL,CAAlB,CADkB;;AAGtB,SAAI,OAAO,IAAI,SAAJ,IAAiB,IAAI,SAAJ,CAAc,WAAd,EAA2B;AACrD,WAAI,SAAJ,CAAc,GAAd,GAAoB,IAAI,SAAJ,CAAc,WAAd,CADiC;MAAvD;;AAIA,SAAI,aAAa,6BAAkB,uCAAlB,CAA0D,GAA1D,CAAb,CAPkB;;AAStB,YAAO,KAAK,IAAL,CAAU,OAAO,SAAP,EAAkB,OAAO,MAAP,CAAc,GAAd,EAAmB;AACpD,cAAO,OAAO,GAAP;AACP,mBAAY,UAAZ;AACA,0BAAmB;AACjB,kBAAS,UAAT;QADF;MAHK,CAAP,CATsB;IAtBT;AAwCf,mCAAW,UAAU,WAAmC;SAAxB,6DAAO,kBAAiB;SAAb,+DAAS,kBAAI;;AACtD,YAAO,KAAK,IAAL,CAAU,QAAV,EAAoB,SAApB,EAA+B,IAA/B,EAAqC,CAAC,QAAD,CAArC,EAAiD,MAAjD,CAAP,CADsD;IAxCzC;AA4Cf,6CAAgB,UAAU,WAAmC;SAAxB,6DAAO,kBAAiB;SAAb,+DAAS,kBAAI;;AAC3D,YAAO,KAAK,IAAL,CAAU,QAAV,EAAoB,SAApB,EAA+B,IAA/B,EAAqC,CAAC,UAAD,EAAa,QAAb,CAArC,EAA6D,MAA7D,CAAP,CAD2D;IA5C9C;AAgDf,+CAAiB,UAAU,WAAmC;SAAxB,6DAAO,kBAAiB;SAAb,+DAAS,kBAAI;;AAC5D,YAAO,KAAK,IAAL,CAAU,QAAV,EAAoB,SAApB,EAA+B,IAA/B,EAAqC,CAAC,cAAD,CAArC,EAAuD,MAAvD,CAAP,CAD4D;IAhD/C;AAoDf,iDAA8B;SAAb,+DAAS,kBAAI;;AAC5B,8BAAc,QAAd,CAAuB,0BAAvB,EAAmD;AACjD,0BAAmB,IAAnB;MADF,EAD4B;;AAK5B,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,+CAAN;AACA,mBAAY;AACV,iBAAQ,MAAR;QADF;MAFF,EAL4B;IApDf;;;;;;;;;;;;;;;;AA8Ef,uBAAK,UAAU,WAAyD;SAA9C,6DAAO,kBAAuC;SAAnC,sEAAgB,oBAAmB;SAAb,+DAAS,kBAAI;;;AAEtE,SAAI,YAAY,6BAAkB,WAAlB,CAA8B,QAA9B,EAAwC,SAAxC,CAAZ,CAFkE;AAGtE,SAAI,SAAS,6BAAkB,iBAAlB,CAAoC,SAApC,CAAT,CAHkE;;AAKtE,SAAI,CAAC,MAAD,EAAS;AACX,gBAAS,6BAAkB,yBAAlB,CAA4C,SAA5C,CAAT,CADW;MAAb;;AAIA,SAAI,CAAC,MAAD,EAAS;AACX,wBAAO,KAAP,CAAa,mBAAb,8BAA4D,SAA5D,EADW;AAEX,cAAO,KAAP,CAFW;MAAb;;AAKA,SAAI,iBAAiB,CAAC,EAAE,QAAF,CAAW,aAAX,EAA0B,OAAO,IAAP,CAA3B,EAAyC;AAC5D,wBAAO,KAAP,CAAa,mBAAb,kBAAgD,qDAAgD,aAAhG,EAD4D;AAE5D,cAAO,KAAP,CAF4D;MAA9D;;AAKA,SAAI,aAAa,6BAAkB,GAAlB,CAAsB,aAAtB,CAAb,CAnBkE;;AAqBtE,aAAQ,OAAO,IAAP;AACN,YAAK,UAAL;AACE,cAAK,sBAAL,CAA4B,8CAA5B,EAA4E,MAA5E,EAAoF,MAApF,EADF;AAEE,gBAAO,KAAK,gBAAL,CAAsB,MAAtB,EAA8B,IAA9B,EAAoC,WAAW,EAAX,CAA3C,CAFF;AADF,YAIO,QAAL;AACE,aAAG,EAAE,QAAF,CAAW,OAAO,MAAP,CAAd,EAA8B;AAC5B,gBAAK,sBAAL,CAA4B,gDAA5B,EAA8E,MAA9E,EAAsF,MAAtF,EAD4B;AAE5B,kBAAO,KAAK,WAAL,CAAiB,MAAjB,EAAyB,IAAzB,EAA+B,WAAW,EAAX,CAAtC,CAF4B;UAA9B;AAIA,0BAAO,KAAP,CAAa,mBAAb,EAAkC,4DAAlC,EAAgG,OAAO,QAAP,CAAhG,CALF;AAME,cAAK,sBAAL,CAA4B,0DAA5B,EAAwF,MAAxF,EAAgG,MAAhG,EANF;AAOE,gBAAO,KAAP,CAPF;AAJF,YAYO,QAAL;AACE,cAAK,sBAAL,CAA4B,gDAA5B,EAA8E,MAA9E,EAAsF,MAAtF,EADF;AAEE,gBAAO,KAAK,WAAL,CAAiB,MAAjB,EAAyB,IAAzB,EAA+B,WAAW,EAAX,CAAtC,CAFF;AAZF,YAeO,cAAL;AACE,cAAK,sBAAL,CAA4B,uDAA5B,EAAqF,MAArF,EAA6F,MAA7F,EADF;AAEE,gBAAO,KAAK,iBAAL,CAAuB,MAAvB,EAA+B,IAA/B,EAAqC,WAAW,EAAX,CAA5C,CAFF;AAfF;AAmBI,0BAAO,KAAP,CAAa,mBAAb,EAAkC,yBAAlC,EAA6D,OAAO,IAAP,CAA7D,CADF;AAEE,cAAK,sBAAL,CAA4B,0DAA5B,EAAwF,MAAxF,EAAgG,MAAhG,EAFF;AAGE,gBAAO,KAAP,CAHF;AAlBF,MArBsE;IA9EzD;AA4Hf,2CAAgB;AACd,8BAAc,QAAd,CAAuB,qBAAvB,EADc;IA5HD;AAgIf,2DAAuB,MAAM,QAAQ,QAAQ;AAC3C,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,IAAN;AACA,mBAAY;AACV,oBAAW,OAAO,SAAP;AACX,mBAAU,OAAO,QAAP;AACV,iBAAQ,MAAR;QAHF;MAFF,EAD2C;IAhI9B;AA2If,+CAAiB,UAAU,MAAM,SAAS;AACxC,yCAAwB,2BAAxB,CAAoD,QAApD,EAA8D,OAA9D,EAAuE,KAAK,iBAAL,CAAvE,CADwC;AAExC,UAAK,oBAAL,CAA0B,SAAS,QAAT,EAAmB,KAAK,UAAL,EAAiB,IAA9D,EAFwC;AAGxC,YAAO,IAAP,CAHwC;IA3I3B;AAiJf,qCAAY,QAAQ,MAAM;AACxB,SAAI,YAAY,EAAE,QAAF,CAAW,OAAO,MAAP,CAAX,GAA4B,OAAO,MAAP,GAAgB,OAAO,MAAP,CAAc,GAAd;;;AADpC,SAIpB,gBAAgB,6BAAkB,WAAlB,CAA8B,OAAO,SAAP,EAAkB,SAAhD,CAAhB,CAJoB;AAKxB,SAAI,6BAAkB,yBAAlB,CAA4C,aAA5C,CAAJ,EAAgE;AAC9D,cAAO,KAAK,oBAAL,CAA0B,aAA1B,EAAyC,OAAO,QAAP,EAAiB,IAA1D,CAAP,CAD8D;MAAhE;;AAIA,SAAI,aAAa,EAAE,MAAF,CAAS,EAAC,YAAY,OAAO,QAAP,EAAtB,EAAwC,IAAxC,CAAb,CAToB;AAUxB,YAAO,KAAK,IAAL,CAAU,OAAO,SAAP,EAAkB,SAA5B,EAAuC,UAAvC,EAAmD,CAAC,UAAD,EAAa,QAAb,EAAuB,cAAvB,CAAnD,CAAP,CAVwB;IAjJX;AA8Jf,qCAAY,QAAQ,MAAM,SAAS;AACjC,SAAI,mBAAmB,MAAnB,CAD6B;AAEjC,SAAI,KAAK,OAAL,EAAc;AAChB,0BAAmB,EAAE,KAAF,CAAQ,EAAR,EAAY,MAAZ,EAAoB;AACrC,gBAAO,KAAK,OAAL,CAAa,KAAb;AACP,kBAAS,KAAK,OAAL,CAAa,OAAb;QAFQ,CAAnB,CADgB;MAAlB;;AAOA,sBAAO,IAAP,CAAY,mBAAZ,EAAiC,kBAAjC,EAAqD,gBAArD,EATiC;;AAWjC,SAAI,sBAAsB,KAAK,qBAAL,CAA2B,IAA3B,CAAtB,CAX6B;AAYjC,SAAI,aAAa,KAAK,gBAAL,CAAsB,IAAtB,CAAb,CAZ6B;;AAcjC,yCAAwB,2BAAxB,CAAoD,MAApD,EAA4D,OAA5D,EAAqE,mBAArE,EAdiC;;AAgBjC,8BAAc,qBAAd,CAAoC;AAClC,gBAAS,OAAT;AACA,oBAAa,gBAAb;AACA,mBAAY,UAAZ;MAHF,EAhBiC;;AAsBjC,oCAAoB,QAApB,CAA6B,uBAA7B,EAAsD;AACpD,YAAK,OAAO,QAAP;MADP,EAtBiC;AAyBjC,YAAO,IAAP,CAzBiC;IA9JpB;AA0Lf,iDAAkB,cAAc,MAAM,SAAS;AAC7C,SAAI,UAAU,sBAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAC7C,2CAAwB,wBAAxB,CAAiD,YAAjD,EAA+D,OAA/D,EAAwE,KAAK,iBAAL,EACtE,UAAC,aAAD,EAAgB,OAAhB,EAA4B;AAC1B,aAAI,iBAAiB,CAAC,cAAc,KAAd,IAAuB,QAAQ,MAAR,GAAiB,GAAjB,EAAsB;AACjE,mBAAQ,cAAc,QAAd,CAAR,CADiE;UAAnE,MAEO;AACL,4BAAO,KAAP,CAAa,mBAAb,wCAAsE,QAAQ,MAAR,MAAtE,EAAyF,aAAzF,EADK;AAEL,oBAFK;UAFP;QADF,CADF,CAD6C;MAArB,CAAtB,CADyC;;AAc7C,mBAAI,6BAAJ,CAAkC,OAAlC,EAd6C;;AAgB7C,oCAAoB,QAApB,CAA6B,8BAA7B,EAA6D;AAC3D,YAAK,aAAa,QAAb;MADP,EAhB6C;AAmB7C,YAAO,IAAP,CAnB6C;IA1LhC;AAgNf,uDAAqB,KAAK,YAAY,MAAM;AAC1C,SAAI,sBAAsB,KAAK,qBAAL,CAA2B,IAA3B,CAAtB,CADsC;AAE1C,SAAI,aAAa,KAAK,gBAAL,CAAsB,IAAtB,CAAb,CAFsC;;AAI1C,8BAAc,QAAd,CAAuB,0BAAvB,EAAmD;AACjD,0BAAmB,EAAC,QAAD,EAAM,sBAAN,EAAkB,wCAAlB,EAAuC,sBAAvC,EAAnB;MADF,EAJ0C;;AAQ1C,SAAI,YAAY,6BAAkB,cAAlB,CAAiC,GAAjC,EAAsC,CAAtC,CAAZ,CARsC;AAS1C,oCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,aAAM,+CAAN;AACA,mBAAY;AACV,oBAAW,SAAX;AACA,mBAAU,GAAV;AACA,qBAAY,UAAZ;QAHF;MAFF,EAT0C;AAiB1C,YAAO,IAAP,CAjB0C;IAhN7B;AAoOf,+CAAiB,MAAM;AACrB,SAAI,YAAY,IAAZ,CADiB;AAErB,SAAI,EAAE,GAAF,CAAM,IAAN,EAAY,YAAZ,CAAJ,EAA+B;AAC7B,mBAAY;AACV,gBAAO,KAAK,KAAL,8CAAP;AACA,qBAAY,KAAK,UAAL;QAFd,CAD6B;MAA/B;AAMA,YAAO,SAAP,CARqB;IApOR;AA+Of,yDAAsB,MAAM;AAC1B,SAAI,oBAAoB,IAApB,CADsB;AAE1B,SAAI,EAAE,GAAF,CAAM,IAAN,EAAY,mBAAZ,CAAJ,EAAsC;AACpC,2BAAoB,KAAK,iBAAL,CADgB;MAAtC;AAGA,YAAO,iBAAP,CAL0B;IA/Ob;EAAjB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,KAAM,iBAAiB,GAAjB;AACN,KAAM,sBAAsB,CAAtB;AACN,KAAM,sBAAsB,sBAAa,mBAAb;AAC5B,KAAM,sBAAsB,sBAAa,2BAAb;;AAE5B,UAAS,oBAAT,GAA6D;OAA/B,gEAAU,mCAAqB;;AAC3D,UAAO,WAAW,mBAAX,IAAkC,WAAW,mBAAX,CADkB;EAA7D;;KAIM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCJ,YAlCI,iBAkCJ,GAAc;yCAlCV,mBAkCU;;8FAlCV,+BAkCU;;AAEZ,WAAK,OAAL,GAAe,oCAAf,CAFY;AAGZ,WAAK,MAAL,6BAHY;;IAAd;;8BAlCI;;6BAwCI;AACN,wDAzCE,uDAyCF,CADM;AAEN,YAAK,OAAL,CAAa,KAAb,GAFM;;;;mCAKM;AACZ,cAAO;AACL,uBAAc,EAAd;AAEA,uBAAc,EAAd;AACA,sBAAa,IAAb;AACA,kBAAS,IAAT;AACA,kBAAS,KAAT;AACA,gBAAO,IAAP;AACA,iCAAwB,EAAxB;AACA,wBAAe,EAAf;AACA,0BAAiB,EAAjB;AACA,gBAAO,kBAAkB,MAAlB,CAAyB,IAAzB;AACP,mCAA0B,EAA1B;AACA,mCAA0B,KAA1B;QAbF,CADY;;;;yCAkBM;;;AAClB,gCAAc,QAAd,CAAuB;AACrB,2BAAkB,uBAAC,IAAD,EAAU;AAC1B,eAAI,aAAa,6BAAkB,gBAAlB,CAAmC,IAAnC,CAAb,CADsB;;AAG1B,eAAI,OAAK,IAAL,CAAU,KAAV,KAAoB,kBAAkB,MAAlB,CAAyB,IAAzB,EAA+B;AACrD,iBAAI,eAAe,IAAf,IAAuB,OAAK,IAAL,CAAU,KAAV,KAAoB,kBAAkB,MAAlB,CAAyB,QAAzB,EAAmC;AAChF,sBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,QAAzB,CAAf,CADgF;cAAlF,MAEO,IAAI,eAAe,KAAf,EAAsB;AAC/B,sBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,QAAzB,CAAf,CAD+B;cAA1B;YAHT;;AAQA,kBAAK,GAAL,CAAS,SAAT,EAAoB,UAApB,EAX0B;UAAV;;AAclB,+BAAsB,2BAAC,IAAD,EAAU;AAC9B,eAAG,CAAC,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBADqB;YAAvB;AAGA,kBAAK,kBAAL,CAAwB,OAAK,0BAAL,CAAgC,IAAhC,EAAsC,IAAtC,CAAxB,EAJ8B;UAAV;AAMtB,sBAAa,kBAAC,IAAD,EAAU;AACrB,eAAG,CAAC,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBADqB;YAAvB;AAGA,eAAI,aAAa,OAAK,GAAL,CAAS,aAAT,CAAb,CAJiB;AAKrB,eAAI,cAAc,WAAW,GAAX,KAAmB,KAAK,GAAL,EAAU;AAC7C,oBAAK,mBAAL,CAAyB,CAAC,WAAW,EAAX,CAA1B,EAD6C;YAA/C;UALW;AASb,yBAAgB,qBAAC,IAAD,EAAU;AACxB,eAAI,sBAAsB,OAAK,GAAL,CAAS,cAAT,CAAtB,CADoB;AAExB,eAAI,oBAAoB,OAAK,GAAL,CAAS,wBAAT,CAApB,CAFoB;AAGxB,eAAI,wBAAwB,OAAK,GAAL,CAAS,iBAAT,CAAxB,CAHoB;AAIxB,kBAAO,oBAAoB,KAAK,EAAL,CAA3B,CAJwB;AAKxB,kBAAO,kBAAkB,KAAK,EAAL,CAAzB,CALwB;AAMxB,kBAAO,sBAAsB,KAAK,EAAL,CAA7B,CANwB;AAOxB,kBAAK,kBAAL,CAAwB;AACtB,2BAAc,mBAAd;AACA,yBAAY,iBAAZ;AACA,8BAAiB,qBAAjB;YAHF,EAPwB;UAAV;AAahB,sCAA6B,iCAAC,IAAD,EAAU;;;AAGrC,eAAG,CAAC,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBADqB;YAAvB;;AAIA,eAAI,UAAU,OAAK,IAAL,CAAU,YAAV,CAAuB,KAAK,GAAL,CAAjC,CAPiC;AAQrC,eAAI,CAAC,EAAE,WAAF,CAAc,OAAd,CAAD,EAAyB;AAC3B,oBAAK,mBAAL,CAAyB,CAAC,QAAQ,EAAR,CAA1B,EAD2B;YAA7B;UAR2B;AAY7B,4BAAmB,yBAAM;AACvB,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,QAAzB,CAAf,CADqB;YAAvB,MAEO;AACL,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,QAAzB,CAAf,CADK;YAFP;UADiB;AAOnB,iCAAwB,+BAAM;AAC5B,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,OAAzB,CAAf,CADqB;YAAvB;UADsB;AAKxB,sCAA6B,mCAAM;AACjC,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,OAAzB,CAAf,CADqB;YAAvB;UAD2B;AAK7B,kCAAyB,gCAAM;AAC7B,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,OAAzB,CAAf,CADqB;YAAvB;UADuB;AAKzB,iCAAwB,8BAAM;AAC5B,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,OAAL,CAAa,KAAb,GAAqB,IAArB,CADqB;AAErB,oBAAK,OAAL,CAAa,eAAb,GAA+B,IAA/B,CAAoC,UAAC,YAAD,EAAkB;AACpD,sBAAK,IAAL,CAAU,YAAV,GAAyB,YAAzB,CADoD;cAAlB,CAApC,CAFqB;YAAvB;UADsB;AAQxB,gCAAuB,8BAAM;AAC3B,eAAI,OAAK,IAAL,CAAU,OAAV,EAAmB;AACrB,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,QAAzB,CAAf,CADqB;YAAvB;UADqB;AAKvB,gCAAuB,4BAAC,KAAD,EAAW;AAChC,kBAAK,wBAAL,CAA8B,KAA9B,EADgC;UAAX;AAGvB,gCAAuB,4BAAC,GAAD,EAAS;AAC9B,kBAAK,iBAAL,CAAuB,GAAvB,EAD8B;;AAG9B,eAAI,aAAa,OAAK,GAAL,CAAS,aAAT,CAAb,CAH0B;;AAK9B,eAAI,CAAC,UAAD,EAAa;AACf,oBADe;YAAjB;;AAIA,eAAI,oBAAoB,OAAK,oBAAL,CAA0B,WAAW,IAAX,CAA9C;eACA,uBAAuB,EAAE,GAAF,CAAM,iBAAN,EAAyB,KAAzB,EAAgC,IAAhC,CAAvB;eACA,cAAc,OAAK,YAAL,CAAkB,WAAW,IAAX,CAAhC;eACA,qBAAqB,cAAc,OAAK,qBAAL,EAAd,GAA6C,OAAK,wBAAL,EAA7C,CAZK;;AAc9B,eAAI,oBAAJ,EAA0B;AACxB,iBAAI,aAAa,CAAC,EAAE,WAAF,CAAc,EAAE,IAAF,CAAO,kBAAP,EAA2B;sBAAe,YAAY,QAAZ,KAAyB,oBAAzB;cAAf,CAAzC,CAAD,CADO;AAExB,iBAAI,YAAY,OAAK,iBAAL,CAAuB,oBAAvB,CAAZ,CAFoB;;AAIxB,iBAAK,CAAC,UAAD,IAAe,CAAC,SAAD,EAAY;AAC9B,mBAAI,WAAJ,EAAiB;AACf,+CAAmB,eAAnB,mCACG,kCAAe,4BAAf,EAA8C,KADjD,EADe;gBAAjB,MAIO;AACL,+CAAmB,eAAnB,mCACG,kCAAe,uBAAf,EAAyC,KAD5C,EADK;gBAJP;cADF,MAUO,IAAK,CAAC,UAAD,IAAe,WAAW,EAAX,EAAe;AACxC,mDAAuB,2BAAvB,CAAmD,SAAnD,EAA8D,WAAW,EAAX,EAAe,EAA7E,EADwC;cAAnC;YAdT;;AAmBA,kBAAK,oCAAL,CAA0C,iBAA1C,EAjC8B;UAAT;AAmCvB,iCAAwB,+BAAM;AAC5B,kBAAK,mBAAL,CAAyB,CAAC,QAAD,EAAW,EAAE,GAAF,CAAM,OAAK,IAAL,EAAW,gBAAjB,CAAX,CAAzB,EAD4B;UAAN;AAGxB,qCAA4B,gCAAC,IAAD,EAAU;AACpC,eAAI,aAAa,OAAK,GAAL,CAAS,aAAT,CAAb,CADgC;;AAGpC,eAAI,OAAK,YAAL,CAAkB,WAAW,IAAX,CAAtB,EAAwC;AACtC,oBAAK,8BAAL,CAAoC,IAApC,EADsC;YAAxC,MAEO;AACL,oBAAK,yBAAL,CAA+B,IAA/B,EADK;YAFP;;AAMA,eAAI,KAAK,iBAAL,EAAwB;AAC1B,oBAAK,oCAAL,CAA0C,KAAK,iBAAL,CAA1C,CAD0B;YAA5B;UAT0B;QAnI9B,EADkB;;;;yCAoJA;;;AAClB,WAAI,gBAAgB,EAAE,MAAF,CAAS,KAAK,IAAL,CAAU,YAAV,CAAT,CACjB,MADiB,CACV;gBAAK,EAAE,IAAF,KAAW,WAAX;QAAL,CADU,CAEjB,GAFiB,CAEb;gBAAK,EAAE,EAAF;QAAL,CAFH,CADc;;AAKlB,YAAK,mBAAL,CAAyB,CAAC,QAAD,EAAW,MAAX,CAAkB,aAAlB,CAAzB,EAA2D,UAAC,GAAD,EAAS;AAClE,aAAI,OAAK,IAAL,CAAU,KAAV,KAAoB,kBAAkB,MAAlB,CAAyB,QAAzB,EAAmC;AACzD,eAAI,GAAJ,EAAS;AACP,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,KAAzB,CAAf,CADO;YAAT,MAEO;AACL,oBAAK,SAAL,CAAe,kBAAkB,MAAlB,CAAyB,OAAzB,CAAf,CADK;YAFP;UADF;QADyD,CAA3D,CALkB;;;;+CAgBM,MAAM;AAC9B,WAAI,KAAK,iBAAL,EAAwB;;;AAC1B,uCAAmB,eAAnB,qFACG,kCAAe,iBAAf,EAAmC,6DACnC,kCAAe,iBAAf,EAAmC,uEACnC,kCAAe,uBAAf,EAAyC,KAAK,iBAAL,0BAH5C,EAD0B;QAA5B,MAMO;AACL,uCAAmB,eAAnB,mCACG,kCAAe,uBAAf,EAAyC,KAD5C,EADK;QANP;;;;oDAa6B,MAAM;AACnC,WAAI,KAAK,iBAAL,EAAwB;;;AAC1B,uCAAmB,eAAnB,qFACG,kCAAe,sBAAf,EAAwC,6DACxC,kCAAe,sBAAf,EAAwC,uEACxC,kCAAe,4BAAf,EAA8C,KAAK,iBAAL,0BAHjD,EAD0B;QAA5B,MAMO;AACL,uCAAmB,eAAnB,mCACG,kCAAe,4BAAf,EAA8C,KADjD,EADK;QANP;;;;0DAamC,mBAAmB;;;;AAItD,gCAAc,QAAd,CAAuB,0CAAvB,EAAmE,EAAE,mBAAmB,iBAAnB,EAArE,EAJsD;;;;wCAOrC,cAAc,UAAU,IAAI;;;AAC7C,WAAI,iBAAiB,gBAAM,OAAN,CAAc,GAAd,EAAjB,CADyC;AAE7C,gCAAc,QAAd,CAAuB,uBAAvB,EAAgD;AAC9C,uBAAc,YAAd;AACA,mBAAU,QAAV;QAFF,EAGG,UAAC,IAAD,EAAO,GAAP,EAAe;AAChB,aAAI,WAAW,KAAK,KAAL,CAAW,gBAAM,OAAN,CAAc,GAAd,KAAsB,cAAtB,CAAtB,CADY;AAEhB,aAAG,CAAC,IAAD,IAAS,KAAK,KAAL,EAAY;AACtB,wBAAa,OAAK,cAAL,CAAb,CADsB;AAEtB,kBAAK,GAAL,CAAS;AACP,oBAAO,KAAK,KAAL;AACP,sBAAS,KAAT;YAFF,EAFsB;AAMtB,eAAI,eAAe,EAAE,GAAF,CAAM,IAAN,EAAY,eAAZ,EAA6B,IAAI,UAAJ,CAA5C,CANkB;AAOtB,0CAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,mBAAM,wCAAN;AACA,yBAAY;AACV,sBAAO,YAAP;AACA,yBAAU,QAAV;AACA,uBAAQ,IAAI,MAAJ;cAHV;YAFF,EAPsB;;AAgBtB,cAAG,IAAH,SAAc,EAAE,GAAF,CAAM,IAAN,EAAW,OAAX,EAAmB,8CAAnB,CAAd,EAAkF,IAAlF,EAhBsB;AAiBtB,kBAAO,KAAP,CAjBsB;UAAxB;;AAoBA,YAAG,IAAH,SAAc,IAAd,EAAoB,IAApB,EAtBgB;;AAwBhB,wCAAoB,QAApB,CAA6B,iBAA7B,EAAgD;AAC9C,iBAAM,0CAAN;AACA,uBAAY;AACV,uBAAU,QAAV;YADF;UAFF,EAxBgB;QAAf,CAHH,CAF6C;;;;;;;yCAuC3B,oBAAoB,YAAY;AAClD,cAAO,EAAE,MAAF,CAAS,kBAAT,EAA6B,UAAC,WAAD,EAAiB;AACnD,gBAAO,CAAE,EAAE,QAAF,CAAW,UAAX,EAAuB,YAAY,SAAZ,CAAzB,CAD4C;QAAjB,CAApC,CADkD;;;;;;;wCAOjC,oBAAoB,QAAQ;AAC7C,cAAO,EAAE,KAAF,CAAQ,EAAR,EAAY,EAAE,KAAF,CAAQ,kBAAR,EAA4B,SAA5B,CAAZ,EAAoD,EAAE,KAAF,CAAQ,MAAR,EAAgB,SAAhB,CAApD,CAAP,CAD6C;;;;gDAIpB,MAA2B;;;WAArB,oEAAc,qBAAO;;AACpD,WAAI,eAAe,KAAK,GAAL,CAAS,cAAT,CAAf,CADgD;AAEpD,WAAI,yBAAyB,KAAK,GAAL,CAAS,wBAAT,CAAzB,CAFgD;AAGpD,WAAI,0BAA0B,EAAE,KAAF,CAAQ,KAAK,GAAL,CAAS,iBAAT,CAAR,CAA1B,CAHgD;AAIpD,WAAI,sBAAsB,EAAE,GAAF,CAAM,IAAN,EAAY,gBAAZ,EAA8B,EAA9B,CAAtB,CAJgD;;AAMpD,WAAI,gBAAgB,KAAK,GAAL,EAAhB;;;;AANgD,WAUhD,gBAAgB,EAAhB,CAVgD;;AAYpD,SAAE,IAAF,CAAO,KAAK,mBAAL,EAA0B,UAAC,MAAD,EAAS,MAAT,EAAoB;AACnD,aAAI,WAAJ,EAAiB;;AACf,iBAAI,OAAO,EAAE,GAAF,CAAM,MAAN,EAAc;sBAAS,MAAM,SAAN;cAAT,CAArB;AACJ,eAAE,MAAF,CAAS,wBAAwB,MAAxB,CAAT,EAA0C;sBAAO,EAAE,QAAF,CAAW,IAAX,EAAiB,GAAjB;cAAP,CAA1C;gBAFe;UAAjB,MAGO;AACL,mCAAwB,MAAxB,IAAkC,EAAE,GAAF,CAAM,mBAAN,EAA2B,MAA3B,EAAmC,EAAnC,CAAlC,CADK;UAHP;;2BAO6B,EAAE,SAAF,CAAY,MAAZ,EAAoB,UAAC,KAAD,EAAW;AAAE,kBAAO,MAAM,UAAN,CAAT;UAAX,EARE;;;;aAQ9C,4BAR8C;aAQnC,4BARmC;;AASnD,aAAI,CAAC,EAAE,OAAF,CAAU,SAAV,CAAD,IAAyB,CAAC,EAAE,OAAF,CAAU,SAAV,CAAD,EAAuB;AAClD,yBAAc,MAAd,IAAwB,CAAC,SAAD,EAAY,SAAZ,CAAxB,CADkD;UAApD;;AAIA,WAAE,IAAF,CAAO,SAAP,EAAkB;kBAAU,EAAE,GAAF,CAAM,sBAAN,EAA8B,CAAC,MAAD,EAAS,OAAO,SAAP,CAAvC,EAA0D,aAA1D;UAAV,CAAlB;;;AAbmD,qBAgBnD,CAAa,MAAb,IAAuB,OAAK,mBAAL,CAAyB,aAAa,MAAb,CAAzB,EAA+C,EAAE,GAAF,CAAM,MAAN,EAAc,WAAd,CAA/C,CAAvB;;AAhBmD,qBAkBnD,CAAa,MAAb,IAAuB,OAAK,kBAAL,CAAwB,aAAa,MAAb,CAAxB,EAA8C,SAA9C,CAAvB,CAlBmD;;AAoBnD,aAAI,CAAC,EAAE,OAAF,CAAU,SAAV,CAAD,EAAuB;AACzB,eAAI,cAAJ,CADyB;AAEzB,eAAI,WAAW,QAAX,EAAqB;AACvB,qBAAQ,EAAE,MAAF,CAAS,OAAK,IAAL,CAAU,YAAV,EAAwB,UAAC,GAAD,EAAM,IAAN,EAAe;AACtD,mBAAI,OAAK,YAAL,CAAkB,KAAK,IAAL,CAAtB,EAAkC;AAChC,qBAAI,IAAJ,CAAS,EAAC,IAAI,KAAK,EAAL,EAAd,EADgC;gBAAlC;;AAIA,sBAAO,GAAP,CALsD;cAAf,EAMtC,EANK,CAAR,CADuB;YAAzB,MAQO;AACL,qBAAQ,CAAC,EAAC,IAAI,MAAJ,EAAF,CAAR,CADK;YARP;;AAYA,kBAAK,0BAAL,CAAgC,SAAhC,EAA2C,KAA3C,EAdyB;AAezB,oCAAc,QAAd,CAAuB,+BAAY,uBAAZ,EAAqC,EAAC,cAAc,SAAd,EAAyB,YAA1B,EAA5D,EAfyB;UAA3B;QApB+B,CAAjC,CAZoD;;AAmDpD,gCAAc,QAAd,CAAuB,+BAAY,8BAAZ,EAA4C,aAAnE,EAnDoD;AAoDpD,cAAO,EAAC,cAAc,YAAd,EAA4B,YAAY,sBAAZ,EAAoC,iBAAiB,uBAAjB,EAAxE,CApDoD;;;;;;;yCAwDlC,UAAuB;;;WAAb,2DAAK,EAAE,IAAF,gBAAQ;;AACzC,YAAK,IAAL,CAAU,KAAV,GAAkB,IAAlB,CADyC;AAEzC,oBAAa,KAAK,cAAL,CAAb,CAFyC;AAGzC,YAAK,cAAL,GAAsB,EAAE,KAAF,CAAQ,YAAM;AAClC,gBAAK,GAAL,CAAS,SAAT,EAAoB,IAApB,EADkC;QAAN,EAE3B,qBAAU,YAAV,CAAuB,0BAAvB,CAFH,CAHyC;AAMzC,WAAI,eAAe,KAAK,GAAL,CAAS,cAAT,CAAf,CANqC;AAOzC,YAAK,kBAAL,CAAwB,YAAxB,EAAsC,QAAtC,EAAgD,UAAC,KAAD,EAAQ,IAAR,EAAiB;AAC/D,aAAI,CAAC,KAAD,EAAQ;AACV,kBAAK,kBAAL,CAAwB,OAAK,0BAAL,CAAgC,IAAhC,CAAxB,EADU;UAAZ;AAGA,YAAG,KAAH,EAAU,IAAV,EAJ+D;QAAjB,CAAhD,CAPyC;;;;;;;8CAgBqB;WAA5C,iCAA4C;WAA9B,6BAA8B;WAAlB,uCAAkB;;AAC9D,oBAAa,KAAK,cAAL,CAAb,CAD8D;;AAG9D,YAAK,GAAL,CAAS;AACP,uBAAc,YAAd;AACA,0BAAiB,eAAjB;AACA,mCAA0B,KAAK,kCAAL,CAAwC,YAAxC,CAA1B;AACA,kBAAS,KAAT;AACA,iCAAwB,UAAxB;AACA,wBAAe,KAAK,gBAAL,CAAsB,YAAtB,EAAoC,KAAK,IAAL,CAAU,WAAV,CAAnD;QANF,EAH8D;;AAY9D,YAAK,oCAAL,GAZ8D;AAa9D,YAAK,OAAL,CAAa,IAAb,CAAkB,YAAlB,EAb8D;AAc9D,gCAAc,QAAd,CAAuB,sBAAvB,EAA+C,YAA/C,EAd8D;;;;;;;;;;;;;wDAwB7B,cAAc;AAC/C,WAAI,2BAA2B,EAA3B,CAD2C;AAE/C,SAAE,OAAF,CAAU,YAAV,EAAwB,UAAC,iBAAD,EAAoB,SAApB,EAAkC;AACxD,aAAI,0BAA0B,EAAE,MAAF,CAAS,iBAAT,EAA4B,UAAC,UAAD,EAAa,WAAb,EAA6B;AACrF,eAAI,CAAC,qBAAqB,YAAY,kBAAZ,CAAtB,EAAuD;AACzD,wBAAW,IAAX,CAAgB,YAAY,SAAZ,CAAhB,CADyD;YAA3D;AAGA,kBAAO,UAAP,CAJqF;UAA7B,EAKvD,EAL2B,CAA1B,CADoD;;AAQxD,aAAI,wBAAwB,MAAxB,EAAgC;AAClC,oCAAyB,SAAzB,IAAsC,uBAAtC,CADkC;UAApC;QARsB,CAAxB,CAF+C;;AAe/C,cAAO,wBAAP,CAf+C;;;;;;;;;;;8CAuBxB,UAAiC;WAAvB,uEAAiB,qBAAM;;AACxD,WAAI,eAAe,KAAK,GAAL,CAAS,cAAT,CAAf,CADoD;;AAGxD,WAAI,cAAJ,EAAoB;AAClB,oBAAW,SAAS,MAAT,CAAgB,QAAhB,CAAX,CADkB;QAApB;;AAIA,cAAO,EAAE,IAAF,CAAO,YAAP,EAAqB,QAArB,CAAP,CAPwD;;;;;;;;;;;kDAe9B;AAC1B,WAAI,aAAa,KAAK,GAAL,CAAS,aAAT,CAAb,CADsB;AAE1B,WAAI,cAAc,WAAW,IAAX,KAAoB,WAApB,EAAiC;AACjD,gBAAO,KAAK,wBAAL,CAA8B,CAAC,WAAW,EAAX,CAA/B,EAA+C,IAA/C,CAAP,CADiD;QAAnD;AAGA,cAAO,KAAK,wBAAL,CAA8B,EAA9B,CAAP,CAL0B;;;;;;;;;;;;6CAcJ,UAAU;AAChC,cAAO,KAAK,iCAAL,CAAuC,QAAvC,EAAiD,EAAjD,CAAP,CADgC;;;;;;;;;;;;;;;;;;;;;uDAmBA,UAAU,kBAAkB;AAC5D,WAAI,aAAa,KAAK,uBAAL,CAA6B,iBAAiB,OAAjB,CAA1C,CADwD;AAE5D,WAAI,WAAW,KAAK,0BAAL,EAAX,CAFwD;AAG5D,cAAO,KAAK,cAAL,CAAoB,QAApB,EAA8B,EAA9B,EAAkC,EAAC,UAAU,QAAV,EAAnC,EAAwD,UAAxD,CAAP,CAH4D;;;;;;;;;;;;yCAY1C,MAAM;AACxB,WAAI,WAAW,KAAK,0BAAL,EAAX,CADoB;AAExB,cAAO,KAAK,cAAL,CAAoB,QAApB,EAA8B,EAA9B,EAAkC,EAAC,MAAM,IAAN,EAAnC,CAAP,CAFwB;;;;gDAKC,MAAM,SAAS;AACxC,WAAI,WAAW,KAAK,wBAAL,CAA8B,CAAC,OAAD,CAA9B,EAAyC,IAAzC,CAAX,CADoC;AAExC,cAAO,KAAK,cAAL,CAAoB,QAApB,EAA8B,EAA9B,EAAkC,EAAC,MAAM,IAAN,EAAnC,CAAP,CAFwC;;;;yDAKN;AAClC,WAAI,cAAc,KAAK,GAAL,CAAS,aAAT,CAAd,CAD8B;AAElC,WAAI,CAAC,WAAD,IAAgB,CAAC,KAAK,YAAL,CAAkB,YAAY,IAAZ,CAAnB,EAAsC;AACxD,gBAAO,EAAP,CADwD;QAA1D;;AAIA,WAAI,eAAe,KAAK,GAAL,CAAS,0BAAT,CAAf;WACA,WAAW,CAAC,QAAD,EAAW,YAAY,EAAZ,CAAtB,CAP8B;;AASlC,WAAI,mBAAmB,EAAE,IAAF,CAAO,YAAP,EAAqB,QAArB,CAAnB,CAT8B;AAUlC,WAAI,oBAAoB,EAAE,MAAF,CAAS,gBAAT,CAApB,CAV8B;AAWlC,cAAO,EAAE,OAAF,CAAU,iBAAV,CAAP,CAXkC;;;;4DAcG;AACrC,WAAI,2BAA2B,KAA3B,CADiC;;AAGrC,WAAI,KAAK,iCAAL,GAAyC,MAAzC,GAAkD,CAAlD,EAAqD;AACvD,oCAA2B,IAA3B,CADuD;QAAzD;;AAIA,WAAI,EAAE,GAAF,CAAM,KAAK,GAAL,CAAS,iBAAT,CAAN,EAAmC,QAAnC,EAA6C,EAA7C,EAAiD,MAAjD,GAA0D,CAA1D,IAA+D,6BAAiB,GAAjB,CAAqB,UAArB,CAA/D,EAAiG;AACnG,oCAA2B,IAA3B,CADmG;QAArG;;AAIA,WAAI,iBAAiB,EAAE,GAAF,CAAM,KAAK,GAAL,CAAS,aAAT,CAAN,EAA+B,IAA/B,CAAjB,CAXiC;AAYrC,WAAI,EAAE,GAAF,CAAM,KAAK,GAAL,CAAS,iBAAT,CAAN,EAAmC,cAAnC,EAAmD,EAAnD,EAAuD,MAAvD,GAAgE,CAAhE,IAAqE,4BAAgB,yBAAhB,EAArE,EAAkH;AACpH,oCAA2B,IAA3B,CADoH;QAAtH;;AAIA,YAAK,GAAL,CAAS;AACP,qCAA4B,wBAA5B;QADF,EAhBqC;;;;;;;;;;;;uCA2BrB,oBAAoB;AACpC,WAAI,EAAE,OAAF,CAAU,kBAAV,CAAJ,EAAmC;AACjC,gBAAO,IAAP,CADiC;QAAnC;;AAIA,WAAI,WAAW,KAAK,0BAAL,EAAX,CALgC;;mCAMb,6BAAkB,cAAlB,CAAiC,kBAAjC,EANa;;;;WAM/B,sCAN+B;WAMpB,gCANoB;;AAOpC,WAAI,aAAa,KAAK,cAAL,CAAoB,QAApB,EAA8B,EAAC,oBAAD,EAA9B,EAA2C,EAAC,QAAD,EAA3C,CAAb,CAPgC;AAQpC,cAAO,WAAW,MAAX,GAAoB,CAApB,GAAwB,WAAW,CAAX,CAAxB,GAAwC,IAAxC,CAR6B;;;;;;;;;;;6CAgBd;AACtB,cAAO,CAAC,qBAAU,aAAV,EAAyB,qBAAU,YAAV,EAAwB,qBAAU,YAAV,CAAzD,CADsB;;;;;;;;;;;gDASG;AACzB,cAAO,CAAC,qBAAU,YAAV,EAAwB,qBAAU,YAAV,CAAhC,CADyB;;;;;;;;;;;;+CAUD,oBAAoB;AAC5C,cAAO,EAAE,IAAF,CAAO,KAAK,qBAAL,EAAP,EAAqC,eAAO;AACjD,gBAAO,IAAI,QAAJ,KAAiB,kBAAjB,CAD0C;QAAP,CAA5C,CAD4C;;;;uCAM5B,WAAW;AAC3B,WAAI,oBAAoB,EAAE,SAAF,CAAY,KAAK,0BAAL,EAAZ,EAA+C,EAAE,OAAF,CAAnE,CADuB;AAE3B,WAAI,mBAAmB,EAAE,OAAF,CAAU,EAAE,OAAF,CAAU,iBAAV,CAAV,CAAnB,CAFuB;AAG3B,cAAO,EAAE,GAAF,CAAM,EAAE,IAAF,CAAO,gBAAP,EAAyB;gBAAK,EAAE,SAAF,KAAgB,SAAhB;QAAL,CAA/B,EAAgE,QAAhE,EAA0E,EAA1E,CAAP,CAH2B;;;;;;;;;;;;;;;;oCAgBd,sBAAsB,cAAc,kBAAqC;;;WAAnB,mEAAa,oBAAM;;AACtF,WAAI,iBAAiB,EAAjB,CADkF;;AAGtF,WAAI,gBAAgB,EAAE,OAAF,CAAU,YAAV,CAAhB,CAHkF;AAItF,WAAI,oBAAoB,EAAE,OAAF,CAAU,gBAAV,CAApB,CAJkF;;AAMtF,SAAE,IAAF,CAAO,oBAAP,EAA6B,UAAC,MAAD,EAAS,MAAT,EAAoB;AAC/C,WAAE,IAAF,CAAO,MAAP,EAAe,UAAC,KAAD,EAAW;;AAExB,eAAI,CAAC,cAAc,KAAd,CAAD,IAAyB,CAAC,qBAAqB,MAAM,kBAAN,CAAtB,EAAiD;AAC5E,oBAD4E;YAA9E;AAGA,aAAE,IAAF,CAAO,MAAM,aAAN,EAAqB,UAAC,YAAD,EAAkB;AAC5C,iBAAG,kBAAkB,YAAlB,MAAoC,CAAC,UAAD,IAAe,WAAW,QAAX,CAAoB,aAAa,UAAb,CAAnC,CAApC,EAAiG;AAClG,8BAAe,IAAf,CAAoB,EAAE,MAAF,CAAS;AAC3B,4BAAW,MAAM,SAAN;AACX,2BAAU,6BAAkB,WAAlB,CAA8B,MAAM,SAAN,EAAiB,aAAa,GAAb,CAAzD;AACA,gCAAe,MAAM,OAAN;AACf,kCAAiB,OAAK,aAAL,CAAmB,MAAnB,EAA2B,MAAM,SAAN,CAA5C;gBAJkB,EAKjB,YALiB,CAApB,EADkG;cAApG;YAD0B,CAA5B,CALwB;UAAX,CAAf,CAD+C;QAApB,CAA7B,CANsF;;AAyBtF,cAAO,KAAK,gBAAL,CAAsB,cAAtB,CAAP,CAzBsF;;;;sCA4BvE,gBAAgB;AAC/B,WAAI,wBAAwB,EAAE,OAAF,CAAU,EAAE,OAAF,CAAU,cAAV,EAA0B,UAAC,SAAD;gBAAe,UAAU,SAAV;QAAf,CAApC,CAAxB;WACF,wBAAwB,EAAE,MAAF,CAAS,qBAAT,EAAgC;;;aAAE;aAAI;gBAAe;QAArB,CAAxD,CAF6B;AAG/B,cAAO,EAAE,OAAF,CAAU,EAAE,GAAF,CAAM,qBAAN,EAA6B;;;aAAE;aAAI;gBAAgB,EAAE,MAAF,CAAS,UAAT,EAAqB;kBAAa,UAAU,MAAV,GAAmB,CAAC,UAAU,MAAV,GAAmB,CAAC,cAAD;UAApD;QAA3C,CAAvC,CAAP,CAH+B;;;;6CAMT,SAAS;AAC/B,cAAO,2BACJ,QADI,CACK,KAAK,GAAL,CAAS,aAAT,CADL,EAEJ,QAFI,CAEK,6BAAiB,MAAjB,EAFL,EAGJ,WAHI,CAGQ,OAHR,CAAP,CAD+B;;;;uCAOf,KAAK;AACrB,WAAI,CAAC,GAAD,EAAM;AACR,gBADQ;QAAV;;AAIA,WAAI,cAAc,KAAK,IAAL,CAAU,YAAV,CAAuB,GAAvB,CAAd,CALiB;AAMrB,WAAI,EAAE,QAAF,CAAW,WAAX,CAAJ,EAA6B;AAC3B,cAAK,GAAL,CAAS;AACP,0BAAe,WAAf;AACA,4BAAiB,KAAK,gBAAL,CAAsB,KAAK,IAAL,CAAU,YAAV,EAAwB,WAA9C,CAAjB;UAFF,EAD2B;AAK3B,cAAK,oCAAL,GAL2B;QAA7B;;;;8CASuB,OAAO;AAC9B,WAAI,UAAU,EAAE,UAAF,CAAa,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,YAAV,CAApB,EAA6C,EAAE,IAAF,CAAO,KAAP,CAA7C,CAAV,CAD0B;AAE9B,WAAI,QAAQ,MAAR,EAAgB;AAClB,aAAI,eAAe,EAAf,CADc;AAElB,cAAK,IAAI,IAAJ,IAAY,OAAjB,EAA0B;AACxB,eAAI,MAAM,QAAQ,IAAR,CAAN;eACA,cAAc,KAAK,IAAL,CAAU,YAAV,CAAuB,GAAvB,CAAd,CAFoB;AAGxB,eAAI,YAAY,IAAZ,KAAqB,WAArB,IAAoC,YAAY,EAAZ,EAAgB;AACtD,0BAAa,IAAb,CAAkB,EAAC,IAAI,YAAY,EAAZ,EAAvB,EADsD;YAAxD;UAHF;;AAQA,aAAI,aAAa,MAAb,EAAqB;AACvB,oCAAc,QAAd,CAAuB,+BAAY,qBAAZ,EAAmC,EAAE,OAAO,YAAP,EAA5D,EADuB;UAAzB;;AAIA,cAAK,IAAL,CAAU,YAAV,GAAyB,EAAE,IAAF,CAAO,KAAK,IAAL,CAAU,YAAV,EAAwB,OAA/B,CAAzB,CAdkB;QAApB,MAeO;AACL,cAAK,IAAL,CAAU,YAAV,GAAyB,EAAE,KAAF,CAAQ,KAAK,IAAL,CAAU,YAAV,EAAwB,KAAhC,CAAzB,CADK;QAfP;;;;mCAoBY,QAAQ,UAAU;;AAE9B,WAAI,YAAY,EAAE,GAAF,CAAM,KAAK,IAAL,CAAU,sBAAV,EAAkC,CAAC,MAAD,EAAS,QAAT,CAAxC,EAA4D,IAA5D,CAAZ,CAF0B;;AAI9B,WAAI,cAAc,IAAd,EAAoB;AACtB,qBAAY,KAAK,GAAL,EAAZ,CADsB;AAEtB,WAAE,GAAF,CAAM,KAAK,IAAL,CAAU,sBAAV,EAAkC,CAAC,MAAD,EAAS,QAAT,CAAxC,EAA4D,SAA5D,EAFsB;QAAxB;;AAKA,cAAO,SAAP,CAT8B;;;;sCAYf,cAAc,aAAa;AAC1C,WAAI,qBAAqB,EAAE,GAAF,CAAM,YAAN,EAAoB,QAApB,EAA8B,EAA9B,CAArB,CADsC;AAE1C,WAAI,mBAAmB,EAAE,GAAF,CAAM,YAAN,EAAoB,EAAE,GAAF,CAAM,WAAN,EAAmB,IAAnB,EAAyB,EAAzB,CAApB,EAAkD,EAAlD,CAAnB,CAFsC;AAG1C,WAAI,0BAA0B,EAAE,MAAF,CAAS,kBAAT,CAA1B,CAHsC;AAI1C,WAAI,wBAAwB,EAAE,MAAF,CAAS,gBAAT,CAAxB,CAJsC;;AAM1C,WAAI,yBAAyB,EAAE,MAAF,CAAS,GAAG,MAAH,CAAU,uBAAV,EAAmC,qBAAnC,CAAT,EAAoE;gBAAK,EAAE,MAAF;QAAL,CAA7F,CANsC;AAO1C,WAAI,aAAa,EAAE,GAAF,CAAM,sBAAN,EAA8B;gBAAK,CAAC,EAAE,SAAF,EAAa,EAAE,MAAF;QAAnB,CAA3C,CAPsC;AAQ1C,cAAO,EAAE,SAAF,CAAY,UAAZ,CAAP,CAR0C;;;;kCAW/B,UAAU;AACrB,cAAO,aAAa,WAAb,CADc;;;;0CAIF,UAAU;AAC7B,WAAG,KAAK,YAAL,CAAkB,QAAlB,CAAH,EAAgC;AAC9B,gBAAO,4BAAiB,6BAAjB,EAAP,CAD8B;QAAhC;;AAIA,cAAO,4BAAiB,wBAAjB,EAAP,CAL6B;;;;gDAQJ,cAAc,OAAO;AAC9C,WAAI,aAAa,KAAK,GAAL,CAAS,aAAT,CAAb,CAD0C;AAE9C,WAAI,cAAc,EAAE,IAAF,CAAO,KAAP,EAAc,EAAC,MAAM,WAAW,EAAX,EAArB,CAAd,EAAoD;AACtD,aAAI,6BAA6B,4BAAiB,6BAAjB,EAA7B,CADkD;AAEtD,aAAI,0BAAJ,EAAgC;wCACZ,6BAAkB,cAAlB,CAAiC,2BAA2B,GAA3B,EADrB;;;;eACzB,sCADyB;;AAE9B,eAAI,EAAE,IAAF,CAAO,YAAP,EAAqB,EAAC,oBAAD,EAArB,CAAJ,EAAuC;AACrC,kBAAK,8BAAL,CAAoC,EAApC,EADqC;YAAvC;UAFF;QAFF;;;;+BAWQ,UAAU;AAClB,WAAI,KAAK,IAAL,CAAU,KAAV,KAAoB,QAApB,EAA8B;AAChC,gBADgC;QAAlC;;AAIA,wBAAO,KAAP,CAAa,mBAAb,6BAA2D,KAAK,IAAL,CAAU,KAAV,YAAsB,QAAjF,EALkB;AAMlB,YAAK,GAAL,CAAS,OAAT,EAAkB,QAAlB,EANkB;;AAQlB,WAAI,aAAa,kBAAkB,MAAlB,CAAyB,QAAzB,EAAmC;AAClD,cAAK,iBAAL,GADkD;QAApD;;;;uDAKgC;AAChC,WAAI,eAAe,KAAK,0BAAL,EAAf,CAD4B;;AAGhC,WAAI,mBAAmB,EAAE,GAAF,CAAM,YAAN,EAAoB,UAAC,oBAAD,EAAuB,OAAvB,EAAmC;AAC5E,gBAAO,EAAE,GAAF,CAAM,oBAAN,EAA4B;kBAAgB;AACjD,sBAAS,OAAT;AACA,wBAAW,YAAY,SAAZ;AACX,mBAAM,YAAY,IAAZ;AACN,mBAAM,EAAE,GAAF,CAAM,WAAN,EAAmB,UAAnB,CAAN;;UAJiC,CAAnC,CAD4E;QAAnC,CAAvC,CAH4B;;AAYhC,WAAI,yBAAyB,EAAE,OAAF,CAAU,EAAE,GAAF,CAAM,gBAAN,EAAwB,EAAE,MAAF,CAAlC,CAAzB,CAZ4B;AAahC,cAAO,EAAE,MAAF,CAAS,sBAAT,EAAiC;gBAAK,EAAE,SAAF;QAAL,CAAxC,CAbgC;;;;wDAgBC;;;AACjC,WAAI,eAAe,KAAK,+BAAL,EAAf,CAD6B;AAEjC,WAAI,2BAA2B,KAAK,iCAAL,EAA3B,CAF6B;;AAIjC,WAAI,kBAAkB,EAAE,MAAF,CAAS,YAAT,EAAuB,aAAK;AAChD,aAAI,sBAAsB,EAAE,GAAF,CAAM,OAAK,GAAL,CAAS,iBAAT,CAAN,EAAmC,EAAE,OAAF,EAAW,EAA9C,CAAtB,CAD4C;AAEhD,gBAAO,EAAE,QAAF,CAAW,mBAAX,EAAgC,EAAE,SAAF,CAAvC,CAFgD;QAAL,CAAzC,CAJ6B;;0BAUoB,EAAE,SAAF,CAAY,eAAZ,EAA6B;gBAAK,EAAE,OAAF,KAAc,QAAd;QAAL,EAVjD;;;;WAU5B,yCAV4B;WAUJ,uCAVI;;0BAWL,EAAE,SAAF,CAAY,YAAZ,EAA0B;gBAAK,EAAE,QAAF,CAAW,wBAAX,EAAqC,EAAE,SAAF;QAA1C,EAXrB;;;;WAW5B,2BAX4B;WAWlB,4BAXkB;;;AAajC,cAAO;AACL,yBAAgB,sBAAhB;AACA,uBAAc,oBAAd;AACA,mBAAU,QAAV;AACA,oBAAW,SAAX;QAJF,CAbiC;;;UAlvB/B;;;AAwwBN,mBAAkB,MAAlB,GAA2B,sBAAc;AACvC,SAAM,MAAN;AACA,aAAU,UAAV;AACA,YAAS,SAAT;AACA,YAAS,SAAT;;AAEA,aAAU,UAAV;AACA,UAAO,OAAP;EAPyB,CAA3B;;mBAUe,IAAI,iBAAJ;;;;;;;;;;;;;;;;;;;;;;;;;AC7yBf;;;;AACA;;;;;;KAEM;AAEJ,YAFI,mBAEJ,GAAc;yCAFV,qBAEU;;AACZ,UAAK,KAAL,GAAa,KAAb,CADY;IAAd;;8BAFI;;oCAMW;AACb,cAAO;AACL,qBAAY,EAAZ;QADF,CADa;;;;;;;;;;;0BAWV,cAAc;AACjB,sBAAe,KAAK,QAAL,CAAc,YAAd,CAAf,CADiB;AAEjB,sBAAe,KAAK,OAAL,CAAa,YAAb,EAA2B,CAA3B,EAA8B,EAAE,IAAF,CAAO,aAAa,QAAb,CAAP,CAA8B,MAA9B,EAAsC,qBAAU,YAAV,CAAuB,+BAAvB,CAAnF,CAFiB;;AAIjB,YAAK,YAAL,GAAoB,YAApB,CAJiB;AAKjB,WAAI,KAAK,KAAL,EAAY;AACd,uBAAI,KAAJ,CAAU,GAAV,CAAc,cAAI,KAAJ,CAAU,IAAV,CAAe,YAAf,EAA6B,KAAK,YAAL,CAA3C,CADc;QAAhB;AAGA,cAAO,YAAP,CARiB;;;;;;;;;;uCAeD;;;AAChB,WAAI,KAAK,KAAL,EAAY;AACd,gBAAO,cAAI,KAAJ,CAAU,GAAV,CAAc,cAAI,KAAJ,CAAU,IAAV,CAAe,YAAf,CAAd,CAA2C,IAA3C,CAAgD,UAAC,YAAD,EAAkB;AACvE,eAAI,OAAO,gBAAgB,MAAK,YAAL,EAAhB,CAD4D;AAEvE,kBAAO,MAAK,oBAAL,CAA0B,IAA1B,CAAP,CAFuE;UAAlB,CAAvD,CADc;QAAhB;AAMA,cAAO,kBAAQ,OAAR,CAAgB,KAAK,YAAL,EAAhB,CAAP,CAPgB;;;;6BAUV;AACN,WAAI,KAAK,KAAL,EAAY;AACd,uBAAI,KAAJ,CAAU,KAAV,CAAgB,cAAI,KAAJ,CAAU,IAAV,CAAe,YAAf,CAAhB,CADc;QAAhB;;;;;;;;;iCAQU,cAAa;AACvB,WAAI,oBAAoB,EAAE,KAAF,CAAQ,YAAR,CAApB,CADmB;AAEvB,cAAO,kBAAkB,QAAlB,CAFgB;;AAIvB,WAAI,WAAW,EAAE,IAAF,CAAO,aAAa,QAAb,CAAlB,CAJmB;AAKvB,SAAE,IAAF,CAAO,iBAAP,EAA0B,UAAC,oBAAD,EAAuB,IAAvB,EAAgC;AACxD,2BAAkB,IAAlB,IAA0B,EAAE,YAAF,CAAe,QAAf,EAAyB,oBAAzB,CAA1B,CADwD;QAAhC,CAA1B,CALuB;AAQvB,yBAAkB,QAAlB,GAA6B,aAAa,QAAb,CARN;AASvB,cAAO,iBAAP,CATuB;;;;;;;;;mCAeX,KAAK;AACjB,WAAI,MAAM,yBAAe,GAAf,CAAN;;AADa,cAGV,IAAI,MAAJ,GAAa,CAAb,CAHU;;;;;;;;;;;;;;;6BAeX,cAAc,KAAK,KAAK,WAAW;AACzC,WAAI,sBAAsB,YAAtB,CADqC;AAEzC,WAAI,yBAAJ,CAFyC;;AAIzC,WAAI,0BAA0B,SAA1B,uBAA0B,CAAS,iBAAT,EAA4B,GAA5B,EAAiC;AAC7D,aAAI,WAAW,kBAAkB,QAAlB,CAD8C;;AAG7D,aAAI,WAAW,EAAE,IAAF,CAAO,QAAP,CAAX,CAHyD;AAI7D,aAAI,eAAe,SAAS,KAAT,CAAe,CAAf,EAAkB,GAAlB,CAAf,CAJyD;AAK7D,aAAI,mBAAmB,EAAE,KAAF,CAAQ,iBAAR,EAA2B,IAA3B,CAAnB;;;AALyD,yBAQ7D,CAAiB,QAAjB,GAA4B,EAAE,IAAF,CAAO,QAAP,EAAiB,YAAjB,CAA5B;;;AAR6D,gBAWtD,KAAK,WAAL,CAAiB,gBAAjB,CAAP,CAX6D;QAAjC,CAJW;;AAkBzC,cAAM,MAAM,MAAM,CAAN,EAAS;AACnB,aAAI,QAAQ,MAAM,KAAK,KAAL,CAAW,CAAC,MAAM,GAAN,CAAD,GAAc,CAAd,CAAjB,CADO;;AAGnB,+BAAsB,wBAAwB,IAAxB,CAA6B,IAA7B,EAAmC,YAAnC,EAAiD,KAAjD,CAAtB,CAHmB;AAInB,aAAI,KAAK,aAAL,CAAmB,mBAAnB,IAA0C,SAA1C,EAAqD;AACvD,iBAAM,KAAN,CADuD;UAAzD,MAEO;AACL,iBAAM,KAAN,CADK;UAFP;QAJF;AAUA,0BAAmB,wBAAwB,IAAxB,CAA6B,IAA7B,EAAmC,YAAnC,EAAiD,GAAjD,CAAnB,CA5ByC;;AA8BzC,cAAO,KAAK,aAAL,CAAmB,gBAAnB,KAAwC,SAAxC,GAAoD,gBAApD,GAAuE,mBAAvE,CA9BkC;;;;0CAiCtB,cAAc;AACjC,WAAI,oBAAoB,EAApB;WACF,WAAW,aAAa,QAAb,IAAyB,EAAzB,CAFoB;;AAIjC,sBAAe,gBAAgB,EAAhB,CAJkB;;AAMjC,SAAE,IAAF,CAAO,YAAP,EAAqB,UAAC,MAAD,EAAS,IAAT,EAAkB;AACrC,aAAI,SAAS,UAAT,EAAqB;AACvB,kBADuB;UAAzB;;AAIA,2BAAkB,IAAlB,IAA0B,EAA1B,CALqC;AAMrC,WAAE,IAAF,CAAO,MAAP,EAAe,UAAC,KAAD,EAAW;AACxB,eAAI,gBAAgB,SAAS,KAAT,CAAhB,CADoB;AAExB,eAAI,CAAC,EAAE,WAAF,CAAc,aAAd,CAAD,EAA+B;AACjC,+BAAkB,IAAlB,EAAwB,cAAc,SAAd,CAAxB,GAAmD,aAAnD,CADiC;YAAnC;UAFa,CAAf,CANqC;QAAlB,CAArB,CANiC;;AAoBjC,cAAO,iBAAP,CApBiC;;;;;;;;;;;;;8BA8B1B,cAAc;AACrB,WAAI,qBAAqB;AACvB,mBAAU,EAAV;QADE,CADiB;AAIrB,SAAE,IAAF,CAAO,YAAP,EAAqB,UAAC,MAAD,EAAS,IAAT,EAAkB;AACrC,4BAAmB,IAAnB,IAA2B,EAA3B,CADqC;AAErC,WAAE,IAAF,CAAO,MAAP,EAAe,UAAC,KAAD,EAAW;AACxB,8BAAmB,IAAnB,EAAyB,IAAzB,CAA8B,MAAM,OAAN,CAA9B,CADwB;AAExB,8BAAmB,QAAnB,CAA4B,MAAM,OAAN,CAA5B,GAA6C,KAA7C,CAFwB;UAAX,CAAf,CAFqC;QAAlB,CAArB,CAJqB;AAWrB,cAAO,kBAAP,CAXqB;;;UAhJnB;;;AA+JN,QAAO,OAAP,GAAiB,mBAAjB,C;;;;;;;;;;;;;;;;ACjKA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;AAEA,KAAM,UAAU;;AAEd,UAAO,eAAC,OAAD,EAAU,GAAV,EAAkB;AACvB,SAAI,aAAa,QAAQ,GAAR,CAAb,CADmB;AAEvB,SAAI,CAAC,UAAD,EAAa;AACf,wBAAO,KAAP,6BADe;AAEf,oBAAa,EAAb,CAFe;MAAjB;AAIA,YAAO,UAAP,CANuB;IAAlB;;AASP,SAAM,MAAN;AACA,SAAM,MAAN;AACA,YAAS,SAAT;AACA,gBAAa,YAAb;EAdI;;KAiBA;AAEJ,YAFI,eAEJ,CAAY,QAAZ,EAAsB;yCAFlB,iBAEkB;;AACpB,UAAK,QAAL,GAAgB,QAAhB,CADoB;IAAtB;;;;;;;;;;;;;8BAFI;;2BAeE,oBAAoB;;;AACxB,cAAO,EAAE,KAAF,CAAQ,kBAAR,EAA4B,UAAC,IAAD,EAAU;AAC3C,aAAI,CAAC,KAAK,IAAL,EAAW;AACd,4BAAO,KAAP,CAAa,sDAAb,EADc;AAEd,kBAAO,KAAP,CAFc;UAAhB;;AAKA,aAAI,QAAQ,EAAE,GAAF,CAAM,MAAK,QAAL,EAAe,KAAK,IAAL,CAA7B,CANuC;AAO3C,aAAI,OAAO,KAAK,EAAL,KAAY,WAAnB,EAAgC;AAClC,kBAAO,UAAU,KAAK,EAAL,CADiB;UAApC,MAGK,IAAI,OAAO,KAAK,EAAL,KAAY,WAAnB,EAAgC;AACvC,kBAAO,EAAE,EAAF,CAAK,KAAL,EAAY,KAAK,EAAL,CAAnB,CADuC;UAApC,MAGA,IAAI,OAAO,KAAK,EAAL,KAAY,WAAnB,EAAgC;AACvC,kBAAO,EAAE,EAAF,CAAK,KAAL,EAAY,KAAK,EAAL,CAAnB,CADuC;UAApC;;AAIL,0BAAO,KAAP,8CAAwD,IAAxD,EAjB2C;AAkB3C,gBAAO,KAAP,CAlB2C;QAAV,CAAnC,CADwB;;;UAftB;;;AAuCN,KAAM,aAAa;;;;;;;AAOjB,qBAAkB,wBAAC,OAAD,EAAa;AAC7B,SAAI,UAAU,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAAvB,CAAqC,OAArC,CADe;AAE7B,YAAO,gBAAM,GAAN,CAAU,cAAV,CAAyB,OAAzB,CAAP,CAF6B;IAAb;;;;;;;AAUlB,oBAAiB,uBAAC,OAAD,EAAa;AAC5B,YAAO,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAAvB,CAAqC,QAArC,CADqB;IAAb;;;;;;;AASjB,oBAAiB,uBAAC,OAAD,EAAa;AAC5B,YAAO,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAAvB,CAAqC,QAArC,CADqB;IAAb;;;;;;;AASjB,yBAAsB,4BAAC,OAAD,EAAa;AACjC,SAAI,OAAO,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAA9B,CAD6B;AAEjC,SAAI,OAAO,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAA9B,CAF6B;;AAIjC,YAAO,KAAK,KAAL,KAAe,KAAK,EAAL,CAJW;IAAb;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCtB,sBAAmB,yBAAC,OAAD,EAAU,MAAV,EAAqB;;AAEtC,SAAI,UAAU,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,OAAR,CAAjC,CAFkC;;AAItC,cAAS,SAAT,GAAqB;AACnB,WAAI,OAAO,EAAE,GAAF,CAAM,MAAN,EAAc,MAAd,CAAP,CADe;AAEnB,WAAI,IAAJ,EAAU;AACR,gBAAO,QAAQ,IAAR,KAAiB,IAAjB,CADC;QAAV;AAGA,cAAO,IAAP,CALmB;MAArB;;AAQA,cAAS,aAAT,GAAyB;AACvB,WAAI,OAAO,EAAE,GAAF,CAAM,MAAN,EAAc,WAAd,CAAP,CADmB;AAEvB,WAAI,IAAJ,EAAU;AACR,gBAAO,EAAE,GAAF,CAAM,OAAN,EAAe,qBAAf,MAA0C,KAAK,OAAL,CAAa,OAAb,EAAqB,KAArB,CAA1C,CADC;QAAV;AAGA,cAAO,IAAP,CALuB;MAAzB;;AAQA,cAAS,WAAT,GAAuB;AACrB,WAAI,QAAQ,EAAE,GAAF,CAAM,MAAN,EAAc,OAAd,CAAR,CADiB;AAErB,WAAI,KAAJ,EAAW;AACT,aAAI,MAAM,OAAN,EAAe;AACjB,eAAI;AACF,iBAAI,oBAAoB,IAAI,MAAJ,CAAW,MAAM,OAAN,EAAe,MAAM,KAAN,CAA9C,CADF;AAEF,oBAAO,kBAAkB,IAAlB,CAAuB,QAAQ,IAAR,CAA9B,CAFE;YAAJ,CAGE,OAAO,CAAP,EAAU;AACV,8BAAO,KAAP,CAAa,CAAb,EADU;AAEV,oBAAO,KAAP,CAFU;YAAV;UAJJ,MAQO;AACL,4BAAO,KAAP,CAAa,iEAAb,EADK;AAEL,kBAAO,KAAP,CAFK;UARP;QADF;AAcA,cAAO,IAAP,CAhBqB;MAAvB;;AAmBA,cAAS,WAAT,GAAuB;AACrB,WAAI,SAAS,EAAE,GAAF,CAAM,MAAN,EAAc,QAAd,CAAT,CADiB;AAErB,WAAI,MAAJ,EAAY;AACV,gBAAO,QAAQ,MAAR,KAAmB,MAAnB,CADG;QAAZ;AAGA,cAAO,IAAP,CALqB;MAAvB;;AAQA,YAAO,eAAe,eAAf,IAAkC,aAAlC,IAAmD,aAAnD,CA/C+B;IAArB;;;;;;;AAuDnB,4BAAyB,+BAAC,OAAD,EAAa;AACpC,SAAI,UAAU,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,OAAR,CAAjC,CADgC;AAEpC,YAAO,qBAAW,YAAX,CAAwB,QAAQ,IAAR,CAA/B,CAFoC;IAAb;;;;;;;AAUzB,mCAAgC,sCAAC,OAAD,EAAa;AAC3C,SAAI,UAAU,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,OAAR,CAAjC,CADuC;AAE3C,SAAI,OAAO,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,IAAR,CAA9B,CAFuC;AAG3C,YAAO,QAAQ,SAAR,KAAsB,KAAK,EAAL,CAHc;IAAb;;;;;;;;;;;;;;;;;;;;;AAyBhC,mBAAgB,sBAAC,OAAD,EAAU,MAAV,EAAqB;;AAEnC,SAAI,UAAU,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,OAAR,CAAjC,CAF+B;;AAInC,cAAS,UAAT,GAAsB;AACpB,WAAI,QAAQ,EAAE,GAAF,CAAM,MAAN,EAAc,OAAd,CAAR,CADgB;AAEpB,WAAI,KAAJ,EAAW;AACT,gBAAO,QAAQ,IAAR,IAAgB,QAAQ,IAAR,CAAa,KAAb,KAAuB,KAAvB,CADd;QAAX;AAGA,cAAO,IAAP,CALoB;MAAtB;;AAQA,cAAS,aAAT,GAAyB;AACvB,WAAI,qBAAqB,EAAE,GAAF,CAAM,MAAN,EAAc,UAAd,CAArB,CADmB;AAEvB,WAAI,EAAE,OAAF,CAAU,kBAAV,CAAJ,EAAmC;AACjC,aAAI,QAAQ,QAAR,EAAkB;AACpB,eAAI,UAAU,IAAI,eAAJ,CAAoB,QAAQ,QAAR,CAA9B,CADgB;AAEpB,kBAAO,QAAQ,KAAR,CAAc,kBAAd,CAAP,CAFoB;UAAtB;AAIA,gBAAO,KAAP,CALiC;QAAnC;AAOA,cAAO,IAAP,CATuB;MAAzB;;AAYA,YAAO,gBAAgB,eAAhB,CAxB4B;IAArB;;;;;;;;;;;;;;;;AAyChB,qBAAkB,wBAAC,OAAD,EAAU,MAAV,EAAqB;;AAGrC,SAAI,aAAa,QAAQ,KAAR,CAAc,OAAd,EAAuB,QAAQ,WAAR,CAApC,CAHiC;;AAKrC,cAAS,aAAT,GAAyB;AACvB,WAAI,qBAAqB,EAAE,GAAF,CAAM,MAAN,EAAc,UAAd,CAArB,CADmB;AAEvB,WAAI,EAAE,OAAF,CAAU,kBAAV,CAAJ,EAAmC;AACjC,aAAI,WAAW,QAAX,EAAqB;AACvB,eAAI,UAAU,IAAI,eAAJ,CAAoB,WAAW,QAAX,CAA9B,CADmB;AAEvB,kBAAO,QAAQ,KAAR,CAAc,kBAAd,CAAP,CAFuB;UAAzB;AAIA,gBAAO,KAAP,CALiC;QAAnC;AAOA,cAAO,IAAP,CATuB;MAAzB;;AAYA,YAAO,eAAP,CAjBqC;IAArB;EAtMd;;KA2NA;;;gCAEc;AAChB,cAAO,KAAP,CADgB;;;;kCAIE,WAAW;AAC7B,WAAI,YAAY,WAAW,SAAX,CAAZ,CADyB;AAE7B,WAAI,CAAC,SAAD,EAAY;AACd,0BAAO,IAAP,8BAAuC,SAAvC,EADc;AAEd,qBAAY,iBAAiB,QAAjB,CAFE;QAAhB;AAIA,cAAO,SAAP,CAN6B;;;;AAS/B,YAfI,gBAeJ,GAAc;yCAfV,kBAeU;;AACZ,UAAK,OAAL,GAAe,EAAf,CADY;IAAd;;8BAfI;;8BAmBK,MAAM;AACb,YAAK,OAAL,CAAa,QAAQ,IAAR,CAAb,GAA6B,IAA7B,CADa;AAEb,cAAO,IAAP,CAFa;;;;8BAKN,MAAM;AACb,YAAK,OAAL,CAAa,QAAQ,IAAR,CAAb,GAA6B,IAA7B,CADa;AAEb,cAAO,IAAP,CAFa;;;;iCAKH,SAAS;AACnB,YAAK,OAAL,CAAa,QAAQ,OAAR,CAAb,GAAgC,OAAhC,CADmB;AAEnB,cAAO,IAAP,CAFmB;;;;oCAKN,YAAY;AACzB,YAAK,OAAL,CAAa,QAAQ,WAAR,CAAb,GAAoC,UAApC,CADyB;AAEzB,cAAO,IAAP,CAFyB;;;;;;;;;;;;;;;;;;;;;;;;;8BAwBlB,YAAY;AACnB,WAAI;AACF,gBAAO,EAAE,OAAF,CAAU,UAAV,KAAyB,KAAK,IAAL,CAAU,UAAV,CAAzB,CADL;QAAJ,CAEE,OAAO,CAAP,EAAU;AACV,0BAAO,KAAP,CAAa,CAAb,EADU;AAEV,gBAAO,KAAP,CAFU;QAAV;;;;iCAMQ,WAAW;AACrB,WAAI,uBAAuB,wBAAS,SAAT,EAAoB,MAApB,CAA4B,UAAC,GAAD,EAAM,GAAN,EAAe;AACpE,aAAI,eAAJ,CADoE;AAEpE,aAAI,IAAI,WAAJ,MAAqB,gBAArB,EAAuC;AACzC,oBAAS,IAAT,CADyC;UAA3C,MAEO;AACL,oBAAS,GAAT,CADK;UAFP;AAKA,gBAAO,MAAP,CAPoE;QAAf,EAQpD,KARwB,CAAvB,CADiB;;AAWrB,cAAO,CAAC,oBAAD,IAAyB,CAAC,EAAE,OAAF,CAAU,KAAK,OAAL,CAAa,QAAQ,WAAR,CAAvB,CAAD,CAXX;;;;wCAeJ,WAAW;AAC5B,WAAI,gBAAgB,UAAU,WAAV,CAAhB,CADwB;;AAG5B,WAAI,CAAC,aAAD,EAAgB;AAClB,aAAI,sBAAsB,UAAU,YAAV,KAA2B,EAA3B,CADR;AAElB,aAAI,gBAAgB,CAAC,UAAU,MAAV,KAAqB,KAArB,CAAD,CAA6B,WAA7B,EAAhB,CAFc;AAGlB,iBAAQ,aAAR;AACE,gBAAK,KAAL;AACE,oBAAO,KAAK,IAAL,CAAU,mBAAV,CAAP,CADF;AADF,gBAGO,IAAL;AACE,oBAAO,KAAK,GAAL,CAAS,mBAAT,CAAP,CADF;AAHF;AAMI,8BAAO,KAAP,wBAAkC,aAAlC,EADF;AAEE,oBAAO,UAAP,CAFF;AALF,UAHkB;QAApB;;AAcA,WAAI,YAAY,iBAAiB,YAAjB,CAA8B,aAA9B,CAAZ,CAjBwB;AAkB5B,WAAI,SAAS,UAAU,KAAK,OAAL,EAAc,UAAU,QAAV,KAAuB,EAAvB,CAAjC,CAlBwB;AAmB5B,cAAO,UAAU,MAAV,KAAqB,IAArB,GAA4B,CAAC,MAAD,GAAU,MAAtC,CAnBqB;;;;0BAsBzB,YAAY;;;AACf,cAAO,EAAE,KAAF,CAAQ,UAAR,EAAoB,UAAC,SAAD,EAAe;AACxC,gBAAO,OAAK,kBAAL,CAAwB,SAAxB,CAAP,CADwC;QAAf,CAA3B,CADe;;;;yBAMb,YAAY;;;AACd,cAAO,EAAE,IAAF,CAAO,UAAP,EAAmB,UAAC,SAAD,EAAe;AACvC,gBAAO,OAAK,kBAAL,CAAwB,SAAxB,CAAP,CADuC;QAAf,CAA1B,CADc;;;UA9GZ;;;AAqHN,QAAO,OAAP,GAAiB,gBAAjB,C;;;;;;AC9YA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,eAAe;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,6B;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,oCAAmC,uBAAuB;AAC1D,mCAAkC,sBAAsB;AACxD,iCAAgC,oBAAoB;AACpD,kCAAiC,qBAAqB;AACtD,iCAAgC,gBAAgB;AAChD,kCAAiC;AACjC;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,gCAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA,MAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAoB;AACpB,wBAAuB;AACvB,0BAAyB;AACzB,yBAAwB;AACxB,2BAA0B;AAC1B,0BAAyB;AACzB,0BAAyB;;AAEzB;AACA;AA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,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,sBAAqB;AACrB,2BAA0B;AAC1B,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,G;;;;;;AC9JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA,G;;;;;;ACtDA;AACA;;AAEA,4BAA2B,wCAAiD,E;;;;;;ACH5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;ACVA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,qBAAqB;;AAErD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAe,OAAO,4CAA4C;AAClE,iBAAgB,OAAO;AACvB;AACA;AACA;AACA,8BAA6B;AAC7B,6CAA4C,uBAAuB;AACnE;AACA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT,4DAA2D;AAC3D;AACA;AACA;AACA,UAAS;AACT,mCAAkC;AAClC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yDAAwD;AACxD,yDAAwD;AACxD;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA;AACA,kCAAiC,QAAQ,KAAK,OAAO,OAAO;AAC5D;AACA,gCAA+B,4BAA4B;AAC3D;AACA;AACA;AACA,mCAAkC,OAAO,SAAS;AAClD;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAQ;AACR;AACA;AACA;AACA,gBAAe,IAAI,IAAI,KAAK,KAAK,KAAK,KAAK,IAAI,IAAI,KAAK;AACxD;AACA,qBAAoB,SAAS;AAC7B;AACA;AACA;AACA;AACA,2CAA0C,sBAAsB;AAChE,iCAAgC,yBAAyB;AACzD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAQ;AACR,uCAAsC,YAAY,QAAQ;AAC1D,iBAAgB,QAAQ,KAAK,OAAO,QAAQ,KAAK,OAAO,OAAO;AAC/D;AACA;AACA;AACA;AACA;AACA,4CAA2C;AAC3C,qCAAoC;AACpC,qCAAoC;AACpC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,mDAAkD,MAAM;AACxD,0CAAyC,MAAM;AAC/C,0CAAyC,MAAM;AAC/C,0CAAyC,MAAM;AAC/C,0CAAyC,MAAM;AAC/C,oCAAmC,MAAM;AACzC,oCAAmC;AACnC;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB,yBAAyB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA6C,mBAAmB;AAChE;AACA,wDAAuD,WAAW;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,4CAA2C,gBAAgB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,SAAS;AACtD,oFAAmF,OAAO;AAC1F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA,0BAAyB;AACzB;AACA;AACA,kDAAiD,SAAS;AAC1D,4DAA2D,OAAO;AAClE;AACA;AACA;AACA,kCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,SAAS;AACtD,wDAAuD,OAAO;AAC9D;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA,+CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,iBAAiB;AAC5C,UAAS;AACT,4CAA2C,SAAS;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,SAAS;AACvB,+DAA8D,OAAO;AACrE;AACA,uBAAsB,QAAQ;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc,SAAS;AACvB,oCAAmC,OAAO;AAC1C;AACA;AACA,wBAAuB,eAAe;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA,uBAAsB,SAAS;AAC/B;AACA,gDAA+C,OAAO;AACtD,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,gCAA+B,OAAO;AACtC;AACA;AACA;;AAEA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,kDAAkD;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,wBAAwB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,gCAA+B,QAAQ;AACvC,mEAAkE,QAAQ;AAC1E;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iCAAgC,mCAAmC;AACnE;;AAEA;AACA,oDAAmD,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,+DAA8D,QAAQ;AACtE;AACA;AACA;AACA;AACA,mDAAkD,cAAc;AAChE;AACA,8DAA6D,OAAO;AACpE;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB;AACrB,mDAAkD,cAAc;AAChE,iEAAgE,OAAO;AACvE;AACA;AACA,qCAAoC,QAAQ,EAAE;AAC9C,+CAA8C,aAAa;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA,uBAAsB,cAAc;AACpC;AACA;AACA;AACA,UAAS;AACT;;AAEA;;AAEA;AACA,iCAAgC,aAAa;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,gBAAgB;AAC/B,gBAAe,4BAA4B;AAC3C,oCAAmC;AACnC;AACA,gBAAe,2BAA2B;AAC1C;AACA,6BAA4B;AAC5B;AACA,iBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA,2DAA0D;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,wDAAuD;AACvD;AACA;AACA,qDAAoD;AACpD;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAe,4BAA4B;AAC3C;AACA,gBAAe,2BAA2B;AAC1C;AACA;AACA,iBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,kCAAkC;AACjD;AACA;AACA,iBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,4BAA4B;AAC3C;AACA,gBAAe,2BAA2B;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;;;;;;AClmCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;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ACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,kBAAkB;AAChC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAgB,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA;AACA,2CAA0C,KAAK;AAC/C,0CAAyC,KAAK;AAC9C;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,qCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA,2CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,wBAAwB;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA8B,QAAQ;AACtC;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;mCClsBA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,MAAM;AAClB,aAAY,SAAS;AACrB;AACA,eAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,SAAS;AACrB;AACA,eAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA,MAAK;AACL,6BAA4B;AAC5B;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY,MAAM;AAClB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,OAAO;AACrB;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,cAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAwB;;AAExB,0CAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,mCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY,OAAO;AACnB;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAEA;AACA;AACA;AACA;AACA,IAAG;AACH,GAAE;AACF,uCAAsC;AACtC;AACA,IAAG,OAAO;AACV;AACA;AACA;AACA;AACA,GAAE,OAAO;AACT;AACA;;AAEA,EAAC;;;;;;;;ACjhBD;;AAEA;AACA;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;AACA;AACA;;;;;;;AC/DA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAmB,qDAAqD;AACxE;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA,uBAAsB,SAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,IAAG;AACH;AACA;;AAEA;;;;;;;AChxBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,wCAAuC,iCAAiC,EAAE;AAC1E;;AAEA,4DAA2D;AAC3D;AACA,EAAC,EAAE;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG,eAAe;AAClB,YAAW;AACX,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAoB,EAAE,WAAW,EAAE,QAAQ,EAAE;AAC7C,gBAAe,EAAE,WAAW,EAAE,QAAQ,EAAE;AACxC;;AAEA,kDAAiD,IAAI,yCAAyC,IAAI,iDAAiD,KAAK,kDAAkD,KAAK,iCAAiC,IAAI,sBAAsB,EAAE,WAAW,IAAI;AAC3R,kEAAiE,EAAE;AACnE,+BAA8B,IAAI,GAAG,EAAE,aAAa,IAAI,mBAAmB,IAAI,GAAG,EAAE,cAAc,IAAI,yEAAyE,EAAE,oBAAoB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,2EAA2E,EAAE,oBAAoB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,2EAA2E,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,qBAAqB,IAAI,GAAG,EAAE,gBAAgB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE,yBAAyB,IAAI,EAAE,IAAI,iBAAiB,IAAI,EAAE,IAAI,yEAAyE,EAAE;AACjjC;;AAEA,8BAA6B,EAAE,EAAE,IAAI;;AAErC;AACA,sBAAqB,MAAM,kCAAkC,KAAK,kDAAkD,KAAK;AACzH,uBAAsB,MAAM,kCAAkC,KAAK,kDAAkD,KAAK;;AAE1H;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH,6BAA4B,IAAI;AAChC,4BAA2B,KAAK;AAChC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA,2BAA0B,sDAAsD,EAAE;AAClF;;;;;;;ACtRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G;;;;;;;;;;;;ACrHA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;mBAEe,MAAM,WAAN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ACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,gBAAgB;AACjD;AACA;AACA;AACA;AACA,cAAa,yBAAyB;AACtC,cAAa,UAAU;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC,OAAO;AAC9C,sBAAqB,sBAAsB;AAC3C;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,aAAY;AACZ;AACA;;AAEA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA,QAAO;AACP;AACA;;;AAGA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC,QAAQ;AAC1C,UAAS;AACT,QAAO;AACP;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB,cAAa,SAAS;AACtB,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;;AAGA;AACA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,sBAAsB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA,mCAAkC,YAAY;AAC9C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,QAAQ;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,cAAa,SAAS;AACtB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa,OAAO;AACpB,cAAa,OAAO;AACpB,eAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,oCAAmC,SAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC7mBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAmB,mBAAmB;AACtC;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;;AAEA,wBAAuB,kBAAkB;AACzC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA,oCAAmC;AACnC;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY;AACZ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,oBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,MAAM;AAClB,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;;AAEA,kBAAiB,iBAAiB;AAClC;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY,OAAO;AACnB,aAAY,MAAM;AAClB,aAAY,OAAO;AACnB,aAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAY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","file":"hipchat-client.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a7139e933bed4c96d437\n **/","/*global Strophe HC_HOT_RELOAD*/\n\n// Beginning of the application bootstrapping process before any client code has been executed. We're storing this\n// moment in time for use in analytics event later when the analytics module is loaded.\n// NOTE: We're checking for an existing value here to allow the native clients to have the opportunity to set this\n//       value to whatever their actual start time is, rather than when they load the code in the web view.\n//       We will also set this value on the web side in the php layer so that we can get a better handle on the\n//       true starting point (rather than here when the entire minified application script has loaded).\nwindow.hc_client_launch_time = window.hc_client_launch_time || new Date().getTime();\n\nimport 'helpers/polyfills';\nimport 'helpers/event_logger'; //setup event handlers for logger before anything else\nimport logger from 'helpers/logger';\nimport mousePosition from 'helpers/mouse_position';\n\nwindow.onerror = logger.error.bind(logger);\n\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport Analytics from 'analytics/analytics';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport ApplicationStore from 'stores/application_store';\nimport AppHeaderStore from 'stores/app_header_store';\nimport appDispatcherEvents from './app-dispatcher-events';\nimport utils from 'helpers/utils';\nimport ConfigStore from 'stores/configuration_store';\nimport ConfigurationModel from 'models/configuration_model';\nimport notifier from 'helpers/notifier';\nimport spi from 'spi';\nimport HCGlobal from 'helpers/hc_global';\nimport MainLayout from 'components/layout/main_layout';\nimport GuestLayout from 'components/layout/guest_layout';\nimport ConnectionManager from 'core/xmpp/connection_manager';\nimport ClientType from 'lib/enum/client_type';\nimport ErrorDetect from 'helpers/error_detect';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\n\n// Modules not directly used but need to be imported.\nimport 'stores/video_chat_store';\nimport 'helpers/presence_subscription_helper';\nimport 'helpers/clipboard_helper';\n\n/**\n * Create a new HipChatClient\n *\n * @param {Object}  config the configuration object for this client object instance\n * @param {String}  config.client_type='web' the type for this client (used for connection and analytics)\n * @param {String}  config.client_subtype='unknown' the subtype for this client (used for connection and analytics)\n * @param {String}  config.base_url='https://www.hipchat.com' the base url of the HipChat instance to connect to\n * @param {String}  config.client_version_id='0' the version identifier for this HipChat client\n * @param {String}  config.client_os_version_id='0' the version identifier for this OS (or browser)\n * @param {URL}     config.asset_base_uri='' the base uri for assets (images/sounds)\n * @param {boolean} config.is_guest=false if this user is a guest user\n * @param {boolean} config.html5_routing_enabled=true if HTML5 style routing should be used, or hash based\n * @param {Object}  config.keyboard_shortcuts shortcuts object\n * @param {Object}  config.app_config_overrides any overrides for the application config that this client uses\n * @param {Object}  config.release_dialog_content {\"title\": \"Title\", \"intro\": \"Intro\", \"bullets\": [\"Bullet1\", \"Bullet2\"], \"outro\": \"Outro\", \"cta\": \"Call to Action\"}\n * @param {Object}  config.keyboard_shortcuts[\"ctrl+n\"] {\"action\": \"newChat\"}\n * available default actions \"newChat\", \"inviteUsersToRoom\", \"closeRoom\", \"navigateRoomsUp\", \"navigateRoomsDown\",\n * \"searchHistory\", \"toggleSoundNotifications\", \"viewShortcuts\" - \"action\" can also accept a function:\n * {\"action\": function()(alert(\"hey\"))} - optionally add a title {\"title\": \"New chat\", \"action\": \"newChat\"}\n * note: titles are automatically create for the default actions. If you pass a function you should pass a title.\n *\n * @returns {Object} a HipChatClient\n */\n\nfunction HipChatClient(opts) {\n  var defaultConfig = {\n    base_url: '',\n    video_base_url: 'https://hipchat.com/video/join',\n    client_type: ClientType.WEB,\n    client_os_version_id: 'unknown os version',\n    client_version_id: '0',\n    asset_base_uri: '',\n    video_chat_uri: '',\n    is_guest: false,\n    html5_routing_enabled: true,\n    health_check_enabled: true,\n    keyboard_shortcuts: null,\n    app_config_overrides: {},\n    native_feature_flags: {},\n    release_dialog_content: {},\n    ui: {}\n  };\n\n  // Set native_feature_flags if client is native\n  // and feature_flags have been passed in\n  if (utils.clientSubType.isNative(opts.client_subtype)) {\n    opts.native_feature_flags = _.clone(opts.feature_flags);\n  }\n\n  var initState = opts.initState || {};\n  delete opts.initState;\n\n  let normalizedOpts = _.defaultsDeep(opts, defaultConfig);\n  let mergedOpts = _.merge(normalizedOpts, initState);\n  let config = new ConfigurationModel(mergedOpts);\n\n  ApplicationStore.configure({\n    config: config,\n    asset_base_uri: config.asset_base_uri,\n    client_type: config.client_type,\n    video_chat_uri: config.video_chat_uri,\n    client_subtype: config.client_subtype,\n    client_version_id: config.client_version_id,\n    html5_routing_enabled: config.html5_routing_enabled,\n    release_dialog_content: config.release_dialog_content\n  });\n\n  // TODO: Get this into a spi. This is a temporary stop-gap\n  ConnectionManager.setOAuthTokenCallback(initState.onRefreshOAuthAccessToken);\n\n  logger.debug(\"[HipChatClient]\", 'config received', logger.sanitize(ConfigStore.getAll()));\n\n  AppHeaderStore.set({\n    notification_permission: spi.getNotificationPermission()\n  });\n\n  NetworkStatusHelper.initialize({\n    doHealthCheck: !!config.health_check_enabled\n  });\n\n  // Setup HC global\n  window.HC = new HCGlobal({is_guest: config.is_guest});\n\n  // Let's inform everyone else that the global is available\n  $(document).trigger(\"hc-ready\", window.HC);\n\n  notifier.initialize(config.asset_base_uri, config.app_config_overrides);\n  utils.emoticons.asset_base_uri = config.asset_base_uri;\n  utils.emoticons.web_server = config.web_server;\n\n  if (config.smileys) {\n    utils.emoticons.addSmileys(config.smileys);\n  }\n\n  var clientIdentifier = {\n    client_type: config.client_type,\n    client_subtype: config.client_subtype,\n    client_version_id: config.client_version_id,\n    client_os_version_id: config.client_os_version_id\n  };\n\n  // disable analytics for btf:\n  // this could potentially be an issue if\n  // wrappers stop passing in the btf flag\n  if (!_.get(config, 'feature_flags.btf')) {\n    new Analytics(initState, clientIdentifier);\n  }\n\n  AnalyticsDispatcher.dispatch(\"analytics-hc-client-start\");\n\n  appDispatcherEvents(config);\n  AppDispatcher.dispatch('hipchat-client-configured');\n\n  var detector = new ErrorDetect((type, err) => {\n    spi.onUnrecoverableError(type, err);\n  });\n\n  detector.addRule('invariant', {\n    detect: err => { return err.name === \"Invariant Violation\" || /^Invariant Violation/.test(err.message); },\n    threshold: 3,\n    time: 5 * 1000\n  });\n  detector.install();\n  mousePosition.track();\n}\n/**\n * Render the HipChatClient to the DOM\n * @param el an options element to render to, or an element matching #hipchat is used\n */\nHipChatClient.prototype.render = function (el) {\n  var targetEl = el || document.querySelector('#hipchat');\n\n  // Determine which layout to use\n  var Layout = ConfigStore.isGuest() ? GuestLayout : MainLayout;\n\n  // Don't hold up rendering for data\n  var rootInstance = ReactDOM.render(<Layout is_guest={ConfigStore.isGuest()} />, targetEl);\n\n  if (module.hot && HC_HOT_RELOAD) {\n    require('react-hot-loader/Injection').RootInstanceProvider.injectProvider({\n      getRootInstances: function () {\n        // Help React Hot Loader figure out the root component instances on the page:\n        return [rootInstance];\n      }\n    });\n  }\n\n  $(window)\n    .on('beforeunload', () => {\n      AppDispatcher.dispatch('unload-app');\n    })\n    .blur(() => {\n      AppDispatcher.dispatch('application-blurred');\n    })\n    .focus(() => {\n      AppDispatcher.dispatch('application-focused');\n    });\n\n};\n\nmodule.exports = HipChatClient;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/hipchat-client/client.js\n **/","function polyfills() {\n\n  // http://tosbourn.com/a-fix-for-window-location-origin-in-internet-explorer/\n  if (!window.location.origin) {\n    window.location.origin = window.location.protocol + \"//\" + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  }\n}\n\nexport default polyfills();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/polyfills.js\n **/","/**\n * Subscribes to many important events through the app and logs output\n *\n * @class EventLogger\n */\nvar AppDispatcher = require(\"dispatchers/app_dispatcher\");\nvar logger = require('helpers/logger');\n\nclass EventLogger {\n\n  constructor() {\n    this.registerCallbacks();\n  }\n\n  registerCallbacks() {\n    $(document)\n      .on('hc-ready', (e, data) => {\n        logger.debug('[event: hc-ready]', \"window.HC\", {verbose: data});\n      })\n      .on('app-state-ready', () => {\n        logger.debug('[event: app-state-ready]');\n      });\n\n    AppDispatcher.register({\n      //app level stuff\n      'app-state-connected': () => {\n        logger.debug('[event: app-state-connected]');\n      },\n      'app-state-reconnected': () => {\n        logger.debug('[event: app-state-reconnected]');\n      },\n      'attempt-disconnect': (data) => {\n        logger.debug('[event: attempt-disconnect]', data);\n      },\n      'attempt-reconnect': () => {\n        logger.debug('[event: attempt-reconnect]');\n      },\n      'application-blurred': () => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: application-blurred]');\n        }\n      },\n      'application-focused': () => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: application-focused]');\n        }\n      },\n      'unload-app': () => {\n        logger.debug('[event: unload-app]');\n      },\n      'exit-app': (data) => {\n        logger.debug('[event: exit-app]', data);\n      },\n      'signout': () => {\n        logger.debug('[event: signout]');\n      },\n\n      //files\n      'upload-successful': (data) => {\n        logger.debug('[event: upload-successful]', logger.sanitize(data));\n      },\n      'upload-failed': (error) => {\n        logger.debug('[event: upload-failed]', error);\n      },\n      'file-error': (data) => {\n        logger.debug('[event: file-error]', logger.sanitize(data));\n      },\n\n      //user/presences, etc.\n      'request-profile': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: request-profile]', data);\n        }\n      },\n      'send-user-state-message': (data) => {\n        logger.debug('[event: send-user-state-message]', data);\n      },\n      'unmark-participant': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: unmark-participant]', data);\n        }\n      },\n      'mark-participant-unknown': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: mark-participant-unknown]', data);\n        }\n      },\n      'fetch-presences': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: fetch-presences]', data);\n        }\n      },\n      'filter-presences': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: filter-presences]', data);\n        }\n      },\n      'update-presence': (data) => {\n        logger.debug('[event: update-presence]', data);\n      },\n\n      //routing, etc.\n      'set-route': (data) => {\n        logger.debug('[event: set-route]', data);\n      },\n      'fetch-previous': (data) => {\n        logger.debug('[event: fetch-previous]', data);\n      },\n      'requesting-ancient-history': (data) => {\n        logger.debug('[event: requesting-ancient-history]', data);\n      },\n\n      //rooms, etc.\n      'close-room': (data) => {\n        logger.debug('[event: close-room]', data);\n      },\n      'room-closed': (data) => {\n        logger.debug('[event: room-closed]', data);\n      },\n      'open-room': (data) => {\n        logger.debug('[event: open-room]', data);\n      },\n      'room-deleted': (data) => {\n        logger.debug('[event: room-deleted]', data);\n      },\n      'DAL:handle-created-room': (data) => {\n        logger.debug('[event: DAL:handle-created-room]', data);\n      },\n      'API:update-room': (data) => {\n        logger.debug('[event: API:update-room]', data);\n      },\n      'update-room-order': (data) => {\n        logger.debug('[event: update-room-order]', data);\n      },\n      'focus-video-window': (data) => {\n        logger.debug('[event: focus-video-window]', data);\n      },\n      'new-active-chat': (data) => {\n        logger.debug('[event: new-active-chat]', data);\n      },\n      'open-chat-by-mention-name': (data) => {\n        logger.debug('[event: open-chat-by-mention-name]', data);\n      },\n      'join-room': (data) => {\n        logger.debug('[event: join-room]', data);\n      },\n      'DAL:handle-joined-rooms': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: DAL:handle-joined-rooms]', data);\n        }\n      },\n      'save-client-preferences': (data) => {\n        logger.debug('[event: save-client-preferences]', data);\n      },\n      'edit-topic': () => {\n        logger.debug('[event: edit-topic]');\n      },\n      'delete-room': (data) => {\n        logger.debug('[event: delete-room]', data);\n      },\n      'set-guest-access': (data) => {\n        logger.debug('[event: set-guest-access]', data);\n      },\n      'navigate-rooms': (data) => {\n        logger.debug('[event: navigate-rooms]', data);\n      },\n      'add-link-from-message': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: add-link-from-message]', data);\n        }\n      },\n      'add-file-from-message': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: add-file-from-message]', logger.sanitize(data));\n        }\n      },\n      'remove-room-participant': (data) => {\n        logger.debug('[event: remove-room-participant]', data);\n      },\n      'guest-access-revoked': () => {\n        logger.debug('[event: guest-access-revoked]');\n      },\n      'user-removed': (data) => {\n        logger.debug('[event: user-removed]', data);\n      },\n      'add-room-visitor': (data) => {\n        logger.debug('[event: add-room-visitor]', data);\n      },\n      'room-presence-received': (data) => {\n        if (logger.isVerbose()) {\n          logger.debug('[event: room-presence-received]', data);\n        }\n      },\n      'chat-fully-initialized': (data) => {\n        logger.debug('[event: chat-fully-initialized]', data);\n      },\n      'archive-room': (data) => {\n        logger.debug('[event: archive-room]', data);\n      },\n      'unarchive-room': (data) => {\n        logger.debug('[event: unarchive-room]', data);\n      },\n      'room-archived': (data) => {\n        logger.debug('[event: room-archived]', data);\n      },\n      'room-unarchived': (data) => {\n        logger.debug('[event: room-unarchived]', data);\n      },\n\n      //dialogs, etc.\n      'show-flag': (data) => {\n        logger.debug('[event: show-flag]', data);\n      },\n      'show-modal-dialog': (data) => {\n        logger.debug('[event: show-modal-dialog]', data);\n      },\n      'files-fetched': (data) => {\n        logger.debug('[event: files-fetched]', data);\n      },\n      'links-fetched': (data) => {\n        logger.debug('[event: links-fetched]', data);\n      },\n      'hide-modal-dialog': () => {\n        logger.debug('[event: hide-modal-dialog]');\n      },\n      'remove-flag': (data) => {\n        logger.debug('[event: remove-flag]', data);\n      },\n      'show-integration-view': (data) => {\n        logger.debug('[event: show-integration-view]', data);\n      },\n      'refresh-integrations': (data) => {\n        logger.debug('[event: refresh-integrations]', data);\n      },\n      'integration-update': (data) => {\n        logger.debug('[event: integration-update]', data);\n      },\n\n      //search\n      'search-history': (data) => {\n        logger.debug('[event: search-history]', data);\n      },\n      'set-search-text': (data) => {\n        logger.debug('[event: set-search-text]', data);\n      },\n      'blur-search': () => {\n        logger.debug('[event: blur-search]');\n      },\n\n      //video\n      'video-window-event': (data) => {\n        logger.debug('[event: video-window-event]', data);\n      },\n      'missed-call': (data) => {\n        logger.debug('[event: missed-call]', data);\n      },\n\n      //other\n      'enable-dark-feature': (data) => {\n        logger.debug('[event: enable-dark-feature]', data);\n      },\n      'dismiss-notification-banner': () => {\n        logger.debug('[event: dismiss-notification-banner]');\n      },\n      'dismiss-notification-banner-forever': () => {\n        logger.debug('[event: dismiss-notification-banner-forever]');\n      },\n      'request-notification-permission': () => {\n        logger.debug('[event: request-notification-permission]');\n      },\n      'resend-message': (data) => {\n        logger.debug('[event: resend-message]', data);\n      },\n      'groupchat-invite-accepted': (data) => {\n        logger.debug('[event: groupchat-invite-accepted]', data);\n      },\n      'error-message-received': (data) => {\n        logger.debug('[event: error-message-received]', data);\n      },\n      'replacement-message-received': (data) => {\n        logger.debug('[event: replacement-message-received]', data);\n      },\n      'handle-cached-room': (data) => {\n        logger.debug('[event: handle-cached-room]', data);\n      },\n      'groupchat-invite-received': (data) => {\n        logger.debug('[event: groupchat-invite-received]', data);\n      },\n      'private-chat-invite-received': (data) => {\n        logger.debug('[event: private-chat-invite-received]', data);\n      },\n      'guest-access-enabled': (data) => {\n        logger.debug('[event: guest-access-enabled]', data);\n      },\n      'remove-chat-state-message': (data) => {\n        logger.debug('[event: remove-chat-state-message]', data);\n      }\n    });\n  }\n\n}\n\nmodule.exports = new EventLogger();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/event_logger.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/classCallCheck.js\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/createClass.js\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/define-property.js\n ** module id = 5\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function defineProperty(it, key, desc){\n  return $.setDesc(it, key, desc);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/define-property.js\n ** module id = 6\n ** module chunks = 0\n **/","var $Object = Object;\nmodule.exports = {\n  create:     $Object.create,\n  getProto:   $Object.getPrototypeOf,\n  isEnum:     {}.propertyIsEnumerable,\n  getDesc:    $Object.getOwnPropertyDescriptor,\n  setDesc:    $Object.defineProperty,\n  setDescs:   $Object.defineProperties,\n  getKeys:    $Object.keys,\n  getNames:   $Object.getOwnPropertyNames,\n  getSymbols: $Object.getOwnPropertySymbols,\n  each:       [].forEach\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.js\n ** module id = 7\n ** module chunks = 0\n **/","import Dispatcher from 'lib/core/dispatcher';\n\nclass AppDispatcher extends Dispatcher {\n\n  dispatch(action, ...args) {\n    let Logger = require('helpers/logger');\n    Logger.type('app-dispatcher:' + action).log(...args);\n    super.dispatch(action, ...args);\n  }\n}\n\nexport default new AppDispatcher();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/dispatchers/app_dispatcher.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/get-prototype-of.js\n ** module id = 9\n ** module chunks = 0\n **/","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.getPrototypeOf;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/get-prototype-of.js\n ** module id = 10\n ** module chunks = 0\n **/","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('getPrototypeOf', function($getPrototypeOf){\n  return function getPrototypeOf(it){\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.get-prototype-of.js\n ** module id = 11\n ** module chunks = 0\n **/","// 7.1.13 ToObject(argument)\nvar defined = require('./$.defined');\nmodule.exports = function(it){\n  return Object(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-object.js\n ** module id = 12\n ** module chunks = 0\n **/","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function(it){\n  if(it == undefined)throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.defined.js\n ** module id = 13\n ** module chunks = 0\n **/","// most Object methods by ES6 should accept primitives\nvar $export = require('./$.export')\n  , core    = require('./$.core')\n  , fails   = require('./$.fails');\nmodule.exports = function(KEY, exec){\n  var fn  = (core.Object || {})[KEY] || Object[KEY]\n    , exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.object-sap.js\n ** module id = 14\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , core      = require('./$.core')\n  , ctx       = require('./$.ctx')\n  , PROTOTYPE = 'prototype';\n\nvar $export = function(type, name, source){\n  var IS_FORCED = type & $export.F\n    , IS_GLOBAL = type & $export.G\n    , IS_STATIC = type & $export.S\n    , IS_PROTO  = type & $export.P\n    , IS_BIND   = type & $export.B\n    , IS_WRAP   = type & $export.W\n    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})\n    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]\n    , key, own, out;\n  if(IS_GLOBAL)source = name;\n  for(key in source){\n    // contains in native\n    own = !IS_FORCED && target && key in target;\n    if(own && key in exports)continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function(C){\n      var F = function(param){\n        return this instanceof C ? new C(param) : C(param);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;\n  }\n};\n// type bitmap\n$export.F = 1;  // forced\n$export.G = 2;  // global\n$export.S = 4;  // static\n$export.P = 8;  // proto\n$export.B = 16; // bind\n$export.W = 32; // wrap\nmodule.exports = $export;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.export.js\n ** module id = 15\n ** module chunks = 0\n **/","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\nif(typeof __g == 'number')__g = global; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.global.js\n ** module id = 16\n ** module chunks = 0\n **/","var core = module.exports = {version: '1.2.6'};\nif(typeof __e == 'number')__e = core; // eslint-disable-line no-undef\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.core.js\n ** module id = 17\n ** module chunks = 0\n **/","// optional / simple context binding\nvar aFunction = require('./$.a-function');\nmodule.exports = function(fn, that, length){\n  aFunction(fn);\n  if(that === undefined)return fn;\n  switch(length){\n    case 1: return function(a){\n      return fn.call(that, a);\n    };\n    case 2: return function(a, b){\n      return fn.call(that, a, b);\n    };\n    case 3: return function(a, b, c){\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function(/* ...args */){\n    return fn.apply(that, arguments);\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.ctx.js\n ** module id = 18\n ** module chunks = 0\n **/","module.exports = function(it){\n  if(typeof it != 'function')throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.a-function.js\n ** module id = 19\n ** module chunks = 0\n **/","module.exports = function(exec){\n  try {\n    return !!exec();\n  } catch(e){\n    return true;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.fails.js\n ** module id = 20\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/possibleConstructorReturn.js\n ** module id = 21\n ** module chunks = 0\n **/","\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nexports[\"default\"] = function (obj) {\n  return obj && obj.constructor === _Symbol ? \"symbol\" : typeof obj;\n};\n\nexports.__esModule = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/typeof.js\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol.js\n ** module id = 23\n ** module chunks = 0\n **/","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nmodule.exports = require('../../modules/$.core').Symbol;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/symbol/index.js\n ** module id = 24\n ** module chunks = 0\n **/","'use strict';\n// ECMAScript 6 symbols shim\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , has            = require('./$.has')\n  , DESCRIPTORS    = require('./$.descriptors')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , $fails         = require('./$.fails')\n  , shared         = require('./$.shared')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , uid            = require('./$.uid')\n  , wks            = require('./$.wks')\n  , keyOf          = require('./$.keyof')\n  , $names         = require('./$.get-names')\n  , enumKeys       = require('./$.enum-keys')\n  , isArray        = require('./$.is-array')\n  , anObject       = require('./$.an-object')\n  , toIObject      = require('./$.to-iobject')\n  , createDesc     = require('./$.property-desc')\n  , getDesc        = $.getDesc\n  , setDesc        = $.setDesc\n  , _create        = $.create\n  , getNames       = $names.get\n  , $Symbol        = global.Symbol\n  , $JSON          = global.JSON\n  , _stringify     = $JSON && $JSON.stringify\n  , setter         = false\n  , HIDDEN         = wks('_hidden')\n  , isEnum         = $.isEnum\n  , SymbolRegistry = shared('symbol-registry')\n  , AllSymbols     = shared('symbols')\n  , useNative      = typeof $Symbol == 'function'\n  , ObjectProto    = Object.prototype;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function(){\n  return _create(setDesc({}, 'a', {\n    get: function(){ return setDesc(this, 'a', {value: 7}).a; }\n  })).a != 7;\n}) ? function(it, key, D){\n  var protoDesc = getDesc(ObjectProto, key);\n  if(protoDesc)delete ObjectProto[key];\n  setDesc(it, key, D);\n  if(protoDesc && it !== ObjectProto)setDesc(ObjectProto, key, protoDesc);\n} : setDesc;\n\nvar wrap = function(tag){\n  var sym = AllSymbols[tag] = _create($Symbol.prototype);\n  sym._k = tag;\n  DESCRIPTORS && setter && setSymbolDesc(ObjectProto, tag, {\n    configurable: true,\n    set: function(value){\n      if(has(this, HIDDEN) && has(this[HIDDEN], tag))this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    }\n  });\n  return sym;\n};\n\nvar isSymbol = function(it){\n  return typeof it == 'symbol';\n};\n\nvar $defineProperty = function defineProperty(it, key, D){\n  if(D && has(AllSymbols, key)){\n    if(!D.enumerable){\n      if(!has(it, HIDDEN))setDesc(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if(has(it, HIDDEN) && it[HIDDEN][key])it[HIDDEN][key] = false;\n      D = _create(D, {enumerable: createDesc(0, false)});\n    } return setSymbolDesc(it, key, D);\n  } return setDesc(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P){\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P))\n    , i    = 0\n    , l = keys.length\n    , key;\n  while(l > i)$defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P){\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key){\n  var E = isEnum.call(this, key);\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key]\n    ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key){\n  var D = getDesc(it = toIObject(it), key);\n  if(D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key]))D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(!has(AllSymbols, key = names[i++]) && key != HIDDEN)result.push(key);\n  return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it){\n  var names  = getNames(toIObject(it))\n    , result = []\n    , i      = 0\n    , key;\n  while(names.length > i)if(has(AllSymbols, key = names[i++]))result.push(AllSymbols[key]);\n  return result;\n};\nvar $stringify = function stringify(it){\n  if(it === undefined || isSymbol(it))return; // IE8 returns string on undefined\n  var args = [it]\n    , i    = 1\n    , $$   = arguments\n    , replacer, $replacer;\n  while($$.length > i)args.push($$[i++]);\n  replacer = args[1];\n  if(typeof replacer == 'function')$replacer = replacer;\n  if($replacer || !isArray(replacer))replacer = function(key, value){\n    if($replacer)value = $replacer.call(this, key, value);\n    if(!isSymbol(value))return value;\n  };\n  args[1] = replacer;\n  return _stringify.apply($JSON, args);\n};\nvar buggyJSON = $fails(function(){\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({a: S}) != '{}' || _stringify(Object(S)) != '{}';\n});\n\n// 19.4.1.1 Symbol([description])\nif(!useNative){\n  $Symbol = function Symbol(){\n    if(isSymbol(this))throw TypeError('Symbol is not a constructor');\n    return wrap(uid(arguments.length > 0 ? arguments[0] : undefined));\n  };\n  redefine($Symbol.prototype, 'toString', function toString(){\n    return this._k;\n  });\n\n  isSymbol = function(it){\n    return it instanceof $Symbol;\n  };\n\n  $.create     = $create;\n  $.isEnum     = $propertyIsEnumerable;\n  $.getDesc    = $getOwnPropertyDescriptor;\n  $.setDesc    = $defineProperty;\n  $.setDescs   = $defineProperties;\n  $.getNames   = $names.get = $getOwnPropertyNames;\n  $.getSymbols = $getOwnPropertySymbols;\n\n  if(DESCRIPTORS && !require('./$.library')){\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n}\n\nvar symbolStatics = {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function(key){\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(key){\n    return keyOf(SymbolRegistry, key);\n  },\n  useSetter: function(){ setter = true; },\n  useSimple: function(){ setter = false; }\n};\n// 19.4.2.2 Symbol.hasInstance\n// 19.4.2.3 Symbol.isConcatSpreadable\n// 19.4.2.4 Symbol.iterator\n// 19.4.2.6 Symbol.match\n// 19.4.2.8 Symbol.replace\n// 19.4.2.9 Symbol.search\n// 19.4.2.10 Symbol.species\n// 19.4.2.11 Symbol.split\n// 19.4.2.12 Symbol.toPrimitive\n// 19.4.2.13 Symbol.toStringTag\n// 19.4.2.14 Symbol.unscopables\n$.each.call((\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,' +\n  'species,split,toPrimitive,toStringTag,unscopables'\n).split(','), function(it){\n  var sym = wks(it);\n  symbolStatics[it] = useNative ? sym : wrap(sym);\n});\n\nsetter = true;\n\n$export($export.G + $export.W, {Symbol: $Symbol});\n\n$export($export.S, 'Symbol', symbolStatics);\n\n$export($export.S + $export.F * !useNative, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!useNative || buggyJSON), 'JSON', {stringify: $stringify});\n\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.symbol.js\n ** module id = 25\n ** module chunks = 0\n **/","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function(it, key){\n  return hasOwnProperty.call(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.has.js\n ** module id = 26\n ** module chunks = 0\n **/","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./$.fails')(function(){\n  return Object.defineProperty({}, 'a', {get: function(){ return 7; }}).a != 7;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.descriptors.js\n ** module id = 27\n ** module chunks = 0\n **/","module.exports = require('./$.hide');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine.js\n ** module id = 28\n ** module chunks = 0\n **/","var $          = require('./$')\n  , createDesc = require('./$.property-desc');\nmodule.exports = require('./$.descriptors') ? function(object, key, value){\n  return $.setDesc(object, key, createDesc(1, value));\n} : function(object, key, value){\n  object[key] = value;\n  return object;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.hide.js\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = function(bitmap, value){\n  return {\n    enumerable  : !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable    : !(bitmap & 4),\n    value       : value\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.property-desc.js\n ** module id = 30\n ** module chunks = 0\n **/","var global = require('./$.global')\n  , SHARED = '__core-js_shared__'\n  , store  = global[SHARED] || (global[SHARED] = {});\nmodule.exports = function(key){\n  return store[key] || (store[key] = {});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.shared.js\n ** module id = 31\n ** module chunks = 0\n **/","var def = require('./$').setDesc\n  , has = require('./$.has')\n  , TAG = require('./$.wks')('toStringTag');\n\nmodule.exports = function(it, tag, stat){\n  if(it && !has(it = stat ? it : it.prototype, TAG))def(it, TAG, {configurable: true, value: tag});\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-to-string-tag.js\n ** module id = 32\n ** module chunks = 0\n **/","var store  = require('./$.shared')('wks')\n  , uid    = require('./$.uid')\n  , Symbol = require('./$.global').Symbol;\nmodule.exports = function(name){\n  return store[name] || (store[name] =\n    Symbol && Symbol[name] || (Symbol || uid)('Symbol.' + name));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.wks.js\n ** module id = 33\n ** module chunks = 0\n **/","var id = 0\n  , px = Math.random();\nmodule.exports = function(key){\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.uid.js\n ** module id = 34\n ** module chunks = 0\n **/","var $         = require('./$')\n  , toIObject = require('./$.to-iobject');\nmodule.exports = function(object, el){\n  var O      = toIObject(object)\n    , keys   = $.getKeys(O)\n    , length = keys.length\n    , index  = 0\n    , key;\n  while(length > index)if(O[key = keys[index++]] === el)return key;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.keyof.js\n ** module id = 35\n ** module chunks = 0\n **/","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./$.iobject')\n  , defined = require('./$.defined');\nmodule.exports = function(it){\n  return IObject(defined(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-iobject.js\n ** module id = 36\n ** module chunks = 0\n **/","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./$.cof');\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function(it){\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iobject.js\n ** module id = 37\n ** module chunks = 0\n **/","var toString = {}.toString;\n\nmodule.exports = function(it){\n  return toString.call(it).slice(8, -1);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.cof.js\n ** module id = 38\n ** module chunks = 0\n **/","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./$.to-iobject')\n  , getNames  = require('./$').getNames\n  , toString  = {}.toString;\n\nvar windowNames = typeof window == 'object' && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function(it){\n  try {\n    return getNames(it);\n  } catch(e){\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.get = function getOwnPropertyNames(it){\n  if(windowNames && toString.call(it) == '[object Window]')return getWindowNames(it);\n  return getNames(toIObject(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.get-names.js\n ** module id = 39\n ** module chunks = 0\n **/","// all enumerable object keys, includes symbols\nvar $ = require('./$');\nmodule.exports = function(it){\n  var keys       = $.getKeys(it)\n    , getSymbols = $.getSymbols;\n  if(getSymbols){\n    var symbols = getSymbols(it)\n      , isEnum  = $.isEnum\n      , i       = 0\n      , key;\n    while(symbols.length > i)if(isEnum.call(it, key = symbols[i++]))keys.push(key);\n  }\n  return keys;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.enum-keys.js\n ** module id = 40\n ** module chunks = 0\n **/","// 7.2.2 IsArray(argument)\nvar cof = require('./$.cof');\nmodule.exports = Array.isArray || function(arg){\n  return cof(arg) == 'Array';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-array.js\n ** module id = 41\n ** module chunks = 0\n **/","var isObject = require('./$.is-object');\nmodule.exports = function(it){\n  if(!isObject(it))throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.an-object.js\n ** module id = 42\n ** module chunks = 0\n **/","module.exports = function(it){\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-object.js\n ** module id = 43\n ** module chunks = 0\n **/","module.exports = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.library.js\n ** module id = 44\n ** module chunks = 0\n **/","\"use strict\";\n\nvar _Object$getOwnPropertyDescriptor = require(\"babel-runtime/core-js/object/get-own-property-descriptor\")[\"default\"];\n\nexports[\"default\"] = function get(_x, _x2, _x3) {\n  var _again = true;\n\n  _function: while (_again) {\n    var object = _x,\n        property = _x2,\n        receiver = _x3;\n    _again = false;\n    if (object === null) object = Function.prototype;\n\n    var desc = _Object$getOwnPropertyDescriptor(object, property);\n\n    if (desc === undefined) {\n      var parent = Object.getPrototypeOf(object);\n\n      if (parent === null) {\n        return undefined;\n      } else {\n        _x = parent;\n        _x2 = property;\n        _x3 = receiver;\n        _again = true;\n        desc = parent = undefined;\n        continue _function;\n      }\n    } else if (\"value\" in desc) {\n      return desc.value;\n    } else {\n      var getter = desc.get;\n\n      if (getter === undefined) {\n        return undefined;\n      }\n\n      return getter.call(receiver);\n    }\n  }\n};\n\nexports.__esModule = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/get.js\n ** module id = 46\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/get-own-property-descriptor.js\n ** module id = 47\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nrequire('../../modules/es6.object.get-own-property-descriptor');\nmodule.exports = function getOwnPropertyDescriptor(it, key){\n  return $.getDesc(it, key);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/get-own-property-descriptor.js\n ** module id = 48\n ** module chunks = 0\n **/","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./$.to-iobject');\n\nrequire('./$.object-sap')('getOwnPropertyDescriptor', function($getOwnPropertyDescriptor){\n  return function getOwnPropertyDescriptor(it, key){\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.get-own-property-descriptor.js\n ** module id = 49\n ** module chunks = 0\n **/","\"use strict\";\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nexports[\"default\"] = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = _Object$create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _Object$setPrototypeOf ? _Object$setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nexports.__esModule = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/inherits.js\n ** module id = 50\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/create.js\n ** module id = 51\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nmodule.exports = function create(P, D){\n  return $.create(P, D);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/create.js\n ** module id = 52\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/set-prototype-of.js\n ** module id = 53\n ** module chunks = 0\n **/","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/$.core').Object.setPrototypeOf;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/set-prototype-of.js\n ** module id = 54\n ** module chunks = 0\n **/","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./$.export');\n$export($export.S, 'Object', {setPrototypeOf: require('./$.set-proto').set});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.set-prototype-of.js\n ** module id = 55\n ** module chunks = 0\n **/","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar getDesc  = require('./$').getDesc\n  , isObject = require('./$.is-object')\n  , anObject = require('./$.an-object');\nvar check = function(O, proto){\n  anObject(O);\n  if(!isObject(proto) && proto !== null)throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function(test, buggy, set){\n      try {\n        set = require('./$.ctx')(Function.call, getDesc(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch(e){ buggy = true; }\n      return function setPrototypeOf(O, proto){\n        check(O, proto);\n        if(buggy)O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-proto.js\n ** module id = 56\n ** module chunks = 0\n **/","var EventEmitter = require(\"events\").EventEmitter;\nclass Dispatcher extends EventEmitter {\n\n  constructor() {\n    super();\n    this.setMaxListeners(20);\n  }\n\n  dispatch(action, ...args) {\n    this.emit.apply(this, [\"before:\" + action].concat(args));\n    this.emit.apply(this, arguments);\n    this.emit.apply(this, [\"after:\" + action].concat(args));\n  }\n\n  registerOnce(action, callback) {\n    if (_.isArray(action)) {\n      let promises = action.map(evt => {\n        return new Promise(resolve => {\n          this.once(evt, (...args) => {\n            resolve({\n              action: evt,\n              data: args\n            });\n          });\n        });\n      });\n\n      return Promise.all(promises).then((returns) =>{\n        var data = {};\n\n        _.forEach(returns, (val) => {\n          data[val.action] = val.data;\n        });\n\n        callback(data);\n      });\n\n    } else if (_.isString(action)) {\n      this.once(action, callback);\n\n    } else if (_.isObject(action)) {\n      _.forOwn(action, (val, key) => {\n        this.once(key, val);\n      });\n    }\n  }\n\n  register(action, callback) {\n    if (_.isString(action)) {\n      this.on(action, callback);\n    } else if (_.isObject(action)) {\n      _.forOwn(action, (val, key) => {\n        this.on(key, val);\n      });\n    }\n  }\n\n  unregister(action, callback) {\n    if (_.isString(action)) {\n      this.removeListener(action, callback);\n    } else if (_.isObject(action)) {\n      _.forOwn(action, (val, key) => {\n        this.removeListener(key, val);\n      });\n    }\n  }\n}\n\nmodule.exports = Dispatcher;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/core/dispatcher.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/promise.js\n ** module id = 58\n ** module chunks = 0\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nmodule.exports = require('../modules/$.core').Promise;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/promise.js\n ** module id = 59\n ** module chunks = 0\n **/","'use strict';\nvar $at  = require('./$.string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./$.iter-define')(String, 'String', function(iterated){\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , index = this._i\n    , point;\n  if(index >= O.length)return {value: undefined, done: true};\n  point = $at(O, index);\n  this._i += point.length;\n  return {value: point, done: false};\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.string.iterator.js\n ** module id = 60\n ** module chunks = 0\n **/","var toInteger = require('./$.to-integer')\n  , defined   = require('./$.defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function(TO_STRING){\n  return function(that, pos){\n    var s = String(defined(that))\n      , i = toInteger(pos)\n      , l = s.length\n      , a, b;\n    if(i < 0 || i >= l)return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.string-at.js\n ** module id = 61\n ** module chunks = 0\n **/","// 7.1.4 ToInteger\nvar ceil  = Math.ceil\n  , floor = Math.floor;\nmodule.exports = function(it){\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-integer.js\n ** module id = 62\n ** module chunks = 0\n **/","'use strict';\nvar LIBRARY        = require('./$.library')\n  , $export        = require('./$.export')\n  , redefine       = require('./$.redefine')\n  , hide           = require('./$.hide')\n  , has            = require('./$.has')\n  , Iterators      = require('./$.iterators')\n  , $iterCreate    = require('./$.iter-create')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , getProto       = require('./$').getProto\n  , ITERATOR       = require('./$.wks')('iterator')\n  , BUGGY          = !([].keys && 'next' in [].keys()) // Safari has buggy iterators w/o `next`\n  , FF_ITERATOR    = '@@iterator'\n  , KEYS           = 'keys'\n  , VALUES         = 'values';\n\nvar returnThis = function(){ return this; };\n\nmodule.exports = function(Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED){\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function(kind){\n    if(!BUGGY && kind in proto)return proto[kind];\n    switch(kind){\n      case KEYS: return function keys(){ return new Constructor(this, kind); };\n      case VALUES: return function values(){ return new Constructor(this, kind); };\n    } return function entries(){ return new Constructor(this, kind); };\n  };\n  var TAG        = NAME + ' Iterator'\n    , DEF_VALUES = DEFAULT == VALUES\n    , VALUES_BUG = false\n    , proto      = Base.prototype\n    , $native    = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT]\n    , $default   = $native || getMethod(DEFAULT)\n    , methods, key;\n  // Fix native\n  if($native){\n    var IteratorPrototype = getProto($default.call(new Base));\n    // Set @@toStringTag to native iterators\n    setToStringTag(IteratorPrototype, TAG, true);\n    // FF fix\n    if(!LIBRARY && has(proto, FF_ITERATOR))hide(IteratorPrototype, ITERATOR, returnThis);\n    // fix Array#{values, @@iterator}.name in V8 / FF\n    if(DEF_VALUES && $native.name !== VALUES){\n      VALUES_BUG = true;\n      $default = function values(){ return $native.call(this); };\n    }\n  }\n  // Define iterator\n  if((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])){\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG]  = returnThis;\n  if(DEFAULT){\n    methods = {\n      values:  DEF_VALUES  ? $default : getMethod(VALUES),\n      keys:    IS_SET      ? $default : getMethod(KEYS),\n      entries: !DEF_VALUES ? $default : getMethod('entries')\n    };\n    if(FORCED)for(key in methods){\n      if(!(key in proto))redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-define.js\n ** module id = 63\n ** module chunks = 0\n **/","module.exports = {};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iterators.js\n ** module id = 64\n ** module chunks = 0\n **/","'use strict';\nvar $              = require('./$')\n  , descriptor     = require('./$.property-desc')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./$.hide')(IteratorPrototype, require('./$.wks')('iterator'), function(){ return this; });\n\nmodule.exports = function(Constructor, NAME, next){\n  Constructor.prototype = $.create(IteratorPrototype, {next: descriptor(1, next)});\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-create.js\n ** module id = 65\n ** module chunks = 0\n **/","require('./es6.array.iterator');\nvar Iterators = require('./$.iterators');\nIterators.NodeList = Iterators.HTMLCollection = Iterators.Array;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/web.dom.iterable.js\n ** module id = 66\n ** module chunks = 0\n **/","'use strict';\nvar addToUnscopables = require('./$.add-to-unscopables')\n  , step             = require('./$.iter-step')\n  , Iterators        = require('./$.iterators')\n  , toIObject        = require('./$.to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./$.iter-define')(Array, 'Array', function(iterated, kind){\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function(){\n  var O     = this._t\n    , kind  = this._k\n    , index = this._i++;\n  if(!O || index >= O.length){\n    this._t = undefined;\n    return step(1);\n  }\n  if(kind == 'keys'  )return step(0, index);\n  if(kind == 'values')return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.array.iterator.js\n ** module id = 67\n ** module chunks = 0\n **/","module.exports = function(){ /* empty */ };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.add-to-unscopables.js\n ** module id = 68\n ** module chunks = 0\n **/","module.exports = function(done, value){\n  return {value: value, done: !!done};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-step.js\n ** module id = 69\n ** module chunks = 0\n **/","'use strict';\nvar $          = require('./$')\n  , LIBRARY    = require('./$.library')\n  , global     = require('./$.global')\n  , ctx        = require('./$.ctx')\n  , classof    = require('./$.classof')\n  , $export    = require('./$.export')\n  , isObject   = require('./$.is-object')\n  , anObject   = require('./$.an-object')\n  , aFunction  = require('./$.a-function')\n  , strictNew  = require('./$.strict-new')\n  , forOf      = require('./$.for-of')\n  , setProto   = require('./$.set-proto').set\n  , same       = require('./$.same-value')\n  , SPECIES    = require('./$.wks')('species')\n  , speciesConstructor = require('./$.species-constructor')\n  , asap       = require('./$.microtask')\n  , PROMISE    = 'Promise'\n  , process    = global.process\n  , isNode     = classof(process) == 'process'\n  , P          = global[PROMISE]\n  , Wrapper;\n\nvar testResolve = function(sub){\n  var test = new P(function(){});\n  if(sub)test.constructor = Object;\n  return P.resolve(test) === test;\n};\n\nvar USE_NATIVE = function(){\n  var works = false;\n  function P2(x){\n    var self = new P(x);\n    setProto(self, P2.prototype);\n    return self;\n  }\n  try {\n    works = P && P.resolve && testResolve();\n    setProto(P2, P);\n    P2.prototype = $.create(P.prototype, {constructor: {value: P2}});\n    // actual Firefox has broken subclass support, test that\n    if(!(P2.resolve(5).then(function(){}) instanceof P2)){\n      works = false;\n    }\n    // actual V8 bug, https://code.google.com/p/v8/issues/detail?id=4162\n    if(works && require('./$.descriptors')){\n      var thenableThenGotten = false;\n      P.resolve($.setDesc({}, 'then', {\n        get: function(){ thenableThenGotten = true; }\n      }));\n      works = thenableThenGotten;\n    }\n  } catch(e){ works = false; }\n  return works;\n}();\n\n// helpers\nvar sameConstructor = function(a, b){\n  // library wrapper special case\n  if(LIBRARY && a === P && b === Wrapper)return true;\n  return same(a, b);\n};\nvar getConstructor = function(C){\n  var S = anObject(C)[SPECIES];\n  return S != undefined ? S : C;\n};\nvar isThenable = function(it){\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar PromiseCapability = function(C){\n  var resolve, reject;\n  this.promise = new C(function($$resolve, $$reject){\n    if(resolve !== undefined || reject !== undefined)throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject  = $$reject;\n  });\n  this.resolve = aFunction(resolve),\n  this.reject  = aFunction(reject)\n};\nvar perform = function(exec){\n  try {\n    exec();\n  } catch(e){\n    return {error: e};\n  }\n};\nvar notify = function(record, isReject){\n  if(record.n)return;\n  record.n = true;\n  var chain = record.c;\n  asap(function(){\n    var value = record.v\n      , ok    = record.s == 1\n      , i     = 0;\n    var run = function(reaction){\n      var handler = ok ? reaction.ok : reaction.fail\n        , resolve = reaction.resolve\n        , reject  = reaction.reject\n        , result, then;\n      try {\n        if(handler){\n          if(!ok)record.h = true;\n          result = handler === true ? value : handler(value);\n          if(result === reaction.promise){\n            reject(TypeError('Promise-chain cycle'));\n          } else if(then = isThenable(result)){\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch(e){\n        reject(e);\n      }\n    };\n    while(chain.length > i)run(chain[i++]); // variable length - can't use forEach\n    chain.length = 0;\n    record.n = false;\n    if(isReject)setTimeout(function(){\n      var promise = record.p\n        , handler, console;\n      if(isUnhandled(promise)){\n        if(isNode){\n          process.emit('unhandledRejection', value, promise);\n        } else if(handler = global.onunhandledrejection){\n          handler({promise: promise, reason: value});\n        } else if((console = global.console) && console.error){\n          console.error('Unhandled promise rejection', value);\n        }\n      } record.a = undefined;\n    }, 1);\n  });\n};\nvar isUnhandled = function(promise){\n  var record = promise._d\n    , chain  = record.a || record.c\n    , i      = 0\n    , reaction;\n  if(record.h)return false;\n  while(chain.length > i){\n    reaction = chain[i++];\n    if(reaction.fail || !isUnhandled(reaction.promise))return false;\n  } return true;\n};\nvar $reject = function(value){\n  var record = this;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  record.v = value;\n  record.s = 2;\n  record.a = record.c.slice();\n  notify(record, true);\n};\nvar $resolve = function(value){\n  var record = this\n    , then;\n  if(record.d)return;\n  record.d = true;\n  record = record.r || record; // unwrap\n  try {\n    if(record.p === value)throw TypeError(\"Promise can't be resolved itself\");\n    if(then = isThenable(value)){\n      asap(function(){\n        var wrapper = {r: record, d: false}; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch(e){\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      record.v = value;\n      record.s = 1;\n      notify(record, false);\n    }\n  } catch(e){\n    $reject.call({r: record, d: false}, e); // wrap\n  }\n};\n\n// constructor polyfill\nif(!USE_NATIVE){\n  // 25.4.3.1 Promise(executor)\n  P = function Promise(executor){\n    aFunction(executor);\n    var record = this._d = {\n      p: strictNew(this, P, PROMISE),         // <- promise\n      c: [],                                  // <- awaiting reactions\n      a: undefined,                           // <- checked in isUnhandled reactions\n      s: 0,                                   // <- state\n      d: false,                               // <- done\n      v: undefined,                           // <- value\n      h: false,                               // <- handled rejection\n      n: false                                // <- notify\n    };\n    try {\n      executor(ctx($resolve, record, 1), ctx($reject, record, 1));\n    } catch(err){\n      $reject.call(record, err);\n    }\n  };\n  require('./$.redefine-all')(P.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected){\n      var reaction = new PromiseCapability(speciesConstructor(this, P))\n        , promise  = reaction.promise\n        , record   = this._d;\n      reaction.ok   = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      record.c.push(reaction);\n      if(record.a)record.a.push(reaction);\n      if(record.s)notify(record, false);\n      return promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function(onRejected){\n      return this.then(undefined, onRejected);\n    }\n  });\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, {Promise: P});\nrequire('./$.set-to-string-tag')(P, PROMISE);\nrequire('./$.set-species')(PROMISE);\nWrapper = require('./$.core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r){\n    var capability = new PromiseCapability(this)\n      , $$reject   = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (!USE_NATIVE || testResolve(true)), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x){\n    // instanceof instead of internal slot check because we should fix it without replacement native Promise core\n    if(x instanceof P && sameConstructor(x.constructor, this))return x;\n    var capability = new PromiseCapability(this)\n      , $$resolve  = capability.resolve;\n    $$resolve(x);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./$.iter-detect')(function(iter){\n  P.all(iter)['catch'](function(){});\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , resolve    = capability.resolve\n      , reject     = capability.reject\n      , values     = [];\n    var abrupt = perform(function(){\n      forOf(iterable, false, values.push, values);\n      var remaining = values.length\n        , results   = Array(remaining);\n      if(remaining)$.each.call(values, function(promise, index){\n        var alreadyCalled = false;\n        C.resolve(promise).then(function(value){\n          if(alreadyCalled)return;\n          alreadyCalled = true;\n          results[index] = value;\n          --remaining || resolve(results);\n        }, reject);\n      });\n      else resolve(results);\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable){\n    var C          = getConstructor(this)\n      , capability = new PromiseCapability(C)\n      , reject     = capability.reject;\n    var abrupt = perform(function(){\n      forOf(iterable, false, function(promise){\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if(abrupt)reject(abrupt.error);\n    return capability.promise;\n  }\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.promise.js\n ** module id = 70\n ** module chunks = 0\n **/","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./$.cof')\n  , TAG = require('./$.wks')('toStringTag')\n  // ES3 wrong here\n  , ARG = cof(function(){ return arguments; }()) == 'Arguments';\n\nmodule.exports = function(it){\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = (O = Object(it))[TAG]) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.classof.js\n ** module id = 71\n ** module chunks = 0\n **/","module.exports = function(it, Constructor, name){\n  if(!(it instanceof Constructor))throw TypeError(name + \": use the 'new' operator!\");\n  return it;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.strict-new.js\n ** module id = 72\n ** module chunks = 0\n **/","var ctx         = require('./$.ctx')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , anObject    = require('./$.an-object')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\nmodule.exports = function(iterable, entries, fn, that){\n  var iterFn = getIterFn(iterable)\n    , f      = ctx(fn, that, entries ? 2 : 1)\n    , index  = 0\n    , length, step, iterator;\n  if(typeof iterFn != 'function')throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if(isArrayIter(iterFn))for(length = toLength(iterable.length); length > index; index++){\n    entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n  } else for(iterator = iterFn.call(iterable); !(step = iterator.next()).done; ){\n    call(iterator, f, step.value, entries);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.for-of.js\n ** module id = 73\n ** module chunks = 0\n **/","// call something on iterator step with safe closing on error\nvar anObject = require('./$.an-object');\nmodule.exports = function(iterator, fn, value, entries){\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch(e){\n    var ret = iterator['return'];\n    if(ret !== undefined)anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-call.js\n ** module id = 74\n ** module chunks = 0\n **/","// check on default Array iterator\nvar Iterators  = require('./$.iterators')\n  , ITERATOR   = require('./$.wks')('iterator')\n  , ArrayProto = Array.prototype;\n\nmodule.exports = function(it){\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.is-array-iter.js\n ** module id = 75\n ** module chunks = 0\n **/","// 7.1.15 ToLength\nvar toInteger = require('./$.to-integer')\n  , min       = Math.min;\nmodule.exports = function(it){\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.to-length.js\n ** module id = 76\n ** module chunks = 0\n **/","var classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').getIteratorMethod = function(it){\n  if(it != undefined)return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator-method.js\n ** module id = 77\n ** module chunks = 0\n **/","// 7.2.9 SameValue(x, y)\nmodule.exports = Object.is || function is(x, y){\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.same-value.js\n ** module id = 78\n ** module chunks = 0\n **/","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject  = require('./$.an-object')\n  , aFunction = require('./$.a-function')\n  , SPECIES   = require('./$.wks')('species');\nmodule.exports = function(O, D){\n  var C = anObject(O).constructor, S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.species-constructor.js\n ** module id = 79\n ** module chunks = 0\n **/","var global    = require('./$.global')\n  , macrotask = require('./$.task').set\n  , Observer  = global.MutationObserver || global.WebKitMutationObserver\n  , process   = global.process\n  , Promise   = global.Promise\n  , isNode    = require('./$.cof')(process) == 'process'\n  , head, last, notify;\n\nvar flush = function(){\n  var parent, domain, fn;\n  if(isNode && (parent = process.domain)){\n    process.domain = null;\n    parent.exit();\n  }\n  while(head){\n    domain = head.domain;\n    fn     = head.fn;\n    if(domain)domain.enter();\n    fn(); // <- currently we use it only for Promise - try / catch not required\n    if(domain)domain.exit();\n    head = head.next;\n  } last = undefined;\n  if(parent)parent.enter();\n};\n\n// Node.js\nif(isNode){\n  notify = function(){\n    process.nextTick(flush);\n  };\n// browsers with MutationObserver\n} else if(Observer){\n  var toggle = 1\n    , node   = document.createTextNode('');\n  new Observer(flush).observe(node, {characterData: true}); // eslint-disable-line no-new\n  notify = function(){\n    node.data = toggle = -toggle;\n  };\n// environments with maybe non-completely correct, but existent Promise\n} else if(Promise && Promise.resolve){\n  notify = function(){\n    Promise.resolve().then(flush);\n  };\n// for other environments - macrotask based on:\n// - setImmediate\n// - MessageChannel\n// - window.postMessag\n// - onreadystatechange\n// - setTimeout\n} else {\n  notify = function(){\n    // strange IE + webpack dev server bug - use .call(global)\n    macrotask.call(global, flush);\n  };\n}\n\nmodule.exports = function asap(fn){\n  var task = {fn: fn, next: undefined, domain: isNode && process.domain};\n  if(last)last.next = task;\n  if(!head){\n    head = task;\n    notify();\n  } last = task;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.microtask.js\n ** module id = 80\n ** module chunks = 0\n **/","var ctx                = require('./$.ctx')\n  , invoke             = require('./$.invoke')\n  , html               = require('./$.html')\n  , cel                = require('./$.dom-create')\n  , global             = require('./$.global')\n  , process            = global.process\n  , setTask            = global.setImmediate\n  , clearTask          = global.clearImmediate\n  , MessageChannel     = global.MessageChannel\n  , counter            = 0\n  , queue              = {}\n  , ONREADYSTATECHANGE = 'onreadystatechange'\n  , defer, channel, port;\nvar run = function(){\n  var id = +this;\n  if(queue.hasOwnProperty(id)){\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listner = function(event){\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif(!setTask || !clearTask){\n  setTask = function setImmediate(fn){\n    var args = [], i = 1;\n    while(arguments.length > i)args.push(arguments[i++]);\n    queue[++counter] = function(){\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id){\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if(require('./$.cof')(process) == 'process'){\n    defer = function(id){\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if(MessageChannel){\n    channel = new MessageChannel;\n    port    = channel.port2;\n    channel.port1.onmessage = listner;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if(global.addEventListener && typeof postMessage == 'function' && !global.importScripts){\n    defer = function(id){\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listner, false);\n  // IE8-\n  } else if(ONREADYSTATECHANGE in cel('script')){\n    defer = function(id){\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function(){\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function(id){\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set:   setTask,\n  clear: clearTask\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.task.js\n ** module id = 81\n ** module chunks = 0\n **/","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function(fn, args, that){\n  var un = that === undefined;\n  switch(args.length){\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return              fn.apply(that, args);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.invoke.js\n ** module id = 82\n ** module chunks = 0\n **/","module.exports = require('./$.global').document && document.documentElement;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.html.js\n ** module id = 83\n ** module chunks = 0\n **/","var isObject = require('./$.is-object')\n  , document = require('./$.global').document\n  // in old IE typeof document.createElement is 'object'\n  , is = isObject(document) && isObject(document.createElement);\nmodule.exports = function(it){\n  return is ? document.createElement(it) : {};\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.dom-create.js\n ** module id = 84\n ** module chunks = 0\n **/","var redefine = require('./$.redefine');\nmodule.exports = function(target, src){\n  for(var key in src)redefine(target, key, src[key]);\n  return target;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.redefine-all.js\n ** module id = 85\n ** module chunks = 0\n **/","'use strict';\nvar core        = require('./$.core')\n  , $           = require('./$')\n  , DESCRIPTORS = require('./$.descriptors')\n  , SPECIES     = require('./$.wks')('species');\n\nmodule.exports = function(KEY){\n  var C = core[KEY];\n  if(DESCRIPTORS && C && !C[SPECIES])$.setDesc(C, SPECIES, {\n    configurable: true,\n    get: function(){ return this; }\n  });\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.set-species.js\n ** module id = 86\n ** module chunks = 0\n **/","var ITERATOR     = require('./$.wks')('iterator')\n  , SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function(){ SAFE_CLOSING = true; };\n  Array.from(riter, function(){ throw 2; });\n} catch(e){ /* empty */ }\n\nmodule.exports = function(exec, skipClosing){\n  if(!skipClosing && !SAFE_CLOSING)return false;\n  var safe = false;\n  try {\n    var arr  = [7]\n      , iter = arr[ITERATOR]();\n    iter.next = function(){ safe = true; };\n    arr[ITERATOR] = function(){ return iter; };\n    exec(arr);\n  } catch(e){ /* empty */ }\n  return safe;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.iter-detect.js\n ** module id = 87\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 88\n ** module chunks = 0\n **/","/* global Strophe */\nimport spi from 'spi';\nimport utils from 'helpers/utils';\nimport PreferencesStore from 'stores/preferences_store';\nimport ConfigStore from 'stores/configuration_store';\nimport LogSanitizer from 'helpers/logger_sanitizer';\nimport * as Constants from 'core/common/constants';\n\nconst STROPHE = '[Strophe]';\nconst DEFAULT_REGEXP_STRING = '/^.*?$/';\nconst OLD_LOGGER_TYPE = 'old-logger';\n\n/*\n * NOTE: Do not use DAL.Cache for browser storage in the logger. We need the logger to be\n * able to log from earliest init. Can't hold logging until after DAL.Cache is configured\n */\nclass Logger {\n\n  constructor() {\n\n    window.HC_LOG = window.HC_LOG || this.storage.getItem('logging');\n    window.HC_LOG_VERBOSE = window.HC_LOG_VERBOSE || !!this.storage.getItem('verbose-logging');\n    window.HC_LOG_CALL_STACK = window.HC_LOG_CALL_STACK || !!this.storage.getItem('logging-call-stack');\n    window.HC_LOG_FORCE_COLORS = window.HC_LOG_FORCE_COLORS || !!this.storage.getItem('logging-force-colors');\n    window.HC_LOG_FORCE_EXPANDED = window.HC_LOG_FORCE_EXPANDED || !!this.storage.getItem('logging-force-expanded');\n\n    this.verbose_mode_enabled = window.HC_LOG_VERBOSE;\n\n    // Implement logging for Strophe when in verbose mode\n    Strophe.log = (level, message) => {\n      if (this.isVerbose() || this.isNewLogger()) {\n        switch(level) {\n\n          case Strophe.LogLevel.INFO:\n            this.info(STROPHE, message);\n            this.type('strophe').withFilter().info(message);\n            break;\n\n          case Strophe.LogLevel.WARN:\n            this.warn(STROPHE, message);\n            this.type('strophe').withFilter().warn(message);\n            break;\n\n          case Strophe.LogLevel.ERROR:\n          case Strophe.LogLevel.FATAL:\n            this.error(STROPHE, message);\n            this.type('strophe').withFilter().error(message);\n            break;\n\n          default:\n            this.debug(STROPHE, message);\n            this.type('strophe').withFilter().debug(message);\n        }\n      }\n    };\n\n    this.verbose_mode_reminder_logged = false;\n\n    this.colors = [\n      'maroon',\n      'olive',\n      'green',\n      'purple',\n      'teal',\n      'navy'\n    ];\n\n    this.levels = [\n      'error',\n      'warn',\n      'info',\n      'debug',\n      'log'\n    ];\n\n    this.resetLogger();\n  }\n\n  error(...args) {\n    args.unshift('error');\n    return this.doLog(...args);\n  }\n\n  warn(...args) {\n    args.unshift('warn');\n    return this.doLog(...args);\n  }\n\n  info(...args) {\n    args.unshift('info');\n    return this.doLog(...args);\n  }\n\n  debug(...args) {\n    args.unshift('debug');\n    return this.doLog(...args);\n  }\n\n  log(...args) {\n    args.unshift('log');\n    return this.doLog(...args);\n  }\n\n  logXML(elem, type) {\n    try {\n      if (!this.shouldLogXML()) {\n        return;\n      }\n\n      // <body> is always the base element, but we don't want it polluting all the logs\n      // Iterate through the child nodes and log them individually (usually there should be only one)\n      for (var i = 0; i < elem.childNodes.length; i++) {\n        let xml = this.sanitizeXML(elem.childNodes[i]);\n        let xmlString = utils.xml.toString(xml);\n        let logString = `[XML ${type}] ${xmlString}`;\n\n        if (logString.length > Constants.XMPP_LOG_MAX_CHARS) {\n          let truncatedChars = logString.length - Constants.XMPP_LOG_MAX_CHARS;\n          let truncatedString = logString.substring(0, Math.min(Constants.XMPP_LOG_MAX_CHARS, logString.length));\n          this.debug(`${truncatedString}... [truncated ${truncatedChars} chars]`);\n        } else {\n          this.debug(logString);\n        }\n      }\n    } catch (e) {\n      if ('console' in window) {\n        console.error(e.message);\n      }\n      spi.onLogMessage('[ERROR] ' + e.message);\n    }\n  }\n\n  type(type){\n    this._log_type = type;\n    return this;\n  }\n\n  desc(description){\n    this._log_description = description;\n    return this;\n  }\n\n  withCallStack(){\n    this._log_call_stack = true;\n    return this;\n  }\n\n  alwaysExpanded(){\n    this._log_always_expanded = true;\n    return this;\n  }\n\n  withFilter(){\n    this._log_with_filter = true;\n    return this;\n  }\n\n  isNewLogger(){\n    return window.HC_LOG && Number(window.HC_LOG) !== 1 && `${window.HC_LOG}`.length;\n  }\n\n  doLog(...args) {\n\n    let currentTime = +new Date;\n    let diff = currentTime - (this.prevTime || currentTime);\n    this.prevTime = currentTime;\n\n    this.updateVerboseMode(window.HC_LOG_VERBOSE);\n\n    try {\n      var level = args.shift(),\n          verboseArgs = _.map(_.filter(args, 'verbose'), 'verbose');\n\n      if (verboseArgs.length > 0) {\n        // if verbose objects found strip them out of the args list\n        args = _.reject(args, 'verbose');\n        if (this.isVerbose()) {\n          // restore objects without {verbose: object} container\n          verboseArgs.forEach((val) => {\n            args.push(val);\n          });\n        } else {\n          // leave a message that the verbose object was removed\n          args.push(\"[verbose]\");\n          if (!this.verbose_mode_reminder_logged) {\n            // leave friendly to inform user that verbose mode is off\n            this.verbose_mode_reminder_logged = true;\n            this.info('Enable Verbose Mode for complete logs - window.HC_LOG_VERBOSE');\n          }\n        }\n      }\n\n      if (!window.HC_LOG) {\n        this.storage.removeItem('logging');\n      }\n\n      if (!window.HC_LOG_CALL_STACK){\n        this.storage.removeItem('logging-call-stack');\n      }\n\n      if (!window.HC_LOG_FORCE_COLORS){\n        this.storage.removeItem('logging-force-colors');\n      }\n\n      if (!window.HC_LOG_FORCE_EXPANDED){\n        this.storage.removeItem('logging-force-expanded');\n      }\n\n      if ('console' in window && window.HC_LOG) {\n\n        let matchFilter;\n\n        this.storage.setItem('logging', window.HC_LOG);\n\n        if (window.HC_LOG_CALL_STACK) {\n          this.storage.setItem('logging-call-stack', true);\n        }\n\n        if (window.HC_LOG_FORCE_COLORS) {\n          this.storage.setItem('logging-force-colors', true);\n        }\n\n        if (window.HC_LOG_FORCE_EXPANDED){\n          this.storage.setItem('logging-force-expanded', true);\n        }\n\n        // Todo: remove me when all logs will use new logger system.\n        if (!this._log_type) {\n          this._log_type = OLD_LOGGER_TYPE;\n          this._log_description = `Migrate me to new logger system or skip with HC_LOG=\"*,-*${OLD_LOGGER_TYPE}\"`;\n          this._log_call_stack = true;\n        }\n\n        if (this.isNewLogger() && this._log_type){\n\n            // add additional prefix for important level types\n            if (!(level === 'log' || level === 'debug')){\n              this._log_type = `${level}:${this._log_type}`;\n            }\n\n            if (this._log_types !== window.HC_LOG) {\n              this._log_types = window.HC_LOG;\n              let newFilters = `${window.HC_LOG}`.split(',').map((filter) => filter.trim());\n              let toRegExp = (filter) => new RegExp(`^${filter.replace(/\\*/g, '.*?')}$`);\n              this._ignoreFilters = newFilters.filter((filter) => filter.indexOf('-') === 0)\n                                              .map((filter) => filter.slice(1))\n                                              .map(toRegExp);\n              this._filters = newFilters.filter((filter) => filter.indexOf('-') !== 0)\n                                        .map(toRegExp);\n            }\n\n            let ignored = false;\n\n            this._ignoreFilters.forEach((filter) => {\n              if (this._log_type.search(filter) !== -1) {\n                ignored = true;\n              }\n            });\n\n            if (!ignored){\n              this._filters.forEach((filter) => {\n                if (!this._log_with_filter ||\n                     this._log_with_filter && filter.toString() !== DEFAULT_REGEXP_STRING ||\n                     // Todo: remove me when all logs will use new logger system.\n                     this._log_type === OLD_LOGGER_TYPE){\n                  if (this._log_type.search(filter) !== -1) {\n                    matchFilter = true;\n                  }\n                }\n              });\n            }\n        }\n\n        if (matchFilter && this._log_type) {\n\n          args = args.map((arg) => {\n            if (_.isFunction(arg)) {\n              return \"[function call]\";\n            } else if (_.isPlainObject(arg) || _.isArray(arg)){\n              try {\n                return JSON.parse(JSON.stringify(arg));\n              } catch (e){\n                 console.error(e);\n              }\n            }\n            return arg;\n          });\n\n          this.evenLog = !this.evenLog;\n          this.colorIndex = this.colorIndex || 0;\n\n          let groupArgs = [];\n\n          if (utils.browser.is.chrome() || window.HC_LOG_FORCE_COLORS) {\n            groupArgs.push(\n              `%c${this._log_type} %c+${diff}ms %c${this._log_description}`,\n              `color: ${(this.evenLog) ? 'gray' : 'dimgray'}`,\n              `color: ${this.colors[this.colorIndex]}`,\n              `color: blue`\n            );\n          } else {\n            groupArgs.push(\n              `${this._log_type} +${diff}ms ${this._log_description}`\n            );\n          }\n\n          if (this.colorIndex >= this.colors.length - 1){\n            this.colorIndex = 0;\n          } else {\n            this.colorIndex++;\n          }\n\n          let isSingleObjectArg = args.length === 1 &&\n                                  _.isObject(args[0]) &&\n                                  !_.isEmpty(args[0]) &&\n                                  _.values(args[0]).every((value) => !_.isObject(value));\n\n          let nonObjectArgs = args.every((value) => !_.isObject(value));\n\n          // Todo: remove first line when all logs will use new logger system.\n          let isCollapsed = this._log_type !== OLD_LOGGER_TYPE &&\n                             (!window.HC_LOG_FORCE_EXPANDED &&\n                             !this._log_always_expanded &&\n                             !isSingleObjectArg &&\n                             !nonObjectArgs &&\n                             (args.some(_.isObject) || args.every(_.isEmpty))) &&\n                             (level === 'log' || level === 'debug');\n\n          let group = isCollapsed ? console.groupCollapsed : console.group;\n\n          group.apply(console, groupArgs);\n          console[level].apply(console, args);\n          if (window.HC_LOG_CALL_STACK || this._log_call_stack){\n            if (console.trace){\n              console.trace();\n            } else {\n              console.log((new Error).stack);\n            }\n          }\n          console.groupEnd();\n\n        // Todo: remove part of expression when all logs will use new logger system.\n        } else if ( Number(window.HC_LOG) === 1 && (!this._log_type || this._log_type === OLD_LOGGER_TYPE) ) {\n          console[level].apply(console, args);\n        }\n      }\n\n      if (this.shouldLogToFile() && (!this._log_type || this._log_type === OLD_LOGGER_TYPE)) {\n        var message = this.formatLogMessage(level, args);\n        spi.onLogMessage(message);\n      }\n    } catch (e) {\n      if ('console' in window) {\n        console.error(e.message);\n      }\n      spi.onLogMessage('[ERROR] ' + e.message);\n    }\n\n    this.resetLogger();\n  }\n\n  resetLogger(){\n    this._log_type = null;\n    this._log_description = \"\";\n    this._log_call_stack = false;\n    this._log_with_filter = false;\n    this._log_always_expanded = false;\n  }\n\n  formatLogMessage(level, args) {\n    var curlevel = `[${level.toUpperCase()}]`,\n        formattedArgs = [];\n\n    try {\n      args.forEach((el) => {\n        el = this.sanitize(el);\n        if (_.isObject(el)) {\n          el = JSON.stringify(el);\n        }\n        formattedArgs.push(el);\n      });\n    } catch (e) {\n      return \"Value cannot be logged.\";\n    }\n    return `${curlevel} ${formattedArgs.join(\" \")}`;\n  }\n\n  updateVerboseMode(bool) {\n    bool = !!bool;\n    if (bool) {\n      this.storage.setItem('verbose-logging', true);\n    } else {\n      this.storage.removeItem('verbose-logging');\n    }\n    if (this.isVerbose() !== bool){\n      this.verbose_mode_enabled = bool;\n    }\n  }\n\n  isVerbose() {\n    return this.verbose_mode_enabled;\n  }\n\n  shouldLogXML() {\n    return this.shouldLogToFile() || this.isVerbose();\n  }\n\n  shouldLogToFile() {\n    return PreferencesStore.shouldLog() || ConfigStore.shouldLogToFile();\n  }\n\n  sanitize(val) {\n    return LogSanitizer.sanitize(val);\n  }\n\n  sanitizeXML(el) {\n    return LogSanitizer.sanitizeXML(el);\n  }\n\n  get storage(){\n    if (!this.isNativeClient()){\n      return window.sessionStorage;\n    }\n    return window.localStorage;\n  }\n\n  isNativeClient(){\n    return utils.clientSubType.isNative(ConfigStore.get(\"client_subtype\"));\n  }\n\n}\n\nmodule.exports = new Logger();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/logger.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/json/stringify\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/json/stringify.js\n ** module id = 90\n ** module chunks = 0\n **/","var core = require('../../modules/$.core');\nmodule.exports = function stringify(it){ // eslint-disable-line no-unused-vars\n  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/json/stringify.js\n ** module id = 91\n ** module chunks = 0\n **/","module.exports = require(\"spi\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"spi\"\n ** module id = 92\n ** module chunks = 0\n **/","import moment from 'moment';\nimport linkify from './linkify';\nimport emoticons from './emoticons';\nimport file_utils from './file_utils';\nimport jid_utils from './jid_utils';\nimport room_utils from './room_utils';\nimport user_utils from './user_utils';\nimport video_utils from './video_utils';\nimport browser_utils, { platform, clientSubType } from './browser_utils';\nimport version_info from '../version-info.json';\nimport AppConfig from 'config/app_config';\nimport URI from 'helpers/uri';\n\nconst CONNECT_API_VERSION = version_info.connect_api_version;\nvar randomBetween = function (min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n/**\n * utils\n * @module helpers/utils\n */\nvar utils = {\n\n  TRUNCATE_CHARS: 800,\n  TRUNCATE_LINES: 6,\n\n  emoticons: emoticons.init(),\n  file: file_utils,\n  jid: jid_utils,\n  room: room_utils,\n  user: user_utils,\n  browser: browser_utils,\n  video: video_utils,\n  platform: platform,\n  clientSubType: clientSubType,\n\n  roster_names: {},  // roster names keyed by mention name\n\n  now() {\n    return new Date().getTime();\n  },\n\n  decorrelatedJitter: function(cap, base, sleep, backoff_factor) {\n    return Math.min(cap, randomBetween(base, sleep * backoff_factor));\n  },\n\n  escapeRegEx: function(str) {\n    return str.replace(/[-\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n  },\n\n  getWindowLocation: function () {\n    return window.location;\n  },\n\n  url: {\n    clearWebCookies(webServer) {\n      if (_.isString(webServer)) {\n        return `https://${webServer}/users/clear_cookies`;\n      }\n    },\n\n    revokeOauth2Token(apiHost, token) {\n      if (_.isString(apiHost) && token) {\n        return `https://${apiHost}/v2/oauth/token/${token}`;\n      }\n    },\n\n    featureFlagsAPI(baseUrl) {\n      if (_.isString(baseUrl)) {\n        return `${baseUrl}/api/features`;\n      }\n    },\n\n    networkCheckAPI(apiHost) {\n      if (_.isString(apiHost)) {\n        return `https://${apiHost}/v2/health-check`;\n      }\n    }\n  },\n\n  /**\n   * merges two objects then removes properties with leading underscores\n   * if the same property without an underscore already exists\n   * @param {object} data\n   * @param {object} data\n   */\n  mergeAndSquash: function (obj1, obj2) {\n    var newObj = _.merge(obj1, obj2);\n    if ('jid' in newObj) {\n      newObj.key = newObj.jid.split('@')[0];\n    }\n    _.forEach(newObj, function (v, k) {\n      if (/^_/.test(k) && newObj.hasOwnProperty(k.substring(1))) {\n        delete newObj[k];\n      }\n    });\n    return newObj;\n  },\n\n  camelToSnake: function(str) {\n    return str.replace(/\\W+/g, '_').replace(/([a-z\\d])([A-Z])/g, '$1_$2').toLowerCase();\n  },\n\n  /**\n   * Coerce a boolean from an unknown type value\n   * @param {*} val\n   * @param {*} [defaultValue=false]\n   * @returns {boolean}\n   */\n  coerceBoolean (val, defaultValue = false) {\n    switch (val) {\n      case true:\n      case 'true':\n      case 'True':\n      case 1:\n      case '1':\n        return true;\n      case false:\n      case 'false':\n      case 'False':\n      case 0:\n      case '0':\n        return false;\n      default:\n        return defaultValue;\n    }\n  },\n\n  generateMID: function () {\n    var d = new Date().getTime();\n    var id = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      var r = (d + Math.random() * 16) % 16 | 0;\n      d = Math.floor(d / 16);\n      return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n    });\n    return id;\n  },\n\n  validateMID: function (mid) {\n    var re = /^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}$/i;\n    return re.test(mid);\n  },\n\n  getAttachToMid: function(msg) {\n    return _.get(msg, 'attach-to.id');\n  },\n\n  isAttachedCardsCollapsed(msg, defaultVal = false) {\n    return _.get(msg, 'is_attached_cards_collapsed', defaultVal);\n  },\n\n  getRealMid(mid){\n    return mid.split('-link')[0];\n  },\n\n  /**\n   *\n   * @param {String|Number|undefined} time\n   * @param {Boolean} is24hr\n   * @returns {String} formatted time in user timezone\n   */\n  format_time: function (time, is24hr) {\n    var format = (is24hr) ? \"HH:mm\" : \"h:mm A\";\n\n    if (!time) {\n      return this.getCurrentTime().format(format);\n    } else if (/^-?\\d*\\.?\\d*$/.test(time)) {\n      time = moment.unix(time);\n    } else {\n      time = moment(time);\n    }\n\n    if (!this.getCurrentTime().isSame(time, 'day')) {\n      format = 'MMM-D ' + format;\n    }\n\n    return time.format(format);\n  },\n\n  /**\n   * Timestamps are in seconds with microsecond precision.\n   * Moment doesn't make this easy so working around it.\n   * @param {String} date - an ISO-8691 formatted date string. Example: '2015-10-15T21:28:13.122119+00:00'\n   * @returns {Number} timestamp formatted with microsecond precision. Example: 1445022940.211578\n   */\n  getTimestampFromIsoDate: function(date) {\n    var time = moment(date),\n        sec = date ? time.unix() : 0,\n        micro = date ? date.split('.')[1].split(/\\+\\d\\d|Z/)[0] : 0;\n\n    return Number(sec + '.' + micro);\n  },\n\n  getCurrentTime: function() {\n    return moment();\n  },\n\n  getDateDiff: function(first_date, second_date, unit) {\n    var date1 = moment(first_date),\n        date2 = moment(second_date);\n\n    return date2.diff(date1, unit);\n  },\n\n  format_time_for_history: function (ts) {\n    var time = moment.utc(ts, 'X'),\n        iso = time.format('YYYY-MM-DDTHH:mm:ss'),\n        ms = time.format('SSSSSS');\n\n    return `${iso}Z ${ms}`;\n  },\n\n  format_time_for_separator: function (time) {\n    return moment.unix(time).format(\"dddd MMMM D, YYYY\");\n  },\n\n  getMoment: function (time) {\n    var m = time ? moment(time) : moment();\n    return parseInt(m.format('x'), 10) / 1000;\n  },\n\n  toArray: function (obj) {\n    if (_.isArray(obj)) {\n      return obj;\n    }\n    return [obj];\n  },\n\n  escape: function (str) {\n    if (!str) {\n      return str;\n    }\n\n    str = str.replace(/&/g, '&amp;');\n    str = str.replace(/</g, '&lt;');\n    str = str.replace(/>/g, '&gt;');\n\n    return str;\n  },\n\n  get_roster_name: function (mention_name) {\n    let name = \"\";\n    if (!_.isEmpty(utils.roster_names)) {\n      let str = ` ${Object.keys(utils.roster_names).join(' ')} `;\n      let regexp = new RegExp(`\\\\s${mention_name}\\\\s`, 'i');\n      let match = regexp.exec(str);\n      if (match){\n        name = utils.roster_names[match[0].trim()];\n      }\n    }\n    return name;\n  },\n\n  formatMessageBody: function(message) { //This gets extended by the message processor\n    return message;\n  },\n\n  replaceEmoteMessage: function(messageBody, senderName) {\n    return messageBody.replace(AppConfig.emote_regex, senderName + ' ');\n  },\n\n  escapeAndLinkify: function(str, args) {\n\n    if (!str){\n      return str;\n    }\n\n    if (typeof str !== 'string' ) {\n      str = str.toString();\n    }\n    args = _.defaults(args || {}, {\n      name_tag_regex: null,\n      mention_regex: null,\n      escape_whitespace: false,\n      matches: null,\n      do_escape: true,\n      do_linkify: true,\n      do_emoticons: true,\n      do_word_breaks: true,\n      do_mentions: true,\n      do_hex_colors: true\n    });\n    var name_regex = _.result(args, \"name_tag_regex\");\n    var mention_regex = _.result(args, \"mention_regex\");\n    var guest_regex = _.result(args, \"guest_regex\");\n    var escape_whitespace = _.result(args, \"escape_whitespace\");\n    var matches = _.result(args, \"matches\");\n    var do_escape = _.result(args, \"do_escape\");\n    var do_linkify = _.result(args, \"do_linkify\");\n    var do_emoticons = _.result(args, \"do_emoticons\");\n    var do_word_breaks = _.result(args, \"do_word_breaks\");\n    var do_mentions = _.result(args, \"do_mentions\");\n    var do_hex_colors = _.result(args, \"do_hex_colors\");\n\n    var LINE_SEPARATOR = '\\n';\n    var TOKEN_SEPARATOR = ' ';\n\n    str = str.split(LINE_SEPARATOR).map((line) => {\n        return line.split(TOKEN_SEPARATOR).map((token) => {\n          if (do_escape) {\n            token = this.escape(token);\n          }\n\n          var linkified = false;\n          if (do_linkify) {\n            var token_matches = [];\n            token = linkify.linkify(token, token_matches, {\n              truncate_length: 100,\n              no_referrer: true,\n              add_wbrs: do_word_breaks\n            });\n            linkified = !_.isEmpty(token_matches);\n            // a nice little side-effect here with matches is that it acts as an accumulator\n            matches = _.union(matches, token_matches);\n          }\n\n          if (do_hex_colors) {\n            token = token.replace(/(?:^)(#[\\da-fA-F]{6})\\b/gm,\n              \"$1 <span class='hexPreview' style='background-color: $1'>&nbsp;</span>\");\n          }\n\n          // Add check for emoticonification\n          if (!linkified && do_emoticons) {\n            token = emoticons.render(token);\n          }\n\n          if (!linkified && do_mentions) {\n            let name_matches,\n              mention_matches,\n              guest_matches;\n\n            if (name_regex) {\n              name_matches = token.match(name_regex);\n              if (name_matches && name_matches.length) {\n                let mentionKey = name_matches[0].substr(1);\n                let userName = _.escape(utils.get_roster_name(mentionKey));\n                let content = `<span class='hc-mention-user hc-mention-me' aria-label='${userName}'>@$1</span>`;\n                token = token.replace(name_regex, content);\n              }\n            }\n            if (mention_regex) {\n              mention_matches = token.match(mention_regex);\n              if (mention_matches && mention_matches[0]) {\n                let mentionKey = mention_matches[0].substr(1);\n                let userName = _.escape(utils.get_roster_name(mentionKey));\n                let content = `<span class='hc-mention-user'><a onClick='HC.Actions.AppActions.openChatByMentionName(this)' aria-label='${userName}' data-mention-name='$1'>@$1</a></span>`;\n                token = token.replace(mention_regex, content);\n              }\n            }\n            if (guest_regex) {\n              guest_matches = token.match(guest_regex);\n              if (guest_matches && guest_matches[0] && !name_matches && !mention_matches) {\n                let guestKey = guest_matches[0].substr(1);\n                let guestName = _.escape(utils.get_roster_name(guestKey));\n                let guest_content = `<span class='hc-mention-user'><a title='${guestName}' data-mention-name='$1'>@$1</a></span>`;\n                token = token.replace(guest_regex, guest_content);\n              }\n            }\n          }\n\n          return token;\n\n        }).join(TOKEN_SEPARATOR);\n    }).join(LINE_SEPARATOR);\n\n    // Add br's AFTER linkifying - doing it before could result in bad linkify\n    if (escape_whitespace) {\n      str = str.replace(/\\r\\n/g, '\\n').replace(/[\\r\\n\\u2028]/g, '<br />');\n    }\n\n    if (matches && matches.length === 0 && do_word_breaks && !(/[<>]/.test(str))) {\n      // Break at commas first (for JSON)\n      str = str.replace(/(,)/g, '$1<wbr>');\n\n      // Also break if we have a string of 70 characters w/o spaces (and no wbrs)\n      str = str.replace(/([^<>\\s&;]{70})/g, '$1<wbr>');\n    }\n\n    if (escape_whitespace) {\n      if (str.indexOf('  ') !== -1) {\n        str = str.replace(/ {2}/g, '&ensp;&ensp;');\n      }\n      if (str.indexOf('\\t') !== -1) {\n        str = str.replace(/\\t/g, '&ensp;&ensp;');\n      }\n    }\n\n    return str;\n  },\n\n  getNumberOfLines: function(messageBody) {\n    let matches = messageBody.match(/<br\\s*\\/?>/);\n    if (!matches || matches.length === 0) {\n      matches = messageBody.match(/[\\n\\r\\u2028]+.+/g);\n    }\n    return (matches ? matches.length + 1 : 1);\n  },\n\n  messageShouldBeTruncated: function(messageBody) {\n    return utils.getNumberOfLines(messageBody) >= utils.TRUNCATE_LINES || messageBody.length >= utils.TRUNCATE_CHARS;\n  },\n\n  fetch: function (val, dflt) {\n    return val || dflt;\n  },\n\n  formatNumber: function(num) {\n    if (typeof num !== 'string' && num.toString) {\n      num = num.toString();\n    }\n    return num.replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\") || num;\n  },\n\n  formatMultilineBlock: function (text) {\n    var matches = text.match(/\\n.+/gm);\n    if (!matches) {\n      return text;\n    }\n\n    // Add one to numlines because the last line won't have a \\n on it\n    var numLines = matches.length + 1;\n    if (numLines > 1) {\n      matches = text.match(/^( {2}|\\t)/gm);\n      // remove leading whitespace common to all lines\n      while (matches && matches.length === (numLines)) {\n        text = text.replace(/^( {2}|\\t)/gm, '');\n        matches = text.match(/^( {2}|\\t)/gm);\n      }\n    }\n    return text;\n  },\n\n  isFormattedMessage(message){\n    return message.format === 'monospace' ||\n           message.format === 'code' ||\n           message.format === 'quotation';\n  },\n\n  isHistoryMessage: function(message) {\n    return typeof message.delay !== 'undefined' && !message.id;\n  },\n\n  getSenderFromMeta: function (type) {\n    var sender;\n\n    switch (type) {\n      case 'video':\n        sender = 'Video';\n        break;\n      case 'twitter_status':\n      case 'twitter_user':\n        sender = 'Twitter';\n        break;\n      case 'link':\n        sender = 'Link';\n        break;\n      default:\n        sender = 'HipChat';\n        break;\n    }\n\n    return sender;\n  },\n\n  getCaretPosition: function (input){\n    if ('selectionStart' in input) {\n      return input.selectionStart;\n    } else if (document.selection) {\n      // IE\n      input.focus();\n      var sel = document.selection.createRange();\n      var selLen = document.selection.createRange().text.length;\n      sel.moveStart('character', -input.value.length);\n      return sel.text.length - selLen;\n    }\n  },\n\n  getEndSelection: function (input) {\n      return input.selectionEnd;\n  },\n\n  setCaretPosition: function(input, posn){\n    try {\n      if (input.createTextRange) {\n        var range = input.createTextRange();\n        range.move('character', posn);\n        range.select();\n      }\n      else {\n        if (!_.isUndefined(input.selectionStart)) {\n          input.focus();\n          input.setSelectionRange(posn, posn);\n          input.focus();\n        } else {\n          input.focus();\n        }\n      }\n    } catch (e) {/*ignored*/}\n  },\n\n  // Mimicks webkit's scrollIntoViewIfNeeded for other browsers\n  // https://gist.github.com/hsablonniere/2581101\n  scrollIntoViewIfNeeded: function(node, parent, centerIfNeeded) {\n    centerIfNeeded = arguments.length === 0 ? true : !!centerIfNeeded;\n\n    if (!node){\n      return;\n    }\n\n    if ('scrollIntoViewIfNeeded' in node) {\n      node.scrollIntoViewIfNeeded(centerIfNeeded);\n      return;\n    }\n\n    var parentComputedStyle = window.getComputedStyle(parent, null),\n      parentBorderTopWidth = parseInt(parentComputedStyle.getPropertyValue('border-top-width'), 10) || 0,\n      parentBorderLeftWidth = parseInt(parentComputedStyle.getPropertyValue('border-left-width'), 10) || 0,\n      overTop = node.offsetTop - parent.offsetTop < parent.scrollTop,\n      overBottom = (node.offsetTop - parent.offsetTop + node.clientHeight - parentBorderTopWidth) > (parent.scrollTop + parent.clientHeight),\n      overLeft = node.offsetLeft - parent.offsetLeft < parent.scrollLeft,\n      overRight = (node.offsetLeft - parent.offsetLeft + node.clientWidth - parentBorderLeftWidth) > (parent.scrollLeft + parent.clientWidth),\n      alignWithTop = overTop && !overBottom;\n\n    if ((overTop || overBottom) && centerIfNeeded) {\n      parent.scrollTop = node.offsetTop - parent.offsetTop - parent.clientHeight / 2 - parentBorderTopWidth + node.clientHeight / 2;\n    }\n\n    if ((overLeft || overRight) && centerIfNeeded) {\n      parent.scrollLeft = node.offsetLeft - parent.offsetLeft - parent.clientWidth / 2 - parentBorderLeftWidth + node.clientWidth / 2;\n    }\n\n    if ((overTop || overBottom || overLeft || overRight) && !centerIfNeeded) {\n      node.scrollIntoView(alignWithTop);\n    }\n  },\n\n  createSafePredicate(predicate, context) {\n    return function () {\n      try {\n        return predicate.apply(context, arguments);\n      } catch (e) {\n        return true;\n      }\n    };\n  },\n\n  appendQueryParameter(url, name, value) {\n    if (_.startsWith(url, 'data:')) {\n      return url;\n    }\n    let uri = URI.parse(url);\n    uri.setParameterValues(name, value);\n    return uri.toString();\n  },\n\n  setHashFragment(url, value) {\n    if (_.startsWith(url, 'data:')) {\n      return url;\n    }\n    let uri = URI.parse(url);\n    uri.setFragment(value);\n    return uri.toString();\n  },\n\n  addConnectApiVersionToUrl(url) {\n    return this.appendQueryParameter(url, 'connect_client_api_version', CONNECT_API_VERSION);\n  },\n\n  strings: {\n    ellipsis: function (content, max_length) {\n      var ellipsis = \"...\",\n          new_text;\n\n      if (_.isString(content)) {\n        content = content.trim();\n        if ((content.length > max_length)) {\n          new_text = content.substring(0, max_length - ellipsis.length);\n          new_text = new_text.trim();\n          new_text = new_text.concat(ellipsis);\n        } else {\n          new_text = content;\n        }\n      }\n      return new_text || \"\";\n    },\n\n    splitUnit: function(unit) {\n      var match = unit.match(\"(^[0-9\\.]+)(.*)$\");\n      return match ? {\n        num: Number(match[1]),\n        unit: match[2]\n      } : null;\n    },\n\n    stripHiddenCharacters: function(str) {\n      if (typeof str !== 'string') {\n        return str;\n      }\n      return str.replace(/[\\u0000-\\u0008\\u000b\\u000c\\u000e-\\u001f\\ud800-\\udfff\\ufffe-\\uffff]/gu, '');\n    }\n  },\n\n  roster: {\n    format_for_select2: function (participants, roster) {\n      var roster_jids = _.keys(roster),\n          invite_user_jids = _.difference(roster_jids, participants),\n          sorted_roster;\n\n      sorted_roster = _.sortBy(_.map(invite_user_jids, function (user_jid) {\n          return roster[user_jid];\n        }), function (person) {\n        return person.name;\n      });\n\n      return _.map(sorted_roster, function (person) {\n        return {\n          id: person.jid,\n          text: person.name\n        };\n      });\n    },\n    get_non_guest_users(users) {\n      return _.transform(users, (acc, value, key) => {\n        if (!value.is_guest) {\n          acc[key] = value;\n        }\n        return acc;\n      });\n    }\n  },\n\n  highlight_matches: (text, matches) => {\n    var escaped_text = _.escape(text);\n\n    if (_.isString(matches)) {\n      matches = _.escape(matches);\n      return escaped_text.replace(matches, `<strong>${matches}</strong>`);\n    }\n\n    let idx = 0;\n\n    return _.reduce(matches, function (markup, match) {\n      match = _.escape(match);\n      let match_index = escaped_text.indexOf(match, idx),\n          text_between_matches = escaped_text.slice(idx, match_index);\n      idx = match_index + match.length;\n      return markup.concat(`${text_between_matches}<strong>${match}</strong>`);\n    }, '').concat(escaped_text.slice(idx));\n  },\n\n  promise: {\n\n    defer: function () {\n      var result = {};\n      result.promise = new Promise(function (resolve, reject) {\n        result.resolve = resolve;\n        result.reject = reject;\n      });\n      return result;\n    }\n  },\n\n  alphaNumeric: function (length) {\n    var alphanum = \"abcdefghijklmnopqrstuvwxyz0123456789\", hash = '';\n    _.times(length, () => {hash += alphanum.charAt(Math.floor(Math.random() * alphanum.length));});\n    return hash;\n  },\n\n  timings: {\n    getPerfTiming: function () {\n\n      var perfTimingKeys = [\n        //\"navigationStart\",\n        \"unloadEventStart\",\n        \"unloadEventEnd\",\n        \"redirectStart\",\n        \"redirectEnd\",\n        \"fetchStart\",\n        \"domainLookupStart\",\n        \"domainLookupEnd\",\n        \"connectStart\",\n        \"connectEnd\",\n        \"secureConnectionStart\",\n        \"requestStart\",\n        \"responseStart\",\n        \"responseEnd\",\n        \"domLoading\",\n        \"domInteractive\",\n        \"domContentLoadedEventStart\",\n        \"domContentLoadedEventEnd\",\n        \"domComplete\",\n        \"loadEventStart\",\n        \"loadEventEnd\"\n      ];\n\n      if (window.performance && window.performance.timing &&\n        typeof window.performance.timing.navigationStart !== \"undefined\") {\n        var metrics = {};\n        perfTimingKeys.forEach(function (property) {\n          var value = window.performance.timing[property] - window.performance.timing['navigationStart'];\n          if (value > 0) {\n            metrics[property] = value;\n          }\n        });\n        return metrics;\n      }\n      return {};\n    },\n\n    now: function() {\n      if (window.performance) {\n        return window.performance.now();\n      }\n      return Date.now();\n    }\n  },\n\n  keyCode: {\n    LeftArrow: 37,\n    UpArrow: 38,\n    RightArrow: 39,\n    DownArrow: 40,\n    Home: 36,\n    End: 35,\n    Enter: 13,\n    Esc: 27,\n    Tab: 9,\n    PageUp: 33,\n    PageDown: 34,\n    Delete: 46,\n    Backspace: 8,\n    Space: 32,\n    isSelected(evt) {\n      return evt.shiftKey && (evt.keyCode === this.LeftArrow || evt.keyCode === this.RightArrow);\n    },\n    isModified(evt) {\n      return evt.shiftKey || evt.ctrlKey || evt.altKey || evt.metaKey;\n    }\n  },\n\n  /**\n   * Converts to valid html string\n   * @param {string} html Html string. For example: <a href='http://example.com'>which never ends!\n   * @returns {string} Valid html string For example: <a href=\"http://example.com\">which never ends!</a>\n   */\n  getFixedHtml: (html) => {\n    var el = document.createElement('div');\n    el.innerHTML = html;\n    return el.innerHTML;\n  },\n\n  urls: {\n    signOut: function () {\n      return `/home?src=chat_exit`;\n    },\n\n    guestSignOut: function (key) {\n      if (key) {\n        return `/g${key}?src=chat_exit`;\n      }\n    }\n  },\n\n  request: {\n    getXHR() {\n      return new XMLHttpRequest();\n    },\n\n    simplePost(url, cb = _.noop, xhr = this.getXHR()) {\n      if (_.isString(url) && xhr) {\n        xhr.open(\"POST\", url, true);\n        xhr.onreadystatechange = function () {\n          if (xhr.readyState === 4) {\n            cb(xhr.responseText);\n          }\n        };\n        xhr.send();\n      }\n    }\n  },\n\n  image: {\n\n    load(src, loading_timeout) {\n\n      return new Promise((resolve, reject) => {\n\n        let img = new Image(),\n            timeout = null,\n            cleanup = () => {\n              if (timeout) {\n                clearTimeout(timeout);\n              }\n              img.onload = img.onerror = null;\n            };\n\n            img.onload = () => {\n              cleanup();\n              resolve(img);\n            };\n\n            img.onerror = () => {\n              cleanup();\n              reject();\n            };\n\n            timeout = setTimeout(() => {\n              cleanup();\n              reject();\n            }, loading_timeout);\n\n            img.src = src;\n      });\n    },\n\n    /**\n     * Promise wrapper for changing the source of image\n     * @param image\n     * @param src\n     * @param timeout\n     * @returns {Promise}\n     */\n    changeSrc(image, src, timeout = 10000) {\n      return new Promise((resolve, reject) => {\n        let timeoutId = setTimeout(() => {\n          image.onload = image.onerror = null;\n          reject();\n        }, timeout);\n\n        image.onload = () => {\n          image._isLoaded = true;\n          clearTimeout(timeoutId);\n          resolve(image);\n        };\n        image.onerror = (...args) => {\n          clearTimeout(timeoutId);\n          reject(...args);\n        };\n\n        image.src = src;\n      });\n    },\n\n    /**\n     * Resize image to appropriate sizes\n     * @param <Object> imageObjectURL - object URL for image\n     * @param <Integer> maxWidth\n     * @param <Integer> maxHeight\n     */\n    resizeImage(imageObjectURL, maxWidth = 150, maxHeight = 100) {\n      return new Promise((resolve, reject) => {\n        let canvas = document.createElement('canvas');\n        let ratio;\n\n        this.load(imageObjectURL, AppConfig.message_image_loading_timeout).then((img) => {\n          let width;\n          let height;\n          ratio = img.naturalWidth / img.naturalHeight;\n\n          if (ratio >= 1 && img.naturalWidth > maxWidth) {\n            height = img.naturalHeight * (maxWidth / img.naturalWidth);\n            width = maxWidth;\n          } else if (img.naturalHeight > maxHeight) {\n            width = img.naturalWidth * (maxHeight / img.naturalHeight);\n            height = maxHeight;\n          } else {\n            width = img.naturalWidth;\n            height = img.naturalHeight;\n          }\n\n          canvas.width = width;\n          canvas.height = height;\n\n          let context = canvas.getContext('2d');\n          context.drawImage(img, 0, 0, width, height);\n\n          if(canvas.toBlob) {\n            canvas.toBlob(resolve);\n          } else if (canvas.msToBlob) {\n            let pngImageBlob = canvas.msToBlob();\n            resolve(pngImageBlob);\n          } else if(canvas.toDataURL && this._checkImageSize(img)) {\n            let dataURL = canvas.toDataURL();\n            resolve(utils.file.base64_to_blob(dataURL));\n          } else {\n            reject(new Error('Could not save processed image'));\n          }\n        });\n      });\n    },\n\n    /**\n     * Checks the size of image to convert it to base64\n     * @param {Image} img\n     * @returns {boolean}\n     * @private\n     */\n    _checkImageSize(img) {\n      return img.naturalHeight <= AppConfig.max_image_size_for_base64 &&\n             img.naturalWidth <= AppConfig.max_image_size_for_base64;\n    }\n  },\n\n  features: {\n    reconcileFeatureFlags: function (nativeFlags, featureFlags) {\n      let overrides = _.isObject(nativeFlags) ? nativeFlags : {},\n          flags = _.isObject(featureFlags) ? featureFlags : {};\n\n      return _.assign({}, flags, overrides);\n    },\n\n    btf_capabilities: function (featureFlags) {\n      var is_128_or_higher = featureFlags.hasOwnProperty('xmpp_compression');\n      var is_137_or_higher = featureFlags.hasOwnProperty('web_client_reconnect_header');\n\n      // These are the other feature flag -> version number mappings that aren't used\n      //var is_125_or_higher = featureFlags.hasOwnProperty('gravatar');\n      //var is_131_or_higher = featureFlags.hasOwnProperty('web_client_per_room_notifications');\n      //var is_134_or_higher = featureFlags.hasOwnProperty('clinky');\n\n      var capabilities = {};\n      capabilities.nonce = is_128_or_higher;\n      capabilities.oauth = is_137_or_higher;\n      return capabilities;\n    }\n  },\n\n  dom: {\n    findParentMatching(element, selector, until = null) {\n      let currentElement = element;\n      let matchedParent = null;\n\n      while (currentElement) {\n        if (selector(currentElement)) {\n          matchedParent = currentElement;\n          break;\n        }\n\n        if ((currentElement.parentElement === document.body) || (until && currentElement.parentElement === until)) {\n          break;\n        }\n\n        currentElement = currentElement.parentElement;\n      }\n\n      return matchedParent;\n    },\n\n    matchers: {\n      tag(tagName) {\n        return e => e.tagName === tagName.toUpperCase();\n      }\n    }\n  },\n\n  xml: {\n    toString: function (xml) {\n      return (new XMLSerializer()).serializeToString(xml);\n    }\n  },\n\n  mouseButton: {\n    left: 1,\n    middle: 2,\n    right: 3\n  }\n\n};\n\nexport default utils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/utils.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/keys\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/keys.js\n ** module id = 94\n ** module chunks = 0\n **/","require('../../modules/es6.object.keys');\nmodule.exports = require('../../modules/$.core').Object.keys;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/keys.js\n ** module id = 95\n ** module chunks = 0\n **/","// 19.1.2.14 Object.keys(O)\nvar toObject = require('./$.to-object');\n\nrequire('./$.object-sap')('keys', function($keys){\n  return function keys(it){\n    return $keys(toObject(it));\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.keys.js\n ** module id = 96\n ** module chunks = 0\n **/","//! moment.js\n//! version : 2.12.0\n//! authors : Tim Wood, Iskren Chernev, Moment.js contributors\n//! license : MIT\n//! momentjs.com\n\n;(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.moment = factory()\n}(this, function () { 'use strict';\n\n    var hookCallback;\n\n    function utils_hooks__hooks () {\n        return hookCallback.apply(null, arguments);\n    }\n\n    // This is done to register the method called with moment()\n    // without creating circular dependencies.\n    function setHookCallback (callback) {\n        hookCallback = callback;\n    }\n\n    function isArray(input) {\n        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';\n    }\n\n    function isDate(input) {\n        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';\n    }\n\n    function map(arr, fn) {\n        var res = [], i;\n        for (i = 0; i < arr.length; ++i) {\n            res.push(fn(arr[i], i));\n        }\n        return res;\n    }\n\n    function hasOwnProp(a, b) {\n        return Object.prototype.hasOwnProperty.call(a, b);\n    }\n\n    function extend(a, b) {\n        for (var i in b) {\n            if (hasOwnProp(b, i)) {\n                a[i] = b[i];\n            }\n        }\n\n        if (hasOwnProp(b, 'toString')) {\n            a.toString = b.toString;\n        }\n\n        if (hasOwnProp(b, 'valueOf')) {\n            a.valueOf = b.valueOf;\n        }\n\n        return a;\n    }\n\n    function create_utc__createUTC (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, true).utc();\n    }\n\n    function defaultParsingFlags() {\n        // We need to deep clone this object.\n        return {\n            empty           : false,\n            unusedTokens    : [],\n            unusedInput     : [],\n            overflow        : -2,\n            charsLeftOver   : 0,\n            nullInput       : false,\n            invalidMonth    : null,\n            invalidFormat   : false,\n            userInvalidated : false,\n            iso             : false\n        };\n    }\n\n    function getParsingFlags(m) {\n        if (m._pf == null) {\n            m._pf = defaultParsingFlags();\n        }\n        return m._pf;\n    }\n\n    function valid__isValid(m) {\n        if (m._isValid == null) {\n            var flags = getParsingFlags(m);\n            m._isValid = !isNaN(m._d.getTime()) &&\n                flags.overflow < 0 &&\n                !flags.empty &&\n                !flags.invalidMonth &&\n                !flags.invalidWeekday &&\n                !flags.nullInput &&\n                !flags.invalidFormat &&\n                !flags.userInvalidated;\n\n            if (m._strict) {\n                m._isValid = m._isValid &&\n                    flags.charsLeftOver === 0 &&\n                    flags.unusedTokens.length === 0 &&\n                    flags.bigHour === undefined;\n            }\n        }\n        return m._isValid;\n    }\n\n    function valid__createInvalid (flags) {\n        var m = create_utc__createUTC(NaN);\n        if (flags != null) {\n            extend(getParsingFlags(m), flags);\n        }\n        else {\n            getParsingFlags(m).userInvalidated = true;\n        }\n\n        return m;\n    }\n\n    function isUndefined(input) {\n        return input === void 0;\n    }\n\n    // Plugins that add properties should also add the key here (null value),\n    // so we can properly clone ourselves.\n    var momentProperties = utils_hooks__hooks.momentProperties = [];\n\n    function copyConfig(to, from) {\n        var i, prop, val;\n\n        if (!isUndefined(from._isAMomentObject)) {\n            to._isAMomentObject = from._isAMomentObject;\n        }\n        if (!isUndefined(from._i)) {\n            to._i = from._i;\n        }\n        if (!isUndefined(from._f)) {\n            to._f = from._f;\n        }\n        if (!isUndefined(from._l)) {\n            to._l = from._l;\n        }\n        if (!isUndefined(from._strict)) {\n            to._strict = from._strict;\n        }\n        if (!isUndefined(from._tzm)) {\n            to._tzm = from._tzm;\n        }\n        if (!isUndefined(from._isUTC)) {\n            to._isUTC = from._isUTC;\n        }\n        if (!isUndefined(from._offset)) {\n            to._offset = from._offset;\n        }\n        if (!isUndefined(from._pf)) {\n            to._pf = getParsingFlags(from);\n        }\n        if (!isUndefined(from._locale)) {\n            to._locale = from._locale;\n        }\n\n        if (momentProperties.length > 0) {\n            for (i in momentProperties) {\n                prop = momentProperties[i];\n                val = from[prop];\n                if (!isUndefined(val)) {\n                    to[prop] = val;\n                }\n            }\n        }\n\n        return to;\n    }\n\n    var updateInProgress = false;\n\n    // Moment prototype object\n    function Moment(config) {\n        copyConfig(this, config);\n        this._d = new Date(config._d != null ? config._d.getTime() : NaN);\n        // Prevent infinite loop in case updateOffset creates new moment\n        // objects.\n        if (updateInProgress === false) {\n            updateInProgress = true;\n            utils_hooks__hooks.updateOffset(this);\n            updateInProgress = false;\n        }\n    }\n\n    function isMoment (obj) {\n        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);\n    }\n\n    function absFloor (number) {\n        if (number < 0) {\n            return Math.ceil(number);\n        } else {\n            return Math.floor(number);\n        }\n    }\n\n    function toInt(argumentForCoercion) {\n        var coercedNumber = +argumentForCoercion,\n            value = 0;\n\n        if (coercedNumber !== 0 && isFinite(coercedNumber)) {\n            value = absFloor(coercedNumber);\n        }\n\n        return value;\n    }\n\n    // compare two arrays, return the number of differences\n    function compareArrays(array1, array2, dontConvert) {\n        var len = Math.min(array1.length, array2.length),\n            lengthDiff = Math.abs(array1.length - array2.length),\n            diffs = 0,\n            i;\n        for (i = 0; i < len; i++) {\n            if ((dontConvert && array1[i] !== array2[i]) ||\n                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {\n                diffs++;\n            }\n        }\n        return diffs + lengthDiff;\n    }\n\n    function warn(msg) {\n        if (utils_hooks__hooks.suppressDeprecationWarnings === false &&\n                (typeof console !==  'undefined') && console.warn) {\n            console.warn('Deprecation warning: ' + msg);\n        }\n    }\n\n    function deprecate(msg, fn) {\n        var firstTime = true;\n\n        return extend(function () {\n            if (firstTime) {\n                warn(msg + '\\nArguments: ' + Array.prototype.slice.call(arguments).join(', ') + '\\n' + (new Error()).stack);\n                firstTime = false;\n            }\n            return fn.apply(this, arguments);\n        }, fn);\n    }\n\n    var deprecations = {};\n\n    function deprecateSimple(name, msg) {\n        if (!deprecations[name]) {\n            warn(msg);\n            deprecations[name] = true;\n        }\n    }\n\n    utils_hooks__hooks.suppressDeprecationWarnings = false;\n\n    function isFunction(input) {\n        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';\n    }\n\n    function isObject(input) {\n        return Object.prototype.toString.call(input) === '[object Object]';\n    }\n\n    function locale_set__set (config) {\n        var prop, i;\n        for (i in config) {\n            prop = config[i];\n            if (isFunction(prop)) {\n                this[i] = prop;\n            } else {\n                this['_' + i] = prop;\n            }\n        }\n        this._config = config;\n        // Lenient ordinal parsing accepts just a number in addition to\n        // number + (possibly) stuff coming from _ordinalParseLenient.\n        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\\d{1,2}/).source);\n    }\n\n    function mergeConfigs(parentConfig, childConfig) {\n        var res = extend({}, parentConfig), prop;\n        for (prop in childConfig) {\n            if (hasOwnProp(childConfig, prop)) {\n                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {\n                    res[prop] = {};\n                    extend(res[prop], parentConfig[prop]);\n                    extend(res[prop], childConfig[prop]);\n                } else if (childConfig[prop] != null) {\n                    res[prop] = childConfig[prop];\n                } else {\n                    delete res[prop];\n                }\n            }\n        }\n        return res;\n    }\n\n    function Locale(config) {\n        if (config != null) {\n            this.set(config);\n        }\n    }\n\n    // internal storage for locale config files\n    var locales = {};\n    var globalLocale;\n\n    function normalizeLocale(key) {\n        return key ? key.toLowerCase().replace('_', '-') : key;\n    }\n\n    // pick the locale from the array\n    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each\n    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root\n    function chooseLocale(names) {\n        var i = 0, j, next, locale, split;\n\n        while (i < names.length) {\n            split = normalizeLocale(names[i]).split('-');\n            j = split.length;\n            next = normalizeLocale(names[i + 1]);\n            next = next ? next.split('-') : null;\n            while (j > 0) {\n                locale = loadLocale(split.slice(0, j).join('-'));\n                if (locale) {\n                    return locale;\n                }\n                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {\n                    //the next array item is better than a shallower substring of this one\n                    break;\n                }\n                j--;\n            }\n            i++;\n        }\n        return null;\n    }\n\n    function loadLocale(name) {\n        var oldLocale = null;\n        // TODO: Find a better way to register and load all the locales in Node\n        if (!locales[name] && (typeof module !== 'undefined') &&\n                module && module.exports) {\n            try {\n                oldLocale = globalLocale._abbr;\n                require('./locale/' + name);\n                // because defineLocale currently also sets the global locale, we\n                // want to undo that for lazy loaded locales\n                locale_locales__getSetGlobalLocale(oldLocale);\n            } catch (e) { }\n        }\n        return locales[name];\n    }\n\n    // This function will load locale and then set the global locale.  If\n    // no arguments are passed in, it will simply return the current global\n    // locale key.\n    function locale_locales__getSetGlobalLocale (key, values) {\n        var data;\n        if (key) {\n            if (isUndefined(values)) {\n                data = locale_locales__getLocale(key);\n            }\n            else {\n                data = defineLocale(key, values);\n            }\n\n            if (data) {\n                // moment.duration._locale = moment._locale = data;\n                globalLocale = data;\n            }\n        }\n\n        return globalLocale._abbr;\n    }\n\n    function defineLocale (name, config) {\n        if (config !== null) {\n            config.abbr = name;\n            if (locales[name] != null) {\n                deprecateSimple('defineLocaleOverride',\n                        'use moment.updateLocale(localeName, config) to change ' +\n                        'an existing locale. moment.defineLocale(localeName, ' +\n                        'config) should only be used for creating a new locale');\n                config = mergeConfigs(locales[name]._config, config);\n            } else if (config.parentLocale != null) {\n                if (locales[config.parentLocale] != null) {\n                    config = mergeConfigs(locales[config.parentLocale]._config, config);\n                } else {\n                    // treat as if there is no base config\n                    deprecateSimple('parentLocaleUndefined',\n                            'specified parentLocale is not defined yet');\n                }\n            }\n            locales[name] = new Locale(config);\n\n            // backwards compat for now: also set the locale\n            locale_locales__getSetGlobalLocale(name);\n\n            return locales[name];\n        } else {\n            // useful for testing\n            delete locales[name];\n            return null;\n        }\n    }\n\n    function updateLocale(name, config) {\n        if (config != null) {\n            var locale;\n            if (locales[name] != null) {\n                config = mergeConfigs(locales[name]._config, config);\n            }\n            locale = new Locale(config);\n            locale.parentLocale = locales[name];\n            locales[name] = locale;\n\n            // backwards compat for now: also set the locale\n            locale_locales__getSetGlobalLocale(name);\n        } else {\n            // pass null for config to unupdate, useful for tests\n            if (locales[name] != null) {\n                if (locales[name].parentLocale != null) {\n                    locales[name] = locales[name].parentLocale;\n                } else if (locales[name] != null) {\n                    delete locales[name];\n                }\n            }\n        }\n        return locales[name];\n    }\n\n    // returns locale data\n    function locale_locales__getLocale (key) {\n        var locale;\n\n        if (key && key._locale && key._locale._abbr) {\n            key = key._locale._abbr;\n        }\n\n        if (!key) {\n            return globalLocale;\n        }\n\n        if (!isArray(key)) {\n            //short-circuit everything else\n            locale = loadLocale(key);\n            if (locale) {\n                return locale;\n            }\n            key = [key];\n        }\n\n        return chooseLocale(key);\n    }\n\n    function locale_locales__listLocales() {\n        return Object.keys(locales);\n    }\n\n    var aliases = {};\n\n    function addUnitAlias (unit, shorthand) {\n        var lowerCase = unit.toLowerCase();\n        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;\n    }\n\n    function normalizeUnits(units) {\n        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;\n    }\n\n    function normalizeObjectUnits(inputObject) {\n        var normalizedInput = {},\n            normalizedProp,\n            prop;\n\n        for (prop in inputObject) {\n            if (hasOwnProp(inputObject, prop)) {\n                normalizedProp = normalizeUnits(prop);\n                if (normalizedProp) {\n                    normalizedInput[normalizedProp] = inputObject[prop];\n                }\n            }\n        }\n\n        return normalizedInput;\n    }\n\n    function makeGetSet (unit, keepTime) {\n        return function (value) {\n            if (value != null) {\n                get_set__set(this, unit, value);\n                utils_hooks__hooks.updateOffset(this, keepTime);\n                return this;\n            } else {\n                return get_set__get(this, unit);\n            }\n        };\n    }\n\n    function get_set__get (mom, unit) {\n        return mom.isValid() ?\n            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;\n    }\n\n    function get_set__set (mom, unit, value) {\n        if (mom.isValid()) {\n            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);\n        }\n    }\n\n    // MOMENTS\n\n    function getSet (units, value) {\n        var unit;\n        if (typeof units === 'object') {\n            for (unit in units) {\n                this.set(unit, units[unit]);\n            }\n        } else {\n            units = normalizeUnits(units);\n            if (isFunction(this[units])) {\n                return this[units](value);\n            }\n        }\n        return this;\n    }\n\n    function zeroFill(number, targetLength, forceSign) {\n        var absNumber = '' + Math.abs(number),\n            zerosToFill = targetLength - absNumber.length,\n            sign = number >= 0;\n        return (sign ? (forceSign ? '+' : '') : '-') +\n            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;\n    }\n\n    var formattingTokens = /(\\[[^\\[]*\\])|(\\\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;\n\n    var localFormattingTokens = /(\\[[^\\[]*\\])|(\\\\)?(LTS|LT|LL?L?L?|l{1,4})/g;\n\n    var formatFunctions = {};\n\n    var formatTokenFunctions = {};\n\n    // token:    'M'\n    // padded:   ['MM', 2]\n    // ordinal:  'Mo'\n    // callback: function () { this.month() + 1 }\n    function addFormatToken (token, padded, ordinal, callback) {\n        var func = callback;\n        if (typeof callback === 'string') {\n            func = function () {\n                return this[callback]();\n            };\n        }\n        if (token) {\n            formatTokenFunctions[token] = func;\n        }\n        if (padded) {\n            formatTokenFunctions[padded[0]] = function () {\n                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);\n            };\n        }\n        if (ordinal) {\n            formatTokenFunctions[ordinal] = function () {\n                return this.localeData().ordinal(func.apply(this, arguments), token);\n            };\n        }\n    }\n\n    function removeFormattingTokens(input) {\n        if (input.match(/\\[[\\s\\S]/)) {\n            return input.replace(/^\\[|\\]$/g, '');\n        }\n        return input.replace(/\\\\/g, '');\n    }\n\n    function makeFormatFunction(format) {\n        var array = format.match(formattingTokens), i, length;\n\n        for (i = 0, length = array.length; i < length; i++) {\n            if (formatTokenFunctions[array[i]]) {\n                array[i] = formatTokenFunctions[array[i]];\n            } else {\n                array[i] = removeFormattingTokens(array[i]);\n            }\n        }\n\n        return function (mom) {\n            var output = '';\n            for (i = 0; i < length; i++) {\n                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];\n            }\n            return output;\n        };\n    }\n\n    // format date using native date object\n    function formatMoment(m, format) {\n        if (!m.isValid()) {\n            return m.localeData().invalidDate();\n        }\n\n        format = expandFormat(format, m.localeData());\n        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);\n\n        return formatFunctions[format](m);\n    }\n\n    function expandFormat(format, locale) {\n        var i = 5;\n\n        function replaceLongDateFormatTokens(input) {\n            return locale.longDateFormat(input) || input;\n        }\n\n        localFormattingTokens.lastIndex = 0;\n        while (i >= 0 && localFormattingTokens.test(format)) {\n            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);\n            localFormattingTokens.lastIndex = 0;\n            i -= 1;\n        }\n\n        return format;\n    }\n\n    var match1         = /\\d/;            //       0 - 9\n    var match2         = /\\d\\d/;          //      00 - 99\n    var match3         = /\\d{3}/;         //     000 - 999\n    var match4         = /\\d{4}/;         //    0000 - 9999\n    var match6         = /[+-]?\\d{6}/;    // -999999 - 999999\n    var match1to2      = /\\d\\d?/;         //       0 - 99\n    var match3to4      = /\\d\\d\\d\\d?/;     //     999 - 9999\n    var match5to6      = /\\d\\d\\d\\d\\d\\d?/; //   99999 - 999999\n    var match1to3      = /\\d{1,3}/;       //       0 - 999\n    var match1to4      = /\\d{1,4}/;       //       0 - 9999\n    var match1to6      = /[+-]?\\d{1,6}/;  // -999999 - 999999\n\n    var matchUnsigned  = /\\d+/;           //       0 - inf\n    var matchSigned    = /[+-]?\\d+/;      //    -inf - inf\n\n    var matchOffset    = /Z|[+-]\\d\\d:?\\d\\d/gi; // +00:00 -00:00 +0000 -0000 or Z\n    var matchShortOffset = /Z|[+-]\\d\\d(?::?\\d\\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z\n\n    var matchTimestamp = /[+-]?\\d+(\\.\\d{1,3})?/; // 123456789 123456789.123\n\n    // any word (or two) characters or numbers including two/three word month in arabic.\n    // includes scottish gaelic two word and hyphenated months\n    var matchWord = /[0-9]*['a-z\\u00A0-\\u05FF\\u0700-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+|[\\u0600-\\u06FF\\/]+(\\s*?[\\u0600-\\u06FF]+){1,2}/i;\n\n\n    var regexes = {};\n\n    function addRegexToken (token, regex, strictRegex) {\n        regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {\n            return (isStrict && strictRegex) ? strictRegex : regex;\n        };\n    }\n\n    function getParseRegexForToken (token, config) {\n        if (!hasOwnProp(regexes, token)) {\n            return new RegExp(unescapeFormat(token));\n        }\n\n        return regexes[token](config._strict, config._locale);\n    }\n\n    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript\n    function unescapeFormat(s) {\n        return regexEscape(s.replace('\\\\', '').replace(/\\\\(\\[)|\\\\(\\])|\\[([^\\]\\[]*)\\]|\\\\(.)/g, function (matched, p1, p2, p3, p4) {\n            return p1 || p2 || p3 || p4;\n        }));\n    }\n\n    function regexEscape(s) {\n        return s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n    }\n\n    var tokens = {};\n\n    function addParseToken (token, callback) {\n        var i, func = callback;\n        if (typeof token === 'string') {\n            token = [token];\n        }\n        if (typeof callback === 'number') {\n            func = function (input, array) {\n                array[callback] = toInt(input);\n            };\n        }\n        for (i = 0; i < token.length; i++) {\n            tokens[token[i]] = func;\n        }\n    }\n\n    function addWeekParseToken (token, callback) {\n        addParseToken(token, function (input, array, config, token) {\n            config._w = config._w || {};\n            callback(input, config._w, config, token);\n        });\n    }\n\n    function addTimeToArrayFromToken(token, input, config) {\n        if (input != null && hasOwnProp(tokens, token)) {\n            tokens[token](input, config._a, config, token);\n        }\n    }\n\n    var YEAR = 0;\n    var MONTH = 1;\n    var DATE = 2;\n    var HOUR = 3;\n    var MINUTE = 4;\n    var SECOND = 5;\n    var MILLISECOND = 6;\n    var WEEK = 7;\n    var WEEKDAY = 8;\n\n    function daysInMonth(year, month) {\n        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();\n    }\n\n    // FORMATTING\n\n    addFormatToken('M', ['MM', 2], 'Mo', function () {\n        return this.month() + 1;\n    });\n\n    addFormatToken('MMM', 0, 0, function (format) {\n        return this.localeData().monthsShort(this, format);\n    });\n\n    addFormatToken('MMMM', 0, 0, function (format) {\n        return this.localeData().months(this, format);\n    });\n\n    // ALIASES\n\n    addUnitAlias('month', 'M');\n\n    // PARSING\n\n    addRegexToken('M',    match1to2);\n    addRegexToken('MM',   match1to2, match2);\n    addRegexToken('MMM',  function (isStrict, locale) {\n        return locale.monthsShortRegex(isStrict);\n    });\n    addRegexToken('MMMM', function (isStrict, locale) {\n        return locale.monthsRegex(isStrict);\n    });\n\n    addParseToken(['M', 'MM'], function (input, array) {\n        array[MONTH] = toInt(input) - 1;\n    });\n\n    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {\n        var month = config._locale.monthsParse(input, token, config._strict);\n        // if we didn't find a month name, mark the date as invalid.\n        if (month != null) {\n            array[MONTH] = month;\n        } else {\n            getParsingFlags(config).invalidMonth = input;\n        }\n    });\n\n    // LOCALES\n\n    var MONTHS_IN_FORMAT = /D[oD]?(\\[[^\\[\\]]*\\]|\\s+)+MMMM?/;\n    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');\n    function localeMonths (m, format) {\n        return isArray(this._months) ? this._months[m.month()] :\n            this._months[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');\n    function localeMonthsShort (m, format) {\n        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :\n            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];\n    }\n\n    function localeMonthsParse (monthName, format, strict) {\n        var i, mom, regex;\n\n        if (!this._monthsParse) {\n            this._monthsParse = [];\n            this._longMonthsParse = [];\n            this._shortMonthsParse = [];\n        }\n\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = create_utc__createUTC([2000, i]);\n            if (strict && !this._longMonthsParse[i]) {\n                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');\n                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');\n            }\n            if (!strict && !this._monthsParse[i]) {\n                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');\n                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {\n                return i;\n            } else if (!strict && this._monthsParse[i].test(monthName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function setMonth (mom, value) {\n        var dayOfMonth;\n\n        if (!mom.isValid()) {\n            // No op\n            return mom;\n        }\n\n        if (typeof value === 'string') {\n            if (/^\\d+$/.test(value)) {\n                value = toInt(value);\n            } else {\n                value = mom.localeData().monthsParse(value);\n                // TODO: Another silent failure?\n                if (typeof value !== 'number') {\n                    return mom;\n                }\n            }\n        }\n\n        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));\n        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);\n        return mom;\n    }\n\n    function getSetMonth (value) {\n        if (value != null) {\n            setMonth(this, value);\n            utils_hooks__hooks.updateOffset(this, true);\n            return this;\n        } else {\n            return get_set__get(this, 'Month');\n        }\n    }\n\n    function getDaysInMonth () {\n        return daysInMonth(this.year(), this.month());\n    }\n\n    var defaultMonthsShortRegex = matchWord;\n    function monthsShortRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsShortStrictRegex;\n            } else {\n                return this._monthsShortRegex;\n            }\n        } else {\n            return this._monthsShortStrictRegex && isStrict ?\n                this._monthsShortStrictRegex : this._monthsShortRegex;\n        }\n    }\n\n    var defaultMonthsRegex = matchWord;\n    function monthsRegex (isStrict) {\n        if (this._monthsParseExact) {\n            if (!hasOwnProp(this, '_monthsRegex')) {\n                computeMonthsParse.call(this);\n            }\n            if (isStrict) {\n                return this._monthsStrictRegex;\n            } else {\n                return this._monthsRegex;\n            }\n        } else {\n            return this._monthsStrictRegex && isStrict ?\n                this._monthsStrictRegex : this._monthsRegex;\n        }\n    }\n\n    function computeMonthsParse () {\n        function cmpLenRev(a, b) {\n            return b.length - a.length;\n        }\n\n        var shortPieces = [], longPieces = [], mixedPieces = [],\n            i, mom;\n        for (i = 0; i < 12; i++) {\n            // make the regex if we don't have it already\n            mom = create_utc__createUTC([2000, i]);\n            shortPieces.push(this.monthsShort(mom, ''));\n            longPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.months(mom, ''));\n            mixedPieces.push(this.monthsShort(mom, ''));\n        }\n        // Sorting makes sure if one month (or abbr) is a prefix of another it\n        // will match the longer piece.\n        shortPieces.sort(cmpLenRev);\n        longPieces.sort(cmpLenRev);\n        mixedPieces.sort(cmpLenRev);\n        for (i = 0; i < 12; i++) {\n            shortPieces[i] = regexEscape(shortPieces[i]);\n            longPieces[i] = regexEscape(longPieces[i]);\n            mixedPieces[i] = regexEscape(mixedPieces[i]);\n        }\n\n        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');\n        this._monthsShortRegex = this._monthsRegex;\n        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')$', 'i');\n        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')$', 'i');\n    }\n\n    function checkOverflow (m) {\n        var overflow;\n        var a = m._a;\n\n        if (a && getParsingFlags(m).overflow === -2) {\n            overflow =\n                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :\n                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :\n                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :\n                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :\n                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :\n                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :\n                -1;\n\n            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {\n                overflow = DATE;\n            }\n            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {\n                overflow = WEEK;\n            }\n            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {\n                overflow = WEEKDAY;\n            }\n\n            getParsingFlags(m).overflow = overflow;\n        }\n\n        return m;\n    }\n\n    // iso 8601 regex\n    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)\n    var extendedIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})-(?:\\d\\d-\\d\\d|W\\d\\d-\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?::\\d\\d(?::\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?/;\n    var basicIsoRegex = /^\\s*((?:[+-]\\d{6}|\\d{4})(?:\\d\\d\\d\\d|W\\d\\d\\d|W\\d\\d|\\d\\d\\d|\\d\\d))(?:(T| )(\\d\\d(?:\\d\\d(?:\\d\\d(?:[.,]\\d+)?)?)?)([\\+\\-]\\d\\d(?::?\\d\\d)?|\\s*Z)?)?/;\n\n    var tzRegex = /Z|[+-]\\d\\d(?::?\\d\\d)?/;\n\n    var isoDates = [\n        ['YYYYYY-MM-DD', /[+-]\\d{6}-\\d\\d-\\d\\d/],\n        ['YYYY-MM-DD', /\\d{4}-\\d\\d-\\d\\d/],\n        ['GGGG-[W]WW-E', /\\d{4}-W\\d\\d-\\d/],\n        ['GGGG-[W]WW', /\\d{4}-W\\d\\d/, false],\n        ['YYYY-DDD', /\\d{4}-\\d{3}/],\n        ['YYYY-MM', /\\d{4}-\\d\\d/, false],\n        ['YYYYYYMMDD', /[+-]\\d{10}/],\n        ['YYYYMMDD', /\\d{8}/],\n        // YYYYMM is NOT allowed by the standard\n        ['GGGG[W]WWE', /\\d{4}W\\d{3}/],\n        ['GGGG[W]WW', /\\d{4}W\\d{2}/, false],\n        ['YYYYDDD', /\\d{7}/]\n    ];\n\n    // iso time formats and regexes\n    var isoTimes = [\n        ['HH:mm:ss.SSSS', /\\d\\d:\\d\\d:\\d\\d\\.\\d+/],\n        ['HH:mm:ss,SSSS', /\\d\\d:\\d\\d:\\d\\d,\\d+/],\n        ['HH:mm:ss', /\\d\\d:\\d\\d:\\d\\d/],\n        ['HH:mm', /\\d\\d:\\d\\d/],\n        ['HHmmss.SSSS', /\\d\\d\\d\\d\\d\\d\\.\\d+/],\n        ['HHmmss,SSSS', /\\d\\d\\d\\d\\d\\d,\\d+/],\n        ['HHmmss', /\\d\\d\\d\\d\\d\\d/],\n        ['HHmm', /\\d\\d\\d\\d/],\n        ['HH', /\\d\\d/]\n    ];\n\n    var aspNetJsonRegex = /^\\/?Date\\((\\-?\\d+)/i;\n\n    // date from iso format\n    function configFromISO(config) {\n        var i, l,\n            string = config._i,\n            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),\n            allowTime, dateFormat, timeFormat, tzFormat;\n\n        if (match) {\n            getParsingFlags(config).iso = true;\n\n            for (i = 0, l = isoDates.length; i < l; i++) {\n                if (isoDates[i][1].exec(match[1])) {\n                    dateFormat = isoDates[i][0];\n                    allowTime = isoDates[i][2] !== false;\n                    break;\n                }\n            }\n            if (dateFormat == null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[3]) {\n                for (i = 0, l = isoTimes.length; i < l; i++) {\n                    if (isoTimes[i][1].exec(match[3])) {\n                        // match[2] should be 'T' or space\n                        timeFormat = (match[2] || ' ') + isoTimes[i][0];\n                        break;\n                    }\n                }\n                if (timeFormat == null) {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            if (!allowTime && timeFormat != null) {\n                config._isValid = false;\n                return;\n            }\n            if (match[4]) {\n                if (tzRegex.exec(match[4])) {\n                    tzFormat = 'Z';\n                } else {\n                    config._isValid = false;\n                    return;\n                }\n            }\n            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');\n            configFromStringAndFormat(config);\n        } else {\n            config._isValid = false;\n        }\n    }\n\n    // date from iso format or fallback\n    function configFromString(config) {\n        var matched = aspNetJsonRegex.exec(config._i);\n\n        if (matched !== null) {\n            config._d = new Date(+matched[1]);\n            return;\n        }\n\n        configFromISO(config);\n        if (config._isValid === false) {\n            delete config._isValid;\n            utils_hooks__hooks.createFromInputFallback(config);\n        }\n    }\n\n    utils_hooks__hooks.createFromInputFallback = deprecate(\n        'moment construction falls back to js Date. This is ' +\n        'discouraged and will be removed in upcoming major ' +\n        'release. Please refer to ' +\n        'https://github.com/moment/moment/issues/1407 for more info.',\n        function (config) {\n            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));\n        }\n    );\n\n    function createDate (y, m, d, h, M, s, ms) {\n        //can't just apply() to create a date:\n        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply\n        var date = new Date(y, m, d, h, M, s, ms);\n\n        //the date constructor remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {\n            date.setFullYear(y);\n        }\n        return date;\n    }\n\n    function createUTCDate (y) {\n        var date = new Date(Date.UTC.apply(null, arguments));\n\n        //the Date.UTC function remaps years 0-99 to 1900-1999\n        if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {\n            date.setUTCFullYear(y);\n        }\n        return date;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Y', 0, 0, function () {\n        var y = this.year();\n        return y <= 9999 ? '' + y : '+' + y;\n    });\n\n    addFormatToken(0, ['YY', 2], 0, function () {\n        return this.year() % 100;\n    });\n\n    addFormatToken(0, ['YYYY',   4],       0, 'year');\n    addFormatToken(0, ['YYYYY',  5],       0, 'year');\n    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');\n\n    // ALIASES\n\n    addUnitAlias('year', 'y');\n\n    // PARSING\n\n    addRegexToken('Y',      matchSigned);\n    addRegexToken('YY',     match1to2, match2);\n    addRegexToken('YYYY',   match1to4, match4);\n    addRegexToken('YYYYY',  match1to6, match6);\n    addRegexToken('YYYYYY', match1to6, match6);\n\n    addParseToken(['YYYYY', 'YYYYYY'], YEAR);\n    addParseToken('YYYY', function (input, array) {\n        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);\n    });\n    addParseToken('YY', function (input, array) {\n        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);\n    });\n    addParseToken('Y', function (input, array) {\n        array[YEAR] = parseInt(input, 10);\n    });\n\n    // HELPERS\n\n    function daysInYear(year) {\n        return isLeapYear(year) ? 366 : 365;\n    }\n\n    function isLeapYear(year) {\n        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n    }\n\n    // HOOKS\n\n    utils_hooks__hooks.parseTwoDigitYear = function (input) {\n        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);\n    };\n\n    // MOMENTS\n\n    var getSetYear = makeGetSet('FullYear', false);\n\n    function getIsLeapYear () {\n        return isLeapYear(this.year());\n    }\n\n    // start-of-first-week - start-of-year\n    function firstWeekOffset(year, dow, doy) {\n        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)\n            fwd = 7 + dow - doy,\n            // first-week day local weekday -- which local weekday is fwd\n            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;\n\n        return -fwdlw + fwd - 1;\n    }\n\n    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday\n    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {\n        var localWeekday = (7 + weekday - dow) % 7,\n            weekOffset = firstWeekOffset(year, dow, doy),\n            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,\n            resYear, resDayOfYear;\n\n        if (dayOfYear <= 0) {\n            resYear = year - 1;\n            resDayOfYear = daysInYear(resYear) + dayOfYear;\n        } else if (dayOfYear > daysInYear(year)) {\n            resYear = year + 1;\n            resDayOfYear = dayOfYear - daysInYear(year);\n        } else {\n            resYear = year;\n            resDayOfYear = dayOfYear;\n        }\n\n        return {\n            year: resYear,\n            dayOfYear: resDayOfYear\n        };\n    }\n\n    function weekOfYear(mom, dow, doy) {\n        var weekOffset = firstWeekOffset(mom.year(), dow, doy),\n            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,\n            resWeek, resYear;\n\n        if (week < 1) {\n            resYear = mom.year() - 1;\n            resWeek = week + weeksInYear(resYear, dow, doy);\n        } else if (week > weeksInYear(mom.year(), dow, doy)) {\n            resWeek = week - weeksInYear(mom.year(), dow, doy);\n            resYear = mom.year() + 1;\n        } else {\n            resYear = mom.year();\n            resWeek = week;\n        }\n\n        return {\n            week: resWeek,\n            year: resYear\n        };\n    }\n\n    function weeksInYear(year, dow, doy) {\n        var weekOffset = firstWeekOffset(year, dow, doy),\n            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);\n        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;\n    }\n\n    // Pick the first defined of two or three arguments.\n    function defaults(a, b, c) {\n        if (a != null) {\n            return a;\n        }\n        if (b != null) {\n            return b;\n        }\n        return c;\n    }\n\n    function currentDateArray(config) {\n        // hooks is actually the exported moment object\n        var nowValue = new Date(utils_hooks__hooks.now());\n        if (config._useUTC) {\n            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];\n        }\n        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];\n    }\n\n    // convert an array to a date.\n    // the array should mirror the parameters below\n    // note: all values past the year are optional and will default to the lowest possible value.\n    // [year, month, day , hour, minute, second, millisecond]\n    function configFromArray (config) {\n        var i, date, input = [], currentDate, yearToUse;\n\n        if (config._d) {\n            return;\n        }\n\n        currentDate = currentDateArray(config);\n\n        //compute day of the year from weeks and weekdays\n        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {\n            dayOfYearFromWeekInfo(config);\n        }\n\n        //if the day of the year is set, figure out what it is\n        if (config._dayOfYear) {\n            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);\n\n            if (config._dayOfYear > daysInYear(yearToUse)) {\n                getParsingFlags(config)._overflowDayOfYear = true;\n            }\n\n            date = createUTCDate(yearToUse, 0, config._dayOfYear);\n            config._a[MONTH] = date.getUTCMonth();\n            config._a[DATE] = date.getUTCDate();\n        }\n\n        // Default to current date.\n        // * if no year, month, day of month are given, default to today\n        // * if day of month is given, default month and year\n        // * if month is given, default only year\n        // * if year is given, don't default anything\n        for (i = 0; i < 3 && config._a[i] == null; ++i) {\n            config._a[i] = input[i] = currentDate[i];\n        }\n\n        // Zero out whatever was not defaulted, including time\n        for (; i < 7; i++) {\n            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];\n        }\n\n        // Check for 24:00:00.000\n        if (config._a[HOUR] === 24 &&\n                config._a[MINUTE] === 0 &&\n                config._a[SECOND] === 0 &&\n                config._a[MILLISECOND] === 0) {\n            config._nextDay = true;\n            config._a[HOUR] = 0;\n        }\n\n        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);\n        // Apply timezone offset from input. The actual utcOffset can be changed\n        // with parseZone.\n        if (config._tzm != null) {\n            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);\n        }\n\n        if (config._nextDay) {\n            config._a[HOUR] = 24;\n        }\n    }\n\n    function dayOfYearFromWeekInfo(config) {\n        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;\n\n        w = config._w;\n        if (w.GG != null || w.W != null || w.E != null) {\n            dow = 1;\n            doy = 4;\n\n            // TODO: We need to take the current isoWeekYear, but that depends on\n            // how we interpret now (local, utc, fixed offset). So create\n            // a now version of current config (take local/utc/offset flags, and\n            // create now).\n            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);\n            week = defaults(w.W, 1);\n            weekday = defaults(w.E, 1);\n            if (weekday < 1 || weekday > 7) {\n                weekdayOverflow = true;\n            }\n        } else {\n            dow = config._locale._week.dow;\n            doy = config._locale._week.doy;\n\n            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);\n            week = defaults(w.w, 1);\n\n            if (w.d != null) {\n                // weekday -- low day numbers are considered next week\n                weekday = w.d;\n                if (weekday < 0 || weekday > 6) {\n                    weekdayOverflow = true;\n                }\n            } else if (w.e != null) {\n                // local weekday -- counting starts from begining of week\n                weekday = w.e + dow;\n                if (w.e < 0 || w.e > 6) {\n                    weekdayOverflow = true;\n                }\n            } else {\n                // default to begining of week\n                weekday = dow;\n            }\n        }\n        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {\n            getParsingFlags(config)._overflowWeeks = true;\n        } else if (weekdayOverflow != null) {\n            getParsingFlags(config)._overflowWeekday = true;\n        } else {\n            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);\n            config._a[YEAR] = temp.year;\n            config._dayOfYear = temp.dayOfYear;\n        }\n    }\n\n    // constant that refers to the ISO standard\n    utils_hooks__hooks.ISO_8601 = function () {};\n\n    // date from string and format string\n    function configFromStringAndFormat(config) {\n        // TODO: Move this to another part of the creation flow to prevent circular deps\n        if (config._f === utils_hooks__hooks.ISO_8601) {\n            configFromISO(config);\n            return;\n        }\n\n        config._a = [];\n        getParsingFlags(config).empty = true;\n\n        // This array is used to make a Date, either with `new Date` or `Date.UTC`\n        var string = '' + config._i,\n            i, parsedInput, tokens, token, skipped,\n            stringLength = string.length,\n            totalParsedInputLength = 0;\n\n        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];\n\n        for (i = 0; i < tokens.length; i++) {\n            token = tokens[i];\n            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];\n            // console.log('token', token, 'parsedInput', parsedInput,\n            //         'regex', getParseRegexForToken(token, config));\n            if (parsedInput) {\n                skipped = string.substr(0, string.indexOf(parsedInput));\n                if (skipped.length > 0) {\n                    getParsingFlags(config).unusedInput.push(skipped);\n                }\n                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);\n                totalParsedInputLength += parsedInput.length;\n            }\n            // don't parse if it's not a known token\n            if (formatTokenFunctions[token]) {\n                if (parsedInput) {\n                    getParsingFlags(config).empty = false;\n                }\n                else {\n                    getParsingFlags(config).unusedTokens.push(token);\n                }\n                addTimeToArrayFromToken(token, parsedInput, config);\n            }\n            else if (config._strict && !parsedInput) {\n                getParsingFlags(config).unusedTokens.push(token);\n            }\n        }\n\n        // add remaining unparsed input length to the string\n        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;\n        if (string.length > 0) {\n            getParsingFlags(config).unusedInput.push(string);\n        }\n\n        // clear _12h flag if hour is <= 12\n        if (getParsingFlags(config).bigHour === true &&\n                config._a[HOUR] <= 12 &&\n                config._a[HOUR] > 0) {\n            getParsingFlags(config).bigHour = undefined;\n        }\n        // handle meridiem\n        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);\n\n        configFromArray(config);\n        checkOverflow(config);\n    }\n\n\n    function meridiemFixWrap (locale, hour, meridiem) {\n        var isPm;\n\n        if (meridiem == null) {\n            // nothing to do\n            return hour;\n        }\n        if (locale.meridiemHour != null) {\n            return locale.meridiemHour(hour, meridiem);\n        } else if (locale.isPM != null) {\n            // Fallback\n            isPm = locale.isPM(meridiem);\n            if (isPm && hour < 12) {\n                hour += 12;\n            }\n            if (!isPm && hour === 12) {\n                hour = 0;\n            }\n            return hour;\n        } else {\n            // this is not supposed to happen\n            return hour;\n        }\n    }\n\n    // date from string and array of format strings\n    function configFromStringAndArray(config) {\n        var tempConfig,\n            bestMoment,\n\n            scoreToBeat,\n            i,\n            currentScore;\n\n        if (config._f.length === 0) {\n            getParsingFlags(config).invalidFormat = true;\n            config._d = new Date(NaN);\n            return;\n        }\n\n        for (i = 0; i < config._f.length; i++) {\n            currentScore = 0;\n            tempConfig = copyConfig({}, config);\n            if (config._useUTC != null) {\n                tempConfig._useUTC = config._useUTC;\n            }\n            tempConfig._f = config._f[i];\n            configFromStringAndFormat(tempConfig);\n\n            if (!valid__isValid(tempConfig)) {\n                continue;\n            }\n\n            // if there is any input that was not parsed add a penalty for that format\n            currentScore += getParsingFlags(tempConfig).charsLeftOver;\n\n            //or tokens\n            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;\n\n            getParsingFlags(tempConfig).score = currentScore;\n\n            if (scoreToBeat == null || currentScore < scoreToBeat) {\n                scoreToBeat = currentScore;\n                bestMoment = tempConfig;\n            }\n        }\n\n        extend(config, bestMoment || tempConfig);\n    }\n\n    function configFromObject(config) {\n        if (config._d) {\n            return;\n        }\n\n        var i = normalizeObjectUnits(config._i);\n        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {\n            return obj && parseInt(obj, 10);\n        });\n\n        configFromArray(config);\n    }\n\n    function createFromConfig (config) {\n        var res = new Moment(checkOverflow(prepareConfig(config)));\n        if (res._nextDay) {\n            // Adding is smart enough around DST\n            res.add(1, 'd');\n            res._nextDay = undefined;\n        }\n\n        return res;\n    }\n\n    function prepareConfig (config) {\n        var input = config._i,\n            format = config._f;\n\n        config._locale = config._locale || locale_locales__getLocale(config._l);\n\n        if (input === null || (format === undefined && input === '')) {\n            return valid__createInvalid({nullInput: true});\n        }\n\n        if (typeof input === 'string') {\n            config._i = input = config._locale.preparse(input);\n        }\n\n        if (isMoment(input)) {\n            return new Moment(checkOverflow(input));\n        } else if (isArray(format)) {\n            configFromStringAndArray(config);\n        } else if (format) {\n            configFromStringAndFormat(config);\n        } else if (isDate(input)) {\n            config._d = input;\n        } else {\n            configFromInput(config);\n        }\n\n        if (!valid__isValid(config)) {\n            config._d = null;\n        }\n\n        return config;\n    }\n\n    function configFromInput(config) {\n        var input = config._i;\n        if (input === undefined) {\n            config._d = new Date(utils_hooks__hooks.now());\n        } else if (isDate(input)) {\n            config._d = new Date(+input);\n        } else if (typeof input === 'string') {\n            configFromString(config);\n        } else if (isArray(input)) {\n            config._a = map(input.slice(0), function (obj) {\n                return parseInt(obj, 10);\n            });\n            configFromArray(config);\n        } else if (typeof(input) === 'object') {\n            configFromObject(config);\n        } else if (typeof(input) === 'number') {\n            // from milliseconds\n            config._d = new Date(input);\n        } else {\n            utils_hooks__hooks.createFromInputFallback(config);\n        }\n    }\n\n    function createLocalOrUTC (input, format, locale, strict, isUTC) {\n        var c = {};\n\n        if (typeof(locale) === 'boolean') {\n            strict = locale;\n            locale = undefined;\n        }\n        // object construction must be done this way.\n        // https://github.com/moment/moment/issues/1423\n        c._isAMomentObject = true;\n        c._useUTC = c._isUTC = isUTC;\n        c._l = locale;\n        c._i = input;\n        c._f = format;\n        c._strict = strict;\n\n        return createFromConfig(c);\n    }\n\n    function local__createLocal (input, format, locale, strict) {\n        return createLocalOrUTC(input, format, locale, strict, false);\n    }\n\n    var prototypeMin = deprecate(\n         'moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',\n         function () {\n             var other = local__createLocal.apply(null, arguments);\n             if (this.isValid() && other.isValid()) {\n                 return other < this ? this : other;\n             } else {\n                 return valid__createInvalid();\n             }\n         }\n     );\n\n    var prototypeMax = deprecate(\n        'moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',\n        function () {\n            var other = local__createLocal.apply(null, arguments);\n            if (this.isValid() && other.isValid()) {\n                return other > this ? this : other;\n            } else {\n                return valid__createInvalid();\n            }\n        }\n    );\n\n    // Pick a moment m from moments so that m[fn](other) is true for all\n    // other. This relies on the function fn to be transitive.\n    //\n    // moments should either be an array of moment objects or an array, whose\n    // first element is an array of moment objects.\n    function pickBy(fn, moments) {\n        var res, i;\n        if (moments.length === 1 && isArray(moments[0])) {\n            moments = moments[0];\n        }\n        if (!moments.length) {\n            return local__createLocal();\n        }\n        res = moments[0];\n        for (i = 1; i < moments.length; ++i) {\n            if (!moments[i].isValid() || moments[i][fn](res)) {\n                res = moments[i];\n            }\n        }\n        return res;\n    }\n\n    // TODO: Use [].sort instead?\n    function min () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isBefore', args);\n    }\n\n    function max () {\n        var args = [].slice.call(arguments, 0);\n\n        return pickBy('isAfter', args);\n    }\n\n    var now = function () {\n        return Date.now ? Date.now() : +(new Date());\n    };\n\n    function Duration (duration) {\n        var normalizedInput = normalizeObjectUnits(duration),\n            years = normalizedInput.year || 0,\n            quarters = normalizedInput.quarter || 0,\n            months = normalizedInput.month || 0,\n            weeks = normalizedInput.week || 0,\n            days = normalizedInput.day || 0,\n            hours = normalizedInput.hour || 0,\n            minutes = normalizedInput.minute || 0,\n            seconds = normalizedInput.second || 0,\n            milliseconds = normalizedInput.millisecond || 0;\n\n        // representation for dateAddRemove\n        this._milliseconds = +milliseconds +\n            seconds * 1e3 + // 1000\n            minutes * 6e4 + // 1000 * 60\n            hours * 36e5; // 1000 * 60 * 60\n        // Because of dateAddRemove treats 24 hours as different from a\n        // day when working around DST, we need to store them separately\n        this._days = +days +\n            weeks * 7;\n        // It is impossible translate months into days without knowing\n        // which months you are are talking about, so we have to store\n        // it separately.\n        this._months = +months +\n            quarters * 3 +\n            years * 12;\n\n        this._data = {};\n\n        this._locale = locale_locales__getLocale();\n\n        this._bubble();\n    }\n\n    function isDuration (obj) {\n        return obj instanceof Duration;\n    }\n\n    // FORMATTING\n\n    function offset (token, separator) {\n        addFormatToken(token, 0, 0, function () {\n            var offset = this.utcOffset();\n            var sign = '+';\n            if (offset < 0) {\n                offset = -offset;\n                sign = '-';\n            }\n            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);\n        });\n    }\n\n    offset('Z', ':');\n    offset('ZZ', '');\n\n    // PARSING\n\n    addRegexToken('Z',  matchShortOffset);\n    addRegexToken('ZZ', matchShortOffset);\n    addParseToken(['Z', 'ZZ'], function (input, array, config) {\n        config._useUTC = true;\n        config._tzm = offsetFromString(matchShortOffset, input);\n    });\n\n    // HELPERS\n\n    // timezone chunker\n    // '+10:00' > ['10',  '00']\n    // '-1530'  > ['-15', '30']\n    var chunkOffset = /([\\+\\-]|\\d\\d)/gi;\n\n    function offsetFromString(matcher, string) {\n        var matches = ((string || '').match(matcher) || []);\n        var chunk   = matches[matches.length - 1] || [];\n        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];\n        var minutes = +(parts[1] * 60) + toInt(parts[2]);\n\n        return parts[0] === '+' ? minutes : -minutes;\n    }\n\n    // Return a moment from input, that is local/utc/zone equivalent to model.\n    function cloneWithOffset(input, model) {\n        var res, diff;\n        if (model._isUTC) {\n            res = model.clone();\n            diff = (isMoment(input) || isDate(input) ? +input : +local__createLocal(input)) - (+res);\n            // Use low-level api, because this fn is low-level api.\n            res._d.setTime(+res._d + diff);\n            utils_hooks__hooks.updateOffset(res, false);\n            return res;\n        } else {\n            return local__createLocal(input).local();\n        }\n    }\n\n    function getDateOffset (m) {\n        // On Firefox.24 Date#getTimezoneOffset returns a floating point.\n        // https://github.com/moment/moment/pull/1871\n        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;\n    }\n\n    // HOOKS\n\n    // This function will be called whenever a moment is mutated.\n    // It is intended to keep the offset in sync with the timezone.\n    utils_hooks__hooks.updateOffset = function () {};\n\n    // MOMENTS\n\n    // keepLocalTime = true means only change the timezone, without\n    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->\n    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset\n    // +0200, so we adjust the time as needed, to be valid.\n    //\n    // Keeping the time actually adds/subtracts (one hour)\n    // from the actual represented time. That is why we call updateOffset\n    // a second time. In case it wants us to change the offset again\n    // _changeInProgress == true case, then we have to adjust, because\n    // there is no such time in the given timezone.\n    function getSetOffset (input, keepLocalTime) {\n        var offset = this._offset || 0,\n            localAdjust;\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        if (input != null) {\n            if (typeof input === 'string') {\n                input = offsetFromString(matchShortOffset, input);\n            } else if (Math.abs(input) < 16) {\n                input = input * 60;\n            }\n            if (!this._isUTC && keepLocalTime) {\n                localAdjust = getDateOffset(this);\n            }\n            this._offset = input;\n            this._isUTC = true;\n            if (localAdjust != null) {\n                this.add(localAdjust, 'm');\n            }\n            if (offset !== input) {\n                if (!keepLocalTime || this._changeInProgress) {\n                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);\n                } else if (!this._changeInProgress) {\n                    this._changeInProgress = true;\n                    utils_hooks__hooks.updateOffset(this, true);\n                    this._changeInProgress = null;\n                }\n            }\n            return this;\n        } else {\n            return this._isUTC ? offset : getDateOffset(this);\n        }\n    }\n\n    function getSetZone (input, keepLocalTime) {\n        if (input != null) {\n            if (typeof input !== 'string') {\n                input = -input;\n            }\n\n            this.utcOffset(input, keepLocalTime);\n\n            return this;\n        } else {\n            return -this.utcOffset();\n        }\n    }\n\n    function setOffsetToUTC (keepLocalTime) {\n        return this.utcOffset(0, keepLocalTime);\n    }\n\n    function setOffsetToLocal (keepLocalTime) {\n        if (this._isUTC) {\n            this.utcOffset(0, keepLocalTime);\n            this._isUTC = false;\n\n            if (keepLocalTime) {\n                this.subtract(getDateOffset(this), 'm');\n            }\n        }\n        return this;\n    }\n\n    function setOffsetToParsedOffset () {\n        if (this._tzm) {\n            this.utcOffset(this._tzm);\n        } else if (typeof this._i === 'string') {\n            this.utcOffset(offsetFromString(matchOffset, this._i));\n        }\n        return this;\n    }\n\n    function hasAlignedHourOffset (input) {\n        if (!this.isValid()) {\n            return false;\n        }\n        input = input ? local__createLocal(input).utcOffset() : 0;\n\n        return (this.utcOffset() - input) % 60 === 0;\n    }\n\n    function isDaylightSavingTime () {\n        return (\n            this.utcOffset() > this.clone().month(0).utcOffset() ||\n            this.utcOffset() > this.clone().month(5).utcOffset()\n        );\n    }\n\n    function isDaylightSavingTimeShifted () {\n        if (!isUndefined(this._isDSTShifted)) {\n            return this._isDSTShifted;\n        }\n\n        var c = {};\n\n        copyConfig(c, this);\n        c = prepareConfig(c);\n\n        if (c._a) {\n            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);\n            this._isDSTShifted = this.isValid() &&\n                compareArrays(c._a, other.toArray()) > 0;\n        } else {\n            this._isDSTShifted = false;\n        }\n\n        return this._isDSTShifted;\n    }\n\n    function isLocal () {\n        return this.isValid() ? !this._isUTC : false;\n    }\n\n    function isUtcOffset () {\n        return this.isValid() ? this._isUTC : false;\n    }\n\n    function isUtc () {\n        return this.isValid() ? this._isUTC && this._offset === 0 : false;\n    }\n\n    // ASP.NET json date format regex\n    var aspNetRegex = /^(\\-)?(?:(\\d*)[. ])?(\\d+)\\:(\\d+)(?:\\:(\\d+)\\.?(\\d{3})?\\d*)?$/;\n\n    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html\n    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere\n    // and further modified to allow for strings containing both week and day\n    var isoRegex = /^(-)?P(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)W)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?$/;\n\n    function create__createDuration (input, key) {\n        var duration = input,\n            // matching against regexp is expensive, do it on demand\n            match = null,\n            sign,\n            ret,\n            diffRes;\n\n        if (isDuration(input)) {\n            duration = {\n                ms : input._milliseconds,\n                d  : input._days,\n                M  : input._months\n            };\n        } else if (typeof input === 'number') {\n            duration = {};\n            if (key) {\n                duration[key] = input;\n            } else {\n                duration.milliseconds = input;\n            }\n        } else if (!!(match = aspNetRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y  : 0,\n                d  : toInt(match[DATE])        * sign,\n                h  : toInt(match[HOUR])        * sign,\n                m  : toInt(match[MINUTE])      * sign,\n                s  : toInt(match[SECOND])      * sign,\n                ms : toInt(match[MILLISECOND]) * sign\n            };\n        } else if (!!(match = isoRegex.exec(input))) {\n            sign = (match[1] === '-') ? -1 : 1;\n            duration = {\n                y : parseIso(match[2], sign),\n                M : parseIso(match[3], sign),\n                w : parseIso(match[4], sign),\n                d : parseIso(match[5], sign),\n                h : parseIso(match[6], sign),\n                m : parseIso(match[7], sign),\n                s : parseIso(match[8], sign)\n            };\n        } else if (duration == null) {// checks for null or undefined\n            duration = {};\n        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {\n            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));\n\n            duration = {};\n            duration.ms = diffRes.milliseconds;\n            duration.M = diffRes.months;\n        }\n\n        ret = new Duration(duration);\n\n        if (isDuration(input) && hasOwnProp(input, '_locale')) {\n            ret._locale = input._locale;\n        }\n\n        return ret;\n    }\n\n    create__createDuration.fn = Duration.prototype;\n\n    function parseIso (inp, sign) {\n        // We'd normally use ~~inp for this, but unfortunately it also\n        // converts floats to ints.\n        // inp may be undefined, so careful calling replace on it.\n        var res = inp && parseFloat(inp.replace(',', '.'));\n        // apply sign while we're at it\n        return (isNaN(res) ? 0 : res) * sign;\n    }\n\n    function positiveMomentsDifference(base, other) {\n        var res = {milliseconds: 0, months: 0};\n\n        res.months = other.month() - base.month() +\n            (other.year() - base.year()) * 12;\n        if (base.clone().add(res.months, 'M').isAfter(other)) {\n            --res.months;\n        }\n\n        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));\n\n        return res;\n    }\n\n    function momentsDifference(base, other) {\n        var res;\n        if (!(base.isValid() && other.isValid())) {\n            return {milliseconds: 0, months: 0};\n        }\n\n        other = cloneWithOffset(other, base);\n        if (base.isBefore(other)) {\n            res = positiveMomentsDifference(base, other);\n        } else {\n            res = positiveMomentsDifference(other, base);\n            res.milliseconds = -res.milliseconds;\n            res.months = -res.months;\n        }\n\n        return res;\n    }\n\n    function absRound (number) {\n        if (number < 0) {\n            return Math.round(-1 * number) * -1;\n        } else {\n            return Math.round(number);\n        }\n    }\n\n    // TODO: remove 'name' arg after deprecation is removed\n    function createAdder(direction, name) {\n        return function (val, period) {\n            var dur, tmp;\n            //invert the arguments, but complain about it\n            if (period !== null && !isNaN(+period)) {\n                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');\n                tmp = val; val = period; period = tmp;\n            }\n\n            val = typeof val === 'string' ? +val : val;\n            dur = create__createDuration(val, period);\n            add_subtract__addSubtract(this, dur, direction);\n            return this;\n        };\n    }\n\n    function add_subtract__addSubtract (mom, duration, isAdding, updateOffset) {\n        var milliseconds = duration._milliseconds,\n            days = absRound(duration._days),\n            months = absRound(duration._months);\n\n        if (!mom.isValid()) {\n            // No op\n            return;\n        }\n\n        updateOffset = updateOffset == null ? true : updateOffset;\n\n        if (milliseconds) {\n            mom._d.setTime(+mom._d + milliseconds * isAdding);\n        }\n        if (days) {\n            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);\n        }\n        if (months) {\n            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);\n        }\n        if (updateOffset) {\n            utils_hooks__hooks.updateOffset(mom, days || months);\n        }\n    }\n\n    var add_subtract__add      = createAdder(1, 'add');\n    var add_subtract__subtract = createAdder(-1, 'subtract');\n\n    function moment_calendar__calendar (time, formats) {\n        // We want to compare the start of today, vs this.\n        // Getting start-of-today depends on whether we're local/utc/offset or not.\n        var now = time || local__createLocal(),\n            sod = cloneWithOffset(now, this).startOf('day'),\n            diff = this.diff(sod, 'days', true),\n            format = diff < -6 ? 'sameElse' :\n                diff < -1 ? 'lastWeek' :\n                diff < 0 ? 'lastDay' :\n                diff < 1 ? 'sameDay' :\n                diff < 2 ? 'nextDay' :\n                diff < 7 ? 'nextWeek' : 'sameElse';\n\n        var output = formats && (isFunction(formats[format]) ? formats[format]() : formats[format]);\n\n        return this.format(output || this.localeData().calendar(format, this, local__createLocal(now)));\n    }\n\n    function clone () {\n        return new Moment(this);\n    }\n\n    function isAfter (input, units) {\n        var localInput = isMoment(input) ? input : local__createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n        if (units === 'millisecond') {\n            return +this > +localInput;\n        } else {\n            return +localInput < +this.clone().startOf(units);\n        }\n    }\n\n    function isBefore (input, units) {\n        var localInput = isMoment(input) ? input : local__createLocal(input);\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');\n        if (units === 'millisecond') {\n            return +this < +localInput;\n        } else {\n            return +this.clone().endOf(units) < +localInput;\n        }\n    }\n\n    function isBetween (from, to, units) {\n        return this.isAfter(from, units) && this.isBefore(to, units);\n    }\n\n    function isSame (input, units) {\n        var localInput = isMoment(input) ? input : local__createLocal(input),\n            inputMs;\n        if (!(this.isValid() && localInput.isValid())) {\n            return false;\n        }\n        units = normalizeUnits(units || 'millisecond');\n        if (units === 'millisecond') {\n            return +this === +localInput;\n        } else {\n            inputMs = +localInput;\n            return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));\n        }\n    }\n\n    function isSameOrAfter (input, units) {\n        return this.isSame(input, units) || this.isAfter(input,units);\n    }\n\n    function isSameOrBefore (input, units) {\n        return this.isSame(input, units) || this.isBefore(input,units);\n    }\n\n    function diff (input, units, asFloat) {\n        var that,\n            zoneDelta,\n            delta, output;\n\n        if (!this.isValid()) {\n            return NaN;\n        }\n\n        that = cloneWithOffset(input, this);\n\n        if (!that.isValid()) {\n            return NaN;\n        }\n\n        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;\n\n        units = normalizeUnits(units);\n\n        if (units === 'year' || units === 'month' || units === 'quarter') {\n            output = monthDiff(this, that);\n            if (units === 'quarter') {\n                output = output / 3;\n            } else if (units === 'year') {\n                output = output / 12;\n            }\n        } else {\n            delta = this - that;\n            output = units === 'second' ? delta / 1e3 : // 1000\n                units === 'minute' ? delta / 6e4 : // 1000 * 60\n                units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60\n                units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst\n                units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst\n                delta;\n        }\n        return asFloat ? output : absFloor(output);\n    }\n\n    function monthDiff (a, b) {\n        // difference in months\n        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),\n            // b is in (anchor - 1 month, anchor + 1 month)\n            anchor = a.clone().add(wholeMonthDiff, 'months'),\n            anchor2, adjust;\n\n        if (b - anchor < 0) {\n            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor - anchor2);\n        } else {\n            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');\n            // linear across the month\n            adjust = (b - anchor) / (anchor2 - anchor);\n        }\n\n        return -(wholeMonthDiff + adjust);\n    }\n\n    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';\n\n    function toString () {\n        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');\n    }\n\n    function moment_format__toISOString () {\n        var m = this.clone().utc();\n        if (0 < m.year() && m.year() <= 9999) {\n            if (isFunction(Date.prototype.toISOString)) {\n                // native implementation is ~50x faster, use it when we can\n                return this.toDate().toISOString();\n            } else {\n                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n            }\n        } else {\n            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');\n        }\n    }\n\n    function format (inputString) {\n        var output = formatMoment(this, inputString || utils_hooks__hooks.defaultFormat);\n        return this.localeData().postformat(output);\n    }\n\n    function from (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 local__createLocal(time).isValid())) {\n            return create__createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function fromNow (withoutSuffix) {\n        return this.from(local__createLocal(), withoutSuffix);\n    }\n\n    function to (time, withoutSuffix) {\n        if (this.isValid() &&\n                ((isMoment(time) && time.isValid()) ||\n                 local__createLocal(time).isValid())) {\n            return create__createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);\n        } else {\n            return this.localeData().invalidDate();\n        }\n    }\n\n    function toNow (withoutSuffix) {\n        return this.to(local__createLocal(), withoutSuffix);\n    }\n\n    // If passed a locale key, it will set the locale for this\n    // instance.  Otherwise, it will return the locale configuration\n    // variables for this instance.\n    function locale (key) {\n        var newLocaleData;\n\n        if (key === undefined) {\n            return this._locale._abbr;\n        } else {\n            newLocaleData = locale_locales__getLocale(key);\n            if (newLocaleData != null) {\n                this._locale = newLocaleData;\n            }\n            return this;\n        }\n    }\n\n    var lang = deprecate(\n        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',\n        function (key) {\n            if (key === undefined) {\n                return this.localeData();\n            } else {\n                return this.locale(key);\n            }\n        }\n    );\n\n    function localeData () {\n        return this._locale;\n    }\n\n    function startOf (units) {\n        units = normalizeUnits(units);\n        // the following switch intentionally omits break keywords\n        // to utilize falling through the cases.\n        switch (units) {\n        case 'year':\n            this.month(0);\n            /* falls through */\n        case 'quarter':\n        case 'month':\n            this.date(1);\n            /* falls through */\n        case 'week':\n        case 'isoWeek':\n        case 'day':\n            this.hours(0);\n            /* falls through */\n        case 'hour':\n            this.minutes(0);\n            /* falls through */\n        case 'minute':\n            this.seconds(0);\n            /* falls through */\n        case 'second':\n            this.milliseconds(0);\n        }\n\n        // weeks are a special case\n        if (units === 'week') {\n            this.weekday(0);\n        }\n        if (units === 'isoWeek') {\n            this.isoWeekday(1);\n        }\n\n        // quarters are also special\n        if (units === 'quarter') {\n            this.month(Math.floor(this.month() / 3) * 3);\n        }\n\n        return this;\n    }\n\n    function endOf (units) {\n        units = normalizeUnits(units);\n        if (units === undefined || units === 'millisecond') {\n            return this;\n        }\n        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');\n    }\n\n    function to_type__valueOf () {\n        return +this._d - ((this._offset || 0) * 60000);\n    }\n\n    function unix () {\n        return Math.floor(+this / 1000);\n    }\n\n    function toDate () {\n        return this._offset ? new Date(+this) : this._d;\n    }\n\n    function toArray () {\n        var m = this;\n        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];\n    }\n\n    function toObject () {\n        var m = this;\n        return {\n            years: m.year(),\n            months: m.month(),\n            date: m.date(),\n            hours: m.hours(),\n            minutes: m.minutes(),\n            seconds: m.seconds(),\n            milliseconds: m.milliseconds()\n        };\n    }\n\n    function toJSON () {\n        // new Date(NaN).toJSON() === null\n        return this.isValid() ? this.toISOString() : null;\n    }\n\n    function moment_valid__isValid () {\n        return valid__isValid(this);\n    }\n\n    function parsingFlags () {\n        return extend({}, getParsingFlags(this));\n    }\n\n    function invalidAt () {\n        return getParsingFlags(this).overflow;\n    }\n\n    function creationData() {\n        return {\n            input: this._i,\n            format: this._f,\n            locale: this._locale,\n            isUTC: this._isUTC,\n            strict: this._strict\n        };\n    }\n\n    // FORMATTING\n\n    addFormatToken(0, ['gg', 2], 0, function () {\n        return this.weekYear() % 100;\n    });\n\n    addFormatToken(0, ['GG', 2], 0, function () {\n        return this.isoWeekYear() % 100;\n    });\n\n    function addWeekYearFormatToken (token, getter) {\n        addFormatToken(0, [token, token.length], 0, getter);\n    }\n\n    addWeekYearFormatToken('gggg',     'weekYear');\n    addWeekYearFormatToken('ggggg',    'weekYear');\n    addWeekYearFormatToken('GGGG',  'isoWeekYear');\n    addWeekYearFormatToken('GGGGG', 'isoWeekYear');\n\n    // ALIASES\n\n    addUnitAlias('weekYear', 'gg');\n    addUnitAlias('isoWeekYear', 'GG');\n\n    // PARSING\n\n    addRegexToken('G',      matchSigned);\n    addRegexToken('g',      matchSigned);\n    addRegexToken('GG',     match1to2, match2);\n    addRegexToken('gg',     match1to2, match2);\n    addRegexToken('GGGG',   match1to4, match4);\n    addRegexToken('gggg',   match1to4, match4);\n    addRegexToken('GGGGG',  match1to6, match6);\n    addRegexToken('ggggg',  match1to6, match6);\n\n    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {\n        week[token.substr(0, 2)] = toInt(input);\n    });\n\n    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {\n        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);\n    });\n\n    // MOMENTS\n\n    function getSetWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input,\n                this.week(),\n                this.weekday(),\n                this.localeData()._week.dow,\n                this.localeData()._week.doy);\n    }\n\n    function getSetISOWeekYear (input) {\n        return getSetWeekYearHelper.call(this,\n                input, this.isoWeek(), this.isoWeekday(), 1, 4);\n    }\n\n    function getISOWeeksInYear () {\n        return weeksInYear(this.year(), 1, 4);\n    }\n\n    function getWeeksInYear () {\n        var weekInfo = this.localeData()._week;\n        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);\n    }\n\n    function getSetWeekYearHelper(input, week, weekday, dow, doy) {\n        var weeksTarget;\n        if (input == null) {\n            return weekOfYear(this, dow, doy).year;\n        } else {\n            weeksTarget = weeksInYear(input, dow, doy);\n            if (week > weeksTarget) {\n                week = weeksTarget;\n            }\n            return setWeekAll.call(this, input, week, weekday, dow, doy);\n        }\n    }\n\n    function setWeekAll(weekYear, week, weekday, dow, doy) {\n        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),\n            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);\n\n        this.year(date.getUTCFullYear());\n        this.month(date.getUTCMonth());\n        this.date(date.getUTCDate());\n        return this;\n    }\n\n    // FORMATTING\n\n    addFormatToken('Q', 0, 'Qo', 'quarter');\n\n    // ALIASES\n\n    addUnitAlias('quarter', 'Q');\n\n    // PARSING\n\n    addRegexToken('Q', match1);\n    addParseToken('Q', function (input, array) {\n        array[MONTH] = (toInt(input) - 1) * 3;\n    });\n\n    // MOMENTS\n\n    function getSetQuarter (input) {\n        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);\n    }\n\n    // FORMATTING\n\n    addFormatToken('w', ['ww', 2], 'wo', 'week');\n    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');\n\n    // ALIASES\n\n    addUnitAlias('week', 'w');\n    addUnitAlias('isoWeek', 'W');\n\n    // PARSING\n\n    addRegexToken('w',  match1to2);\n    addRegexToken('ww', match1to2, match2);\n    addRegexToken('W',  match1to2);\n    addRegexToken('WW', match1to2, match2);\n\n    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {\n        week[token.substr(0, 1)] = toInt(input);\n    });\n\n    // HELPERS\n\n    // LOCALES\n\n    function localeWeek (mom) {\n        return weekOfYear(mom, this._week.dow, this._week.doy).week;\n    }\n\n    var defaultLocaleWeek = {\n        dow : 0, // Sunday is the first day of the week.\n        doy : 6  // The week that contains Jan 1st is the first week of the year.\n    };\n\n    function localeFirstDayOfWeek () {\n        return this._week.dow;\n    }\n\n    function localeFirstDayOfYear () {\n        return this._week.doy;\n    }\n\n    // MOMENTS\n\n    function getSetWeek (input) {\n        var week = this.localeData().week(this);\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    function getSetISOWeek (input) {\n        var week = weekOfYear(this, 1, 4).week;\n        return input == null ? week : this.add((input - week) * 7, 'd');\n    }\n\n    // FORMATTING\n\n    addFormatToken('D', ['DD', 2], 'Do', 'date');\n\n    // ALIASES\n\n    addUnitAlias('date', 'D');\n\n    // PARSING\n\n    addRegexToken('D',  match1to2);\n    addRegexToken('DD', match1to2, match2);\n    addRegexToken('Do', function (isStrict, locale) {\n        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;\n    });\n\n    addParseToken(['D', 'DD'], DATE);\n    addParseToken('Do', function (input, array) {\n        array[DATE] = toInt(input.match(match1to2)[0], 10);\n    });\n\n    // MOMENTS\n\n    var getSetDayOfMonth = makeGetSet('Date', true);\n\n    // FORMATTING\n\n    addFormatToken('d', 0, 'do', 'day');\n\n    addFormatToken('dd', 0, 0, function (format) {\n        return this.localeData().weekdaysMin(this, format);\n    });\n\n    addFormatToken('ddd', 0, 0, function (format) {\n        return this.localeData().weekdaysShort(this, format);\n    });\n\n    addFormatToken('dddd', 0, 0, function (format) {\n        return this.localeData().weekdays(this, format);\n    });\n\n    addFormatToken('e', 0, 0, 'weekday');\n    addFormatToken('E', 0, 0, 'isoWeekday');\n\n    // ALIASES\n\n    addUnitAlias('day', 'd');\n    addUnitAlias('weekday', 'e');\n    addUnitAlias('isoWeekday', 'E');\n\n    // PARSING\n\n    addRegexToken('d',    match1to2);\n    addRegexToken('e',    match1to2);\n    addRegexToken('E',    match1to2);\n    addRegexToken('dd',   matchWord);\n    addRegexToken('ddd',  matchWord);\n    addRegexToken('dddd', matchWord);\n\n    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {\n        var weekday = config._locale.weekdaysParse(input, token, config._strict);\n        // if we didn't get a weekday name, mark the date as invalid\n        if (weekday != null) {\n            week.d = weekday;\n        } else {\n            getParsingFlags(config).invalidWeekday = input;\n        }\n    });\n\n    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {\n        week[token] = toInt(input);\n    });\n\n    // HELPERS\n\n    function parseWeekday(input, locale) {\n        if (typeof input !== 'string') {\n            return input;\n        }\n\n        if (!isNaN(input)) {\n            return parseInt(input, 10);\n        }\n\n        input = locale.weekdaysParse(input);\n        if (typeof input === 'number') {\n            return input;\n        }\n\n        return null;\n    }\n\n    // LOCALES\n\n    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');\n    function localeWeekdays (m, format) {\n        return isArray(this._weekdays) ? this._weekdays[m.day()] :\n            this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];\n    }\n\n    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');\n    function localeWeekdaysShort (m) {\n        return this._weekdaysShort[m.day()];\n    }\n\n    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');\n    function localeWeekdaysMin (m) {\n        return this._weekdaysMin[m.day()];\n    }\n\n    function localeWeekdaysParse (weekdayName, format, strict) {\n        var i, mom, regex;\n\n        if (!this._weekdaysParse) {\n            this._weekdaysParse = [];\n            this._minWeekdaysParse = [];\n            this._shortWeekdaysParse = [];\n            this._fullWeekdaysParse = [];\n        }\n\n        for (i = 0; i < 7; i++) {\n            // make the regex if we don't have it already\n\n            mom = local__createLocal([2000, 1]).day(i);\n            if (strict && !this._fullWeekdaysParse[i]) {\n                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');\n                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');\n                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');\n            }\n            if (!this._weekdaysParse[i]) {\n                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');\n                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');\n            }\n            // test the regex\n            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {\n                return i;\n            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {\n                return i;\n            }\n        }\n    }\n\n    // MOMENTS\n\n    function getSetDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();\n        if (input != null) {\n            input = parseWeekday(input, this.localeData());\n            return this.add(input - day, 'd');\n        } else {\n            return day;\n        }\n    }\n\n    function getSetLocaleDayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;\n        return input == null ? weekday : this.add(input - weekday, 'd');\n    }\n\n    function getSetISODayOfWeek (input) {\n        if (!this.isValid()) {\n            return input != null ? this : NaN;\n        }\n        // behaves the same as moment#day except\n        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)\n        // as a setter, sunday should belong to the previous week.\n        return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);\n    }\n\n    // FORMATTING\n\n    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');\n\n    // ALIASES\n\n    addUnitAlias('dayOfYear', 'DDD');\n\n    // PARSING\n\n    addRegexToken('DDD',  match1to3);\n    addRegexToken('DDDD', match3);\n    addParseToken(['DDD', 'DDDD'], function (input, array, config) {\n        config._dayOfYear = toInt(input);\n    });\n\n    // HELPERS\n\n    // MOMENTS\n\n    function getSetDayOfYear (input) {\n        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;\n        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');\n    }\n\n    // FORMATTING\n\n    function hFormat() {\n        return this.hours() % 12 || 12;\n    }\n\n    addFormatToken('H', ['HH', 2], 0, 'hour');\n    addFormatToken('h', ['hh', 2], 0, hFormat);\n\n    addFormatToken('hmm', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('hmmss', 0, 0, function () {\n        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    addFormatToken('Hmm', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2);\n    });\n\n    addFormatToken('Hmmss', 0, 0, function () {\n        return '' + this.hours() + zeroFill(this.minutes(), 2) +\n            zeroFill(this.seconds(), 2);\n    });\n\n    function meridiem (token, lowercase) {\n        addFormatToken(token, 0, 0, function () {\n            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);\n        });\n    }\n\n    meridiem('a', true);\n    meridiem('A', false);\n\n    // ALIASES\n\n    addUnitAlias('hour', 'h');\n\n    // PARSING\n\n    function matchMeridiem (isStrict, locale) {\n        return locale._meridiemParse;\n    }\n\n    addRegexToken('a',  matchMeridiem);\n    addRegexToken('A',  matchMeridiem);\n    addRegexToken('H',  match1to2);\n    addRegexToken('h',  match1to2);\n    addRegexToken('HH', match1to2, match2);\n    addRegexToken('hh', match1to2, match2);\n\n    addRegexToken('hmm', match3to4);\n    addRegexToken('hmmss', match5to6);\n    addRegexToken('Hmm', match3to4);\n    addRegexToken('Hmmss', match5to6);\n\n    addParseToken(['H', 'HH'], HOUR);\n    addParseToken(['a', 'A'], function (input, array, config) {\n        config._isPm = config._locale.isPM(input);\n        config._meridiem = input;\n    });\n    addParseToken(['h', 'hh'], function (input, array, config) {\n        array[HOUR] = toInt(input);\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n        getParsingFlags(config).bigHour = true;\n    });\n    addParseToken('Hmm', function (input, array, config) {\n        var pos = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos));\n        array[MINUTE] = toInt(input.substr(pos));\n    });\n    addParseToken('Hmmss', function (input, array, config) {\n        var pos1 = input.length - 4;\n        var pos2 = input.length - 2;\n        array[HOUR] = toInt(input.substr(0, pos1));\n        array[MINUTE] = toInt(input.substr(pos1, 2));\n        array[SECOND] = toInt(input.substr(pos2));\n    });\n\n    // LOCALES\n\n    function localeIsPM (input) {\n        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays\n        // Using charAt should be more compatible.\n        return ((input + '').toLowerCase().charAt(0) === 'p');\n    }\n\n    var defaultLocaleMeridiemParse = /[ap]\\.?m?\\.?/i;\n    function localeMeridiem (hours, minutes, isLower) {\n        if (hours > 11) {\n            return isLower ? 'pm' : 'PM';\n        } else {\n            return isLower ? 'am' : 'AM';\n        }\n    }\n\n\n    // MOMENTS\n\n    // Setting the hour should keep the time, because the user explicitly\n    // specified which hour he wants. So trying to maintain the same hour (in\n    // a new timezone) makes sense. Adding/subtracting hours does not follow\n    // this rule.\n    var getSetHour = makeGetSet('Hours', true);\n\n    // FORMATTING\n\n    addFormatToken('m', ['mm', 2], 0, 'minute');\n\n    // ALIASES\n\n    addUnitAlias('minute', 'm');\n\n    // PARSING\n\n    addRegexToken('m',  match1to2);\n    addRegexToken('mm', match1to2, match2);\n    addParseToken(['m', 'mm'], MINUTE);\n\n    // MOMENTS\n\n    var getSetMinute = makeGetSet('Minutes', false);\n\n    // FORMATTING\n\n    addFormatToken('s', ['ss', 2], 0, 'second');\n\n    // ALIASES\n\n    addUnitAlias('second', 's');\n\n    // PARSING\n\n    addRegexToken('s',  match1to2);\n    addRegexToken('ss', match1to2, match2);\n    addParseToken(['s', 'ss'], SECOND);\n\n    // MOMENTS\n\n    var getSetSecond = makeGetSet('Seconds', false);\n\n    // FORMATTING\n\n    addFormatToken('S', 0, 0, function () {\n        return ~~(this.millisecond() / 100);\n    });\n\n    addFormatToken(0, ['SS', 2], 0, function () {\n        return ~~(this.millisecond() / 10);\n    });\n\n    addFormatToken(0, ['SSS', 3], 0, 'millisecond');\n    addFormatToken(0, ['SSSS', 4], 0, function () {\n        return this.millisecond() * 10;\n    });\n    addFormatToken(0, ['SSSSS', 5], 0, function () {\n        return this.millisecond() * 100;\n    });\n    addFormatToken(0, ['SSSSSS', 6], 0, function () {\n        return this.millisecond() * 1000;\n    });\n    addFormatToken(0, ['SSSSSSS', 7], 0, function () {\n        return this.millisecond() * 10000;\n    });\n    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {\n        return this.millisecond() * 100000;\n    });\n    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {\n        return this.millisecond() * 1000000;\n    });\n\n\n    // ALIASES\n\n    addUnitAlias('millisecond', 'ms');\n\n    // PARSING\n\n    addRegexToken('S',    match1to3, match1);\n    addRegexToken('SS',   match1to3, match2);\n    addRegexToken('SSS',  match1to3, match3);\n\n    var token;\n    for (token = 'SSSS'; token.length <= 9; token += 'S') {\n        addRegexToken(token, matchUnsigned);\n    }\n\n    function parseMs(input, array) {\n        array[MILLISECOND] = toInt(('0.' + input) * 1000);\n    }\n\n    for (token = 'S'; token.length <= 9; token += 'S') {\n        addParseToken(token, parseMs);\n    }\n    // MOMENTS\n\n    var getSetMillisecond = makeGetSet('Milliseconds', false);\n\n    // FORMATTING\n\n    addFormatToken('z',  0, 0, 'zoneAbbr');\n    addFormatToken('zz', 0, 0, 'zoneName');\n\n    // MOMENTS\n\n    function getZoneAbbr () {\n        return this._isUTC ? 'UTC' : '';\n    }\n\n    function getZoneName () {\n        return this._isUTC ? 'Coordinated Universal Time' : '';\n    }\n\n    var momentPrototype__proto = Moment.prototype;\n\n    momentPrototype__proto.add               = add_subtract__add;\n    momentPrototype__proto.calendar          = moment_calendar__calendar;\n    momentPrototype__proto.clone             = clone;\n    momentPrototype__proto.diff              = diff;\n    momentPrototype__proto.endOf             = endOf;\n    momentPrototype__proto.format            = format;\n    momentPrototype__proto.from              = from;\n    momentPrototype__proto.fromNow           = fromNow;\n    momentPrototype__proto.to                = to;\n    momentPrototype__proto.toNow             = toNow;\n    momentPrototype__proto.get               = getSet;\n    momentPrototype__proto.invalidAt         = invalidAt;\n    momentPrototype__proto.isAfter           = isAfter;\n    momentPrototype__proto.isBefore          = isBefore;\n    momentPrototype__proto.isBetween         = isBetween;\n    momentPrototype__proto.isSame            = isSame;\n    momentPrototype__proto.isSameOrAfter     = isSameOrAfter;\n    momentPrototype__proto.isSameOrBefore    = isSameOrBefore;\n    momentPrototype__proto.isValid           = moment_valid__isValid;\n    momentPrototype__proto.lang              = lang;\n    momentPrototype__proto.locale            = locale;\n    momentPrototype__proto.localeData        = localeData;\n    momentPrototype__proto.max               = prototypeMax;\n    momentPrototype__proto.min               = prototypeMin;\n    momentPrototype__proto.parsingFlags      = parsingFlags;\n    momentPrototype__proto.set               = getSet;\n    momentPrototype__proto.startOf           = startOf;\n    momentPrototype__proto.subtract          = add_subtract__subtract;\n    momentPrototype__proto.toArray           = toArray;\n    momentPrototype__proto.toObject          = toObject;\n    momentPrototype__proto.toDate            = toDate;\n    momentPrototype__proto.toISOString       = moment_format__toISOString;\n    momentPrototype__proto.toJSON            = toJSON;\n    momentPrototype__proto.toString          = toString;\n    momentPrototype__proto.unix              = unix;\n    momentPrototype__proto.valueOf           = to_type__valueOf;\n    momentPrototype__proto.creationData      = creationData;\n\n    // Year\n    momentPrototype__proto.year       = getSetYear;\n    momentPrototype__proto.isLeapYear = getIsLeapYear;\n\n    // Week Year\n    momentPrototype__proto.weekYear    = getSetWeekYear;\n    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;\n\n    // Quarter\n    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;\n\n    // Month\n    momentPrototype__proto.month       = getSetMonth;\n    momentPrototype__proto.daysInMonth = getDaysInMonth;\n\n    // Week\n    momentPrototype__proto.week           = momentPrototype__proto.weeks        = getSetWeek;\n    momentPrototype__proto.isoWeek        = momentPrototype__proto.isoWeeks     = getSetISOWeek;\n    momentPrototype__proto.weeksInYear    = getWeeksInYear;\n    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;\n\n    // Day\n    momentPrototype__proto.date       = getSetDayOfMonth;\n    momentPrototype__proto.day        = momentPrototype__proto.days             = getSetDayOfWeek;\n    momentPrototype__proto.weekday    = getSetLocaleDayOfWeek;\n    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;\n    momentPrototype__proto.dayOfYear  = getSetDayOfYear;\n\n    // Hour\n    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;\n\n    // Minute\n    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;\n\n    // Second\n    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;\n\n    // Millisecond\n    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;\n\n    // Offset\n    momentPrototype__proto.utcOffset            = getSetOffset;\n    momentPrototype__proto.utc                  = setOffsetToUTC;\n    momentPrototype__proto.local                = setOffsetToLocal;\n    momentPrototype__proto.parseZone            = setOffsetToParsedOffset;\n    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;\n    momentPrototype__proto.isDST                = isDaylightSavingTime;\n    momentPrototype__proto.isDSTShifted         = isDaylightSavingTimeShifted;\n    momentPrototype__proto.isLocal              = isLocal;\n    momentPrototype__proto.isUtcOffset          = isUtcOffset;\n    momentPrototype__proto.isUtc                = isUtc;\n    momentPrototype__proto.isUTC                = isUtc;\n\n    // Timezone\n    momentPrototype__proto.zoneAbbr = getZoneAbbr;\n    momentPrototype__proto.zoneName = getZoneName;\n\n    // Deprecations\n    momentPrototype__proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);\n    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);\n    momentPrototype__proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);\n    momentPrototype__proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779', getSetZone);\n\n    var momentPrototype = momentPrototype__proto;\n\n    function moment__createUnix (input) {\n        return local__createLocal(input * 1000);\n    }\n\n    function moment__createInZone () {\n        return local__createLocal.apply(null, arguments).parseZone();\n    }\n\n    var defaultCalendar = {\n        sameDay : '[Today at] LT',\n        nextDay : '[Tomorrow at] LT',\n        nextWeek : 'dddd [at] LT',\n        lastDay : '[Yesterday at] LT',\n        lastWeek : '[Last] dddd [at] LT',\n        sameElse : 'L'\n    };\n\n    function locale_calendar__calendar (key, mom, now) {\n        var output = this._calendar[key];\n        return isFunction(output) ? output.call(mom, now) : output;\n    }\n\n    var defaultLongDateFormat = {\n        LTS  : 'h:mm:ss A',\n        LT   : 'h:mm A',\n        L    : 'MM/DD/YYYY',\n        LL   : 'MMMM D, YYYY',\n        LLL  : 'MMMM D, YYYY h:mm A',\n        LLLL : 'dddd, MMMM D, YYYY h:mm A'\n    };\n\n    function longDateFormat (key) {\n        var format = this._longDateFormat[key],\n            formatUpper = this._longDateFormat[key.toUpperCase()];\n\n        if (format || !formatUpper) {\n            return format;\n        }\n\n        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {\n            return val.slice(1);\n        });\n\n        return this._longDateFormat[key];\n    }\n\n    var defaultInvalidDate = 'Invalid date';\n\n    function invalidDate () {\n        return this._invalidDate;\n    }\n\n    var defaultOrdinal = '%d';\n    var defaultOrdinalParse = /\\d{1,2}/;\n\n    function ordinal (number) {\n        return this._ordinal.replace('%d', number);\n    }\n\n    function preParsePostFormat (string) {\n        return string;\n    }\n\n    var defaultRelativeTime = {\n        future : 'in %s',\n        past   : '%s ago',\n        s  : 'a few seconds',\n        m  : 'a minute',\n        mm : '%d minutes',\n        h  : 'an hour',\n        hh : '%d hours',\n        d  : 'a day',\n        dd : '%d days',\n        M  : 'a month',\n        MM : '%d months',\n        y  : 'a year',\n        yy : '%d years'\n    };\n\n    function relative__relativeTime (number, withoutSuffix, string, isFuture) {\n        var output = this._relativeTime[string];\n        return (isFunction(output)) ?\n            output(number, withoutSuffix, string, isFuture) :\n            output.replace(/%d/i, number);\n    }\n\n    function pastFuture (diff, output) {\n        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];\n        return isFunction(format) ? format(output) : format.replace(/%s/i, output);\n    }\n\n    var prototype__proto = Locale.prototype;\n\n    prototype__proto._calendar       = defaultCalendar;\n    prototype__proto.calendar        = locale_calendar__calendar;\n    prototype__proto._longDateFormat = defaultLongDateFormat;\n    prototype__proto.longDateFormat  = longDateFormat;\n    prototype__proto._invalidDate    = defaultInvalidDate;\n    prototype__proto.invalidDate     = invalidDate;\n    prototype__proto._ordinal        = defaultOrdinal;\n    prototype__proto.ordinal         = ordinal;\n    prototype__proto._ordinalParse   = defaultOrdinalParse;\n    prototype__proto.preparse        = preParsePostFormat;\n    prototype__proto.postformat      = preParsePostFormat;\n    prototype__proto._relativeTime   = defaultRelativeTime;\n    prototype__proto.relativeTime    = relative__relativeTime;\n    prototype__proto.pastFuture      = pastFuture;\n    prototype__proto.set             = locale_set__set;\n\n    // Month\n    prototype__proto.months            =        localeMonths;\n    prototype__proto._months           = defaultLocaleMonths;\n    prototype__proto.monthsShort       =        localeMonthsShort;\n    prototype__proto._monthsShort      = defaultLocaleMonthsShort;\n    prototype__proto.monthsParse       =        localeMonthsParse;\n    prototype__proto._monthsRegex      = defaultMonthsRegex;\n    prototype__proto.monthsRegex       = monthsRegex;\n    prototype__proto._monthsShortRegex = defaultMonthsShortRegex;\n    prototype__proto.monthsShortRegex  = monthsShortRegex;\n\n    // Week\n    prototype__proto.week = localeWeek;\n    prototype__proto._week = defaultLocaleWeek;\n    prototype__proto.firstDayOfYear = localeFirstDayOfYear;\n    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;\n\n    // Day of Week\n    prototype__proto.weekdays       =        localeWeekdays;\n    prototype__proto._weekdays      = defaultLocaleWeekdays;\n    prototype__proto.weekdaysMin    =        localeWeekdaysMin;\n    prototype__proto._weekdaysMin   = defaultLocaleWeekdaysMin;\n    prototype__proto.weekdaysShort  =        localeWeekdaysShort;\n    prototype__proto._weekdaysShort = defaultLocaleWeekdaysShort;\n    prototype__proto.weekdaysParse  =        localeWeekdaysParse;\n\n    // Hours\n    prototype__proto.isPM = localeIsPM;\n    prototype__proto._meridiemParse = defaultLocaleMeridiemParse;\n    prototype__proto.meridiem = localeMeridiem;\n\n    function lists__get (format, index, field, setter) {\n        var locale = locale_locales__getLocale();\n        var utc = create_utc__createUTC().set(setter, index);\n        return locale[field](utc, format);\n    }\n\n    function list (format, index, field, count, setter) {\n        if (typeof format === 'number') {\n            index = format;\n            format = undefined;\n        }\n\n        format = format || '';\n\n        if (index != null) {\n            return lists__get(format, index, field, setter);\n        }\n\n        var i;\n        var out = [];\n        for (i = 0; i < count; i++) {\n            out[i] = lists__get(format, i, field, setter);\n        }\n        return out;\n    }\n\n    function lists__listMonths (format, index) {\n        return list(format, index, 'months', 12, 'month');\n    }\n\n    function lists__listMonthsShort (format, index) {\n        return list(format, index, 'monthsShort', 12, 'month');\n    }\n\n    function lists__listWeekdays (format, index) {\n        return list(format, index, 'weekdays', 7, 'day');\n    }\n\n    function lists__listWeekdaysShort (format, index) {\n        return list(format, index, 'weekdaysShort', 7, 'day');\n    }\n\n    function lists__listWeekdaysMin (format, index) {\n        return list(format, index, 'weekdaysMin', 7, 'day');\n    }\n\n    locale_locales__getSetGlobalLocale('en', {\n        ordinalParse: /\\d{1,2}(th|st|nd|rd)/,\n        ordinal : function (number) {\n            var b = number % 10,\n                output = (toInt(number % 100 / 10) === 1) ? 'th' :\n                (b === 1) ? 'st' :\n                (b === 2) ? 'nd' :\n                (b === 3) ? 'rd' : 'th';\n            return number + output;\n        }\n    });\n\n    // Side effect imports\n    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);\n    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);\n\n    var mathAbs = Math.abs;\n\n    function duration_abs__abs () {\n        var data           = this._data;\n\n        this._milliseconds = mathAbs(this._milliseconds);\n        this._days         = mathAbs(this._days);\n        this._months       = mathAbs(this._months);\n\n        data.milliseconds  = mathAbs(data.milliseconds);\n        data.seconds       = mathAbs(data.seconds);\n        data.minutes       = mathAbs(data.minutes);\n        data.hours         = mathAbs(data.hours);\n        data.months        = mathAbs(data.months);\n        data.years         = mathAbs(data.years);\n\n        return this;\n    }\n\n    function duration_add_subtract__addSubtract (duration, input, value, direction) {\n        var other = create__createDuration(input, value);\n\n        duration._milliseconds += direction * other._milliseconds;\n        duration._days         += direction * other._days;\n        duration._months       += direction * other._months;\n\n        return duration._bubble();\n    }\n\n    // supports only 2.0-style add(1, 's') or add(duration)\n    function duration_add_subtract__add (input, value) {\n        return duration_add_subtract__addSubtract(this, input, value, 1);\n    }\n\n    // supports only 2.0-style subtract(1, 's') or subtract(duration)\n    function duration_add_subtract__subtract (input, value) {\n        return duration_add_subtract__addSubtract(this, input, value, -1);\n    }\n\n    function absCeil (number) {\n        if (number < 0) {\n            return Math.floor(number);\n        } else {\n            return Math.ceil(number);\n        }\n    }\n\n    function bubble () {\n        var milliseconds = this._milliseconds;\n        var days         = this._days;\n        var months       = this._months;\n        var data         = this._data;\n        var seconds, minutes, hours, years, monthsFromDays;\n\n        // if we have a mix of positive and negative values, bubble down first\n        // check: https://github.com/moment/moment/issues/2166\n        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||\n                (milliseconds <= 0 && days <= 0 && months <= 0))) {\n            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;\n            days = 0;\n            months = 0;\n        }\n\n        // The following code bubbles up values, see the tests for\n        // examples of what that means.\n        data.milliseconds = milliseconds % 1000;\n\n        seconds           = absFloor(milliseconds / 1000);\n        data.seconds      = seconds % 60;\n\n        minutes           = absFloor(seconds / 60);\n        data.minutes      = minutes % 60;\n\n        hours             = absFloor(minutes / 60);\n        data.hours        = hours % 24;\n\n        days += absFloor(hours / 24);\n\n        // convert days to months\n        monthsFromDays = absFloor(daysToMonths(days));\n        months += monthsFromDays;\n        days -= absCeil(monthsToDays(monthsFromDays));\n\n        // 12 months -> 1 year\n        years = absFloor(months / 12);\n        months %= 12;\n\n        data.days   = days;\n        data.months = months;\n        data.years  = years;\n\n        return this;\n    }\n\n    function daysToMonths (days) {\n        // 400 years have 146097 days (taking into account leap year rules)\n        // 400 years have 12 months === 4800\n        return days * 4800 / 146097;\n    }\n\n    function monthsToDays (months) {\n        // the reverse of daysToMonths\n        return months * 146097 / 4800;\n    }\n\n    function as (units) {\n        var days;\n        var months;\n        var milliseconds = this._milliseconds;\n\n        units = normalizeUnits(units);\n\n        if (units === 'month' || units === 'year') {\n            days   = this._days   + milliseconds / 864e5;\n            months = this._months + daysToMonths(days);\n            return units === 'month' ? months : months / 12;\n        } else {\n            // handle milliseconds separately because of floating point math errors (issue #1867)\n            days = this._days + Math.round(monthsToDays(this._months));\n            switch (units) {\n                case 'week'   : return days / 7     + milliseconds / 6048e5;\n                case 'day'    : return days         + milliseconds / 864e5;\n                case 'hour'   : return days * 24    + milliseconds / 36e5;\n                case 'minute' : return days * 1440  + milliseconds / 6e4;\n                case 'second' : return days * 86400 + milliseconds / 1000;\n                // Math.floor prevents floating point math errors here\n                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;\n                default: throw new Error('Unknown unit ' + units);\n            }\n        }\n    }\n\n    // TODO: Use this.as('ms')?\n    function duration_as__valueOf () {\n        return (\n            this._milliseconds +\n            this._days * 864e5 +\n            (this._months % 12) * 2592e6 +\n            toInt(this._months / 12) * 31536e6\n        );\n    }\n\n    function makeAs (alias) {\n        return function () {\n            return this.as(alias);\n        };\n    }\n\n    var asMilliseconds = makeAs('ms');\n    var asSeconds      = makeAs('s');\n    var asMinutes      = makeAs('m');\n    var asHours        = makeAs('h');\n    var asDays         = makeAs('d');\n    var asWeeks        = makeAs('w');\n    var asMonths       = makeAs('M');\n    var asYears        = makeAs('y');\n\n    function duration_get__get (units) {\n        units = normalizeUnits(units);\n        return this[units + 's']();\n    }\n\n    function makeGetter(name) {\n        return function () {\n            return this._data[name];\n        };\n    }\n\n    var milliseconds = makeGetter('milliseconds');\n    var seconds      = makeGetter('seconds');\n    var minutes      = makeGetter('minutes');\n    var hours        = makeGetter('hours');\n    var days         = makeGetter('days');\n    var months       = makeGetter('months');\n    var years        = makeGetter('years');\n\n    function weeks () {\n        return absFloor(this.days() / 7);\n    }\n\n    var round = Math.round;\n    var thresholds = {\n        s: 45,  // seconds to minute\n        m: 45,  // minutes to hour\n        h: 22,  // hours to day\n        d: 26,  // days to month\n        M: 11   // months to year\n    };\n\n    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize\n    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {\n        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);\n    }\n\n    function duration_humanize__relativeTime (posNegDuration, withoutSuffix, locale) {\n        var duration = create__createDuration(posNegDuration).abs();\n        var seconds  = round(duration.as('s'));\n        var minutes  = round(duration.as('m'));\n        var hours    = round(duration.as('h'));\n        var days     = round(duration.as('d'));\n        var months   = round(duration.as('M'));\n        var years    = round(duration.as('y'));\n\n        var a = seconds < thresholds.s && ['s', seconds]  ||\n                minutes <= 1           && ['m']           ||\n                minutes < thresholds.m && ['mm', minutes] ||\n                hours   <= 1           && ['h']           ||\n                hours   < thresholds.h && ['hh', hours]   ||\n                days    <= 1           && ['d']           ||\n                days    < thresholds.d && ['dd', days]    ||\n                months  <= 1           && ['M']           ||\n                months  < thresholds.M && ['MM', months]  ||\n                years   <= 1           && ['y']           || ['yy', years];\n\n        a[2] = withoutSuffix;\n        a[3] = +posNegDuration > 0;\n        a[4] = locale;\n        return substituteTimeAgo.apply(null, a);\n    }\n\n    // This function allows you to set a threshold for relative time strings\n    function duration_humanize__getSetRelativeTimeThreshold (threshold, limit) {\n        if (thresholds[threshold] === undefined) {\n            return false;\n        }\n        if (limit === undefined) {\n            return thresholds[threshold];\n        }\n        thresholds[threshold] = limit;\n        return true;\n    }\n\n    function humanize (withSuffix) {\n        var locale = this.localeData();\n        var output = duration_humanize__relativeTime(this, !withSuffix, locale);\n\n        if (withSuffix) {\n            output = locale.pastFuture(+this, output);\n        }\n\n        return locale.postformat(output);\n    }\n\n    var iso_string__abs = Math.abs;\n\n    function iso_string__toISOString() {\n        // for ISO strings we do not use the normal bubbling rules:\n        //  * milliseconds bubble up until they become hours\n        //  * days do not bubble at all\n        //  * months bubble up until they become years\n        // This is because there is no context-free conversion between hours and days\n        // (think of clock changes)\n        // and also not between days and months (28-31 days per month)\n        var seconds = iso_string__abs(this._milliseconds) / 1000;\n        var days         = iso_string__abs(this._days);\n        var months       = iso_string__abs(this._months);\n        var minutes, hours, years;\n\n        // 3600 seconds -> 60 minutes -> 1 hour\n        minutes           = absFloor(seconds / 60);\n        hours             = absFloor(minutes / 60);\n        seconds %= 60;\n        minutes %= 60;\n\n        // 12 months -> 1 year\n        years  = absFloor(months / 12);\n        months %= 12;\n\n\n        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js\n        var Y = years;\n        var M = months;\n        var D = days;\n        var h = hours;\n        var m = minutes;\n        var s = seconds;\n        var total = this.asSeconds();\n\n        if (!total) {\n            // this is the same as C#'s (Noda) and python (isodate)...\n            // but not other JS (goog.date)\n            return 'P0D';\n        }\n\n        return (total < 0 ? '-' : '') +\n            'P' +\n            (Y ? Y + 'Y' : '') +\n            (M ? M + 'M' : '') +\n            (D ? D + 'D' : '') +\n            ((h || m || s) ? 'T' : '') +\n            (h ? h + 'H' : '') +\n            (m ? m + 'M' : '') +\n            (s ? s + 'S' : '');\n    }\n\n    var duration_prototype__proto = Duration.prototype;\n\n    duration_prototype__proto.abs            = duration_abs__abs;\n    duration_prototype__proto.add            = duration_add_subtract__add;\n    duration_prototype__proto.subtract       = duration_add_subtract__subtract;\n    duration_prototype__proto.as             = as;\n    duration_prototype__proto.asMilliseconds = asMilliseconds;\n    duration_prototype__proto.asSeconds      = asSeconds;\n    duration_prototype__proto.asMinutes      = asMinutes;\n    duration_prototype__proto.asHours        = asHours;\n    duration_prototype__proto.asDays         = asDays;\n    duration_prototype__proto.asWeeks        = asWeeks;\n    duration_prototype__proto.asMonths       = asMonths;\n    duration_prototype__proto.asYears        = asYears;\n    duration_prototype__proto.valueOf        = duration_as__valueOf;\n    duration_prototype__proto._bubble        = bubble;\n    duration_prototype__proto.get            = duration_get__get;\n    duration_prototype__proto.milliseconds   = milliseconds;\n    duration_prototype__proto.seconds        = seconds;\n    duration_prototype__proto.minutes        = minutes;\n    duration_prototype__proto.hours          = hours;\n    duration_prototype__proto.days           = days;\n    duration_prototype__proto.weeks          = weeks;\n    duration_prototype__proto.months         = months;\n    duration_prototype__proto.years          = years;\n    duration_prototype__proto.humanize       = humanize;\n    duration_prototype__proto.toISOString    = iso_string__toISOString;\n    duration_prototype__proto.toString       = iso_string__toISOString;\n    duration_prototype__proto.toJSON         = iso_string__toISOString;\n    duration_prototype__proto.locale         = locale;\n    duration_prototype__proto.localeData     = localeData;\n\n    // Deprecations\n    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);\n    duration_prototype__proto.lang = lang;\n\n    // Side effect imports\n\n    // FORMATTING\n\n    addFormatToken('X', 0, 0, 'unix');\n    addFormatToken('x', 0, 0, 'valueOf');\n\n    // PARSING\n\n    addRegexToken('x', matchSigned);\n    addRegexToken('X', matchTimestamp);\n    addParseToken('X', function (input, array, config) {\n        config._d = new Date(parseFloat(input, 10) * 1000);\n    });\n    addParseToken('x', function (input, array, config) {\n        config._d = new Date(toInt(input));\n    });\n\n    // Side effect imports\n\n\n    utils_hooks__hooks.version = '2.12.0';\n\n    setHookCallback(local__createLocal);\n\n    utils_hooks__hooks.fn                    = momentPrototype;\n    utils_hooks__hooks.min                   = min;\n    utils_hooks__hooks.max                   = max;\n    utils_hooks__hooks.now                   = now;\n    utils_hooks__hooks.utc                   = create_utc__createUTC;\n    utils_hooks__hooks.unix                  = moment__createUnix;\n    utils_hooks__hooks.months                = lists__listMonths;\n    utils_hooks__hooks.isDate                = isDate;\n    utils_hooks__hooks.locale                = locale_locales__getSetGlobalLocale;\n    utils_hooks__hooks.invalid               = valid__createInvalid;\n    utils_hooks__hooks.duration              = create__createDuration;\n    utils_hooks__hooks.isMoment              = isMoment;\n    utils_hooks__hooks.weekdays              = lists__listWeekdays;\n    utils_hooks__hooks.parseZone             = moment__createInZone;\n    utils_hooks__hooks.localeData            = locale_locales__getLocale;\n    utils_hooks__hooks.isDuration            = isDuration;\n    utils_hooks__hooks.monthsShort           = lists__listMonthsShort;\n    utils_hooks__hooks.weekdaysMin           = lists__listWeekdaysMin;\n    utils_hooks__hooks.defineLocale          = defineLocale;\n    utils_hooks__hooks.updateLocale          = updateLocale;\n    utils_hooks__hooks.locales               = locale_locales__listLocales;\n    utils_hooks__hooks.weekdaysShort         = lists__listWeekdaysShort;\n    utils_hooks__hooks.normalizeUnits        = normalizeUnits;\n    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;\n    utils_hooks__hooks.prototype             = momentPrototype;\n\n    var _moment = utils_hooks__hooks;\n\n    return _moment;\n\n}));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/moment/moment.js\n ** module id = 97\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 98\n ** module chunks = 0\n **/","import regex_helper from 'helpers/regex_helpers';\nimport link_utils from 'helpers/link_utils';\n\nconst MIN_URL_LENGTH = 4;\nconst regExpStorage = {\n  simple_word: new RegExp(regex_helper.simple_word, 'gi')\n};\n\nexport default {\n  /**\n   * Linkify a string, replacing text urls with <a href=\"url\">url</a>\n   * Note: init must be called before this function can be used\n   *\n   * @param text - String to be linkified\n   * @param matched_links - Return param (pass by ref) - Array of links matched during linkification\n   * @param config - Hash of options for linkifier\n   *          add_wbrs (bool) - Add <wbr> tags to displayed text to allow wrapping?\n   *          truncate_length (int) - Truncate displayed links to this length\n   *          link_target (str) - Target attribute for links\n   *          link_titles (bool) - Add titles for links?\n   **/\n  linkify: function(text, matched_links, config) {\n    regExpStorage.simple_word.lastIndex = 0;\n    if (text.length >= MIN_URL_LENGTH && !regExpStorage.simple_word.test(text)){\n      text = this.match_and_replace(regex_helper.email, text, true, false, matched_links, config);\n      text = this.match_and_replace(regex_helper.url, text, false, true, matched_links, config);\n    }\n\n    return text;\n  },\n\n  /**\n   * Internal helper function for linkification\n   **/\n  match_and_replace: function(pattern, input, is_email, add_http, matched_links, config) {\n    var start = 0;\n    var offset = 0;\n    var match_length = 0;\n    var end_tag_pos = 0;\n    var close_anchor_re = /<\\/[aA]>/;\n\n    if (!regExpStorage[pattern]){\n      regExpStorage[pattern] = new RegExp(pattern, \"gi\");\n    }\n\n    var re = regExpStorage[pattern];\n    re.lastIndex = 0;\n\n    // config\n    var add_wbrs = (config.hasOwnProperty(\"add_wbrs\") ? config.add_wbrs : null);\n    var truncate_length = (config.hasOwnProperty(\"truncate_length\") ? config.truncate_length : 100);\n    var link_target = (config.hasOwnProperty(\"link_target\") ? config.link_target : \"_blank\");\n    var link_titles = (config.hasOwnProperty(\"link_titles\") ? config.link_titles : null);\n    var no_referrer = (config.hasOwnProperty(\"no_referrer\") ? config.no_referrer : null);\n\n    var match = {};\n    var max_iter = 20;\n    var cur_iter = 0;\n    while ((match = re.exec(input))) {\n      cur_iter++;\n      if (cur_iter > max_iter) {\n        break;\n      }\n\n      start = match.index; // start of match\n\n      // If we find an opening a tag, advance to its end and continue looking\n      var substr = input.substring(offset, start);\n      if (substr.search(/<[aA]/) >= 0) {\n        close_anchor_re.lastIndex = offset;\n        var close_anchor_pos = input.substring(offset, input.length).search(close_anchor_re);\n\n        // If we find an opening tag without a matching closing tag, just return the input we have\n        if (close_anchor_pos < 0) {\n          return input;\n        }\n\n        end_tag_pos = close_anchor_pos + offset;\n\n        // RegExp.lastIndex is used to tell the regexp where to start matching\n        re.lastIndex = end_tag_pos + 4;\n        offset = end_tag_pos + 4;\n\n        continue;\n      }\n\n      /* if the last character of the url match ends in a punctuation character\n       * and the match index is not at the beginning of the text input,\n       * we should remove the last character of the match\n       *  ex: (http://en.wikipedia.org/wiki/PC_Tools_(Central_Point_Software)) should not convert the last\n       *  parenthesis as part of the link\n       */\n      match[0] = link_utils.wrapped_url_fix(input, match[0]);\n\n      /* if the first character after the match is not url end punctuation\n       * we should break and not replace the match in the input text\n       *  ex: sys.tr would be linkified in \"sys.trace\" without this fix\n       */\n      if (!link_utils.url_should_be_replaced(input, match[0])) {\n        break;\n      }\n\n      // Do the actual replacement of text with anchor tag\n      match_length = match[0].length;\n      var address = input.substr(start, match_length);\n\n      // Since we escape before linkifying, we need to make sure that the matched link\n      // doesn't actually end with an escaped character (< or >)\n      // If it does, move the match backwards so as not to include the escaped character\n      var escaped_char_match_pos = address.search(/&(gt|lt)$/);\n      if (escaped_char_match_pos > 0 && input.length > start + match_length && input[start + match_length] === ';') {\n        var num_chars_matched = address.length - escaped_char_match_pos;\n        match_length -= num_chars_matched;\n        address = input.substr(start, match_length);\n      }\n      var actual = address;\n\n      if (add_http && !match[2]) {\n        actual = 'http://' + actual;\n      }\n\n      var replacement = '<a';\n\n      // link target?\n      if (link_target) {\n        replacement += ' target=\"' + link_target + '\"';\n      }\n\n      if (no_referrer) {\n        replacement += ' rel=\"noopener noreferrer\"';\n      }\n\n      replacement += ' href=\"';\n\n      if (is_email) {\n        replacement += 'mailto:';\n      }\n\n      actual = actual.replace(/\"/g, '%22');\n      replacement += actual + '\"';\n\n      // add title\n      if (link_titles) {\n        var title = is_email ? 'Email ' + actual : actual;\n        replacement += ' title=\"' + title + '\"';\n      }\n\n      // Truncate displayed text if requested\n      if (truncate_length && address.length > truncate_length) {\n        address = address.substr(0, truncate_length) + '...';\n      }\n\n      // Add word break tags to allow wrapping where appropriate\n      if (add_wbrs) {\n        address = address.replace(new RegExp(\"([/=])\", 'g'), \"<wbr>$1\");\n      }\n\n      replacement += '>' + address + '</a>';\n\n      // Record what was matched\n      if (matched_links) {\n        matched_links.push(actual);\n      }\n\n      // Do the replacement\n      input = input.slice(0, start) + replacement + input.slice(start + match_length, input.length);\n      re.lastIndex = start + replacement.length;\n      offset = start + replacement.length;\n    }\n\n    return input;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/linkify.js\n **/","import tld_list from \"helpers/tld_list\";\n\n// Create TLD list\nlet tld_blacklist = [\"py\", \"sh\"]; // remove py and sh to avoid linking script filenames\nlet tlds = _.pullAll(tld_list, tld_blacklist).join(\"|\");\n\nlet url_fragments = {\n  // url protocol blacklist taken from https://extranet.atlassian.com/display/SECURITY/URI+scheme+whitelisting\n  required_url_protocol: \"((?:(?!javascript|file|vbscript|view-source|resource|about|chrome|livescript|mocha|data)[a-z][\\\\w\\\\-]+:)(?:/{1,3}))\",\n  optional_url_protocol: \"((?:(?!javascript|file|vbscript|view-source|resource|about|chrome|livescript|mocha|data)[a-z][\\\\w\\\\-]+:)?(?:/{1,3}))?\",\n  optional_user_pass_auth: \"(?:\\\\S+(?::\\\\S*)?@.+)?\",\n  ip_address_exclusion:\n    // IP address exclusion\n    // private & local networks\n    \"(?!(?:10|127)(?:\\\\.\\\\d{1,3}){3})\" +\n    \"(?!(?:169\\\\.254|192\\\\.168)(?:\\\\.\\\\d{1,3}){2})\" +\n    \"(?!172\\\\.(?:1[6-9]|2\\\\d|3[0-1])(?:\\\\.\\\\d{1,3}){2})\",\n  ip_dotted_notation:\n    // IP address dotted notation octets\n    // excludes loopback network 0.0.0.0\n    // excludes reserved space >= 224.0.0.0\n    // excludes network & broacast addresses\n    // (first & last IP address of each class)\n    \"(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])\" +\n    \"(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}\" +\n    \"(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))\",\n  host_name: \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\",\n  domain_name: \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)?\",\n  tld_identifier: \"(?:\\\\.(?:\" + tlds + \"))\\\\.?(?:\" + tlds + \")?\",\n  tld_matcher: \"(?:\\\\.(?:[a-zA-Z]{2,12}))\\\\.?\",\n  port_number: \"(?::\\\\d{2,5})?\",\n  resource_path: \"(?:(?:,\\\\-|,\\\\+|[/?#:'()])\\\\S*)?\"\n};\n\nexport default {\n  simple_word: \"^[a-zA-Z0-9]*$\",\n  email: \"[a-z0-9]+(?:[.][a-z0-9!#$%&'*+=?^_`{|}~\\\\-]+)*@(?:[a-z0-9](?:[a-z0-9\\\\-]*[a-z0-9])?[.])+[a-z0-9](?:[a-z0-9\\\\-]*[a-z0-9])?\",\n  // Adapted from https://gist.github.com/dperini/729294 - MIT\n  url:\n    \"\\\\b\" +\n    \"(?:\" +\n      \"(\" +\n        url_fragments.required_url_protocol +\n        url_fragments.optional_user_pass_auth +\n        \"(?:\" +\n          \"[a-zA-Z\\\\u00a1-\\\\uffff0-9_\\\\-.\\(\\)]+\" +\n        \")\" +\n        url_fragments.port_number +\n        url_fragments.resource_path +\n      \")|(\" +\n        url_fragments.optional_url_protocol +\n        url_fragments.optional_user_pass_auth +\n        \"(?:\" +\n          \"localhost\" +\n          \"|\" +\n          url_fragments.ip_dotted_notation +\n          \"|\" +\n          url_fragments.host_name +\n          url_fragments.domain_name +\n          url_fragments.tld_identifier +\n        \")\" +\n        url_fragments.port_number +\n        url_fragments.resource_path +\n      \")\" +\n    \")\",\n  url_end_punctuation: '[\\\\s`!()\\\\[\\\\]:{};\\'\".,<>«»“”‘’&]',\n  invite_user_url: '^\\\\s*http(s?):\\/\\/((\\\\w+)\\.)?hipchat\\\\.com\\/invite\\/(\\\\d+)\\/(\\\\w+)((\\\\?utm_campaign\\\\=company_room_link)?)\\\\s*$'\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/regex_helpers.js\n **/","\nexport default [\n  \"aero\",\n  \"arpa\",\n  \"asia\",\n  \"biz\",\n  \"cat\",\n  \"com\",\n  \"coop\",\n  \"corp\",\n  \"edu\",\n  \"gov\",\n  \"green\",\n  \"info\",\n  \"int\",\n  \"io\",\n  \"jobs\",\n  \"local\",\n  \"mil\",\n  \"mobi\",\n  \"museum\",\n  \"name\",\n  \"net\",\n  \"org\",\n  \"post\",\n  \"pro\",\n  \"rocks\",\n  \"tel\",\n  \"travel\",\n  \"xxx\",\n  \"ac\",\n  \"ad\",\n  \"ae\",\n  \"af\",\n  \"ag\",\n  \"ai\",\n  \"al\",\n  \"am\",\n  \"an\",\n  \"ao\",\n  \"aq\",\n  \"ar\",\n  \"as\",\n  \"at\",\n  \"au\",\n  \"aw\",\n  \"ax\",\n  \"az\",\n  \"ba\",\n  \"bb\",\n  \"bd\",\n  \"be\",\n  \"bf\",\n  \"bg\",\n  \"bh\",\n  \"bi\",\n  \"bj\",\n  \"bm\",\n  \"bn\",\n  \"bo\",\n  \"br\",\n  \"bs\",\n  \"bt\",\n  \"bv\",\n  \"bw\",\n  \"by\",\n  \"bz\",\n  \"ca\",\n  \"cc\",\n  \"cd\",\n  \"cf\",\n  \"cg\",\n  \"ch\",\n  \"ci\",\n  \"ck\",\n  \"cl\",\n  \"cm\",\n  \"cn\",\n  \"co\",\n  \"cr\",\n  \"cs\",\n  \"cu\",\n  \"cv\",\n  \"cx\",\n  \"cy\",\n  \"cz\",\n  \"dd\",\n  \"de\",\n  \"dj\",\n  \"dk\",\n  \"dm\",\n  \"do\",\n  \"dz\",\n  \"ec\",\n  \"ee\",\n  \"eg\",\n  \"eh\",\n  \"er\",\n  \"es\",\n  \"et\",\n  \"eu\",\n  \"fi\",\n  \"fj\",\n  \"fk\",\n  \"fm\",\n  \"fo\",\n  \"fr\",\n  \"ga\",\n  \"gb\",\n  \"gd\",\n  \"ge\",\n  \"gf\",\n  \"gg\",\n  \"gh\",\n  \"gi\",\n  \"gl\",\n  \"gm\",\n  \"gn\",\n  \"gp\",\n  \"gq\",\n  \"gr\",\n  \"gs\",\n  \"gt\",\n  \"gu\",\n  \"gw\",\n  \"gy\",\n  \"hk\",\n  \"hm\",\n  \"hn\",\n  \"hr\",\n  \"ht\",\n  \"hu\",\n  \"id\",\n  \"ie\",\n  \"il\",\n  \"im\",\n  \"in\",\n  \"iq\",\n  \"ir\",\n  \"is\",\n  \"it\",\n  \"je\",\n  \"jm\",\n  \"jo\",\n  \"jp\",\n  \"ke\",\n  \"kg\",\n  \"kh\",\n  \"ki\",\n  \"km\",\n  \"kn\",\n  \"kp\",\n  \"kr\",\n  \"kw\",\n  \"ky\",\n  \"kz\",\n  \"la\",\n  \"lb\",\n  \"lc\",\n  \"li\",\n  \"lk\",\n  \"lr\",\n  \"ls\",\n  \"lt\",\n  \"lu\",\n  \"lv\",\n  \"ly\",\n  \"ma\",\n  \"mc\",\n  \"md\",\n  \"me\",\n  \"mg\",\n  \"mh\",\n  \"mk\",\n  \"ml\",\n  \"mm\",\n  \"mn\",\n  \"mo\",\n  \"mp\",\n  \"mq\",\n  \"mr\",\n  \"ms\",\n  \"mt\",\n  \"mu\",\n  \"mv\",\n  \"mw\",\n  \"mx\",\n  \"my\",\n  \"mz\",\n  \"na\",\n  \"nc\",\n  \"ne\",\n  \"nf\",\n  \"ng\",\n  \"ni\",\n  \"nl\",\n  \"no\",\n  \"np\",\n  \"nr\",\n  \"nu\",\n  \"nz\",\n  \"om\",\n  \"pa\",\n  \"pe\",\n  \"pf\",\n  \"pg\",\n  \"ph\",\n  \"pk\",\n  \"pl\",\n  \"pm\",\n  \"pn\",\n  \"pr\",\n  \"ps\",\n  \"pt\",\n  \"pw\",\n  \"py\",\n  \"qa\",\n  \"qc\",\n  \"qs\",\n  \"re\",\n  \"ro\",\n  \"rs\",\n  \"ru\",\n  \"rw\",\n  \"sa\",\n  \"sb\",\n  \"sc\",\n  \"sd\",\n  \"se\",\n  \"sg\",\n  \"sh\",\n  \"si\",\n  \"sj\",\n  \"ja\",\n  \"sk\",\n  \"sl\",\n  \"sm\",\n  \"sn\",\n  \"so\",\n  \"sr\",\n  \"ss\",\n  \"st\",\n  \"su\",\n  \"sv\",\n  \"sx\",\n  \"sy\",\n  \"sz\",\n  \"tc\",\n  \"td\",\n  \"tf\",\n  \"tg\",\n  \"th\",\n  \"tj\",\n  \"tk\",\n  \"tl\",\n  \"tm\",\n  \"tn\",\n  \"to\",\n  \"tp\",\n  \"tr\",\n  \"tt\",\n  \"tv\",\n  \"tw\",\n  \"tz\",\n  \"ua\",\n  \"ug\",\n  \"uk\",\n  \"us\",\n  \"uy\",\n  \"uz\",\n  \"va\",\n  \"vc\",\n  \"ve\",\n  \"vg\",\n  \"vi\",\n  \"vn\",\n  \"vu\",\n  \"wf\",\n  \"ws\",\n  \"ye\",\n  \"yt\",\n  \"yu\",\n  \"za\",\n  \"zm\",\n  \"zw\"\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/tld_list.js\n **/","import moment from 'moment';\nimport regex_helpers from 'helpers/regex_helpers';\nimport jid_utils from 'helpers/jid_utils';\n\nexport default {\n\n  url_regex: new RegExp(regex_helpers.url, \"i\"),\n  urls_regex: new RegExp(regex_helpers.url, \"gi\"),\n  url_end_punct_regex: new RegExp(regex_helpers.url_end_punctuation),\n  paired_punctuation: {\n    \"}\": \"{\",\n    \")\": \"(\",\n    \">\": \"<\"\n  },\n\n  /**\n   * Remove the query string from a url\n   *\n   * @method remove_query_string\n   * @param {String} url\n   * @returns {String} url without query string\n   */\n  remove_query_string: (url) => {\n    return url.split(/[?#]/)[0];\n  },\n\n  /**\n   * Creates a link object\n   *\n   * @method create_link_object\n   * @param {String} jid\n   * @param {String} ts\n   * @param {String} url\n   * @param {String} sender_name\n   * @returns {Object} a link object\n   */\n  create_link_object: function (jid, ts, url, sender_name) {\n    if (!/^https?:\\/\\//i.test(url)){\n      url = `http://${url}`;\n    }\n    return {\n      date: moment.utc(ts * 1000).toDate(),\n      group_id: jid_utils.group_id(jid),\n      id: _.uniqueId(),\n      user_name: sender_name,\n      url: url,\n      display_url: url.replace(/.*?:\\/\\//g, \"\")\n    };\n  },\n\n  /**\n   * Gets the urls from a string\n   *\n   * @method get_urls_from_string\n   * @param {String} input\n   * @returns {Array} array of urls found in the input\n   */\n  get_urls_from_string: function (input) {\n    return input.match(this.urls_regex);\n  },\n\n  /**\n   * Determines if the string contains a url\n   *\n   * @method contains_url\n   * @param {String} input\n   * @returns {Boolean}\n   */\n  contains_url: function (input) {\n    return this.url_regex.test(input);\n  },\n\n  /**\n   * Removes the resolution from a url (@2x.jpg, etc...)\n   *\n   * @method remove_resolution\n   * @param {String} url\n   * @returns {String} url without the resolution\n   */\n  remove_resolution(url){\n    return url.replace(/@\\d+x/i, \"\");\n  },\n\n  /**\n   * If the last character of the url match ends in a punctuation character\n   * and the match index is not at the beginning of the text input,\n   * we should remove the last character of the match\n   *  ex: (http://en.wikipedia.org/wiki/PC_Tools_(Central_Point_Software)) should not convert the last\n   *  parenthesis as part of the link\n   *\n   * @method wrapped_url_fix\n   * @param {String} input\n   * @param {String} match\n   * @returns {String} url\n   */\n  wrapped_url_fix(input, match) {\n    let match_index = input.indexOf(match);\n    let last_char_of_match = input.charAt(match_index + (match.length - 1));\n    let is_matched = this.url_end_punct_regex.test(last_char_of_match);\n\n    if (is_matched && this._should_slice(input, match)) {\n      return this.wrapped_url_fix(input, match.slice(0, -1));\n    }\n\n    return match;\n  },\n\n  /**\n   * Checks if the number of character is balanced\n   * (e.g. \"http://wikipedia.org/Curry(Computer Science)\" returns true\n   * but \"http://wikipedia.org/Curry(Computer Science))\" returns false)\n   *\n   * @param {String} Input\n   * @param {String} Last matching character\n   * @returns {Boolean}\n   */\n  _num_of_chars_balanced(match ,close_punctuation) {\n    let open_punctuation = this.paired_punctuation[close_punctuation];\n\n    // Use square brackets for non-escaping\n    let rule_for_open = new RegExp(`[${open_punctuation}]`, 'g');\n    let rule_for_close = new RegExp(`[${close_punctuation}]`, 'g');\n\n    let open_matches = match.match(rule_for_open) || [];\n    let close_matches = match.match(rule_for_close) || [];\n\n    return open_matches.length === close_matches.length ? true : false;\n  },\n\n  /**\n   * Check if the last character should be removed\n   * @param input\n   * @param match\n   * @returns {boolean}\n   * @private\n   */\n  _should_slice(input, match) {\n    let match_index = input.indexOf(match);\n    let last_char = input.charAt(match_index + (match.length - 1));\n\n    if (this.paired_punctuation[last_char]) {\n      if (!this._num_of_chars_balanced(match, last_char)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    return true;\n  },\n\n  /**\n   * If the first character after the match is not url end punctuation\n   * we should break and not replace the match in the input text\n   *  ex: sys.tr would be linkified in \"sys.trace\" without this fix\n   *\n   * @method url_should_be_replaced\n   * @param {String} input\n   * @param {String} match\n   * @returns {Boolean}\n   */\n  url_should_be_replaced(input, match) {\n    let match_index = input.indexOf(match);\n    let first_char_after_match = input.charAt(match_index + match.length);\n    if (first_char_after_match && !this.url_end_punct_regex.test(first_char_after_match)) {\n      return false;\n    }\n    return true;\n  },\n\n  /**\n   * Indentify that provided input text is invite link like https://hipchat.com/invite/3/dd0f069a19e1df8465287d5291aa347e\n   * or http://subdomain.hipchat.com/invite/3/dd0f069a19e1df8465287d5291aa347e?utm_campaign=company_room_link\n   *\n   * @param {String} input\n   * @returns {Boolean}\n   */\n  identify_invite_link(input){\n    let invite_link_regexp = new RegExp(regex_helpers.invite_user_url);\n    return invite_link_regexp.test(input);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/link_utils.js\n **/","\nexport default {\n\n  display_names: {},\n\n  is_private_chat: function (jid) {\n    return /@chat/.test(jid);\n  },\n\n  is_room: function (jid) {\n    return /@conf/.test(jid);\n  },\n\n  is_lobby: function(jid) {\n    return jid === 'lobby' || /^lobby@/.test(jid);\n  },\n\n  is_search: function(jid) {\n    return jid === 'search' || /^search@/.test(jid);\n  },\n\n  is_chat: function(jid) {\n    return (this.is_private_chat(jid) || this.is_room(jid)) && !this.is_lobby(jid) && !this.is_search(jid);\n  },\n\n  bare_jid: function (val) {\n    if (!val) {\n      return false;\n    }\n\n    return val.split('/')[0];\n  },\n\n  domain: function (val) {\n    if (!val) {\n      return false;\n    }\n\n    return val.split('@')[1].split('/')[0];\n  },\n\n  group_id: function (val) {\n    var node = this.node(val);\n    var id = node.substr(0, node.indexOf('_'));\n    return parseInt(id, 10);\n  },\n\n  is_private_room: function (privacy) {\n    return privacy === 'private';\n  },\n\n  is_public_room: function (privacy) {\n    return privacy === 'public';\n  },\n\n  node: function (val) {\n    if (!val) {\n      return false;\n    }\n\n    return val.split('@')[0];\n  },\n\n  resource: function (val) {\n    // we don't want to use val.split('/') here because there may be a slash\n    // in the resource\n    var i = val.indexOf('/');\n    if (i === -1) {\n      return null;\n    }\n    return val.substr(i + 1);\n  },\n\n  room_name: function (val) {\n    var node = this.node(val);\n    var name = node.substr(node.indexOf('_') + 1);\n    return name;\n  },\n\n  // used to sanitize jids before using them in something HTML/Xpath like a jQuery search\n  sanitize: function (val) {\n    return val.replace('\\\\', '\\\\\\\\');\n  },\n\n  user_id: function (val) {\n    var node = this.node(val);\n    if (node) {\n      var id = node.substr(node.indexOf('_') + 1);\n      if (id.match(/[0123456789]+/)) {\n        return parseInt(id, 10);\n      }\n    }\n\n    return null;\n  },\n\n  user_name: function (jid) {\n    return jid.split(\"/\")[1];\n  },\n\n  get_display_name: function (jid, default_name) {\n\n    if (typeof default_name === 'undefined') {\n      default_name = 'Unknown';\n    }\n    if (!jid || typeof jid === 'undefined') {\n      return default_name;\n    }\n\n    jid = this.bare_jid(jid);\n    var member = this.display_names[jid];\n    if (member) {\n      return member.name;\n    }\n\n    return default_name;\n  },\n\n  /**\n   * Builds a jid for the group instance\n   *\n   * @param groupName the name of the group\n   * @param groupId the id of the group\n   * @param conf the conference server string\n   * @returns {string}\n   */\n  build_group_jid: function(groupName, groupId, conf) {\n    return groupId + \"_\" + (typeof groupName === 'string' ? groupName.toLowerCase() : groupName) + \"@\" + conf;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/jid_utils.js\n **/","var EMOTICON_FINDER = /\\([A-Z0-9]+\\)/gim;\nimport config from 'config/app_config.js';\n\nfunction getEmoteRegex(shortcut) {\n  // Capture space/beginning char in regex to avoid emoticoning links like\n  // http://coderwall.com/p/euwpig?i=3&p=1&t=git (& becomes &amp; and matches ;p)\n  let regex = '(?:<([A-Z][A-Z0-9]*)\\\\b.*?(?:\\\\/>|<\\\\/\\\\1>)|(&[a-zA-Z0-9]{2,6};)(?!:-\\\\()|';\n  if (shortcut.indexOf('(') !== 1) {\n    regex += '(?:\\\\s|^)(' + shortcut + ')(?!\\\\w))';\n  } else {\n    regex += '(' + shortcut + '))';\n  }\n  return new RegExp(regex, 'gim');\n}\n\nvar Emoticons = {\n  path_prefix: '/',\n  emoticons: {},\n  smileys: {},\n  asset_base_uri: '',\n  web_server: '',\n  specials: {\n    scumbag: '_scumbagify',\n    dealwithit: '_shadesify'\n  },\n\n  init: function() {\n    this.addSmileys(this.emoticons);\n    return this;\n  },\n\n  addSmileys: function(smileys) {\n    _.each(smileys, (smiley, key) => {\n      if (smiley.shortcut === ':') {\n        smiley.shortcut = ':\\\\';\n      } else if (smiley.shortcut === '&gt;:-(') {\n        // Fix encoded angry face\n        smiley.shortcut = '>:-(';\n      }\n      if (!_.isRegExp(smiley.regex)) {\n        smiley.regex = getEmoteRegex(smiley.regex);\n      }\n\n      this.smileys[key] = smiley;\n    });\n\n    return this.smileys;\n  },\n\n  /**\n   * Add an word-based emoticon to the list of emoticons to check for\n   *\n   * @param filename - Name of the image file (the full path is created in the emoticon_text function)\n   * @param shortcut - Text used to create the emoticon (e.g. \"embarrassed\" or \"puking\" )\n   * @param height - Height in pixels of the image\n   * @param width - Width in pixels of the image\n   **/\n  add: function(filename, shortcut, height, width, type) {\n    var str = \"(\" + shortcut + \")\";\n    // Capture optional space char in regex to be compatible with non paren emoticons\n    // We need to check for space with emoticons like ;p to avoid emoticoning links like\n    // http://coderwall.com/p/euwpig?i=3&p=1&t=git (& becomes &amp; and matches ;p)\n    this.emoticons[str] = {\n      file: filename,\n      height: height,\n      width: width,\n      shortcut: '(' + shortcut + ')',\n      type: type\n    };\n  },\n\n  addBulk: function(emoticons, collection = {}) {\n    this.emoticons = _.cloneDeep(collection);\n\n    _.each(emoticons, (emoticon) => {\n      this.add(emoticon.path, emoticon.shortcut, emoticon.h, emoticon.w, emoticon.type);\n    });\n\n    return this.emoticons;\n  },\n\n  removeBulk: function(emoticons) {\n    let emoticonsMap = {};\n\n    for (let key of [ ...this.getEmoticonsKeys(emoticons) ]) {\n      emoticonsMap[key] = true;\n    }\n\n    _.forIn(this.emoticons, (emoticon, key) => {\n      if(!emoticonsMap[key]) {\n        delete this.emoticons[key];\n      }\n    });\n\n    return this.emoticons;\n  },\n\n  getEmoticonsKeys: function *(emoticons) {\n    for (let emoticon of emoticons) {\n      yield '(' + emoticon.shortcut + ')';\n    }\n  },\n\n  getEmoticons: function(message) {\n    return message.match(EMOTICON_FINDER) || [];\n  },\n\n  getEmoticonsInfo(message){\n    let usedEmoticons = this.getEmoticons(message);\n    return _.filter(this.emoticons, (emoticon) => {\n       return usedEmoticons.indexOf(emoticon.shortcut) !== -1;\n    });\n  },\n\n  /**\n   * Replace text emoticons with images\n   **/\n  render: function(message) {\n    let emoticons = this.getEmoticons(message);\n\n    if (emoticons.length) {\n      _.each(emoticons, shortcut => {\n        let emoticon = this.emoticons[shortcut.toLowerCase()];\n\n        if (emoticon) {\n          message = this._replaceWithImage(message, emoticon);\n        }\n      });\n    }\n\n    _.each(this.smileys, smiley => message = this._replaceWithImage(message, smiley));\n\n    return message;\n  },\n\n  _replaceWithImage: function(text, emoticon) {\n    var src = this._generateSrc(emoticon.file);\n    if (!emoticon.regex) {\n      emoticon.regex = getEmoteRegex('\\\\(' + emoticon.shortcut + '\\\\)');\n    }\n\n    // (not a word character)(smiley regex)(not a word character)\n    return text.replace(emoticon.regex, (match, p1, p2, p3) => {\n      if (p3) {\n        return `<img class=\"remoticon\" aria-label=\"${emoticon.shortcut}\" alt=\"${emoticon.shortcut}\" height=\"${emoticon.height}\" width=\"${emoticon.width}\" src=\"${src}\" onerror=\"if (HC.emoticon_resolution_helper) { HC.emoticon_resolution_helper(this); }\" />`;\n      }\n      return match;\n    });\n  },\n\n  renderConsole: function(message) {\n    try {\n      var emoticons = this.getEmoticons(message),\n          font = \"font-family: Helvetica Neue, Helvetica, Arial; font-size: 14px; font-weight: bold;\",\n          msg = \"%c\" + message,\n          args = [font];\n\n      emoticons.forEach((emoticon) => {\n        let emoticonInfo = this._getEmoticonInfo(emoticon, 1);\n\n        if (_.identity(emoticonInfo)) {\n          msg = msg.replace(emoticonInfo.regex, function(match, p1, p2, p3) {if (p3) { return \"%c%c\"; }});\n          args.push(\"font-size: \" + emoticonInfo.height + \"px; padding-left: \" + (emoticonInfo.width + 5) + \"px;\" +\n            \" line-height: 30px; background: url(\" + emoticonInfo.src + \") no-repeat 0/auto \" + emoticonInfo.height + \"px;\");\n          args.push(font);\n        }\n      });\n\n      args.unshift(msg);\n      console.log.apply(console, args);\n    } catch (ignored) {\n      console.log(message);\n    }\n  },\n\n  _getEmoticonInfo: function (shortcut, resolution) {\n    var emoticon = this.smileys[shortcut] || this.emoticons[shortcut];\n    if (!emoticon) {\n      return undefined;\n    }\n    var fileName = emoticon.file;\n    if (!emoticon.regex) {\n      emoticon.regex = getEmoteRegex('\\\\(' + emoticon.shortcut + '\\\\)');\n    }\n    return {\n      src: this._generateSrc(fileName, resolution),\n      regex: emoticon.regex,\n      height: parseInt(emoticon.height, 10) > 26 ? 26 : emoticon.height,\n      width: parseInt(emoticon.width, 10) > 26 ? 26 : emoticon.width\n    };\n  },\n\n  _generateSrc(fileName, resolution = 2) {\n    if (resolution > 1) {\n      let resolutionSuffix = `@${resolution}x`;\n      if (fileName.indexOf(resolutionSuffix) === -1){\n        fileName = fileName.split('.').join(resolution > 1 ? `${resolutionSuffix}.` : '.');\n      }\n    }\n    return this.path_prefix + '/' + fileName;\n  },\n\n  _replaceSpecials: function (node) {\n    var emotes = $(node).find('img.remoticon');\n    _.forOwn(this.specials, (apply, emote) => {\n      for (var i = 0; i < emotes.length; i++) {\n        if (emotes[i].getAttribute('src').match(`img/emoticons/${emote}`)\n          && emotes[i + 1]\n          && emotes[i].nextSibling === emotes[i + 1]\n          && emotes[i].getAttribute('src') !== emotes[i + 1].getAttribute('src')) {\n          this[apply](emotes[i], emotes[i + 1]);\n        }\n      }\n    });\n  },\n\n  _scumbagify: function (hat, scumbag) {\n    $(scumbag).on('load', function () {\n      var width = $(scumbag).width();\n      hat.style.display = 'block';\n      hat.parentNode.style.position = 'relative';\n      hat.style.position = 'absolute';\n      hat.style.top = scumbag.offsetTop - 3 + 'px';\n      hat.style.left = scumbag.offsetLeft + width / 2 - 10 + 'px';\n    });\n  },\n\n  _shadesify: function (shades, coolDude) {\n    $(shades).attr({\n      src: `https://${this.web_server}/wc/` + config.shades_icon,\n      width: 18,\n      height: 'auto'\n    });\n    $(coolDude).on('load', function () {\n      var width = $(coolDude).width(),\n        height = $(coolDude).height();\n      shades.parentNode.style.position = 'relative';\n      shades.style.display = 'block';\n      shades.style.position = 'absolute';\n      shades.style.top = coolDude.offsetTop + height / 2 - 3 + 'px';\n      shades.style.left = coolDude.offsetLeft + width / 2 - 9 + 'px';\n      $(shades).addClass('shadesify');\n    });\n  }\n};\n\nif (console) {\n  console.emote = function (msg) {\n    Emoticons.renderConsole.call(Emoticons, msg);\n  };\n}\n\nmodule.exports = Emoticons;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/emoticons.js\n **/","// This method of obtaining a reference to the global object needs to be\n// kept identical to the way it is obtained in runtime.js\nvar g =\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this;\n\n// Use `getOwnPropertyNames` because not all browsers support calling\n// `hasOwnProperty` on the global `self` object in a worker. See #183.\nvar hadRuntime = g.regeneratorRuntime &&\n  Object.getOwnPropertyNames(g).indexOf(\"regeneratorRuntime\") >= 0;\n\n// Save the old regeneratorRuntime in case it needs to be restored later.\nvar oldRuntime = hadRuntime && g.regeneratorRuntime;\n\n// Force reevalutation of runtime.js.\ng.regeneratorRuntime = undefined;\n\nmodule.exports = require(\"./runtime\");\n\nif (hadRuntime) {\n  // Restore the original runtime.\n  g.regeneratorRuntime = oldRuntime;\n} else {\n  // Remove the global property added by runtime.js.\n  try {\n    delete g.regeneratorRuntime;\n  } catch(e) {\n    g.regeneratorRuntime = undefined;\n  }\n}\n\nmodule.exports = { \"default\": module.exports, __esModule: true };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/regenerator/index.js\n ** module id = 105\n ** module chunks = 0\n **/","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n\"use strict\";\n\nvar _Symbol = require(\"babel-runtime/core-js/symbol\")[\"default\"];\n\nvar _Object$create = require(\"babel-runtime/core-js/object/create\")[\"default\"];\n\nvar _Object$setPrototypeOf = require(\"babel-runtime/core-js/object/set-prototype-of\")[\"default\"];\n\nvar _Promise = require(\"babel-runtime/core-js/promise\")[\"default\"];\n\n!(function (global) {\n  \"use strict\";\n\n  var hasOwn = Object.prototype.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof _Symbol === \"function\" ? _Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided, then outerFn.prototype instanceof Generator.\n    var generator = _Object$create((outerFn || Generator).prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype;\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] = GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      prototype[method] = function (arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function (genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor ? ctor === GeneratorFunction ||\n    // For the native GeneratorFunction constructor, the best we can\n    // do is to check its .name property.\n    (ctor.displayName || ctor.name) === \"GeneratorFunction\" : false;\n  };\n\n  runtime.mark = function (genFun) {\n    if (_Object$setPrototypeOf) {\n      _Object$setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = _Object$create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `value instanceof AwaitArgument` to determine if the yielded value is\n  // meant to be awaited. Some may consider the name of this method too\n  // cutesy, but they are curmudgeons.\n  runtime.awrap = function (arg) {\n    return new AwaitArgument(arg);\n  };\n\n  function AwaitArgument(arg) {\n    this.arg = arg;\n  }\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value instanceof AwaitArgument) {\n          return _Promise.resolve(value.arg).then(function (value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function (err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return _Promise.resolve(value).then(function (unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof process === \"object\" && process.domain) {\n      invoke = process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new _Promise(function (resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n      // If enqueue has been called before, then we want to wait until\n      // all previous Promises have been resolved before calling invoke,\n      // so that results are always delivered in the correct order. If\n      // enqueue has not been called before, then it is important to\n      // call invoke immediately, without waiting on a callback to fire,\n      // so that the async generator function has the opportunity to do\n      // any necessary setup in a predictable way. This predictability\n      // is why the Promise constructor synchronously invokes its\n      // executor callback, and why async functions synchronously\n      // execute code before the first await. Since we implement simple\n      // async functions in terms of async generators, it is especially\n      // important to get this right, even though it requires care.\n      previousPromise ? previousPromise.then(callInvokeWithMethodAndArg,\n      // Avoid propagating failures to Promises returned by later\n      // invocations of the iterator.\n      callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function (innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList));\n\n    return runtime.isGeneratorFunction(outerFn) ? iter // If outerFn is a generator, return the full iterator.\n    : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          if (method === \"return\" || method === \"throw\" && delegate.iterator[method] === undefined) {\n            // A return or throw (when the delegate iterator has no throw\n            // method) always terminates the yield* loop.\n            context.delegate = null;\n\n            // If the delegate iterator has a return method, give it a\n            // chance to clean up.\n            var returnMethod = delegate.iterator[\"return\"];\n            if (returnMethod) {\n              var record = tryCatch(returnMethod, delegate.iterator, arg);\n              if (record.type === \"throw\") {\n                // If the return method threw an exception, let that\n                // exception prevail over the original return or throw.\n                method = \"throw\";\n                arg = record.arg;\n                continue;\n              }\n            }\n\n            if (method === \"return\") {\n              // Continue with the outer return, now that the delegate\n              // iterator has been terminated.\n              continue;\n            }\n          }\n\n          var record = tryCatch(delegate.iterator[method], delegate.iterator, arg);\n\n          if (record.type === \"throw\") {\n            context.delegate = null;\n\n            // Like returning generator.throw(uncaught), but without the\n            // overhead of an extra function call.\n            method = \"throw\";\n            arg = record.arg;\n            continue;\n          }\n\n          // Delegate generator ran and handled its own exceptions so\n          // regardless of what the method was, we continue as if it is\n          // \"next\" with an undefined arg.\n          method = \"next\";\n          arg = undefined;\n\n          var info = record.arg;\n          if (info.done) {\n            context[delegate.resultName] = info.value;\n            context.next = delegate.nextLoc;\n          } else {\n            state = GenStateSuspendedYield;\n            return info;\n          }\n\n          context.delegate = null;\n        }\n\n        if (method === \"next\") {\n          if (state === GenStateSuspendedYield) {\n            context.sent = arg;\n          } else {\n            context.sent = undefined;\n          }\n        } else if (method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw arg;\n          }\n\n          if (context.dispatchException(arg)) {\n            // If the dispatched exception was caught by a catch block,\n            // then let that catch block handle the exception normally.\n            method = \"next\";\n            arg = undefined;\n          }\n        } else if (method === \"return\") {\n          context.abrupt(\"return\", arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done ? GenStateCompleted : GenStateSuspendedYield;\n\n          var info = {\n            value: record.arg,\n            done: context.done\n          };\n\n          if (record.arg === ContinueSentinel) {\n            if (context.delegate && method === \"next\") {\n              // Deliberately forget the last sent value so that we don't\n              // accidentally pass it on to the delegate.\n              arg = undefined;\n            }\n          } else {\n            return info;\n          }\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(arg) call above.\n          method = \"throw\";\n          arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[iteratorSymbol] = function () {\n    return this;\n  };\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  Gp.toString = function () {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function (object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n            next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function reset(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      this.sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" && hasOwn.call(this, name) && !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function stop() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function dispatchException(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n        return !!caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry && (type === \"break\" || type === \"continue\") && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.next = finallyEntry.finallyLoc;\n      } else {\n        this.complete(record);\n      }\n\n      return ContinueSentinel;\n    },\n\n    complete: function complete(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" || record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = record.arg;\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n    },\n\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      return ContinueSentinel;\n    }\n  };\n})(\n// Among the various tricks for obtaining a reference to the global\n// object, this seems to be the most reliable technique that does not\n// use indirect eval (which violates Content Security Policy).\ntypeof global === \"object\" ? global : typeof window === \"object\" ? window : typeof self === \"object\" ? self : undefined);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/regenerator/runtime.js\n ** module id = 106\n ** module chunks = 0\n **/","// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = setTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    clearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/process/browser.js\n ** module id = 107\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/get-iterator.js\n ** module id = 108\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/get-iterator.js\n ** module id = 109\n ** module chunks = 0\n **/","var anObject = require('./$.an-object')\n  , get      = require('./core.get-iterator-method');\nmodule.exports = require('./$.core').getIterator = function(it){\n  var iterFn = get(it);\n  if(typeof iterFn != 'function')throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.get-iterator.js\n ** module id = 110\n ** module chunks = 0\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return (0, _from2.default)(arr);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/toConsumableArray.js\n ** module id = 111\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/array/from\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/array/from.js\n ** module id = 112\n ** module chunks = 0\n **/","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/$.core').Array.from;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/array/from.js\n ** module id = 113\n ** module chunks = 0\n **/","'use strict';\nvar ctx         = require('./$.ctx')\n  , $export     = require('./$.export')\n  , toObject    = require('./$.to-object')\n  , call        = require('./$.iter-call')\n  , isArrayIter = require('./$.is-array-iter')\n  , toLength    = require('./$.to-length')\n  , getIterFn   = require('./core.get-iterator-method');\n$export($export.S + $export.F * !require('./$.iter-detect')(function(iter){ Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike/*, mapfn = undefined, thisArg = undefined*/){\n    var O       = toObject(arrayLike)\n      , C       = typeof this == 'function' ? this : Array\n      , $$      = arguments\n      , $$len   = $$.length\n      , mapfn   = $$len > 1 ? $$[1] : undefined\n      , mapping = mapfn !== undefined\n      , index   = 0\n      , iterFn  = getIterFn(O)\n      , length, result, step, iterator;\n    if(mapping)mapfn = ctx(mapfn, $$len > 2 ? $$[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if(iterFn != undefined && !(C == Array && isArrayIter(iterFn))){\n      for(iterator = iterFn.call(O), result = new C; !(step = iterator.next()).done; index++){\n        result[index] = mapping ? call(iterator, mapfn, [step.value, index], true) : step.value;\n      }\n    } else {\n      length = toLength(O.length);\n      for(result = new C(length); length > index; index++){\n        result[index] = mapping ? mapfn(O[index], index) : O[index];\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.array.from.js\n ** module id = 114\n ** module chunks = 0\n **/","export default {\n  analytics_publish_interval: 30000,                  // publish analytics events with this interval\n  analytics_save_interval: 3000,                      // save to storage analytics events with this interval\n  default_web_server: \"www.hipchat.com\",              // default web server\n  save_preferences_throttle_interval: 5 * 1000,       //the throttle timer for persisting preferences to the server\n  max_upload_size: 50,                                //max upload file size in Mb\n  file_download_timeout: 10000,                       //timeout for downloading files\n  scroll_to_bottom_offset: 25,                         //Scroll to bottom check offset\n  frozen_scroll_offset: 100,                          //Offset when we handle frozen scroll case\n  chat_scroll_duration: 200,                          //The duration of the autoscroll animation when a new message comes in\n  render_twitter_cards: false,                        //Embedded Twitter cards\n  chat_room_idle_timeout_minutes: 1,                  //Time to elapse before we begin trimming the history\n  chat_room_trim_buffer: 50,                          //The minimum number of messages before beginning to trim\n  message_retrieval_chunk_size: 50,                   //Number of messages to request during a history load\n  composing_message_linger_timeout: 6000,             //How long \"so and so is typing...\" messages hang around\n  sent_active_message_delay: 2000,                    //Delay for sending \"active\" message and stop \"so and so is typing...\"\n  sent_composing_message_interval: 3000,              //How often we ping composing state for \"so and so is typing...\"\n  request_participant_presences_timeout: 500,         //Throttle timeout to request all participant presences\n  filter_participant_presences_timeout: 5000,\n  fetch_room_participants_timeout: 500,\n  avatar_loading_timeout: 3000,                       //Load default avatar after this timeout\n  set_active_rooms_timeout: 500,                      //Debounce timeout to set activeRooms\n  room_participant_page_limit: 500,                   //Set limit for room participant API paging\n  message_image_size_check_interval: 100,             //Interval to check naturalHeight till image loading\n  message_image_loading_timeout: 10000,               //Time elapsed before image was marked as failed to load.\n  message_image_max_size: 8000,                      //Maximum acceptable image size in pixels for images to be rendered as metadata for messages\n  max_image_size_for_base64: 6500,\n  initial_room_participants_limit: 21,                //Limit room occupant presences on join - count includes the current user\n  notification_limit: 5,                              //limit unique OS notifications\n  leave_room_message_confirmation_timeout: 10 * 1000, //Time elapsed before showing \"user left the room\" message\n  input_history_max: 50,                              // Maximum number of saved input history items\n  chat_history_fetching_attempts: 5,                  // How many times we are trying re-fetch history on error\n  chat_history_fetching_attempt_timeout: 60 * 1000,   // Timeout on history re-fetching on error\n  default_message_confirmation_timeout: 75 * 1000,    //Time elapsed before considering an non-echoed message failed\n  flaky_network_message_timeout: 12 * 1000,           //Time it takes to show the user that something's up\n  reconnect_failures_before_showing_banner: 5,        //Number of reconnection failures before showing \"can't connect\" header banner\n  flag_close_animation_time: 1000,                    //Time for flag closing animation to complete\n  notify_sound_asset: \"assets/audio/notify\",          //Url to notify sound asset\n  incoming_sound_asset: \"assets/audio/incoming_call\", //Url to incoming call sound asset\n  outgoing_sound_asset: \"assets/audio/outgoing_call\", //Url to outgoing call sound asset\n  new_hotness_image_asset: \"assets/img/embedded/new-hotness.gif\",\n  new_hotness_native_asset: \"assets/img/embedded/new-hotness-no-animation.png\",\n  help_link_url: 'https://help.hipchat.com',\n  get_started_url: 'https://confluence.atlassian.com/get-started-with-hipchat/get-started-with-hipchat-854033505.html',\n  feedback_issue_url: 'https://jira.atlassian.com/secure/CreateIssue.jspa?pid=18110&issuetype=10000',\n  status_page_url: 'https://status.hipchat.com/',\n  notification_close_timeout: 5000,                   //The duration that desktop notifications hang around\n  message_filter_predicate: _.constant(true),         //An optional predicate to filter messages\n  outgoing_message_filter_predicate: _.constant(true),//An optional predicate to filter outgoing messages\n  notification_banner_slide: 200,                     //The duration of the notification banner slide\n  notification_title_max_character_length: 33,        //The max character length for browser notification titles\n  notification_icon: 'assets/img/embedded/notification.png',\n  notification_attach_to_reorder_limit_mins: 5,       //The max number of minutes to allow an attached notification to be reordered next to the original.\n                                                      //If time is greater, it will appear at the time it was sent.\n  fetching_files_limit: 100,                          //Limit of files that we receive on history call\n  fetching_links_limit: 100,                          //Limit of links that we receive on history call\n  fetch_thumbnails_timeout: 100,                      //Timeout for thumbnails fetching (ms)\n\n  shades_icon: 'assets/img/embedded/shades.png',\n  select2_max_displayed_items: 20,                    //Select2 autocomplete maximum displayed items in dropdown list\n  favicon_bg_color: '#707070',                        //Background color for the favicon notification badge\n  default_backdrop_dismiss_on_click: true,            //A click on backdrop will dismiss modal dialog\n  default_theme: 'light',\n  default_density: 'normal',\n  default_chat_view: 'classic_neue',\n  default_name_display: 'names',\n  default_animated_avatars: 'animated',\n  default_notification_level: 'loud',\n  chat_input_id: 'hc-message-input',                  //Id attribute value for chat input\n  favicon_bg_color_with_mention: '#3873AE',           //Background color for the favicon notification badge, when the user is mentioned\n  slash_replacement_regex: new RegExp('^s/([^/]+)/([^/]*)/?$'),    //S-slash command replacement regex\n  integrations_base_url: 'https://{base_url}/addons',  // Integrations base url\n  integrations_url: 'https://{base_url}/rooms/addons/{room_id}?required_user={user_id}&from_location_id={from_location_id}&source_id={source_id}', // URL used to install integrations in a room (use IntegrationHelper.getIntegrationsUrl())\n  integrations_config_url: 'https://{base_url}/addons/{addon_key}?room={room_id}', // URL used to configure integration in a room\n  integrations_update_url: 'https://{base_url}/addons/{addon_key}?room={room_id}&update=true', // URL used to configure integration in a room\n  column_width_limits: {                              //Column width limits\n    left: {\n      max: 450,\n      min: 95,\n      default: 220\n    },\n    right: {\n      max: 450,\n      min: 95,\n      default: 200\n    }\n  },\n  video_width: 960,\n  video_height: 540,\n  min_video_width: 640,\n  min_video_height: 360,\n  default_connect_dialog_height: 400,                 //connect dialog default height\n  default_connect_dialog_width: 600,                   //connect dialog default width\n  connect_aui_dialog_chrome_height: 122,                 //connect dialog AUI header / footer combined height\n  default_connect_aui_dialog_vertical_mergin: 170,      //connect dialog default distance from the top of the window\n  onboarding: {\n    rooms_threshold: 5,\n    oto_threshold: 5\n  },\n  login_page_redirect_regex: new RegExp('(log|sign)[_\\-]?in',\"gi\"), //if in app search redirects user to sign_in page we check the iframe location and handle apprpriately\n  emoticon_regex: new RegExp(/[^\\(a-zA-Z0-9\\-\\:'=]+/),\n  emote_regex: /^(\\/me\\s|\\/em\\s)/,\n  quote_regex: /^(\\/quote\\s)/,\n  code_regex: /^(\\/code\\s)/,\n  pre_regex: /^(\\/pre\\s*|\\/monospace\\s*)/,\n  core_mentions: [\n    {\n      mention_name: \"all\",\n      name: 'All room members',\n      isUser: false,\n      jid: 'all@chat' // to pass utils.jid.is_private_chat (is person)\n    },\n    {\n      mention_name: \"here\",\n      name: 'Available room members',\n      isUser: false,\n      jid: 'here@chat' // to pass utils.jid.is_private_chat (is person)\n    },\n    {\n      mention_name: \"HipChat\",\n      name: 'HipChat',\n      isUser: true,\n      jid: 'hipchat@chat' // to pass utils.jid.is_private_chat (is person)\n    }\n  ],\n  spinner_colors: {\n    light: '#000000',  // Default color for loading spinner\n    dark: '#c7c7c7'   // Loading spinner color for dark mode\n  },\n  missed_video_call_timeout: 30000,\n  default_group_avatar_bg: \"#59afe1\",\n  default_guest_avatar_bg: \"#cccccc\",\n  delayed_video_message_timeout: 3000,\n  max_message_text_length: Math.pow(2, 15),  // Max message length - matches backend limit\n  max_file_description_length: 1000,         // Max file description length - matches backend limit\n  max_topic_text_length: 250,                // Max topic length - too many characters cause crashes\n  max_presence_text_length: 1024,\n  integrations: {\n    persistent_store_max_size_bytes: 100 * 1024, // 100KB in bytes\n    glance_remote_metadata_timeout: 10000,\n    loading_indicator_delay_ms: 100,\n    signed_url_timeout: 2000,\n    spinner_delay: 100\n  },\n  dialog: {\n    max_size_margin: 160,\n    filter_debounce_wait: 250\n  },\n  modal_transition_allowance: 250,\n  people_glance: {\n    full_key: \"atlassian.hipchat.internal.people:people\",\n    addon_key: \"atlassian.hipchat.internal.people\",\n    addon_version: \"internal.people.1\",\n    key: \"people\",\n    name: \"Members\",\n    target: \"people\",\n    type: \"glance\",\n    icon: {\n      aui_icon: \"aui-icon aui-icon-small aui-iconfont-group\"\n    },\n    weight: 0,\n    internal: true,\n    max_items_to_render_collapsed: 24\n  },\n  files_glance: {\n    full_key: \"atlassian.hipchat.internal.files:files\",\n    addon_key: \"atlassian.hipchat.internal.files\",\n    addon_version: \"internal.files.1\",\n    key: \"files\",\n    name: \"Files\",\n    target: \"files\",\n    type: \"glance\",\n    icon: {\n      aui_icon: \"hipchat-icon-small icon-file\"\n    },\n    weight: 1,\n    internal: true\n  },\n  links_glance: {\n    full_key: \"atlassian.hipchat.internal.links:links\",\n    addon_key: \"atlassian.hipchat.internal.links\",\n    addon_version: \"internal.links.1\",\n    key: \"links\",\n    name: \"Links\",\n    target: \"links\",\n    type: \"glance\",\n    icon: {\n      aui_icon: \"hipchat-icon-small icon-link\"\n    },\n    weight: 2,\n    internal: true\n  },\n  max_unread_count: 99,\n  default_avatar_colors: [ // Used to identify the default group avatar\n    '#88d3ff',\n    '#59afe1',\n    '#2774a0',\n    '#1a8cff',\n    '#b2e020',\n    '#8eb021',\n    '#2f7a0e',\n    '#0bbe30',\n    '#14892c',\n    '#005812',\n    '#fe5e50',\n    '#d04437',\n    '#88170c',\n    '#f6c342',\n    '#f79232',\n    '#b05600',\n    '#d39c3f',\n    '#815b3a',\n    '#594300',\n    '#a659f5',\n    '#654982',\n    '#3d1368',\n    '#f691b2',\n    '#f15c75',\n    '#be1733',\n    '#ff4f92',\n    '#ff0d6e',\n    '#b3003e',\n    '#ffe400',\n    '#ffae00',\n    '#00d2ff',\n    '#0096ff',\n    '#d84dff',\n    '#b400ff',\n    '#7e00ff',\n    '#ffd200',\n    '#ff7f00',\n    '#ff2f00'\n  ],\n  tipsify: {\n    window_margin: 10,\n    distance: 5,\n    delay: 300,\n    max_dom_traverse_depth: 3\n  },\n  cards: {\n    feedback_url: 'https://docs.google.com/a/atlassian.com/forms/d/1vcNJHyni4mCwwljRskil_Xdz9o_ssgxeu-cD0pmv1ts/viewform?entry.640157496='\n  },\n  guest_access_information: {\n    focus_and_select_delay: 200,\n    mouseout_delay: 300\n  },\n  roster_panel: {\n    group_title_item_height: 39,\n    person_item_height: 26,\n    breakpoints: {\n      small: 20,\n      medium: 100,\n      large: 500,\n      xlarge: Infinity\n    }\n  },\n  edit_message_threshold: 1000 * 60 * 60 * 24, // amount of time (in milliseconds) that we will allow users to edit/delete messages\n  max_users_in_group_join_notification: 10, // max number of users in group that will get client notification, that new user joined\n  welcome_dialog: {\n    max_size_of_group_to_display: 5,\n    max_displayed_people: 4,\n    max_displayed_rooms: 4,\n    max_amount_of_people_icons: 6,\n    max_length_of_welcome_message: 150,\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/config/app_config.js\n **/","import moment from 'moment';\nimport jid_utils from './jid_utils';\nimport file_types from './file_types';\nimport mime_types from './mime_types';\n\nvar file_utils = {\n\n  file_types: file_types.init(),\n  mime_types: mime_types.init(),\n\n  is_gif: function (fileurl) {\n    let ext = file_utils.get_extension(fileurl);\n    return ext.toLowerCase() === 'gif';\n  },\n\n  get_file_name: function (filename) {\n    return (_.isString(filename)) ? filename.split(\"/\").pop() : \"\";\n  },\n\n  get_extension: function (filename) {\n    var file = file_utils.get_file_name(filename),\n        ext = file.split(\".\").pop();\n    return (ext === file) ? \"\" : ext.toLowerCase();\n  },\n\n  get_extension_for_mime_type: function(mimeType) {\n    if (file_utils.mime_types[mimeType]) {\n      return file_utils.mime_types[mimeType];\n    } else if (mimeType.split(\"/\").pop().length === 3) {\n      return mimeType.split(\"/\").pop();\n    }\n  },\n\n  get_file_type: function (filename, return_default) {\n    var extension = file_utils.get_extension(filename),\n        type;\n    _.find(file_utils.file_types, function (extension_list, key) {\n      if(_.includes(extension_list, extension)) {\n        type = key;\n      }\n    });\n    return return_default ? type || \"text\" : type;\n  },\n\n  get_size_string: function (size) {\n    if (!size) {\n      return '';\n    }\n\n    var precision = (size > 1024 ? 0 : 2),\n        sizeString = Number(size / 1024).toFixed(precision),\n        magnitude = 'K';\n\n    if (size > 1048576) {\n      precision = 1;\n      sizeString = Number(size / 1048576).toFixed(precision);\n      magnitude = 'MB';\n    }\n\n    return sizeString + magnitude;\n  },\n\n  get_selected_file_type: function(file) {\n    var fileType = {\n      major: \"unknown\",\n      minor: \"unknown\"\n    };\n    if (file && file.type && file.type.indexOf(\"/\") > -1) {\n      var fileTypeSplit = file.type.toLowerCase().split(\"/\");\n      fileType.major = fileTypeSplit[0];\n      fileType.minor = fileTypeSplit[1];\n    }\n\n    return fileType;\n  },\n\n  get_icon_class: function (filename) {\n    var file_type = file_utils.get_file_type(filename);\n    return (file_type) ? \"icon-\" + file_type : \"icon-text\";\n  },\n\n  clean_base64_type: function (base64_type) {\n    var type;\n\n    if (_.isString(base64_type)) {\n      type = base64_type.replace(\"data:\", \"\").replace(\";base64\", \"\");\n    }\n    return type;\n  },\n\n  get_base64_type: function (base64) {\n    if (_.isString(base64)) {\n      return file_utils.clean_base64_type(base64.split(\",\")[0]);\n    }\n  },\n\n  get_base64_data: function (base64) {\n    if (_.isString(base64)) {\n      var base_data = base64.split(\",\");\n      if (_.isArray(base_data) && base_data.length > 1) {\n        return base_data[1];\n      }\n    }\n  },\n\n  base64_to_blob: function (base64, fileName = null) {\n    var blob,\n        content_type,\n        base64_data,\n        byteChars,\n        sliceSize = 512,\n        slice,\n        byteNums,\n        byteArray = [],\n        fileType,\n        byteCollection = [];\n\n    if (_.isString(base64)) {\n      base64_data = file_utils.get_base64_data(base64);\n      content_type = file_utils.get_base64_type(base64);\n      byteChars = atob(base64_data);\n\n      for (var offset = 0; offset < byteChars.length; offset += sliceSize) {\n        slice = byteChars.slice(offset, offset + sliceSize);\n        byteNums = new Array(slice.length);\n\n        for (var i = 0; i < slice.length; i++) {\n          byteNums[i] = slice.charCodeAt(i);\n        }\n\n        byteArray = new Uint8Array(byteNums);\n        byteCollection.push(byteArray);\n      }\n\n      if (content_type === 'application/octet-stream') {\n        fileType = this.get_extension(fileName);\n\n        if (fileType === 'mp4') {\n          content_type = 'video/mp4';\n        } else if (fileType === 'mov') {\n          content_type = 'video/quicktime';\n        }\n      }\n\n      blob = new Blob(byteCollection, {type: content_type});\n    }\n    return blob;\n  },\n\n  blob_to_file: function (blob, name, date = new Date()) {\n    if (blob instanceof Blob) {\n      blob.lastModifiedDate = date;\n      blob.name = (name) ? name : \"\";\n    }\n    return blob;\n  },\n\n  create_file_object: function (jid, file, ts, sender_name) {\n    var base_id = _.uniqueId();\n    return _.assign(file, {\n      id: file.id || base_id,\n      group_id: jid_utils.group_id(jid),\n      user_name: sender_name,\n      date: moment.utc(ts * 1000).toDate(),\n      icon_class: file_utils.get_icon_class(file.name)\n    });\n  }\n};\n\nexport default file_utils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/file_utils.js\n **/","module.exports = {\n  init: function () {\n    return {\n      \"audio\": [\"aif\", \"aiff\", \"mp3\", \"wav\", \"wma\"],\n      \"code\": [\"asp\", \"coffee\",\"css\", \"html\", \"htm\", \"java\", \"js\", \"json\", \"jsp\", \"less\", \"lib\", \"php\", \"prl\", \"py\", \"sass\", \"sh\", \"xml\"],\n      \"doc\": [\"doc\", \"docm\", \"docx\", \"dotm\", \"dotx\", \"gdoc\", \"pages\"],\n      \"ai\": [\"ai\"],\n      \"psd\": [\"psd\"],\n      \"img\": [\"bmp\", \"gif\", \"jpg\", \"jpeg\", \"png\", \"tif\", \"tiff\"],\n      \"pdf\": [\"pdf\"],\n      \"presentation\": [\"keynote\", \"ppam\", \"ppsm\", \"ppsx\", \"ppt\", \"pptm\", \"pptx\"],\n      \"spreadsheet\": [\"numbers\", \"ods\", \"xlam\", \"xls\", \"xlsb\", \"xlsm\", \"xlsx\", \"xltm\", \"xltx\"],\n      \"vector\": [\"dxf\", \"eps\", \"svg\"],\n      \"video\": [\"flv\", \"m4v\", \"mov\", \"mp4\", \"wmv\", \"webm\", \"ogv\"],\n      \"zip\": [\"apk\", \"gz\", \"rar\", \"tar\", \"zip\", \"zipx\"]\n    };\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/file_types.js\n **/","module.exports = {\n  init: function () {\n    return {\n      \"image/jpg\": \"jpg\",\n      \"image/jpeg\": \"jpg\",\n      \"image/png\": \"png\",\n      \"image/gif\": \"gif\",\n      \"image/svg+xml\": \"svg\",\n      \"audio/mpeg3\": \"mpg3\",\n      \"audio/wav\": \"wav\",\n      \"application/pdf\": \"pdf\",\n      \"application/text\": \"txt\",\n      \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\": \"docx\",\n      \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": \"pptx\",\n      \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\": \"xlsx\",\n      \"video/mp4\": \"mp4\",\n      \"video/quicktime\": \"mov\"\n    };\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/mime_types.js\n **/","import jid_utils from './jid_utils';\n\nvar room_utils = {\n  get_room_name: function (rooms, room_jid) {\n    return (rooms[room_jid]) ? rooms[room_jid].name : \"Unknown\";\n  },\n  get_room_id: function (rooms, room_jid) {\n    return (rooms[room_jid]) ? rooms[room_jid].id : false;\n  },\n  detect_chat_type: function (jid) {\n    return jid_utils.is_room(jid) ? 'groupchat' : 'chat';\n  },\n  is_archived: function (room = {}) {\n    if (_.isBoolean(room.is_archived)) {\n      return room.is_archived;\n    }\n    return (!!parseInt(room.is_archived, 10) || room.is_archived === '');\n  },\n  is_guest: function (participant) {\n    return _.get(participant, 'is_guest');\n  },\n  is_admin: function (participant) {\n    return _.get(participant, 'is_group_admin');\n  }\n};\n\nexport default room_utils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/room_utils.js\n **/","import status_strings from 'strings/status_strings';\nimport utils from 'helpers/utils';\n\nvar user_utils = {\n\n  get_user_name: function (users, group_id, user_id) {\n    var jid_fragment = group_id + \"_\" + user_id + \"@\",\n        user_name = \"Unknown\";\n    _.find(users, function (val, key) {\n      if (key.indexOf(jid_fragment) > -1) {\n        user_name = val.name;\n      }\n    });\n    return user_name;\n  },\n\n  get_user_status: function (presence_show) {\n    var status;\n\n    switch(presence_show) {\n      case \"chat\":\n        status = status_strings.available;\n        break;\n      case \"away\":\n        status = status_strings.idle;\n        break;\n      case \"xa\":\n        status = status_strings.away;\n        break;\n      case \"dnd\":\n        status = status_strings.dnd;\n        break;\n      case \"mobile\":\n        status = status_strings.mobile;\n        break;\n      default:\n        status = status_strings.unavailable;\n    }\n    return status;\n  },\n\n  chat_header_status: function (presence_status) {\n    var status;\n    switch(presence_status) {\n      case \"chat\":\n        status = status_strings.available;\n        break;\n      case \"away\":\n        status = status_strings.away;\n        break;\n      case \"xa\":\n        status = status_strings.away;\n        break;\n      case \"dnd\":\n        status = status_strings.dnd;\n        break;\n      case \"mobile\":\n        status = status_strings.mobile;\n        break;\n      default:\n        status = status_strings.unavailable;\n    }\n    return status;\n  },\n\n  format_idle_time: function (seconds) {\n    var time_msg = \"\",\n        days = Math.floor(seconds / 86400),\n        hours = Math.floor((seconds % 86400) / 3600),\n        mins = Math.floor(((seconds % 86400) % 3600) / 60);\n\n    if (days > 0) {\n      time_msg = days + \"d \";\n    }\n    if (hours > 0) {\n      time_msg += hours + \"h \";\n    }\n    if (mins > 0) {\n      time_msg += mins + \"m\";\n    }\n    return $.trim(time_msg);\n  },\n\n  is_admin: function (admins, ownerId, user) {\n    var result = false,\n        uid = Number(_.get(user, \"user_id\") || _.get(user, \"id\")),\n        oid = Number(ownerId);\n\n    if (_.get(user, \"is_admin\") || _.get(user, 'is_group_admin')) {\n      result = true;\n    } else if (uid) {\n      if (admins) {\n        result = _.some(admins, function (val) {\n          return val === uid;\n        });\n      }\n      if (!result && oid) {\n        result = (oid === uid);\n      }\n    }\n    return result;\n  },\n\n  is_guest: function(user) {\n    return !('subscription' in user);\n  },\n\n  sort_users(results, query, key = null) {\n    let matchingRegex = new RegExp(`^${utils.escapeRegEx(query)}`, 'gmi');\n\n    let { exact, highPriority, lowPriority } = results.reduce((acc, el) => {\n      let sortableValue = key ? el[key] : el;\n      let words = sortableValue.trim().split(' ');\n      let isMatched = words.some(name => name.match(matchingRegex));\n      let isExact = isMatched ? words.some(name => name.toLowerCase() === query.toLowerCase()) : false;\n\n      if (isExact) {\n        acc.exact.push(el);\n      } else if(isMatched) {\n        acc.highPriority.push(el);\n      } else {\n        acc.lowPriority.push(el);\n      }\n\n      return acc;\n    }, { exact: [], highPriority: [], lowPriority: [] });\n\n    let sortFunc = (a, b) => {\n      let [valueA, valueB] = key ? [ a[key], b[key] ] : [ a, b ];\n      return valueA.toLowerCase() > valueB.toLowerCase();\n    };\n\n    exact = exact.sort(sortFunc);\n    highPriority = highPriority.sort(sortFunc);\n    lowPriority = lowPriority.sort(sortFunc);\n\n    return exact.concat(highPriority).concat(lowPriority);\n  }\n\n};\n\nexport default user_utils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/user_utils.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/slicedToArray.js\n ** module id = 121\n ** module chunks = 0\n **/","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/is-iterable.js\n ** module id = 122\n ** module chunks = 0\n **/","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/is-iterable.js\n ** module id = 123\n ** module chunks = 0\n **/","var classof   = require('./$.classof')\n  , ITERATOR  = require('./$.wks')('iterator')\n  , Iterators = require('./$.iterators');\nmodule.exports = require('./$.core').isIterable = function(it){\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    || Iterators.hasOwnProperty(classof(O));\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/core.is-iterable.js\n ** module id = 124\n ** module chunks = 0\n **/","export default {\n  available: 'Available',\n  idle: 'Idle',\n  away: 'Away',\n  dnd: 'Do Not Disturb',\n  mobile: 'Mobile',\n  unavailable: 'Unavailable'\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/status_strings.js\n **/","import {\n  video_width, video_height,\n  min_video_width, min_video_height\n} from 'config/app_config';\n\nvar video_utils = {\n\n  isVideoLink: function(link) {\n    // Using the global HC object here because importing the ConfigStore throws an error\n    //  TypeError: \"Super expression must either be null or a function, not object\"\n    var base_url = _.get(window, 'HC.ApplicationStore.data.config.video_base_url', '').replace(/https?\\:\\/\\//, '');\n\n    var whitelist = [\n      'hipchat.com/video/join',\n      'hipchat.me',\n      'enso.me/join'\n    ];\n\n    if (base_url && whitelist.indexOf(base_url) === -1) {\n      whitelist.unshift(base_url);\n    }\n\n    for (var i = 0; i < whitelist.length; i++) {\n      let video_url = whitelist[i].replace(/\\/join$/, '/(join|call|meeting)'),\n          video_re = new RegExp('^(https?://)?(www.)?' + video_url + '/.*', 'i');\n\n      if (video_re.test(link)) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n\n  get_video_window_props: function() {\n    var window_size = video_utils.size_window(video_width, video_height, min_video_width, min_video_height),\n        width = window_size.width,\n        height = window_size.height;\n\n    var width_ratio = width / video_width;\n    var height_ratio = height / video_height;\n\n    if (width_ratio < 1 && height_ratio < 1) {\n      if (width_ratio < height_ratio) {\n        width = Math.floor(video_width * height_ratio);\n      } else {\n        height = Math.floor(video_height * width_ratio);\n      }\n    } else if (height_ratio < 1) {\n      width = Math.floor(video_width * height_ratio);\n    } else if (width_ratio < 1) {\n      height = Math.floor(video_height * width_ratio);\n    }\n    var pos = video_utils.center_window(width, height);\n\n    return `resizable=yes,width=${width},height=${height},top=${pos.top},left=${pos.left}`;\n  },\n\n  size_window: function (target_w, target_h, min_w, min_h) {\n    var max_ratio = 0.9;\n    return {\n      width: Math.max(Math.min(Math.floor(window.screen.availWidth * max_ratio), target_w), min_w || 100),\n      height: Math.max(Math.min(Math.floor(window.screen.availHeight * max_ratio), target_h), min_h || 100)\n    };\n  },\n\n  center_window: function (width, height) {\n    var w = window,\n        s = w.screen,\n        screenLeft = (w.screenLeft !== null && w.screenLeft !== undefined) ? w.screenLeft : s.left,\n        screenTop = (w.screenTop !== null && w.screenTop !== undefined) ? w.screenTop : s.top;\n    return {\n      left: Math.floor((s.availWidth - width) / 2) + screenLeft,\n      top: Math.floor((s.availHeight - height) / 3) + screenTop\n    };\n  }\n\n};\n\nexport default video_utils;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/video_utils.js\n **/","import clientSubTypeKeys from 'keys/client_subtype_keys';\nimport browserFamilies from 'keys/browser_family_keys';\nimport userAgentParser from 'ua-parser-js';\n\nvar browser = {\n  is: {\n    ie_edge: () => {\n      return _.includes(navigator.userAgent, 'Edge');\n    },\n    ie: () => {\n      return _.includes(navigator.userAgent, 'MSIE') || _.includes(navigator.appVersion, 'Trident/');\n    },\n    safari: () => {\n      return _.includes(navigator.userAgent, 'Safari') && !browser.is.chrome();\n    },\n    chrome: () => {\n      return _.includes(navigator.userAgent, 'Chrome') && !browser.is.ie_edge();\n    },\n    firefox: () => {\n      return _.includes(navigator.userAgent, 'Firefox') && !browser.is.ie_edge();\n    }\n  },\n\n  family: () => {\n    let family = browserFamilies.UNKNOWN;\n\n    if (browser.is.ie()) {\n      family = browserFamilies.IE;\n    } else if (browser.is.ie_edge()) {\n      family = browserFamilies.EDGE;\n    } else if (browser.is.safari()) {\n      family = browserFamilies.SAFARI;\n    } else if (browser.is.chrome()) {\n      family = browserFamilies.CHROME;\n    } else if (browser.is.firefox()) {\n      family = browserFamilies.FIREFOX;\n    }\n\n    return family;\n  },\n\n  userAgent() {\n    if (!browser._userAgent){\n     browser._userAgent = userAgentParser();\n    }\n    return browser._userAgent;\n  }\n};\n\nvar platform = {\n  isMac(pltfrm = false) {\n    return platform._checkPlatform('MAC', pltfrm);\n  },\n\n  isWindows(pltfrm = false) {\n    return platform._checkPlatform('WIN', pltfrm);\n  },\n\n  isLinux(pltfrm = false) {\n    return platform._checkPlatform('LINUX', pltfrm);\n  },\n\n  _checkPlatform(check, pltfrm) {\n    if (!pltfrm){\n      pltfrm = navigator.platform;\n    }\n    return pltfrm.toUpperCase().indexOf(check) !== -1;\n  }\n};\n\nvar clientSubType = {\n  isNative: function (client_subtype) {\n    return clientSubType.isMac(client_subtype) || clientSubType.isQT(client_subtype);\n  },\n\n  isQT: function (client_subtype) {\n    return clientSubType.isWindows(client_subtype) || clientSubType.isLinux(client_subtype) || clientSubType.isQTMac(client_subtype);\n  },\n\n  isWindows: function (client_subtype) {\n    return client_subtype === clientSubTypeKeys.QT_WINDOWS;\n  },\n\n  isQTMac: function (client_subtype) {\n    return client_subtype === clientSubTypeKeys.QT_MAC;\n  },\n\n  isLinux: function (client_subtype) {\n    return client_subtype === clientSubTypeKeys.QT_LINUX;\n  },\n\n  isMac: function (client_subtype) {\n    return client_subtype === clientSubTypeKeys.MAC_NATIVE;\n  }\n};\n\nexport default browser;\nexport { platform, clientSubType };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/browser_utils.js\n **/","/**\n * @typedef {{name: string, key: string}} clientSubtypeKeys\n * @type {Object.<string, string>}\n */\nmodule.exports = {\n  QT_WINDOWS: \"windows\",\n  QT_MAC: \"mac\",\n  QT_LINUX: \"linux\",\n  MAC_NATIVE: \"macweb\"\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/client_subtype_keys.js\n **/","export default Object.freeze({\n  UNKNOWN: 'unknown',\n  IE: 'ie',\n  EDGE: 'edge',\n  SAFARI: 'safari',\n  CHROME: 'chrome',\n  FIREFOX: 'firefox'\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/browser_family_keys.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/freeze.js\n ** module id = 130\n ** module chunks = 0\n **/","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/$.core').Object.freeze;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/freeze.js\n ** module id = 131\n ** module chunks = 0\n **/","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./$.is-object');\n\nrequire('./$.object-sap')('freeze', function($freeze){\n  return function freeze(it){\n    return $freeze && isObject(it) ? $freeze(it) : it;\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.freeze.js\n ** module id = 132\n ** module chunks = 0\n **/","/**\r\n * UAParser.js v0.7.10\r\n * Lightweight JavaScript-based User-Agent string parser\r\n * https://github.com/faisalman/ua-parser-js\r\n *\r\n * Copyright © 2012-2015 Faisal Salman <fyzlman@gmail.com>\r\n * Dual licensed under GPLv2 & MIT\r\n */\r\n\r\n(function (window, undefined) {\r\n\r\n    'use strict';\r\n\r\n    //////////////\r\n    // Constants\r\n    /////////////\r\n\r\n\r\n    var LIBVERSION  = '0.7.10',\r\n        EMPTY       = '',\r\n        UNKNOWN     = '?',\r\n        FUNC_TYPE   = 'function',\r\n        UNDEF_TYPE  = 'undefined',\r\n        OBJ_TYPE    = 'object',\r\n        STR_TYPE    = 'string',\r\n        MAJOR       = 'major', // deprecated\r\n        MODEL       = 'model',\r\n        NAME        = 'name',\r\n        TYPE        = 'type',\r\n        VENDOR      = 'vendor',\r\n        VERSION     = 'version',\r\n        ARCHITECTURE= 'architecture',\r\n        CONSOLE     = 'console',\r\n        MOBILE      = 'mobile',\r\n        TABLET      = 'tablet',\r\n        SMARTTV     = 'smarttv',\r\n        WEARABLE    = 'wearable',\r\n        EMBEDDED    = 'embedded';\r\n\r\n\r\n    ///////////\r\n    // Helper\r\n    //////////\r\n\r\n\r\n    var util = {\r\n        extend : function (regexes, extensions) {\r\n            for (var i in extensions) {\r\n                if (\"browser cpu device engine os\".indexOf(i) !== -1 && extensions[i].length % 2 === 0) {\r\n                    regexes[i] = extensions[i].concat(regexes[i]);\r\n                }\r\n            }\r\n            return regexes;\r\n        },\r\n        has : function (str1, str2) {\r\n          if (typeof str1 === \"string\") {\r\n            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;\r\n          } else {\r\n            return false;\r\n          }\r\n        },\r\n        lowerize : function (str) {\r\n            return str.toLowerCase();\r\n        },\r\n        major : function (version) {\r\n            return typeof(version) === STR_TYPE ? version.split(\".\")[0] : undefined;\r\n        }\r\n    };\r\n\r\n\r\n    ///////////////\r\n    // Map helper\r\n    //////////////\r\n\r\n\r\n    var mapper = {\r\n\r\n        rgx : function () {\r\n\r\n            var result, i = 0, j, k, p, q, matches, match, args = arguments;\r\n\r\n            // loop through all regexes maps\r\n            while (i < args.length && !matches) {\r\n\r\n                var regex = args[i],       // even sequence (0,2,4,..)\r\n                    props = args[i + 1];   // odd sequence (1,3,5,..)\r\n\r\n                // construct object barebones\r\n                if (typeof result === UNDEF_TYPE) {\r\n                    result = {};\r\n                    for (p in props) {\r\n                        if (props.hasOwnProperty(p)){\r\n                            q = props[p];\r\n                            if (typeof q === OBJ_TYPE) {\r\n                                result[q[0]] = undefined;\r\n                            } else {\r\n                                result[q] = undefined;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                // try matching uastring with regexes\r\n                j = k = 0;\r\n                while (j < regex.length && !matches) {\r\n                    matches = regex[j++].exec(this.getUA());\r\n                    if (!!matches) {\r\n                        for (p = 0; p < props.length; p++) {\r\n                            match = matches[++k];\r\n                            q = props[p];\r\n                            // check if given property is actually array\r\n                            if (typeof q === OBJ_TYPE && q.length > 0) {\r\n                                if (q.length == 2) {\r\n                                    if (typeof q[1] == FUNC_TYPE) {\r\n                                        // assign modified match\r\n                                        result[q[0]] = q[1].call(this, match);\r\n                                    } else {\r\n                                        // assign given value, ignore regex match\r\n                                        result[q[0]] = q[1];\r\n                                    }\r\n                                } else if (q.length == 3) {\r\n                                    // check whether function or regex\r\n                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\r\n                                        // call function (usually string mapper)\r\n                                        result[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;\r\n                                    } else {\r\n                                        // sanitize match using given regex\r\n                                        result[q[0]] = match ? match.replace(q[1], q[2]) : undefined;\r\n                                    }\r\n                                } else if (q.length == 4) {\r\n                                        result[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;\r\n                                }\r\n                            } else {\r\n                                result[q] = match ? match : undefined;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                i += 2;\r\n            }\r\n            return result;\r\n        },\r\n\r\n        str : function (str, map) {\r\n\r\n            for (var i in map) {\r\n                // check if array\r\n                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\r\n                    for (var j = 0; j < map[i].length; j++) {\r\n                        if (util.has(map[i][j], str)) {\r\n                            return (i === UNKNOWN) ? undefined : i;\r\n                        }\r\n                    }\r\n                } else if (util.has(map[i], str)) {\r\n                    return (i === UNKNOWN) ? undefined : i;\r\n                }\r\n            }\r\n            return str;\r\n        }\r\n    };\r\n\r\n\r\n    ///////////////\r\n    // String map\r\n    //////////////\r\n\r\n\r\n    var maps = {\r\n\r\n        browser : {\r\n            oldsafari : {\r\n                version : {\r\n                    '1.0'   : '/8',\r\n                    '1.2'   : '/1',\r\n                    '1.3'   : '/3',\r\n                    '2.0'   : '/412',\r\n                    '2.0.2' : '/416',\r\n                    '2.0.3' : '/417',\r\n                    '2.0.4' : '/419',\r\n                    '?'     : '/'\r\n                }\r\n            }\r\n        },\r\n\r\n        device : {\r\n            amazon : {\r\n                model : {\r\n                    'Fire Phone' : ['SD', 'KF']\r\n                }\r\n            },\r\n            sprint : {\r\n                model : {\r\n                    'Evo Shift 4G' : '7373KT'\r\n                },\r\n                vendor : {\r\n                    'HTC'       : 'APA',\r\n                    'Sprint'    : 'Sprint'\r\n                }\r\n            }\r\n        },\r\n\r\n        os : {\r\n            windows : {\r\n                version : {\r\n                    'ME'        : '4.90',\r\n                    'NT 3.11'   : 'NT3.51',\r\n                    'NT 4.0'    : 'NT4.0',\r\n                    '2000'      : 'NT 5.0',\r\n                    'XP'        : ['NT 5.1', 'NT 5.2'],\r\n                    'Vista'     : 'NT 6.0',\r\n                    '7'         : 'NT 6.1',\r\n                    '8'         : 'NT 6.2',\r\n                    '8.1'       : 'NT 6.3',\r\n                    '10'        : ['NT 6.4', 'NT 10.0'],\r\n                    'RT'        : 'ARM'\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    //////////////\r\n    // Regex map\r\n    /////////////\r\n\r\n\r\n    var regexes = {\r\n\r\n        browser : [[\r\n\r\n            // Presto based\r\n            /(opera\\smini)\\/([\\w\\.-]+)/i,                                       // Opera Mini\r\n            /(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,                      // Opera Mobi/Tablet\r\n            /(opera).+version\\/([\\w\\.]+)/i,                                     // Opera > 9.80\r\n            /(opera)[\\/\\s]+([\\w\\.]+)/i                                          // Opera < 9.80\r\n\r\n            ], [NAME, VERSION], [\r\n\r\n            /\\s(opr)\\/([\\w\\.]+)/i                                               // Opera Webkit\r\n            ], [[NAME, 'Opera'], VERSION], [\r\n\r\n            // Mixed\r\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\r\n            /(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]+)*/i,\r\n                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer\r\n\r\n            // Trident based\r\n            /(avant\\s|iemobile|slim|baidu)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,\r\n                                                                                // Avant/IEMobile/SlimBrowser/Baidu\r\n            /(?:ms|\\()(ie)\\s([\\w\\.]+)/i,                                        // Internet Explorer\r\n\r\n            // Webkit/KHTML based\r\n            /(rekonq)\\/([\\w\\.]+)*/i,                                            // Rekonq\r\n            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\\/([\\w\\.-]+)/i\r\n                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS\r\n            ], [NAME, VERSION], [\r\n\r\n            /(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i                         // IE11\r\n            ], [[NAME, 'IE'], VERSION], [\r\n\r\n            /(edge)\\/((\\d+)?[\\w\\.]+)/i                                          // Microsoft Edge\r\n            ], [NAME, VERSION], [\r\n\r\n            /(yabrowser)\\/([\\w\\.]+)/i                                           // Yandex\r\n            ], [[NAME, 'Yandex'], VERSION], [\r\n\r\n            /(comodo_dragon)\\/([\\w\\.]+)/i                                       // Comodo Dragon\r\n            ], [[NAME, /_/g, ' '], VERSION], [\r\n\r\n            /(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i,\r\n                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia\r\n            /(qqbrowser)[\\/\\s]?([\\w\\.]+)/i\r\n                                                                                // QQBrowser\r\n            ], [NAME, VERSION], [\r\n\r\n            /(uc\\s?browser)[\\/\\s]?([\\w\\.]+)/i,\r\n            /ucweb.+(ucbrowser)[\\/\\s]?([\\w\\.]+)/i,\r\n            /JUC.+(ucweb)[\\/\\s]?([\\w\\.]+)/i\r\n                                                                                // UCBrowser\r\n            ], [[NAME, 'UCBrowser'], VERSION], [\r\n\r\n            /(dolfin)\\/([\\w\\.]+)/i                                              // Dolphin\r\n            ], [[NAME, 'Dolphin'], VERSION], [\r\n\r\n            /((?:android.+)crmo|crios)\\/([\\w\\.]+)/i                             // Chrome for Android/iOS\r\n            ], [[NAME, 'Chrome'], VERSION], [\r\n\r\n            /XiaoMi\\/MiuiBrowser\\/([\\w\\.]+)/i                                   // MIUI Browser\r\n            ], [VERSION, [NAME, 'MIUI Browser']], [\r\n\r\n            /android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)/i         // Android Browser\r\n            ], [VERSION, [NAME, 'Android Browser']], [\r\n\r\n            /FBAV\\/([\\w\\.]+);/i                                                 // Facebook App for iOS\r\n            ], [VERSION, [NAME, 'Facebook']], [\r\n\r\n            /fxios\\/([\\w\\.-]+)/i                                                // Firefox for iOS\r\n            ], [VERSION, [NAME, 'Firefox']], [\r\n\r\n            /version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i                       // Mobile Safari\r\n            ], [VERSION, [NAME, 'Mobile Safari']], [\r\n\r\n            /version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i                    // Safari & Safari Mobile\r\n            ], [VERSION, NAME], [\r\n\r\n            /webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i                     // Safari < 3.0\r\n            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [\r\n\r\n            /(konqueror)\\/([\\w\\.]+)/i,                                          // Konqueror\r\n            /(webkit|khtml)\\/([\\w\\.]+)/i\r\n            ], [NAME, VERSION], [\r\n\r\n            // Gecko based\r\n            /(navigator|netscape)\\/([\\w\\.-]+)/i                                 // Netscape\r\n            ], [[NAME, 'Netscape'], VERSION], [\r\n            /(swiftfox)/i,                                                      // Swiftfox\r\n            /(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,\r\n                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\r\n            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\\/([\\w\\.-]+)/i,\r\n                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\r\n            /(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,                          // Mozilla\r\n\r\n            // Other\r\n            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,\r\n                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir\r\n            /(links)\\s\\(([\\w\\.]+)/i,                                            // Links\r\n            /(gobrowser)\\/?([\\w\\.]+)*/i,                                        // GoBrowser\r\n            /(ice\\s?browser)\\/v?([\\w\\._]+)/i,                                   // ICE Browser\r\n            /(mosaic)[\\/\\s]([\\w\\.]+)/i                                          // Mosaic\r\n            ], [NAME, VERSION]\r\n\r\n            /* /////////////////////\r\n            // Media players BEGIN\r\n            ////////////////////////\r\n\r\n            , [\r\n\r\n            /(apple(?:coremedia|))\\/((\\d+)[\\w\\._]+)/i,                          // Generic Apple CoreMedia\r\n            /(coremedia) v((\\d+)[\\w\\._]+)/i\r\n            ], [NAME, VERSION], [\r\n\r\n            /(aqualung|lyssna|bsplayer)\\/((\\d+)?[\\w\\.-]+)/i                     // Aqualung/Lyssna/BSPlayer\r\n            ], [NAME, VERSION], [\r\n\r\n            /(ares|ossproxy)\\s((\\d+)[\\w\\.-]+)/i                                 // Ares/OSSProxy\r\n            ], [NAME, VERSION], [\r\n\r\n            /(audacious|audimusicstream|amarok|bass|core|dalvik|gnomemplayer|music on console|nsplayer|psp-internetradioplayer|videos)\\/((\\d+)[\\w\\.-]+)/i,\r\n                                                                                // Audacious/AudiMusicStream/Amarok/BASS/OpenCORE/Dalvik/GnomeMplayer/MoC\r\n                                                                                // NSPlayer/PSP-InternetRadioPlayer/Videos\r\n            /(clementine|music player daemon)\\s((\\d+)[\\w\\.-]+)/i,               // Clementine/MPD\r\n            /(lg player|nexplayer)\\s((\\d+)[\\d\\.]+)/i,\r\n            /player\\/(nexplayer|lg player)\\s((\\d+)[\\w\\.-]+)/i                   // NexPlayer/LG Player\r\n            ], [NAME, VERSION], [\r\n            /(nexplayer)\\s((\\d+)[\\w\\.-]+)/i                                     // Nexplayer\r\n            ], [NAME, VERSION], [\r\n\r\n            /(flrp)\\/((\\d+)[\\w\\.-]+)/i                                          // Flip Player\r\n            ], [[NAME, 'Flip Player'], VERSION], [\r\n\r\n            /(fstream|nativehost|queryseekspider|ia-archiver|facebookexternalhit)/i\r\n                                                                                // FStream/NativeHost/QuerySeekSpider/IA Archiver/facebookexternalhit\r\n            ], [NAME], [\r\n\r\n            /(gstreamer) souphttpsrc (?:\\([^\\)]+\\)){0,1} libsoup\\/((\\d+)[\\w\\.-]+)/i\r\n                                                                                // Gstreamer\r\n            ], [NAME, VERSION], [\r\n\r\n            /(htc streaming player)\\s[\\w_]+\\s\\/\\s((\\d+)[\\d\\.]+)/i,              // HTC Streaming Player\r\n            /(java|python-urllib|python-requests|wget|libcurl)\\/((\\d+)[\\w\\.-_]+)/i,\r\n                                                                                // Java/urllib/requests/wget/cURL\r\n            /(lavf)((\\d+)[\\d\\.]+)/i                                             // Lavf (FFMPEG)\r\n            ], [NAME, VERSION], [\r\n\r\n            /(htc_one_s)\\/((\\d+)[\\d\\.]+)/i                                      // HTC One S\r\n            ], [[NAME, /_/g, ' '], VERSION], [\r\n\r\n            /(mplayer)(?:\\s|\\/)(?:(?:sherpya-){0,1}svn)(?:-|\\s)(r\\d+(?:-\\d+[\\w\\.-]+){0,1})/i\r\n                                                                                // MPlayer SVN\r\n            ], [NAME, VERSION], [\r\n\r\n            /(mplayer)(?:\\s|\\/|[unkow-]+)((\\d+)[\\w\\.-]+)/i                      // MPlayer\r\n            ], [NAME, VERSION], [\r\n\r\n            /(mplayer)/i,                                                       // MPlayer (no other info)\r\n            /(yourmuze)/i,                                                      // YourMuze\r\n            /(media player classic|nero showtime)/i                             // Media Player Classic/Nero ShowTime\r\n            ], [NAME], [\r\n\r\n            /(nero (?:home|scout))\\/((\\d+)[\\w\\.-]+)/i                           // Nero Home/Nero Scout\r\n            ], [NAME, VERSION], [\r\n\r\n            /(nokia\\d+)\\/((\\d+)[\\w\\.-]+)/i                                      // Nokia\r\n            ], [NAME, VERSION], [\r\n\r\n            /\\s(songbird)\\/((\\d+)[\\w\\.-]+)/i                                    // Songbird/Philips-Songbird\r\n            ], [NAME, VERSION], [\r\n\r\n            /(winamp)3 version ((\\d+)[\\w\\.-]+)/i,                               // Winamp\r\n            /(winamp)\\s((\\d+)[\\w\\.-]+)/i,\r\n            /(winamp)mpeg\\/((\\d+)[\\w\\.-]+)/i\r\n            ], [NAME, VERSION], [\r\n\r\n            /(ocms-bot|tapinradio|tunein radio|unknown|winamp|inlight radio)/i  // OCMS-bot/tap in radio/tunein/unknown/winamp (no other info)\r\n                                                                                // inlight radio\r\n            ], [NAME], [\r\n\r\n            /(quicktime|rma|radioapp|radioclientapplication|soundtap|totem|stagefright|streamium)\\/((\\d+)[\\w\\.-]+)/i\r\n                                                                                // QuickTime/RealMedia/RadioApp/RadioClientApplication/\r\n                                                                                // SoundTap/Totem/Stagefright/Streamium\r\n            ], [NAME, VERSION], [\r\n\r\n            /(smp)((\\d+)[\\d\\.]+)/i                                              // SMP\r\n            ], [NAME, VERSION], [\r\n\r\n            /(vlc) media player - version ((\\d+)[\\w\\.]+)/i,                     // VLC Videolan\r\n            /(vlc)\\/((\\d+)[\\w\\.-]+)/i,\r\n            /(xbmc|gvfs|xine|xmms|irapp)\\/((\\d+)[\\w\\.-]+)/i,                    // XBMC/gvfs/Xine/XMMS/irapp\r\n            /(foobar2000)\\/((\\d+)[\\d\\.]+)/i,                                    // Foobar2000\r\n            /(itunes)\\/((\\d+)[\\d\\.]+)/i                                         // iTunes\r\n            ], [NAME, VERSION], [\r\n\r\n            /(wmplayer)\\/((\\d+)[\\w\\.-]+)/i,                                     // Windows Media Player\r\n            /(windows-media-player)\\/((\\d+)[\\w\\.-]+)/i\r\n            ], [[NAME, /-/g, ' '], VERSION], [\r\n\r\n            /windows\\/((\\d+)[\\w\\.-]+) upnp\\/[\\d\\.]+ dlnadoc\\/[\\d\\.]+ (home media server)/i\r\n                                                                                // Windows Media Server\r\n            ], [VERSION, [NAME, 'Windows']], [\r\n\r\n            /(com\\.riseupradioalarm)\\/((\\d+)[\\d\\.]*)/i                          // RiseUP Radio Alarm\r\n            ], [NAME, VERSION], [\r\n\r\n            /(rad.io)\\s((\\d+)[\\d\\.]+)/i,                                        // Rad.io\r\n            /(radio.(?:de|at|fr))\\s((\\d+)[\\d\\.]+)/i\r\n            ], [[NAME, 'rad.io'], VERSION]\r\n\r\n            //////////////////////\r\n            // Media players END\r\n            ////////////////////*/\r\n\r\n        ],\r\n\r\n        cpu : [[\r\n\r\n            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i                     // AMD64\r\n            ], [[ARCHITECTURE, 'amd64']], [\r\n\r\n            /(ia32(?=;))/i                                                      // IA32 (quicktime)\r\n            ], [[ARCHITECTURE, util.lowerize]], [\r\n\r\n            /((?:i[346]|x)86)[;\\)]/i                                            // IA32\r\n            ], [[ARCHITECTURE, 'ia32']], [\r\n\r\n            // PocketPC mistakenly identified as PowerPC\r\n            /windows\\s(ce|mobile);\\sppc;/i\r\n            ], [[ARCHITECTURE, 'arm']], [\r\n\r\n            /((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i                           // PowerPC\r\n            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [\r\n\r\n            /(sun4\\w)[;\\)]/i                                                    // SPARC\r\n            ], [[ARCHITECTURE, 'sparc']], [\r\n\r\n            /((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+;))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i\r\n                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\r\n            ], [[ARCHITECTURE, util.lowerize]]\r\n        ],\r\n\r\n        device : [[\r\n\r\n            /\\((ipad|playbook);[\\w\\s\\);-]+(rim|apple)/i                         // iPad/PlayBook\r\n            ], [MODEL, VENDOR, [TYPE, TABLET]], [\r\n\r\n            /applecoremedia\\/[\\w\\.]+ \\((ipad)/                                  // iPad\r\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [\r\n\r\n            /(apple\\s{0,1}tv)/i                                                 // Apple TV\r\n            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [\r\n\r\n            /(archos)\\s(gamepad2?)/i,                                           // Archos\r\n            /(hp).+(touchpad)/i,                                                // HP TouchPad\r\n            /(kindle)\\/([\\w\\.]+)/i,                                             // Kindle\r\n            /\\s(nook)[\\w\\s]+build\\/(\\w+)/i,                                     // Nook\r\n            /(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i                                  // Dell Streak\r\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\r\n\r\n            /(kf[A-z]+)\\sbuild\\/[\\w\\.]+.*silk\\//i                               // Kindle Fire HD\r\n            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [\r\n            /(sd|kf)[0349hijorstuw]+\\sbuild\\/[\\w\\.]+.*silk\\//i                  // Fire Phone\r\n            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [\r\n\r\n            /\\((ip[honed|\\s\\w*]+);.+(apple)/i                                   // iPod/iPhone\r\n            ], [MODEL, VENDOR, [TYPE, MOBILE]], [\r\n            /\\((ip[honed|\\s\\w*]+);/i                                            // iPod/iPhone\r\n            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [\r\n\r\n            /(blackberry)[\\s-]?(\\w+)/i,                                         // BlackBerry\r\n            /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\\s_-]?([\\w-]+)*/i,\r\n                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Huawei/Meizu/Motorola/Polytron\r\n            /(hp)\\s([\\w\\s]+\\w)/i,                                               // HP iPAQ\r\n            /(asus)-?(\\w+)/i                                                    // Asus\r\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\r\n            /\\(bb10;\\s(\\w+)/i                                                   // BlackBerry 10\r\n            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [\r\n                                                                                // Asus Tablets\r\n            /android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7)/i\r\n            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [\r\n\r\n            /(sony)\\s(tablet\\s[ps])\\sbuild\\//i,                                  // Sony\r\n            /(sony)?(?:sgp.+)\\sbuild\\//i\r\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [\r\n            /(?:sony)?(?:(?:(?:c|d)\\d{4})|(?:so[-l].+))\\sbuild\\//i\r\n            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Phone'], [TYPE, MOBILE]], [\r\n\r\n            /\\s(ouya)\\s/i,                                                      // Ouya\r\n            /(nintendo)\\s([wids3u]+)/i                                          // Nintendo\r\n            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [\r\n\r\n            /android.+;\\s(shield)\\sbuild/i                                      // Nvidia\r\n            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [\r\n\r\n            /(playstation\\s[34portablevi]+)/i                                   // Playstation\r\n            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [\r\n\r\n            /(sprint\\s(\\w+))/i                                                  // Sprint Phones\r\n            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [\r\n\r\n            /(lenovo)\\s?(S(?:5000|6000)+(?:[-][\\w+]))/i                         // Lenovo tablets\r\n            ], [VENDOR, MODEL, [TYPE, TABLET]], [\r\n\r\n            /(htc)[;_\\s-]+([\\w\\s]+(?=\\))|\\w+)*/i,                               // HTC\r\n            /(zte)-(\\w+)*/i,                                                    // ZTE\r\n            /(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]+)*/i\r\n                                                                                // Alcatel/GeeksPhone/Huawei/Lenovo/Nexian/Panasonic/Sony\r\n            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [\r\n                \r\n            /(nexus\\s9)/i                                                       // HTC Nexus 9\r\n            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [\r\n\r\n            /[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i                                   // Microsoft Xbox\r\n            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [\r\n            /(kin\\.[onetw]{3})/i                                                // Microsoft Kin\r\n            ], [[MODEL, /\\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [\r\n\r\n                                                                                // Motorola\r\n            /\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?(:?\\s4g)?)[\\w\\s]+build\\//i,\r\n            /mot[\\s-]?(\\w+)*/i,\r\n            /(XT\\d{3,4}) build\\//i,\r\n            /(nexus\\s[6])/i\r\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [\r\n            /android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i\r\n            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [\r\n\r\n            /android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,\r\n            /((SM-T\\w+))/i\r\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung\r\n            /((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-n900))/i,\r\n            /(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)*/i,\r\n            /sec-((sgh\\w+))/i\r\n            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [\r\n            /(samsung);smarttv/i\r\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\r\n\r\n            /\\(dtv[\\);].+(aquos)/i                                              // Sharp\r\n            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [\r\n            /sie-(\\w+)*/i                                                       // Siemens\r\n            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [\r\n\r\n            /(maemo|nokia).*(n900|lumia\\s\\d+)/i,                                // Nokia\r\n            /(nokia)[\\s_-]?([\\w-]+)*/i\r\n            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [\r\n\r\n            /android\\s3\\.[\\s\\w;-]{10}(a\\d{3})/i                                 // Acer\r\n            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [\r\n\r\n            /android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet\r\n            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [\r\n            /(lg) netcast\\.tv/i                                                 // LG SmartTV\r\n            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [\r\n            /(nexus\\s[45])/i,                                                   // LG\r\n            /lg[e;\\s\\/-]+(\\w+)*/i\r\n            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [\r\n\r\n            /android.+(ideatab[a-z0-9\\-\\s]+)/i                                  // Lenovo\r\n            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [\r\n\r\n            /linux;.+((jolla));/i                                               // Jolla\r\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\r\n\r\n            /((pebble))app\\/[\\d\\.]+\\s/i                                         // Pebble\r\n            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [\r\n\r\n            /android.+;\\s(glass)\\s\\d/i                                          // Google Glass\r\n            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [\r\n\r\n            /android.+(\\w+)\\s+build\\/hm\\1/i,                                        // Xiaomi Hongmi 'numeric' models\r\n            /android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,                   // Xiaomi Hongmi\r\n            /android.+(mi[\\s\\-_]*(?:one|one[\\s_]plus)?[\\s_]*(?:\\d\\w)?)\\s+build/i    // Xiaomi Mi\r\n            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [\r\n\r\n            /\\s(tablet)[;\\/\\s]/i,                                               // Unidentifiable Tablet\r\n            /\\s(mobile)[;\\/\\s]/i                                                // Unidentifiable Mobile\r\n            ], [[TYPE, util.lowerize], VENDOR, MODEL]\r\n\r\n            /*//////////////////////////\r\n            // TODO: move to string map\r\n            ////////////////////////////\r\n\r\n            /(C6603)/i                                                          // Sony Xperia Z C6603\r\n            ], [[MODEL, 'Xperia Z C6603'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\r\n            /(C6903)/i                                                          // Sony Xperia Z 1\r\n            ], [[MODEL, 'Xperia Z 1'], [VENDOR, 'Sony'], [TYPE, MOBILE]], [\r\n\r\n            /(SM-G900[F|H])/i                                                   // Samsung Galaxy S5\r\n            ], [[MODEL, 'Galaxy S5'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\r\n            /(SM-G7102)/i                                                       // Samsung Galaxy Grand 2\r\n            ], [[MODEL, 'Galaxy Grand 2'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\r\n            /(SM-G530H)/i                                                       // Samsung Galaxy Grand Prime\r\n            ], [[MODEL, 'Galaxy Grand Prime'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\r\n            /(SM-G313HZ)/i                                                      // Samsung Galaxy V\r\n            ], [[MODEL, 'Galaxy V'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\r\n            /(SM-T805)/i                                                        // Samsung Galaxy Tab S 10.5\r\n            ], [[MODEL, 'Galaxy Tab S 10.5'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\r\n            /(SM-G800F)/i                                                       // Samsung Galaxy S5 Mini\r\n            ], [[MODEL, 'Galaxy S5 Mini'], [VENDOR, 'Samsung'], [TYPE, MOBILE]], [\r\n            /(SM-T311)/i                                                        // Samsung Galaxy Tab 3 8.0\r\n            ], [[MODEL, 'Galaxy Tab 3 8.0'], [VENDOR, 'Samsung'], [TYPE, TABLET]], [\r\n\r\n            /(R1001)/i                                                          // Oppo R1001\r\n            ], [MODEL, [VENDOR, 'OPPO'], [TYPE, MOBILE]], [\r\n            /(X9006)/i                                                          // Oppo Find 7a\r\n            ], [[MODEL, 'Find 7a'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\r\n            /(R2001)/i                                                          // Oppo YOYO R2001\r\n            ], [[MODEL, 'Yoyo R2001'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\r\n            /(R815)/i                                                           // Oppo Clover R815\r\n            ], [[MODEL, 'Clover R815'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\r\n             /(U707)/i                                                          // Oppo Find Way S\r\n            ], [[MODEL, 'Find Way S'], [VENDOR, 'Oppo'], [TYPE, MOBILE]], [\r\n\r\n            /(T3C)/i                                                            // Advan Vandroid T3C\r\n            ], [MODEL, [VENDOR, 'Advan'], [TYPE, TABLET]], [\r\n            /(ADVAN T1J\\+)/i                                                    // Advan Vandroid T1J+\r\n            ], [[MODEL, 'Vandroid T1J+'], [VENDOR, 'Advan'], [TYPE, TABLET]], [\r\n            /(ADVAN S4A)/i                                                      // Advan Vandroid S4A\r\n            ], [[MODEL, 'Vandroid S4A'], [VENDOR, 'Advan'], [TYPE, MOBILE]], [\r\n\r\n            /(V972M)/i                                                          // ZTE V972M\r\n            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, MOBILE]], [\r\n\r\n            /(i-mobile)\\s(IQ\\s[\\d\\.]+)/i                                        // i-mobile IQ\r\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\r\n            /(IQ6.3)/i                                                          // i-mobile IQ IQ 6.3\r\n            ], [[MODEL, 'IQ 6.3'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\r\n            /(i-mobile)\\s(i-style\\s[\\d\\.]+)/i                                   // i-mobile i-STYLE\r\n            ], [VENDOR, MODEL, [TYPE, MOBILE]], [\r\n            /(i-STYLE2.1)/i                                                     // i-mobile i-STYLE 2.1\r\n            ], [[MODEL, 'i-STYLE 2.1'], [VENDOR, 'i-mobile'], [TYPE, MOBILE]], [\r\n            \r\n            /(mobiistar touch LAI 512)/i                                        // mobiistar touch LAI 512\r\n            ], [[MODEL, 'Touch LAI 512'], [VENDOR, 'mobiistar'], [TYPE, MOBILE]], [\r\n\r\n            /////////////\r\n            // END TODO\r\n            ///////////*/\r\n\r\n        ],\r\n\r\n        engine : [[\r\n\r\n            /windows.+\\sedge\\/([\\w\\.]+)/i                                       // EdgeHTML\r\n            ], [VERSION, [NAME, 'EdgeHTML']], [\r\n\r\n            /(presto)\\/([\\w\\.]+)/i,                                             // Presto\r\n            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\\/([\\w\\.]+)/i,     // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m\r\n            /(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,                          // KHTML/Tasman/Links\r\n            /(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i                                      // iCab\r\n            ], [NAME, VERSION], [\r\n\r\n            /rv\\:([\\w\\.]+).*(gecko)/i                                           // Gecko\r\n            ], [VERSION, NAME]\r\n        ],\r\n\r\n        os : [[\r\n\r\n            // Windows based\r\n            /microsoft\\s(windows)\\s(vista|xp)/i                                 // Windows (iTunes)\r\n            ], [NAME, VERSION], [\r\n            /(windows)\\snt\\s6\\.2;\\s(arm)/i,                                     // Windows RT\r\n            /(windows\\sphone(?:\\sos)*|windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i\r\n            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [\r\n            /(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i\r\n            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [\r\n\r\n            // Mobile/Embedded OS\r\n            /\\((bb)(10);/i                                                      // BlackBerry 10\r\n            ], [[NAME, 'BlackBerry'], VERSION], [\r\n            /(blackberry)\\w*\\/?([\\w\\.]+)*/i,                                    // Blackberry\r\n            /(tizen)[\\/\\s]([\\w\\.]+)/i,                                          // Tizen\r\n            /(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|contiki)[\\/\\s-]?([\\w\\.]+)*/i,\r\n                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki\r\n            /linux;.+(sailfish);/i                                              // Sailfish OS\r\n            ], [NAME, VERSION], [\r\n            /(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]+)*/i                 // Symbian\r\n            ], [[NAME, 'Symbian'], VERSION], [\r\n            /\\((series40);/i                                                    // Series 40\r\n            ], [NAME], [\r\n            /mozilla.+\\(mobile;.+gecko.+firefox/i                               // Firefox OS\r\n            ], [[NAME, 'Firefox OS'], VERSION], [\r\n\r\n            // Console\r\n            /(nintendo|playstation)\\s([wids34portablevu]+)/i,                   // Nintendo/Playstation\r\n\r\n            // GNU/Linux based\r\n            /(mint)[\\/\\s\\(]?(\\w+)*/i,                                           // Mint\r\n            /(mageia|vectorlinux)[;\\s]/i,                                       // Mageia/VectorLinux\r\n            /(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?([\\w\\.-]+)*/i,\r\n                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware\r\n                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus\r\n            /(hurd|linux)\\s?([\\w\\.]+)*/i,                                       // Hurd/Linux\r\n            /(gnu)\\s?([\\w\\.]+)*/i                                               // GNU\r\n            ], [NAME, VERSION], [\r\n\r\n            /(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i                                       // Chromium OS\r\n            ], [[NAME, 'Chromium OS'], VERSION],[\r\n\r\n            // Solaris\r\n            /(sunos)\\s?([\\w\\.]+\\d)*/i                                           // Solaris\r\n            ], [[NAME, 'Solaris'], VERSION], [\r\n\r\n            // BSD based\r\n            /\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]+)*/i                   // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly\r\n            ], [NAME, VERSION],[\r\n\r\n            /(ip[honead]+)(?:.*os\\s([\\w]+)*\\slike\\smac|;\\sopera)/i              // iOS\r\n            ], [[NAME, 'iOS'], [VERSION, /_/g, '.']], [\r\n\r\n            /(mac\\sos\\sx)\\s?([\\w\\s\\.]+\\w)*/i,\r\n            /(macintosh|mac(?=_powerpc)\\s)/i                                    // Mac OS\r\n            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [\r\n\r\n            // Other\r\n            /((?:open)?solaris)[\\/\\s-]?([\\w\\.]+)*/i,                            // Solaris\r\n            /(haiku)\\s(\\w+)/i,                                                  // Haiku\r\n            /(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.]*)*/i,                               // AIX\r\n            /(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms)/i,\r\n                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS\r\n            /(unix)\\s?([\\w\\.]+)*/i                                              // UNIX\r\n            ], [NAME, VERSION]\r\n        ]\r\n    };\r\n\r\n\r\n    /////////////////\r\n    // Constructor\r\n    ////////////////\r\n\r\n\r\n    var UAParser = function (uastring, extensions) {\r\n\r\n        if (!(this instanceof UAParser)) {\r\n            return new UAParser(uastring, extensions).getResult();\r\n        }\r\n\r\n        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);\r\n        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;\r\n\r\n        this.getBrowser = function () {\r\n            var browser = mapper.rgx.apply(this, rgxmap.browser);\r\n            browser.major = util.major(browser.version);\r\n            return browser;\r\n        };\r\n        this.getCPU = function () {\r\n            return mapper.rgx.apply(this, rgxmap.cpu);\r\n        };\r\n        this.getDevice = function () {\r\n            return mapper.rgx.apply(this, rgxmap.device);\r\n        };\r\n        this.getEngine = function () {\r\n            return mapper.rgx.apply(this, rgxmap.engine);\r\n        };\r\n        this.getOS = function () {\r\n            return mapper.rgx.apply(this, rgxmap.os);\r\n        };\r\n        this.getResult = function() {\r\n            return {\r\n                ua      : this.getUA(),\r\n                browser : this.getBrowser(),\r\n                engine  : this.getEngine(),\r\n                os      : this.getOS(),\r\n                device  : this.getDevice(),\r\n                cpu     : this.getCPU()\r\n            };\r\n        };\r\n        this.getUA = function () {\r\n            return ua;\r\n        };\r\n        this.setUA = function (uastring) {\r\n            ua = uastring;\r\n            return this;\r\n        };\r\n        this.setUA(ua);\r\n        return this;\r\n    };\r\n\r\n    UAParser.VERSION = LIBVERSION;\r\n    UAParser.BROWSER = {\r\n        NAME    : NAME,\r\n        MAJOR   : MAJOR, // deprecated\r\n        VERSION : VERSION\r\n    };\r\n    UAParser.CPU = {\r\n        ARCHITECTURE : ARCHITECTURE\r\n    };\r\n    UAParser.DEVICE = {\r\n        MODEL   : MODEL,\r\n        VENDOR  : VENDOR,\r\n        TYPE    : TYPE,\r\n        CONSOLE : CONSOLE,\r\n        MOBILE  : MOBILE,\r\n        SMARTTV : SMARTTV,\r\n        TABLET  : TABLET,\r\n        WEARABLE: WEARABLE,\r\n        EMBEDDED: EMBEDDED\r\n    };\r\n    UAParser.ENGINE = {\r\n        NAME    : NAME,\r\n        VERSION : VERSION\r\n    };\r\n    UAParser.OS = {\r\n        NAME    : NAME,\r\n        VERSION : VERSION\r\n    };\r\n\r\n\r\n    ///////////\r\n    // Export\r\n    //////////\r\n\r\n\r\n    // check js environment\r\n    if (typeof(exports) !== UNDEF_TYPE) {\r\n        // nodejs env\r\n        if (typeof module !== UNDEF_TYPE && module.exports) {\r\n            exports = module.exports = UAParser;\r\n        }\r\n        exports.UAParser = UAParser;\r\n    } else {\r\n        // requirejs env (optional)\r\n        if (typeof(define) === FUNC_TYPE && define.amd) {\r\n            define(function () {\r\n                return UAParser;\r\n            });\r\n        } else {\r\n            // browser env\r\n            window.UAParser = UAParser;\r\n        }\r\n    }\r\n\r\n    // jQuery/Zepto specific (optional)\r\n    // Note: \r\n    //   In AMD env the global scope should be kept clean, but jQuery is an exception.\r\n    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,\r\n    //   and we should catch that.\r\n    var $ = window.jQuery || window.Zepto;\r\n    if (typeof $ !== UNDEF_TYPE) {\r\n        var parser = new UAParser();\r\n        $.ua = parser.getResult();\r\n        $.ua.get = function() {\r\n            return parser.getUA();\r\n        };\r\n        $.ua.set = function (uastring) {\r\n            parser.setUA(uastring);\r\n            var result = parser.getResult();\r\n            for (var prop in result) {\r\n                $.ua[prop] = result[prop];\r\n            }\r\n        };\r\n    }\r\n\r\n})(typeof window === 'object' ? window : this);\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/ua-parser-js/src/ua-parser.js\n ** module id = 133\n ** module chunks = 0\n **/","module.exports = __webpack_amd_options__;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/amd-options.js\n ** module id = 134\n ** module chunks = 0\n **/","module.exports = {\n\t\"connect_api_version\": 1,\n\t\"minimum_connect_api_version\": 1\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/app/version-info.json\n ** module id = 135\n ** module chunks = 0\n **/","import {URI as CajaURI} from 'sanitizer/lib/uri';\n\nclass URI {\n\n  /**\n   * Returns the scheme of a URI without parsing the URI, e.g. for URI templates and similar.\n   * This method is here for backward compatibility and URI.parse(uri).getScheme() should be used for new code.\n   * @param {string} uri The raw URI\n   * @returns {string} The scheme of the URI, e.g. 'https' for 'https://example.com'\n   */\n  static getProtocol(uri) {\n    let parts = uri.split(':');\n    return parts.length > 0 ? parts[0] : '';\n  }\n\n  /**\n   * Parses a URI\n   * @param {string} uri The raw URI\n   * @returns {URI|null} The URI or null, if 'uri' does not parse.\n   */\n  static parse(uri) {\n    let parsed = CajaURI.parse(uri);\n    return parsed ? new URI(parsed) : null;\n  }\n\n  constructor(cajaUri) {\n    this.uri = cajaUri;\n  }\n\n  /**\n   * Checks if a URI matches the native HipChat URI scheme: hipchat://www.hipchat.com/room/123.\n   * The host part must be 'www.hipchat.com' or match the base URL of the HC Server.\n   * @returns {boolean} true if it matches, false otherwise\n   */\n  isHipchatNative(baseUrl) {\n    let base = CajaURI.parse(baseUrl);\n    let host = this.uri.getDomain();\n    return \"hipchat\" === this.uri.getScheme() && (\"www.hipchat.com\" === host || base.getDomain() === host);\n  }\n\n  /**\n   * Returns the room ID or name for HipChat native URIs\n   * @returns {string|null} null if the URI is not a native URI or does not point to a room. Returns the room ID or name\n   */\n  getRoom() {\n    return this._nativePathElement('room');\n  }\n\n  /**\n   * Checks whether the URI is a HipChat native URI and points to a room\n   * @returns {boolean} true if it points to a room, false otherwise\n   */\n  containsRoom() {\n    return this.getRoom() !== null;\n  }\n\n  /**\n   * Returns the user ID, @mention or email for HipChat native URIs\n   * @returns {string|null} null if the URI is not a native URI or does not point to a user;\n   */\n  getUser() {\n    return this._nativePathElement('user');\n  }\n\n  /**\n   * Checks whether the URI is a HipChat native URI and points to a user\n   * @returns {boolean} true if it points to a user, false otherwise\n   */\n  containsUser() {\n    return this.getUser() !== null;\n  }\n\n  /**\n   * Returns the base URI, e.g. 'https://example.com' for 'https://example.com/path/?q=query\n   * @returns {string} the base URI\n   */\n  getBase() {\n    let baseUri = CajaURI.create(this.uri.getScheme(), this.uri.getCredentials(), this.uri.getDomain(), this.uri.getPort());\n    return baseUri.toString();\n  }\n\n  /**\n   * @returns {string} The scheme of the URI, e.g. 'https' for 'https://example.com'\n   */\n  getScheme() {\n    return this.uri.getScheme();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a scheme\n   */\n  hasScheme() {\n    return this.uri.hasScheme();\n  }\n\n  /**\n   * @returns {string} The decoded domain of the URI, e.g. 'example.com' for 'https://example.com:80'\n   */\n  getDomain() {\n    return this.uri.getDomain();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a domain\n   */\n  hasDomain() {\n    return this.uri.hasDomain();\n  }\n\n  /**\n   * @returns {string} The port of the URI, e.g. '80' for 'https://example.com:80'\n   */\n  getPort() {\n    return this.uri.getPort();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a port\n   */\n  hasPort() {\n    return this.uri.hasPort();\n  }\n\n  /**\n   * @returns {string} The decoded path of the URI, e.g. '/path' for 'https://example.com/path'\n   */\n  getPath() {\n    return this.uri.getPath();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a path\n   */\n  hasPath() {\n    return this.uri.hasPath();\n  }\n\n  /**\n   * @returns {string} The decoded query of the URI, e.g. '?q=query' for 'https://example.com/path?q=query'\n   */\n  getQuery() {\n    return this.uri.getQuery();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a query\n   */\n  hasQuery() {\n    return this.uri.hasQuery();\n  }\n\n  /**\n   * @returns {string} The decoded fragment of the URI, e.g. 'frag' for 'https://example.com/path#frag'\n   */\n  getFragment() {\n    return this.uri.getFragment();\n  }\n\n  /**\n   * @returns {boolean} whether the URI has a fragment\n   */\n  hasFragment() {\n    return this.uri.hasFragment();\n  }\n\n  /**\n   * Returns all query parameters as an array of keys and values like [ key0, value0, key1, value1, ... ]\n   * @returns {Array.<string>}\n   */\n  getAllParameters() {\n    return this.uri.getAllParameters();\n  }\n\n  /**\n   * Returns the decoded values of a particular query parameter. E.g. ['a','b'] for 'q' where the query is '?q=a&q=b'\n   * @param paramNameUnescaped the name of the query parameter (not escaped)\n   * @returns {Array.<string>}\n   */\n  getParameterValues(paramNameUnescaped) {\n    return this.uri.getParameterValues(paramNameUnescaped);\n  }\n\n  /**\n   * Returns a map of non-empty lists for the query parameters. E.g. {x:['a'],y:['b']} for '?x=a&y=b'\n   * @returns {Object.<string, Array.<string>>}\n   */\n  getParameterMap() {\n    return this.uri.getParameterMap();\n  }\n\n  /**\n   * Returns the first value for a given query parameter or null if the given\n   * parameter name does not appear in the query string.\n   * If the given parameter name does appear, but has no '=' following\n   * it, then the empty string will be returned.\n   * @param paramNameUnescaped the name of the query parameter (not escaped)\n   * @returns {string|null}\n   */\n  getParameterValue(paramNameUnescaped) {\n    return this.uri.getParameterValue(paramNameUnescaped);\n  }\n\n  /**\n   * Sets the value(s) of query parameter\n   * @param {string} key The query parameter key\n   * @param {string|Array.<string>} values The value or values of the query parameter\n   */\n  setParameterValues(key, values) {\n    this.uri.setParameterValues(key, _.isArray(values) ? values : [values]);\n    return this;\n  }\n\n  /**\n   * Removes a query parameter\n   * @param {string} key\n   */\n  removeParameter(key) {\n    this.uri.removeParameter(key);\n    return this;\n  }\n\n  /**\n   * @param {string} fragment the url fragment\n   * @returns {string} The decoded fragment of the URI, e.g. 'frag' for 'https://example.com/path#frag'\n   */\n  setFragment(fragment) {\n    if (_.isObject(fragment)) {\n      let parts = [];\n      for (let key in fragment) {\n        parts.push(key + '=' + fragment[key]);\n      }\n      fragment = parts.join('&');\n    }\n    this.uri.setRawFragment(fragment);\n    return this;\n  }\n\n  /**\n   * Get the string representation of the URI\n   * @returns {string}\n   */\n  toString() {\n    let uri = this.uri.toString();\n    return _.endsWith(uri, '?') ? uri.substr(0, uri.length - 1) : uri;\n  }\n\n  _nativePathElement(context) {\n    let pathElements = this.uri.getPath().split('/');\n    if (pathElements.length === 3 && pathElements[1] === context) {\n      return pathElements[2];\n    }\n    return null;\n  }\n}\n\nexport default URI;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/uri.js\n **/","// Copyright (C) 2010 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * Implements RFC 3986 for parsing/formatting URIs.\n *\n * @author mikesamuel@gmail.com\n * \\@provides URI\n * \\@overrides window\n */\n\nvar URI = (function () {\n\n    /**\n     * creates a uri from the string form.  The parser is relaxed, so special\n     * characters that aren't escaped but don't cause ambiguities will not cause\n     * parse failures.\n     *\n     * @return {URI|null}\n     */\n    function parse(uriStr) {\n        var m = ('' + uriStr).match(URI_RE_);\n        if (!m) { return null; }\n        return new URI(\n            nullIfAbsent(m[1]),\n            nullIfAbsent(m[2]),\n            nullIfAbsent(m[3]),\n            nullIfAbsent(m[4]),\n            nullIfAbsent(m[5]),\n            nullIfAbsent(m[6]),\n            nullIfAbsent(m[7]));\n    }\n\n\n    /**\n     * creates a uri from the given parts.\n     *\n     * @param scheme {string} an unencoded scheme such as \"http\" or null\n     * @param credentials {string} unencoded user credentials or null\n     * @param domain {string} an unencoded domain name or null\n     * @param port {number} a port number in [1, 32768].\n     *    -1 indicates no port, as does null.\n     * @param path {string} an unencoded path\n     * @param query {Array.<string>|string|null} a list of unencoded cgi\n     *   parameters where even values are keys and odds the corresponding values\n     *   or an unencoded query.\n     * @param fragment {string} an unencoded fragment without the \"#\" or null.\n     * @return {URI}\n     */\n    function create(scheme, credentials, domain, port, path, query, fragment) {\n        var uri = new URI(\n            encodeIfExists2(scheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n            encodeIfExists2(\n                credentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_),\n            encodeIfExists(domain),\n            port > 0 ? port.toString() : null,\n            encodeIfExists2(path, URI_DISALLOWED_IN_PATH_),\n            null,\n            encodeIfExists(fragment));\n        if (query) {\n            if ('string' === typeof query) {\n                uri.setRawQuery(query.replace(/[^?&=0-9A-Za-z_\\-~.%]/g, encodeOne));\n            } else {\n                uri.setAllParameters(query);\n            }\n        }\n        return uri;\n    }\n    function encodeIfExists(unescapedPart) {\n        if ('string' == typeof unescapedPart) {\n            return encodeURIComponent(unescapedPart);\n        }\n        return null;\n    };\n    /**\n     * if unescapedPart is non null, then escapes any characters in it that aren't\n     * valid characters in a url and also escapes any special characters that\n     * appear in extra.\n     *\n     * @param unescapedPart {string}\n     * @param extra {RegExp} a character set of characters in [\\01-\\177].\n     * @return {string|null} null iff unescapedPart == null.\n     */\n    function encodeIfExists2(unescapedPart, extra) {\n        if ('string' == typeof unescapedPart) {\n            return encodeURI(unescapedPart).replace(extra, encodeOne);\n        }\n        return null;\n    };\n    /** converts a character in [\\01-\\177] to its url encoded equivalent. */\n    function encodeOne(ch) {\n        var n = ch.charCodeAt(0);\n        return '%' + '0123456789ABCDEF'.charAt((n >> 4) & 0xf) +\n            '0123456789ABCDEF'.charAt(n & 0xf);\n    }\n\n    /**\n     * {@updoc\n     *  $ normPath('foo/./bar')\n     *  # 'foo/bar'\n     *  $ normPath('./foo')\n     *  # 'foo'\n     *  $ normPath('foo/.')\n     *  # 'foo'\n     *  $ normPath('foo//bar')\n     *  # 'foo/bar'\n     * }\n     */\n    function normPath(path) {\n        return path.replace(/(^|\\/)\\.(?:\\/|$)/g, '$1').replace(/\\/{2,}/g, '/');\n    }\n\n    var PARENT_DIRECTORY_HANDLER = new RegExp(\n        ''\n            // A path break\n            + '(/|^)'\n            // followed by a non .. path element\n            // (cannot be . because normPath is used prior to this RegExp)\n            + '(?:[^./][^/]*|\\\\.{2,}(?:[^./][^/]*)|\\\\.{3,}[^/]*)'\n            // followed by .. followed by a path break.\n            + '/\\\\.\\\\.(?:/|$)');\n\n    var PARENT_DIRECTORY_HANDLER_RE = new RegExp(PARENT_DIRECTORY_HANDLER);\n\n    var EXTRA_PARENT_PATHS_RE = /^(?:\\.\\.\\/)*(?:\\.\\.$)?/;\n\n    /**\n     * Normalizes its input path and collapses all . and .. sequences except for\n     * .. sequences that would take it above the root of the current parent\n     * directory.\n     * {@updoc\n     *  $ collapse_dots('foo/../bar')\n     *  # 'bar'\n     *  $ collapse_dots('foo/./bar')\n     *  # 'foo/bar'\n     *  $ collapse_dots('foo/../bar/./../../baz')\n     *  # 'baz'\n     *  $ collapse_dots('../foo')\n     *  # '../foo'\n     *  $ collapse_dots('../foo').replace(EXTRA_PARENT_PATHS_RE, '')\n     *  # 'foo'\n     * }\n     */\n    function collapse_dots(path) {\n        if (path === null) { return null; }\n        var p = normPath(path);\n        // Only /../ left to flatten\n        var r = PARENT_DIRECTORY_HANDLER_RE;\n        // We replace with $1 which matches a / before the .. because this\n        // guarantees that:\n        // (1) we have at most 1 / between the adjacent place,\n        // (2) always have a slash if there is a preceding path section, and\n        // (3) we never turn a relative path into an absolute path.\n        for (var q; (q = p.replace(r, '$1')) != p; p = q) {};\n        return p;\n    }\n\n    /**\n     * resolves a relative url string to a base uri.\n     * @return {URI}\n     */\n    function resolve(baseUri, relativeUri) {\n        // there are several kinds of relative urls:\n        // 1. //foo - replaces everything from the domain on.  foo is a domain name\n        // 2. foo - replaces the last part of the path, the whole query and fragment\n        // 3. /foo - replaces the the path, the query and fragment\n        // 4. ?foo - replace the query and fragment\n        // 5. #foo - replace the fragment only\n\n        var absoluteUri = baseUri.clone();\n        // we satisfy these conditions by looking for the first part of relativeUri\n        // that is not blank and applying defaults to the rest\n\n        var overridden = relativeUri.hasScheme();\n\n        if (overridden) {\n            absoluteUri.setRawScheme(relativeUri.getRawScheme());\n        } else {\n            overridden = relativeUri.hasCredentials();\n        }\n\n        if (overridden) {\n            absoluteUri.setRawCredentials(relativeUri.getRawCredentials());\n        } else {\n            overridden = relativeUri.hasDomain();\n        }\n\n        if (overridden) {\n            absoluteUri.setRawDomain(relativeUri.getRawDomain());\n        } else {\n            overridden = relativeUri.hasPort();\n        }\n\n        var rawPath = relativeUri.getRawPath();\n        var simplifiedPath = collapse_dots(rawPath);\n        if (overridden) {\n            absoluteUri.setPort(relativeUri.getPort());\n            simplifiedPath = simplifiedPath\n                && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n        } else {\n            overridden = !!rawPath;\n            if (overridden) {\n                // resolve path properly\n                if (simplifiedPath.charCodeAt(0) !== 0x2f /* / */) {  // path is relative\n                    var absRawPath = collapse_dots(absoluteUri.getRawPath() || '')\n                        .replace(EXTRA_PARENT_PATHS_RE, '');\n                    var slash = absRawPath.lastIndexOf('/') + 1;\n                    simplifiedPath = collapse_dots(\n                        (slash ? absRawPath.substring(0, slash) : '')\n                            + collapse_dots(rawPath))\n                        .replace(EXTRA_PARENT_PATHS_RE, '');\n                }\n            } else {\n                simplifiedPath = simplifiedPath\n                    && simplifiedPath.replace(EXTRA_PARENT_PATHS_RE, '');\n                if (simplifiedPath !== rawPath) {\n                    absoluteUri.setRawPath(simplifiedPath);\n                }\n            }\n        }\n\n        if (overridden) {\n            absoluteUri.setRawPath(simplifiedPath);\n        } else {\n            overridden = relativeUri.hasQuery();\n        }\n\n        if (overridden) {\n            absoluteUri.setRawQuery(relativeUri.getRawQuery());\n        } else {\n            overridden = relativeUri.hasFragment();\n        }\n\n        if (overridden) {\n            absoluteUri.setRawFragment(relativeUri.getRawFragment());\n        }\n\n        return absoluteUri;\n    }\n\n    /**\n     * a mutable URI.\n     *\n     * This class contains setters and getters for the parts of the URI.\n     * The <tt>getXYZ</tt>/<tt>setXYZ</tt> methods return the decoded part -- so\n     * <code>uri.parse('/foo%20bar').getPath()</code> will return the decoded path,\n     * <tt>/foo bar</tt>.\n     *\n     * <p>The raw versions of fields are available too.\n     * <code>uri.parse('/foo%20bar').getRawPath()</code> will return the raw path,\n     * <tt>/foo%20bar</tt>.  Use the raw setters with care, since\n     * <code>URI::toString</code> is not guaranteed to return a valid url if a\n     * raw setter was used.\n     *\n     * <p>All setters return <tt>this</tt> and so may be chained, a la\n     * <code>uri.parse('/foo').setFragment('part').toString()</code>.\n     *\n     * <p>You should not use this constructor directly -- please prefer the factory\n     * functions {@link uri.parse}, {@link uri.create}, {@link uri.resolve}\n     * instead.</p>\n     *\n     * <p>The parameters are all raw (assumed to be properly escaped) parts, and\n     * any (but not all) may be null.  Undefined is not allowed.</p>\n     *\n     * @constructor\n     */\n    function URI(\n        rawScheme,\n        rawCredentials, rawDomain, port,\n        rawPath, rawQuery, rawFragment) {\n        this.scheme_ = rawScheme;\n        this.credentials_ = rawCredentials;\n        this.domain_ = rawDomain;\n        this.port_ = port;\n        this.path_ = rawPath;\n        this.query_ = rawQuery;\n        this.fragment_ = rawFragment;\n        /**\n         * @type {Array|null}\n         */\n        this.paramCache_ = null;\n    }\n\n    /** returns the string form of the url. */\n    URI.prototype.toString = function () {\n        var out = [];\n        if (null !== this.scheme_) { out.push(this.scheme_, ':'); }\n        if (null !== this.domain_) {\n            out.push('//');\n            if (null !== this.credentials_) { out.push(this.credentials_, '@'); }\n            out.push(this.domain_);\n            if (null !== this.port_) { out.push(':', this.port_.toString()); }\n        }\n        if (null !== this.path_) { out.push(this.path_); }\n        if (null !== this.query_) { out.push('?', this.query_); }\n        if (null !== this.fragment_) { out.push('#', this.fragment_); }\n        return out.join('');\n    };\n\n    URI.prototype.clone = function () {\n        return new URI(this.scheme_, this.credentials_, this.domain_, this.port_,\n            this.path_, this.query_, this.fragment_);\n    };\n\n    URI.prototype.getScheme = function () {\n        // HTML5 spec does not require the scheme to be lowercased but\n        // all common browsers except Safari lowercase the scheme.\n        return this.scheme_ && decodeURIComponent(this.scheme_).toLowerCase();\n    };\n    URI.prototype.getRawScheme = function () {\n        return this.scheme_;\n    };\n    URI.prototype.setScheme = function (newScheme) {\n        this.scheme_ = encodeIfExists2(\n            newScheme, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n        return this;\n    };\n    URI.prototype.setRawScheme = function (newScheme) {\n        this.scheme_ = newScheme ? newScheme : null;\n        return this;\n    };\n    URI.prototype.hasScheme = function () {\n        return null !== this.scheme_;\n    };\n\n\n    URI.prototype.getCredentials = function () {\n        return this.credentials_ && decodeURIComponent(this.credentials_);\n    };\n    URI.prototype.getRawCredentials = function () {\n        return this.credentials_;\n    };\n    URI.prototype.setCredentials = function (newCredentials) {\n        this.credentials_ = encodeIfExists2(\n            newCredentials, URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_);\n\n        return this;\n    };\n    URI.prototype.setRawCredentials = function (newCredentials) {\n        this.credentials_ = newCredentials ? newCredentials : null;\n        return this;\n    };\n    URI.prototype.hasCredentials = function () {\n        return null !== this.credentials_;\n    };\n\n\n    URI.prototype.getDomain = function () {\n        return this.domain_ && decodeURIComponent(this.domain_);\n    };\n    URI.prototype.getRawDomain = function () {\n        return this.domain_;\n    };\n    URI.prototype.setDomain = function (newDomain) {\n        return this.setRawDomain(newDomain && encodeURIComponent(newDomain));\n    };\n    URI.prototype.setRawDomain = function (newDomain) {\n        this.domain_ = newDomain ? newDomain : null;\n        // Maintain the invariant that paths must start with a slash when the URI\n        // is not path-relative.\n        return this.setRawPath(this.path_);\n    };\n    URI.prototype.hasDomain = function () {\n        return null !== this.domain_;\n    };\n\n\n    URI.prototype.getPort = function () {\n        return this.port_ && decodeURIComponent(this.port_);\n    };\n    URI.prototype.setPort = function (newPort) {\n        if (newPort) {\n            newPort = Number(newPort);\n            if (newPort !== (newPort & 0xffff)) {\n                throw new Error('Bad port number ' + newPort);\n            }\n            this.port_ = '' + newPort;\n        } else {\n            this.port_ = null;\n        }\n        return this;\n    };\n    URI.prototype.hasPort = function () {\n        return null !== this.port_;\n    };\n\n\n    URI.prototype.getPath = function () {\n        return this.path_ && decodeURIComponent(this.path_);\n    };\n    URI.prototype.getRawPath = function () {\n        return this.path_;\n    };\n    URI.prototype.setPath = function (newPath) {\n        return this.setRawPath(encodeIfExists2(newPath, URI_DISALLOWED_IN_PATH_));\n    };\n    URI.prototype.setRawPath = function (newPath) {\n        if (newPath) {\n            newPath = String(newPath);\n            this.path_ =\n                // Paths must start with '/' unless this is a path-relative URL.\n                (!this.domain_ || /^\\//.test(newPath)) ? newPath : '/' + newPath;\n        } else {\n            this.path_ = null;\n        }\n        return this;\n    };\n    URI.prototype.hasPath = function () {\n        return null !== this.path_;\n    };\n\n\n    URI.prototype.getQuery = function () {\n        // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n        // Within the query string, the plus sign is reserved as shorthand notation\n        // for a space.\n        return this.query_ && decodeURIComponent(this.query_).replace(/\\+/g, ' ');\n    };\n    URI.prototype.getRawQuery = function () {\n        return this.query_;\n    };\n    URI.prototype.setQuery = function (newQuery) {\n        this.paramCache_ = null;\n        this.query_ = encodeIfExists(newQuery);\n        return this;\n    };\n    URI.prototype.setRawQuery = function (newQuery) {\n        this.paramCache_ = null;\n        this.query_ = newQuery ? newQuery : null;\n        return this;\n    };\n    URI.prototype.hasQuery = function () {\n        return null !== this.query_;\n    };\n\n    /**\n     * sets the query given a list of strings of the form\n     * [ key0, value0, key1, value1, ... ].\n     *\n     * <p><code>uri.setAllParameters(['a', 'b', 'c', 'd']).getQuery()</code>\n     * will yield <code>'a=b&c=d'</code>.\n     */\n    URI.prototype.setAllParameters = function (params) {\n        if (typeof params === 'object') {\n            if (!(params instanceof Array)\n                && (params instanceof Object\n                || Object.prototype.toString.call(params) !== '[object Array]')) {\n                var newParams = [];\n                var i = -1;\n                for (var k in params) {\n                    var v = params[k];\n                    if ('string' === typeof v) {\n                        newParams[++i] = k;\n                        newParams[++i] = v;\n                    }\n                }\n                params = newParams;\n            }\n        }\n        this.paramCache_ = null;\n        var queryBuf = [];\n        var separator = '';\n        for (var j = 0; j < params.length;) {\n            var k = params[j++];\n            var v = params[j++];\n            queryBuf.push(separator, encodeURIComponent(k.toString()));\n            separator = '&';\n            if (v) {\n                queryBuf.push('=', encodeURIComponent(v.toString()));\n            }\n        }\n        this.query_ = queryBuf.join('');\n        return this;\n    };\n    URI.prototype.checkParameterCache_ = function () {\n        if (!this.paramCache_) {\n            var q = this.query_;\n            if (!q) {\n                this.paramCache_ = [];\n            } else {\n                var cgiParams = q.split(/[&\\?]/);\n                var out = [];\n                var k = -1;\n                for (var i = 0; i < cgiParams.length; ++i) {\n                    var m = cgiParams[i].match(/^([^=]*)(?:=(.*))?$/);\n                    // From http://www.w3.org/Addressing/URL/4_URI_Recommentations.html\n                    // Within the query string, the plus sign is reserved as shorthand\n                    // notation for a space.\n                    out[++k] = decodeURIComponent(m[1]).replace(/\\+/g, ' ');\n                    out[++k] = decodeURIComponent(m[2] || '').replace(/\\+/g, ' ');\n                }\n                this.paramCache_ = out;\n            }\n        }\n    };\n    /**\n     * sets the values of the named cgi parameters.\n     *\n     * <p>So, <code>uri.parse('foo?a=b&c=d&e=f').setParameterValues('c', ['new'])\n     * </code> yields <tt>foo?a=b&c=new&e=f</tt>.</p>\n     *\n     * @param key {string}\n     * @param values {Array.<string>} the new values.  If values is a single string\n     *   then it will be treated as the sole value.\n     */\n    URI.prototype.setParameterValues = function (key, values) {\n        // be nice and avoid subtle bugs where [] operator on string performs charAt\n        // on some browsers and crashes on IE\n        if (typeof values === 'string') {\n            values = [ values ];\n        }\n\n        this.checkParameterCache_();\n        var newValueIndex = 0;\n        var pc = this.paramCache_;\n        var params = [];\n        for (var i = 0, k = 0; i < pc.length; i += 2) {\n            if (key === pc[i]) {\n                if (newValueIndex < values.length) {\n                    params.push(key, values[newValueIndex++]);\n                }\n            } else {\n                params.push(pc[i], pc[i + 1]);\n            }\n        }\n        while (newValueIndex < values.length) {\n            params.push(key, values[newValueIndex++]);\n        }\n        this.setAllParameters(params);\n        return this;\n    };\n    URI.prototype.removeParameter = function (key) {\n        return this.setParameterValues(key, []);\n    };\n    /**\n     * returns the parameters specified in the query part of the uri as a list of\n     * keys and values like [ key0, value0, key1, value1, ... ].\n     *\n     * @return {Array.<string>}\n     */\n    URI.prototype.getAllParameters = function () {\n        this.checkParameterCache_();\n        return this.paramCache_.slice(0, this.paramCache_.length);\n    };\n    /**\n     * returns the value<b>s</b> for a given cgi parameter as a list of decoded\n     * query parameter values.\n     * @return {Array.<string>}\n     */\n    URI.prototype.getParameterValues = function (paramNameUnescaped) {\n        this.checkParameterCache_();\n        var values = [];\n        for (var i = 0; i < this.paramCache_.length; i += 2) {\n            if (paramNameUnescaped === this.paramCache_[i]) {\n                values.push(this.paramCache_[i + 1]);\n            }\n        }\n        return values;\n    };\n    /**\n     * returns a map of cgi parameter names to (non-empty) lists of values.\n     * @return {Object.<string,Array.<string>>}\n     */\n    URI.prototype.getParameterMap = function (paramNameUnescaped) {\n        this.checkParameterCache_();\n        var paramMap = {};\n        for (var i = 0; i < this.paramCache_.length; i += 2) {\n            var key = this.paramCache_[i++],\n                value = this.paramCache_[i++];\n            if (!(key in paramMap)) {\n                paramMap[key] = [value];\n            } else {\n                paramMap[key].push(value);\n            }\n        }\n        return paramMap;\n    };\n    /**\n     * returns the first value for a given cgi parameter or null if the given\n     * parameter name does not appear in the query string.\n     * If the given parameter name does appear, but has no '<tt>=</tt>' following\n     * it, then the empty string will be returned.\n     * @return {string|null}\n     */\n    URI.prototype.getParameterValue = function (paramNameUnescaped) {\n        this.checkParameterCache_();\n        for (var i = 0; i < this.paramCache_.length; i += 2) {\n            if (paramNameUnescaped === this.paramCache_[i]) {\n                return this.paramCache_[i + 1];\n            }\n        }\n        return null;\n    };\n\n    URI.prototype.getFragment = function () {\n        return this.fragment_ && decodeURIComponent(this.fragment_);\n    };\n    URI.prototype.getRawFragment = function () {\n        return this.fragment_;\n    };\n    URI.prototype.setFragment = function (newFragment) {\n        this.fragment_ = newFragment ? encodeURIComponent(newFragment) : null;\n        return this;\n    };\n    URI.prototype.setRawFragment = function (newFragment) {\n        this.fragment_ = newFragment ? newFragment : null;\n        return this;\n    };\n    URI.prototype.hasFragment = function () {\n        return null !== this.fragment_;\n    };\n\n    function nullIfAbsent(matchPart) {\n        return ('string' == typeof matchPart) && (matchPart.length > 0)\n            ? matchPart\n            : null;\n    }\n\n\n\n\n    /**\n     * a regular expression for breaking a URI into its component parts.\n     *\n     * <p>http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234 says\n     * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n     * disambiguation method used by POSIX regular expressions, it is natural and\n     * commonplace to use a regular expression for parsing the potential five\n     * components of a URI reference.\n     *\n     * <p>The following line is the regular expression for breaking-down a\n     * well-formed URI reference into its components.\n     *\n     * <pre>\n     * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n     *  12            3  4          5       6  7        8 9\n     * </pre>\n     *\n     * <p>The numbers in the second line above are only to assist readability; they\n     * indicate the reference points for each subexpression (i.e., each paired\n     * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n     * For example, matching the above expression to\n     * <pre>\n     *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n     * </pre>\n     * results in the following subexpression matches:\n     * <pre>\n     *    $1 = http:\n     *    $2 = http\n     *    $3 = //www.ics.uci.edu\n     *    $4 = www.ics.uci.edu\n     *    $5 = /pub/ietf/uri/\n     *    $6 = <undefined>\n     *    $7 = <undefined>\n     *    $8 = #Related\n     *    $9 = Related\n     * </pre>\n     * where <undefined> indicates that the component is not present, as is the\n     * case for the query component in the above example. Therefore, we can\n     * determine the value of the five components as\n     * <pre>\n     *    scheme    = $2\n     *    authority = $4\n     *    path      = $5\n     *    query     = $7\n     *    fragment  = $9\n     * </pre>\n     *\n     * <p>msamuel: I have modified the regular expression slightly to expose the\n     * credentials, domain, and port separately from the authority.\n     * The modified version yields\n     * <pre>\n     *    $1 = http              scheme\n     *    $2 = <undefined>       credentials -\\\n     *    $3 = www.ics.uci.edu   domain       | authority\n     *    $4 = <undefined>       port        -/\n     *    $5 = /pub/ietf/uri/    path\n     *    $6 = <undefined>       query without ?\n     *    $7 = Related           fragment without #\n     * </pre>\n     */\n    var URI_RE_ = new RegExp(\n        \"^\" +\n            \"(?:\" +\n            \"([^:/?#]+)\" +         // scheme\n            \":)?\" +\n            \"(?://\" +\n            \"(?:([^/?#]*)@)?\" +    // credentials\n            \"([^/?#:@]*)\" +        // domain\n            \"(?::([0-9]+))?\" +     // port\n            \")?\" +\n            \"([^?#]+)?\" +            // path\n            \"(?:\\\\?([^#]*))?\" +      // query\n            \"(?:#(.*))?\" +           // fragment\n            \"$\"\n    );\n\n    var URI_DISALLOWED_IN_SCHEME_OR_CREDENTIALS_ = /[#\\/\\?@]/g;\n    var URI_DISALLOWED_IN_PATH_ = /[\\#\\?]/g;\n\n    URI.parse = parse;\n    URI.create = create;\n    URI.resolve = resolve;\n    URI.collapse_dots = collapse_dots;  // Visible for testing.\n\n// lightweight string-based api for loadModuleMaker\n    URI.utils = {\n        mimeTypeOf: function (uri) {\n            var uriObj = parse(uri);\n            if (/\\.html$/.test(uriObj.getPath())) {\n                return 'text/html';\n            } else {\n                return 'application/javascript';\n            }\n        },\n        resolve: function (base, uri) {\n            if (base) {\n                return resolve(parse(base), parse(uri)).toString();\n            } else {\n                return '' + uri;\n            }\n        }\n    };\n\n\n    return URI;\n})();\n\nif (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n        exports = module.exports = URI;\n    }\n    exports.URI = URI;\n} else {\n\n    // Exports for closure compiler.\n    if (typeof window !== 'undefined') {\n        window['URI'] = URI;\n    }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sanitizer/lib/uri.js\n ** module id = 137\n ** module chunks = 0\n **/","import utils from 'helpers/utils';\nimport ModelStore from 'lib/core/model_store';\nimport * as Constants from 'core/common/constants';\nimport DALCache from 'core/dal.cache';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport PreferencesModel from 'models/preferences_model';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\nimport AppConfig from 'config/app_config';\nimport IntegrationHelper from 'helpers/integration_helper.js';\nimport ConfigStore from 'stores/configuration_store';\n\n\nlet SERVER_KEYS, CLIENT_KEYS;\n\nclass PreferencesStore extends ModelStore {\n\n  /**\n   * On construction of the store, pull in any saved localStorage preferences\n   */\n  constructor() {\n    super();\n    this._initKeys();\n    this._throttledSavePrefs = _.throttle(this.savePrefs, AppConfig.save_preferences_throttle_interval, {leading: true, trailing: true});\n    this.local = {\n      queued: {},\n      cache_configured: false\n    };\n  }\n\n  _initKeys() {\n    SERVER_KEYS = _.invert(PreferencesKeys);\n    CLIENT_KEYS = _.invert(ClientPreferencesKeys);\n    CLIENT_KEYS = _.assign(CLIENT_KEYS, SERVER_KEYS);\n\n    // HW-1127 To prevent messing up order in OTO chats\n    CLIENT_KEYS = _.omit(CLIENT_KEYS, [PreferencesKeys.AUTO_JOIN]);\n  }\n\n  getModel() {\n    return PreferencesModel;\n  }\n\n  flush() {\n    if (this.local.cache_configured) {\n      DALCache.set(DALCache.Keys.CLIENT_PREFERENCES, this.getClientPreferences());\n    }\n  }\n\n  getServerPreferences(from = this.getAll()) {\n    return _.pickBy(from, (val, key) => _.has(SERVER_KEYS, key));\n  }\n\n  getClientPreferences(from = this.getAll()) {\n    return _.pickBy(from, (val, key) => _.has(CLIENT_KEYS, key));\n  }\n\n  getDefaults() {\n    return {\n      [PreferencesKeys.NOTIFY_WHEN_DND]: false,\n      [PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND]: false,\n      [PreferencesKeys.THEME]: AppConfig.default_theme,\n      [PreferencesKeys.DENSITY]: AppConfig.default_density,\n      [PreferencesKeys.CHAT_VIEW]: AppConfig.default_chat_view,\n      [PreferencesKeys.NAME_DISPLAY]: AppConfig.default_name_display,\n      [PreferencesKeys.ENABLE_IDLE]: true,\n      [PreferencesKeys.IDLE_MINUTES]: Constants.IDLE_DELAY_MINUTES,\n      [PreferencesKeys.NOTIFY_FOR_ROOM]: true,\n      [PreferencesKeys.NOTIFY_FOR_TAG]: true,\n      [PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM]: true,\n      [PreferencesKeys.NOTIFY_FOR_PRIVATE]: true,\n      [PreferencesKeys.HIDE_PRESENCE_MESSAGES]: true,\n      [PreferencesKeys.SOUNDS_ENABLED]: true,\n      [PreferencesKeys.MESSAGE_SOUNDS]: true,\n      [PreferencesKeys.VIDEO_SOUNDS]: true,\n      [PreferencesKeys.GLOBAL_NOTIFICATION_SETTING]: 'loud',\n      [PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE]: '',\n      [ClientPreferencesKeys.ANIMATED_AVATARS]: AppConfig.default_animated_avatars,\n      [ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT]: false,\n      [ClientPreferencesKeys.ENABLE_SPELL_CHECK]: true,\n      [ClientPreferencesKeys.ENABLE_AUTOCORRECT]: false,\n      [ClientPreferencesKeys.HIDE_ATTACHED_CARDS_BY_DEFAULT]: false,\n      [ClientPreferencesKeys.REPLACE_TEXT_EMOTICONS]: true,\n      [ClientPreferencesKeys.SHOW_UNREAD_DIVIDER]: true,\n      [ClientPreferencesKeys.SHOW_CHAT_SIDEBAR]: true,\n      [ClientPreferencesKeys.SHOW_GROUPCHAT_SIDEBAR]: true,\n      [ClientPreferencesKeys.SHOW_NAVIGATION_SIDEBAR]: true,\n      [ClientPreferencesKeys.CHAT_ACTIVE_PANEL]: 'files',\n      [ClientPreferencesKeys.GROUPCHAT_ACTIVE_PANEL]: 'roster',\n      [ClientPreferencesKeys.LEFT_COLUMN_WIDTH]: AppConfig.column_width_limits['left'].default,\n      [ClientPreferencesKeys.RIGHT_COLUMN_WIDTH]: AppConfig.column_width_limits['right'].default,\n      [ClientPreferencesKeys.KEEP_POPUPS_VISIBLE]: false,\n      [ClientPreferencesKeys.BLINK_TASKBAR]: true,\n      [ClientPreferencesKeys.BOUNCE_ICON]: true,\n      [ClientPreferencesKeys.BOUNCE_ONCE]: true,\n      [ClientPreferencesKeys.ENABLE_LOGGING]: false,\n      [ClientPreferencesKeys.SHOW_QUICK_SWITCHER_HINT]: true,\n      [ClientPreferencesKeys.ACTIVE_CHAT_INTEGRATION]: null,\n      [ClientPreferencesKeys.ACTIVE_GROUPCHAT_INTEGRATION]: null\n    };\n  }\n\n  /**\n   * This function ensures that we have valid values for our settings (especially in the scenario of a new user).\n   * The validity of these values is important when determining the default value of globalNotificationSetting.\n   *\n   * @param config the configuration object that we get when HC has initialized\n   */\n  getValidDefaults(config) {\n    var serverSettings = _.pickBy(config.preferences, (x) => !_.isNull(x) && !_.isUndefined(x) && x !== ''),\n        overrides = {\n          [PreferencesKeys.NOTIFY_FOR_ROOM]: _.get(serverSettings, PreferencesKeys.NOTIFY_FOR_ROOM, true),\n          [PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM]: _.get(serverSettings, PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM, true)\n        };\n\n    // if they don't have a default for the global notification setting, set it based on the room settings above\n    if(_.get(config, \"feature_flags.web_client_per_room_notifications\")) {\n      let globalDefault = (overrides[PreferencesKeys.NOTIFY_FOR_ROOM] || overrides[PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM]) ? \"loud\" : \"normal\";\n      overrides[PreferencesKeys.GLOBAL_NOTIFICATION_SETTING] = _.get(serverSettings, PreferencesKeys.GLOBAL_NOTIFICATION_SETTING, globalDefault);\n    }\n\n    return _.extend(this.getAll(), serverSettings, overrides);\n  }\n\n  getNotificationTypes() {\n    return {\n      [PreferencesKeys.SHOW_TOASTERS]: this.getShowToasters(),\n      [ClientPreferencesKeys.BLINK_TASKBAR]: this.shouldBlinkTaskBar(),\n      [ClientPreferencesKeys.BOUNCE_ICON]: this.shouldBounceIcon(),\n      [ClientPreferencesKeys.BOUNCE_ONCE]: this.shouldBounceOnce()\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'DAL:cache-configured': () => {\n        this.local.cache_configured = true;\n        DALCache.get(DALCache.Keys.CLIENT_PREFERENCES).then((prefs) => {\n          this.set(prefs);\n        });\n      }\n    });\n    AppDispatcher.register({\n      'updated:active_chat': (jid) => {\n        this.setChatToFocus(jid);\n      },\n      'updated:config': (config) => {\n        if (_.has(config, 'preferences')) {\n          if (_.has(config, 'preferences.properties') && !_.isObject(config.preferences.properties)){\n            delete config.preferences.properties;\n          }\n          this.setIfNotEqual(_.omitBy(config.preferences, _.isUndefined));\n        }\n        if (_.has(config, 'feature_flags')) {\n          this.set({\n            web_client_integrations_enabled: IntegrationHelper.isFeatureEnabled(config),\n            web_client_freeze_gifs: _.get(config, 'feature_flags.web_client_freeze_gifs', false)\n          });\n        }\n      },\n      'updated:ignoreAddIntegrationsGlance': (roomIdArray) => {\n        this.set(PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE, roomIdArray);\n      },\n      'save-preferences': (prefs) => {\n        this.setIfNotEqual(prefs);\n      },\n      'add-room-integration-discovery-ignore-list': (roomId) => {\n        this.addRoomToIgnoreIntegrationGlanceList(roomId);\n      },\n      'close-room': (data) => {\n        this.removeRoom(data);\n      },\n      'toggle-sound-notifications': () => {\n        this.toggleSounds();\n      },\n      'set-first-login-date': () => {\n        this.setFirstLoginDate();\n      },\n      'unload-app': () => {\n        this.savePrefs();\n      }\n    });\n\n    this.on('change', this._onChange);\n  }\n\n  _onChange(changeset) {\n    let serverChanges = this.getServerPreferences(changeset);\n    let clientChanges = this.getClientPreferences(changeset);\n    if (!_.isEmpty(clientChanges)) {\n      this.flush();\n    }\n    if (!_.isEmpty(serverChanges)) {\n      _.assign(this.local.queued, serverChanges);\n      this._throttledSavePrefs();\n    }\n    AppDispatcher.dispatch('updated:preferences', this.getAll());\n  }\n\n  savePrefs() {\n    AppDispatcher.dispatch('sync-preferences', this.local.queued);\n    this.local.queued = {};\n  }\n\n  getAutoJoinRooms() {\n    return this.get(PreferencesKeys.AUTO_JOIN);\n  }\n\n  setAutoJoinRooms(autoJoinRooms){\n    this.set({\n      [PreferencesKeys.AUTO_JOIN]: autoJoinRooms\n    });\n  }\n\n  getChatToFocus() {\n    return this.get(ClientPreferencesKeys.CHAT_TO_FOCUS);\n  }\n\n  getSoundsEnabled() {\n    return this.get(PreferencesKeys.SOUNDS_ENABLED);\n  }\n\n  getMessageSounds() {\n    return this.get(PreferencesKeys.MESSAGE_SOUNDS);\n  }\n\n  getVideoSounds() {\n    return this.get(PreferencesKeys.VIDEO_SOUNDS);\n  }\n\n  getShowToasters() {\n    return this.get(PreferencesKeys.SHOW_TOASTERS);\n  }\n\n  getBlinkTaskBar() {\n    return this.get(ClientPreferencesKeys.BLINK_TASKBAR);\n  }\n\n  getBounceIcon() {\n    return this.get(ClientPreferencesKeys.BOUNCE_ICON);\n  }\n\n  getBounceOnce() {\n    return this.get(ClientPreferencesKeys.BOUNCE_ONCE);\n  }\n\n  toggleSounds() {\n    this.set(PreferencesKeys.SOUNDS_ENABLED, !this.getSoundsEnabled());\n  }\n\n  getHidePresenceMessages() {\n    return this.get(PreferencesKeys.HIDE_PRESENCE_MESSAGES);\n  }\n\n  shouldUse24HrTime() {\n    return this.get(PreferencesKeys.USE_24_HR_FORMAT) || false;\n  }\n\n  /**\n   * Check if the notification should be shown\n   */\n  shouldIssueNotification() {\n    return this.getShowToasters() ||\n      this.shouldBlinkTaskBar() ||\n      this.shouldBounceIcon();\n  }\n\n  setChatToFocus(jid) {\n    if (!utils.jid.is_search(jid)) {\n      this.data.chatToFocus = jid ? jid.replace(/\"/g,'') : '';\n      this._onChange({[ClientPreferencesKeys.CHAT_TO_FOCUS]: this.data.chatToFocus});\n    }\n  }\n\n  removeRoom(data) {\n    var autoJoinRooms = _.filter(this.getAutoJoinRooms(), (room) => {\n      return room.jid !== data.jid;\n    });\n    this.set({\n      [PreferencesKeys.AUTO_JOIN]: autoJoinRooms\n    });\n  }\n\n  setFirstLoginDate() {\n    var properties = this.get(PreferencesKeys.PROPERTIES) || {};\n    properties[PreferencesKeys.PROPERTIES_FIRST_LOGIN_DATE] = new Date().getTime();\n    this.set(PreferencesKeys.PROPERTIES, properties);\n  }\n\n  getRoomNotificationOverrides() {\n    var overrides = this.get(PreferencesKeys.ROOM_NOTIFICATION_OVERRIDES);\n    return (_.isEmpty(overrides)) ? {} : overrides;\n  }\n\n  overrideNotificationForRoom(room_jid, override_info) {\n    var overrides = _.cloneDeep(this.getRoomNotificationOverrides());\n    overrides[room_jid] = override_info;\n    this.set(PreferencesKeys.ROOM_NOTIFICATION_OVERRIDES, overrides);\n  }\n\n  removeRoomNotificationOverride(room_jid) {\n    var overrides = _.omit(this.getRoomNotificationOverrides(), room_jid);\n    this.set(PreferencesKeys.ROOM_NOTIFICATION_OVERRIDES, overrides);\n  }\n\n  getGlobalNotificationSetting() {\n    return this.get(PreferencesKeys.GLOBAL_NOTIFICATION_SETTING);\n  }\n\n  setGlobalNotificationSetting(level) {\n    this.set(PreferencesKeys.GLOBAL_NOTIFICATION_SETTING, level);\n  }\n\n  getNotifyWhenDND() {\n    return this.get(PreferencesKeys.NOTIFY_WHEN_DND);\n  }\n\n  getNotifyForVideoWhenDND() {\n    return this.get(PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND);\n  }\n\n  shouldHideGifsByDefault() {\n    return this.get(ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT);\n  }\n\n  shouldHideAttachedCardsByDefault() {\n    return this.get(ClientPreferencesKeys.HIDE_ATTACHED_CARDS_BY_DEFAULT);\n  }\n\n  shouldReplaceTextEmoticons() {\n    return this.get(ClientPreferencesKeys.REPLACE_TEXT_EMOTICONS);\n  }\n\n  shouldShowUnreadMessageDivider() {\n    return this.get(ClientPreferencesKeys.SHOW_UNREAD_DIVIDER);\n  }\n\n  shouldShowChatSidebar() {\n    return this.get(ClientPreferencesKeys.SHOW_CHAT_SIDEBAR);\n  }\n\n  shouldShowGroupChatSidebar() {\n    return this.get(ClientPreferencesKeys.SHOW_GROUPCHAT_SIDEBAR);\n  }\n\n  shouldShowNavigationSidebar() {\n    return this.get(ClientPreferencesKeys.SHOW_NAVIGATION_SIDEBAR);\n  }\n\n  getChatActivePanel() {\n    let chatActivePanel = this.get(ClientPreferencesKeys.CHAT_ACTIVE_PANEL);\n    if (this.get('web_client_integrations_enabled')) {\n      return 'integrations';\n    } else if (chatActivePanel === 'integrations') {\n      return 'files';\n    }\n    return chatActivePanel;\n  }\n\n  getGroupChatActivePanel() {\n    let activeGroupChatPanel = this.get(ClientPreferencesKeys.GROUPCHAT_ACTIVE_PANEL);\n    if (this.get('web_client_integrations_enabled')) {\n      return 'integrations';\n    } else if (activeGroupChatPanel === 'integrations') {\n      return 'roster';\n    }\n    return activeGroupChatPanel;\n  }\n\n  getActiveGroupchatIntegration() {\n    return this.get(ClientPreferencesKeys.ACTIVE_GROUPCHAT_INTEGRATION);\n  }\n\n  getActiveChatIntegration() {\n    return this.get(ClientPreferencesKeys.ACTIVE_CHAT_INTEGRATION);\n  }\n\n  getLeftColumnWidth() {\n    return this.get(ClientPreferencesKeys.LEFT_COLUMN_WIDTH);\n  }\n\n  getRightColumnWidth() {\n    return this.get(ClientPreferencesKeys.RIGHT_COLUMN_WIDTH);\n  }\n\n  getChatView() {\n    return this.get(PreferencesKeys.CHAT_VIEW);\n  }\n\n  getNameDisplay() {\n    return this.get(PreferencesKeys.NAME_DISPLAY);\n  }\n\n  getShowQuickSwitcherHint() {\n    return this.get(ClientPreferencesKeys.SHOW_QUICK_SWITCHER_HINT);\n  }\n\n  getNameDisplayOptions() {\n    return [\n      'names',\n      'mentions'\n    ];\n  }\n\n  getIgnoreAddIntegrationGlanceRooms() {\n    return this._convertStringToIntArray(this.get(PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE));\n  }\n\n  _convertStringToIntArray(string) {\n    var intArray = [];\n    if (string) {\n      intArray = string.split(',').map(Number);\n    }\n    return intArray;\n  }\n\n  addRoomToIgnoreIntegrationGlanceList(roomId) {\n    var roomsThatDismissedIntegrationsGlance = this._convertStringToIntArray(this.get(PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE));\n    if (!_.includes(roomsThatDismissedIntegrationsGlance, roomId)) {\n      roomsThatDismissedIntegrationsGlance.push(roomId);\n      this.set(PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE, roomsThatDismissedIntegrationsGlance.join());\n    }\n    AppDispatcher.dispatch('save-preferences', {\n      [PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE]: roomsThatDismissedIntegrationsGlance.join()\n    });\n  }\n\n  getTheme() {\n    return this.get(PreferencesKeys.THEME);\n  }\n\n  isDarkTheme(){\n    return this.getTheme() === this.DARK_THEME;\n  }\n\n  get LIGHT_THEME (){\n    return 'light';\n  }\n\n  get DARK_THEME (){\n    return 'dark';\n  }\n\n  getThemeOptions() {\n    return [\n      this.LIGHT_THEME,\n      this.DARK_THEME\n    ];\n  }\n\n  getChatViewOptions() {\n    return [\n      'classic_neue',\n      'classic'\n    ];\n  }\n\n  getDensity() {\n    return this.get(PreferencesKeys.DENSITY);\n  }\n\n  getDensityOptions() {\n    return [\n      'normal',\n      'tighter'\n    ];\n  }\n\n  getAnimatedAvatarsOptions() {\n    return [\n      'animated',\n      'static'\n    ];\n  }\n\n  shouldAnimateAvatars() {\n    return !this.data.web_client_freeze_gifs || this.get(ClientPreferencesKeys.ANIMATED_AVATARS) === 'animated';\n  }\n\n  shouldLog() {\n    return this.get(ClientPreferencesKeys.ENABLE_LOGGING);\n  }\n\n  shouldBlinkTaskBar() {\n    let subtype = ConfigStore.get('client_subtype'),\n      isValidSubType = utils.clientSubType.isWindows(subtype);\n\n    return isValidSubType && this.getBlinkTaskBar();\n  }\n\n  shouldBounceIcon() {\n    let subtype = ConfigStore.get('client_subtype'),\n      isValidSubType = utils.clientSubType.isMac(subtype);\n\n    return isValidSubType && this.getBounceIcon();\n  }\n\n  shouldBounceOnce() {\n    let subtype = ConfigStore.get('client_subtype'),\n      isValidSubType = utils.clientSubType.isMac(subtype);\n\n    return isValidSubType && this.getBounceOnce();\n  }\n}\n\nexport default new PreferencesStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/preferences_store.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/defineProperty.js\n ** module id = 139\n ** module chunks = 0\n **/","import Store from 'lib/core/store';\n\nclass ExampleStoreModel {\n  constructor(input = Object.create(null)) {\n    Object.assign(this, input);\n  }\n}\n\nexport default class ModelStore extends Store {\n\n  constructor() {\n    super();\n    this.data = this._convertToModel(this.data);\n  }\n\n  /**\n   * Override this method to return the model the extending store should use\n   * @returns {Model}\n   */\n  getModel() {\n    return ExampleStoreModel;\n  }\n\n  /**\n   * @override\n   * @param key\n   * @param value\n   */\n  setIfNotEqual(key, value) {\n    this.set(key, value, true);\n  }\n\n  /**\n   * @override\n   * @param key\n   * @param value\n   * @param doEqualityCheck\n   */\n  set(key, value, doEqualityCheck = false) {\n    let data = this._getInputObject(key, value);\n    if (data && !_.isEmpty(data)) {\n      this.doSet(this._convertToModel(data), doEqualityCheck);\n    }\n  }\n\n  /**\n   * @private\n   */\n  _getInputObject(key, value) {\n    if (_.isObject(key)) {\n      return key;\n    } else if (_.isString(key) && !_.isUndefined(value)) {\n      return { [key]: value };\n    }\n    return null;\n  }\n\n  /**\n   * @param data\n   * @returns {Model}\n   */\n  _convertToModel(data) {\n    let Model = this.getModel();\n    return new Model(data);\n  }\n\n  /**\n   * @override\n   */\n  reset() {\n    this.data = this._convertToModel(this.getDefaults());\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/core/model_store.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/assign.js\n ** module id = 141\n ** module chunks = 0\n **/","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/$.core').Object.assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/assign.js\n ** module id = 142\n ** module chunks = 0\n **/","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./$.export');\n\n$export($export.S + $export.F, 'Object', {assign: require('./$.object-assign')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.assign.js\n ** module id = 143\n ** module chunks = 0\n **/","// 19.1.2.1 Object.assign(target, source, ...)\nvar $        = require('./$')\n  , toObject = require('./$.to-object')\n  , IObject  = require('./$.iobject');\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = require('./$.fails')(function(){\n  var a = Object.assign\n    , A = {}\n    , B = {}\n    , S = Symbol()\n    , K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function(k){ B[k] = k; });\n  return a({}, A)[S] != 7 || Object.keys(a({}, B)).join('') != K;\n}) ? function assign(target, source){ // eslint-disable-line no-unused-vars\n  var T     = toObject(target)\n    , $$    = arguments\n    , $$len = $$.length\n    , index = 1\n    , getKeys    = $.getKeys\n    , getSymbols = $.getSymbols\n    , isEnum     = $.isEnum;\n  while($$len > index){\n    var S      = IObject($$[index++])\n      , keys   = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S)\n      , length = keys.length\n      , j      = 0\n      , key;\n    while(length > j)if(isEnum.call(S, key = keys[j++]))T[key] = S[key];\n  }\n  return T;\n} : Object.assign;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.object-assign.js\n ** module id = 144\n ** module chunks = 0\n **/","import Emitter from \"./emitter\";\n\nclass Store extends Emitter {\n\n  constructor() {\n\n    super();\n\n    this.data = this.getDefaults();\n\n    this.registerListeners();\n\n    this._logger_name = _.kebabCase(this.constructor.name);\n  }\n\n  has(key) {\n    return this.data.hasOwnProperty(key);\n  }\n\n  get(key) {\n    return this.data[key];\n  }\n\n  getAll() {\n    return this.data;\n  }\n\n  setIfNotEqual(key, value) {\n    var data = key;\n\n    if (value !== undefined) {\n      data = {};\n      data[key] = value;\n    }\n\n    this.doSet(data, true);\n  }\n\n  set(key, value) {\n    var data = key;\n\n    if (value !== undefined) {\n      data = {};\n      data[key] = value;\n    }\n\n    this.doSet(data, false);\n  }\n\n  doSet(data, doEqualityCheck) {\n    var changeset = {};\n    var hasChange = false;\n\n    _.keys(data).forEach((key) => {\n\n      var shouldSet = !doEqualityCheck || (doEqualityCheck && !_.isEqual(data[key], this.data[key]));\n\n      if (shouldSet) {\n        hasChange = true;\n        var oldValue = this.get(key),\n            value = data[key];\n\n        this.data[key] = value;\n        changeset[key] = value;\n        this.emit(\"change:\" + key, value, oldValue);\n\n        let Logger = require(\"helpers/logger\");\n        Logger.type(`${this._logger_name}:data:${key}`)\n              .withFilter()\n              .withCallStack()\n              .log({\n                new_value: value,\n                old_value: oldValue\n              });\n      }\n\n    });\n\n    if (!doEqualityCheck || (doEqualityCheck && hasChange)) {\n      this.emit(\"change\", changeset);\n    }\n  }\n\n  unset(key) {\n    if (this.has(key)) {\n      var oldValue = this.get(key);\n      delete this.data[key];\n\n      this.emit(\"change:\" + key, undefined, oldValue);\n    }\n  }\n\n  clear() {\n    var changeset = {};\n\n    _.keys(this.data).forEach((key) => {\n      changeset[key] = this.get(key);\n      this.unset(key);\n    });\n\n    this.emit(\"change\", changeset);\n  }\n\n  /**\n   * Registers listeners.\n   */\n  registerListeners() {}\n\n  /**\n   * Returns the default value of the store\n   */\n  getDefaults() {\n    return {};\n  }\n\n  reset(){\n    this.data = this.getDefaults();\n  }\n}\n\nmodule.exports = Store;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/core/store.js\n **/","var Utils = require('helpers/utils'),\n    EventEmitter = require('events').EventEmitter;\n\nclass Emitter extends EventEmitter {\n  on(type, callback) {\n    Utils.toArray(type).forEach(t => super.on.call(this, t, callback));\n  }\n\n  once(type, callback) {\n    Utils.toArray(type).forEach(t => super.once.call(this, t, callback));\n  }\n\n  off(type, callback) {\n    Utils.toArray(type).forEach(t => super.removeListener.call(this, t, callback));\n  }\n}\n\nmodule.exports = Emitter;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/core/emitter.js\n **/","export const HEARTBEAT_INTERVAL = 60 * 1000;\nexport const XMPP_INACTIVITY_INTERVAL = 60 * 1000;\nexport const BOSH_INACTIVITY_INTERVAL = 60 * 1000;\nexport const XMPP_PONG_WAIT = 30 * 1000;\nexport const NETWORK_LATENCY_GRACE_PERIOD = 5 * 1000;\n\nexport const RECONNECT_BACKOFF_FACTOR = 3;\nexport const RECONNECT_DELAY_MS = 2 * 1000;\nexport const RECONNECT_MAX_DELAY = 60 * 1000;\nexport const RECONNECT_SYNC_THRESHOLD = 3 * 60 * 1000;\nexport const MAX_RECONNECT_TIME = 10 * 60 * 1000;\nexport const IDLE_DELAY_MINUTES = 15;\n\nexport const OAUTH_TOKEN_REFRESH_DELAY_MS = 5000;\nexport const OAUTH_TOKEN_REFRESH_BACKOFF_FACTOR = 3;\nexport const OAUTH_TOKEN_REFRESH_MAX_DELAY = 60 * 1000;\n\nexport const CACHE_TTL = 90 * 24 * 60 * 60 * 1000;\nexport const OAUTH_TTL = 60 * 60 * 1000;\nexport const SLEEP_DELAY_MS = 60 * 1000;\n\nexport const READSTATE_BACKOFF_FACTOR = 3;\nexport const READSTATE_DEFAULT_BACKOFF = 5 * 1000;\nexport const READSTATE_MAX_BACKOFF = 5 * 60 * 1000;\nexport const READSTATE_UPDATE_DEBOUNCE = 0.5 * 1000;\nexport const READSTATE_NULL_MID = '';\nexport const READSTATE_NULL_TS = '0.0';\n\nexport const SYNC_REQUEST_GZIP_SIZE = 10 * 1024;\n\nexport const XMPP_LOG_MAX_CHARS = 600;\n\nexport const XMPP_SEND_IQ_TIMEOUT = 30000;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/common/constants.js\n **/","import DALError from './models/dal-error';\nimport User from './models/user';\nimport Room from './models/room';\nimport Emoticon from './models/emoticon';\nimport BrowserStorage from './cache/browser_storage/browser_storage';\nimport * as Keys from './cache/browser_storage/browser_storage_keys';\nimport ConfigActions from 'actions/config_actions';\nimport * as NS from './xmpp/lib/namespaces';\nimport Compression from './cache/lib/compression';\n\nconst STORE = Symbol.for('DAL.Cache.BrowserStorage');\n\n/**\n * @module DAL.Cache\n */\nexport class DALCache {\n\n  constructor() {\n    this[STORE] = null;\n\n    /**\n     * @property {object} Keys - dictionary of storage keys\n     */\n    this.Keys = Keys;\n  }\n\n  /**\n   * Initializes the localStorage module. All reads/writes to storage\n   * are blocked until this is properly called\n   *\n   * @method configure\n   * @param {number} user_id\n   * @param {number} group_id\n   */\n  configure(user_id, group_id) {\n    if (_.isNumber(user_id) && _.isNumber(group_id)) {\n      this[STORE] = new BrowserStorage(user_id, group_id);\n      ConfigActions.cacheConfigured();\n    }\n  }\n\n  /**\n   * Async pass-through to BrowserStorage.has\n   *\n   * @method has\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {Promise<boolean,DALError>}\n   */\n  has(key, options = { location: BrowserStorage.Locations.LOCAL }) {\n    return new Promise((resolve, reject) => {\n      if (!this[STORE]) {\n        return reject(DALError.ofType(DALError.Types.STORAGE_NOT_CONFIGURED));\n      }\n      resolve(this[STORE].has(key, options));\n    });\n  }\n\n  /**\n   * Async pass-through to BrowserStorage.get\n   *\n   * @method get\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {Promise<*,DALError>}\n   */\n  get(key, options = { location: BrowserStorage.Locations.LOCAL }) {\n    return new Promise((resolve, reject) => {\n      if (!this[STORE]) {\n        return reject(DALError.ofType(DALError.Types.STORAGE_NOT_CONFIGURED));\n      }\n      resolve(Compression.rehydrate(key, this[STORE].get(key, options)));\n    });\n  }\n\n  /**\n   * Async pass-through to BrowserStorage.set\n   *\n   * @method set\n   * @param {string} key\n   * @param {*} val\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {Promise<true,DALError>}\n   */\n  set(key, val, options = { location: BrowserStorage.Locations.LOCAL }) {\n    return new Promise((resolve, reject) => {\n      if (!this[STORE]) {\n        return reject(DALError.ofType(DALError.Types.STORAGE_NOT_CONFIGURED));\n      }\n      resolve(this[STORE].set(key, Compression.dehydrate(key, val), options));\n    });\n  }\n\n  /**\n   * Async pass-through to BrowserStorage.unset\n   *\n   * @method unset\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {Promise<true,DALError>}\n   */\n  unset(key, options = { location: BrowserStorage.Locations.LOCAL }) {\n    return new Promise((resolve, reject) => {\n      if (!this[STORE]) {\n        return reject(DALError.ofType(DALError.Types.STORAGE_NOT_CONFIGURED));\n      }\n      resolve(this[STORE].unset(key, options));\n    });\n  }\n\n  /**\n   * Async pass-through to BrowserStorage.clear\n   *\n   * @method clear\n   * @returns {Promise<true,DALError>}\n   */\n  clear() {\n    return new Promise((resolve, reject) => {\n      if (!this[STORE]) {\n        return reject(DALError.ofType(DALError.Types.STORAGE_NOT_CONFIGURED));\n      }\n      resolve(this[STORE].clear());\n    });\n  }\n\n  /**\n   * Updates the room cache with the provided array of Room Models.\n   * Will either upsert or remove each provided room based on the\n   * Room's is_deleted flag;\n   *\n   * @param {Array<Room>} updates - list of Room models\n   * @returns {Promise<rooms,DALError>}\n   */\n  updateRooms(updates) {\n    return this.get(Keys.ROOMS).then((cache) => {\n      cache = cache || {};\n      updates.forEach((room) => {\n        if (room.is_deleted || room.is_archived) {\n          if (!_.isNull(room.id)) {\n            delete cache[room.id];\n          } else {\n            cache = _.omitBy(cache, (item) => item.jid === room.jid);\n          }\n        } else {\n          cache[room.id] = room;\n        }\n      });\n      return this.set(Keys.ROOMS, cache).then(() => cache);\n    });\n  }\n\n  /**\n   * Updates the roster cache with the provided array of User Models.\n   * Will either upsert or remove each provided user based on the\n   * User's is_deleted flag. Resolves to the updated roster\n   *\n   * @param {Array<User>} updates - list of User models\n   * @returns {Promise<Roster, DALError>}\n   */\n  updateRoster(updates) {\n    return this.get(Keys.ROSTER).then((cache) => {\n      cache = cache || {};\n      updates.forEach((user) => {\n        if (user.is_deleted) {\n          delete cache[user.id];\n        } else {\n          cache[user.id] = user;\n        }\n      });\n      return this.set(Keys.ROSTER, cache).then(() => cache);\n    });\n  }\n\n  updateEmoticons(update) {\n    return this.get(Keys.EMOTICONS).then((cached) => {\n      let items = update.query.item,\n          cached_items = _.get(cached, 'query.item', null);\n\n      if (cached_items && update.type !== 'result') {\n        items = [].concat(cached_items, items);\n        update.query.path_prefix = cached.query.path_prefix;\n        update.query.ver = cached.query.ver;\n      }\n      update.query.item = _.uniqBy(items, 'id');\n      return this.set(Keys.EMOTICONS, update).then(() => update);\n    });\n  }\n\n  /**\n   * Get the roster from the cache in the shape of an XMPP roster IQ query\n   * TEMPORARY convenience method until we can eliminate the IQ processors\n   * and allow the app to get the roster in it's cached state directly without\n   * breaking the startup flow :(\n   *\n   * @method getRosterAsXMPP\n   * @returns {Promise<XMPPRoster|null, DALError>}\n   */\n  getRosterAsXMPP() {\n    return this.get(Keys.ROSTER).then((roster) => {\n      if (roster) {\n        return {\n          iq: {\n            query: {\n              item: Object.keys(roster).map((id) => User.asX2JS(roster[id])),\n              xmlns: NS.ROSTER\n            },\n            type: 'result',\n            xmlns: NS.JABBER\n          }\n        };\n      }\n      return null;\n    });\n  }\n\n  /**\n   * Get the rooms list from the cache in the shape of an XMPP roster IQ query\n   * TEMPORARY convenience method until we can eliminate the IQ processors\n   * and allow the app to get the room list in it's cached state directly without\n   * breaking the startup flow :(\n   *\n   * @method getRoomsAsXMPP\n   * @returns {Promise<XMPPRoomsList|null, DALError>}\n   */\n  getRoomsAsXMPP() {\n    return this.get(Keys.ROOMS).then((rooms) => {\n      if (rooms) {\n        return {\n          iq: {\n            query: {\n              item: Object.keys(rooms).map((id) => Room.asX2JS(rooms[id])),\n              xmlns: NS.DISCO_ITEMS\n            },\n            type: 'result',\n            xmlns: NS.JABBER\n          }\n        };\n      }\n      return null;\n    });\n  }\n\n  /**\n   * Get the emoticons list from the cache in the shape of an XMPP emoticons IQ query\n   *\n   * @method getEmoticonsAsXMPP\n   * @returns {Promise<XMPPEmoticonsList|null, DALError>}\n   */\n  getEmoticonsAsXMPP() {\n    return this.get(Keys.EMOTICONS).then((iq) => {\n      if (iq) {\n        return {\n          query: {\n            item: iq.query.item.map(Emoticon.asX2JS),\n            path_prefix: iq.query.path_prefix,\n            xmlns: NS.HC_EMOTICONS\n          },\n          type: 'result',\n          xmlns: NS.JABBER\n        };\n      }\n      return null;\n    });\n  }\n\n}\n\nexport default new DALCache();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.cache.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/symbol/for\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/symbol/for.js\n ** module id = 149\n ** module chunks = 0\n **/","require('../../modules/es6.symbol');\nmodule.exports = require('../../modules/$.core').Symbol['for'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/symbol/for.js\n ** module id = 150\n ** module chunks = 0\n **/","/*\n * NOTE:\n * XMPP exceptions are declared in txhipchat/txhipchat/error.py\n * which adds some extensions to twisted's jabber protocol StanzaError class:\n * http://twistedmatrix.com/trac/browser/tags/releases/twisted-9.0.0/twisted/words/protocols/jabber/error.py\n */\nexport const ERRORS = Object.freeze({\n  HTTP: 'HTTP',\n  XMPP: 'XMPP',\n  OFFLINE: 'OFFLINE',\n  TIMEOUT: 'TIMEOUT', // status: 0\n  STORAGE_JSON_SERIALIZATION: 'STORAGE_JSON_SERIALIZATION', // status: 422\n  STORAGE_INACCESSIBLE: 'STORAGE_INACCESSIBLE', // status: 423\n  STORAGE_DOM_QUOTA_EXCEEDED: 'STORAGE_DOM_QUOTA_EXCEEDED', // status: 507\n  STORAGE_NOT_CONFIGURED: 'STORAGE_NOT_CONFIGURED', // status: 503\n  EXCEPTION: 'EXCEPTION', // status: 520,\n  OUT_OF_SYNC: 'OUT_OF_SYNC', // status: 409\n  RATE_LIMITED: 'RATE_LIMITED' // status: 429\n});\n\n/**\n * All errors from the DAL should look like this:\n *\n * @class DALError\n *\n * @property {string} name - \"DALError\"\n * @property {string} stack - stack trace\n * @property {number} status - status code if applicable\n * @property {string} message - the error message, if could be parsed\n * @property {string} type - One of DALError.Types\n * @property {object} body - the original error body\n * - In the case of an ajax request, will be the jqXHR object\n * - In the case of xmpp, will be x2js'd error stanza\n */\n\n\n/**\n * @constructs\n * @param {object|error} input\n * @param {string} input.message\n * @param {number} [input.status = 520]\n * @param {string} [input.type = \"EXCEPTION\"]\n * @param {*} [input.body = null]\n */\nconst DALError = function (input = { message: '', status: 520, type: ERRORS.EXCEPTION, body: null }) {\n  var err = new Error(input.message);\n  Object.assign(this, err);\n\n  this.status = input.status;\n  this.message = input.message;\n  this.type = input.type;\n  this.body = input.body;\n  this.name = input.name ? `DALError<${input.name}>` : `DALError`;\n  if (input.message === 'Invalid OAuth session') {\n    this.message = 'If this keeps happening, try logging in again.';\n    this.name = '';\n  }\n  this.stack = input.stack || err.stack || null;\n  if (this.stack) {\n    let stackRegex = new RegExp(`^${input.name}|^Error`);\n    this.stack = this.stack.replace(stackRegex, this.name);\n  }\n};\n\nDALError.prototype = Object.create(Error.prototype);\nDALError.Types = ERRORS;\n\n/**\n * Create a DAL Error from a jQuery XHR error object.\n * Typical Coral error json:\n *\n * {\n *   error: {\n *     message: \"some error message\", // Invalid OAuth session\n *     code: \"same as http error code\", // 401\n *     type: \"some error type\" // HTTP or XMPP\n *   }\n * }\n *\n * @static\n * @method fromJqXHR\n * @param {Object} jqXHR - jquery xhr object\n * @returns {DALError}\n */\nDALError.fromJqXHR = function (jqXHR) {\n  let message = jqXHR.responseText,\n    status = jqXHR.status;\n\n  if (_.isString(message) && message !== '') {\n    try {\n      let json = JSON.parse(message);\n      message = _.get(json, 'error.message', message);\n      status = _.get(json, 'error.code', status);\n    } catch (e) {\n      // (nothingtoseehere)\n    }\n  }\n\n  return new DALError({\n    type: ERRORS.HTTP,\n    status,\n    message,\n    body: jqXHR\n  });\n};\n\n/**\n * Create a DAL Error from an XMPP error stanza, such as:\n *\n * <presence xmlns=\"\" type=\"error\" from=\"\" to=\"\" id=\"\">\n *   <error code=\"404\" type=\"cancel\">\n *     <item-not-found xmlns=\"\" />\n *     <text xmlns=\"\">Some error text</text>\n *   </error>\n * </presence>\n *\n * <iq xmlns='jabber:client' type='error' from='jid' id='6:sendIQ' to='1_7@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'>\n *   <query xmlns='http://hipchat.com/protocol/links' limit='50'/>\n *   <error code='500' type='wait'>\n *     <internal-server-error xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>\n *   </error>\n * </iq>\n *\n * <message xmlns='jabber:client' type='error' from='jid' to='1_7@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'>\n *   <body>some test</body>\n *   <error code='403' type='auth'>\n *     <forbidden xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>\n *     <text xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'>You must be in this room to send a message.</text>\n *   </error>\n * </message>\n *\n * The text node is not always present, so if it doesn't exist,\n * return the first childNode of error's nodeName, which is a\n * generic message-status type\n *\n * @static\n * @method fromXMPP\n * @param xmpp - an error stanza\n * @returns {DALError}\n */\nDALError.fromXMPP = function (xmpp) {\n  let errNode = xmpp.querySelector('error'),\n    status = parseInt(errNode.getAttribute('code'), 10),\n    txtNode = errNode.querySelector('text'),\n    //TODO: Create generic error messages per status code?\n    message = txtNode ? txtNode.textContent : errNode.childNodes[0].nodeName;\n\n  return new DALError({\n    type: ERRORS.XMPP,\n    status,\n    message,\n    body: xmpp\n  });\n};\n\n/**\n * Returns a DALError of a given type with appropriate status codes and\n * messaging. All these status codes arbitrarily picked from:\n * https://en.wikipedia.org/wiki/List_of_HTTP_status_codes\n *\n * @static\n * @method ofType\n * @param {string} type - one of the DALError.Types enums\n * @param {object|error} [thrownException]\n * @returns {DALError}\n */\nDALError.ofType = function (type = ERRORS.EXCEPTION, thrownException = {}) {\n  let error = { type, body: null },\n    originalErrMessage = thrownException.message ? `: ${ thrownException.message }` : '';\n  switch (type) {\n    case ERRORS.OFFLINE:\n      error.status = 0;\n      error.message = `Your connection was interrupted`;\n      break;\n\n    case ERRORS.TIMEOUT:\n      error.status = 0;\n      error.message = `DAL operation timed out${ originalErrMessage }`;\n      break;\n\n    case ERRORS.OUT_OF_SYNC:\n      error.status = 409;\n      error.message = `Resource is out of sync${ originalErrMessage }`;\n      break;\n\n    case ERRORS.RATE_LIMITED:\n      error.status = 429;\n      error.message = `Too many requests${ originalErrMessage }`;\n      break;\n\n    case ERRORS.STORAGE_DOM_QUOTA_EXCEEDED:\n      error.status = 507; // Insufficient Storage\n      error.message = `DAL failed to write to storage due to quota exceeded error${ originalErrMessage }`;\n      break;\n\n    case ERRORS.STORAGE_JSON_SERIALIZATION:\n      error.status = 422; // Unprocessable Entity\n      error.message = `DAL JSON serialization error${ originalErrMessage }`;\n      break;\n\n    case ERRORS.STORAGE_INACCESSIBLE:\n      error.status = 423; // Locked\n      error.message = `DAL could not access browser storage${ originalErrMessage }`;\n      break;\n\n    case ERRORS.STORAGE_NOT_CONFIGURED:\n      error.status = 503; // Service Unavailable\n      error.message = `DAL.Cache has not been configured! Access to storage is not yet available${ originalErrMessage }`;\n      break;\n\n    case ERRORS.EXCEPTION:\n    default:\n      error.status = 520; // Unknown Error\n      error.message = `An unknown DALError occurred${ originalErrMessage }`;\n  }\n\n  return new DALError(Object.assign(thrownException, error));\n};\n\nexport default DALError;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/models/dal-error.js\n **/","import utils from 'helpers/utils';\n\n/**\n * @class User\n * @property {number|null} id\n * @property {string|null} jid\n * @property {string} name\n * @property {string} mention_name\n * @property {string} email\n * @property {string} title\n * @property {string} photo_url\n * @property {string} version\n * @property {boolean} is_guest\n * @property {boolean} is_deleted\n */\nexport default class User {\n\n  /**\n   * @constructs\n   * @param {object} input\n   * @param {number} [input.id = null]\n   * @param {string} [input.jid = null]\n   * @param {string} [input.name = '']\n   * @param {string} [input.mention_name = '']\n   * @param {string} [input.email = '']\n   * @param {string|null} [input.title = null]\n   * @param {string} [input.photo_url = '']\n   * @param {string} [input.version = '']\n   * @param {boolean} [input.is_guest = false]\n   * @param {boolean} [input.is_deleted = false]\n   */\n  constructor(input = Object.create(null)) {\n    this.id = input.id ? input.id : null;\n    this.jid = input.jid ? input.jid : null;\n    this.name = input.name ? input.name : '';\n    this.mention_name = input.mention_name ? input.mention_name : '';\n    this.email = input.email ? input.email : '';\n    this.title = input.title ? input.title : null;\n    this.photo_url = input.photo_url ? input.photo_url : '';\n    this.version = input.version ? input.version : '';\n    this.is_guest = input.is_guest ? input.is_guest : false;\n    this.is_deleted = input.is_deleted ? input.is_deleted : false;\n  }\n\n  /**\n   * Create a User model from an individual item in a roster push. Roster pushes may\n   * contain 1 or more items (users), so the caller should be responsible for iterating\n   * over the list and calling this method to convert the item xml node into a user model\n   *\n   * <iq xmlns='jabber:client' to='1_4@chat.devvm.hipchat.com/web-15499||proxy|devvm.hipchat.com|5222' type='set'>\n   *   <query xmlns='jabber:iq:roster' ver='2016-04-27T20:16:36Z'>\n   *     <item jid='1_2520@chat.devvm.hipchat.com'\n   *       name='Art Cronin 61'\n   *       id='2520'\n   *       mention_name='ArtCronin61'\n   *       mobile=\"iphone\" <!-- or android or this attribute does not exist -->\n   *       version='18EA5095'\n   *       subscription='both'\n   *       email='art.cronin61@atlassian.com'\n   *       photo_url='https://secure.gravatar.com/avatar/bcd6031e23dfb85bbf7c8aac0d3989df?s=125&amp;r=g&amp;d=https%3A%2F%2Fdevvm.hipchat.com%2Fimg%2Fsilhouette_125.png'/>\n   *   </query>\n   * </iq>\n   *\n   * @static\n   * @method fromXMPP\n   * @param item - the \"item\" node for a given roster update (not the whole iq)\n   * @returns {User}\n   */\n  static fromXMPP(item) {\n\n    let id = item.hasAttribute('id') ?\n      parseInt(item.getAttribute('id'), 10) : utils.jid.user_id(item.getAttribute('jid'));\n\n    return new User({\n      id,\n      jid: item.getAttribute('jid'),\n      name: item.getAttribute('name'),\n      mention_name: item.getAttribute('mention_name'),\n      email: item.getAttribute('email'),\n      photo_url: item.getAttribute('photo_url'),\n      version: item.getAttribute('version'),\n      is_deleted: item.getAttribute('subscription') === 'remove',\n      is_guest: false, // Guest users are not broadcast via roster pushes\n      title: null      // We only get this value via xmpp from requesting the user's profile (sadplanet)\n    });\n  }\n\n  /*\n   * Example IQ from profile query. This gives us basically the same information, but\n   * does NOT include the version hash. It is, however, the only endpoint that give us\n   * the user's timezone offset value -- which we need to calculate their local time in\n   * the 1:1 chat headers. We currently store the parsed result of this IQ as a \"profile\"\n   * in several places in the app, and we should probably just merge it into the roster\n   * to fully flesh out the user item. Because of this, however, we have no single way\n   * to get ALL a user's information (feelsbadman)\n   *\n   * <iq xmlns='jabber:client' type='result' from='1_2530@chat.devvm.hipchat.com'\n   *   id='3b1b70d3-b4f8-48a2-a46e-a20b99ff373b:sendIQ' to='1_4@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'>\n   *   <query xmlns='http://hipchat.com/protocol/profile'>\n   *     <email>mattye.veum69@atlassian.com</email>\n   *     <name>Mattye Veum</name>\n   *     <mention_name>MattyeVeum69</mention_name>\n   *     <photo_large>https://secure.gravatar.com/avatar/ea536d6e64288e112e736131589dc1f1?s=125&amp;r=g&amp;d=https%3A%2F%2Fdevvm.hipchat.com%2Fimg%2Fsilhouette_125.png</photo_large>\n   *     <photo_small>https://secure.gravatar.com/avatar/ea536d6e64288e112e736131589dc1f1?s=36&amp;r=g&amp;d=https%3A%2F%2Fdevvm.hipchat.com%2Fimg%2Fsilhouette_36.png</photo_small>\n   *     <timezone utc_offset='0.0'>UTC</timezone>\n   *     <title>Atlassian Member</title>\n   *   </query>\n   * </iq>\n   */\n\n  /*\n   * Guest users are not included when you sync or query the roster. You only know about them\n   * when you get a presence telling you they joined a room. We currently create a partial user\n   * object from this stanza and add them to our internal roster. They are never cached.\n   *\n   * <presence xmlns='jabber:client' to='1_4@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'\n   *   from='1_coral-1@conf.devvm.hipchat.com/a guest'>\n   *   <x xmlns='http://jabber.org/protocol/muc#user'>\n   *     <item mention_name='aguestGuest'\n   *       affiliation='member'\n   *       jid='1_5656@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'\n   *       role='visitor'/>\n   *   </x>\n   * </presence>\n   */\n\n  /**\n   * Returns a user model from the coral rest user representation pulled down\n   * in the sync api. Updated user looks like:\n   * {\n   *   \"email\": \"extraneous@example.com\",\n   *   \"id\": 5655,\n   *   \"is_guest\": false,\n   *   \"links\": {\n   *     \"self\": \"https://devvm.hipchat.com/v2/user/5655\"\n   *     },\n   *   \"mention_name\": \"extraneous\",\n   *   \"name\": \"extraneous\",\n   *   \"photo_url\": \"https://secure.gravatar.com/avatar/13958a29d8b9f8361ce8d1dd8c277dc8?s=125&r=g&d=https%3A%2F%2Fdevvm.hipchat.com%2Fimg%2Fsilhouette_125.png\",\n   *   \"timezone\": \"UTC\",\n   *   \"title\": \"\",\n   *   \"version\": \"00000000\",\n   *   \"xmpp_jid\": \"1_5655@chat.devvm.hipchat.com\"\n   * }\n   *\n   * Deleted user looks like:\n   * {\n   *   \"id\": 123,\n   *   \"is_deleted\": true\n   * }\n   *\n   * The timezone value received from Coral is a string-name (UTC, US/Central),\n   * which is pretty useless for us unless we maintain a dictionary of\n   * these strings -> utc offsets. txhipchat is using http://pythonhosted.org/pytz\n   * which contains a binary database of these mappings\n   *\n   * @static\n   * @method fromREST\n   * @param {object} json\n   * @returns {User}\n   */\n  static fromREST(json) {\n    return new User({\n      id: json.id,\n      jid: json.xmpp_jid,\n      name: json.name,\n      mention_name: json.mention_name,\n      email: json.email,\n      title: json.title,\n      photo_url: json.photo_url,\n      version: json.version,\n      is_guest: json.is_guest,\n      is_deleted: json.is_deleted\n    });\n  }\n\n  /**\n   * Converts user model back to the x2js version for\n   * backwards compatibility until we can model all\n   * the way thru the app\n   * @param {User} user\n   * @returns {object}\n   */\n  static asX2JS(user) {\n    let x2js = {\n      id: user.id,\n      jid: user.jid,\n      name: user.name,\n      mention_name: user.mention_name,\n      email: user.email,\n      title: user.title,\n      photo_url: user.photo_url,\n      version: user.version\n    };\n\n    if (user.subscription) {\n      x2js.subscription = user.subscription;\n    } else if (user.is_deleted) {\n      x2js.subscription = 'remove';\n    } else if (!user.is_guest) {\n      x2js.subscription = '';\n    }\n\n    return x2js;\n  }\n\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/models/user.js\n **/","import utils from 'helpers/utils';\nimport * as NS from 'core/xmpp/lib/namespaces';\n\n/**\n * Valid room privacy values\n */\nexport const PrivacyLevels = Object.freeze({\n  PRIVATE: 'private',\n  PUBLIC: 'public'\n});\n\n/**\n * Reasonable default values for the room object\n */\nconst Defaults = Object.freeze({\n  NAME: \"\",\n  TOPIC: \"\",\n  PRIVACY: PrivacyLevels.PUBLIC,\n  AVATAR_URL: \"\",\n  ID: null,\n  JID: \"\",\n  GUEST_URL: \"\",\n  OWNER: null,\n  IS_ARCHIVED: false,\n  IS_DELETED: false,\n  VERSION: \"00000000\"\n});\n\n/**\n * Returns the textContent value of the node that is found when querying the root node passed in for the element that\n * returns from a querySelector search for the `name` value specified.\n *\n * @param {Document} root xml\n * @param {string} name the name of the tag you're looking for\n * @param defaultVal what to return if nothing is found\n *\n * @returns {string|null}\n */\nlet queryContent = (root, name, defaultVal = null) => {\n  var node = root.querySelector(name);\n  return _.get(node, 'textContent', defaultVal);\n};\n\n/**\n * @class Room\n *\n * @property {string} name\n * @property {string} privacy (public or private)\n * @property {string} topic\n * @property {string} jid\n * @property {string} version\n * @property {int} owner\n * @property {int} id\n * @property {boolean} is_archived\n * @property {string} guest_url\n * @property {string} avatar_url\n */\nexport default class Room {\n\n  /**\n   * @constructs\n   * @param {object} input\n   * @param {string} input.name\n   * @param {string} [input.privacy=\"public\"]\n   * @param {string} [input.topic=\"\"]\n   * @param {string} input.version\n   * @param {string|null} input.avatar_url\n   * @param {string|number} input.id\n   * @param {string} input.jid\n   * @param {string|null} input.guest_url\n   * @param {string|number} input.owner\n   * @param {boolean} [input.is_archived]\n   * @param {boolean} [input.is_deleted]\n   */\n  constructor(input = Object.create(null)) {\n    this.name = input.name || Defaults.NAME;\n    this.topic = input.topic || Defaults.TOPIC;\n    this.privacy = input.privacy || Defaults.PRIVACY;\n    this.version = input.version || Defaults.VERSION;\n    this.avatar_url = input.avatar_url || Defaults.AVATAR_URL;\n    this.id = input.id ? parseInt(input.id, 10) : Defaults.ID;\n    this.jid = input.jid || Defaults.JID;\n    this.guest_url = input.guest_url || Defaults.GUEST_URL;\n    this.owner = input.owner ? parseInt(input.owner, 10) : Defaults.OWNER;\n    this.is_archived = utils.coerceBoolean(input.is_archived, Defaults.IS_ARCHIVED);\n    this.is_deleted = utils.coerceBoolean(input.is_deleted, Defaults.IS_DELETED);\n  }\n\n  /**\n   * Takes an IQ result from a disco#info query for a room, and returns\n   * a Room model. IQ looks like:\n   *\n   * <iq xmlns=\"jabber:client\" type=\"result\" from=\"${room_jid}\" id=\"\" to=\"\">\n   *   <query xmlns=\"http://jabber.org/protocol/disco#info\">\n   *     <identity category=\"conference\" type=\"text\" name=\"${room_name}\" />\n   *     <feature var=\"http://jabber.org/protocol/muc\" />\n   *     <feature var=\"muc_membersonly\" />\n   *     <x xmlns=\"http://hipchat.com/protocol/muc#room\">\n   *       <id>${room_id}</id>\n   *       <topic>${room_topic}</topic>\n   *       <privacy>${room_privacy}</privacy>\n   *       <owner>${room_owner_jid}</owner>\n   *       <guest_url />\n   *       <is_archived /> // only present if true\n   *       <version>${room_version_hash}</version>\n   *       <num_participants>0</num_participants>\n   *     </x>\n   *   </query>\n   * </iq>\n   *\n   * @static\n   * @method fromXMPPDiscoInfo\n   * @param xmpp - xml result from a disco#info query for a room\n   * @returns {Room}\n   */\n  static fromXMPPDiscoInfo(xmpp) {\n    let x = xmpp.getElementsByTagNameNS(NS.HC_MUC_ROOM, 'x')[0],\n      identity = xmpp.querySelector('identity'),\n      owner = queryContent(x, 'owner');\n\n    return new Room({\n      id: queryContent(x, 'id'),\n      jid: xmpp.getAttribute('from'),\n      owner: owner ? utils.jid.user_id(owner) : null,\n      name: identity.getAttribute('name'),\n      topic: queryContent(x, 'topic'),\n      privacy: queryContent(x, 'privacy'),\n      version: queryContent(x, 'version'),\n      avatar_url: queryContent(x, 'avatar_url'),\n      guest_url: queryContent(x, 'guest_url'),\n      is_archived: x.querySelectorAll('is_archived').length > 0,\n      is_deleted: false // if room was deleted, disco#info would return a 404\n    });\n  }\n\n  /**\n   * Takes an individual item from a disco_items entry (ie. when you download the\n   * entire rooms list) and returns a Room model. Entire IQ result looks like this.\n   * This parser is for an individual item node from this list. Caller is responsible\n   * for iteration.\n   *\n   * <iq xmlns='jabber:client' type='result' from='conf.hipchat.com' id='e09bd3e5-5238-4122-99ee-88a1e51dc654:sendIQ'\n   *  to='10804_220836@chat.hipchat.com/web||proxy|proxy-c303.hipchat.com|5262'>\n   *    <query xmlns='http://jabber.org/protocol/disco#items'>\n   *      <item jid='10804_bitbucket@conf.hipchat.com' name='room name'>\n   *        <x xmlns='http://hipchat.com/protocol/muc#room'>\n   *          <id>22087</id>\n   *          <name>room name</name>\n   *          <topic>room topic</topic>\n   *          <privacy>public</privacy>\n   *          <owner>10804_85346@chat.hipchat.com</owner>\n   *          <guest_url/>\n   *          <version>QX6A723G</version>\n   *          <num_participants>0</num_participants>\n   *        </x>\n   *      </item>\n   *    </query>\n   * </iq>\n   *\n   * @static\n   * @method from XMPPDiscoItem\n   * @param item - individual item node from disco_items iq result\n   * @returns {Room}\n   */\n  static fromXMPPDiscoItem(item) {\n    let x = item.getElementsByTagNameNS(NS.HC_MUC_ROOM, 'x')[0],\n      name = item.hasAttribute('name') ? item.getAttribute('name') : queryContent(x, 'name'),\n      owner = queryContent(x, 'owner');\n\n    return new Room({\n      id: queryContent(x, 'id'),\n      jid: item.getAttribute('jid'),\n      owner: owner ? utils.jid.user_id(owner) : null,\n      name: name,\n      topic: queryContent(x, 'topic'),\n      privacy: queryContent(x, 'privacy'),\n      version: queryContent(x, 'version'),\n      avatar_url: queryContent(x, 'avatar_url'),\n      guest_url: queryContent(x, 'guest_url'),\n      is_archived: false, // disco items does not return archived rooms\n      is_deleted: false   // disco items does not return deleted rooms\n    });\n  }\n\n  /**\n   * Takes an IQ result from a muc#room query for a room, and returns\n   * a Room model. IQ looks like:\n   *\n   * <iq xmlns='jabber:client' to='1_1@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222' type='set'>\n   *   <query xmlns='http://hipchat.com/protocol/muc#room'>\n   *     <item jid='1_ii@conf.devvm.hipchat.com' name='Eye Eye'>\n   *       <id>693</id>\n   *       <name>Eye Eye</name>\n   *       <topic>This is room Eye Eye topic</topic>\n   *       <privacy>public</privacy>\n   *       <owner>1_2@chat.devvm.hipchat.com</owner>\n   *       <guest_url/>\n   *       <version>8WEKZB9B</version>\n   *       <num_participants>0</num_participants>\n   *     </item>\n   *   </query>\n   * </iq>\n   *\n   * @static\n   * @method fromXMPPMucRoom\n   * @param item - individual item from a muc#room push iq\n   * @returns {Room}\n   */\n  static fromXMPPMucRoom(item) {\n    let owner = queryContent(item, 'owner'),\n        name = item.hasAttribute('name') ? item.getAttribute('name') : queryContent(item, 'name');\n\n    return new Room({\n      id: queryContent(item, 'id'),\n      jid: item.getAttribute('jid'),\n      owner: owner ? utils.jid.user_id(owner) : null,\n      name: name,\n      topic: queryContent(item, 'topic'),\n      privacy: queryContent(item, 'privacy'),\n      version: queryContent(item, 'version'),\n      avatar_url: queryContent(item, 'avatar_url'),\n      guest_url: queryContent(item, 'guest_url'),\n      is_archived: item.querySelectorAll('is_archived').length > 0,\n      is_deleted: item.getAttribute('status') === 'deleted'\n    });\n  }\n\n  /**\n   * Returns room model from the coral rest room representation:\n   * {\n   *     \"avatar_url\": null,\n   *     \"created\": \"2015-12-29T19:50:02+00:00\",\n   *     \"delegate_admin_visibility\": null,\n   *     \"guest_access_url\": null,\n   *     \"id\": 59,\n   *     \"is_archived\": false,\n   *     \"is_guest_accessible\": false,\n   *     \"last_active\": null,\n   *     \"links\": {\n   *         \"participants\": \"https://devvm.hipchat.com/v2/room/59/participant\",\n   *         \"self\": \"https://devvm.hipchat.com/v2/room/59\",\n   *         \"webhooks\": \"https://devvm.hipchat.com/v2/room/59/webhook\"\n   *     },\n   *     \"name\": \"test room name\",\n   *     \"owner\": {\n   *         \"id\": 4,\n   *         \"links\": {\n   *             \"self\": \"https://devvm.hipchat.com/v2/user/4\"\n   *         },\n   *         \"mention_name\": \"Homer\",\n   *         \"name\": \"Homer Simpson\",\n   *         \"version\": \"VXAKO96E\"\n   *     },\n   *     \"participants\": [],\n   *     \"privacy\": \"public\",\n   *     \"statistics\": {\n   *         \"links\": {\n   *             \"self\": \"https://devvm.hipchat.com/v2/room/59/statistics\"\n   *         }\n   *     },\n   *     \"topic\": \"asdsd\",\n   *     \"version\": \"GDKMBGDZ\",\n   *     \"xmpp_jid\": \"1_test-room-name@conf.devvm.hipchat.com\"\n   * }\n   *\n   * @static\n   * @method fromREST\n   * @param {object} json\n   * @returns {Room}\n   */\n  static fromREST(json) {\n    // let's convert properties that aren't in the format the constructor expects\n    let id = json.id ? parseInt(json.id, 10) : Defaults.ID,\n        jid = json.xmpp_jid,\n        guest_url = json.guest_access_url,\n        owner = json.owner || {};\n\n    return new Room(_.merge(json, {id, jid, guest_url}, {owner: owner.id}));\n  }\n\n  /**\n   * Converts room model back to the x2js version for\n   * backwards compatibility until we can model all\n   * the way thru the app\n   * @param {Room} room\n   * @returns {object}\n   */\n  static asX2JS (room) {\n    return {\n      id: room.id,\n      jid: room.jid,\n      name: room.name,\n      version: room.version,\n      x: {\n        guest_url: room.guest_url,\n        id: room.id,\n        name: room.name,\n        owner: room.owner,\n        privacy: room.privacy,\n        version: room.version\n      }\n    };\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/models/room.js\n **/","/*\n * HipChat custom XMPP namespaces\n */\nexport const HC = 'http://hipchat.com';\nexport const HC_PRESENCE = 'http://hipchat.com/protocol/presence';\nexport const HC_PROFILE = 'http://hipchat.com/protocol/profile';\nexport const HC_MUC_ROOM = 'http://hipchat.com/protocol/muc#room';\nexport const HC_MUC_PERMISSIONS = 'http://hipchat.com/protocol/muc#permissions';\nexport const HC_HISTORY = 'http://hipchat.com/protocol/history';\nexport const HC_LINKS = 'http://hipchat.com/protocol/links';\nexport const HC_FILES = 'http://hipchat.com/protocol/files';\nexport const HC_AUTHENTICATED_FILE = 'http://hipchat.com/protocol/file';\nexport const HC_EMOTICONS = 'http://hipchat.com/protocol/emoticons';\nexport const HC_ROSTER_HASH = 'http://hipchat.com/protocol/users#hash';\nexport const HC_ROOMS_HASH = 'http://hipchat.com/protocol/rooms#hash';\n\n/*\n * Jabber common XMPP namespaces\n */\nexport const JABBER = 'jabber:client';\nexport const MUC = 'http://jabber.org/protocol/muc';\nexport const MUC_OWNER = 'http://jabber.org/protocol/muc#owner';\nexport const MUC_USER = 'http://jabber.org/protocol/muc#user';\nexport const DISCO_INFO = 'http://jabber.org/protocol/disco#info';\nexport const DISCO_ITEMS = 'http://jabber.org/protocol/disco#items';\nexport const CHAT_STATES = 'http://jabber.org/protocol/chatstates';\nexport const ENTITY_CAPABILITIES = 'http://jabber.org/protocol/caps';\nexport const ROSTER = 'jabber:iq:roster';\nexport const LAST_ACTIVITY = 'jabber:iq:last';\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/lib/namespaces.js\n **/","\n/**\n * Valid emoticon type values\n */\nexport const EmoticonTypes = Object.freeze({\n  GLOBAL: 'global',\n  GROUP: 'group'\n});\n\n/**\n * Reasonable default values for the emoticon object\n */\nconst Defaults = Object.freeze({\n  ID: null,\n  SHORTCUT: '',\n  PATH: '',\n  W: 30,\n  H: 30,\n  TYPE: EmoticonTypes.GROUP\n});\n\n/**\n * Returns the textContent value of the node that is found when querying the root node passed in for the element that\n * returns from a querySelector search for the `name` value specified.\n *\n * @param {Document} root xml\n * @param {string} name the name of the tag you're looking for\n * @param defaultVal what to return if nothing is found\n *\n * @returns {string|null}\n */\nlet queryContent = (root, name, defaultVal = null) => {\n  var node = root.querySelector(name);\n  return _.get(node, 'textContent', defaultVal);\n};\n\n/**\n * @class Emoticon\n *\n * @property {number} id\n * @property {string} shortcut\n * @property {string} path\n * @property {number} w\n * @property {number} h\n * @property {string} type\n */\nexport default class Emoticon {\n\n  /**\n   * @constructs\n   * @param {object} input\n   * @param {string|number} input.id\n   * @param {string} input.shortcut\n   * @param {string} input.path\n   * @param {string|number} input.w\n   * @param {string|number} input.h\n   * @param {string} input.type\n   */\n  constructor(input = Object.create(null)) {\n    this.id = input.id ? parseInt(input.id, 10) : Defaults.ID;\n    this.shortcut = input.shortcut || Defaults.SHORTCUT;\n    this.path = input.path || Defaults.PATH;\n    this.w = input.w ? parseInt(input.w, 10) : Defaults.W;\n    this.h = input.h ? parseInt(input.h, 10) : Defaults.H;\n    this.type = input.type || Defaults.TYPE;\n  }\n\n  /**\n   * Takes an IQ result from a iq query for emoticons, and returns\n   * a Emoticon model. IQ looks like:\n   *\n   * <iq xmlns=\"jabber:client\" to=\"\" type=\"{set|result}\">\n   *  <query xmlns=\"http://hipchat.com/protocol/emoticons\">\n   *    <path_prefix>https://dujrsrsgsd3nh.cloudfront.net/img/emoticons</path_prefix>\n   *    <item>\n   *      <id>560651</id>\n   *      <path>10804/troll-1467393875.png</path>\n   *      <shortcut>troll</shortcut>\n   *      <w>30</w>\n   *      <h>26</h>\n   *      <type>group</type>\n   *    </item>\n   *  </query>\n   * </iq>\n   *\n   * @static\n   * @method fromXMPP\n   * @param item - xml <item> element from a iq query for emoticons\n   * @returns {Emoticon}\n   */\n  static fromXMPP(item) {\n    return new Emoticon({\n      id: queryContent(item, 'id'),\n      shortcut: queryContent(item, 'shortcut'),\n      path: queryContent(item, 'path'),\n      w: queryContent(item, 'w'),\n      h: queryContent(item, 'h'),\n      type: queryContent(item, 'type')\n    });\n  }\n\n  /**\n   * Converts emoticon model back to the x2js version for\n   * backwards compatibility until we can model all\n   * the way thru the app\n   * @param {Emoticon} emoticon\n   * @returns {object}\n   */\n  static asX2JS (emoticon) {\n    return {\n      id: String(emoticon.id),\n      shortcut: emoticon.shortcut,\n      path: emoticon.path,\n      w: String(emoticon.w),\n      h: String(emoticon.h),\n      type: emoticon.type\n    };\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/models/emoticon.js\n **/","/**\n * @IMPORTANT: DO NOT IMPORT THIS MODULE DIRECTLY!!!\n * IF YOU NEED TO ACCESS STORAGE, DO SO VIA THE DAL.CACHE MODULE.\n * IT SHOULD OWN THE ONLY INSTANCE OF THIS ADAPTER, AND ALL METHODS\n * WRITTEN TO INTERFACE WITH STORAGE SHOULD BE WRITTEN THERE\n */\nimport * as Keys from './browser_storage_keys';\nimport DALError from 'core/models/dal-error';\n\nconst PREFIX = 'hc.';\nconst LEGACY_PREFIX = 'hc-';\n\n/*\n * Browser storage locations\n */\nconst LOCATIONS = Object.freeze({\n  LOCAL: 'localStorage',\n  SESSION: 'sessionStorage'\n});\n\n/*\n * Defines the current/expected storage schema. Used to invalidate\n * the cache when we make changes to the shape of the data we store\n */\nconst SCHEMA = Object.freeze({\n  [Keys.ROSTER]: '3',\n  [Keys.ROOMS]: '4',\n  [Keys.EMOTICONS]: '1'\n});\n\n/*\n * Keys for data migration/cleanup\n */\nconst OBSOLETE_KEYS = [\n  Keys.PER_ROOM_NOTIFICATION_DIALOG_SHOWN,\n  `hc._${Keys.USER_ID}`,\n  `hc._${Keys.GROUP_ID}`,\n  `hc._${Keys.ROOMS}`,\n  `hc._${Keys.ROSTER}`,\n  `hc._${Keys.EMOTICONS}`\n];\n\nconst LEGACY_KEYS = [\n  Keys.NOTIF_BANNER_DISMISSAL_COUNT,\n  Keys.NOTIF_BANNER_DISMISSED_FOREVER,\n  Keys.INTEGRATIONS,\n  Keys.CLIENT_PREFERENCES,\n  Keys.READSTATE\n];\n\n/*\n * Cross-browser check for localStorage quota exceeded error\n * http://crocodillon.com/blog/always-catch-localstorage-security-and-quota-exceeded-errors\n */\nfunction isQuotaExceededError(error) {\n  switch (error.code) {\n    case 22: // Most browsers\n      return true;\n\n    case 1014: // Firefox :-(\n      return error.name === 'NS_ERROR_DOM_QUOTA_REACHED';\n\n    default:\n      return false;\n  }\n}\n\n/**\n * @class BrowserStorage\n */\nclass BrowserStorage {\n\n  /**\n   * Instantiates the class. Checks user/group against provided params and\n   * throws away all stored data if they do not match. Clears out legacy\n   * localStorage data that we don't use anymore and migrates data stored\n   * in the prior localStorage adapter.\n   *\n   * @constructs\n   * @param {number} user_id\n   * @param {number} group_id\n   */\n  constructor(user_id, group_id) {\n\n    // If the user/group doesn't match what was provided, throw everything away\n    if (this._shouldClearPriorUserData(user_id, group_id)) {\n      this.clear();\n\n    // Otherwise, migrate over data from legacy storage implementations\n    } else {\n      this._clearObsoleteData();\n      this._migrateLegacyKeys();\n    }\n\n    this.set(Keys.SCHEMA, SCHEMA);\n    this.set(Keys.USER_ID, user_id);\n    this.set(Keys.GROUP_ID, group_id);\n  }\n\n  /**\n   * @method has\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {boolean}\n   */\n  has(key, options = { location: LOCATIONS.LOCAL }) {\n    return ((PREFIX + key) in this._getAPI(options.location));\n  }\n\n  /**\n   * @method get\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {*}\n   */\n  get(key, options = { location: LOCATIONS.LOCAL }) {\n    let api = this._getAPI(options.location);\n    if (this.has(key, options)) {\n      return this._deserialize(api.getItem(PREFIX + key));\n    }\n    return null;\n  }\n\n  /**\n   * @method set\n   * @param {string} key\n   * @param {*} value\n   * @param {object} [options = { location: 'localStorage' }]\n   */\n  set(key, value, options = { location: LOCATIONS.LOCAL }) {\n    let api = this._getAPI(options.location),\n      data = this._serialize(value);\n    try {\n      api.setItem((PREFIX + key), data);\n    } catch (e) {\n      this.unset(key, options); // erase partial writes\n      let error = isQuotaExceededError(e) ?\n        DALError.ofType(DALError.Types.STORAGE_DOM_QUOTA_EXCEEDED, e) :\n        DALError.ofType(DALError.Types.EXCEPTION, e);\n      if (window.Raven) {\n        window.Raven.captureException(error);\n      }\n      throw error;\n    }\n    return true;\n  }\n\n  /**\n   * @method unset\n   * @param {string} key\n   * @param {object} [options = { location: 'localStorage' }]\n   * @returns {boolean}\n   */\n  unset(key, options = { location: LOCATIONS.LOCAL }) {\n    let api = this._getAPI(options.location);\n    api.removeItem(PREFIX + key);\n    return true;\n  }\n\n  /**\n   * For both localStorage and sessionStorage, find all keys that contain either\n   * the new or legacy prefixes and remove the items completely\n   *\n   * @method clear\n   */\n  clear() {\n    let prefixMatch = new RegExp(`^${PREFIX}|^${LEGACY_PREFIX}`);\n    _.forOwn(LOCATIONS, (location) => {\n      let api = this._getAPI(location);\n      Object.keys(api)\n        .filter(key => prefixMatch.test(key))\n        .forEach(key => api.removeItem(key));\n    });\n    return true;\n  }\n\n  /**\n   * Check provided user and group id against previously stored values (if they exist)\n   * Returns true if the prior values exist and they don't match the provided values\n   * @private\n   */\n  _shouldClearPriorUserData(user_id, group_id) {\n    if (this.has(Keys.USER_ID) && this.has(Keys.GROUP_ID)) {\n      let prevUser = this.get(Keys.USER_ID),\n        prevGroup = this.get(Keys.GROUP_ID);\n      return !(prevUser === user_id && prevGroup === group_id);\n    }\n    return false;\n  }\n\n  /**\n   * Directly accessing window.localStorage will throw if the user has\n   * disabled it in the browser (ohcrap)\n   * @private\n   */\n  _getAPI(location) {\n    try {\n      switch (location) {\n        case LOCATIONS.SESSION:\n          return window.sessionStorage;\n        case LOCATIONS.LOCAL:\n        default:\n          return window.localStorage;\n      }\n    } catch (e) {\n      let error = DALError.ofType(DALError.Types.STORAGE_INACCESSIBLE, e);\n      if (window.Raven) {\n        window.Raven.captureException(error);\n      }\n      throw error;\n    }\n  }\n\n  /**\n   * @private\n   */\n  _serialize(value) {\n    return JSON.stringify(value, function(k, v) {\n      if (v instanceof RegExp) {\n        return v.toString();\n      }\n      return v;\n    });\n  }\n\n  /**\n   * @private\n   */\n  _deserialize(value) {\n    if (_.includes(['null', 'undefined', ''], value)) {\n      return null;\n    }\n    try {\n      return JSON.parse(value);\n    } catch (e) {\n      let error = DALError.ofType(DALError.Types.STORAGE_JSON_SERIALIZATION, e);\n      if (window.Raven) {\n        window.Raven.captureException(error);\n      }\n      return null;\n    }\n  }\n\n  /**\n   * Clean out obsolete data\n   * @private\n   */\n  _clearObsoleteData() {\n    let oldSchema = this.get(Keys.SCHEMA),\n      api = this._getAPI();\n\n    // check expected schema against last stored schema\n    // and delete any data under keys where they don't match\n    Object.keys(SCHEMA).forEach((key) => {\n      if (!oldSchema || oldSchema[key] !== SCHEMA[key]) {\n        this.unset(key);\n      }\n    });\n\n    // delete data stored under old/unused keys\n    // these are not prefixed\n    OBSOLETE_KEYS.forEach(function (key) {\n      api.removeItem(key);\n    });\n  }\n\n  /**\n   * Migrate data stored under old \"hc-\" prefixed keys to\n   * use the new \"hc.\" prefix for consistency\n   * @private\n   */\n  _migrateLegacyKeys() {\n    let api = this._getAPI();\n    LEGACY_KEYS.forEach(function (key) {\n      let legacyKey = LEGACY_PREFIX + key,\n        newKey = PREFIX + key;\n      if (legacyKey in api) {\n        let data = api.getItem(legacyKey);\n        api.removeItem(legacyKey);\n        api.setItem(newKey, data);\n      }\n    });\n  }\n\n}\n\n/*\n * Expose constants above as static properties on the class\n * Hide the schema in a symbol since that should never be directly\n * accessed, other than in testing\n */\nBrowserStorage[Symbol.for('HJC.Storage.Schema')] = SCHEMA;\nBrowserStorage.Locations = LOCATIONS;\n\nexport default BrowserStorage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/cache/browser_storage/browser_storage.js\n **/","\nexport const NOTIF_BANNER_DISMISSED_FOREVER = 'notificationBannerDismissedForever';\nexport const NOTIF_BANNER_DISMISSAL_COUNT = 'notificationBannerDismissalCount';\nexport const PER_ROOM_NOTIFICATION_DIALOG_SHOWN = 'perRoomNotificationsDialogShown';\n\nexport const ROSTER = 'roster';\nexport const ROOMS = 'rooms-wo-archived';\nexport const EMOTICONS = 'emoticons';\nexport const GROUP_ID = 'group_id';\nexport const USER_ID = 'user_id';\nexport const SCHEMA = 'storage-schema';\nexport const INTEGRATIONS = 'integrations';\nexport const CLIENT_PREFERENCES = 'client-preferences';\n\nexport const ANALYTICS = 'hc_web-herment-storage-key';\nexport const READSTATE = 'pending-readstate';\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/cache/browser_storage/browser_storage_keys.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  /**\n   * Notifies native client that API V1 auth token has been updated.\n   * Native client updates the cookie.\n   */\n  updateAuthTokens(config) {\n    AppDispatcher.dispatch('auth-token-update', config);\n  },\n\n  updateFeatureFlags(config) {\n    AppDispatcher.dispatch('feature-flags-update', config);\n  },\n\n  updateAppConfiguration(config) {\n    AppDispatcher.dispatch('configuration-change', config);\n  },\n\n  serverUnsupportedError(reason) {\n    AppDispatcher.dispatch('server-unsupported', reason);\n  },\n\n  updateSID(config) {\n    AppDispatcher.dispatch('update-sid', config);\n  },\n\n  cacheConfigured() {\n    AppDispatcher.dispatch('DAL:cache-configured');\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/config_actions.js\n **/","import User from 'core/models/user';\nimport Room, { PrivacyLevels as Privacy } from 'core/models/room';\nimport Emoticon, { EmoticonTypes } from 'core/models/emoticon';\nimport * as Keys from '../browser_storage/browser_storage_keys';\nimport utils from 'helpers/utils';\n\n/*\n * Compression algorithms for saving space in localStorage\n * Keyed by the localStorage key\n */\nconst Compressors = {\n\n  /*\n   * Compression algorithm for dealing with the Roster. Data is stored as:\n   * {\n   *   g: <group_id>,    // used to reconstruct jids\n   *   c: <chat_server>, // used to reconstruct jids\n   *   u: {\n   *     <user_id>: [\n   *       <user_name>,\n   *       <user_mention_name>,\n   *       <user_email>,\n   *       <user_photo_url>,\n   *       <user_version>\n   *     ]\n   *   }\n   * }\n   */\n  [Keys.ROSTER]: {\n\n    dehydrate (roster) {\n      if (_.isNull(roster)) {\n        return null;\n      }\n      return _.transform(roster, function (result, user, id) {\n        result['g'] = result['g'] || utils.jid.group_id(user.jid);\n        result['c'] = result['c'] || utils.jid.domain(user.jid);\n        result['u'] = result['u'] || {};\n        result['u'][id] = [\n          user.name,\n          user.mention_name,\n          user.email,\n          user.photo_url,\n          user.version\n        ];\n        return result;\n      });\n    },\n\n    rehydrate (roster) {\n      if (_.isNull(roster)) {\n        return null;\n      }\n      return _.transform(roster['u'], function (result, user, id) {\n        result[id] = new User({\n          id: parseInt(id, 10),\n          jid: `${ roster['g'] }_${ id }@${ roster['c'] }`,\n          name: user[0],\n          mention_name: user[1],\n          email: user[2],\n          photo_url: user[3],\n          version: user[4],\n          is_guest: false,  // guest users are not saved to storage\n          is_deleted: false // deleted users are not saved to storage\n        });\n        return result;\n      });\n    }\n  },\n\n  /*\n   * Compression algorithm for dealing with the RoomsList. Data is stored as:\n   * {\n   *   g: <group_id>,    // used to reconstruct jids\n   *   c: <conf_server>, // used to reconstruct jids\n   *   u: {\n   *     <room_id>: [\n   *       <room_name>,\n   *       <room_slug>, // the unique part of the jid\n   *       <room_privacy>, public: 0, private: 1\n   *       <room_owner>,\n   *       <room_guest_url>,\n   *       <room_avatar_url>,\n   *       <room_version>\n   *     ]\n   *   }\n   * }\n   */\n  [Keys.ROOMS]: {\n\n    dehydrate (rooms) {\n      if (_.isNull(rooms)) {\n        return null;\n      }\n      return _.transform(rooms, function (result, room, id) {\n        result['g'] = result['g'] || utils.jid.group_id(room.jid);\n        result['c'] = result['c'] || utils.jid.domain(room.jid);\n        result['u'] = result['u'] || {};\n        result['u'][id] = [\n          room.name,\n          utils.jid.room_name(room.jid),\n          (room.privacy === Privacy.PUBLIC ? 1 : 0),\n          room.owner,\n          room.guest_url,\n          room.avatar_url,\n          room.version\n        ];\n        return result;\n      });\n    },\n\n    rehydrate (rooms) {\n      if (_.isNull(rooms)) {\n        return null;\n      }\n      return _.transform(rooms['u'], function (result, room, id) {\n        result[id] = new Room({\n          id: parseInt(id, 10),\n          name: room[0],\n          jid: `${ rooms['g'] }_${ room[1] }@${ rooms['c'] }`,\n          privacy: (room[2] === 1 ? Privacy.PUBLIC : Privacy.PRIVATE),\n          owner: room[3],\n          guest_url: room[4],\n          avatar_url: room[5],\n          version: room[6],\n          topic: null,\n          is_archived: false,\n          is_deleted: false\n        });\n        return result;\n      });\n    }\n  },\n\n  /*\n   * Compression algorithm for dealing with the EmoticonList. Data is stored as:\n   * {\n   *   p: <path_prefix>,\n   *   v: <query ver=\"v\">,\n   *   i: [\n   *     [\n   *       <id>,\n   *       <path>,\n   *       <shortcut>,\n   *       <width>,\n   *       <height>,\n   *       <type> global: 0, group: 1\n   *     ]\n   *   ]\n   * }\n   */\n  [Keys.EMOTICONS]: {\n\n    dehydrate (iq) {\n      if (_.isNull(iq)) {\n        return null;\n      }\n      return {\n        p: iq.query.path_prefix,\n        v: iq.query.ver,\n        i: _.map(iq.query.item, function (emoticon, i) {\n          return [\n            parseInt(emoticon.id, 10),\n            emoticon.shortcut,\n            emoticon.path,\n            parseInt(emoticon.w, 10),\n            parseInt(emoticon.h, 10),\n            (emoticon.type === EmoticonTypes.GROUP ? 1 : 0)\n          ];\n        })\n      };\n    },\n\n    rehydrate (emoticons) {\n      if (_.isNull(emoticons)) {\n        return null;\n      }\n      return {\n        type: 'result',\n        query: {\n          path_prefix: emoticons['p'],\n          ver: emoticons['v'],\n          item: emoticons['i'].map((emoticon, i) => {\n            return new Emoticon({\n              id: emoticon[0],\n              shortcut: emoticon[1],\n              path: emoticon[2],\n              w: emoticon[3],\n              h: emoticon[4],\n              type: (emoticon[5] === 1 ? EmoticonTypes.GROUP : EmoticonTypes.GLOBAL)\n            });\n          })\n        }\n      };\n    }\n  }\n};\n\n\n/**\n * @module Compressors\n */\nexport default {\n\n  /**\n   * @method dehydrate\n   * @param {string} key - one of browser storage keys\n   * @param {*} val - the data to be compressed\n   * @returns {*} - the compressed version, if there is a compression algorithm for the given key\n   *  otherwise, returns the data it was passed\n   */\n  dehydrate (key, val) {\n    if (Compressors[key]) {\n      return Compressors[key].dehydrate(val);\n    }\n    return val;\n  },\n\n  /**\n   * @method rehydrate\n   * @param {string} key - one of browser storage keys\n   * @param {*} val - the data to be decompressed\n   * @returns {*} - the decompressed version, if there is a compression algorithm for the given key\n   *  otherwise, returns the data it was passed\n   */\n  rehydrate (key, val) {\n    if (Compressors[key]) {\n      return Compressors[key].rehydrate(val);\n    }\n    return val;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/cache/lib/compression.js\n **/","/**\n * @typedef {{name: string, key: string}} prefs\n * @type {Object.<string, string>}\n */\nconst PrefKeys = Object.freeze({\n  NOTIFY_FOR_ROOM: \"notifyForRoom\",\n  NOTIFY_FOR_PRIVATE_ROOM: \"notifyForPrivateRoom\",\n  NOTIFY_FOR_TAG: \"notifyForTag\",\n  NOTIFY_FOR_PRIVATE: \"notifyForPrivate\",\n  NOTIFY_WHEN_DND: \"notifyWhenDND\",\n  NOTIFY_FOR_VIDEO_WHEN_DND: \"notifyForVideoWhenDND\",\n  SOUNDS_ENABLED: \"soundsEnabled\",\n  MESSAGE_SOUNDS: \"messageSounds\",\n  VIDEO_SOUNDS: \"videoSounds\",\n  SHOW_TOASTERS: \"showToasters\",\n  HIDE_PRESENCE_MESSAGES: \"hidePresenceMessages\",\n  USE_24_HR_FORMAT: \"timeFormat24Hour\",\n  PROPERTIES: \"properties\",\n  PROPERTIES_FIRST_LOGIN_DATE: \"firstLoginDate\",\n  ROOM_NOTIFICATION_OVERRIDES: \"roomNotificationOverrides\",\n  GLOBAL_NOTIFICATION_SETTING: \"globalNotificationSetting\",\n  AUTO_JOIN: \"autoJoin\",\n  NOTIFICATIONS: 'notifications',\n  UPDATE_TIME: 'updateTime',\n  THEME: \"theme\",\n  DENSITY: \"density\",\n  CHAT_VIEW: 'chatView',\n  NAME_DISPLAY: 'nameDisplay',\n  ENABLE_IDLE: 'enableIdle',\n  IDLE_MINUTES: 'idleMinutes',\n  CHECK_MINOR_UPDATES: 'checkMinorUpdates',\n  IGNORE_ADD_INTEGRATIONS_GLANCE: 'ignoreAddIntegrationsGlance'\n});\n\nexport default PrefKeys;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/preferences_keys.js\n **/","import utils from 'helpers/utils';\nimport AppConfig from 'config/app_config';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\n\n/**\n * @class PreferencesModel\n *\n * Application State:\n *\n * @property {array} autoJoin\n * @property {string} chatToFocus\n *\n * User State:\n *\n * @property {object} properties\n * @property {number} properties.firstLoginDate\n * @property {array} ignoreAddIntegrationsGlance\n *\n * Appearance Settings:\n *\n * @property {string} theme \"light|dark\"\n * @property {string} density \"normal|tighter\"\n * @property {string} chatView \"classic|classic_neue\"\n * @property {string} nameDisplay \"names|mentions\"\n * @property {string} animatedAvatars \"animated|static\"\n * @property {boolean} timeFormat24Hour\n * @property {boolean} showUnreadDivider\n * @property {boolean} hidePresenceMessages\n * @property {boolean} bounceIcon // Mac\n *\n * Notification Settings:\n *\n * @property {string} globalNotificationSetting \"loud|quiet|normal\"\n * @property {boolean} notifyForRoom\n * @property {boolean} notifyForPrivateRoom\n * @property {boolean} notifyForTag\n * @property {boolean} notifyForPrivate\n * @property {boolean} notifyWhenDND\n * @property {boolean} notifyForVideoWhenDND\n * @property {boolean} showToasters\n * @property {boolean} soundsEnabled\n * @property {boolean} messageSounds\n * @property {boolean} videoSounds\n * @property {boolean} blinkTaskbar // Windows\n *\n * @property {object} notifications\n * @property {array} notifications.room_invite\n * @property {array} notifications.oto_call\n * @property {array} notifications.group_invite_requested\n * @property {array} notifications.oto_message\n * @property {array} notifications.mention\n * @property {array} notifications.newsletter\n *\n * @property {object} roomNotificationOverrides\n * @property {object} roomNotificationOverrides[room_jid]\n * @property {string} roomNotificationOverrides[room_jid].level \"quiet|loud|normal\"\n *\n * Native Prefs, unused in web client:\n *\n * @property {boolean} enableIdle\n * @property {number} idleMinutes\n * @property {number} updateTime\n * @property {boolean} checkMinorUpdates\n * @property {boolean} keepPopUsVisible\n * @property {boolean} blinkTaskbar\n *\n * Client Preferences (persisted in localStorage):\n *\n * @property {boolean} hideGifsByDefault\n * @property {boolean} replaceTextEmoticons\n * @property {boolean} showUnreadDivider\n * @property {boolean} showChatSidebar\n * @property {boolean} showGroupChatSidebar\n * @property {boolean} showNavigationSidebar\n * @property {boolean} launchWithOSStartup\n * @property {boolean} enableSpellCheck\n * @property {boolean} bounceIcon\n * @property {boolean} enableLogging\n * @property {boolean} showQuickSwitcherHint\n * @property {string} chatActivePanel\n * @property {string} groupChatActivePanel\n * @property {number} leftColumnWidth\n * @property {number} rightColumnWidth\n * @property {object} activeGroupchatIntegration\n * @property {object} activeChatIntegration\n */\n\nconst ENUMS = {\n  theme: {\n    options: [ 'light', 'dark' ],\n    default: AppConfig.default_theme\n  },\n  density: {\n    options: [ 'normal', 'tighter' ],\n    default: AppConfig.default_density\n  },\n  chatView: {\n    options: [ 'classic', 'classic_neue' ],\n    default: AppConfig.default_chat_view\n  },\n  nameDisplay: {\n    options: [ 'names', 'mentions' ],\n    default: AppConfig.default_name_display\n  },\n  animatedAvatars: {\n    options: [ 'animated', 'static' ],\n    default: AppConfig.default_animated_avatars\n  },\n  notificationLevels: {\n    options: [ 'loud', 'normal', 'quiet' ],\n    default: AppConfig.default_notification_level\n  }\n};\n\n// Various string prefs sometimes come back with extraneous quotes around them\nfunction normalizeString(val) {\n  return _.isString(val) ? val.replace(/\"/g, '') : val;\n}\n\n// Make sure appearance setting values are ONLY the expected enums above\nfunction normalizeAppearanceSettings(key, val) {\n  let str = normalizeString(val);\n  if (!_.includes(ENUMS[key].options, str)) {\n    return ENUMS[key].default;\n  }\n  return str;\n}\n\n// Ensure global notification setting is one of the expected enums above\nfunction normalizeGlobalNotificationSetting(val, obj) {\n  if (_.isString(val)) {\n    let str = normalizeString(val);\n    if (_.includes(ENUMS.notificationLevels.options, str)) {\n      return str;\n    }\n  }\n  return (obj[PreferencesKeys.NOTIFY_FOR_ROOM] || obj[PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM]) ? 'loud' : 'normal';\n}\n\n// Clean up autojoin -- mainly from raw x2js input\nfunction normalizeAutoJoin(autoJoin) {\n  let normalizedAutoJoin = [];\n\n  if (autoJoin.item) {\n    autoJoin = autoJoin.item;\n  }\n  if (!Array.isArray(autoJoin)) {\n    autoJoin = [ autoJoin ];\n  }\n\n  for (let room in autoJoin) {\n    let curRoom = autoJoin[room];\n    if (_.isPlainObject(curRoom) && !_.isEmpty(curRoom)) {\n      normalizedAutoJoin.push(_.pick(curRoom, 'jid', 'name'));\n    }\n  }\n  return normalizedAutoJoin;\n}\n\n// Returned as object with comma separated string values instead of array of values\nfunction normalizeNotifications(notifications) {\n  return _.transform(notifications, (result, val, key) => {\n    if (_.isString(val)) {\n      result[key] = _.compact(val.split(','));\n    } else {\n      result[key] = val;\n    }\n  });\n}\n\n// roomNotificationOverrides is sometimes an object,\n// sometimes a json string, sometimes an empty string\nfunction normalizeJSON(json) {\n  if (_.isObject(json)) {\n    return json;\n  } else if (_.isString(json)) {\n    try {\n      return JSON.parse(json);\n    } catch (e) {\n      return null;\n    }\n  }\n}\n\n// The Big Switch. Go through each key and fix/properly coerce the value\nfunction normalizePreferences (input) {\n  return _.transform(input, (result, val, key, original) => {\n    switch (key) {\n\n      case PreferencesKeys.USE_24_HR_FORMAT:\n      case PreferencesKeys.HIDE_PRESENCE_MESSAGES:\n      case PreferencesKeys.NOTIFY_FOR_TAG:\n      case PreferencesKeys.NOTIFY_FOR_PRIVATE:\n      case PreferencesKeys.NOTIFY_WHEN_DND:\n      case PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND:\n      case PreferencesKeys.SHOW_TOASTERS:\n      case PreferencesKeys.SOUNDS_ENABLED:\n      case PreferencesKeys.MESSAGE_SOUNDS:\n      case PreferencesKeys.VIDEO_SOUNDS:\n      case PreferencesKeys.ENABLE_IDLE:\n      case PreferencesKeys.CHECK_MINOR_UPDATES:\n      case ClientPreferencesKeys.SHOW_UNREAD_DIVIDER:\n      case ClientPreferencesKeys.REPLACE_TEXT_EMOTICONS:\n      case ClientPreferencesKeys.BOUNCE_ICON:\n      case ClientPreferencesKeys.BOUNCE_ONCE:\n      case ClientPreferencesKeys.BLINK_TASKBAR:\n      case ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT:\n      case ClientPreferencesKeys.SHOW_CHAT_SIDEBAR:\n      case ClientPreferencesKeys.SHOW_GROUPCHAT_SIDEBAR:\n      case ClientPreferencesKeys.SHOW_NAVIGATION_SIDEBAR:\n      case ClientPreferencesKeys.LAUNCH_WITH_OS_STARTUP:\n      case ClientPreferencesKeys.ENABLE_SPELL_CHECK:\n      case ClientPreferencesKeys.KEEP_POPUPS_VISIBLE:\n      case ClientPreferencesKeys.ENABLE_LOGGING:\n      case ClientPreferencesKeys.SHOW_QUICK_SWITCHER_HINT:\n        result[key] = utils.coerceBoolean(val);\n        break;\n\n      case PreferencesKeys.NOTIFY_FOR_ROOM:\n      case PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM:\n        result[key] = _.isBoolean(val) ? val : true;\n        break;\n\n      case PreferencesKeys.IDLE_MINUTES:\n      case PreferencesKeys.UPDATE_TIME:\n      case ClientPreferencesKeys.LEFT_COLUMN_WIDTH:\n      case ClientPreferencesKeys.RIGHT_COLUMN_WIDTH:\n        result[key] = parseFloat(val);\n        break;\n\n      case PreferencesKeys.CHAT_TO_FOCUS:\n      case ClientPreferencesKeys.CHAT_ACTIVE_PANEL:\n      case ClientPreferencesKeys.GROUPCHAT_ACTIVE_PANEL:\n      case PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE:\n        result[key] = normalizeString(val);\n        break;\n\n      case PreferencesKeys.GLOBAL_NOTIFICATION_SETTING:\n        result[key] = normalizeGlobalNotificationSetting(val, original);\n        break;\n\n      case PreferencesKeys.THEME:\n      case PreferencesKeys.CHAT_VIEW:\n      case PreferencesKeys.DENSITY:\n      case PreferencesKeys.NAME_DISPLAY:\n      case ClientPreferencesKeys.ANIMATED_AVATARS:\n        result[key] = normalizeAppearanceSettings(key, val);\n        break;\n\n      case PreferencesKeys.AUTO_JOIN:\n        result[key] = normalizeAutoJoin(val);\n        break;\n\n      case PreferencesKeys.NOTIFICATIONS:\n        result[key] = normalizeNotifications(val);\n        break;\n\n      case PreferencesKeys.PROPERTIES:\n        result[key] = normalizeJSON(val);\n        break;\n\n      case PreferencesKeys.ROOM_NOTIFICATION_OVERRIDES:\n        result[key] = normalizeJSON(val);\n        break;\n\n      // ignored keys\n      case 'secondsToIdle':\n      case 'isIdleTimeEnabled':\n      case 'enableEmoticons':\n      case 'dndWhenInCall':\n      case 'visualNotifications':\n      case 'exitWarn':\n        break;\n\n      default:\n        result[key] = val;\n    }\n  });\n}\n\nexport default class PreferencesModel {\n\n  /**\n   * @constructs\n   *\n   * @param {object} input\n   * @param {boolean} [serverPreferencesOnly]\n   */\n  constructor(input = Object.create(null), serverPreferencesOnly = false) {\n    if (serverPreferencesOnly) {\n      input = _.pick(input, _.values(PreferencesKeys));\n    }\n    Object.assign(this, normalizePreferences(input));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/models/preferences_model.js\n **/","/**\n * @typedef {{name: string, key: string}} clientPrefs\n * @type {Object.<string, string>}\n */\nconst ClientPrefKeys = Object.freeze({\n  ANIMATED_AVATARS: 'animatedAvatars',\n  HIDE_GIFS_BY_DEFAULT: 'hideGifsByDefault',\n  HIDE_ATTACHED_CARDS_BY_DEFAULT: 'hideAttachedCardsByDefault',\n  CHAT_TO_FOCUS: 'chatToFocus',\n  REPLACE_TEXT_EMOTICONS: 'replaceTextEmoticons',\n  SHOW_UNREAD_DIVIDER: 'showUnreadDivider',\n  SHOW_CHAT_SIDEBAR: 'showChatSidebar',\n  SHOW_GROUPCHAT_SIDEBAR: 'showGroupChatSidebar',\n  SHOW_NAVIGATION_SIDEBAR: 'showNavigationSidebar',\n  CHAT_ACTIVE_PANEL: 'chatActivePanel',\n  GROUPCHAT_ACTIVE_PANEL: 'groupChatActivePanel',\n  LEFT_COLUMN_WIDTH: 'leftColumnWidth',\n  RIGHT_COLUMN_WIDTH: 'rightColumnWidth',\n  LAUNCH_WITH_OS_STARTUP: 'launchWithOSStartup',\n  ENABLE_SPELL_CHECK: 'enableSpellCheck',\n  ENABLE_AUTOCORRECT: 'enableAutoCorrect',\n  KEEP_POPUPS_VISIBLE: 'keepPopUsVisible',\n  BLINK_TASKBAR: 'blinkTaskbar',\n  BOUNCE_ICON: 'bounceIcon',\n  BOUNCE_ONCE: 'bounceOnce',\n  ENABLE_LOGGING: 'enableLogging',\n  SHOW_QUICK_SWITCHER_HINT: 'showQuickSwitcherHint',\n  ACTIVE_GROUPCHAT_INTEGRATION: 'activeGroupchatIntegration',\n  ACTIVE_CHAT_INTEGRATION: 'activeChatIntegration'\n});\n\nexport default ClientPrefKeys;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/client_preferences_keys.js\n **/","import AppConfig from 'config/app_config';\nimport {\n  getClientLocationId\n} from 'helpers/client_info_helper';\nimport URITemplate from \"./uri_template\";\n\nexport default {\n\n  /*\n   * Source IDs as per https://extranet.atlassian.com/display/HC/Add-on+Management+Analytics\n   */\n  CONFIGURE_LINK_SOURCE_ID: 5,\n  DIALOG_LINK_SOURCE_ID: 6,\n  API_SOURCE_ID: 7,\n\n  to_full_key: function(addon_key, module_key) {\n    return `${addon_key}:${module_key}`;\n  },\n\n  is_full_key: function(key) {\n    return key.indexOf(\":\") !== -1;\n  },\n\n  split_full_key: function(key) {\n    return key.split(\":\");\n  },\n\n  isFeatureEnabled: function(initData) {\n    let isGuest = initData && initData.is_guest;\n    return !isGuest && (_.get(initData, 'feature_flags.web_client_integrations') || _.get(initData, \"perms.hipconnect\") === \"all\");\n  },\n\n  /**\n   * Check if an integration key is the same as an internal integration\n   *\n   * It is currently possible to fake this key, so it should not be used for anything requiring security\n   *\n   * @param key\n   * @returns {boolean}\n   */\n  isInternalIntegrationKey: function(key) {\n    return _.includes([AppConfig.links_glance.full_key, AppConfig.files_glance.full_key, AppConfig.people_glance.full_key], key);\n  },\n\n  /**\n   * This routine returns a URL to the integrations management page.\n   * @param baseUrl the base URL where the connected instance of HipChat is running.\n   * @param roomId the ID of the room that the integration manager should use for its context.\n   * @param userId the ID of the current user.\n   * @param sourceId an ID representing the 'source' by which the user arrives at the integration\n   * management page. See https://extranet.atlassian.com/display/HC/Add-on+Management+Analytics.\n   * @returns {string} a URL to the integration manager.\n   */\n  getIntegrationsUrl: function(baseUrl, roomId, userId, sourceId) {\n    var fromLocationId = getClientLocationId();\n    if (!sourceId) {\n      sourceId = 0;\n    }\n    let str_formats = {\n      'base_url': baseUrl,\n      'room_id': roomId,\n      'user_id': encodeURIComponent(userId),\n      'from_location_id': fromLocationId,\n      'source_id': sourceId\n    };\n\n    let template = new URITemplate(AppConfig.integrations_url);\n    return template.replaceVariables(str_formats);\n  },\n\n  getIntegrationsBaseUrl: function(baseUrl) {\n    let str_formats = {\n      'base_url': baseUrl\n    };\n\n    let template = new URITemplate(AppConfig.integrations_base_url);\n    return template.replaceVariables(str_formats);\n  },\n\n  getIntegrationsConfigUrl: function(baseUrl, roomId, addon_key) {\n    let str_formats = {\n      'base_url': baseUrl,\n      'room_id': roomId,\n      'addon_key': addon_key\n    };\n\n    let template = new URITemplate(AppConfig.integrations_config_url);\n    return template.replaceVariables(str_formats);\n  },\n\n  getIntegrationsUpdateUrl: function(baseUrl, roomId, addon_key) {\n    let str_formats = {\n      'base_url': baseUrl,\n      'room_id': roomId,\n      'addon_key': addon_key\n    };\n\n    let template = new URITemplate(AppConfig.integrations_update_url);\n    return template.replaceVariables(str_formats);\n  },\n\n  extractIntegrationParametersFromMessage: function(msg) {\n    var parameters = {};\n    if (msg) {\n      parameters = {\n        body: msg.body,\n        sender: {\n          id: msg.sender_id,\n          name: msg.sender,\n          mention: msg.sender_mention\n        },\n        mid: msg.mid,\n        type: msg.type,\n        metadata: _.get(msg, 'metadata', {})\n      };\n\n      if (msg.card) {\n        parameters.card = _.pick(msg.card, ['title', 'description', 'url']);\n      }\n\n      if (msg.file_data) {\n        parameters.media = {\n          type: _.get(msg.file_data,'file_type', 'unknown').replace('img', 'image'),\n          name: _.get(msg.file_data,'name',''),\n          size: msg.file_data.size,\n          url: msg.file_data.url\n        };\n        if (msg.file_data.thumb_url) {\n          parameters.media.thumb_url = msg.file_data.thumb_url;\n\n        }\n      }\n\n      if (msg.link_details) {\n        parameters.media = {\n          type: msg.link_details.type,\n          url: msg.link_details.url\n        };\n      }\n    }\n    return parameters;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/integration_helper.js\n **/","import ConfigStore from 'stores/configuration_store';\n\nexport const UNKNOWN_LOCATION_ID = 0;\nexport const INTERNET_LINK_LOCATION_ID = 1;\nexport const WEB_CLIENT_LOCATION_ID = 2;\nexport const MAC_CLIENT_LOCATION_ID = 3;\nexport const WINDOWS_CLIENT_LOCATION_ID = 4;\nexport const LINUX_CLIENT_LOCATION_ID = 5;\nexport const IOS_CLIENT_LOCATION_ID = 6;\nexport const ANDROID_CLIENT_LOCATION_ID = 7;\n\nexport function getClientLocationId() {\n  var clientType = ConfigStore.get('client_type');\n  var clientSubtype = ConfigStore.get('client_subtype');\n  if (clientType === 'qt' && clientSubtype === 'windows') {\n    return WINDOWS_CLIENT_LOCATION_ID;\n  } else if (clientType === 'qt' && clientSubtype === 'linux') {\n    return LINUX_CLIENT_LOCATION_ID;\n  } else if (clientType === 'mac') {\n    return MAC_CLIENT_LOCATION_ID;\n  } else if (clientType === 'web') {\n    return WEB_CLIENT_LOCATION_ID;\n  }\n  return UNKNOWN_LOCATION_ID;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/client_info_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport Store from 'lib/core/store';\n\nclass ConfigurationStore extends Store {\n\n  registerListeners() {\n    AppDispatcher.register('updated:config', (data) => {\n      this.set(data);\n    });\n  }\n\n  get(key) {\n    switch(key) {\n      case 'auth_method':\n        return this._getAuthMethod();\n\n      case 'client_node':\n        return this._getClientNode();\n\n      case 'bind_url':\n        return this._getBindUrl();\n\n      default:\n        return super.get(key);\n    }\n  }\n\n  _getBindUrl() {\n    if (_.isString(this.data.bind_url) && _.isString(this.data.web_server) && this.data.bind_url.indexOf('https://') === -1) {\n      this.data.bind_url = `https://${this.data.web_server}${this.data.bind_url}`;\n    }\n    return this.data.bind_url;\n  }\n\n  _getAuthMethod() {\n    if (_.isNull(this.data.auth_method) && _.isString(this.data.oauth_token)) {\n      this.data.auth_method = 'oauth2';\n    }\n    return this.data.auth_method;\n  }\n\n  _getClientNode() {\n    if (_.isString(this.data.client_type) && _.isNull(this.data.client_node)) {\n      let node = `http://hipchat.com/client/${this.data.client_type}`;\n      if (this.data.client_subtype) {\n        node += `/${this.data.client_subtype}`;\n      }\n      this.data.client_node = node;\n    }\n    return this.data.client_node;\n  }\n\n  getDefaults() {\n    return {\n      auth_method: null,\n      auth_nonce: null,\n      oauth_token: null,\n      oauth_token_expires_in: null,\n      apiv1_token: null,\n      apiv1_token_expires_in: null,\n      base_url: '',\n      video_base_url: '',\n      bind_url: null,\n      api_host: 'api.hipchat.com',\n      conference_server: null,\n      chat_server: null,\n      display_name: \"\",\n      web_server: null,\n      route: null,\n      invite_url: null,\n      video_chat_uri: null,\n      client_type: null,\n      client_subtype: null,\n      client_version_id: null,\n      client_os_version_id: null,\n      client_node: null,\n      asset_base_uri: null,\n      video_chat_enabled: null,\n      private_rooms_enabled: null,\n      guest_access_enabled: null,\n      html5_routing_enabled: null,\n      ui: null,\n      app_config_overrides: null,\n      feature_flags: {},\n      native_feature_flags: {},\n      log_to_file: false,\n      jid: null,\n      sid: null,\n      user_id: null,\n      user_name: null,\n      group_id: null,\n      group_name: null,\n      mention: null,\n      is_admin: null,\n      is_guest: null,\n      guest_key: null,\n      email: null,\n      title: null,\n      photo_small: null,\n      photo_large: null,\n      group_avatar_url: null,\n      addlive_app_id: null\n    };\n  }\n\n  /**\n   * @method isOAuth\n   * @returns {boolean} is the config in oauth2 mode\n   */\n  isOAuth() {\n    return this._getAuthMethod() === 'oauth2';\n  }\n\n  /**\n   * @method isNonce\n   * @returns {boolean} is the config in nonce mode\n   */\n  isNonce() {\n    return this._getAuthMethod() === 'nonce';\n  }\n\n  /**\n   * @method getNonceToken\n   * @returns {string} the nonce session token used for authenticating xmpp in nonce mode\n   */\n  getNonceToken() {\n    return this.data.auth_nonce;\n  }\n\n  /**\n   * @method getOAuthToken\n   * @returns {string} the oauth token for authenticating with v2 (coral) apis\n   */\n  getOAuthToken() {\n    return this.data.oauth_token;\n  }\n\n  /**\n   * @method getOAuthTokenExpiry\n   * @returns {number} in ms\n   */\n  getOAuthTokenExpiry() {\n    return this.data.oauth_token_expires_in;\n  }\n\n  /**\n   * @method getApiV1TokenExpiry\n   * @returns {number} in ms\n   */\n  getApiV1TokenExpiry() {\n    return this.data.apiv1_token_expires_in;\n  }\n\n  /**\n   * Get session token used for authenticating to PHP/v1 api -- such as\n   * for saving preferences and authenticating in-app search\n   *\n   * @method getApiV1Token\n   * @returns {object} the session token object\n   */\n  getApiV1Token() {\n    return this.data.apiv1_token;\n  }\n\n  /**\n   * Get BOSH session id\n   *\n   * @method getSID\n   * @returns {string} the BOSH session id\n   */\n  getSID() {\n    return this.data.sid || \"Unknown\";\n  }\n\n\n  /**\n   * @method isAdmin\n   * @returns {boolean} is the current user an admin\n   */\n  isAdmin() {\n    return this.data.is_admin === true;\n  }\n\n  /**\n   * @method isGuest\n   * @returns {boolean} is the current user a guest\n   */\n  isGuest() {\n    return this.data.is_guest === true;\n  }\n\n  /**\n   * @method shouldLogToFile\n   * @returns {boolean} should the app send logs through the SPI\n   */\n  shouldLogToFile() {\n    return this.data.log_to_file === true;\n  }\n\n}\n\nexport default new ConfigurationStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/configuration_store.js\n **/","const URL_TEMPLATE_RE = new RegExp(\"{[^}]*}\", \"g\");\n\nfunction getReplacement(parameters, variable) {\n  var value = _.get(parameters, variable, \"\");\n  if (_.isObject(value)) {\n    value = JSON.stringify(value);\n  } else {\n    value = String(value);\n  }\n  return value;\n}\n\nclass URITemplate {\n\n  constructor(template) {\n    this.template = template;\n  }\n\n  getTemplateVariables() {\n    let matches = this.template.match(URL_TEMPLATE_RE);\n    return _.uniq(_.map(matches, match => match.slice(1, -1)));\n  }\n\n  replaceVariables(parameters) {\n    let uri = this.template;\n    let variables = this.getTemplateVariables();\n    _.each(variables, variable => {\n      uri = uri.replace(`{${variable}}`, encodeURIComponent(getReplacement(parameters, variable)));\n    });\n    return uri;\n  }\n\n  getTemplateValuesFromParameters(parameters) {\n    let variables = this.getTemplateVariables();\n    return _.reduce(variables, (accumulator, variable) => {\n      accumulator[variable] = getReplacement(parameters, variable);\n      return accumulator;\n    }, {});\n  }\n\n}\n\nexport default URITemplate;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/uri_template.js\n **/","import { HC_FILES, HC_AUTHENTICATED_FILE } from 'core/xmpp/lib/namespaces';\n\nconst SANITIZE_TOKEN_KEYS = [\n  \"token\",\n  \"auth_nonce\",\n  \"oauth_token\",\n  \"oauth2_token\",\n  \"access_token\",\n  \"apiv1_token\",\n  \"nonce\"\n];\nconst SANITIZE_MESSAGE_KEYS = [\n  \"message\",\n  \"text\"\n];\nconst REMOVE_TEXT_NODE_TAGS = [\n  'body',\n  'desc'\n];\nconst REDACT_TEXT_NODE_TAGS = [\n  'name',\n  'thumb',\n  'thumbnail',\n  'thumb_url',\n  'file_url'\n];\nconst FUNC_STRING = \"[function call]\";\n\nfunction cleanTag(tag) {\n  tag.textContent = 'REDACTED';\n}\nfunction redactTag(tag) {\n  let textContent = tag.textContent;\n\n  tag.textContent = textContent.replace(/([\\s\\S]+\\/)[\\S]+(\\.[\\w]+)$/, \"$1REDACTED$2\");\n}\nfunction cleanTags(tags) {\n  let tagName;\n\n  Array.from(tags).forEach((tag) => {\n    tagName = tag.nodeName;\n    if (REMOVE_TEXT_NODE_TAGS.indexOf(tagName) >= 0){\n      cleanTag(tag);\n    } else if (REDACT_TEXT_NODE_TAGS.indexOf(tagName) >= 0){\n      redactTag(tag);\n    }\n  });\n}\n\nexport default {\n  sanitize(val) {\n    if (_.isFunction(val)) {\n      return this.sanitizeFunc(val);\n    }\n    let returnVal = _.cloneDeep(val);\n    if (_.isObject(returnVal)) {\n      return this.iterateObj(returnVal);\n    }\n    return returnVal;\n  },\n\n  sanitizeXML(el) {\n    let localName = _.get(el, \"localName\");\n\n    if (!_.isString(localName)) {\n      return el;\n    }\n    switch (localName.toLowerCase()) {\n      case \"auth\":\n        return this.cleanStanza(el);\n      case \"success\":\n        return this.cleanStanza(el);\n      case \"message\":\n        return this.cleanMessageStanza(el);\n      case \"iq\":\n        return this.cleanIqStanza(el);\n    }\n\n    return el;\n  },\n\n  cleanStanza(node) {\n    let cloneNode = this.cloneXMLNode(node);\n\n    if (!cloneNode) {\n      return node;\n    }\n\n    cloneNode = this.cleanNodeContent(cloneNode);\n    cloneNode = this.cleanNodeAttrs(cloneNode);\n\n    return cloneNode;\n  },\n\n  cleanMessageStanza(node) {\n    let cloneNode = this.cloneXMLNode(node);\n    let allNodes;\n\n    if (!cloneNode) {\n      return node;\n    }\n    allNodes = cloneNode.getElementsByTagName('*');\n    if (allNodes.length) {\n      cleanTags(allNodes);\n    }\n\n    return cloneNode;\n  },\n\n  cleanIqStanza(node) {\n    let cloneNode = this.cloneXMLNode(node);\n    let query = cloneNode.getElementsByTagName('query');\n    let attribute;\n\n    if (query.length) {\n      attribute = query[0].getAttribute('xmlns');\n      if (attribute === HC_FILES || attribute === HC_AUTHENTICATED_FILE){\n        this.cleanFilesStanza(cloneNode);\n      }\n    }\n\n    return cloneNode;\n  },\n\n  cleanFilesStanza(node) {\n    let allNodes = node.getElementsByTagName('*');\n\n    if (allNodes.length) {\n      cleanTags(allNodes);\n    }\n  },\n\n  cloneXMLNode(node) {\n    return node.cloneNode(true);\n  },\n\n  cleanNodeContent(node) {\n    node.textContent = this.cleanToken(node.textContent);\n    return node;\n  },\n\n  cleanNodeAttrs(node, attrKeys = SANITIZE_TOKEN_KEYS) {\n    _.each(attrKeys, (attr) => {\n      let val = node.getAttribute(attr);\n      if (node && val) {\n        node.setAttribute(attr, this.cleanToken(val));\n      }\n    });\n    return node;\n  },\n\n  cleanToken(val) {\n    let string = val.toString();\n    return `${string.slice(0, 8)}...`;\n  },\n\n  cleanMessage(val) {\n    return 'REDACTED';\n  },\n\n  iterateObj(val) {\n    for (let prop in val) {\n      if (val.hasOwnProperty(prop)) {\n        let curVal = val[prop];\n        if (_.isObject(curVal) && !_.isFunction(curVal)) {\n          this.iterateObj(curVal);\n        } else {\n          val[prop] = this.sanitizeVal(prop, curVal);\n        }\n      }\n    }\n    return val;\n  },\n\n  sanitizeVal(key, val) {\n    if (!val) {\n      return val;\n    }\n\n    if (_.isFunction(val)) {\n      return this.sanitizeFunc(val);\n    }\n    if (SANITIZE_TOKEN_KEYS.indexOf(key) !== -1) {\n      return this.cleanToken(val);\n    }\n    if (SANITIZE_MESSAGE_KEYS.indexOf(key) !== -1) {\n      return this.cleanMessage(val);\n    }\n    return val;\n  },\n\n  sanitizeFunc(val) {\n    return FUNC_STRING;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/logger_sanitizer.js\n **/","import logger from 'helpers/logger';\n\nconst X = Symbol('X');\nconst Y = Symbol('Y');\nconst REAL_X = Symbol('realX');\nconst REAL_Y = Symbol('realY');\n\nexport default {\n\n  track(){\n    const debouncedSave = _.debounce(this._save.bind(this), 20, {leading: true, trailing: true});\n    document.addEventListener(\"mouseover\", debouncedSave);\n    document.addEventListener(\"mousemove\", debouncedSave);\n  },\n\n  _save({ pageX, pageY }){\n    this[REAL_X] = pageX;\n    this[REAL_Y] = pageY;\n    logger.type('mouse-position').withFilter().info('Real mouse position has changed:', pageX, pageY);\n  },\n\n  useLatest(){\n    this[X] = this[REAL_X];\n    this[Y] = this[REAL_Y];\n  },\n\n  hasChanged({ pageX, pageY }){\n    if (this[X] !== pageX || this[Y] !== pageY){\n      this[X] = pageX;\n      this[Y] = pageY;\n      logger.type('mouse-position').withFilter().info('Mouse position has changed:', pageX, pageY);\n      return true;\n    }\n    return false;\n  },\n\n  get x(){\n    return this[X];\n  },\n\n  get y(){\n    return this[Y];\n  },\n\n  get realX(){\n    return this[REAL_X];\n  },\n\n  get realY(){\n    return this[REAL_Y];\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/mouse_position.js\n **/","/*global ENV*/\nimport AnalyticsEvents from \"./analytics_events\";\nimport AnalyticsEventKeys from \"keys/analytics_event_keys\";\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\nimport ConfigStore from 'stores/configuration_store';\nimport utils from 'helpers/utils';\nimport DAL from 'core/dal';\nimport logger from 'helpers/logger';\nrequire('vendor/herment.2.5.7.min.js');\n\nclass Analytics {\n  constructor(initState, clientIdentifier, herment = window['herment-gas-client'], metrics = window['app-metrics'], performance = window['performance']) {\n    this.setupVariables(initState, clientIdentifier, performance);\n    this.bindCustomAnalyticEvents();\n    this.startHerment(initState, clientIdentifier, herment);\n    this.setupMetrics(metrics);\n    // now that we have the ability to push events onto the queue, let's fire off any queued analytics\n    this.handlePreloaderAnalytics();\n    this.handleAnalyticsLaunched();\n    this.registerListeners();\n  }\n\n  registerListeners() {\n    // AppDispatcher Events\n    AppDispatcher.registerOnce({\n      'app-state-ready': () => {\n        this.handleAppStateReady();\n      },\n      'DAL:cache-configured': () => {\n        // If we starting in the lobby, we should not send the 'launch-to-chat' event\n        DAL.Cache.get(DAL.Cache.Keys.CLIENT_PREFERENCES).then((prefs) => {\n          this.shouldSendLaunchToChat = this.shouldSendLaunchToChatComplete = utils.jid.is_chat(_.get(prefs, 'chatToFocus'));\n        });\n      }\n    });\n\n    // AnalyticsDispatcher Events\n    AnalyticsDispatcher.registerOnce({\n      'analytics-client-ready': () => {\n        this.handleAnalyticsClientReady();\n      },\n      'analytics-rooms-loaded': () => {\n        this.handleAnalyticsRoomLoaded();\n      },\n      'analytics-roster-loaded': () => {\n        this.handleAnalyticsRosterLoaded();\n      },\n      'analytics-emoticons-loaded': () => {\n        this.handleAnalyticsEmoticonLoaded();\n      }\n    });\n    AnalyticsDispatcher.register({\n      'analytics-hc-client-start': () => {\n        this.handleClientStart();\n      },\n      'analytics-hc-client-initial-connection': () => {\n        this.handleInitialConnection();\n      },\n      'analytics-hc-client-reconnection-start': () => {\n        this.handleReconnectionStart();\n      },\n      'analytics-hc-client-reconnection-success': () => {\n        this.handleReconnectionSuccess();\n      },\n      'analytics-initial-presence-response-received': () => {\n        this.handlePresenceResponse();\n      },\n      'analytics-start-iq-response-received': () => {\n        this.handleStartupIqResponse();\n      },\n      'analytics-initial-auth-start': () => {\n        this.handleAuthStart();\n      },\n      'analytics-initial-auth-done': () => {\n        this.handleAuthDone();\n      },\n      'analytics-on-dom-ready': () => {\n        this.handleDomReady();\n      },\n      'analytics-hc-init': () => {\n        this.handleAppInit();\n      },\n      'analytics-chat-mount': (data) => {\n        this.handleChatMountEvent(data);\n      },\n      'analytics-open-room': (data) => {\n        this.handleOpenedRoom(data);\n      },\n      'analytics-request-history': (data) => {\n        this.handleHistoryRequest(data);\n      },\n      'analytics-history-loaded': (data) => {\n        this.handleHistoryResponse(data);\n      },\n      'analytics-roster-mount': (data) => {\n        this.handleRosterMount(data);\n      },\n      'analytics-files-mount': (data) => {\n        this.handleFilesMount(data);\n      },\n      'analytics-select-room': (data) => {\n        this.handleLobbyOpen(data);\n      },\n      'analytics-lobby-mount': (data) => {\n        this.handleLobbyMount(data);\n      },\n      'analytics-new-active-chat': (data) => {\n        if(utils.jid.is_chat(data.jid)) {\n          this.spawnCompositeEvent(AnalyticsEventKeys.CHAT_SENDABLE, data);\n          this.spawnCompositeEvent(AnalyticsEventKeys.CHAT_IS_COMPLETE, data);\n        }\n      },\n      'performance-timing:analytics-launch-to-chat': (data) => {\n        this.handleLaunchToChat(data);\n      },\n      'performance-timing:analytics-launch-to-chat-complete': (data) => {\n        this.handleLaunchToChatComplete(data);\n      }\n    });\n  }\n\n  registerAppStateReadyAnalytics() {\n    AnalyticsDispatcher.registerOnce({\n      'performance-timing:analytics-launch-to-active-chat-list': (data) => {\n        this.handleLaunchToActiveChatList(data);\n      }\n    });\n  }\n\n  setupVariables(initState, clientIdentifier, performance) {\n    this.eventQueue = [];\n    this.userAgent = utils.browser.userAgent();\n    this.performance = performance;\n    this.slug = this.getSlug(clientIdentifier); // client identifier sent with events\n    this.baseEvent = this.getBaseEvent(initState.group_id, initState.user_id, this.slug, initState.is_admin, clientIdentifier.client_version_id); // setup base event for analytics\n    this.isGuest = this.getIsGuest(); // need to account for guest access for some of our analytics\n    this.appLaunchTime = window.hc_client_launch_time; // global variable set in HTML - earliest time in the app launch sequence\n    this.browserMetricsBaseEvent = this.getBrowserMetricsBaseEvent(initState.is_admin, this.slug);\n    this.requiredClientUpToDateFetchTimes = this.getRequiredClientFetchTimesObject(this.isGuest); // stores the times for each expected action that's necessary to get the client \"up-to-date\" on a load\n    // this will hold the composite event objects that have a longer lifespan than the fire-and-forget events.\n    // Examples include \"navigate start --> able to send message\" and \"navigate start --> chat is fully initialized\"\n    this.compositeEventQueue = {};\n    // Will override these with proper values in DAL:cache-configured handler above\n    this.shouldSendLaunchToChat = this.shouldSendLaunchToChatComplete = true;\n    this.deleteWindowLaunchTime();\n  }\n\n  bindCustomAnalyticEvents(events = AnalyticsEvents.events) {\n    _.forOwn(events, (handler, hcWebEvent) => {\n      if (_.isString(handler)) {\n        let eventName = handler;\n        handler = function() {\n          return {\n            name: eventName\n          };\n        };\n      }\n      AnalyticsDispatcher.register(hcWebEvent, (...args) => this.sendEvents(handler.apply(this, args)));\n    });\n  }\n\n  /**\n   * Pushes the events onto the Herment stack.\n   * @param result\n   */\n  sendEvents(result) {\n    if (result) {\n      let events = utils.toArray(result);\n      _.each(events, (event) => {\n        this.addToEventQueue(this.makeEvent(event));\n      });\n    }\n  }\n\n  startHerment(initState, clientIdentifier, herment = window['herment-gas-client']) {\n    let options = this.getHermentOptions(initState.group_id, initState.user_id, clientIdentifier.client_version_id);\n    herment(options).start();\n    logger.type('analytics').withFilter().alwaysExpanded().log('Herment started with options: ', options);\n  }\n\n  setupMetrics(metrics = window['app-metrics']) {\n    // App metrics configuration specifics which is in line with the custom implementation of herment here\n    this.metrics = metrics({publish: this.customPublish.bind(this), unfold: true});\n  }\n\n  customPublish(key, data) {\n    let event = this.makeEvent({name: key, properties: data});\n    this.addToEventQueue(event);\n  }\n\n  customBrowserMetricsEvent(properties) {\n\n    if ('probes' in properties && properties.probes <= 0) {\n      logger.type('analytics').withFilter().alwaysExpanded().log('Probes property is invalid. Event was skipped: ', properties);\n      return;\n    }\n\n    let props = _.assign(properties, {\n          \"sid\": ConfigStore.getSID()\n        }),\n        fullEvent = _.assign(_.clone(this.browserMetricsBaseEvent), {\n          \"properties\": props\n        }),\n        event = this.makeEvent(fullEvent);\n    this.addToEventQueue(event);\n  }\n\n  handleRequiredClientUpToDateFetchTime(name) {\n    let timeSinceLaunch = this.getTimeSinceAppLaunch();\n    this.requiredClientUpToDateFetchTimes[name] = timeSinceLaunch;\n    if (_.every(this.requiredClientUpToDateFetchTimes)) {\n      let eventData = {\n            name: AnalyticsEventKeys.CLIENT_CURRENT,\n            properties: {\n              time_since_launch: timeSinceLaunch,\n              is_guest: this.isGuest\n            }\n          },\n          event = this.makeEvent(eventData);\n      this.addToEventQueue(event);\n      this.handleInitialDataFetched();\n    }\n  }\n\n  handlePreloaderAnalytics() {\n    if(window.preloaderEvents) {\n      // Register to be notified when the preloader completes\n      window.preloaderEvents.onComplete((eventQueue) => {\n        // For any that exist - pull them in, make them full events\n        _.each(eventQueue, (event) => {\n          this.addToEventQueue(this.makeEvent(event));\n        });\n      });\n    }\n  }\n\n  handleAnalyticsLaunched() {\n    let event = this.makeEvent({name: AnalyticsEventKeys.CLIENT_LAUNCH});\n    this.addToEventQueue(event);\n  }\n\n  handleAnalyticsRoomLoaded() {\n    this.handleRequiredClientUpToDateFetchTime(\"rooms\");\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_ROOMS, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleAnalyticsRosterLoaded() {\n    this.handleRequiredClientUpToDateFetchTime(\"roster\");\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_ROSTER, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleAnalyticsEmoticonLoaded() {\n    this.handleRequiredClientUpToDateFetchTime(\"emoticons\");\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_EMOTICONS, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleAnalyticsClientReady() {\n    let event = this.makeEvent({\n          name: AnalyticsEventKeys.CLIENT_READY,\n          properties: {\n            time_since_launch: this.getTimeSinceAppLaunch()\n          }\n        });\n    this.addToEventQueue(event);\n  }\n\n  // Called from `handleInitialDataFetched` instead of from its own event.\n  handleInitialDataFetched() {\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_FETCH, id: \"app\", size: 0});\n  }\n\n  // hc_web.app.load\n  handleAppInit(performance = this.performance) {\n    if (performance && performance.now) {\n      let readyForUser = Math.floor(performance.now());\n      this.metrics.store({\n        key: AnalyticsEventKeys.CLIENT_READY_FOR_USER,\n        probes: readyForUser,\n        size: 0,\n        props: {\n          readyForUser: readyForUser\n        }\n      });\n    }\n  }\n\n  handleClientStart() {\n    this.metrics.start({key: AnalyticsEventKeys.CONNECTION_ESTABLISHED, id: 'app', size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_FETCH, id: 'app', size: 0});\n  }\n\n  handleInitialConnection() {\n    this.metrics.stop({key: AnalyticsEventKeys.CONNECTION_ESTABLISHED, id: \"app\", size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_PRESENCE, id: \"app\", size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_IQ, id: \"app\", size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_ROOMS, id: \"app\", size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_ROSTER, id: \"app\", size: 0});\n    this.metrics.start({key: AnalyticsEventKeys.INITIAL_EMOTICONS, id: \"app\", size: 0});\n  }\n\n  // This is an addition to the onOpenRoom callback in analytics-events\n  // hc_web.room.open\n  // hc_web.room.files.load\n  // hc_web.room.members.load\n  handleOpenedRoom(properties) {\n    this.metrics.start({key: AnalyticsEventKeys.ROOM_RENDER, id: properties.jid});\n    this.metrics.start({key: AnalyticsEventKeys.ROOM_FILES_LOAD, id: properties.jid});\n    this.metrics.start({key: AnalyticsEventKeys.ROOM_MEMBERS_LOAD, id: properties.jid});\n  }\n\n  // hc_web.room.open\n  handleChatMountEvent(properties) {\n    this.metrics.stop({key: AnalyticsEventKeys.ROOM_RENDER, id: properties.id, size: properties.size});\n  }\n\n  // hc_web.room.history.load\n  handleHistoryRequest(properties) {\n    this.metrics.start({key: AnalyticsEventKeys.ROOM_HISTORY_LOAD, id: properties.jid});\n  }\n\n  // hc_web.room.history.load\n  handleHistoryResponse(properties) {\n    this.metrics.stop({key: AnalyticsEventKeys.ROOM_HISTORY_LOAD, id: properties.jid, size: properties.size});\n  }\n\n  // hc_web.room.members.load\n  handleRosterMount(properties) {\n    this.metrics.stop({key: AnalyticsEventKeys.ROOM_MEMBERS_LOAD, id: properties.id, size: properties.size});\n  }\n\n  // hc_web.room.files.load\n  handleFilesMount(properties) {\n    this.metrics.stop({key: AnalyticsEventKeys.ROOM_FILES_LOAD, id: properties.id, size: properties.size});\n  }\n\n  // hc_web.lobby.panel.open\n  handleLobbyOpen(properties) {\n    if (utils.jid.is_lobby(properties.jid)) {\n      this.metrics.start({key: AnalyticsEventKeys.LOBBY_RENDER, id: properties.jid, size: 0});\n    }\n  }\n\n  // hc_web.lobby.panel.open\n  handleLobbyMount(properties) {\n    this.metrics.stop({key: AnalyticsEventKeys.LOBBY_RENDER, id: properties.id, size: 0});\n  }\n\n  handleReconnectionStart() {\n    this.metrics.start({key: AnalyticsEventKeys.RECONNECTION, id: 'app', size: 0});\n  }\n\n  handleReconnectionSuccess() {\n    this.metrics.stop({key: AnalyticsEventKeys.RECONNECTION, id: 'app', size: 0});\n  }\n\n  handlePresenceResponse() {\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_PRESENCE, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleStartupIqResponse() {\n    this.metrics.stop({key: AnalyticsEventKeys.INITIAL_IQ, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleAuthStart() {\n    this.metrics.start({key: AnalyticsEventKeys.AUTH, id: 'app', size: 0});\n  }\n\n  handleAuthDone() {\n    this.metrics.stop({key: AnalyticsEventKeys.AUTH, id: 'app', size: 0, props: {method: \"bosh\"}});\n  }\n\n  handleDomReady() {\n    let timings = utils.timings.getPerfTiming();\n    this.metrics.store({key: AnalyticsEventKeys.DOM_READY, id: 'app', size: 0, props: timings});\n  }\n\n  handleLaunchToActiveChatList(data) {\n    let probes = this.getTimeSinceAppLaunch();\n    this.customBrowserMetricsEvent({\n      key: AnalyticsEventKeys.LAUNCH_TO_ACTIVE_CHAT_LIST,\n      size: _.get(data, \"size\"),\n      probes: probes,\n      method: \"bosh\"\n    });\n  }\n\n  // Register one time performance events dependent upon app-state-ready\n  handleAppStateReady() {\n    if (!this.isGuest) {\n      // Guests do not have an active chat list\n      this.registerAppStateReadyAnalytics();\n    }\n  }\n\n  handleLaunchToChat(data) {\n    if (!this.shouldSendLaunchToChat) {\n      return;\n    }\n\n    let probes = this.getTimeSinceAppLaunch();\n\n    // Remember that we've sent it so that we don't let it through more than once\n    this.shouldSendLaunchToChat = false;\n\n    this.customBrowserMetricsEvent({\n      key: AnalyticsEventKeys.LAUNCH_TO_CHAT,\n      size: _.get(data, \"size\"),\n      probes: probes,\n      method: \"bosh\"\n    });\n  }\n\n  handleLaunchToChatComplete(data) {\n    if (!this.shouldSendLaunchToChatComplete) {\n      return;\n    }\n\n    // Remember that we've sent it so that we don't let it through more than once\n    this.shouldSendLaunchToChatComplete = false;\n\n    let probes = this.getTimeSinceAppLaunch(),\n        isRoom = utils.jid.is_room(data.jid),\n        chatTypeIndicator = isRoom ? 0 : 1,\n        chatId = `${isRoom ? 'r' : 'p'}${data.id}`;\n\n    this.customBrowserMetricsEvent({\n      key: AnalyticsEventKeys.LAUNCH_TO_CHAT_COMPLETE,\n      size: chatTypeIndicator,\n      chat: chatId,\n      probes: probes,\n      method: \"bosh\"\n    });\n  }\n\n  /**\n   * Decorates an event with the current server time and other required properties.\n   *\n   * @param event\n   * @return {*}\n   */\n  makeEvent(event) {\n    this.processRoomType(event);\n    event.serverTime = utils.now();\n    return _.merge({}, this.baseEvent, event);\n  }\n\n  addToEventQueue(event = {}) {\n    if (!_.get(event, 'properties')){\n      event = this.makeEvent(event);\n    }\n    this.eventQueue.push(event);\n    logger.type('analytics').withFilter().alwaysExpanded().log('Event was added to queue:', event.name, event.properties, event);\n  }\n\n  getTimeSinceAppLaunch() {\n    return utils.now() - this.appLaunchTime;\n  }\n\n  getIsGuest() {\n    return (window.HC && window.HC.is_guest) ? window.HC.is_guest : false;\n  }\n\n  getSlug(clientIdentifier) {\n    return clientIdentifier.client_subtype ? `${clientIdentifier.client_type}_${clientIdentifier.client_subtype}` : clientIdentifier.client_type;\n  }\n\n  getBaseEvent(groupId, userId, slug, isAdmin, versionId) {\n    return {\n      \"server\": `gid-${groupId}`,\n      \"product\": AnalyticsEventKeys.PRODUCT,\n      \"subproduct\": `hc_${slug}`,\n      \"version\": versionId,\n      \"user\": `uid-${userId}`,\n      \"properties\": {\n        client: slug,\n        isAdmin: isAdmin,\n        environment: ENV,\n        type: slug,\n        ver: versionId,\n        os_ver: `${this.userAgent.os.name} ${this.userAgent.os.version || \"\"}`,\n        browser: `${this.userAgent.browser.name} ${this.userAgent.browser.version}`\n      }\n    };\n  }\n\n  getHermentOptions(groupId, userId, versionId) {\n    return {\n      queue: this.eventQueue,\n      storage_key: DAL.Cache.Keys.ANALYTICS,\n      server: `gid-${groupId}`,\n      product: AnalyticsEventKeys.PRODUCT,\n      subproduct: `hc_${this.slug}`,\n      version: versionId,\n      user: `uid-${userId}`,\n      unfold: true,\n      publish_interval: AppConfig.analytics_publish_interval,\n      save_interval: AppConfig.analytics_save_interval\n    };\n  }\n\n  getBrowserMetricsBaseEvent(isAdmin, slug) {\n    return {\n      \"name\": AnalyticsEventKeys.BROWSER_METRICS,\n      \"properties\": {\n        \"client\": slug,\n        \"isAdmin\": isAdmin,\n        \"environment\": ENV\n      }\n    };\n  }\n\n  getRequiredClientFetchTimesObject(isGuest) {\n    // Guests only fetch emoticons\n    if (isGuest) {\n      return {\n        emoticons: null\n      };\n    }\n\n    return {\n      roster: null,\n      rooms: null,\n      emoticons: null\n    };\n  }\n\n  /**\n   * Ensures we have a valid room type.\n   *\n   * We sometimes get an event type. This makes sure this doesn't get through to GAS.\n   *\n   * @param event The event.\n   * @return {*}\n   */\n  processRoomType(event) {\n    if (event && event.properties && event.properties.type && !_.isString(event.properties.type)) {\n      delete event.properties.type;\n    }\n  }\n\n  deleteWindowLaunchTime() {\n    delete window.hc_client_launch_time;\n  }\n\n  /**\n   * Takes care of unregistering handlers for a given composite event and removing the association of those\n   * handlers to this composite event.  If handlers are found for the event name specified, this will remove\n   * them.  Otherwise it's essentially a noop.\n   *\n   * @param {String} name the name of the composite event you want to unstage\n   */\n  __unstageCompositeEvent(name) {\n    // if we have a composite event with this name in the queue already, unregister its handlers\n    let existingHandlers = _.get(this.compositeEventQueue, name);\n    if (existingHandlers) {\n      _.each(existingHandlers, (handler) => {\n        handler.dispatcher.unregister(handler.name, handler.func);\n      });\n\n      // remove this composite event entry so that we know it has executed its handler\n      delete this.compositeEventQueue[name];\n    }\n  }\n\n  /**\n   * Takes care of registering handlers for a given composite event and associating those\n   * handlers to this composite event\n   *\n   * @param {String} name the name of the composite event\n   * @param {Array} handlers\n   */\n  __stageCompositeEvent(name, handlers) {\n    // now let's register the new handlers\n    _.each(handlers, (handler) => {\n      handler.dispatcher.register(handler.name, handler.func);\n    });\n\n    // and associate the handler map with the event name so that future register calls can clean them up if need be\n    this.compositeEventQueue[name] = handlers;\n  }\n\n  /**\n   * Handles the creation, spawning, and respawning logic for events that can't be fired until a set of\n   * events has successfully fired.  This acts as sort of a debounce for composite events,\n   *\n   * @param {String} name the name of the composite event you intend to fire.\n   * @param {*} starterData any data you have when you're spawning the composite event sequence\n   */\n  spawnCompositeEvent(name, starterData) {\n    // Functions that generate the handler(s) associated with a given composite event.\n    // These should all return an array of handler entry objects containing:\n    // - dispatcher: The dispatcher to use when registering the function\n    // - name: The name of the event to register the function for\n    // - func: The function you need registered to that event\n    let handlerCreationFunctions = {\n\n      [AnalyticsEventKeys.CHAT_SENDABLE]: () => {\n        let beginTime = new Date().getTime();\n        // create a handler that will fire when we get the notification that a user is able to send text in a new chat\n        let chatSendableHandler = (data) => {\n          // if the jid matches the one we had when we spawned this composite event, let's fire the event\n          if (starterData.jid === data.jid) {\n            this.customBrowserMetricsEvent({\n              key: AnalyticsEventKeys.CHAT_SENDABLE,\n              size: utils.jid.is_room(data.jid) ? 0 : 1,\n              probes: utils.now() - beginTime,\n              method: \"bosh\"\n            });\n\n            // now let's remove any handlers that are tied to this composite event\n            this.__unstageCompositeEvent(AnalyticsEventKeys.CHAT_SENDABLE);\n          }\n        };\n\n        return [{ dispatcher: AnalyticsDispatcher, name: \"analytics-active-chat-changed\", func: chatSendableHandler }];\n      },\n\n      [AnalyticsEventKeys.CHAT_IS_COMPLETE]: () => {\n        let beginTime = new Date().getTime();\n        // create a handler that will fire when we get the notification that the chat loaded has received\n        let chatIsCompleteHandler = (data) => {\n          // if the jid matches the one we had when we spawned this composite event, let's fire the event\n          if (starterData.jid === data.jid) {\n            let isRoom = utils.jid.is_room(data.jid),\n                chatTypeIndicator = isRoom ? 0 : 1,\n                chatId = `${isRoom ? 'r' : 'p'}${data.id}`;\n            this.customBrowserMetricsEvent({\n              key: AnalyticsEventKeys.CHAT_IS_COMPLETE,\n              size: chatTypeIndicator,\n              chat: chatId,\n              probes: utils.now() - beginTime,\n              method: \"bosh\"\n            });\n\n            // now let's remove any handlers that are tied to this composite event\n            this.__unstageCompositeEvent(AnalyticsEventKeys.CHAT_IS_COMPLETE);\n          }\n        };\n\n        return [{ dispatcher: AnalyticsDispatcher, name: \"analytics-history-loaded\", func: chatIsCompleteHandler }];\n      }\n\n    };\n\n    // lookup the handler creation function for the composite event specified\n    var handlerCreator = handlerCreationFunctions[name];\n    if (handlerCreator) {\n      // first, remove any existing handlers that might be waiting to fire for this composite event\n      this.__unstageCompositeEvent(name);\n      // now, stage our new handlers\n      this.__stageCompositeEvent(name, handlerCreator());\n    }\n  }\n\n  /**\n   * Reset variables\n   * FOR TESTING ONLY\n   * @method reset\n   */\n  __reset() {\n    this.eventQueue = [];\n    this.compositeEventQueue = {};\n    this.isGuest = false;\n    this.appLaunchTime = null;\n    this.slug = null;\n    this.browserMetricsBaseEvent = {};\n    this.requiredClientUpToDateFetchTimes = null;\n    this.requiredClientUpToDateFetchTimes = {};\n  }\n}\nexport default Analytics;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/analytics/analytics.js\n **/","import Emoticons from \"helpers/emoticons\";\nimport regex_helpers from \"helpers/regex_helpers\";\nimport utils from \"helpers/utils\";\nimport AppConfig from \"config/app_config\";\nimport AppStore from 'stores/application_store';\nimport Presence from 'lib/enum/presence';\n\nvar hasEnteredText = false;\nvar ALL_MENTION_REGEX = /(?=[^\\\\w>]|^)@all(?=[^\\\\w<]|$)/gi;\nvar HERE_MENTION_REGEX = /(?=[^\\\\w>]|^)@here(?=[^\\\\w<]|$)/gi;\nvar USER_MENTION_REGEX = /(?=[^\\\\w]|^)@[a-z0-9\\-]+(?=[^\\\\w]|$)/gi;\nvar URL_MENTION_REGEX = new RegExp(regex_helpers.url, \"gi\");\n\nvar SLASH_COMMAND_REGEX = /\\/(join|part|topic|available|away|dnd|code|quote|pre|monospace|clear|me)\\s/;\n\n/**\n * Adds an input abandoned event if there is current text in the input field.\n * @param events\n */\nfunction checkChatAbandoned(events) {\n  if (hasEnteredText) {\n    events.push({\n      name: \"hipchat.client.message.input.abandoned\"\n    });\n  }\n}\n\n/**\n * Can be called when a room is closed and a new one is subsequently selected.\n * So please don't remove the isClosed below. :)\n *\n * @param properties\n * @return {*}\n */\nfunction onSelectRoom({ isClosed, jid, type }) {\n\n  let isLobby = utils.jid.is_lobby(jid);\n  let event = {\n    name: (isLobby) ? \"hipchat.client.lobby.viewed\" : \"hipchat.client.chat.viewed\"\n  };\n\n  let finalProps = {};\n\n  if (isClosed) {\n    finalProps.isClosed = true;\n  }\n\n  if (!isLobby) {\n    finalProps.type = type;\n    if (utils.jid.is_room(jid)) {\n      let room = AppStore.get('allRooms')[jid];\n      if (room){\n\n        let roster = AppStore.get('roster');\n\n        let participants = _.get(room, 'participants.members', [])\n                            .concat(_.get(room, 'participants.guests', []));\n\n        finalProps.room = room.id;\n        finalProps.room_name = room.name;\n        finalProps.private = utils.jid.is_private_room(room.privacy) ? 'yes' : 'no';\n\n        finalProps.here_size = _.values(\n                                  _.pick(roster, participants)\n                                )\n                                .filter((user) => _.get(user, 'presence.show') === Presence.AVAILABLE)\n                                .length;\n\n        finalProps.all_size = participants.length;\n      }\n    }\n  }\n\n  if (!_.isEmpty(finalProps)) {\n    event.properties = finalProps;\n  }\n\n  let events = [event];\n\n  checkChatAbandoned(events);\n\n  return events;\n}\n\n/**\n * Called when a room is newly opened.\n *\n * @param properties\n * @return {*}\n */\nfunction onOpenRoom(properties) {\n  var props = {\n    isNew: true,\n    type: properties.type,\n    source: properties.source\n  };\n\n  var type = utils.jid.is_room(properties.jid) ? 'room' : 'oto';\n  var source = props.source || \"lobby\";\n  var event = (source === 'switcher') ? `hipchat.client.switcher.open.${type}` : `hipchat.client.lobby.open.${type}`;\n\n  if (source === \"lobby\" || source === 'switcher') {\n    props.filter_text_length = (properties.query) ? properties.query.length : 0;\n  }\n\n  return {\n    name: event,\n    properties: props\n  };\n}\n\nfunction onChatInputChanged(text) {\n  hasEnteredText = !_.isEmpty(text);\n}\n\nfunction messageContainsGroupMention(message) {\n  message = message.trim();\n  return ALL_MENTION_REGEX.test(message) || HERE_MENTION_REGEX.test(message);\n}\n\n/**\n * TODO make this use the roster.\n * @param message\n * @returns {boolean}\n */\nfunction messageContainsUserMention(message) {\n  message = message.trim();\n  return USER_MENTION_REGEX.test(message);\n}\n\nfunction onChatSent(data) {\n  var events = [];\n  if (hasEnteredText) {\n    let emoticons = Emoticons.getEmoticonsInfo(data.text);\n    emoticons.forEach((emoticon) => {\n      events.push({\n        name: \"hipchat.client.emoticon.used\",\n        properties: {\n          room: (data.chat_type === 'groupchat') ? data.active_chat_id : null,\n          emoticonUsed: emoticon.shortcut,\n          emoticonType: emoticon.type\n        }\n      });\n    });\n\n    if (messageContainsGroupMention(data.text)) {\n      events.push({\n        name: \"hipchat.client.message.group.mentioned\"\n      });\n    } else if (messageContainsUserMention(data.text)) {\n      events.push({\n        name: \"hipchat.client.message.user.mentioned\"\n      });\n    }\n\n    if (URL_MENTION_REGEX.test(data.text)) {\n      events.push({\n        name: \"hipchat.client.message.url.sent\"\n      });\n    }\n\n    let slashCommand = SLASH_COMMAND_REGEX.exec(data.text);\n    if (slashCommand) {\n      events.push({\n        name: \"hipchat.client.slash.command.used\",\n        properties: {\n          command: slashCommand[1]\n        }\n      });\n    }\n\n    if (AppConfig.slash_replacement_regex.test(data.text)) {\n      events.push({\n        name: \"hipchat.client.slash.command.used\",\n        properties: {\n          command: 'replacement'\n        }\n      });\n    }\n\n    hasEnteredText = false;\n  }\n\n  return events;\n}\n\nfunction onCreateRoom(submit_data) {\n  return [\n    {name: \"hipchat.client.room.created\"},\n    {name: `hipchat.client.room.${submit_data.privacy}.created`}\n  ];\n}\n\nfunction onUpdatePresence(presence) {\n  var eventType;\n  switch(presence.show) {\n    case \"xa\":\n      eventType = \"away\";\n      break;\n    case \"dnd\":\n      eventType = \"donotdisturb\";\n      break;\n    case \"chat\":\n      eventType = \"available\";\n  }\n\n  if (eventType) {\n    return {\n      name: \"hipchat.client.top.navigation.profile.status.clicked.\" + eventType\n    };\n  }\n}\n\nfunction onUpdateStatusMessage(presence) {\n  return {\n    name: \"hipchat.client.top.navigation.profile.status.statusmessage\",\n    properties: {\n      custom: presence.status === \"\" ? false : true\n    }\n  };\n}\n\nfunction handleAnalyticsEvent(event) {\n  return event;\n}\n\nfunction onFilterLobby(data) {\n  var type;\n\n  if (data && data.scope) {\n    switch(data.scope) {\n      case \"all\":\n        type = \"search\";\n        break;\n      default:\n        type = data.scope;\n    }\n    return {\n      name: \"hipchat.client.lobby.filter.\" + type\n    };\n  }\n}\n\nfunction getAddonKey(data) {\n  var addonKey = 'unknown-addon';\n  if(data && data.addon_key) {\n    addonKey = data.addon_key;\n  }\n  return {addonKey: addonKey};\n}\n\nfunction onConnectDialogClose(data) {\n  return {\n    name: \"hipchat.client.connect.dialog.close\",\n    properties: getAddonKey(data)\n  };\n}\n\n\nfunction onConnectDialogLinkClick(data) {\n  return {\n    name: \"hipchat.client.connect.dialog.link.click\",\n    properties: getAddonKey(data)\n  };\n}\n\nfunction onConnectAnalyticsEvent(data) {\n  return {\n    name: data.name,\n    properties: data.data\n  };\n}\n\nfunction onHideGifsClick(props) {\n  return {\n    name: \"hipchat.client.settings.general.hidegifs\",\n    properties: props\n  };\n}\n\nfunction onRoomNotificationSettingClick(data) {\n  return {\n    name: data.name,\n    properties: data.props\n  };\n}\n\nfunction onKeyboardShortcutUsed(data) {\n  return {\n    name: \"hipchat.client.keyboard.shortcut.used\",\n    properties: data\n  };\n}\n\nfunction onSecureFileDownload() {\n  return {\n    name: \"hipchat.client.secure.file.download\"\n  };\n}\n\nexport default {\n  events: {\n    \"analytics-select-room\": onSelectRoom,\n    \"analytics-open-room\": onOpenRoom,\n    \"analytics-set-message-value\": onChatInputChanged,\n    \"analytics-send-message\": onChatSent,\n    \"analytics-create-room\": onCreateRoom,\n    \"analytics-event\": handleAnalyticsEvent,\n    \"analytics-update-presence\": onUpdatePresence,\n    \"analytics-update-status-message\": onUpdateStatusMessage,\n    \"analytics-filter-lobby\": onFilterLobby,\n    \"analytics-connect-dialog-click\": onConnectDialogLinkClick,\n    \"analytics-connect-dialog-close\": onConnectDialogClose,\n    \"analytics-connect-event\": onConnectAnalyticsEvent,\n    \"analytics-hide-gifs\": onHideGifsClick,\n    \"analytics-room-notification-setting\": onRoomNotificationSettingClick,\n    \"analytics-keyboard-shortcut-used\": onKeyboardShortcutUsed,\n    \"analytics-secure-file-download\": onSecureFileDownload\n  },\n\n  /**\n   * Exposed for testing\n   * @private\n   */\n  __reset: function() {\n    hasEnteredText = false;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/analytics/analytics_events.js\n **/","import utils from 'helpers/utils';\nimport Store from 'lib/core/store';\nimport MessageProcessor from 'processors/message_processor';\nimport IQProcessor from 'processors/iq_processor';\nimport PresenceProcessor from 'processors/presence_processor';\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AnalyticsDispatcher from \"dispatchers/analytics_dispatcher\";\nimport PreferencesStore from \"./preferences_store\";\nimport PreferencesKeys from 'keys/preferences_keys';\nimport ChatPanelStrings from 'strings/chat_panel_strings';\nimport DialogStrings from 'strings/dialog_strings';\nimport Presence from 'lib/enum/presence';\nimport AppConfig from 'config/app_config';\nimport AppActions from 'actions/app_actions';\nimport notifier from 'helpers/notifier';\nimport logger from 'helpers/logger';\nimport ConfigStore from 'stores/configuration_store';\nimport FlagActions from 'actions/flag_actions';\n\nclass AppStore extends Store {\n\n  constructor() {\n\n    super();\n\n    this.local = {\n      initialized: false,\n      user_state: 'active',\n      active_type: '',\n      profile_jids: [],\n      sent_msg_ids: [],\n      participants: [],\n      closedChats: [],\n      deletedRooms: [],\n      history_fetch_id: 0,\n      chat_states: [\n        'active',\n        'inactive',\n        'composing',\n        'gone'\n      ],\n      emoticons_initialized: false,\n      windowFocused: true,\n      clearUnreadCounts: false,\n      shouldReconcileAutoJoin: false,\n      lastSavedAutoJoin: [],\n      presence_updates_timers: {}\n    };\n\n    this.presenceProcessor = new PresenceProcessor({\n      is_guest: _.get(window.HC, \"is_guest\", false)\n    });\n    this.iqProcessor = new IQProcessor({\n      is_guest: _.get(window.HC, \"is_guest\", false)\n    });\n\n    this.server_data_callbacks = {\n      'message': this.handleIncomingMessages,\n      'iq': this.handleIQ,\n      'presence': this.handlePresence,\n      'success': this.handleConnectionSuccess\n    };\n\n    this.messageProcessor = new MessageProcessor(this);\n\n    this.debouncedSetActiveRooms = _.debounce(this.setActiveRooms, AppConfig.set_active_rooms_timeout, {\n      leading: true,\n      trailing: true\n    });\n\n    this.debouncedFetchRoomParticipantsFromAPI = _.debounce(this.fetchRoomParticipantsFromAPI, AppConfig.fetch_room_participants_timeout, {\n      leading: false,\n      trailing: true\n    });\n\n    this.refetchReadStateHandler = this.refetchReadState.bind(this);\n\n    this.registerCallbacks();\n    this.addChangeHandlers();\n  }\n\n  getRoomDefaults(){\n    return {\n      topic: null,\n      admins: [],\n      participants: {\n        members: [],\n        guests: []\n      },\n      files: [],\n      links: [],\n      is_archived: '0',\n      history_fetch_ids: [],\n      show_join_leave_messages: false,\n      guest_mention_regex: null,\n      most_recent_message: null,\n      last_read_message: null,\n      avatar_url: '',\n      roster_size: 0,\n      participants_fully_initialized: false,\n      presence: {\n        show: '',\n        status: '',\n        seconds: '',\n        idleTime: ''\n      },\n      unreadCount: 0,\n      unreadCountTemp: 0,\n      unreadMentionCount: 0,\n      unreadMentionJustMeCount: 0,\n      isUpdatingUnreadCount: false,\n      hasMention: false,\n      files_fetched: false,\n      links_fetched: false\n    };\n  }\n\n  getRosterDefaults(){\n     return {\n       presence: {\n         show: 'unknown',\n         status: '',\n         seconds: '',\n         idleTime: ''\n       },\n       closed_at: utils.getMoment()\n     };\n  }\n\n  getDefaults() {\n    return {\n      config: {},\n      active_chat: '',\n      asset_base_uri: '',\n      client_type: '',\n      client_subtype: '',\n      client_version_id: '',\n      video_chat_uri: '',\n      current_user: {},\n      activeRooms: {},\n      allRooms: {},\n      newMessages: {},\n      roster: {},\n      profiles: {},\n      smileys: {},\n      emoticons: {\n        path_prefix: '',\n        icons: {}\n      },\n      mentionRegexUser: null,\n      mentionRegexMe: null,\n      mentionRegexJustMe: null,\n      group_name: '',\n      group_id: null,\n      conference_server: null,\n      chat_server: null,\n      api_host: 'api.hipchat.com',\n      web_server: null,\n      features: {},\n      permissions: {},\n      release_dialog_content: {},\n      ui_available: false,\n      is_in_welcome_range: false\n    };\n  }\n\n  registerCallbacks() {\n    AppDispatcher.registerOnce({\n      'hc-init': (data) => {\n        this.handleHCInit(data);\n      },\n      'app-state-ready': () => {\n        this.fetchReadState();\n      },\n      'after:app-state-ready': () => {\n        // The first moment after the preloader has been hidden\n        this.set(\"ui_available\", true);\n      },\n      'signout': () => {\n        var opts = {\n          is_guest: _.get(this.data.current_user, \"is_guest\", false),\n          guest_key: _.get(this.data.current_user, \"guest_key\", false),\n          type: '',\n          jid: this.data.active_chat,\n          preferences: PreferencesStore.getAll()\n        };\n        AppDispatcher.dispatch('exit-app', opts);\n      }\n    });\n    AppDispatcher.register({\n      'configuration-change': (data) => {\n        this.handleConfigChange(data);\n      },\n      'feature-flags-update': (feature_flags) => {\n        this.updateFeatureFlags(feature_flags);\n        $(document).trigger('app-feature-flags', feature_flags);\n      },\n      'auth-token-update': (data) => {\n        this.updateConfig(data);\n      },\n      'update-sid': (data) => {\n        this.updateConfig(data);\n        logger.info('SID was updated: ', data.sid);\n        logger.type('sid').info('SID was updated: ', data.sid);\n      },\n      'server-data': (data) => {\n        this.handleServerData(data);\n      },\n      'app-state-ready': () => {\n        this.handleAppStateReady();\n      },\n      'open-room': (data) => {\n        this.handleOpenRoom(data);\n      },\n      'join-room': (data) => {\n        this.handleJoinRoom(data);\n      },\n      'close-room': (data) => {\n        this.handleCloseRoom(data.jid);\n      },\n      'delete-room': (data) => {\n        this.local.deletedRooms.push(data.jid);\n      },\n      'send-message': (data) => {\n        this.handleSendMessage(data);\n      },\n      'fetch-attachment-image': (messageObj) => {\n        messageObj = _.groupBy(messageObj, 'room');\n        this.set({\n          newMessages: messageObj\n        });\n        this._handleNewMessageUpdate(messageObj);\n      },\n      'update-presence': (presence) => {\n        this.updatePresence(presence);\n        if (presence.show === 'away') {\n          AppDispatcher.registerOnce('update-presence', this.refetchReadStateHandler);\n        }\n      },\n      'DAL:handle-joined-rooms': (rooms) => {\n        this.handleJoinedRooms(rooms);\n      },\n      'hide-join-messages': () => {\n        _.forOwn(this.data.activeRooms, (room) => {\n          room.show_join_leave_messages = false;\n        });\n      },\n      'guest-access-changed': (data) => {\n        let chat = this.data.allRooms[data.jid];\n        if (chat) {\n          _.assign(chat, {guest_url: data.url});\n        }\n        this.handleRoomUpdate(chat);\n      },\n      'new-active-chat': (data) => {\n        this._updateReadStateForActiveChat();\n        this._clearUnreadCountForChat(this.data.active_chat);\n\n        this.local.active_type = /@chat/.test(data.jid) ? 'chat' : 'groupchat';\n        this.set('active_chat', data.jid);\n\n        this.setActiveGuestUserRegex();\n        this._updateReadStateForActiveChat();\n        this._clearUnreadCountForChat(data.jid);\n\n        if (utils.jid.is_room(data.jid) && _.get(this.data.activeRooms, [data.jid, 'roster_size'], false)) {\n          this.initializeRoomParticipants(data.jid);\n        }\n      },\n      'request-ancient-history': (data, cb) => {\n        this.local.history_fetch_id++;\n        data.id = 'history:' + this.local.history_fetch_id;\n        if (this.data.activeRooms[data.jid]) {\n          this.data.activeRooms[data.jid].history_fetch_ids.push(data.id);\n        }\n        AppDispatcher.dispatch('fetch-previous', data, cb);\n      },\n      'remove-room-participant': (data) => {\n        this.removeRoomParticipant(data);\n      },\n      'add-room-visitor': (data) => {\n        this.addVisitor(data);\n      },\n      'add-room-participant': (data) => {\n        this.addRoomParticipant(data);\n      },\n      'room-presence-received': (data) => {\n        this.handleRoomPresence(data);\n      },\n      'user-removed': (data) => {\n        this.handleUserRemoved(data);\n      },\n      'handle-cached-room': (room) => {\n        this.handleRooms(room);\n      },\n      'DAL:handle-new-room': (room) => {\n        this.handleRooms(room);\n      },\n      'DAL:handle-created-room': (room) => {\n        this.handleNewRoom(room);\n      },\n      'DAL:handle-fetched-links': (chatLinksResponse) => {\n        this.handleLinkQueryResponse(chatLinksResponse);\n      },\n      'DAL:handle-fetched-files': (chatFilesResponse) => {\n        this.handleFileQueryResponse(chatFilesResponse);\n      },\n      'add-link-from-message': (data) => {\n        this.addLinkFromMessageToRoom(data.room, data.link);\n      },\n      'add-file-from-message': (data) => {\n        this.addFileFromMessageToRoom(data.room, data.file);\n      },\n      'global-presence-received': (data) => {\n        this.handleGlobalPresence(data);\n      },\n      'groupchat-invite-received': (message) => {\n        this.handleInviteMessage(message);\n      },\n      'groupchat-invite-accepted': (data) => {\n        this.handleRoomInviteAccepted(data.jid);\n      },\n      'private-chat-invite-received': (message) => {\n        this.handlePrivateChatInvite(message);\n      },\n      'enso.invite-to-audio-video-call': (data) => {\n        this.handlePrivateChatInvite(data.message);\n      },\n      'set-user-state': (data) => {\n        if (this.local.user_state !== data.state) {\n          this.local.user_state = data.state;\n          AppDispatcher.dispatch('send-user-state-message', data);\n        } else if (data.state === 'composing') {\n          AppDispatcher.dispatch('send-user-state-message', data);\n        }\n      },\n      'status-message-received': (data) => {\n        this.handleChatStateMessage(data);\n      },\n      'mark-chats-as-read': () => {\n        var chats = _.values(this.data.activeRooms);\n        this.resetReadStateCounts(chats);\n      },\n      'mark-rooms-as-read': () => {\n        var rooms = _.filter(this.data.activeRooms, (chat) => {\n              return utils.jid.is_room(chat.jid);\n            });\n        this.resetReadStateCounts(rooms);\n      },\n      'mark-people-as-read': () => {\n        var people = _.filter(this.data.activeRooms, (chat) => {\n              return utils.jid.is_private_chat(chat.jid);\n            });\n        this.resetReadStateCounts(people);\n      },\n      'archive-room': (data, cb) => {\n        this.handleArchiveRoom(data, true, cb);\n      },\n      'unarchive-room': (data, cb) => {\n        this.handleArchiveRoom(data, false, cb);\n      },\n      'room-archived': (data) => {\n        this.handleArchivedRoom(data, '1');\n      },\n      'room-unarchived': (data) => {\n        this.handleArchivedRoom(data, '0');\n      },\n      'DAL:handle-topic-updated': (data) => {\n        this.handleTopicUpdated(data.topic, data.jid);\n      },\n      'enable-dark-feature': (feature) => {\n        this.handleEnableDarkFeature(feature);\n      },\n      'open-chat-by-mention-name': (mentionName) => {\n        this.openChatByMentionName(mentionName);\n      },\n      'missed-call': (data) => {\n        this.handleMissedCall(data);\n      },\n      'call-declined': (data) => {\n        this.handleCallDeclined(data);\n      },\n      'application-focused': () => {\n        this.local.windowFocused = true;\n        this._updateReadStateForActiveChat();\n        this._clearUnreadCountForChat(this.data.active_chat);\n      },\n      'application-blurred': () => {\n        this.local.windowFocused = false;\n      },\n      'strophe-disconnecting': () => {\n        AppDispatcher.unregister('update-presence', this.refetchReadStateHandler);\n      },\n      'strophe-reconnecting': () => {\n        this.local.shouldReconcileAutoJoin = true;\n        this.resetRoomParticipantsListInitializedFlag();\n      },\n      'before:app-state-reconnected': () => {\n        this.resetFilesAndLinksFetching();\n      },\n      'app-state-reconnected': () => {\n        this.refetchReadState();\n      },\n      'fetch-files': ({room}) => {\n        if (_.get(this.data.activeRooms, room)) {\n          this.data.activeRooms[room].files_fetching = true;\n          this.set('activeRooms', this.data.activeRooms);\n        }\n      },\n      'fetch-links': ({room}) => {\n        if (_.get(this.data.activeRooms, room)) {\n          this.data.activeRooms[room].links_fetching = true;\n          this.set('activeRooms', this.data.activeRooms);\n        }\n      },\n      'preferences-saved': (data) => {\n        if (data.autoJoin){\n          this.local.lastSavedAutoJoin = data.autoJoin;\n        }\n      },\n      'updated:preferences': (newPreferences) => {\n        let config = _.get(this.data, 'config', {}),\n            preferences = _.get(config, 'preferences', {});\n\n        config.preferences = _.merge(preferences, newPreferences);\n        // Write directly to `data`. We don't want to call this.set() here, because we're responding to\n        // a change in the prefs store and we don't want to trigger another with the same data.\n        this.data.config = config;\n\n        this._updateTotalUnreadCount();\n      },\n      'set-room-participants-fully-initialized': (roomJid) => {\n        let room = _.get(this.data.activeRooms, roomJid);\n        if (room) {\n          this.setRoomParticipantsFullyInitialized(room);\n        }\n      },\n      'API:fetched-recent-history': (data) => {\n        this.handleIncomingMessages(data, this);\n      },\n      'DAL:guest-fetched-room-participants': (data) => {\n        this.handleGuestRoomParticipants(data.items);\n      },\n      'DAL:fetched-room-participants': (data) => {\n        this.handleRoomParticipantsFromAPI(data);\n      },\n      'DAL:readstate-fetched': (err, data) => {\n        this.handleReadState(err, data);\n      }\n    });\n  }\n\n  updateConfig(data) {\n    let config = _.merge(this.data.config, data);\n    this.set({ config });\n  }\n\n  handleAppStateReady() {\n    AnalyticsDispatcher.dispatch('analytics-client-ready', { name: 'hipchat.client.ready'});\n\n    while (this.local.profile_jids.length) {\n      var jid = this.local.profile_jids.shift();\n      AppDispatcher.dispatch('request-profile', jid);\n    }\n\n    var activeSize = _.size(this.data.activeRooms);\n    var isFounder = _.size(this.data.roster) === 1;\n    if (this._isFirstLogin() && !this.data.current_user.is_guest) {\n\n      // if there's no firstLoginDate then set one in prefs\n      AppDispatcher.dispatch('set-first-login-date');\n\n      this._showWelcomeDialog();\n\n      // invited users have no rooms in their autoJoin so we open a room for them, if it exists\n      if (activeSize === 0 && isFounder) {\n        this.onBoardNewUser(activeSize);\n      }\n    }\n\n    this.verifyOTOChats();\n  }\n\n  _showWelcomeDialog() {\n    let isWelcomeDialogEnabled = _.get(this.data.config, 'feature_flags.web_client_is_welcome_dialog_enabled', false);\n\n    if (isWelcomeDialogEnabled && this.data.is_in_welcome_range) {\n      AppDispatcher.dispatch('show-modal-dialog', {\n        dialog_type: 'welcome-dialog',\n        dialog_data: {}\n      });\n    }\n  }\n\n  _isFirstLogin(preferences = PreferencesStore.getAll()){\n    var firstLoginDate = _.get(preferences, \"properties.firstLoginDate\");\n    firstLoginDate = parseInt(firstLoginDate, 10);\n    return _.isNaN(firstLoginDate);\n  }\n\n  _handleWelcomeRange(peopleAmount) {\n    let peopleAmountMax = AppConfig.welcome_dialog.max_size_of_group_to_display;\n\n    let isFirst = peopleAmount === 1 ? true : false,\n        isLessThanMax = peopleAmount <= peopleAmountMax ? true : false;\n\n    if (!isFirst && isLessThanMax && !this.data.is_in_welcome_range) {\n      this.set({\n        is_in_welcome_range: true\n      });\n    } else if ((isFirst || !isLessThanMax) && this.data.is_in_welcome_range) {\n      this.set({\n        is_in_welcome_range: false\n      });\n    }\n  }\n\n  verifyOTOChats() {\n    if(_.size(this.data.activeRooms) > 0) {\n      _.forOwn(this.data.activeRooms, (room, jid) => {\n        if (utils.jid.is_private_chat(jid)) {\n          // Close OTO chats when user is not in the roster\n          if (!this.data.roster[jid]) {\n            AppDispatcher.dispatch('close-room', {\n              jid: jid\n            });\n          }\n        }\n      });\n    }\n  }\n\n  handleConfigChange(data) {\n    let config = _.mergeWith(this.data.config, data, (item1, item2, key) => {\n      if (key === PreferencesKeys.AUTO_JOIN) {\n        return item2;\n      }\n    });\n    this.set({config});\n\n    // TEMP -------\n    this.handleHCInit(config, true);\n    // END TEMP ---\n  }\n\n  resetFilesAndLinksFetching() {\n    for (let jid in this.data.activeRooms){\n      if (this.data.activeRooms[jid]) {\n        this.data.activeRooms[jid].files_fetching = false;\n        this.data.activeRooms[jid].links_fetching = false;\n      }\n    }\n    for (let jid of this.local.closedChats){\n      if (this.data.allRooms[jid]) {\n        this.data.allRooms[jid].files_fetching = false;\n        this.data.allRooms[jid].links_fetching = false;\n      }\n    }\n  }\n\n  fetchReadState() {\n    logger.log('[ReadState] Fetching readstate data.');\n    AppDispatcher.dispatch('DAL:fetch-readstate');\n  }\n\n  refetchReadState() {\n    if (this.local.clearUnreadCounts) {\n      this._clearPendingReadstateData();\n    }\n    this.fetchReadState();\n  }\n\n  handleReadState(err, data) {\n    var activeRooms = this.data.activeRooms;\n\n    if (err || !Array.isArray(data)) {\n      logger.warn('[ReadState] Error fetching readstate. Reason:', err, data);\n      this._resetPendingReadstateData();\n      return;\n    }\n\n    logger.log(`[ReadState] Received readstate data for ${data.length} rooms:`, _.map(data, 'xmppJid'));\n    _.forEach(data, (chat) => {\n      let jid = chat.xmppJid;\n\n      // Only remove rooms from readstate if the activeRooms object is populated\n      // and the room is not present in it.\n      if (!_.isEmpty(activeRooms) && !activeRooms[jid]) {\n        logger.debug('[ReadState] Removing inactive room:', jid);\n        this._removeReadState(jid);\n        return;\n      }\n\n\n      let roomDefaults = _.pick(this.getRoomDefaults(), 'unreadCount', 'unreadMentionCount', 'unreadMentionJustMeCount', 'unreadCountTemp', 'hasMention'),\n          roomData = _.pick(activeRooms[jid], 'unreadCount', 'unreadMentionCount', 'unreadMentionJustMeCount', 'unreadCountTemp', 'hasMention'),\n          update = {\n            isUpdatingUnreadCount: false,\n            last_read_message: {\n              mid: chat.mid,\n              timestamp: Number(chat.timestamp)\n            }\n          };\n\n      _.assign(update, roomDefaults, roomData);\n\n      if ('unreadCount' in chat) {\n        let unreadCount = chat.unreadCount.count || 0,\n            mentionCount = chat.unreadCount.mentions || 0,\n            hasMention = chat.unreadCount.includesMention;\n\n        update.unreadCount = unreadCount + update.unreadCountTemp;\n        update.unreadCountTemp = update.unreadCount;\n\n        if (update.unreadCount && utils.jid.is_room(jid)) {\n          update.hasMention = hasMention || update.hasMention;\n\n          if (update.hasMention) {\n            update.unreadMentionCount = mentionCount;\n\n            // Readstate doesn't provide a breakdown by mention type. We know the the total number\n            // of unread mentions but not how many of those are of the  @all or @here variety vs a\n            // direct mention. Here we are setting the unreadMentionJustMeCount property to one to\n            // indicate that there might be a notification-worthy unread message. Which is better\n            // than leaving it set to zero.\n            update.unreadMentionJustMeCount = 1;\n          }\n        }\n\n        this.local.clearUnreadCounts = true;\n      }\n\n      _.assign(activeRooms[jid], update);\n    });\n\n    this._resetPendingReadstateData();\n    this.handleChatsAbsentFromReadState(data.map(room => room.xmppJid));\n    this.set('activeRooms', activeRooms);\n\n    AppDispatcher.dispatch('readstate-received');\n  }\n\n  _clearPendingReadstateData() {\n\n    _.forEach(this.data.activeRooms, (room) => {\n      room.unreadCountTemp = 0;\n      room.isUpdatingUnreadCount = true;\n    });\n    this.set('activeRooms', this.data.activeRooms);\n  }\n\n  _resetPendingReadstateData() {\n\n    _.forEach(this.data.activeRooms, (room) => {\n      room.unreadCountTemp = room.unreadCount;\n      room.isUpdatingUnreadCount = false;\n    });\n    this.set('activeRooms', this.data.activeRooms);\n  }\n\n  handleChatsAbsentFromReadState(rooms) {\n    for (var jid in this.data.activeRooms) {\n      let chat = this.data.activeRooms[jid];\n\n      if (chat && utils.jid.is_chat(jid) && rooms.indexOf(jid) === -1) {\n        logger.debug('[ReadState] Adding active room:', jid);\n        this.getLastMessageForChat(chat);\n      }\n    }\n  }\n\n  getLastMessageForChat(chat) {\n    var jid = chat.jid,\n        type = utils.jid.is_private_chat(jid) ? 'user' : 'room',\n        id = utils.jid.is_private_chat(jid) ? utils.jid.user_id(jid) : chat.id,\n        data = {\n          jid: jid,\n          path: {\n            type: type,\n            identifier: id\n          }\n        };\n\n    if (id) {\n      AppDispatcher.dispatch('API:fetch-last-message', data, this.addChatToReadState.bind(this));\n    } else {\n      this._updateReadState({ jid: data.jid });\n    }\n  }\n\n  getLastClosedChat() {\n    this.local.closedChats = _.filter(this.local.closedChats, (jid) => utils.jid.is_room(jid) ? jid in this.data.allRooms : jid in this.data.roster);\n    return this.local.closedChats.shift();\n  }\n\n  addChatToReadState(data) {\n    var msg = _.get(data, 'items[0]', {}),\n        ts = utils.getTimestampFromIsoDate(msg.date),\n        chat = this.data.activeRooms[data.jid];\n\n    chat.most_recent_message = {\n      mid: msg.id,\n      timestamp: ts\n    };\n    chat.last_read_message = {...chat.most_recent_message};\n    this.set('activeRooms', this.data.activeRooms);\n\n    this._updateReadState({\n      jid: data.jid,\n      mid: msg.id,\n      timestamp: ts\n    });\n  }\n\n  resetReadStateCounts(chats) {\n    logger.log('[ReadState] Marking chats as read', chats.map(chat => chat.jid));\n\n    _.forEach(chats, (chat) => {\n      if (chat.unreadCount) {\n        this._clearUnreadCountForChat(chat.jid);\n        this.getLastMessageForChat(chat);\n      }\n    });\n  }\n\n  /**\n   * Gets the info for the room that is named after this group instance\n   *\n   * @returns {Object} roomInfo the room info object\n   * @returns {String} roomInfo.jid the jid of the room\n   * @returns {Object} roomInfo.room the room object if this room exists, or undefined if not\n   */\n  getGroupInstanceRoomInfo() {\n    var conf = this.data.conference_server,\n        groupName = this.data.group_name,\n        groupId = this.data.group_id,\n        jid = utils.jid.build_group_jid(groupName, groupId, conf);\n\n    return {\n      jid: jid,\n      room: this.data.allRooms[jid]\n    };\n\n  }\n\n  onBoardNewUser(activeSize) {\n    // Fixes a bug for GROW-1687\n    // we may consider removing when that experiment is complete\n    var groupInstanceRoomInfo = this.getGroupInstanceRoomInfo(),\n        room = groupInstanceRoomInfo.room;\n\n    if (room && room.privacy === \"public\") {\n      if (activeSize === 0) {\n        AppDispatcher.dispatch(\"set-route\", {\n          jid: groupInstanceRoomInfo.jid\n        });\n      }\n    } else {\n      AppDispatcher.dispatch(\"set-route\", {\n        jid: 'lobby'\n      });\n    }\n  }\n\n  addChangeHandlers() {\n    _.map(this.data, (obj, key) => {\n      this.on('change:' + key, (changeset) => {\n        AppDispatcher.dispatch('updated:' + key, changeset);\n      });\n    });\n  }\n\n  handleOpenRoom(data) {\n    var jid = utils.jid.bare_jid(data.jid || data.from);\n\n    if (utils.jid.is_private_chat(jid)) {\n      this.joinPrivateChat(jid, utils.jid.user_id(jid));\n      return;\n    }\n\n    var room = utils.fetch(this.data.allRooms[jid], {}),\n        dontSelectRoom = _.get(data, \"dontSelectRoom\", false);\n\n    room = _.assign({}, this.getRoomDefaults(), room, {\n      presence: _.cloneDeep(this.getRoomDefaults().presence),\n      type: 'groupchat',\n      jid: jid\n    });\n    this.data.activeRooms[jid] = room;\n\n    // If the room is opening as the result of an invite, fetch the\n    // latest message from the API in order to start tracking readstate\n    if (dontSelectRoom || room.jid !== this.data.active_chat) {\n      this.getLastMessageForChat(room);\n    }\n\n    this.set({\n      activeRooms: this.data.activeRooms,\n      active_chat: dontSelectRoom ? this.data.active_chat : jid\n    });\n\n    this._clearUnreadCountForChat(jid);\n  }\n\n  handleJoinRoom({ room: roomName }) {\n\n    let canBeUser = !roomName.indexOf('@');\n\n    if (!roomName || roomName === \"@\"){\n      return;\n    }\n\n    let chats;\n\n    if (canBeUser){\n      let mention = roomName.substr(1);\n      chats = _.filter(this.data.roster, (user) => {\n        return user.mention_name && user.mention_name === mention;\n      });\n    }\n\n    if (_.isEmpty(chats)){\n      let roomNameLowerCase = roomName.toLowerCase();\n      chats = _.filter(this.data.allRooms, (room) => {\n        return room.name && room.name.toLowerCase() === roomNameLowerCase;\n      });\n      if (chats.length > 1) {\n        chats = _.filter(chats, (room) => {\n          return room.name && room.name === roomName;\n        });\n      }\n    }\n\n    let chat = _.head(chats);\n\n    if (chat) {\n      if (chat.jid !== this.data.active_chat) {\n        AppDispatcher.dispatch('set-route', { jid: chat.jid });\n      }\n    } else {\n      AppDispatcher.dispatch('show-flag', {\n        type: \"warning\",\n        close: \"auto\",\n\n        body: `${(canBeUser) ? \"User\" : \"Room\"} \"${roomName}\" not found.`\n      });\n    }\n  }\n\n  /**\n   * We limit room presences to a minimal number initally and only consider the\n   * participants list \"fully initialized\" in one of these cases:\n   *\n   * - All participants have been received.\n   * - The HC server doesn't support participant limiting.\n   * - Current user is a guest.\n   * - Chat type is a 1-1\n   *\n   * This is for the purpose of mitigating a flood of room presences on initial\n   * join of a room with many occupants.\n   */\n  initializeRoomParticipants(roomJid) {\n    let room = this.data.activeRooms[roomJid];\n    let includeOffline = utils.jid.is_private_room(room.privacy);\n\n    if (room.participants_fully_initialized) {\n      return;\n    }\n\n    if (!room.roster_size || room.roster_size <= AppConfig.initial_room_participants_limit) {\n      this.setRoomParticipantsFullyInitialized(room);\n    } else {\n      if (this.data.active_chat === roomJid) {\n        this.debouncedFetchRoomParticipantsFromAPI(room, includeOffline);\n      }\n    }\n  }\n\n  handleJoinedRooms(rooms) {\n    utils.toArray(rooms).forEach((room) => {\n      let activeRoom = this.data.activeRooms[room.jid];\n\n      if (activeRoom) {\n        activeRoom.show_join_leave_messages = true;\n        activeRoom.roster_size = room.roster_size || 0;\n        activeRoom.topic = room.topic;\n        this.initializeRoomParticipants(room.jid);\n      }\n    });\n  }\n\n  handleOfflineChatsChanges(newJids, activeJids, lastSavedJids, activeChat){\n    let modifiedOnOtherDevices = _.xor(lastSavedJids, newJids);\n    let [closedOnOtherDevices, openedOnOtherDevices] = _.partition(modifiedOnOtherDevices, (jid) => {\n      return _.includes(lastSavedJids, jid);\n    });\n\n    let modifiedOffline = _.xor(lastSavedJids, activeJids);\n    let [closedOffline, openedOffline] = _.partition(modifiedOffline, (jid) => {\n      return _.includes(lastSavedJids, jid);\n    });\n\n    let opened = _.union(openedOnOtherDevices, openedOffline);\n    let closed = _.union(closedOnOtherDevices, closedOffline);\n\n    logger.type('application-store:handle-offline-chats-changes').log({ opened, closed });\n\n    // There is no need to close rooms of guest user because he/she has only one active room\n    if (!ConfigStore.isGuest()) {\n      this._closeRooms(closed);\n    }\n\n    this._openRooms(opened, activeChat);\n  }\n\n  /**\n   * Dispatches closing room event for all rooms defined in collection sent via parameter\n   * @param closed\n   * @private\n   */\n  _closeRooms(rooms) {\n    _.each(rooms, (jid) => {\n      AppDispatcher.dispatch('close-room', {\n        jid: jid,\n        type: utils.room.detect_chat_type(jid)\n      });\n    });\n  }\n\n  /**\n   * Dispatches opening room event for all rooms defined in collection sent via parameter\n   * @param opened\n   * @private\n   */\n  _openRooms(rooms, activeChat) {\n    _.each(rooms, (jid) => {\n      AppDispatcher.dispatch('open-room', {\n        jid: jid,\n        dontSelectRoom: true\n      });\n      AppActions.restoreRoomOrder(jid);\n      if (jid === activeChat) {\n        AppActions.navigateToChat(jid);\n      }\n      if (utils.jid.is_private_chat(jid)) {\n        AppDispatcher.dispatch('request-profile', jid);\n      }\n    });\n  }\n\n  handleHCInit(data, isReconnect = false) {\n    var uid,\n        roomsArr = utils.toArray(_.uniq(_.cloneDeep(PreferencesStore.getAutoJoinRooms()))),\n        rooms = {},\n        roster = {};\n\n    let autoJoin = _.get(data, ['preferences', 'autoJoin'], false),\n        isFirstLogin = autoJoin && autoJoin.length < 2 && this._isFirstLogin(data.preferences),\n        chatToFocus = isFirstLogin ? _.get(data, 'preferences.chatToFocus') : PreferencesStore.getChatToFocus(),\n        newJids = _.map(roomsArr, 'jid'),\n        activeJids = _.keys(this.data.activeRooms),\n        newAndActiveJids = newJids.concat(activeJids),\n        oldActiveChat = this.data.active_chat;\n\n    logger.type('application-store:handle-hc-init').log('isFirstLogin:', isFirstLogin);\n    logger.type('application-store:handle-hc-init').log('chatToFocus:', chatToFocus);\n\n    if (!isFirstLogin || data.is_guest) {\n      if (this.local.shouldReconcileAutoJoin) {\n        this.local.shouldReconcileAutoJoin = false;\n        logger.type('application-store:handle-hc-init').log('autoJoin reconciling started.');\n        let lastSavedJids = _.map(this.local.lastSavedAutoJoin, 'jid');\n        if (this.data.config.auth_method !== 'nonce') {\n          AppDispatcher.registerOnce('after:configuration-change', () => {\n            this.handleOfflineChatsChanges(newJids, activeJids, lastSavedJids, oldActiveChat);\n          });\n        } else {\n          AppDispatcher.registerOnce('strophe-reconnected', () => {\n            this.handleOfflineChatsChanges(newJids, activeJids, lastSavedJids, oldActiveChat);\n          });\n        }\n      } else {\n        logger.type('application-store:handle-hc-init').log('autoJoin reconciling skipped.');\n      }\n\n      _.forEach(roomsArr, (room) => {\n        room.type = utils.jid.is_room(room.jid) ? 'groupchat' : 'chat';\n        if (room.type === 'chat') {\n          room.participants_fully_initialized = true;\n          uid = utils.jid.user_id(room.jid);\n          room.id = uid;\n          if (!_.includes(this.local.participants, uid)) {\n            this.local.participants.push(uid);\n          }\n          if (!_.includes(this.local.profile_jids, room.jid)) {\n            this.local.profile_jids.push(room.jid);\n          }\n        }\n        if (data.is_guest) {\n          room.participants_fully_initialized = true;\n        }\n\n        let local_active_room = _.get(this.data, `activeRooms['${room.jid}']`, {});\n        let local_room = _.get(this.data, `allRooms['${room.jid}']`, {});\n\n        // not all clients save autoJoin list with names\n        if (!room.name){\n          room.name = local_active_room.name || local_room.name;\n          logger.warn(`Room name isn't defined in the autoJoin list. Room jid: ${room.jid}`);\n        }\n\n        rooms[room.jid] = _.merge(\n          this.getRoomDefaults(),\n          _.omit(local_active_room, ['name']),\n          room\n        );\n      });\n    }\n\n    var current_user = _.pick(data, [\n      'user_jid',\n      'jid',\n      'user_id',\n      'user_name',\n      'mention',\n      'title',\n      'photo_large',\n      'photo_small',\n      'email',\n      'is_admin',\n      'is_guest',\n      'guest_key',\n      'presence',\n      'user_created_utc'\n      ]);\n    current_user.user_jid = current_user.user_jid || current_user.jid;\n    current_user.is_guest = current_user.is_guest ? true : false;\n\n    if (PreferencesStore.getAutoJoinRooms() !== undefined){\n      if (current_user.is_guest) {\n        this.data.active_chat = data.room_jid;\n        this.local.active_type = 'groupchat';\n      } else if (isFirstLogin || !chatToFocus || newAndActiveJids.length && newAndActiveJids.indexOf(chatToFocus) === -1) {\n        this.data.active_chat = 'lobby';\n      } else {\n        this.data.active_chat = chatToFocus;\n        this.local.active_type = /@chat/.test(chatToFocus) ? 'chat' : 'groupchat';\n      }\n    }\n\n    if (utils.jid.is_private_chat(this.data.active_chat)){\n      AppDispatcher.dispatch('request-profile', this.data.active_chat);\n    }\n\n    if (utils.jid.is_chat(this.data.active_chat) && _.isEmpty(rooms)) {\n      rooms[this.data.active_chat] = _.merge(\n        this.getRoomDefaults(),\n        {\n          jid: this.data.active_chat,\n          type: utils.jid.is_room(this.data.active_chat) ? 'groupchat' : 'chat'\n        },\n        this.data.allRooms[this.data.active_chat]\n      );\n      PreferencesStore.setAutoJoinRooms([{\n        jid: rooms[this.data.active_chat].jid,\n        name: rooms[this.data.active_chat].name\n      }]);\n    }\n\n    this.set('ignoreAddIntegrationsGlance', _.get(data, 'preferences.ignoreAddIntegrationsGlance'));\n\n    if (!isReconnect){\n      roster[current_user.user_jid] = _.assign(this.getRosterDefaults(), {presence: {show: 'chat', status: ''}});\n      if (current_user.is_guest){\n        roster[data.user_jid]['mention_name'] = current_user.mention;\n      }\n      if (rooms[current_user.user_jid]) {\n        rooms[current_user.user_jid].presence = current_user.presence = {\n          show: 'chat',\n          status: ''\n        };\n      }\n    }\n\n    let meDefaultMentions = _.reduce(AppConfig.core_mentions, (acc, core_mention) => {\n      if (!core_mention.isUser) {\n        acc = [].concat(acc, core_mention.mention_name);\n      }\n      return acc;\n    }, []);\n\n    let meDefaultMentionsRegex = meDefaultMentions ? '|' + meDefaultMentions.join('|') + '|' : '';\n    this.data.mentionRegexMe = new RegExp('(?=[^\\\\w]|^)@(' + data.mention + meDefaultMentionsRegex + '\"' + data.user_name + '\")(?=[^\\\\w]|$)', \"ig\");\n    this.data.mentionRegexJustMe = new RegExp('(?=[^\\\\w]|^)@(' + data.mention + \"|\" + '\"' + data.user_name + '\")(?=[^\\\\w]|$)', \"ig\");\n\n    this.data.activeRooms = rooms;\n    _.merge(this.data, {\n      current_user: current_user,\n      roster: roster,\n      smileys: utils.emoticons.addSmileys(data.emoticons || [])\n    });\n\n    var features = data.features || this.data.features;\n\n    this.setActiveGuestUserRegex();\n\n    let dataForUpdate = {\n      current_user: this.data.current_user,\n      activeRooms: this.data.activeRooms,\n      roster: this.data.roster,\n      smileys: this.data.smileys,\n      chat_server: data.chat_server,\n      conference_server: data.conference_server,\n      api_host: data.api_host,\n      web_server: data.web_server,\n      group_name: data.group_name,\n      group_id: data.group_id,\n      features: features,\n      permissions: data.perms || {}\n    };\n\n    if (this.data.active_chat){\n      if (!this.data.activeRooms[this.data.active_chat]) {\n        this.data.active_chat = 'lobby';\n      }\n      dataForUpdate.active_chat = this.data.active_chat;\n    }\n\n    this.set(dataForUpdate);\n    if (!this.local.initialized){\n      this.local.lastSavedAutoJoin = roomsArr;\n    }\n    this.local.initialized = true;\n    this.updatePresenceProcessor();\n  }\n\n  /*\n   * Populate what we know about the autoJoin rooms from the startup IQ\n   * into the allRooms & activeRooms lists. This way, everything on screen\n   * is sufficiently populated when the preloader drops. See HC-29452\n   */\n  handleStartupIQAutoJoin(autoJoin) {\n    autoJoin.forEach((item) => {\n      if (utils.jid.is_room(item.jid)) {\n\n        let owner = utils.jid.user_id(_.get(item, 'x.owner', null));\n        let room = _.merge(\n          this.getRoomDefaults(),\n          this.data.allRooms[item.jid],\n          this.data.activeRooms[item.jid],\n          item.x,\n          {\n            jid: item.jid,\n            type: 'groupchat',\n            owner\n          }\n        );\n\n        if (!_.includes(room.admins, owner)) {\n          room.admins.push(owner);\n        }\n\n        this.data.allRooms[item.jid] = _.cloneDeep(room);\n        this.data.activeRooms[item.jid] = _.cloneDeep(room);\n      }\n    });\n  }\n\n  handleServerData(data) {\n    _.map(this.server_data_callbacks, (cb, evt) => {\n      var thisData = data[evt];\n      if (thisData) {\n        cb(thisData, this, data.cached);\n      }\n    });\n  }\n\n  unsubscribeFromStanzas(type) {\n    utils.toArray(type).forEach((stanza) => {\n      this.server_data_callbacks[stanza] = (stz) => {\n        _.noop(stz);\n      };\n    });\n  }\n\n  handleIQ(iq, store, fromCache) {\n    store.iqProcessor.handleIQ.apply(store.iqProcessor, arguments);\n  }\n\n  handleInviteMessage(message) {\n    var fromRoom = utils.jid.bare_jid(message.from),\n        invite = _.get(message, 'x[0].invite', {}),\n        reason = invite.reason || '',\n        fromUser = invite.from || '',\n        user_jid = utils.jid.bare_jid(fromUser),\n        room = _.omit(_.get(message, 'x[1]'), 'xmlns'),\n        roomName = room.name || '';\n\n    if (!this.data.allRooms[fromRoom]) {\n      this.data.allRooms[fromRoom] = _.assign(this.getRoomDefaults(), { jid: fromRoom }, room);\n    }\n\n    var inviteFromName = _.get(this.data, `roster[\"${user_jid}\"].name`, '');\n    if (utils.jid.is_room(fromUser)) {\n      inviteFromName = utils.jid.resource(fromUser);\n    }\n\n    AppDispatcher.dispatch('open-room', {\n      jid: fromRoom,\n      dontSelectRoom: true\n    });\n\n    AppDispatcher.dispatch('show-modal-dialog', {\n      dialog_type: 'room-invite-dialog',\n      dialog_data: {\n        bgDismiss: false,\n        room_name: roomName,\n        room_jid: fromRoom,\n        from_user: inviteFromName,\n        should_queue: true,\n        reason: reason\n      }\n    });\n\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.invite.room\",\n      properties: {\n        isFromDory: (inviteFromName === 'HipChat')\n      }\n    });\n  }\n\n  handleRoomInviteAccepted(jid) {\n    if (this.data.allRooms[jid]) {\n      this.handleNewRoom(this.data.allRooms[jid]);\n      AppDispatcher.dispatch('set-route', {jid: jid});\n    }\n  }\n\n  handlePrivateChatInvite(message) {\n    var jid, uid;\n    if (message.from === this.data.current_user.user_jid) {\n      jid = utils.jid.bare_jid(message.to);\n    } else {\n      jid = utils.jid.bare_jid(message.from);\n    }\n    uid = utils.jid.user_id(jid);\n    this.joinPrivateChat(jid, uid);\n  }\n\n  handlePresence(presences, store) {\n    store.presenceProcessor.handlePresence(presences);\n  }\n\n  handleMissedCall(msg) {\n    this.handleIncomingMessages(msg, this);\n  }\n\n  handleCallDeclined(msg) {\n    this.handleIncomingMessages(msg, this);\n  }\n\n  handleIncomingMessages(messages, store) {\n    store.set({\n      rawMessages: messages\n    });\n    var messagesObj = store.messageProcessor.processMessages(messages);\n    messagesObj = _.groupBy(messagesObj, 'room');\n    store.set({\n      newMessages: messagesObj\n    });\n    store._handleNewMessageUpdate(messagesObj);\n  }\n\n  handleSendMessage(data) {\n    let activeChat = utils.jid.is_chat(data.jid) ? this.data.activeRooms[data.jid] : null,\n        currentTime = Date.now() / 1000;\n    if (activeChat){\n      // user's local time is incorrect\n      if (_.get(activeChat, 'most_recent_message.timestamp', 0) > currentTime){\n        data.time = activeChat.most_recent_message.timestamp + 1;\n      } else {\n        data.time = currentTime;\n      }\n      let msg = this.messageProcessor.processSentMessage(data);\n      this.local.user_state = 'active';\n      this.local.sent_msg_ids.push(data.id.toString());\n      this.set({\n        newMessages: _.groupBy(msg, 'room')\n      });\n    }\n  }\n\n  _handleNewMessageUpdate(messageData) {\n    var activeChat = utils.jid.is_chat(this.data.active_chat) ? this.data.activeRooms[this.data.active_chat] : null,\n        hasChanges = false;\n\n    _.forEach(messageData, (messages, jid) => {\n      _.forEach(this.data.activeRooms, (chat) => {\n        if (chat.jid !== jid){ return; }\n\n        _.forEach(messages, (msg) => {\n          this._updateMostRecentMessage(chat, msg);\n          if (msg.is_echo) {\n            this._updateReadStateForChat(chat);\n          } else if (this._msgIsTopicChange(msg)) {\n            return;\n          }\n          hasChanges = true;\n\n          if (this._msgShouldNotUpdateBadge(msg)){ return; }\n\n          if (chat && !msg.is_history_message && msg.type !== 'user_state') {\n            ++chat.unreadCount;\n            ++chat.unreadCountTemp;\n\n            if (utils.isFormattedMessage(msg)){\n              return;\n            }\n\n            if (this._shouldUpdateMentionFromCard(this.data.mentionRegexMe, msg) || (msg.body && msg.body.search(this.data.mentionRegexMe) !== -1 || utils.jid.is_private_chat(chat.jid))) {\n              chat.hasMention = true;\n              ++chat.unreadMentionCount;\n              if (this._shouldUpdateMentionFromCard(this.data.mentionRegexJustMe, msg) || (msg.body && msg.body.search(this.data.mentionRegexJustMe) !== -1)) {\n                ++chat.unreadMentionJustMeCount;\n              }\n              return;\n            }\n          }\n        });\n      });\n    });\n\n    if (activeChat && this._msgShouldUpdateReadState(activeChat.most_recent_message)) {\n      this._updateReadStateForActiveChat();\n      hasChanges = true;\n    }\n\n    if (hasChanges) {\n      this.set('activeRooms', this.data.activeRooms);\n      this._updateTotalUnreadCount();\n    }\n  }\n\n  _shouldUpdateMentionFromCard(regex, msg) {\n    return _.has(msg, 'card.activity.html')\n        && msg.card.activity.html.indexOf(\"hc-mention-user\") !== -1\n        && regex.test(msg.card.activity.html);\n  }\n\n  _updateMostRecentMessage(chat, msg) {\n    var most_recent = chat.most_recent_message || {};\n\n    if (msg.is_presence_message || !utils.validateMID(msg.mid)) {\n      return;\n    }\n\n    if (!most_recent.timestamp || msg.time > most_recent.timestamp) {\n      chat.most_recent_message = {\n        mid: msg.mid,\n        timestamp: msg.time\n      };\n    }\n  }\n\n  _msgShouldUpdateReadState(msg) {\n    var user_jid = this.data.current_user.user_jid,\n        user = this.data.roster[user_jid],\n        user_presence = user ? user.presence : null;\n\n    var isAppFocused = this.local.windowFocused,\n        isChat = utils.jid.is_chat(this.data.active_chat),\n        isSender = msg ? user_jid === msg.sender : false,\n        isAvailable = user_presence && user_presence.show !== Presence.IDLE;\n\n    return (isAppFocused && isChat && (isSender || isAvailable));\n  }\n\n  _msgIsTopicChange(msg) {\n    // if subject prop exists this is a room topic change\n    return !!msg.subject;\n  }\n\n  _updateReadStateForActiveChat() {\n    var ac = this.data.active_chat;\n    if (ac && utils.jid.is_chat(ac) && this.data.activeRooms[ac]) {\n      this._updateReadStateForChat(this.data.activeRooms[ac]);\n    }\n  }\n\n  _updateReadStateForChat(chat) {\n    var most_recent = chat.most_recent_message,\n        last_read = chat.last_read_message,\n        data = {\n          jid: chat.jid\n        };\n\n    // if we have both a most_recent_message and a last_read_message, and the timestamp\n    //   of the last_read_message is newer, there's nothing to do.\n    if (most_recent && last_read && most_recent.timestamp <= last_read.timestamp) {\n      return;\n    }\n\n    // if we don't have a most_recent_message and a last_read_message, the chat is empty\n    //   but we need to inform the readstate endpoint to start tracking unread messages.\n    if (!most_recent && !last_read) {\n      chat.last_read_message = {};\n      this._updateReadState(data);\n      return;\n    }\n\n    // if we don't have a most_recent_message but the last_read_message is truthy, we've\n    //   already opened this chat before, so there's nothing to do.\n    if (!most_recent && last_read) {\n      return;\n    }\n\n    // if we have a newer most_recent_message, we need to update readstate\n    //   with the newer message\n    chat.last_read_message = {...most_recent};\n    data.mid = most_recent.mid;\n    data.timestamp = most_recent.timestamp;\n\n    this._updateReadState(data);\n  }\n\n  _updateReadState(data) {\n    if (data && utils.jid.is_chat(data.jid)) {\n      AppDispatcher.dispatch('DAL:update-readstate', data);\n    }\n  }\n\n  _removeReadState(jid) {\n    if (utils.jid.is_chat(jid)) {\n      AppDispatcher.dispatch('DAL:remove-readstate', { jid });\n    }\n  }\n\n  _clearUnreadCountForChat(jid){\n    var result = this._clearUnreadCount(jid);\n\n    if (result){\n      this.set('activeRooms', this.data.activeRooms);\n      this._updateTotalUnreadCount();\n    }\n  }\n\n  _clearUnreadCount(jid){\n    if (!utils.jid.is_chat(jid)){\n      return false;\n    }\n\n    var chat = this.data.activeRooms[jid],\n        room = this.data.allRooms[jid];\n\n    if (chat){\n      let defaults = _.pick(this.getRoomDefaults(), 'unreadCount', 'unreadCountTemp', 'unreadMentionCount', 'unreadMentionJustMeCount', 'hasMention'),\n          exists = _.pick(chat, 'unreadCount', 'unreadCountTemp', 'unreadMentionCount', 'unreadMentionJustMeCount', 'hasMention');\n\n      if (!_.isEqual(exists, defaults)){\n        this.data.activeRooms[jid] = _.assign({}, chat, defaults);\n        if (room && utils.jid.is_room(jid)) {\n          this.data.allRooms[jid] = _.assign({}, room, defaults);\n        }\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  _updateTotalUnreadCount() {\n    let {notifyForRoom,\n      notifyForPrivateRoom,\n      notifyForPrivate,\n      notifyForTag,\n      roomNotificationOverrides = {}} = PreferencesStore.getAll();\n\n    let perRoomNotificationsEnabled = _.get(this.data.config, 'feature_flags.web_client_per_room_notifications', false);\n    let globalNotificationLevel = PreferencesStore.getGlobalNotificationSetting();\n\n    let hasMention = false;\n    let unreadTotal = _.reduce(this.data.activeRooms, function(sum, chat) {\n      let isPrivateChat = utils.jid.is_private_chat(chat.jid);\n\n      if (isPrivateChat) {\n        if (chat.unreadCount) {\n          hasMention = true;\n        }\n\n        if (notifyForPrivate) {\n          return sum + chat.unreadCount;\n        }\n\n      } else { //it's groupchat\n        if (chat.hasMention) {\n          hasMention = true;\n        }\n\n        // check using new per-room notification settings\n        if (perRoomNotificationsEnabled) {\n          // check if there is notification level for room or use global level as default\n          let notificationLevel = _.get(roomNotificationOverrides[chat.jid], 'level', globalNotificationLevel);\n\n          switch (notificationLevel) {\n            case \"quiet\":\n              return sum + chat.unreadMentionJustMeCount;\n            case \"normal\":\n              return sum + chat.unreadMentionCount;\n            case \"loud\":\n            default:\n              return sum + chat.unreadCount;\n          }\n        }\n\n        // check using old notification settings\n        if (utils.jid.is_public_room(chat.privacy)) {\n          if (notifyForRoom) {\n            return sum + chat.unreadCount;\n          } else if (notifyForTag) {\n            return sum + chat.unreadMentionCount;\n          }\n        } else if (utils.jid.is_private_room(chat.privacy)) {\n          if (notifyForPrivateRoom) {\n            return sum + chat.unreadCount;\n          } else if (notifyForTag) {\n            return sum + chat.unreadMentionCount;\n          }\n        }\n      }\n\n      return sum;\n    }, 0);\n\n    AppActions.updateTotalUnreadCount(unreadTotal, hasMention);\n  }\n\n  _msgShouldNotUpdateBadge(msg) {\n    var xData = (_.isArray(msg.x) && msg.x.length) ? msg.x[0] : false,\n        doNotNotify = (_.get(xData, \"notify\") === \"0\");\n\n    return (doNotNotify || msg.delay || (msg.room === this.data.active_chat && this.local.windowFocused) || msg.sender === this.data.current_user.user_name);\n  }\n\n  /*\n   * Only react to chatstate messages when they are sent from ourself.\n   * This happens when:\n   * 1. We're opening/closing a private chat with ourself\n   *   (message.from will be our jid)\n   * 2. We've joined/left a private chat in another open client\n   *   (message.delay.from_jid will exist, and be our jid)\n   */\n  handleChatStateMessage(data) {\n    var jid = utils.jid.bare_jid(_.get(data, 'message.from')),\n        chat = this.data.activeRooms[jid],\n        sender = utils.jid.bare_jid(_.get(data, 'message.delay.from_jid', jid)),\n        uid = utils.jid.user_id(jid);\n    if (this.data.current_user.user_jid === sender && utils.jid.is_private_chat(jid)) {\n      if (!chat && data.type === 'active') {\n        this.joinPrivateChat(jid, uid);\n      } else if (chat && data.type === 'gone') {\n        this.handleCloseRoom(jid);\n      }\n    }\n  }\n\n  handleConnectionSuccess(connection, store) {}\n\n  handleEmoticons(query, type) {\n    let items = query.item ? utils.toArray(query.item) : [],\n        emoticons = type === 'result' ? {} : _.cloneDeep(this.data.emoticons.icons);\n\n    emoticons = utils.emoticons.addBulk(items, emoticons);\n\n    if (query.path_prefix && utils.emoticons.path_prefix !== query.path_prefix) {\n      utils.emoticons.path_prefix = query.path_prefix;\n    }\n\n    let oldEmoticons = _.keys(this.data.emoticons.icons).sort(),\n        newEmoticons = _.keys(emoticons).sort(),\n        hasChanges = !_.isEqual(oldEmoticons, newEmoticons);\n\n    if (hasChanges) {\n      this.set({\n        emoticons: {\n          path_prefix: query.path_prefix,\n          icons: emoticons\n        }\n      });\n    }\n\n    if (this.local.emoticons_initialized){\n      if (hasChanges) {\n        this._replaceEmoticonsIfRequired();\n      }\n    } else {\n      this.local.emoticons_initialized = true;\n    }\n  }\n\n  _replaceEmoticonsIfRequired() {\n    if (PreferencesStore.shouldReplaceTextEmoticons() && this.data.rawMessages) {\n      this.handleIncomingMessages(this.data.rawMessages, this);\n    }\n  }\n\n  handleRoster(roster) {\n    // roster being object means that this event is that user joined to group and now roster is it's object\n    var newUser = null;\n    if (_.isPlainObject(roster)) {\n      newUser = roster;\n    }\n    let updatedRoster = [],\n        verifyOTOChats = false;\n    utils.toArray(roster)\n      .filter(val => !!val)\n      .forEach(user => {\n        let id = _.get(user, \"id\"),\n            jid = _.get(user, \"jid\");\n        if (_.get(user, \"subscription\") === \"remove\" && (jid || id)) {\n          // Handle Deleted User\n          let deleted_user = _.get(this.data, `roster['${jid}']`) || _.find(this.data.roster, { id });\n          if (deleted_user) {\n            deleted_user.deleted = true;\n          }\n          jid = jid || deleted_user.jid;\n          AppDispatcher.dispatch('room-deleted', {\n            jid\n          });\n          verifyOTOChats = true;\n        } else {\n          user.display_name = user.name;\n          user.id = user.id ? user.id : utils.jid.user_id(user.jid);\n          updatedRoster.push(user);\n        }\n      });\n    this.data.roster = _.omitBy(this.data.roster, (item) => {\n      return item.deleted;\n    });\n    let rosterObj = _.keyBy(updatedRoster, (user) => {\n      if (!this.data.roster[user.jid]) {\n        _.assign(user, (user.jid === this.data.current_user.user_jid ? {presence: {show: 'chat', status: ''}} : this.getRosterDefaults()));\n      }\n      return user.jid;\n    });\n\n    let oldRosterSize = _.size(this.data.roster),\n        newRosterData = _.merge(this.data.roster, rosterObj),\n        newRosterDataSize = _.size(newRosterData);\n\n    this.set('roster', newRosterData);\n\n    let userJoinedNotificationEnabled = _.get(this.data.config, 'feature_flags.web_client_user_joined_notification', false);\n\n    if (userJoinedNotificationEnabled &&\n        newUser &&\n        newRosterDataSize > oldRosterSize &&\n        newRosterDataSize <= AppConfig.max_users_in_group_join_notification) {\n\n      var flagId = `user-joined-flag-${utils.now()}`;\n      FlagActions.showFlag({\n        id: flagId,\n        type: \"success\",\n        body: this._flagBodyForUserJoinedEvent(newUser.jid, newUser.display_name, flagId),\n        close: \"manual\"\n      });\n    }\n\n    this.updateMentionNames();\n    this.updateRosterNames();\n    if (verifyOTOChats) {\n      this.verifyOTOChats();\n    }\n\n    this._handleWelcomeRange(_.toArray(newRosterData).length);\n  }\n\n  _setRouteToUser(jid, flagId) {\n    return (e) => {\n      e.preventDefault();\n      AppDispatcher.dispatch(\"set-route\", { jid });\n      FlagActions.removeFlag(flagId);\n    };\n  }\n\n  _flagBodyForUserJoinedEvent(jid, displayName, flagId) {\n    return () => (\n      <div>\n        <b dangerouslySetInnerHTML={{__html: DialogStrings.user_joined(displayName)}}/>\n        <span> </span>\n        <a href=\"#\" onClick={this._setRouteToUser(jid, flagId)}>{DialogStrings.user_joined_link}</a>\n      </div>\n    );\n  }\n\n  updateMentionNames(){\n    let isGuest = this.data.current_user.is_guest;\n    let mentionNames = _.map(this.data.roster, (user) => {\n      // Skip Guest Users (they do not have a subscription)\n      if (('subscription' in user) && !isGuest ||\n          // highlight users mentions in the guest mode\n          !/Guest$/.test(user.mention_name) && isGuest) {\n        return user.mention_name;\n      }\n    });\n\n    mentionNames = _.reject(mentionNames, _.isEmpty);\n\n    let index = mentionNames.indexOf(this.data.current_user.mention);\n    if (index !== -1){\n      mentionNames.splice(index, 1);\n    }\n    let userMentions = _.filter(AppConfig.core_mentions, {isUser: true});\n    let userDefaultMentions = _.map(userMentions, 'mention_name');\n\n    var userDefaultMentionsRegex = userDefaultMentions ? userDefaultMentions.join('|') : '';\n    this.set({\n      mentionRegexUser: new RegExp('(?=[^\\\\w]|^)@(' + (mentionNames.length ? mentionNames.join('|') + '|' + userDefaultMentionsRegex : userDefaultMentionsRegex) + ')(?=[^\\\\w]|$)', 'gi')\n    });\n  }\n\n  updateGuestMentions(jid) {\n    var room = this.data.activeRooms[jid],\n        guestMentionNames,\n        guestRegex;\n    if (room && _.get(room, \"participants.guests\")) {\n      guestMentionNames = _.map(room.participants.guests, (guest_jid) => {\n        if (this.data.roster[guest_jid]) {\n          return this.data.roster[guest_jid].mention_name;\n        }\n      });\n      guestRegex = new RegExp('(?=[^\\\\w]|^)@(' + (guestMentionNames && guestMentionNames.length ? guestMentionNames.join('|') : '') + ')(?=[^\\\\w]|$)', 'gi');\n      room.guest_mention_regex = guestRegex;\n      this.set({\n        activeRooms: this.data.activeRooms\n      });\n      this.setActiveGuestUserRegex();\n    }\n  }\n\n  updateRosterNames() {\n    var name_map = _.transform(this.data.roster, function(result, user) {\n      result[user.mention_name] = user.name;\n    });\n    var mentionNames = {};\n    _.forEach(AppConfig.core_mentions, function (val) {\n      mentionNames[val.mention_name] = val.name;\n    });\n    utils.roster_names = _.merge(name_map, mentionNames);\n  }\n\n  handleProfile(iq) {\n    let jid = utils.jid.bare_jid(iq.from);\n    this.data.profiles[jid] = iq.query;\n    let rosterItem = _.get(this.data, ['roster', jid]);\n    if (rosterItem) {\n      rosterItem.name = _.get(iq, ['query', 'name']);\n    }\n    this.set('profiles', this.data.profiles);\n  }\n\n  /**\n   * @param {ChatFilesResponse} response\n   */\n  handleFileQueryResponse(response) {\n    let jid = response.jid;\n    if (this.data.activeRooms[jid]) {\n      let current = this.data.activeRooms[jid].files || [];\n      let files = _.orderBy(current.concat(response.files), 'date', 'desc');\n      let uniqFiles = _.uniqBy(files, 'url');\n      this.data.activeRooms[jid].files = _.map(uniqFiles, (file) => {\n        file.user_name = file.user_name || utils.user.get_user_name(this.data.roster, file.group_id, file.user_id);\n        file.icon_class = file.icon_class || utils.file.get_icon_class(file.name);\n        return file;\n      });\n\n      this.data.activeRooms[jid].all_files_fetched = response.end;\n      this.data.activeRooms[jid].files_fetched = true;\n      this.data.activeRooms[jid].files_fetching = false;\n      this.set('activeRooms', this.data.activeRooms);\n      AppDispatcher.dispatch('files-fetched', { jid });\n    }\n  }\n\n  /**\n   * Fired by the message processor when parsing a file out of a received\n   * message. The message could be new or from history, so need to re-sort\n   * the list after adding the link to ensure proper sent order\n   */\n  addFileFromMessageToRoom(jid, file) {\n    if (this.data.activeRooms[jid]) {\n      let files = this.data.activeRooms[jid].files || [];\n      files = [file, ...files];\n      files = _.orderBy(files, 'date', 'desc');\n      files = _.uniqBy(files, 'url');\n      this.data.activeRooms[jid].files = files;\n      this.debouncedSetActiveRooms();\n    }\n  }\n\n  /**\n   * @param {ChatLinksResponse} response\n   */\n  handleLinkQueryResponse(response) {\n    let jid = response.jid;\n    if (this.data.activeRooms[jid]) {\n      let current = this.data.activeRooms[jid].links || [];\n      let links = current.concat(response.links);\n      let sortedLinks = _.orderBy(links, 'date', 'desc');\n      let uniqLinks = _.uniqBy(sortedLinks, 'url');\n\n      this.data.activeRooms[jid].links = _.map(uniqLinks, (link) => {\n        link.user_name = link.user_name || utils.user.get_user_name(this.data.roster, link.group_id, link.user_id);\n        link.display_url = link.display_url || link.url.replace(/.*?:\\/\\//g, \"\");\n        return link;\n      });\n\n      this.data.activeRooms[jid].all_links_fetched = response.end;\n      this.data.activeRooms[jid].links_fetched = true;\n      this.data.activeRooms[jid].links_fetching = false;\n      this.set('activeRooms', this.data.activeRooms);\n      AppDispatcher.dispatch('links-fetched', { jid });\n    }\n  }\n\n  /**\n   * Fired by the message processor when scraping a link out of a received\n   * message. The message could be new or from history, so need to re-sort\n   * the list after adding the link to ensure proper sent order\n   */\n  addLinkFromMessageToRoom(jid, link) {\n    if (this.data.activeRooms[jid]) {\n      let links = this.data.activeRooms[jid].links || [];\n      let sortedLinks = _.orderBy([].concat(link, links), 'date', 'desc');\n      this.data.activeRooms[jid].links = _.uniqBy(sortedLinks, 'url');\n      this.debouncedSetActiveRooms();\n    }\n  }\n\n  joinPrivateChat(jid, uid) {\n    this.data.activeRooms[jid] = {\n      jid: jid,\n      id: uid,\n      name: _.get(this.data.roster, [jid, 'name'], 'Unknown'),\n      type: 'chat',\n      presence: _.get(this.data.roster, [jid, 'presence']) || {\n        show: '',\n        status: ''\n      },\n      files: [],\n      links: [],\n      history_fetch_ids: [],\n      unreadCount: 0,\n      unreadMentionCount: 0,\n      unreadMentionJustMeCount: 0,\n      hasMention: false\n    };\n    if (this.local.participants.indexOf(uid) === -1) {\n      this.local.participants.push(uid);\n    }\n    AppDispatcher.dispatch('request-profile', jid);\n    this.set('activeRooms', this.data.activeRooms);\n  }\n\n  handleRooms(rooms, cachedCall = false){\n    rooms = utils.toArray(rooms);\n    let deletedRoomJids = [];\n\n    var allRoomsArray = _.reduce(rooms, (roomsAccumulatedArr, room) => {\n      var roomInfo = {};\n\n      if (room) {\n        if (room.is_deleted) {\n          deletedRoomJids.push(room.jid);\n        } else if (room.id && !room.jid){\n          const inActiveRooms = _.find(_.values(this.data.activeRooms), { id: room.id }),\n                inAllRooms = _.find(_.values(this.data.allRooms), { id: room.id }),\n                filtered = inActiveRooms || inAllRooms;\n          if (filtered){\n            const { jid, name } = filtered;\n            AppDispatcher.dispatch('close-room', { jid });\n            deletedRoomJids.push(jid);\n            if (inActiveRooms){\n              AppDispatcher.dispatch('show-flag', {\n                type: \"info\",\n                body: `${ChatPanelStrings.you_have_been_removed} \"${name}\"`,\n                close: \"auto\"\n              });\n            }\n            logger.type('application-store:handle-rooms').log(`Active room was closed because user was removed from that room. jid: ${jid}`);\n          }\n        } else {\n          let activeRoom = this.data.activeRooms[room.jid] || {};\n\n          // construct room properties from room defaults, data we have\n          // already and room stanza data (which gets flattened)\n          roomInfo = _.assign({}, this.getRoomDefaults(), activeRoom, room.x, {\n            jid: room.jid,\n            name: room.name\n          });\n\n          // update room object in activeRooms collection\n          if (this.data.activeRooms[room.jid]) {\n            this.data.activeRooms[room.jid] = roomInfo;\n\n            if (utils.jid.is_room(room.jid) && !_.includes(roomInfo.admins, roomInfo.owner)) {\n              this.addRoomAdmin(room.jid, roomInfo.owner);\n            }\n          }\n\n          roomsAccumulatedArr.push(roomInfo);\n        }\n        return roomsAccumulatedArr;\n      }\n    }, []),\n\n    allRoomsObj = _.keyBy(allRoomsArray, 'jid');\n\n    // remove the deleted rooms from both of our rooms lists\n    let allRooms = _.omit(this.data.allRooms, deletedRoomJids),\n        activeRooms = _.omit(this.data.activeRooms, deletedRoomJids);\n\n    this.set({\n      allRooms: _.assign(allRooms, allRoomsObj),\n      activeRooms: activeRooms\n    });\n  }\n\n  determineRoomUpdate(room) {\n    if (room.status === 'deleted') {\n      this.handleRoomDelete(room);\n      return;\n    }\n    var is_new_room = !this.data.allRooms[room.jid];\n    if (is_new_room) {\n      this.handleNewRoom(room);\n    }\n    this.handleRoomUpdate(room);\n  }\n\n  /**\n   * Handles what to do when a new room push is received\n   *\n   * @param {object} room the room to join\n   */\n  handleNewRoom(room){\n    var room_data = this.getRoomDefaults();\n    room_data.type = utils.room.detect_chat_type(room.jid);\n    this.data.allRooms[room.jid] = _.assign(room_data, room);\n    if (!room_data.admins) {\n      room_data.admins = [];\n    }\n    room_data.admins.push(room.owner);\n    this.set({\n      allRooms: this.data.allRooms\n    });\n  }\n\n  handleRoomUpdate(room) {\n    this.data.allRooms[room.jid] = _.merge(this.data.allRooms[room.jid], room);\n    if (this.data.activeRooms[room.jid]) {\n      this.data.activeRooms[room.jid] = _.merge(this.data.activeRooms[room.jid], room);\n    }\n    this.set({\n      allRooms: this.data.allRooms,\n      activeRooms: this.data.activeRooms\n    });\n    this._updateTotalUnreadCount();\n  }\n\n  handleRoomDelete(room){\n    var deleted_room_id = (this.data.allRooms[room.jid]) ? this.data.allRooms[room.jid].id : room.id;\n    delete this.data.allRooms[room.jid];\n    if (this.data.activeRooms[room.jid]) {\n\n      /*\n       * If I took the action to delete the room, it's jid will exist in the local deletedRooms list\n       * (see registered handler for 'delete-room' up above). Therefore, don't show me the generic\n       * \"admin deleted the room\" flag since I'll already be looking at the confirmation flag.\n       */\n      if (room.jid === this.data.active_chat && !_.includes(this.local.deletedRooms, room.jid)) {\n        AppDispatcher.dispatch('show-flag', {\n          type: \"info\",\n          close: \"auto\",\n          body: '\"' + this.data.activeRooms[room.jid].name + '\" was deleted by the admin.'\n        });\n      }\n\n      AppDispatcher.dispatch('close-room', {\n        jid: room.jid,\n        doNotNotifyHC: true,\n        id: deleted_room_id\n      });\n    }\n    AppDispatcher.dispatch('room-deleted', {\n      jid: room.jid,\n      id: deleted_room_id\n    });\n    this.set({\n      allRooms: this.data.allRooms,\n      activeRooms: this.data.activeRooms\n    });\n    this._updateTotalUnreadCount();\n    _.pull(this.local.deletedRooms, room.jid);\n  }\n\n  handleCloseRoom(jid) {\n    AppDispatcher.dispatch('room-closed', {\n      jid: jid\n    });\n    delete this.data.activeRooms[jid];\n    delete this.data.newMessages[jid];\n\n    this._resetFiles(jid);\n    this._resetLinks(jid);\n\n    if (utils.jid.is_private_chat(jid) && this.data.roster[jid]){\n      this.data.roster[jid].closed_at = utils.getMoment();\n    }\n    this.set({\n      activeRooms: this.data.activeRooms,\n      roster: this.data.roster\n    });\n    this.local.closedChats = [].concat(jid, _.pull(this.local.closedChats, jid));\n    this._updateTotalUnreadCount();\n    this._removeReadState(jid);\n  }\n\n  _resetFiles(jid){\n    if (this.data.allRooms[jid]){\n      this.data.allRooms[jid].files = [];\n      this.data.allRooms[jid].all_files_fetched = false;\n      this.data.allRooms[jid].files_fetched = false;\n      this.data.allRooms[jid].files_fetching = false;\n    }\n  }\n\n  _resetLinks(jid){\n    if (this.data.allRooms[jid]){\n      this.data.allRooms[jid].links = [];\n      this.data.allRooms[jid].all_links_fetched = false;\n      this.data.allRooms[jid].links_fetched = false;\n      this.data.allRooms[jid].links_fetching = false;\n    }\n  }\n\n  addVisitor(data) {\n    var participantExistsInRoster = !!this.data.roster[data.participant];\n    var participantExistsInRoom = !!this.data.activeRooms[data.participant];\n\n    if (!participantExistsInRoster || !participantExistsInRoom) {\n      this.data.roster[data.participant] = {\n        mention_name: data.user_mention || _.get(this.data.roster[data.participant], 'mention_name'),\n        name: data.user_name,\n        jid: data.participant\n      };\n      this.addRoomParticipant({\n        room: data.room,\n        user_jid: data.participant,\n        user_id: utils.jid.user_id(data.participant),\n        role: 'visitor',\n        affiliation: ''\n      });\n\n      this.updateParticipantStatusInRoster(data);\n      this.updateGuestMentions(data.room);\n    }\n\n    this.data.roster[data.participant].presence = {\n      show: data.presence.show || 'chat',\n      status: data.presence.status\n    };\n\n    this.set('roster', this.data.roster);\n  }\n\n  updateParticipantStatusInRoster(data) {\n    let currentRoom = this.data.activeRooms[data.room];\n\n    if (currentRoom) {\n      let guests = _.get(currentRoom, 'participants.guests', []);\n\n      if (guests.some((el) => el === data.participant)) {\n        this.data.roster[data.participant].is_guest = true;\n      }\n    }\n  }\n\n  removeVisitor(data) {\n    if (this.data.roster[data.participant]) {\n      delete this.data.roster[data.participant];\n      this.set(\"roster\", this.data.roster);\n      this.updateGuestMentions(data.room);\n    }\n  }\n\n  handleRoomPresence(data) {\n    if (this.data.activeRooms[data.room]) {\n      this.addRoomParticipant(data);\n      this.updateMessagesIfGuestsConnected(data.room);\n    }\n  }\n\n  updateMessagesIfGuestsConnected(room_jid) {\n    if (!room_jid) { return; }\n    else if (!_.isEmpty(_.get(this.data.activeRooms[room_jid], `participants.guests`, []))){\n      this.messageProcessor.updateMessagesIfGuestsConnected(this.data.newMessages[room_jid]);\n      this.set('newMessages', this.data.newMessages);\n    }\n  }\n\n  handleGlobalPresence(data) {\n    var person,\n        chat;\n    _.forOwn(data, (pres, jid) => {\n      person = this.data.roster[jid];\n      chat = this.data.activeRooms[jid];\n      if (person) {\n        if (jid !== this.data.current_user.user_jid || (jid === this.data.current_user.user_jid && _.includes([\"away\", \"chat\", \"dnd\", \"xa\"], pres.show))) {\n          _.assign(person.presence, pres);\n        }\n      }\n      if (chat) {\n        _.assign(chat.presence, pres);\n      }\n    });\n    this.set({\n      activeRooms: this.data.activeRooms,\n      roster: this.data.roster\n    });\n  }\n\n  addRoomParticipantFromAPI(room, participant) {\n\n    if (utils.jid.is_public_room(room.privacy) && !participant.is_present_in_room) {\n      // The API appears to be returning users in public rooms marked as not present\n      // this should never happen for a public room.\n      return;\n    }\n\n    if (utils.room.is_guest(participant)) {\n\n      if (!this.data.roster[participant.jid]) { // if guest not in the roster add them\n        this.data.roster[participant.jid] = participant;\n        this.set('roster', this.data.roster);\n      }\n\n      if(!_.includes(room.participants.guests, participant.jid)) {\n        room.participants.guests.push(participant.jid);\n        this.updateGuestMentions(room.jid);\n      }\n\n    } else {\n\n      if (!_.includes(room.participants.members, participant.jid)) { // member\n        room.participants.members.push(participant.jid);\n      }\n\n    }\n\n    if (utils.room.is_admin(participant) && !_.includes(room.admins, participant.id)) {\n      room.admins.push(participant.id);\n    }\n\n    if (!_.includes(this.local.participants, participant.id)) {\n      this.local.participants.push(participant.id);\n    }\n  }\n\n  addRoomParticipant(data) {\n    var room = this.data.activeRooms[data.room];\n    var arr = (data.role === 'visitor' ? room.participants.guests : room.participants.members);\n    var isNotInParticipantList = arr.indexOf(data.user_jid) === -1;\n    if (isNotInParticipantList) {\n      arr.push(data.user_jid);\n\n      if (data.type === \"unavailable\" && utils.user.is_admin(room.admins, room.owner, this.data.current_user)) {\n        this.roomParticipantNotification(data, \"add\");\n      } else {\n        this.roomParticipantNotificationTimer(room, data, \"join\");\n      }\n    }\n\n    if (room.privacy === 'private') {\n      AppDispatcher.dispatch('unmark-participant', {\n        room: data.room,\n        user: data.user_jid\n      });\n    }\n\n    if ((data.affiliation === \"owner\" || data.affiliation === \"admin\") &&\n         !_.includes(room.admins, data.user_id)) {\n      this.addRoomAdmin(data.room, data.user_id);\n\n    }\n    if (this.data.current_user.is_guest && !this.data.roster[data.user_jid]) {\n      //The following block is to add a roster item from a room presence. Guests don't have the full roster,\n      //and need to add users to it piecemeal as room presences come in\n      AppDispatcher.dispatch('request-profile', data.user_jid, (resp) => {\n        if (resp.query) {\n          this.handleGuestRoomParticipants(_.merge(data, resp.query));\n          this.debouncedSetActiveRooms();\n        }\n      });\n    }\n    this.debouncedSetActiveRooms();\n    if (this.local.participants.indexOf(data.user_id) === -1) {\n      this.local.participants.push(data.user_id);\n    }\n  }\n\n  removeRoomParticipant(data) {\n    var room = this.data.activeRooms[data.room];\n    if (room) {\n      if (room.participants[data.role]) {\n\n        if (data.role === \"guests\") {\n          this.roomParticipantNotification(data, \"leave\");\n          this.removeVisitor(data);\n        } else {\n          this.roomParticipantNotificationTimer(room, data, \"leave\");\n        }\n\n        if (room.privacy === 'private' && data.role !== 'guests') {\n          AppDispatcher.dispatch('mark-participant-unknown', {\n            room: data.room,\n            user: data.participant,\n            role: data.role\n          });\n        } else {\n          _.remove(room.participants[data.role], function (i) {\n            return i === data.participant;\n          });\n        }\n      } else if (data.role === \"none\") {\n        if (utils.user.is_admin(room.admins, room.owner, this.data.current_user)) {\n          this.roomParticipantNotification(data, \"remove\");\n        }\n\n        // Remove Members\n        _.remove(room.participants.members, function (user_jid) {\n          return user_jid === data.participant;\n        });\n\n        // Remove Guests\n        _.forEach(room.participants.guests, (user_jid) => {\n          if (user_jid === data.participant) {\n            this.removeVisitor(data);\n          }\n        });\n      }\n      this.debouncedSetActiveRooms();\n    }\n  }\n\n  handleUserRemoved(data) {\n    // User Being removed from a room\n    this.removeRoomParticipant({\n      room: data.room,\n      participant: data.user_jid,\n      role: data.role\n    });\n\n    let user_id = Number(_.get(this.data.current_user, 'user_id') || _.get(this.data.current_user, 'id'));\n\n    if (this.data.allRooms[data.room]\n        && this.data.activeRooms[data.room].owner !== user_id\n        && data.user_jid === this.data.current_user.user_jid) {\n      if (this.data.activeRooms[data.room]) {\n        AppDispatcher.dispatch('show-flag', {\n          type: \"info\",\n          body: `${ChatPanelStrings.you_have_been_removed} \"${this.data.activeRooms[data.room].name}\"`,\n          close: \"auto\"\n        });\n        AppDispatcher.dispatch('close-room', {\n          jid: data.room\n        });\n      }\n      AppDispatcher.dispatch('room-deleted', {\n        jid: data.room\n      });\n      delete this.data.allRooms[data.room];\n      this.set({\n        allRooms: this.data.allRooms\n      });\n    }\n  }\n\n  roomParticipantNotificationTimer(room, data, type) {\n    if (!room.show_join_leave_messages) {\n      return;\n    }\n\n    let user = data.participant || data.user_jid,\n        key = room.jid + user;\n\n    if (type === 'join') {\n      if (this.local.presence_updates_timers[key]) {\n        clearTimeout(this.local.presence_updates_timers[key]);\n      } else {\n        this.roomParticipantNotification(data, type);\n      }\n    } else {\n      clearTimeout(this.local.presence_updates_timers[key]);\n      this.local.presence_updates_timers[key] = setTimeout(() => {\n        delete this.local.presence_updates_timers[key];\n        this.roomParticipantNotification(data, type);\n      }, AppConfig.leave_room_message_confirmation_timeout);\n    }\n  }\n\n  roomParticipantNotification(data, notificationType) {\n    var user_jid = data.participant || data.user_jid || data.jid,\n        user = this.data.roster[user_jid];\n\n    if (PreferencesStore.getHidePresenceMessages() || !user) {\n      return;\n    }\n\n    let statusMessage,\n        messages = [],\n        room = this.data.activeRooms[data.room];\n\n    if (utils.user.is_admin(room.admins, room.owner, this.data.current_user) && data.is_present_in_room) {\n      notificationType = \"join\";\n    }\n\n    if (notificationType === \"leave\") {\n      if (data.status === 'hc-not-allowed') {\n        statusMessage = ChatPanelStrings.user_leave_reason(user.name, ChatPanelStrings.not_allowed);\n      } else {\n        statusMessage = ChatPanelStrings.user_leave(user.name);\n      }\n    } else if (notificationType === \"join\") {\n      statusMessage = ChatPanelStrings.user_join(user.name);\n    } else if (notificationType === \"remove\") {\n      statusMessage = ChatPanelStrings.user_removed(user.name);\n    } else if (notificationType === \"add\") {\n      statusMessage = ChatPanelStrings.user_added(user.name);\n    }\n\n    messages.push({\n      body: statusMessage,\n      type: 'room-presence',\n      from: data.room,\n      delay: true,\n      sender: ' ',\n      user_jid\n    });\n\n    this.handleIncomingMessages(messages, this);\n  }\n\n  addRoomAdmin(roomJid, userId) {\n    this.data.activeRooms[roomJid].admins.push(userId);\n  }\n\n  updatePresence(pres) {\n    notifier.update({ current_user_presence: pres.show });\n    this.data.roster[this.data.current_user.user_jid].presence = pres;\n    this.set({\n      roster: this.data.roster\n    });\n  }\n\n  resetRoomParticipantsListInitializedFlag() {\n    _.forOwn(this.data.activeRooms, (room) => {\n      room.participants_fully_initialized = false;\n    });\n  }\n\n  fetchRoomParticipantsFromAPI(room, includeOffline) {\n    AppActions.fetchRoomParticipants(room, includeOffline);\n  }\n\n  handleRoomParticipantsFromAPI(data) {\n    let room = _.find(this.data.activeRooms, (activeRoom) => activeRoom.id.toString() === data.roomId.toString());\n\n    if (room) {\n      let participants = utils.toArray(data.participants);\n\n      this.setRoomParticipantsFullyInitialized(room);\n\n      participants.forEach((participant) => {\n        participant.jid = participant.xmpp_jid;\n        participant.presence = {\n          show: 'chat',\n          status: ''\n        };\n        this.addRoomParticipantFromAPI(room, participant);\n      });\n\n      this.updateMessagesIfGuestsConnected(room.jid);\n    }\n  }\n\n  setRoomParticipantsFullyInitialized(room) {\n    room.participants_fully_initialized = true;\n  }\n\n  setActiveRooms() {\n    this.set('activeRooms', this.data.activeRooms);\n    this._updateTotalUnreadCount();\n  }\n\n  setActiveGuestUserRegex() {\n    var guestRegexUser;\n    if (this.data.activeRooms[this.data.active_chat]) {\n      guestRegexUser = this.data.activeRooms[this.data.active_chat].guest_mention_regex;\n    }\n    this.set({\n      guestRegexUser: guestRegexUser\n    });\n  }\n\n  updatePresenceProcessor() {\n    this.presenceProcessor.update({\n      is_guest: this.data.current_user.is_guest,\n      current_user_jid: this.data.current_user.user_jid\n    });\n  }\n\n  handleArchiveRoom(data, archive, cb) {\n    var room = this.data.activeRooms[data.jid];\n    AppDispatcher.dispatch('API:update-room',\n      {\n        params: {\n          name: room.name,\n          privacy: room.privacy,\n          is_archived: archive,\n          is_guest_accessible: !!room.guest_url,\n          topic: room.topic,\n          owner: {\n            id: room.owner\n          },\n          id: room.id\n        },\n        path: {\n          'identifier': room.id,\n          'type': 'room'\n        },\n        jid: data.jid\n      }, cb);\n  }\n\n  handleArchivedRoom(data, archived){\n    var chatInAllRooms = this.data.allRooms[data.jid] || {};\n    var chatInActiveRooms = this.data.activeRooms[data.jid] || {};\n\n    chatInAllRooms.is_archived = archived;\n    chatInActiveRooms.is_archived = archived;\n\n    this.set({\n      allRooms: this.data.allRooms,\n      activeRooms: this.data.activeRooms\n    });\n  }\n\n  handleTopicUpdated(topic, jid) {\n    if (jid) {\n      if (this.data.allRooms[jid]) {\n        this.data.allRooms[jid].topic = topic;\n      }\n      if (this.data.activeRooms[jid]) {\n        this.data.activeRooms[jid].topic = topic;\n      }\n      this.set({\n        allRooms: this.data.allRooms,\n        activeRooms: this.data.activeRooms\n      });\n    }\n  }\n\n  openChatByMentionName(mentionName){\n    var user = _.find(this.data.roster, function(u){\n      return u.mention_name.toLowerCase() === mentionName.toLowerCase();\n    });\n\n    let currentUser = this.get('current_user');\n    if (user && !currentUser.is_guest) {\n      var data = {\n        jid: user.jid,\n        name: user.name\n      };\n      AppDispatcher.dispatch('set-route', data);\n    }\n  }\n\n  /**\n   * Generates a roster from the room participants that a guest has requested via coral\n   */\n  handleGuestRoomParticipants(users) {\n    let fake_roster = _.forEach(utils.toArray(users), (user) => {\n      user.jid = user.user_jid || utils.jid.build_group_jid(user.id, this.data.group_id, this.data.chat_server);\n      user.presence = {\n        show: 'chat',\n        status: ''\n      };\n    });\n    this.set('roster', _.merge(this.data.roster, _.keyBy(fake_roster, 'jid')));\n    this.updateMentionNames();\n    this.updateRosterNames();\n  }\n\n  updateFeatureFlags(data) {\n    if (_.isObject(data) && _.has(data, \"feature_flags\")) {\n      let config = _.merge(this.data.config, data);\n      this.set(\"config\", config);\n    }\n  }\n\n  /**\n   * Enables a feature flag\n   *\n   * @param {Object} feature the feature to enable_guest_classes\n   * @param {String} feature.name the name of the feature to enable\n   */\n  handleEnableDarkFeature(feature) {\n    let featureFlags = _.get(this.data.config, \"feature_flags\", {});\n    if (featureFlags && feature.name) {\n      featureFlags[feature.name] = true;\n      this.updateFeatureFlags({\n        feature_flags: featureFlags\n      });\n    }\n  }\n\n  configure(data) {\n    this.messageProcessor.configure(data.asset_base_uri);\n    if (data.config.auth_method !== 'nonce') {\n      this.iqProcessor.addRequiredStartupStanza();\n    }\n    this.set(data);\n  }\n}\n\nexport default new AppStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/application_store.js\n **/","\"use strict\";\n\nvar _Object$assign = require(\"babel-runtime/core-js/object/assign\")[\"default\"];\n\nexports[\"default\"] = _Object$assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nexports.__esModule = true;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/extends.js\n ** module id = 172\n ** module chunks = 0\n **/","import utils from 'helpers/utils';\nimport link_utils from \"helpers/link_utils\";\nimport logger from 'helpers/logger';\nimport moment from 'moment';\nimport notifier from 'helpers/notifier';\nimport PreferencesStore from 'stores/preferences_store';\nimport File from 'core/models/file';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppActions from 'actions/app_actions';\nimport AppConfig from 'config/app_config';\nimport ChatPanelStrings from 'strings/chat_panel_strings';\nimport VideoCallStrings from 'strings/video_call_strings';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport {MESSAGE_RECEIVED} from \"api/api_integration_events\";\n\nclass MessageProcessor {\n\n  constructor(store) {\n    this.store = store;\n    this.update();\n    this.registerEventCallbacks();\n    this.ready = false;\n    this.queued = [];\n    this.imagesQueue = [];\n    this._debouncedFetchQueue = _.debounce(this._fetchQueue.bind(this), 500, {\n      leading: true,\n      trailing: true\n    });\n  }\n\n  update() {\n    this.setPredicates();\n    this.updateNotifier();\n  }\n\n  setPredicates() {\n    this.outgoing_message_predicate = utils.createSafePredicate(AppConfig.outgoing_message_filter_predicate, AppConfig);\n    utils.formatMessageBody = this.formatMessageBody.bind(this);\n  }\n\n  configure(asset_base_uri) {\n    this.asset_base_uri = asset_base_uri;\n  }\n\n  updateNotifier() {\n    notifier.update({\n      group_name: this.store.get(\"group_name\"),\n      feature_flags: _.get(this.store.get(\"config\"), \"feature_flags\", {})\n    });\n  }\n\n  registerEventCallbacks() {\n    AppDispatcher.registerOnce('app-state-ready', () => {\n      this.ready = true;\n      this.processMessages(this.queued);\n      this.queued = [];\n    });\n    AppDispatcher.register({\n      'application-blurred': () => {\n        this.appBlurred = true;\n      },\n      'application-focused': () => {\n        this.appBlurred = false;\n      }\n    });\n  }\n\n  getMentionArguments() {\n    var mentionRegexMe = this.convertRegex(this.store.get(\"mentionRegexMe\"), \"mentionRegexMe\");\n    var mentionRegexUser = this.convertRegex(this.store.get(\"mentionRegexUser\"), \"mentionRegexUser\");\n    return {\n      name_tag_regex: mentionRegexMe,\n      mention_regex: mentionRegexUser,\n      matches: [],\n      do_escape: false,\n      do_linkify: false,\n      do_mentions: true\n    };\n  }\n\n  convertRegex(regex, key) {\n    var flag = (key === \"mentionRegexUser\") ? \"ig\" : \"g\";\n    if (typeof regex === 'string') {\n      return new RegExp(regex.substring(1, regex.lastIndexOf(')') + 1), flag);\n    }\n    return regex;\n  }\n\n  processMessages(messages) {\n    let msgArray = utils.toArray(messages);\n    if (!this.ready && !messages.results) {\n      this.queued = this.queued.concat(msgArray);\n    } else {\n      var messagesObj = {};\n      if (messages.jid && messages.results) {\n        messagesObj = this.formatAPIMessages(messages);\n      } else {\n        messagesObj = this.formatXMPPMessages(messages);\n      }\n      return messagesObj;\n    }\n  }\n\n  formatXMPPMessages(messages) {\n    var messagesObj = {},\n        jid,\n        sender;\n\n    // Filter messages\n    messages = this.filterMessages(utils.toArray(messages));\n\n    _.forEach(messages, (message) => {\n      jid = utils.jid.bare_jid(message.from);\n\n      if (this.checkMessageForAction(message, jid)) {\n        return;\n      }\n      this.setMessageTypeAndFormat(message);\n\n      if (typeof message.mid === 'undefined') {\n        message.mid = _.uniqueId();\n      }\n      if (typeof message.ts === 'undefined') {\n        message.ts = utils.getMoment();\n      }\n\n      if (typeof message.subject !== 'undefined') {\n        if (message.delay) { //We don't want previous topic change messages to change the room topic\n          return;\n        }\n        sender = this.getMessageSender(message);\n        if (!sender) {\n          return;\n        }\n\n        var topicChangeMsg = this.handleTopicChange(message, sender, jid);\n\n        _.assign(message, topicChangeMsg);\n      }\n\n      var sender_id = this.getMessageSenderId(message),\n          sender_name = this.getMessageSender(message),\n          current_user = this.store.get(\"current_user\");\n\n      _.assign(message, {\n        room: jid,\n        sender: message.sender || sender_name,\n        sender_id: sender_id,\n        sender_is_current_user: sender_id === current_user.user_id,\n        date: moment.unix(message.ts).toISOString(),\n        sender_mention: message.sender_mention || this.getMessageSenderMention(message),\n        sender_avatar: message.sender_avatar || this.getAvatar(sender_id),\n        display_time: this.formatDate(message.ts),\n        time: parseFloat(message.ts),\n        is_history_message: utils.isHistoryMessage(message),\n        status: 'confirmed'\n      });\n\n      this.setMessageColor(message);\n      message.card = this.processCard(_.get(message, \"x.card.raw\", false));\n      this.setMessageSenderAndAvatar(message, _.get(message, 'x.notification_sender', false));\n      this.processMessageMetadata(message);\n\n      message = this.formatMessageBody(message);\n\n      if (message.body && !utils.isHistoryMessage(message) && this.shouldNotify(message)) {\n        sender = message.sender || this.getMessageSender(message);\n        this.updateNotifier();\n        AppActions.showNotification({\n          jid: jid,\n          group_id: this.store.get(\"group_id\"),\n          group_name: this.store.get(\"group_name\"),\n          title: this.getNotificationTitle(message.room, sender),\n          body: this.getNotificationBody(message, sender),\n          icon: this.asset_base_uri + AppConfig.notification_icon,\n          html_body: message.format === 'html' ? message.xhtml_im_body : message.rendered_body\n        });\n        notifier.playSound('notification');\n      }\n\n      messagesObj[message.mid] = message;\n\n      var escapeAndLinkifyOptions = {\n        do_emoticons: PreferencesStore.shouldReplaceTextEmoticons()\n      };\n\n      if (_.filter(message.x, 'metadata').length) {\n        var meta = _.compact(_.map(message.x, 'metadata'))[0];\n        if (meta.type === \"info\") {\n          _.assign(message, {\n            sender: utils.getSenderFromMeta(meta.type),\n            sender_id: sender_id,\n            sender_mention: \"\",\n            color: 'gray'\n          });\n        } else {\n          var mid = message.mid || '',\n            msg = {},\n            time = parseFloat(message.ts);\n\n          _.assign(msg, {\n            room: jid,\n            mid: mid + '-link-1',\n            sender: utils.getSenderFromMeta(meta.type),\n            sender_id: sender_id,\n            sender_mention: message.sender_mention || this.getMessageSenderMention(message),\n            sender_avatar: this.getAvatar(sender_id),\n            date: moment.unix(time).toISOString(),\n            display_time: this.formatDate(time + 1),\n            time: time,\n            format: 'html',\n            body: meta.text ? utils.escapeAndLinkify(meta.text, escapeAndLinkifyOptions) : '',\n            type: meta.type,\n            link_details: meta,\n            color: 'gray',\n            is_history_message: utils.isHistoryMessage(message)\n          });\n          msg.link_details = _.transform(msg.link_details, (result, val, key) => {\n            result[utils.camelToSnake(key)] = val;\n          });\n\n          if (meta.type === 'image' && !meta.mp4) {\n            this._processImageMessage(meta, msg);\n          } else {\n            messagesObj[msg.mid] = _.clone(msg);\n          }\n        }\n      }\n    });\n    return messagesObj;\n  }\n\n  /**\n   * Method for preparing image for image link message\n   * @param meta\n   * @param msg\n   * @private\n   */\n  _processImageMessage(meta, msg) {\n    this.imagesQueue.push({ url: meta.image, msg });\n    this._debouncedFetchQueue((imgMsg, image) => {\n      AppDispatcher.dispatch('fetch-attachment-image', {\n        [imgMsg.mid]: imgMsg\n      });\n    });\n  }\n\n  /**\n   * Fetching queue of images\n   * @param {Func<Object,Image>} iteratee - callback\n   * @param {Array<Object>} queue - url queue to be fetched\n   * @private\n   */\n  _fetchQueue(iteratee = _.noop, queue = _.clone(this.imagesQueue).reverse()) {\n    this.imagesQueue = [];\n    this._recurQueue(queue, iteratee);\n  }\n\n  /**\n   * Applying promisified fetchImage recursively against the queue\n   * @param {Array} queue\n   * @param {Func<Object,Image} iteratee - callback\n   * @private\n   */\n  _recurQueue(queue, iteratee) {\n    let [head, ...rest] = queue;\n    let promise = this._fetchImage(head.url);\n\n    promise.then((image) => {\n      iteratee(head.msg, image);\n\n      if (rest.length !== 0) {\n        this._recurQueue(rest, iteratee);\n      }\n    }, (err) => {\n      logger.error(err.message, err);\n\n      if (rest.length !== 0) {\n        this._recurQueue(rest, iteratee);\n      }\n    });\n  }\n\n  /**\n   * Fetching image\n   * @param url\n   * @returns {Promise{Image}\n   * @private\n   */\n  _fetchImage(url) {\n    return new Promise((resolve, reject) => {\n      let image = new Image();\n      let timeoutId;\n\n      image.onload = () => {\n        clearTimeout(timeoutId);\n\n        if (image.naturalWidth > AppConfig.message_image_max_size ||\n            image.naturalHeight > AppConfig.message_image_max_size) {\n          reject(new Error('Image is too large'));\n        }\n\n        resolve(image);\n      };\n\n      image.onerror = (err) => {\n        clearTimeout(timeoutId);\n      };\n\n      timeoutId = setTimeout(() => {\n        image.src = '';\n        clearTimeout(timeoutId);\n        reject(new Error('Fetching timeout'));\n      }, AppConfig.message_image_loading_timeout);\n\n      image.src = url;\n    });\n  }\n\n  filterMessages(msgs) {\n    let predicate = utils.createSafePredicate(AppConfig.message_filter_predicate, AppConfig);\n\n    msgs = _.filter(msgs, msg => _.has(msg, 'body') ? !_.isEmpty(msg.body) || !!msg.replace : true);\n    return _.filter(msgs, predicate);\n  }\n\n  formatDate(date) {\n    return utils.format_time(date, PreferencesStore.shouldUse24HrTime());\n  }\n\n  formatAPIMessages(messages) {\n    var temp = {},\n      transformed_messages;\n\n    transformed_messages = _.transform(messages.results, (result, msg) => {\n      if (msg.type === 'topic') {\n        return;\n      }\n      if (this.isEnsoVideoHistoryMessage(msg)) {\n        return;\n      }\n      // HC-31099: Deleted messages come back from Coral with null message bodies (ohcrap)\n      if (_.isNull(msg.message)) {\n        return;\n      }\n\n      let sender_name = msg.from.name || msg.from;\n\n      temp = {\n        body: msg.message,\n        room: messages.jid,\n        mid: msg.id,\n        time: utils.getMoment(msg.date),\n        display_time: this.formatDate(msg.date),\n        date: moment(msg.date).toISOString(),\n        from: messages.jid,\n        sender: sender_name,\n        sender_mention: msg.from.mention_name,\n        sender_id: msg.from.id,\n        sender_avatar: this.getAvatar(msg.from.id),\n        type: msg.type === 'unknown' || !msg.type ? 'message' : msg.type,\n        color: msg.color,\n        format: msg.message_format,\n        card: this.processCard(_.get(msg, \"card\", false)),\n        is_history_message: true,\n        status: 'confirmed'\n      };\n\n      if (msg.message_format === 'html') {\n        temp.xhtml_im_body = msg.message;\n      }\n\n      if (msg.authenticated_file) {\n        _.assign(temp, {\n          type: 'file',\n          authenticated_file: msg.authenticated_file\n        });\n      } else if (msg.file) {\n        _.assign(temp, {\n          type: 'file',\n          file: msg.file\n        });\n      }\n\n      if (AppConfig.slash_replacement_regex.test(msg.message)) {\n        var arr = msg.message.split('/');\n        AppDispatcher.dispatch('replacement-message-received', {\n          jid: messages.jid,\n          sender_id: msg.from.id,\n          text_to_replace: arr[1],\n          replacement_text: arr[2],\n          time: utils.getMoment(msg.date),\n          mid: msg.id\n        });\n      }\n\n      this.setMessageTypeAndFormat(temp);\n      this.setMessageColor(temp);\n      this.setMessageSenderAndAvatar(temp, _.get(msg, 'notification_sender', false));\n      this.processMessageMetadata(temp);\n      result.push(this.formatMessageBody(temp));\n\n      if (msg.message_links && msg.message_links.length) {\n        var linkMsg = {},\n          index = 0;\n        _.map(msg.message_links, (link) => {\n          index++;\n          linkMsg = {\n            room: messages.jid,\n            mid: link.id || msg.id + '-link-' + index,\n            body: link[link.type].text || msg.message,\n            time: utils.getMoment(msg.date) + index,\n            date: moment(msg.date).toISOString(),\n            display_time: this.formatDate(msg.date),\n            from: messages.jid,\n            sender: utils.getSenderFromMeta(link.type),\n            sender_mention: msg.from.mention_name,\n            sender_id: msg.from.id,\n            format: 'html',\n            color: 'gray',\n            type: link.type,\n            link_details: link[link.type],\n            is_history_message: true,\n            status: 'confirmed'\n          };\n          linkMsg.link_details['url'] = link.url;\n          linkMsg.link_details = _.transform(linkMsg.link_details, (transform_result, val, key) => {\n            transform_result[utils.camelToSnake(key)] = val;\n          });\n          result.push(linkMsg);\n        });\n      }\n    });\n\n    transformed_messages = _.reject(transformed_messages, (msg) => {\n      return msg.mid.split('-link-')[0] === messages.mid ||\n        (_.has(msg, 'message') && _.isNull(msg.message));\n    });\n\n    if (transformed_messages.length) {\n      return _.keyBy(transformed_messages, 'mid');\n    }\n  }\n\n  processSentMessage(data) {\n    var msgObj = {},\n      currentUser = this.store.get(\"current_user\"),\n      sender_id = utils.jid.user_id(currentUser.user_jid),\n      msg = {\n        jid: data.jid,\n        room: data.jid,\n        from: currentUser.user_jid,\n        sender: currentUser.user_name,\n        sender_id: sender_id,\n        sender_avatar: this.getAvatar(sender_id),\n        display_time: this.formatDate(),\n        color: 'blue',\n        time: data.time,\n        body: data.text,\n        type: 'message',\n        mid: data.id.toString(),\n        status: this.outgoing_message_predicate(data) ? 'unconfirmed' : 'confirmed',\n        is_user_sent: true\n      };\n    if (this.checkMessageForAction(msg, data.jid)) {\n      return undefined;\n    }\n    this.setMessageTypeAndFormat(msg);\n    msg = this.formatMessageBody(msg);\n    msg['sender_mention'] = this.getMessageSenderMention(msg);\n    msgObj[msg.mid] = msg;\n    return msgObj;\n  }\n\n  handleTopicChange(message, sender, jid) {\n    var subject = message.subject.substring(0, AppConfig.max_topic_text_length), // Truncate topics that come from server\n      currentUser = this.store.get(\"current_user\"),\n      msg = {\n        sender: ' ',\n        type: \"info\",\n        color: (sender === currentUser.user_name) ? \"blue\" : \"nocolor\",\n        body: (subject.length) ? ChatPanelStrings.topic_message(sender, subject) : ChatPanelStrings.clear_topic_message(sender)\n      };\n\n    AppDispatcher.dispatch(\"DAL:handle-topic-updated\", {\n      topic: subject,\n      jid: jid\n    });\n\n    return msg;\n  }\n\n  formatMessageBody(message) {\n    var type = /message$/.test(message.type) ? 'message' : message.type,\n      text = message.body,\n      do_escape = true;\n\n    if (typeof text === 'string') {\n      do_escape = ['html', 'code', 'quotation', 'monospace'].indexOf(message.format) === -1;\n      if (message.x) {\n        message.x = utils.toArray(message.x);\n      }\n\n      if (type === 'message' && text.match(AppConfig.emote_regex)) {\n        message.type = 'info';\n        message.isEmote = true;\n        text = utils.replaceEmoteMessage(text, message.sender);\n      }\n\n      if (message.type === 'file') {\n        let file = File.fromMessageObject(message);\n        message.file_data = file;\n        text = file.desc;\n      }\n\n      // Check for monospace formatting (remove excess whitespace)\n      if (message.format === 'quotation') {\n        text = utils.formatMultilineBlock(text);\n      }\n\n      // Escape html and linkify\n      var matches = [];\n      var isFormatted = (this.isQuoteMessage(message) || this.isCodeMessage(message) || this.isMonospaceMessage(message));\n\n      // Don't linkify if we're going to truncate a pasted block by # of characters\n      // (links are fine if we're truncating by line)\n      var do_linkify = (do_escape && !isFormatted);\n      var do_emoticons = (do_escape && !isFormatted && PreferencesStore.shouldReplaceTextEmoticons());\n      var do_mentions = (do_escape && !isFormatted && utils.jid.is_room(message.room));\n      var do_hex_colors = (do_escape && !isFormatted);\n      var do_word_breaks = do_escape;\n      var mentionRegexMe = this.convertRegex(this.store.get(\"mentionRegexMe\"), \"mentionRegexMe\");\n      var mentionRegexUser = this.convertRegex(this.store.get(\"mentionRegexUser\"), \"mentionRegexUser\");\n      var guestRegexUser = this.convertRegex(this.store.get(\"guestRegexUser\"), \"guestRegexUser\");\n      var emoticons = this.store.get(\"emoticons\");\n\n      text = utils.escapeAndLinkify(text, {\n        escape_whitespace: do_escape,\n        name_tag_regex: mentionRegexMe,\n        mention_regex: mentionRegexUser,\n        guest_regex: guestRegexUser,\n        matches: matches,\n        emoticon_path: emoticons.path_prefix,\n        do_escape: do_escape,\n        do_linkify: do_linkify,\n        do_emoticons: do_emoticons,\n        do_word_breaks: do_word_breaks,\n        do_mentions: do_mentions,\n        do_hex_colors: do_hex_colors\n      });\n\n      message.rendered_body = text;\n      message.message_type = type;\n      if (message.format === 'html' && message.xhtml_im_body) {\n        message.xhtml_im_body = this.substituteMentionTagsForHtml(message.xhtml_im_body);\n      }\n    }\n    return message;\n  }\n\n  getNotificationBody(message, sender) {\n    var body;\n\n    if (message.type === \"message\") {\n      body = (message.body) ? message.body : ChatPanelStrings.generic_message(sender);\n    } else if (message.type === \"file\") {\n      if (message.body) {\n        body = message.body;\n      } else if (_.get(message, \"file_data.name\")) {\n        var file_name = utils.file.get_file_name(message.file_data.name);\n        body = ChatPanelStrings.generic_file_uploaded_message(sender, file_name);\n      } else {\n        body = ChatPanelStrings.generic_file_message(sender);\n      }\n    }\n    return body || ChatPanelStrings.generic_message(sender);\n  }\n\n  getNotificationTitle(room_jid, sender) {\n    let room = this.store.get(\"activeRooms\")[room_jid] || this.store.get(\"allRooms\")[room_jid],\n      room_name = _.get(room, 'name'),\n      is_from_room = utils.jid.is_room(room_jid),\n      title;\n\n    if (is_from_room) {\n      title = this.getRoomNotificationTitle(room_name, sender);\n    } else {\n      title = this.getOTONotificationTitle(sender);\n    }\n    return title;\n  }\n\n  getRoomNotificationTitle(room_name, sender) {\n    return ChatPanelStrings.room_notification_title(sender, room_name);\n  }\n\n  getOTONotificationTitle(sender) {\n    return ChatPanelStrings.oto_notification_title(sender);\n  }\n\n  shouldNotify(message) {\n    var preferences = PreferencesStore.getAll(),\n      current_user = this.store.get(\"current_user\"),\n      roster = this.store.get(\"roster\"),\n      current_user_roster_entry = roster[current_user.user_jid],\n      overrides,\n      roomOverrides,\n      notification_level;\n\n    // Do not notify if current user is DND\n    if (!preferences.notifyWhenDND && current_user_roster_entry && _.get(current_user_roster_entry, \"presence.show\") === \"dnd\") {\n      return false;\n    }\n\n    // Do not notify for info messages\n    if (message.type && message.type === \"info\") {\n      return false;\n    }\n\n    // Do not notify for s/ messages\n    if (AppConfig.slash_replacement_regex.test(message.body)) {\n      return false;\n    }\n\n    // Do not notify if message is from the current user\n    if (this.getMessageSenderId(message) === current_user.user_id) {\n      return false;\n    }\n\n    // Do not notify if app is focused and message is for the active chat\n    if (!this.appBlurred && this.store.get(\"active_chat\") === message.room) {\n      return false;\n    }\n\n    // Private chats are the only ones that have a setting that take precedence over the globalNotificationSetting\n    if (utils.jid.is_private_chat(message.room)) {\n      return preferences.notifyForPrivate;\n    }\n\n    // See if this room has an override, else use the global setting\n    overrides = preferences.roomNotificationOverrides || {};\n    roomOverrides = overrides[message.room] || {};\n    notification_level = _.get(roomOverrides, \"level\", PreferencesStore.getGlobalNotificationSetting());\n\n    if (message.x) {\n      const x = _.head(utils.toArray(message.x));\n      const notify = _.get(x, 'notify');\n      const type = _.get(x, 'type');\n      const hasMention = message.body.search(this.store.get('mentionRegexMe')) !== -1;\n\n      if (notify === '0' && (type !== 'system' || !hasMention)) {\n        return false;\n      }\n    }\n\n    return this.shouldNotifyForLevel(notification_level, message);\n  }\n\n  shouldNotifyForLevel(level, message) {\n    const isFormatted = utils.isFormattedMessage(message);\n\n    const hasJustMeMention = message.body.search(this.store.get('mentionRegexJustMe')) !== -1;\n    const hasMention = message.body.search(this.store.get('mentionRegexMe')) !== -1;\n\n    switch (level) {\n      case \"quiet\":\n        return !isFormatted && hasJustMeMention;\n      case \"normal\":\n        return !isFormatted && hasMention;\n      case \"loud\":\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  getMessageSenderObject(message) {\n    let jid,\n      name,\n      sender = {},\n      roster = this.store.get('roster');\n\n    // If history message, use from_jid in delay node as it is first source of truth\n    if (message.delay && message.delay.from_jid) {\n      jid = utils.jid.bare_jid(message.delay.from_jid);\n\n      // Fallback if the sender name is not defined\n      sender = roster[jid] || {\n          id: utils.jid.user_id(jid),\n          name: utils.jid.resource(message.from)\n      };\n\n    // If message.from is a user's jid, use it\n    } else if (utils.jid.is_private_chat(message.from)) {\n      jid = utils.jid.bare_jid(message.from);\n      sender = roster[jid] || { id: utils.jid.user_id(jid) };\n\n    // That leaves room messages. First, prefer from_jid if available (will not exist\n    // in older BTF servers\n    } else if (message.from_jid) {\n      jid = utils.jid.bare_jid(message.from_jid);\n      sender = roster[jid] || { id: utils.jid.user_id(jid) };\n\n    // Finally, fallback to using the resource part of the from property\n    // This is prone to a security hole in which a user can impersonate another\n    // by using the same full name -- but should only be applicable for BTF instances\n    // where from_jid is not yet supported\n    } else if (message.from) {\n      name = utils.jid.resource(message.from);\n      sender = _.find(roster, { name }) || { name };\n    }\n    return {\n      name: sender.name ? sender.name : '',\n      mention_name: sender.mention_name ? sender.mention_name : '',\n      id: sender.id ? parseInt(sender.id, 10) : null\n    };\n  }\n\n  getMessageSender(message) {\n    if (message.type === 'link') {\n      return 'Link';\n    }\n    return this.getMessageSenderObject(message).name;\n  }\n\n  getMessageSenderId(message) {\n    return this.getMessageSenderObject(message).id;\n  }\n\n  getMessageSenderMention(message) {\n    return this.getMessageSenderObject(message).mention_name;\n  }\n\n  updateMessagesIfGuestsConnected(messages) {\n    _.forEach(messages, (message) => {\n      if (!message.sender_mention) {\n        message.sender_mention = this.getMessageSenderMention(message);\n      }\n      this.formatMessageBody(message);\n    });\n  }\n\n  checkMessageForAction(message, jid) {\n    var extra,\n      status = _.intersection(_.keys(message), this.store.local.chat_states),\n      active_rooms = this.store.get(\"activeRooms\"),\n      current_user = this.store.get(\"current_user\");\n\n    extra = message.x ? utils.toArray(message.x) : [{}];\n\n    let is_video_message = (_.includes(['http://hipchat.com/protocol/enso', 'http://hipchat.com/protocol/addlive'], extra[0].xmlns) && !utils.isHistoryMessage(message));\n\n    if (is_video_message) {\n      return this.handleCallMessage(message, extra[0], extra[0].xmlns.split('/').pop());\n    } else if (message.type === 'error') {\n      logger.warn(message);\n      AppDispatcher.dispatch('error-message-received', message);\n      return true;\n    } else if (message.html && message.xhtml_im_body && !message.authenticated_file) {\n      let $markup = $('<div/>').append(utils.getFixedHtml(message.xhtml_im_body)),\n        $link = $('a[data-target-options=\"enso_invite\"]', $markup);\n      if ($link.length) {\n        return true;\n      }\n    } else if (message.authenticated_file || message.file || extra[0].file) {\n\n      // Open OTO chat if chat is not open\n      if (this.isOneToOneChatClosed(message, jid, active_rooms)) {\n        AppDispatcher.dispatch('private-chat-invite-received', message);\n      }\n\n      this.addFile(jid, message);\n      return false;\n\n    } else if (message.replace) {\n      AppDispatcher.dispatch('replacement-message-received', {\n        jid: jid,\n        edited_message: message.body,\n        mid: message.mid,\n        replace: message.replace,\n        is_deleted: message.replace && message.body === \"\"\n      });\n    } else if (message.x\n      && message.x.is_archived\n      && !message.body\n      && !utils.isHistoryMessage(message)) {\n      if (parseInt(message.x.is_archived)) {\n        AppDispatcher.dispatch('room-archived', {jid: jid});\n      } else if (!parseInt(message.x.is_archived)) {\n        AppDispatcher.dispatch('room-unarchived', {jid: jid});\n      }\n      return false;\n    } else if (this.isCodeMessage(message) || this.isQuoteMessage(message) || this.isMonospaceMessage(message)) {\n\n      if (this.isOneToOneChatClosed(message, jid, active_rooms)) {\n        AppDispatcher.dispatch('private-chat-invite-received', message);\n      }\n      return false;\n    } else if (!extra[0].file\n      && extra[0].type !== \"system\"\n      && active_rooms[jid]\n      && message.body\n      && message.body.length\n      && link_utils.get_urls_from_string(message.body)) {\n\n      this.addLinks(jid, message);\n      return false;\n\n    } else if (status.length\n      && (!message.body || message.body.length === 0)) {\n      status = _.head(status);\n      AppDispatcher.dispatch('status-message-received', {\n        type: status,\n        message: message\n      });\n      return true;\n    } else if (AppConfig.slash_replacement_regex.test(message.body)) {\n      var arr = message.body.split('/');\n      AppDispatcher.dispatch('replacement-message-received', {\n        jid: jid,\n        sender_id: this.getMessageSenderId(message),\n        text_to_replace: arr[1],\n        replacement_text: arr[2],\n        time: message.time || parseFloat(message.ts),\n        mid: message.mid\n      });\n      return false;\n    } else if (extra[0].invite) {\n      var from = _.get(extra[0], 'invite.from', false);\n      if (from && (utils.jid.bare_jid(from) === current_user.user_jid)) {\n        var fromRoom = utils.jid.bare_jid(message.from);\n        AppDispatcher.dispatch('open-room', {\n          jid: fromRoom,\n          dontSelectRoom: true\n        });\n      } else {\n        let cb = function (err, room) {\n          if (room) {\n            AppDispatcher.dispatch('handle-cached-room', {\n              jid: room.jid,\n              name: room.name,\n              x: room\n            });\n          } else {\n            logger.error(['fetch-room'], err.message);\n          }\n          AppDispatcher.dispatch('groupchat-invite-received', message);\n        };\n        AppDispatcher.dispatch('fetch-room', message.from, cb);\n      }\n      return true;\n\n    } else if (this.isOneToOneChatClosed(message, jid, active_rooms)\n      && message.body\n      && message.body.length > 0) {\n      AppDispatcher.dispatch('private-chat-invite-received', message);\n      return false;\n\n    } else if (typeof extra[0].guest_url !== 'undefined' && !utils.isHistoryMessage(message)) {\n      AppDispatcher.dispatch('guest-access-changed', {\n        jid: jid,\n        url: extra[0].guest_url\n      });\n      return false;\n    }\n  }\n\n  handleCallMessage(message, extra, service) {\n    var evt_map = {\n        call: 'invite-to-audio-video-call',\n        accept: 'audio-video-call-accepted',\n        decline: 'audio-video-call-declined',\n        hangup: 'audio-video-call-hung-up'\n      },\n      sender = {\n        jid: message.from,\n        id: this.getMessageSenderId(message),\n        name: this.getMessageSender(message)\n      },\n      current_user = this.store.get(\"current_user\"),\n      commonKeys = _.intersection(_.keys(extra), _.keys(evt_map)),\n      type = _.head(commonKeys),\n      evt = evt_map[type];\n    if (message.type === 'error' && service === VideoCallStrings.ENSO) {\n      _.assign(message, {\n        body: _.get(message, 'error.text', '').toString(),\n        from: 'HipChat',\n        sender: utils.getSenderFromMeta(),\n        type: 'system',\n        color: 'gray'\n      });\n      return !message.body;\n    } else if (evt && message.from !== current_user.user_jid || evt === 'audio-video-hangup') {\n      AppDispatcher.dispatch(`${service}.${evt}`, {\n        message: message,\n        sender: sender\n      });\n    }\n    return true;\n  }\n\n  setMessageColor(message) {\n    var current_user = this.store.get(\"current_user\");\n\n    if (message.color || (message.x && message.x.color)) {\n      message.color = message.color || message.x.color;\n    } else if (message.sender_id === current_user.user_id\n      || (message.delay && message.delay.from_jid === current_user.user_jid)\n      || (current_user.is_guest && message.sender_mention === current_user.mention)) {\n      message.color = 'blue';\n    } else if (message.type === 'notification') {\n      message.color = 'gray';\n    } else {\n      message.color = 'nocolor';\n    }\n  }\n\n  isQuoteMessage(message) {\n    if (_.get(message, 'format') === 'quotation') {\n      return true;\n    }\n\n    let formatIsText = false,\n        messageFormat = _.get(message, 'x.message_format'),\n        matchesRegex = AppConfig.quote_regex.test(message.body);\n\n    if (_.isUndefined(messageFormat) || messageFormat === 'text') {\n      formatIsText = true;\n    }\n\n    return formatIsText && matchesRegex;\n  }\n\n  isCodeMessage(message) {\n    if (_.get(message, 'format') === 'code') {\n      return true;\n    }\n\n    let formatIsText = false,\n        messageFormat = _.get(message, 'x.message_format'),\n        matchesRegex = AppConfig.code_regex.test(message.body);\n\n    if (_.isUndefined(messageFormat) || messageFormat === 'text') {\n      formatIsText = true;\n    }\n\n    return formatIsText && matchesRegex;\n  }\n\n  isMonospaceMessage(message) {\n    if (_.get(message, 'format') === 'monospace') {\n      return true;\n    }\n\n    let formatIsText = false,\n        messageFormat = _.get(message, 'x.message_format'),\n        matchesRegex = AppConfig.pre_regex.test(message.body);\n\n    if (_.isUndefined(messageFormat) || messageFormat === 'text') {\n      formatIsText = true;\n    }\n\n    return formatIsText && matchesRegex;\n  }\n\n  formatQuoteMessage(message) {\n    _.assign(message, {\n      original_body: message.body,\n      body: message.body.replace(AppConfig.quote_regex, ''),\n      format: 'quotation'\n    });\n  }\n\n  formatCodeMessage(message) {\n    _.assign(message, {\n      original_body: message.body,\n      body: message.body.replace(AppConfig.code_regex, ''),\n      format: 'code'\n    });\n  }\n\n  formatMonospaceMessage(message) {\n    _.assign(message, {\n      original_body: message.body,\n      body: message.body.replace(AppConfig.pre_regex, ''),\n      format: 'monospace'\n    });\n  }\n\n  setMessageTypeAndFormat(message) {\n    var type = message.x ? _.compact(_.map(utils.toArray(message.x), 'type'))[0] : message.type,\n      format = message.x ? _.compact(_.map(utils.toArray(message.x), 'message_format'))[0] : message.format;\n\n    if (message.subject || type === 'topic') {\n      message.type = 'info';\n    } else if (this.handleInfoMessage(message)) {\n      _.assign(message, {\n        type: 'info',\n        sender: ' ',\n        color: 'nocolor'\n      });\n    } else if (type === 'system' || type === 'notification') {\n      message.type = 'notification';\n      if (this.isQuoteMessage(message)) {\n        return this.formatQuoteMessage(message);\n      } else if (this.isCodeMessage(message)) {\n        return this.formatCodeMessage(message);\n      } else if (this.isMonospaceMessage(message)) {\n        return this.formatMonospaceMessage(message);\n      }\n    } else if (type === 'room-presence') {\n      message.type = 'info';\n      message.is_presence_message = true;\n    } else if (type === 'missed-call') {\n      message.type = 'info';\n      message.is_missed_call_message = true;\n    } else if (message.authenticated_file || message.file) {\n      let file = message.authenticated_file || message.file;\n      message.type = 'file';\n      message.body = file.desc || message.body || '';\n      format = 'text';\n    } else if (message.x && typeof message.x.file !== 'undefined') {\n      message.type = 'file';\n      message.body = _.get(message, 'x.file.desc') || message.body || '';\n    } else if (type === 'user_state') {\n      message.format = 'html';\n    } else if (message.xhtml_im_body) {\n      message.format = 'html';\n      message.type = 'notification';\n    } else if (!_.isUndefined(message.body)) {\n      message.type = 'message';\n      message.body = message.body.toString();\n      if (this.isQuoteMessage(message)) {\n        return this.formatQuoteMessage(message);\n      } else if (this.isCodeMessage(message)) {\n        return this.formatCodeMessage(message);\n      } else if (this.isMonospaceMessage(message)) {\n        return this.formatMonospaceMessage(message);\n      }\n    }\n    message.format = format || 'text';\n\n    if (message.format === 'html') {\n      if (message.xhtml_im_body) {\n        message.xhtml_im_body = utils.getFixedHtml(message.xhtml_im_body);\n      } else {\n        message.body = utils.getFixedHtml(message.body);\n      }\n    }\n  }\n\n  setMessageSenderAndAvatar(message, sender) {\n    if (sender) {\n      var avatar = this.getNotificationAvatar(sender);\n      if (avatar) {\n        message.sender_avatar = avatar;\n      }\n      message.notification_sender = sender;\n    }\n  }\n\n  processMessageMetadata(message) {\n    let messageMetadata = _.get(message.card, 'metadata', {});\n\n    if (message.notification_sender && message.notification_sender.type === \"addon\") {\n      messageMetadata.sender_addon_key = message.notification_sender.id;\n    }\n\n    message.metadata = messageMetadata;\n\n    if (message.metadata.sender_addon_key) {\n      let payload = IntegrationHelper.extractIntegrationParametersFromMessage(message);\n      let spec = {addon_key: message.notification_sender.id};\n\n      AppDispatcher.dispatch(\"integration-iframe-event\", MESSAGE_RECEIVED, spec, payload);\n    }\n  }\n\n  handleInfoMessage(message) {\n    if (message.x && !message.body) {\n      if (message.x.is_archived) {\n        message.body = ChatPanelStrings.user_changed_archive_status(this.getMessageSender(message), parseInt(message.x.is_archived) ? ChatPanelStrings.archived : ChatPanelStrings.unarchived);\n        return true;\n      } else if (typeof message.x.guest_url !== 'undefined') {\n        message.body = ChatPanelStrings.user_changed_guest_access(this.getMessageSender(message), message.x.guest_url ? ChatPanelStrings.turned_on : ChatPanelStrings.turned_off);\n        return true;\n      }\n    }\n    return false;\n  }\n\n  addLinks(jid, message) {\n    if (message.ts && !this.isCodeMessage(message) && !this.isMonospaceMessage(message)) {\n      let sender = this.getMessageSender(message);\n      let urls = link_utils.get_urls_from_string(message.body);\n      urls.forEach((url) => {\n        url = link_utils.wrapped_url_fix(message.body, url);\n        if (link_utils.url_should_be_replaced(message.body, url)) {\n          let link = link_utils.create_link_object(jid, message.ts, url, sender);\n          AppDispatcher.dispatch(\"add-link-from-message\", {\n            room: jid,\n            link: link\n          });\n        }\n      });\n    }\n  }\n\n  addFile(jid, message) {\n    if (message.ts) {\n      var sender = this.getMessageSender(message),\n        fileModel = File.fromMessageObject(message),\n        fileObject = utils.file.create_file_object(jid, fileModel, message.ts, sender);\n\n      if (fileObject) {\n        AppDispatcher.dispatch(\"add-file-from-message\", {\n          room: jid,\n          file: fileObject\n        });\n      }\n    }\n  }\n\n  /*\n   addXHTML(message) {\n   var xhtml,\n   $xhtml = $(this.mdParser.render(message.text));\n   $xhtml.is('p') ? xhtml = $xhtml.prop('innerHTML') : xhtml = $('<div/>').append($xhtml).html();\n   if ($xhtml.children().length) {\n   message.xhtml = xhtml;\n   }\n   return message;\n   }\n   */\n\n  getAvatar(id) {\n    if (!id) {\n      return false;\n    }\n    var roster = this.store.get(\"roster\"),\n      user = _.find(roster, (item) => {\n        return String(item.id) === String(id);\n      });\n    return user ? user.photo_url : '';\n  }\n\n  processCard(card) {\n    if (!_.isString(card)) {\n      return false;\n    }\n    try {\n      var cardObj = JSON.parse(card);\n      if (_.has(cardObj, 'activity.html')) {\n        cardObj.activity.html = this.substituteMentionTagsForHtml(cardObj.activity.html);\n      }\n      return cardObj;\n    } catch (err) {\n      logger.error(\"Error trying to render a card\", err);\n      return false;\n    }\n  }\n\n  getNotificationAvatar(sender) {\n    if (!sender) {\n      return false;\n    }\n    var type = sender.type;\n\n    if (type === 'user') {\n      return this.getAvatar(utils.jid.user_id(sender.id));\n    }\n\n    return false;\n  }\n\n  getMentionTags(message) {\n    return $(\"<div>\" + message + \"</div>\").find(\"hc-mention\");\n  }\n\n  substituteMentionTagsForHtml(messageText) {\n    var that = this;\n    this.getMentionTags(messageText).each(function () {\n      var mentionName = $(this).text();\n      var mentionNameWithTag = $('<hc-mention>').append($(this).clone()).html();\n      var mentionHtml = utils.escapeAndLinkify(mentionName, that.getMentionArguments());\n      messageText = messageText.replace(mentionNameWithTag, mentionHtml);\n    });\n    return messageText;\n  }\n\n  isOneToOneChatClosed(message, jid, active_rooms) {\n    var roster = this.store.get(\"roster\");\n    return !active_rooms[jid]\n      && !message.is_user_sent\n      && utils.jid.is_private_chat(jid)\n      && roster[jid]\n      && parseFloat(message.ts) >= roster[jid].closed_at;\n  }\n\n  isEnsoVideoHistoryMessage(message) {\n    let messageBody = _.get(message, 'message', '');\n\n    return message.message_format === 'html'\n      && messageBody.indexOf('<a') !== -1\n      && messageBody.indexOf('data-target-options') !== -1\n      && messageBody.indexOf('enso_invite') !== -1\n      && messageBody.indexOf(VideoCallStrings.join_video_call_message) !== -1\n      && messageBody.indexOf('</a>') !== -1;\n  }\n\n}\n\nmodule.exports = MessageProcessor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/processors/message_processor.js\n **/","\"use strict\";\n\nexports.__esModule = true;\n\nvar _from = require(\"../core-js/array/from\");\n\nvar _from2 = _interopRequireDefault(_from);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (arr) {\n  return Array.isArray(arr) ? arr : (0, _from2.default)(arr);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/helpers/toArray.js\n ** module id = 174\n ** module chunks = 0\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport FaviconCounter from 'helpers/favicon_counter';\nimport TitleCounter from 'helpers/title_counter';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport PreferencesStore from 'stores/preferences_store';\nimport Presence from 'lib/enum/presence';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport strings from 'strings/chat_panel_strings';\n\nclass Notifier {\n\n  constructor() {\n    this.isSupported = typeof Notification !== 'undefined';\n    this.totalUnreadCount = 0;\n    this.totalUnreadHasMention = false;\n    this.titleNotifications = [];\n    this.audioDuration = {};\n    this.canPlay = {};\n    this.autoclose_timeout = AppConfig.notification_close_timeout;\n    this.maxNotifications = AppConfig.notification_limit;\n    this.notificationCount = 0;\n    this.group_name = '';\n    this.feature_flags = {};\n    this.current_user_presence = Presence.AVAILABLE;\n\n    this.titleCounter = new TitleCounter({\n      group_name: this.group_name,\n      feature_flags: this.feature_flags\n    });\n\n    try {\n      this.favicon = new FaviconCounter({\n        bgColor: AppConfig.favicon_bg_color,\n        maxCount: AppConfig.max_unread_count\n      });\n    } catch (e) {\n      logger.warn(e);\n    }\n  }\n\n  initialize(asset_base_uri, sound_asset_overrides = {}) {\n    function addSrc(audio, mediaType, path) {\n      var src = document.createElement('source');\n      src.type = mediaType;\n      src.src = path;\n      audio.appendChild(src);\n    }\n\n    if (typeof Audio !== \"undefined\") {\n      let supportCanPlay = 'oncanplay' in Audio.prototype;\n\n      this.audio = {\n        notification: asset_base_uri + (sound_asset_overrides.notify_sound_asset || AppConfig.notify_sound_asset),\n        incoming_call: asset_base_uri + (sound_asset_overrides.incoming_sound_asset || AppConfig.incoming_sound_asset),\n        outgoing_call: asset_base_uri + (sound_asset_overrides.outgoing_sound_asset || AppConfig.outgoing_sound_asset)\n      };\n      _.forOwn(this.audio, (path, key) => {\n        this.audio[key] = new Audio();\n        this.audio[key].addEventListener(\"loadedmetadata\", () => {\n          this.audioDuration[key] = this.audio[key].duration;\n        });\n\n        let canPlayHandler = () => {\n          this.canPlay[key] = true;\n        };\n\n        let checkIfCanPlay = this.checkIfCanPlay.bind(this, this.audio[key]);\n\n        if(supportCanPlay) {\n          this.audio[key].oncanplay = canPlayHandler;\n        } else if(checkIfCanPlay('audio/ogg') || checkIfCanPlay('audio/mpeg')) {\n          canPlayHandler();\n        }\n\n        addSrc(this.audio[key], 'audio/ogg', `${path}.ogg`);\n        addSrc(this.audio[key], 'audio/mpeg', `${path}.mp3`);\n      });\n    }\n  }\n\n  checkIfCanPlay(element, type) {\n    if (!element.canPlayType) {\n      return false;\n    }\n\n    let result = element.canPlayType(type);\n\n    if (result === 'probably' || result === 'maybe') {\n      return true;\n    }\n    return false;\n  }\n\n  update(data) {\n    this.group_name = data.group_name || this.group_name;\n    this.feature_flags = data.feature_flags || this.feature_flags;\n    this.current_user_presence = data.current_user_presence || this.current_user_presence;\n\n    if (this.titleCounter) {\n      this.titleCounter.update({\n        group_name: this.group_name,\n        feature_flags: this.feature_flags\n      });\n    }\n  }\n\n  notify(data) {\n    this._increaseCount();\n\n    if (this._shouldNotify(data.type)) {\n      let title = data.title;\n      if (_.get(this.feature_flags, \"web_client_subdomain_scoped_session\")) {\n        title = this._formatNewMessageNotificationTitle(data);\n      }\n      let notification = new Notification(title, this._getOptions(data));\n      this._bindNotification(notification, data.jid);\n    }\n  }\n\n  _shouldNotify(type) {\n    return this.isSupported\n      && (this.current_user_presence !== Presence.DND\n          || PreferencesStore.getNotifyWhenDND()\n          || (PreferencesStore.getNotifyForVideoWhenDND() && type === 'incoming_call'));\n  }\n\n  _formatNewMessageNotificationTitle(data){\n    let title = strings.notification_title_with_group(data.title, data.group_name);\n    return utils.strings.ellipsis(title, AppConfig.notification_title_max_character_length);\n  }\n\n  _shouldPlaySound(type) {\n    if (!PreferencesStore.getSoundsEnabled()) {\n      return false;\n    }\n\n    let message_sounds = PreferencesStore.getMessageSounds(),\n        video_sounds = PreferencesStore.getVideoSounds(),\n        is_dnd = this.current_user_presence === Presence.DND,\n        notify_when_dnd = PreferencesStore.getNotifyWhenDND(),\n        notify_for_video_when_dnd = PreferencesStore.getNotifyForVideoWhenDND();\n\n    if (type === 'outgoing_call' && video_sounds) {\n      return true;\n\n    } else if (type === 'notification' && message_sounds && (!is_dnd || notify_when_dnd)) {\n      return true;\n\n    } else if (type === 'incoming_call' && video_sounds && (!is_dnd || notify_when_dnd || notify_for_video_when_dnd)) {\n      return true;\n    }\n    return false;\n  }\n\n  playSound(type, loop) {\n    if (!this._shouldPlaySound(type)) {\n      return;\n    }\n\n    if (this.audio[type] && this.canPlay[type]) {\n      var audio = this.audio[type],\n          duration = this.audioDuration[type],\n          reset = function() {\n            this.currentTime = 0;\n            this.play();\n          };\n      if (duration && (audio.currentTime < duration)) {\n        try {\n          audio.pause();\n          audio.currentTime = 0;\n        } catch (e) {\n          logger.warn('HC-Client', e);\n        }\n      }\n      if (loop) {\n        audio.addEventListener('ended', reset);\n      } else {\n        audio.removeEventListener('ended', reset);\n      }\n      audio.play();\n    }\n  }\n\n  stopSounds(type) {\n    function stop(audio) {\n      try {\n        audio.pause();\n        audio.currentTime = 0;\n      } catch (e) {\n        logger.warn('HC-Client', e);\n      }\n    }\n    if (type && this.audio[type] && this.canPlay[type]) {\n      stop(this.audio[type]);\n    } else {\n      _.forEach(this.audio, (audio) => {\n         stop(audio);\n      });\n    }\n  }\n\n  updateTotalUnreadCount(count, hasMention) {\n    if (count !== this.totalUnreadCount || hasMention !== this.totalUnreadHasMention) {\n      this._updateFavicon(count, hasMention);\n      this._updateTitleBadge(count);\n      this.totalUnreadCount = count;\n      this.totalUnreadHasMention = hasMention;\n    }\n  }\n\n  setTitleNotification(notification) {\n    this.titleNotifications.push(notification);\n    this._updateTitleNotification();\n  }\n\n  unsetTitleNotification(id) {\n    _.remove(this.titleNotifications, { id: id });\n    this._updateTitleNotification();\n  }\n\n  _getOptions(data) {\n    var notificationData = {\n      icon: data.icon,\n      body: data.body\n    };\n    if (this.notificationCount >= this.maxNotifications) {\n      notificationData.tag = true;\n    }\n    return notificationData;\n  }\n\n  _bindNotification(notification, jid) {\n    notification.onclick = function () {\n      window.focus();\n      AppDispatcher.dispatch('set-route', {jid: jid});\n      AppDispatcher.dispatch('focus-video-window', {jid: jid});\n      AnalyticsDispatcher.dispatch('analytics-select-room', {jid: jid});\n      this.close();\n    };\n    notification.onshow = () => {\n      setTimeout(() => {\n        notification.close();\n      }, this.autoclose_timeout);\n    };\n    notification.onclose = () => {\n      this._decreaseCount(notification);\n    };\n  }\n\n  _increaseCount() {\n    this.notificationCount++;\n  }\n\n  _decreaseCount(notification) {\n    if (notification.tag) {\n      this.notificationCount = 0;\n    } else {\n      this.notificationCount--;\n    }\n  }\n\n  _updateFavicon(unreadTotal, hasMention) {\n    if (this.favicon) {\n      if (unreadTotal > 0) {\n        var opts = {\n          bgColor: AppConfig.favicon_bg_color,\n          maxCount: AppConfig.max_unread_count\n        };\n        if (hasMention) {\n          opts.bgColor = AppConfig.favicon_bg_color_with_mention;\n        }\n        this.favicon.badge(unreadTotal, opts);\n      } else {\n        this.favicon.reset();\n      }\n    }\n  }\n\n  _updateTitleBadge(unreadTotal) {\n    if (!this._browserNeedsBadge()){\n      return;\n    }\n\n    let unread_count = (unreadTotal > 0) ? unreadTotal : 0,\n        notification = this._getCurrentTitleNotification();\n    this.titleCounter.set(unread_count, notification);\n  }\n\n  _updateTitleNotification() {\n    var notification = this._getCurrentTitleNotification(),\n        unread_count = this._browserNeedsBadge() ? this.totalUnreadCount : 0;\n    this.titleCounter.set(unread_count, notification);\n  }\n\n  _getCurrentTitleNotification() {\n    var currentNotification = _.last(this.titleNotifications);\n    return _.get(currentNotification, 'text', null);\n  }\n\n  _browserNeedsBadge() {\n    return utils.browser.is.ie() || utils.browser.is.ie_edge() || utils.browser.is.safari();\n  }\n\n}\n\nmodule.exports = new Notifier();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/notifier.js\n **/","import utils from 'helpers/utils';\n\nclass FaviconCounter {\n\n  constructor(opt) {\n    this.def = {\n      bgColor: '#d00',\n      textColor: '#fff',\n      fontFamily: 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n      fontStyle: 'lighter', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n      elementId: false\n    };\n\n    this.browser = {};\n    this.browser.ff = typeof InstallTrigger !== 'undefined';\n    this.browser.opera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;\n\n    this.readyCb = function () {\n    };\n    this.ready = false;\n\n    this.opt = _.merge(this.def, opt);\n    this.opt.textColor = this.hexToRgb(this.opt.textColor);\n\n    try {\n      this.orig = this.getIcon();\n      this.canvas = document.createElement('canvas');\n      this.img = document.createElement('img');\n      if (this.orig.hasAttribute('href')) {\n        this.img.onload = () => {\n          this.h = (this.img.height > 0) ? this.img.height : 32;\n          this.w = (this.img.width > 0) ? this.img.width : 32;\n          this.canvas.height = this.h;\n          this.canvas.width = this.w;\n          this.context = this.canvas.getContext('2d');\n          this.setReady();\n        };\n        this.img.setAttribute('src', this.orig.getAttribute('href'));\n      } else {\n        this.img.setAttribute('src', '');\n        this.h = 32;\n        this.w = 32;\n        this.img.height = this.h;\n        this.img.width = this.w;\n        this.canvas.height = this.h;\n        this.canvas.width = this.w;\n        this.context = this.canvas.getContext('2d');\n        this.setReady();\n      }\n    } catch (e) {\n      throw 'Error initializing favico. Message: ' + e.message;\n    }\n  }\n\n  setReady() {\n    this.ready = true;\n    this.reset();\n    this.readyCb();\n  }\n\n  reset() {\n    if (!this.ready || !this.context) {\n      return;\n    }\n    this.context.clearRect(0, 0, this.w, this.h);\n    this.context.drawImage(this.img, 0, 0, this.w, this.h);\n    this.setIcon(this.canvas);\n  }\n\n  draw(opt) {\n\n    if (utils.browser.is.ie() || utils.browser.is.ie_edge()){\n        return;\n    }\n\n    this.ready = false;\n    var img = new Image();\n    img.onload = () => {\n      if (!this.context) {\n        return;\n      }\n      opt.n = (( typeof opt.n) === 'number') ? Math.abs(opt.n | 0) : opt.n;\n      opt.w = this.w;\n      opt.h = this.h;\n      opt.len = (\"\" + opt.n).length;\n      this.context.clearRect(0, 0, this.w, this.h);\n      this.context.drawImage(img, 0, 0);\n      this.context.beginPath();\n      this.context.font = this.opt.fontStyle + \" \" + Math.floor((opt.n > 99 ? opt.h * 1.2 : opt.h * 0.55)) + \"px \" + this.opt.fontFamily;\n      this.context.textAlign = 'center';\n      this.context.fillStyle = 'rgb(' + this.opt.textColor.r + ',' + this.opt.textColor.g + ',' + this.opt.textColor.b + ')';\n      if (typeof opt.n === 'number' && opt.n > this.opt.maxCount) {\n        this.context.font = \"bold \" + Math.floor(opt.h * 0.5) + \"px \" + this.opt.fontFamily;\n        this.context.fillText('•••', Math.floor(opt.w / 2), Math.floor(opt.h * 0.67));\n      } else {\n        this.context.fillText(opt.n, Math.floor(opt.w / 2), Math.floor(opt.h - opt.h * 0.34));\n      }\n      this.context.closePath();\n      this.setIcon(this.canvas);\n    };\n    var svg =\n      `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${this.w}\" height=\"${this.h}\"><g><path fill=\"${opt.bgColor}\" d=\"M29.1,28.9c-1.1-0.6-2.2-1.7-2.6-3.2c-0.1-0.3,0-0.5,0.2-0.7c3.2-2.5,5.2-6.1,5.2-10.2c0-7.5-7-13.6-15.8-13.6c-8.7,0-15.7,6.1-15.7,13.6c0,7.5,7,13.6,15.7,13.6c1.1,0,2.2-0.1,3.3-0.3c0.3-0.1,0.5,0,0.7,0.1c2.2,1.3,5.4,2.4,8.2,2.4c0.9,0,1.3-0.6,1.3-1.1C28.6,29.3-209.8,29.1,28.9z\"/></g></svg>`;\n    img.src = 'data:image/svg+xml,' + encodeURIComponent(svg);\n  }\n\n  badge(number, opts) {\n    try {\n      if (typeof (number) === 'number' ? (number > 0) : (number !== '')) {\n        var q = {\n          type: 'badge',\n          options: {\n            n: number,\n            bgColor: opts.bgColor || this.opt.bgColor\n          }\n        };\n        ['textColor'].forEach((o) => {\n          if (o in opts) {\n            q.options[o] = this.hexToRgb(opts[o]);\n          }\n        });\n        ['fontStyle', 'fontFamily'].forEach(function (o) {\n          if (o in opts) {\n            q.options[o] = opts[o];\n          }\n        });\n        this.draw(q.options);\n      } else {\n        this.reset();\n      }\n    } catch (e) {\n      throw 'Error setting badge. Message: ' + e.message;\n    }\n  }\n\n  getIcon() {\n    var elm = false;\n    var url = '';\n    var getLink = function () {\n      var link = document.getElementsByTagName('head')[0].getElementsByTagName('link');\n      for (var l = link.length, i = (l - 1); i >= 0; i--) {\n        if ((/(^|\\s)icon(\\s|$)/i).test(link[i].getAttribute('rel'))) {\n          return link[i];\n        }\n      }\n      return false;\n    };\n    if (this.opt.elementId) {\n      elm = document.getElementById(this.opt.elementId);\n      elm.setAttribute('href', elm.getAttribute('src'));\n    } else {\n      elm = getLink();\n      if (elm === false) {\n        elm = document.createElement('link');\n        elm.setAttribute('rel', 'icon');\n        document.getElementsByTagName('head')[0].appendChild(elm);\n      }\n    }\n    url = (this.opt.elementId) ? elm.src : elm.href;\n    if (url.substr(0, 5) !== 'data:' && url.indexOf(document.location.hostname) === -1) {\n      throw new Error('Error setting favicon. Favicon image is on different domain (Icon: ' + url + ', Domain: ' + document.location.hostname + ')');\n    }\n    elm.setAttribute('type', 'image/png');\n    return elm;\n  }\n\n  setIcon(canvas) {\n    var url = canvas.toDataURL('image/png');\n    if (this.opt.elementId) {\n      document.getElementById(this.opt.elementId).setAttribute('src', url);\n    } else {\n      if (this.browser.ff || this.browser.opera) {\n        var old = this.orig;\n        this.orig = document.createElement('link');\n        if (this.browser.opera) {\n          this.orig.setAttribute('rel', 'icon');\n        }\n        this.orig.setAttribute('rel', 'icon');\n        this.orig.setAttribute('type', 'image/png');\n        document.getElementsByTagName('head')[0].appendChild(this.orig);\n        this.orig.setAttribute('href', url);\n        if (old.parentNode) {\n          old.parentNode.removeChild(old);\n        }\n      } else {\n        //This is because of a Chrome bug where batched repaints prevent the favicon from changing\n        _.defer(() => {\n          this.orig.setAttribute('href', url);\n        });\n      }\n    }\n    this.ready = true;\n  }\n\n  //http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n  //HEX to RGB convertor\n  hexToRgb(hex) {\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : false;\n  }\n}\n\nmodule.exports = FaviconCounter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/favicon_counter.js\n **/","import strings from 'strings/common_strings';\nimport AppConfig from 'config/app_config';\n\nexport default class TitleCounter {\n\n  constructor(data) {\n    this.group_name = null;\n    this.feature_flags = {};\n    this.update(data);\n  }\n\n  update(data) {\n    var group_name = _.get(data, 'group_name', ''),\n        feature_flags = _.get(data, 'feature_flags', {});\n\n    if (group_name !== this.group_name || !_.isEqual(feature_flags, this.feature_flags)) {\n      this.group_name = group_name;\n      this.feature_flags = feature_flags;\n      this.set();\n    }\n  }\n\n  set(unread_count = 0, notification = null) {\n    var title = [];\n\n    if (unread_count > AppConfig.max_unread_count) {\n      title.push(`(${AppConfig.max_unread_count}+)`);\n    } else if (unread_count) {\n      title.push(`(${unread_count})`);\n    }\n\n    if (notification) {\n      title.push(notification, '-');\n    } else if (this.feature_flags.web_client_subdomain_scoped_session) {\n      title.push(this.group_name, '-');\n    }\n\n    title.push(strings.app_name);\n\n    this.setTitle(title.join(' '));\n  }\n\n  setTitle(title) {\n    document.title = title;\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/title_counter.js\n **/","export default {\n  app_name: `HipChat`,\n  filter_label: `Filter rooms and people`,\n  filter: `Filter`,\n  all: `All`,\n  rooms: `Rooms`,\n  people: `People`,\n  sign_in: `Sign in`,\n  lobby: `Lobby`,\n  youre_welcome: `you're welcome here`,\n  search_results: `Search results`,\n  buttons: {\n    create_room: `Create a room`,\n    invite_team: `Invite your team`,\n    invite_team_in_lobby: `Invite someone to join!`,\n    invite_team_in_qs: `Invite them to join!`,\n    invite_team_in_invite_users_dialog: `Invite them to join!`\n  },\n  no_one_found: 'No one found',\n  loud: `Loud`,\n  normal: `Normal`,\n  quiet: `Quiet`,\n  room_not_found: `We couldn't find that room. It may have been deleted or you may have the wrong ID.`,\n  user_not_found: `We couldn't find that person.`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/common_strings.js\n **/","import Dispatcher from 'lib/core/dispatcher';\nimport Logger from 'helpers/logger';\n\nclass AnalyticsDispatcher extends Dispatcher {\n\n  dispatch(action, ...args) {\n    // most of these are fine to log in verbose mode, but logging every single keystroke is a bit much\n    // Test if Logger.log is defined before trying to log (because of circular dependencies)\n    if (Logger.log) {\n      if (action !== 'analytics-set-message-value') {\n        Logger.debug('[AnalyticsDispatcher: ' + action + ']', ...args);\n        Logger.type('analytics-dispatcher:' + action)\n          .log(...args);\n      }\n    }\n\n    super.dispatch(action, ...args);\n  }\n}\n\nexport default new AnalyticsDispatcher();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/dispatchers/analytics_dispatcher.js\n **/","export default Object.freeze({\n  AVAILABLE: 'chat',\n  IDLE: 'away',\n  AWAY: 'xa',\n  MOBILE: 'mobile',\n  DND: 'dnd',\n  UNAVAILABLE: 'unavailable'\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/enum/presence.js\n **/","export default {\n  show_more: `Show more`,\n  show_less: `Show less`,\n  failed_message: `Couldn't send`,\n  failed_message_retry: `Retry`,\n  failed_message_cancel: `Cancel`,\n  unconfirmed_message_group: `Sending...`,\n  room_doesnt_exist: `This room doesn't exist; it may have been archived or deleted.`,\n  integration_does_not_exist: `This addon does not exist; it may have been uninstalled from this room.`,\n  user_leave: function(name) {\n    return `${name} left the room`;\n  },\n  user_join: function(name) {\n    return `${name} joined the room`;\n  },\n  user_removed: function(name) {\n    return `${name} was removed from the room`;\n  },\n  user_added: function(name) {\n    return `${name} was added to the room`;\n  },\n  user_leave_reason: function(name, reason) {\n    return `${name} left the room (${reason})`;\n  },\n  user_changed_guest_access: function(name, action) {\n    return `${name} ${action} guest access`;\n  },\n  user_changed_archive_status: function(name, action) {\n    return `${name} ${action} the room`;\n  },\n  generic_message: function (name) {\n    return `Message from ${name}`;\n  },\n  generic_file_message: function (name) {\n    return `${name} uploaded a file`;\n  },\n  generic_file_uploaded_message: function (name, file) {\n    return `${name} uploaded ${file}`;\n  },\n  topic_message: function (name, topic) {\n    return `${name} changed the topic to: ${topic}`;\n  },\n  clear_topic_message: function (name) {\n    return `${name} cleared the topic.`;\n  },\n  room_notification_title: function (sender, room_name) {\n    return `${sender} - ${room_name}`;\n  },\n  oto_notification_title: function (sender) {\n    return `${sender}`;\n  },\n  notification_title_with_group: function (title, group_name) {\n    return `${title} (${group_name})`;\n  },\n  you_have_been_removed: `You have been removed from the room`,\n  archived: `archived`,\n  unarchived: `unarchived`,\n  not_allowed: `guest access unavailable`,\n  turned_on: `turned on`,\n  turned_off: `turned off`,\n  loading_thumbnail: `Loading thumbnail…`,\n  loading_image: `Loading image…`,\n  image_error: `Failed to load the image`,\n  thumbnail_error: `Failed to load thumbnail`,\n  image_hidden: `Image hidden`,\n  edited: `Edited`,\n  message_deleted: `Message deleted`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/chat_panel_strings.js\n **/","import utils from 'helpers/utils';\nimport * as NS from 'core/xmpp/lib/namespaces';\nimport ConfigStore from 'stores/configuration_store';\n\nexport function getAuthenticatedFileUrl (id, thumbnail = false) {\n  var api_host = ConfigStore.get('api_host'),\n      thumb = thumbnail ? '?thumbnail=true' : '';\n  return `https://${api_host}/v2/file/${id}${thumb}`;\n}\n\n/**\n * @class File\n *\n * @property {number} id\n * @property {string} name\n * @property {string} desc\n * @property {number} size\n * @property {string} date\n * @property {string} url\n * @property {string} thumb_url\n * @property {number} group_id\n * @property {number} user_id\n * @property {string} auth_scheme\n *\n * Derived properties\n * @property {string} file_type\n * @property {string} file_name\n * @property {string} file_ext\n * @property {string} file_size\n * @property {boolean} is_authenticated\n */\n\nexport default class File {\n\n  /**\n  * @constructs\n  * @param {object} input\n  * @param {string|null} input.id\n  * @param {string} input.name\n  * @param {string} input.desc\n  * @param {string|number} input.size\n  * @param {string} input.date\n  * @param {string|null} input.url\n  * @param {string|null} input.thumb_url\n  * @param {string|null} input.group_id\n  * @param {string|null} input.user_id\n  * @param {string|null} input.auth_scheme\n  * @param {boolean} input.is_authenticated\n  */\n  constructor(input = Object.create(null)) {\n    this.id = input.id || null;\n    this.name = input.name || '';\n    this.desc = input.desc || '';\n    this.size = parseInt(input.size, 10) || 0;\n    this.date = input.date ? new Date(input.date) : '';\n    this.url = input.is_authenticated ? getAuthenticatedFileUrl(input.id, false) : (input.url || null);\n    this.thumb_url = input.is_authenticated ? getAuthenticatedFileUrl(input.id, true) : (input.thumb_url || null);\n    this.group_id = parseInt(input.group_id, 10) || null;\n    this.user_id = parseInt(input.user_id, 10) || null;\n    this.auth_scheme = input.auth_scheme || '';\n    this.is_authenticated = input.is_authenticated || false;\n\n    // Derive props\n    this.file_name = this.name.split('/').pop();\n    this.file_type = utils.file.get_file_type(this.name, true);\n    this.file_ext = utils.file.get_extension(this.name);\n    this.file_size = utils.file.get_size_string(this.size);\n\n    // Preview Thumb\n    this.preview_thumbnail = this.file_type === 'img' ? new Image : null;\n  }\n\n  /**\n   * Takes a file node from a message stanza or IQ query result for a chat's files,\n   * and returns a File model. Example stanzas:\n   *\n   *  Legacy XMPP Message File Node\n   *\n   *  <message xmlns=\"jabber:client\" type=\"groupchat\"\n   *           from=\"1_example@conf.devvm.hipchat.com/Bob Test\"\n   *           mid=\"96d28d5c-99ef-4e32-9b10-e56037fb826c\" ts=\"1456172560.068233\"\n   *           to=\"1_1@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222\">\n   *    <body>File uploaded: https://s3.amazonaws.com/devuploads.hipchat.com/30/263/Lv6iCamVfouH9U3/dean_cain.jpg</body>\n   *    <x xmlns=\"http://hipchat.com/protocol/muc#room\">\n   *      <file>\n   *        <name>30/263/Lv6iCamVfouH9U3/dean_cain.jpg</name>\n   *        <desc>test</desc>\n   *        <bucket>devuploads.hipchat.com</bucket>\n   *        <endpoint>s3.amazonaws.com</endpoint>\n   *        <size>12777</size>\n   *        <thumb>30/263/Lv6iCamVfouH9U3/dean_cain_thumb.jpg</thumb>\n   *        <thumb_url>https://s3.amazonaws.com/devuploads.hipchat.com/30/263/Lv6iCamVfouH9U3/dean_cain_thumb.jpg</thumb_url>\n   *        <file_url>https://s3.amazonaws.com/devuploads.hipchat.com/30/263/Lv6iCamVfouH9U3/dean_cain.jpg</file_url>\n   *      </file>\n   *    </x>\n   *    <delay from_jid=\"30_263@chat.devvm.hipchat.com\" stamp=\"2016-01-04T22:28:11Z\" xmlns=\"urn:xmpp:delay\"/>\n   *  </message>\n   *\n   *  Legacy XMPP IQ File List Query\n   *\n   *  <iq from=\"1_1@chat.hipchat.com\" id=\"1\" type=\"result\">\n   *    <query xmlns=\"http://hipchat.com/protocol/files\">\n   *      <item>\n   *        <id>2</id>\n   *        <name>10803/29833/randomchars/lolwut.png</name>\n   *        <thumbnail>10803/29833/rnd/lolwut_thumb.png</thumbnail>\n   *        <bucket>downloads.hipchat.com</bucket>\n   *        <size>1803</size>\n   *        <desc>OMG LOLWUT</desc>\n   *        <group_id>10803</group_id>\n   *        <user_id>29833</user_id>\n   *        <date>2013-03-10T12:00:00Z</date>\n   *        <authenticated>0</authenticated>\n   *        <file_url>https://s3.amazonaws.com/devuploads.hipchat.com/10803/29833/rnd/lolwut.png</file_url>\n   *        <thumb_url>https://s3.amazonaws.com/devuploads.hipchat.com/10803/29833/rnd/lolwut_thumb.png</thumb_url>\n   *      </item>\n   *      <item>...</item>\n   *      <item>...</item>\n   *    </query>\n   *  </iq>\n   *\n   *  Signed XMPP File Node\n   *\n   *  <message>\n   *    <body>User description: https://api.hipchat.com/v2/file/file_id</body>\n   *    <delay xmlns=\"urn:xmpp:delay\" from_jid=\"...\" stamp=\"...\"/>\n   *    <authenticated_file xmlns=\"http://hipchat.com/protocol/file\">\n   *      <desc>User description</desc>\n   *      <id>7c2f5173-c9f9-4840-8471-eca32ab8151b</id>\n   *      <date>2013-03-10T12:00:00Z</date>\n   *      <name>filename.txt</name>\n   *      <size>12777</size>\n   *      <group_id>10803</group_id>\n   *      <user_id>29833</user_id>\n   *      <auth_scheme>bearer</auth_scheme>\n   *    </authenticated_file>\n   *    <x xmlns=\"...\">\n   *      HipChat custom x element\n   *    </x>\n   *  </message>\n   *\n   *  Signed XMPP IQ File List Query\n   *\n   *   <iq from=\"1_1@chat.hipchat.com\" id=\"1\" type=\"result\">\n   *     <query xmlns=\"http://hipchat.com/protocol/file\">\n   *       <authenticated_file>\n   *         <id>7c2f5173-c9f9-4840-8471-eca32ab8151b</id>\n   *         <desc>User description</desc>\n   *         <date>2013-03-10T12:00:00Z</date>\n   *         <name>filename.txt</name>\n   *         <size>12777</size>\n   *         <group_id>10803</group_id>\n   *         <user_id>29833</user_id>\n   *         <auth_scheme>bearer</auth_scheme>\n   *       </authenticated_file>\n   *       <authenticated_file>...</authenticated_file>\n   *       <authenticated_file>...</authenticated_file>\n   *     </query>\n   *   </iq>\n   *\n   * @static\n   * @method fromXMPP\n   * @param xmpp - xml result from a iq or message\n   * @returns {File}\n   */\n  static fromXMPP(file) {\n    var url, is_authenticated;\n\n    function queryContent(name, defaultVal = null) {\n      var node = file.querySelector(name);\n      return _.get(node, 'textContent', defaultVal);\n    }\n\n    // <authenticated_file> node has the secure file namespace or is in a <query> node that does\n    if (file.getAttribute('xmlns') === NS.HC_AUTHENTICATED_FILE || file.nodeName === 'authenticated_file') {\n      url = queryContent('url');\n      is_authenticated = true;\n\n    } else {\n      url = queryContent('file_url');\n      is_authenticated = false;\n    }\n\n    return new File({\n      id: queryContent('id'),\n      name: queryContent('name', ''),\n      desc: queryContent('desc', ''),\n      size: queryContent('size', 0),\n      date: new Date(queryContent('date', '')),\n      url,\n      thumb_url: queryContent('thumb_url', ''),\n      group_id: queryContent('group_id'),\n      user_id: queryContent('user_id'),\n      auth_scheme: queryContent('auth_scheme'),\n      is_authenticated\n    });\n  }\n\n  /**\n  * Returns file model from the rest message representation. This is for fetching\n  * recent message history for a room via Coral.\n  *\n  * NOTE: This is not currently in use. It's here in anticipation of a Strophe\n  *       plugin implementation for messages.\n  *\n  * Legacy File\n  *\n  * {\n  *   \"date\": \"2016-02-19T22:10:27.764729+00:00\",\n  *   \"file\": {\n  *     \"name\": \"IMG_1498.jpg\",\n  *     \"size\": 1392206,\n  *     \"thumb_url\": \"https://s3.amazonaws.com/devuploads.hipchat.com/1/2/XdKMxPuW12nbHyf/IMG_1498_thumb.jpg\",\n  *     \"url\": \"https://s3.amazonaws.com/devuploads.hipchat.com/1/2/XdKMxPuW12nbHyf/IMG_1498.jpg\"\n  *   },\n  *   \"from\": {\n  *     \"id\": 2,\n  *     \"links\": {\n  *       \"self\": \"https://devvm.hipchat.com/v2/user/2\"\n  *     },\n  *     \"mention_name\": \"BobTest\",\n  *     \"name\": \"Bob Test\",\n  *     \"version\": \"VT20ETYG\"\n  *   },\n  *   \"id\": \"e089070f-6918-43bb-8868-eb9d65f225eb\",\n  *   \"mentions\": [],\n  *   \"message\": \"Here's that picture you wanted.\",\n  *   \"type\": \"message\"\n  * }\n  *\n  * Signed File\n  *\n  * {\n  *   \"date\": \"2016-02-19T22:10:27.764729+00:00\",\n  *   \"authenticated_file\": {\n  *     \"id\": \"7c2f5173-c9f9-4840-8471-eca32ab8151b\",\n  *     \"name\": \"IMG_1498.jpg\",\n  *     \"size\": 1392206\n  *   },\n  *   \"from\": {\n  *     \"id\": 2,\n  *     \"links\": {\n  *       \"self\": \"https://devvm.hipchat.com/v2/user/2\"\n  *     },\n  *     \"mention_name\": \"BobTest\",\n  *     \"name\": \"Bob Test\",\n  *     \"version\": \"VT20ETYG\"\n  *   },\n  *   \"id\": \"e089070f-6918-43bb-8868-eb9d65f225eb\",\n  *   \"mentions\": [],\n  *   \"message\": \"Here's that picture you wanted.\",\n  *   \"type\": \"message\"\n  * }\n  *\n  * @static\n  * @method fromREST\n  * @param {object} json\n  * @returns {File}\n  */\n  static fromREST(json) {\n    var file = json.authenticated_file,\n        is_authenticated = true;\n\n    if (!file) {\n      file = json.file;\n      is_authenticated = false;\n    }\n\n    return new File({\n      id: file.id,\n      name: file.name,\n      desc: json.message,\n      size: file.size,\n      date: json.date,\n      url: file.url,\n      thumb_url: file.thumb_url,\n      is_authenticated\n    });\n  }\n\n  /**\n   * Returns a file model from the XML2JSON representation of a message stanza\n   * received via XMPP or the JSON representation of a message fetched via Coral.\n   *\n   * NOTE: This is a temporary solution until a Strophe plugin is built to handle\n   *       processing messages which would use the `fromXMPP` and `fromREST` methods.\n   *\n   * Legacy FileModel:\n   *\n   * {\n   *   \"date\": \"2016-02-19T22:10:27.764729+00:00\",\n   *     \"x\": {\n   *       \"xmlns\": \"http://hipchat.com/protocol/muc#room\",\n   *       \"file\": {\n   *       \"name\": \"30/263/Lv6iCamVfouH9U3/dean_cain.jpg\",\n   *       \"desc\": \"test\",\n   *       \"bucket\": \"devuploads.hipchat.com\",\n   *       \"endpoint\": \"s3.amazonaws.com\",\n   *       \"size\": \"12777\",\n   *       \"thumb\": \"30/263/Lv6iCamVfouH9U3/dean_cain_thumb.jpg\",\n   *       \"thumb_url\": \"https://s3.amazonaws.com/devuploads.hipchat.com/30/263/Lv6iCamVfouH9U3/dean_cain_thumb.jpg\",\n   *       \"file_url\": \"https://s3.amazonaws.com/devuploads.hipchat.com/30/263/Lv6iCamVfouH9U3/dean_cain.jpg\"\n   *     }\n   *   }\n   *   \"from\": {\n   *     \"id\": 2,\n   *     \"links\": {\n   *       \"self\": \"https://devvm.hipchat.com/v2/user/2\"\n   *     },\n   *     \"mention_name\": \"BobTest\",\n   *     \"name\": \"Bob Test\",\n   *     \"version\": \"VT20ETYG\"\n   *   },\n   *   \"id\": \"e089070f-6918-43bb-8868-eb9d65f225eb\",\n   *   \"mentions\": [],\n   *   \"message\": \"Here's that picture you wanted.\",\n   *   \"type\": \"message\"\n   * }\n   *\n   * Signed FileModel:\n   *\n   * {\n   *   \"date\": \"2016-02-19T22:10:27.764729+00:00\",\n   *   \"authenticated_file\": {\n   *     \"xmlns\": \"http://hipchat.com/protocol/muc#room\",\n   *     \"id\": \"7c2f5173-c9f9-4840-8471-eca32ab8151b\",\n   *     \"desc\": \"User description\",\n   *     \"id\": \"7c2f5173-c9f9-4840-8471-eca32ab8151b\",\n   *     \"date\": \"2013-03-10T12:00:00Z\",\n   *     \"name\": \"filename.txt\",\n   *     \"size\": \"12777\",\n   *     \"group_id\": \"10803\",\n   *     \"user_id\": \"29833\",\n   *     \"auth_scheme\": \"bearer\"\n   *   }\n   *   \"from\": {\n   *     \"id\": 2,\n   *     \"links\": {\n   *       \"self\": \"https://devvm.hipchat.com/v2/user/2\"\n   *     },\n   *     \"mention_name\": \"BobTest\",\n   *     \"name\": \"Bob Test\",\n   *     \"version\": \"VT20ETYG\"\n   *   },\n   *   \"id\": \"e089070f-6918-43bb-8868-eb9d65f225eb\",\n   *   \"mentions\": [],\n   *   \"message\": \"Here's that picture you wanted.\",\n   *   \"type\": \"message\"\n   * }\n   *\n   * @static\n   * @method fromMessageObject\n   * @param {object} msg\n   * @returns {File}\n   */\n  static fromMessageObject(msg) {\n    var file = msg.authenticated_file,\n        url, desc, is_authenticated;\n\n    // Secure file\n    if (file) {\n      url = file.url;\n      is_authenticated = true;\n\n    // Legacy file\n    } else {\n      // via XMPP\n      if (msg.x) {\n        file = Array.isArray(msg.x) ? msg.x[0].file : msg.x.file;\n        url = file.file_url;\n      // via API\n      } else {\n        file = msg.file;\n        url = file.url;\n      }\n      is_authenticated = false;\n    }\n\n    // Use the file desc for XMPP\n    if (file.desc !== undefined && !msg.replace) {\n      desc = file.desc || '';\n\n    // Use the message body for REST\n    } else {\n      desc = msg.body || msg.message;\n    }\n\n    return new File({\n      id: file.id,\n      name: file.name,\n      desc,\n      size: file.size,\n      date: file.date || msg.date,\n      url,\n      thumb_url: file.thumb_url,\n      group_id: file.group_id,\n      user_id: file.user_id,\n      auth_scheme: file.auth_scheme,\n      is_authenticated\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/models/file.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport PreferencesStore from 'stores/preferences_store';\nimport spi from 'spi';\n\n/**\n * Global actions intended for non react managed actions like mention clicks, etc.\n * @module actions/AppActions\n */\nmodule.exports = {\n\n  /**\n   * Opens a chat based on an HTML element with a data-mention-name attribute.\n   * Used primarily to allow hyperlinks to open a 1-1 chat by mention name.\n   * @param {HTMLAnchorElement} target Hyperlink\n   * @param {Attr} target.dataset.mentionName HipChat registered @-mention name of user\n   */\n  openChatByMentionName: function(target) {\n    var mentionName = (typeof target === 'string') ? target : target.dataset.mentionName;\n    AppDispatcher.dispatch('open-chat-by-mention-name', mentionName);\n    AnalyticsActions.chatRoomMentionClicked();\n  },\n\n  /**\n   * Open a chat by JID\n   * @param data\n   */\n  openChatByJID: function(data){\n    AppDispatcher.dispatch('set-route', {jid: data.jid});\n    data.source = \"jid\";\n    AnalyticsDispatcher.dispatch('analytics-open-room', data);\n  },\n\n  /**\n   * Set route by JID\n   * @param jid\n   */\n  navigateToChat: function(jid) {\n    if (jid) {\n      AppDispatcher.dispatch('set-route', {\n        jid: jid\n      });\n    }\n  },\n\n  restoreRoomOrder(jid){\n    AppDispatcher.dispatch('restore-room-order', {\n      jid\n    });\n  },\n\n  /**\n   * Add file to the chat input for uploading via fileUrl\n   * @param fileUrl\n   * @param source dragndrop or paste\n   */\n  addFileForUploadWithUrl: function(fileUrl, source) {\n    if (fileUrl) {\n      AppDispatcher.dispatch('add-file-for-upload-with-url', {\n        fileUrl: fileUrl,\n        source: source\n      });\n    }\n  },\n\n  /**\n   * Add file to the chat input for uploading via base64\n   * @param base64 valid base64 string\n   * @param fileName\n   * @param source dragndrop or paste\n   */\n  addFileForUploadWithBase64: function(base64, fileName, source) {\n    if (base64) {\n      AppDispatcher.dispatch('add-file-for-upload-with-base64', {\n        base64: base64,\n        fileName,\n        source\n      });\n    }\n  },\n\n  /**\n   * Request addLive credentials from the server\n   * @param jid\n   * @param callback\n   */\n  requestAddLiveCredentials: function (jid, callback) {\n    AppDispatcher.dispatch('request-addlive-credentials', { jid }, callback);\n  },\n\n  /**\n   * Analytics event\n   * @private\n   */\n  logoClicked: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.top.navigation.logo.clicked\"\n    });\n  },\n\n  /**\n   * Enables an \"experimental\" feature in a way that can be triggered by Optimizely.  This will be added to the\n   * features map on the hc.config object\n   *\n   * @param {String} featureName the name of the feature to enable\n   * @param {String} user_jid user jid\n   */\n  enableDarkFeature: function(featureName, user_jid) {\n    AppDispatcher.dispatch(\"enable-dark-feature\", {name: featureName});\n\n    var analyticsData = {\n      name: \"hipchat.client.darkfeature.enabled\",\n      feature: featureName,\n      user_jid: user_jid\n    };\n    AnalyticsDispatcher.dispatch(\"analytics-event\", analyticsData);\n  },\n\n  clearWebCookies: function (cb) {\n    AppDispatcher.dispatch(\"clear-web-cookies\", cb);\n  },\n\n  revokeOauth2Token: function (cb) {\n    AppDispatcher.dispatch(\"revoke-oauth2-token\", cb);\n  },\n\n  /**\n   * Requests room participants from API v2.\n   */\n  fetchRoomParticipants: function (room, includeOffline) {\n    AppDispatcher.dispatch(\"fetch-room-participants\", room, includeOffline);\n  },\n\n  /**\n   * Logs user out of /chat\n   */\n  signout: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.top.navigation.profile.signout.clicked\"\n    });\n    AppDispatcher.dispatch('signout');\n  },\n\n  logInToAnotherTeam: function() {\n    AnalyticsActions.logInToAnotherTeamClicked();\n    spi.onLogInToAnotherTeam();\n  },\n\n  showNotification: function (options = {}, ...args) {\n    if (PreferencesStore.shouldIssueNotification()) {\n      let notification_types = Object.assign({}, PreferencesStore.getNotificationTypes(), options.notification_types);\n      options.notification_types = notification_types;\n      spi.onNotification(options, ...args);\n    }\n  },\n\n  updateTotalUnreadCount: function() {\n    spi.onTotalUnreadCountUpdate.apply(this, arguments);\n  },\n\n  openExternalWindow: function(...args) {\n    spi.openExternalWindow(...args);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/app_actions.js\n **/","import AnalyticsDispatcher from \"dispatchers/analytics_dispatcher\";\nimport AnalyticsKeys from 'keys/analytics_keys';\nimport utils from 'helpers/utils';\n\nexport default {\n\n  successfulAuthEvent (jid, token){\n    AnalyticsDispatcher.dispatch(\"analytics-initial-auth-done\", {jid: jid, token: token});\n  },\n\n  inviteTeamClickedEvent(source) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.${source}.invite.team.clicked`\n    });\n  },\n\n  inviteUserToRoomClickedEvent(source) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.${source}.invite.user.to.room.clicked`\n    });\n  },\n\n  createRoomClickedEvent(source) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.${source}.create.room.clicked`\n    });\n  },\n\n  connectDialogLinkClickedEvent(addon_key) {\n    AnalyticsDispatcher.dispatch('analytics-connect-dialog-click', {addon_key: addon_key});\n  },\n\n  connectDialogClosedEvent(addon_key) {\n    AnalyticsDispatcher.dispatch('analytics-connect-dialog-close', {addon_key: addon_key});\n  },\n\n  newChatButtonClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.top.new.chat.button.clicked'\n    });\n  },\n\n  failedMessageRetried() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.queued.retry'\n    });\n  },\n\n  failedMessageCanceled() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.queued.cancel'\n    });\n  },\n\n  lobbyRoomNavItemClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.left.navigation.lobby.clicked'\n    });\n  },\n\n  lobbyNoResults(query) {\n    if(query && query.length) {\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: 'hipchat.client.lobby.noresults',\n        properties: {\n          queryLength: query.length\n        }\n      });\n    }\n  },\n\n  lobbyFocusedWithKeyboardShortcut() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.keyboard.navigation.lobby.selected'\n    });\n  },\n\n  quickSwitcherNoResults(query) {\n    if(query && query.length) {\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: 'hipchat.client.switcher.noresults',\n        properties: {\n          queryLength: query.length\n        }\n      });\n    }\n  },\n\n  quickSwitcherViewed() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.switcher.viewed'\n    });\n  },\n\n  logInToAnotherTeamClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.multiorg.account.another_team.clicked'\n    });\n  },\n\n  fileUploadRequested(fileType, roomType, source) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.file.uploaded.${roomType}`,\n      properties: {\n        fileType: fileType,\n        source: source\n      }\n    });\n  },\n\n  roomNotificationIconClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.notifications.icon.clicked'\n    });\n  },\n\n  hideGifsClicked(oldVal, newVal) {\n    AnalyticsDispatcher.dispatch('analytics-hide-gifs', {\n      oldVal: oldVal,\n      newVal: newVal\n    });\n  },\n\n  privateRoomNotificationClicked(oldVal, newVal) {\n    AnalyticsDispatcher.dispatch('analytics-room-notification-setting', {\n      name: \"hipchat.client.settings.notifications.privateroom\",\n      props: {\n        oldVal: oldVal,\n        newVal: newVal\n      }\n    });\n  },\n\n  openRoomNotificationClicked(oldVal, newVal) {\n    AnalyticsDispatcher.dispatch('analytics-room-notification-setting', {\n      name: \"hipchat.client.settings.notifications.openroom\",\n      props: {\n        oldVal: oldVal,\n        newVal: newVal\n      }\n    });\n  },\n\n  lightThemeSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.theme.light'\n    });\n  },\n\n  darkThemeSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.theme.dark'\n    });\n  },\n\n  tighterTextDensitySelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.textdensity.tighter'\n    });\n  },\n\n  normalTextDensitySelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.textdensity.normal'\n    });\n  },\n\n  classicChatViewSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.chatview.classic'\n    });\n  },\n\n  classicNeueChatViewSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.chatview.classicneue'\n    });\n  },\n\n  fullNamesNameDisplaySelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.namedisplay.fullnames'\n    });\n  },\n\n  mentionNamesNameDisplaySelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.namedisplay.mentionname'\n    });\n  },\n\n  animatedAvatarsSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.avatars.animated'\n    });\n  },\n\n  staticAvatarsSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.avatars.static'\n    });\n  },\n\n  generalSettingsPanelSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.general.clicked'\n    });\n  },\n\n  notificationsSettingsPanelSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.notifications.clicked'\n    });\n  },\n\n  appearanceSettingsPanelSelected() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.settings.appearance.clicked'\n    });\n  },\n\n  roomNotificationDropdownClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.notifications.dropdown.clicked'\n    });\n  },\n\n  roomNotificationLevelChanged(oldValue, newValue) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.notifications.level.changed',\n      properties: {\n        oldValue: oldValue,\n        newValue: newValue\n      }\n    });\n  },\n\n  globalNotificationLevelChanged(oldValue, newValue) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.global.notifications.level.changed',\n      properties: {\n        oldValue: oldValue,\n        newValue: newValue\n      }\n    });\n  },\n\n  handleLaunchToActiveChatList(data) {\n    AnalyticsDispatcher.dispatch('performance-timing:analytics-launch-to-active-chat-list', {\n      size: _.get(data, \"size\")\n    });\n  },\n\n  handleLaunchToChat(data) {\n    AnalyticsDispatcher.dispatch('performance-timing:analytics-launch-to-chat', {\n      size: _.get(data, \"size\")\n    });\n  },\n\n  handleLaunchToChatComplete(data) {\n    AnalyticsDispatcher.dispatch('performance-timing:analytics-launch-to-chat-complete', {\n      jid: _.get(data, \"jid\"),\n      id: _.get(data, \"id\")\n    });\n  },\n\n  roomIntegrationsDropdownClicked(hasWarningIcon) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.integrations.dropdown.clicked',\n      properties: {\n        hasWarningIcon: hasWarningIcon\n      }\n    });\n  },\n\n  roomIntegrationsLinkClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.integrations.link.clicked'\n    });\n  },\n\n  roomIntegrationsGlanceClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.integrations.glance.clicked'\n    });\n  },\n\n  roomIntegrationsGlanceDismissed() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.room.integrations.glance.dismissed'\n    });\n  },\n\n  tryToReconnectFromHeader() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.reconnection.header.try.again.button.clicked'\n    });\n  },\n\n  connectionUIStateOffline() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.connection.ui.offline'\n    });\n  },\n\n  connectionUIStateConnecting() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.connection.ui.connecting'\n    });\n  },\n\n  connectionUIStateConnectDelay() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.connection.ui.connectdelay'\n    });\n  },\n\n  connectionUIStateCannotConnect() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.connection.ui.cannotconnect'\n    });\n  },\n\n  editProfileClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.top.navigation.profile.editProfile.clicked'\n    });\n  },\n\n  searchInputClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.search.clicked'\n    });\n  },\n\n  searchInputSubmitted(jidOrId) {\n    let type;\n    if (utils.jid.is_chat(jidOrId)){\n      type = utils.room.detect_chat_type(jidOrId);\n    } else if (utils.jid.is_lobby(jidOrId) || jidOrId === 'all') {\n      type = 'all';\n    } else if (jidOrId) {\n      if (jidOrId === \"muc\") {\n        type = 'allroom';\n      } else if (jidOrId === \"1-1\") {\n        type = 'allpeople';\n      } else if (jidOrId.indexOf('rid') === 0) {\n        type = 'groupchat';\n      } else if (jidOrId.indexOf('uid') === 0) {\n        type = 'chat';\n      }\n    }\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.search.submit',\n      properties: {\n        type\n      }\n    });\n  },\n\n  chatRoomMentionClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.chat.room.mention.clicked'\n    });\n  },\n\n  inviteToRoomRightSidebarClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.lobby.invite.room.righticon.clicked'\n    });\n  },\n\n  roomMenuInviteClicked() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.lobby.room.menu.invite.clicked'\n    });\n  },\n\n  inviteUsersToRoomSent(type, numInvites) {\n    let event;\n\n    if (type === AnalyticsKeys.ROOM_MENU) {\n      event = 'hipchat.client.lobby.room.menu.invite.sent';\n    }\n\n    if (type === AnalyticsKeys.RIGHT_SIDEBAR) {\n      event = 'hipchat.client.lobby.invite.room.righticon.sent';\n    }\n\n    if (event){\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: event,\n        properties: {\n          numInvites\n        }\n      });\n    }\n  },\n\n  inviteTeamSent(type, numInvites) {\n    let event;\n    if (type === AnalyticsKeys.LOBBY){\n      event = 'hipchat.client.lobby.invite.sent';\n    } else if (AnalyticsKeys.TOP === type || AnalyticsKeys.LEFT === type) {\n      event = `hipchat.client.${type}.navigation.invite.team.sent`;\n    }\n    if (event){\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: event,\n        properties: {\n          numInvites\n        }\n      });\n    }\n  },\n\n  slashCommandUsed({ room, slashUsed }) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.slash.used',\n      properties: {\n        slashUsed,\n        room\n      }\n    });\n  },\n\n  slashCommandUsedInAutocomplete({ room, slashUsed }) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.slash.used.autocompleted',\n      properties: {\n        slashUsed,\n        room\n      }\n    });\n  },\n\n  userInviteURLCopied() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.user.inviteURL.copied`\n    });\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/analytics_actions.js\n **/","const AnalyticsKeys = Object.freeze({\n    ROOM_MENU: 'room-menu',\n    RIGHT_SIDEBAR: 'right-sidebar',\n    LOBBY: 'lobby',\n    INVITE_USERS_DIALOG: 'invite_users_dialog',\n    QUICK_SWITCHER: 'quick_switcher',\n    LEFT: 'left',\n    TOP: 'top'\n});\n\nexport default AnalyticsKeys;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/analytics_keys.js\n **/","export default {\n  incoming_call_notification: function (name) {\n    return `Incoming call from ${name}`;\n  },\n  missed_call_message: function (name) {\n    return `Missed call from ${name}`;\n  },\n  join_video_call_message: `Join me in a video call`,\n  confirm_leave: `Leave your current video call?`,\n  call_status: `On a call`,\n  connecting: `Connecting to video call…`,\n  popups_blocked: `Please enable popups and try again`,\n  answer: `Answer`,\n  ignore: `Ignore`,\n  enso_to_addlive: function(url) {\n    return `I'm calling you using the new HipChat video experience, but you need to update your HipChat app to see it. You can still join the meeting in your browser: ${url}`;\n  },\n  call_declined: {\n    offline: function(name) {\n      return `It looks like ${name} isn't available to accept video calls at the moment.`;\n    },\n    on_a_call: function(name) {\n      return `${name} is currently in another video call`;\n    },\n    decline: function(name) {\n      return `${name} declined to join the video call`;\n    },\n    unsupported: function(name) {\n      return `${name} is using a HipChat client that doesn't support video calls`;\n    }\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/video_call_strings.js\n **/","export const DIALOG_CLICK = 'dialog-button-click';\nexport const DIALOG_FILTER_CHANGED = 'dialog-filter-changed';\nexport const RECEIVE_PARAMETERS = 'receive-parameters';\nexport const GLANCE_UPDATE = 'glance-update';\nexport const MESSAGE_RECEIVED = 'message-received';\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/api_integration_events.js\n **/","import AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport utils from 'helpers/utils';\nimport generalErrorHelper from 'helpers/general_error_helper';\nimport ConfigActions from 'actions/config_actions';\nimport ConfigurationModel from 'models/configuration_model';\nimport logger from 'helpers/logger';\n\nclass IQProcessor {\n\n  constructor(data) {\n    var is_guest = _.get(data,'is_guest', false);\n\n    this.deferredReady = () => {\n      return new Promise((res) => {\n        AppDispatcher.dispatch('app-state-ready');\n        res();\n      });\n    };\n\n    // Set instance variables\n    this.__reset();\n    this.storedRequiredStanzas = [];\n    this.requiredStanzas = [];\n    this.setRequiredStanzas(is_guest);\n  }\n\n  setRequiredStanzas(is_guest) {\n    var stanzas;\n    if (is_guest) {\n      stanzas = ['http://hipchat.com/protocol/emoticons'];\n    } else {\n      stanzas = ['jabber:iq:roster', 'http://jabber.org/protocol/disco#items', 'http://hipchat.com/protocol/emoticons'];\n    }\n    this.requiredStanzas = this.requiredStanzas.concat(stanzas);\n  }\n\n  addRequiredStartupStanza() {\n    this.requiredStanzas.unshift('http://hipchat.com/protocol/startup');\n  }\n\n  /**\n   * Handles an incoming IQ stanza.\n   *\n   * Must be called with processor instance context (bind, call, apply)\n   *\n   * @param iq_stanza The IQ stanza\n   * @param store The store to receive the stanza.\n   */\n  handleIQ(iq_stanza, store) {\n    _.forEach(utils.toArray(iq_stanza), (iq) => {\n      if (iq.query) {\n        this.handleOrStoreStanza(iq, store);\n      }\n    });\n  }\n\n  handleStanza(iq, store) {\n    switch (iq.query.xmlns) {\n      case 'jabber:iq:roster':\n        logger.debug('Roster Received', {verbose: iq});\n        if (_.has(iq, \"query.item\") && (iq.type !== 'set' || this.__isReady())) {\n          store.handleRoster(iq.query.item);\n        } else {\n          logger.debug('Roster Update Skipped', {verbose: iq});\n        }\n        break;\n      case 'http://jabber.org/protocol/disco#info':\n        var room = {\n          jid: iq.from,\n          name: _.get(iq, 'query.identity.name'),\n          x: _.get(iq, 'query.x')\n        };\n        store.handleRooms(room);\n        break;\n      case 'http://jabber.org/protocol/disco#items':\n        logger.debug('Rooms List Received', {verbose: iq});\n        if (_.has(iq, \"query.item\")) {\n          store.handleRooms(iq.query.item);\n        }\n        break;\n      case 'http://hipchat.com/protocol/profile':\n        store.handleProfile(iq);\n        break;\n      case 'http://hipchat.com/protocol/emoticons':\n        logger.debug('Emoticons Received', {verbose: iq});\n        if (_.has(iq, \"query\")) {\n          store.handleEmoticons(iq.query, iq.type);\n        }\n        break;\n      case 'http://hipchat.com/protocol/muc#room':\n        if (_.has(iq, \"query.item\") && (iq.type !== 'set' || this.__isReady())) {\n          store.determineRoomUpdate(iq.query.item);\n        }\n        break;\n      case 'http://hipchat.com/protocol/integrations':\n        this.__handleIntegrations(iq);\n        break;\n      case 'http://hipchat.com/protocol/integrations#ui':\n        this.__handleIntegrationsUiPush(iq);\n        break;\n      case 'http://hipchat.com/protocol/startup':\n        store.handleStartupIQAutoJoin([].concat(_.get(iq, 'query.preferences.autoJoin.item', [])));\n        ConfigActions.updateAppConfiguration(new ConfigurationModel(iq.query));\n        AnalyticsDispatcher.dispatch(\"analytics-start-iq-response-received\");\n        break;\n      default:\n        return true;\n    }\n  }\n\n  /**\n   * Handles or stores an IQ stanza depending on the init-state of the app.\n   *\n   * If a non-required IQ stanza arrives before all of the required stanzas have been processed,\n   * it is stored it temporarily.\n   *\n   * Once all {@link requiredStanzas} have arrived, we process the stanzas stored in {@link otherStanzas}.\n   *\n   * @param iq The IQ stanza to process.\n   * @param store The store to receive the stanza.\n   */\n  handleOrStoreStanza(iq, store) {\n    if (this.allRequiredStanzasProcessed) {\n      this.handleStanza(iq, store);\n      return;\n    }\n\n    if (!this.allRequiredStanzasProcessed\n      && _.includes(this.requiredStanzas, iq.query.xmlns)\n      && _.get(iq, ['type']) !== 'set') {\n      if (iq.error) {\n        generalErrorHelper(iq);\n      } else {\n        this.storedRequiredStanzas.push(iq);\n\n        this.receivedRequiredStanzas[iq.query.xmlns] = true;\n        this.allRequiredStanzasProcessed = this.allRequiredStanzasArrived();\n\n        if (this.allRequiredStanzasProcessed) {\n          this.flushRequiredStanzas(store);\n          this.flushNonRequiredStanzas(store);\n          this.deferredReady().catch((e) => {\n            logger.type('iq-processor').withCallStack().error(e);\n            logger.error(e);\n            AnalyticsDispatcher.dispatch(\"analytics-event\", {\n              name: 'hipchat.client.load.error',\n              properties: {\n                errorMessage: e.message,\n                errorName: e.name,\n                errorDescription: e.description,\n                errorStack: e.stack\n              }\n            });\n          });\n        }\n      }\n    } else {\n      this.queueStanza(iq);\n    }\n  }\n\n  /**\n   * Processes all required stanzas which we've received in the proper order.\n   *\n   * @param store\n   */\n  flushRequiredStanzas(store) {\n    let handle = (namespace) => {\n      let stanza = _.find(this.storedRequiredStanzas, (stnz) => {\n        return _.get(stnz, ['query', 'xmlns']) === namespace;\n      });\n      this.handleStanza(stanza, store);\n      _.pull(this.storedRequiredStanzas, stanza);\n    };\n    _.every(this.requiredStanzas, (namespace) => {\n      if (namespace === 'http://hipchat.com/protocol/startup') {\n        AppDispatcher.registerOnce('after:updated:config', () => {\n          _.each(this.requiredStanzas, (ns) => {\n            handle(ns);\n          });\n        });\n        handle(namespace);\n        _.pull(this.requiredStanzas, namespace);\n        return false;\n      }\n      handle(namespace);\n      return true;\n    });\n  }\n\n  /**\n   * Processes all non-required stanzas which have built up before the app is ready.\n   *\n   * @param store\n   */\n  flushNonRequiredStanzas(store) {\n    _.each(this.otherStanzas, (iq) => {\n      this.handleStanza(iq, store);\n    });\n    this.otherStanzas = [];\n  }\n\n  /**\n   * Stores an IQ stanza to be processed later.\n   *\n   * @param iq\n   */\n  queueStanza(iq) {\n    this.otherStanzas.push(iq);\n  }\n\n  /**\n   * Returns true if all required stanzas have arrived.\n   * @returns {*}\n   */\n  allRequiredStanzasArrived() {\n    return _.every(this.requiredStanzas, (stanza) => {\n      return this.receivedRequiredStanzas[stanza];\n    });\n  }\n\n  /**\n   * Resets the IQProcessor to the initial state.\n   *\n   * Exposed for testing only.\n   *\n   * @private\n   */\n  __reset() {\n    this.allRequiredStanzasProcessed = false;\n    this.receivedRequiredStanzas = {};\n    this.otherStanzas = [];\n    this.storedRequiredStanzas = [];\n    this.requiredStanzas = [];\n  }\n\n  /**\n   * Returns the current value of allRequiredStanzasProcessed.\n   *\n   * Exposed for testing only.\n   * @private\n   */\n  __isReady() {\n    return this.allRequiredStanzasProcessed;\n  }\n\n  __handleIntegrations(iq) {\n    if(iq.type === 'set') {\n\n      let data = iq.query.__text;\n      if(typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n\n      AppDispatcher.dispatch('integration-update', data);\n    }\n  }\n\n  __handleIntegrationsUiPush(iq) {\n    if(iq.type === 'set') {\n\n      let data = iq.query.__text;\n      if(typeof data === \"string\") {\n        data = JSON.parse(data);\n      }\n      let glances = data.glance;\n      AppDispatcher.dispatch('glance-metadata-pushed', utils.toArray(glances));\n    }\n  }\n\n}\n\nmodule.exports = IQProcessor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/processors/iq_processor.js\n **/","var AppDispatcher = require(\"dispatchers/app_dispatcher\");\n\nvar errorsToHandle = [\"500\", \"403\"];\n\nmodule.exports = function(stanza) {\n  if (stanza.error && stanza.error.code && _.includes(errorsToHandle, stanza.error.code)) {\n    AppDispatcher.dispatch(\"general-error\", stanza);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/general_error_helper.js\n **/","import utils from 'helpers/utils';\nimport PreferencesModel from 'models/preferences_model';\nimport logger from 'helpers/logger';\n\n/**\n * @class ConfigurationModel\n *\n * Authentication properties:\n *\n * @property {string} auth_method - 'oauth2' or 'nonce'\n * @property {string} [auth_nonce] - set if auth_method is nonce\n * @property {string} oauth_token - auth token for v2 api\n * @property {number} [oauth_token_expires_in] - milliseconds, provided in oauth mode. In nonce mode, provided token has 1 month expiry\n * @property {string} apiv1_token - auth token for v1 api\n * @property {number} apiv1_token_expires_in - milliseconds\n * @property {string} sid - Bosh session id\n *\n * Application urls & hosts:\n *\n * @property {string} base_url - defaults to empty string\n * @property {string} video_base_url - defaults to hipchat.com/video\n * @property {string} bind_url\n * @property {string} api_host\n * @property {string} conference_server\n * @property {string} chat_server\n * @property {string} web_server\n * @property {string} route\n * @property {string} invite_url\n * @property {string} group_invite_url\n * @property {string} video_chat_uri\n *\n * User Details:\n *\n * @property {string} jid\n * @property {number} user_id\n * @property {string} user_name\n * @property {number} group_id\n * @property {string} group_name\n * @property {string} mention\n * @property {boolean} is_admin\n * @property {boolean} is_guest\n * @property {string} email\n * @property {string} title\n * @property {string} photo_small\n * @property {string} photo_large\n * @property {string} group_avatar_url\n * @property {number} addlive_app_id\n *\n * Guest Details (only there if user is guest):\n *\n * @property {string} [guest_key]\n * @property {number} [room_id]\n * @property {string} [room_name]\n * @property {string} [room_jid]\n *\n * Client identifiers:\n *\n * @property {string} client_type\n * @property {string} client_subtype\n * @property {string} client_version_id\n * @property {string} client_os_version_id\n * @property {string} client_node\n *\n * Environment configuration:\n *\n * @property {string} asset_base_uri\n * @property {string} video_chat_enabled\n * @property {string} private_rooms_enabled\n * @property {string} guest_access_enabled\n * @property {string} html5_routing_enabled\n * @property {string} display_name\n * @property {object} ui\n * @property {object} app_config_overrides\n * @property {object} native_feature_flags\n * @property {object} log_to_file\n *\n * Dictionaries:\n *\n * @property {object} feature_flags\n * @property {object} emoticons\n * @property {object} smileys\n * @property {object} keyboard_shortcuts\n * @property {object} permissions\n * @property {object} plan\n * @property {PreferencesModel} preferences - See [PreferencesModel]{@link class:PreferencesModel}\n */\n\n// Avatar url comes in sometimes with size identifer, sometimes without\n// Make sure it's there and the right one. No need for 2000px avatar images\nfunction normalizeAvatarUrl (url, absUrl) {\n  let extensionRegex = /((_\\d+)?(\\.\\w{3,4}))$/;\n  if (absUrl && _.isString(absUrl)) {\n    return absUrl.replace(extensionRegex, '_125$3');\n  }\n  if (_.isString(url)) {\n    return url.replace(extensionRegex, '_125$3');\n  }\n  return url;\n}\n\n// The Big Switch. Go through each key and fix/properly coerce the value\nfunction normalizeConfiguration (input) {\n  return _.transform(input, (result, val, key, original) => {\n    switch (key) {\n\n      case 'access_token':\n        result.oauth_token = val;\n        break;\n\n      // OAuth token provided in seconds. Add 5 and convert to milliseconds\n      case 'expires_in':\n        result.oauth_token_expires_in = (val + 5) * 1000;\n        break;\n\n      // API V1 token is an object. The token itself is optional (not in php init state) and\n      // may be in the token or __text val depending on source. Expiry is a timestamp of\n      // seconds since EPOCH. Need to convert to milliseconds from now (plus 5 seconds)\n      case 'token':\n        const expiration = parseInt(val.expiration, 10);\n        const ttl = parseInt(val.ttl, 10);\n        const serverTimestamp = (expiration - ttl) * 1000;\n        let currentTimestamp = new Date().getTime();\n        if (currentTimestamp > serverTimestamp){\n          currentTimestamp = serverTimestamp;\n          logger.warn('Local date might be wrong. Server date:', new Date(serverTimestamp));\n        }\n        result.apiv1_token = val.token || val.__text;\n        result.apiv1_token = result.apiv1_token === 'false' ? null : result.apiv1_token;\n        result.apiv1_token_expires_in = expiration * 1000 - currentTimestamp + 5000;\n        break;\n\n      case 'user_id':\n      case 'group_id':\n      case 'addlive_app_id':\n      case 'room_id':\n        result[key] = parseInt(val, 10);\n        break;\n      case 'group_invite_url':\n        result['invite_url'] = val;\n        break;\n      case 'is_admin':\n      case 'is_guest':\n      case 'video_chat_enabled':\n      case 'private_rooms_enabled':\n      case 'guest_access_enabled':\n      case 'html5_routing_enabled':\n      case 'log_to_file':\n        result[key] = utils.coerceBoolean(val);\n        break;\n\n      case 'prefs':\n      case 'preferences':\n        result.preferences = new PreferencesModel(val, true);\n        break;\n\n      case 'features':\n        result.features = _.transform(val, (features, featureVal, featureKey) => {\n          features[featureKey] = utils.coerceBoolean(featureVal);\n        });\n        break;\n\n      case 'feature_flags':\n        result.feature_flags = utils.features.reconcileFeatureFlags(original.native_feature_flags || {}, val);\n        break;\n\n      case 'native_feature_flags':\n        result.native_feature_flags = _.isObject(val) ? val : {};\n        break;\n\n      case 'display_name':\n        result.display_name = _.isString(val) ? val : \"\";\n        break;\n\n      // The following are returned from the server with different names from different sources\n      case 'mention_name':\n        result.mention = val;\n        break;\n\n      case 'name':\n        result.user_name = val;\n        break;\n\n      case 'video_chat_uri':\n        result.video_chat_uri = val;\n        break;\n\n      case 'video_base_url':\n        result.video_base_url = val;\n        break;\n\n      case 'group_avatar_url':\n      case 'group_absolute_avatar_url':\n        result.group_avatar_url = normalizeAvatarUrl(original.group_avatar_url, original.group_absolute_avatar_url);\n        break;\n\n      // Ignored keys\n      case 'xmlns':\n      case 'anonymous':\n      case 'el':\n      case 'minimal':\n      case 'mobile':\n      case 'vertical_tabs':\n      case 'welcome_msg':\n      case 'onRefreshOAuthAccessToken':\n      case 'source_json':\n      case 'plan':\n      case 'state':\n      case 'token_type':\n        break;\n\n      default:\n        result[key] = val;\n    }\n  });\n}\n\nexport default class ConfigurationModel {\n  constructor(input = Object.create(null)) {\n    Object.assign(this, normalizeConfiguration(input));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/models/configuration_model.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport utils from 'helpers/utils';\n\nclass PresenceProcessor {\n\n  constructor(data) {\n    this.processorData = data;\n    this.queued = [];\n    this.ready = false;\n    this.subscribeToEvents();\n  }\n\n  subscribeToEvents() {\n    AppDispatcher.registerOnce('app-state-ready', () => {\n      this.ready = true;\n      this.handlePresence(this.queued);\n      this.queued = [];\n    });\n  }\n\n  update(data) {\n    this.processorData = null;\n    this.processorData = data;\n  }\n\n  handlePresence(presences) {\n    let presArray = utils.toArray(presences);\n    if (!this.ready) {\n      this.queued = this.queued.concat(presArray);\n    } else {\n      if (this.processorData.is_guest) {\n        this.handlePresencesForGuest(presArray);\n      } else {\n        let groupedPresences = _.groupBy(presArray, (pres) => {\n          if (utils.jid.is_room(utils.jid.bare_jid(pres.from))) {\n            return 'room';\n          }\n          return 'global';\n        });\n        this.handleRoomPresences(groupedPresences['room']);\n        this.handleGlobalPresences(groupedPresences['global']);\n      }\n    }\n  }\n\n  handlePresencesForGuest(presArray) {\n    _.forEach(presArray, (pres) => {\n      pres.x = utils.toArray(pres.x);\n\n      this._handleUser(pres);\n\n      // Transform for global presences\n      this.roomToGlobalPresence(pres);\n    });\n\n    this.handleGlobalPresences(presArray);\n  }\n\n  _handleUser(pres) {\n    let item = _.get(pres.x[0], 'item');\n\n    if(item) {\n      let jid = utils.jid.bare_jid(pres.from);\n\n      if (pres.type === \"unavailable\") {\n        this._handleUnavailableUser(pres, item);\n\n      } else if (item.role === \"participant\") {\n        this.addRoomParticipant(jid, utils.jid.bare_jid(item.jid), utils.jid.resource(pres.from), pres);\n\n      } else if (item.role === \"visitor\") {\n        this.addRoomVisitor(jid, utils.jid.bare_jid(item.jid), utils.jid.resource(pres.from), item.mention_name, pres);\n      }\n    }\n  }\n\n  _handleUnavailableUser(pres, item) {\n    let jid = utils.jid.bare_jid(pres.from);\n\n    if (this._isAddresseeCurrentUser(pres, item) && this._hasNotAffiliation(pres, item)) {\n      this.revokeGuestAccess();\n    } else {\n      this.removeRoomParticipant(jid, utils.jid.bare_jid(item.jid), item.role, pres.status);\n    }\n  }\n\n  _isAddresseeCurrentUser(pres, item) {\n    let currentUserJid = utils.jid.bare_jid(pres.to);\n\n    return currentUserJid === item.jid;\n  }\n\n  _hasNotAffiliation(pres, item) {\n    let status = _.get(pres.x[0], 'status');\n\n    return status && Number(status.code) === 307 && item.affiliation === 'none';\n  }\n\n  roomToGlobalPresence(pres) {\n    // Guests & Visitors have room presences\n    // that must be handled like global presences\n    pres.x = utils.toArray(pres.x);\n    pres.from = _.get(pres, \"x[0].item.jid\", pres.from);\n  }\n\n  handleRoomPresences(presences) {\n    var jid;\n    _.map(presences, (presence) => {\n        jid = utils.jid.bare_jid(presence.from);\n        if (presence.x) {\n          presence.x = utils.toArray(presence.x);\n          if (presence.x[0].item) {\n            var item = presence.x[0].item;\n\n            if (presence.type === 'unavailable'\n              && _.isString(presence.status)\n              && (item.affiliation === 'member' || item.affiliation === 'owner')) {\n\n              this.removeRoomParticipant(jid, utils.jid.bare_jid(item.jid), item.role, presence.status);\n\n            } else if (presence.x[0].status\n              && Number(presence.x[0].status.code) === 307\n              && item.affiliation === 'none') {\n\n              if (item.actor && (utils.jid.bare_jid(item.actor.jid) === item.jid)) {\n                // Basic close room\n                AppDispatcher.dispatch('close-room', {\n                  jid: jid\n                });\n              } else {\n                // User was removed by admin\n                AppDispatcher.dispatch('user-removed', {\n                  room: jid,\n                  user_jid: utils.jid.bare_jid(item.jid),\n                  role: item.role\n                });\n              }\n\n            } else if (item.role === 'visitor') {\n\n              this.addRoomVisitor(jid, utils.jid.bare_jid(item.jid), utils.jid.resource(presence.from), item.mention_name, presence);\n\n            } else if (item && item.jid) {\n\n              AppDispatcher.dispatch('room-presence-received', {\n                room: jid,\n                user_jid: utils.jid.bare_jid(item.jid),\n                user_id: utils.jid.user_id(item.jid),\n                role: item.role,\n                affiliation: item.affiliation,\n                type: presence.type || \"\"\n              });\n            }\n          }\n        } else if (presence.type === 'error'\n          && presence.error) {\n\n          AppDispatcher.dispatch('show-flag', {\n            type: \"error\",\n            title: presence.error.text.__text,\n            close: \"auto\"\n          });\n\n          AppDispatcher.dispatch('close-room', {\n            jid: jid,\n            type: 'room',\n            doNotNotifyHC: true\n          });\n        }\n      }\n    );\n  }\n\n  handleGlobalPresences(presences) {\n    var presObj = {};\n    _.forEach(presences, (presence) => {\n      var jid = utils.jid.bare_jid(presence.from);\n      var seconds = (presence.query) ? presence.query.seconds : false;\n      var delay = (presence.delay) ? presence.delay.stamp : false;\n      var show = this.getState(presence);\n      if (!(this.processorData.current_user_jid === jid && (show === \"mobile\" || show === \"unavailable\"))) {\n        presObj[jid] = {\n          show: show,\n          status: presence.status || '',\n          seconds: seconds || '',\n          idleTime: this.getIdleTime(seconds, delay)\n        };\n      }\n    });\n    if (_.size(presObj) > 0) {\n      AppDispatcher.dispatch('global-presence-received', presObj);\n    }\n  }\n\n  getState(presence) {\n    if (presence.type && presence.type === 'unavailable' && presence.mobile) {\n      return 'mobile';\n    } else if (presence.type && presence.type === 'unavailable' && !presence.mobile) {\n      return 'unavailable';\n    } else if (presence.show) {\n      return presence.show;\n    }\n    return 'chat';\n  }\n\n  getIdleTime(seconds, delay) {\n    var result = \"\";\n    if (delay && seconds) {\n      var now = utils.getMoment();\n      var seconds_diff = now - (utils.getMoment(delay) - seconds);\n      result = utils.user.format_idle_time(seconds_diff);\n    }\n    return result;\n  }\n\n  revokeGuestAccess() {\n      AppDispatcher.dispatch('guest-access-revoked');\n  }\n\n  addRoomParticipant(room_jid, user_jid, user_name, presence) {\n    AppDispatcher.dispatch('add-room-participant', {\n      room: room_jid,\n      user_jid: user_jid,\n      user_name: user_name,\n      presence: {\n        show: this.getState(presence),\n        status: presence.status || ''\n      }\n    });\n  }\n\n  removeRoomParticipant(room_jid, participant_jid, role, status) {\n    AppDispatcher.dispatch('remove-room-participant', {\n      room: room_jid,\n      participant: participant_jid,\n      role: role === 'visitor' ? 'guests' : 'members',\n      status: status || ''\n    });\n  }\n\n  addRoomVisitor(room_jid, participant_jid, participant_name, mention, presence) {\n    AppDispatcher.dispatch('add-room-visitor', {\n      room: room_jid,\n      participant: participant_jid,\n      user_name: participant_name,\n      user_mention: mention,\n      presence: {\n        show: this.getState(presence),\n        status: presence.status || ''\n      }\n    });\n  }\n}\n\nmodule.exports = PresenceProcessor;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/processors/presence_processor.js\n **/","import common from 'strings/common_strings';\n\nexport default {\n  create_room: `Create room`,\n  delete_room: `Delete room`,\n  disable_guest: `Disable guest access`,\n  join: `Join room`,\n  ok: `Ok`,\n  OK: `OK`,\n  save: `Save`,\n  delete: `Delete`,\n  close: `Close`,\n  cancel: `Cancel`,\n  apply: `Apply`,\n  rename: `Rename`,\n  try_again: `Try again`,\n  archive: `Archive`,\n  archive_room: `Archive room`,\n  unarchive: `Unarchive`,\n  unarchive_room: `Unarchive room`,\n  confirm_archive: `This will prevent any people from chatting in the room.`,\n  confirm_disable_guest: `The room URL will be disabled and current guests will be kicked from the room`,\n  confirm_delete: function(room) {\n    return `Are you sure you want to delete ${room}?`;\n  },\n  room_deleted: function(room) {\n    return `${room} deleted.`;\n  },\n  room_archived: `Room archived.`,\n  room_unarchived: `Room unarchived.`,\n  archive_room_name: function(room) {\n    return `Archive ${room}`;\n  },\n  unarchive_room_name: function(room) {\n    return `Unarchive ${room}`;\n  },\n  really_archive: function(room) {\n    return `Are you sure you want to archive the ${room} room?`;\n  },\n  really_unarchive: function(room) {\n    return `Are you sure you want to unarchive the ${room} room?`;\n  },\n  really_disable_guest: `Are you sure you want to disable guest access?`,\n  invite_users: function(room) {\n    return `Invite people to ${room}`;\n  },\n  choose_removed_members: `Remove people`,\n  join_room: function(room) {\n    return `Join ${room}`;\n  },\n  rename_room: function(room) {\n    return `Rename ${room}`;\n  },\n  invited_to_join: function(inviter, room) {\n    return `${inviter} invited you to join ${room}`;\n  },\n  disable_guest_fail: `Couldn't disable guest access.`,\n  enable_guest_fail: `Couldn't enable guest access.`,\n  archive_fail: `Couldn't archive room.`,\n  unarchive_fail: `Couldn't unarchive room.`,\n  delete_room_fail: `Couldn't delete room.`,\n  set_privacy: `Set privacy`,\n  notify_for_room: `A message is sent to an open room I'm in`,\n  notify_for_private_room: `A message is sent to a private room I'm in`,\n  notify_for_tag: `I'm mentioned in a room`,\n  notify_for_private: `I receive a private message`,\n  play_sound_part_1: `Play sound for`,\n  play_sound_part_2: `notifications`,\n  basic_play_sound: `Play sound for new messages`,\n  message_notifications: `message`,\n  video_notifications: `video`,\n  message_and_video_notifications: `message and video`,\n  show_toasters: `Show a popup`,\n  hide_presence_messages: `Show joined/left room messages`,\n  use_24_hour_format: `Display time in 24-hour format`,\n  hide_gifs_by_default: `Hide gifs by default`,\n  hide_attached_cards_by_default: `Hide inline previews by default`,\n  replace_text_emoticons: `Turn text emoticons into images`,\n  show_unread_divider: `Show divider for unread messages`,\n  create_a_new_room: `Create a new room`,\n  change_privacy: `Change privacy`,\n  theme: `Theme`,\n  density: `Text density`,\n  chat_view: `Chat view`,\n  name_display: `Name display`,\n  animated_avatars: `Animated avatars`,\n  names: `Name`,\n  mentions: `@mention name`,\n  light: `Light`,\n  dark: `Dark`,\n  normal: `Normal`,\n  tighter: `Tighter`,\n  classic: `Classic`,\n  classic_neue: `With avatars`,\n  animated: `Show animation`,\n  static: `Show as static images`,\n  call_from: `Call from`,\n  answer: `Answer`,\n  decline: `Decline`,\n  start_up_with_windows: `Start up with Windows`,\n  enable_spell_check: `Enable spell check`,\n  enable_autocorrect: `Correct spelling automatically`,\n  idle: `Idle`,\n  minutes: `minutes`,\n  maximum_idle_minutes: `maximum of 99`,\n  minimum_idle_minutes: `minimum of 1`,\n  keep_popups_visible: `Keeping popups visible until ${common.app_name} is focused`,\n  blink_taskbar: `Blinking the taskbar`,\n  bounce_icon: `Bounce the dock icon`,\n  bounce_icon_once: `once`,\n  bounce_icon_forever: `until I look`,\n  proxy_settings_description: function (display_name) {\n    return `Modify the server that ${common.app_name} connects to by using the ${display_name} Proxy Settings`;\n  },\n  proxy_settings: function (display_name) {\n    return `${display_name} Proxy Settings`;\n  },\n  title_settings: function (group_name) {\n    return `${group_name} Settings`;\n  },\n  room_notifications: `Room notifications`,\n  beta: `Beta`,\n  appearance: `Appearance`,\n  general: `General`,\n  notifications: `Notifications`,\n  connection: `Connection`,\n  notify_when_header: `Notify me when`,\n  notify_rooms_header: `Rooms`,\n  notify_for_oto_per_room_enabled: `Notify me for 1-to-1 messages`,\n  notify_for_oto: `I receive a 1-to-1 message`,\n  dnd_header: `Do not Disturb`,\n  do_not_notify_when_dnd: `Stop all notifications`,\n  do_not_notify_when_dnd_basic: `Enable notifications while status is set to Do Not Disturb`,\n  notify_when_dnd: `Send all notifications`,\n  notify_for_video_when_dnd: `Send a notification for video calls only`,\n  enable_logging: `Log additional chat data`,\n  edit_message: `Edit message`,\n  delete_message: `Are you sure? When it's gone, it's gone.`,\n  not_editable: function(action) {\n    return `It's too late to ${action} this`;\n  },\n  not_editable_body: function(thresholdInHours) {\n    return `We'd all like to re-write history, but it's been more than ${thresholdInHours} hours since this message was sent.`;\n  },\n  user_joined: function (displayName) {\n    return `${displayName} has joined.`;\n  },\n  user_joined_link: `Go say hi!`,\n  suggestions: `SUGGESTIONS`,\n  message: `MESSAGE`,\n  welcome_to_hipchat: `Welcome to HipChat!`,\n  choose_people_to_chat: `Choose a few people to chat with`,\n  join_some_rooms: `Join some rooms`,\n  introduce_yourself: `Introduce yourself`,\n  skip_dialog_button: `Skip`,\n  start_button: `Start`,\n  next_button: `Next`,\n  skip_this_step_button: `Skip this step`,\n  finish_and_send_button: `Finish and send message`,\n  we_ll_help_you: `We'll help you get started chatting with your team. `,\n  this_won_t_take_long: `(This won't take long and is totally worth it.) `,\n  lets_put_together_a_list_of_people: `Let's put together a list of a few people you might be chatting with a lot. Choose the people you'd like to meet. `,\n  weve_got_a_few_sugg_on_rooms: `We've got a few suggestions on rooms (group chats) to start you off with. You'll discover more, of course, but this is a good place to begin. `,\n  you_are_all_set: `You're all set. Write a message (or use ours) introducing yourself to the team. We'll post it in each room you chose. `,\n  welcome_messages: function () {\n    let welcome_messages = [\n      `@here Hey everybody! I'm new here. I'm sure we'll talk more real soon. Just wanted to introduce myself. `,\n      `@here Hi there, I just joined and thought I'd introduce myself. `,\n      `@here Hi everyone, I'm new here. I just wanted to say hi. Have an (awesome) day! `\n    ];\n    let randomIndex = _.random(0, welcome_messages.length - 1);\n    return welcome_messages[randomIndex];\n  },\n  got_that_person_down: `Got that 1 person down. `,\n  got_those_people_down: function (number) {\n    return `Got those ${number} people down. `;\n  },\n  that_is_a_good_roome_choice: `That's a good room choice. `,\n  those_are_some_good_roome_choices: `Those are some good room choices. `,\n  use_here_in_tour_message: `Use @here in your message to mention everyone currently in the room. `,\n  welcome_message_err: function (value) {\n    return `Message max length is ${value} symbols. `;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/dialog_strings.js\n **/","/**\n * FlagActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\n\nvar FlagActions = {\n\n  showFlag: function (flag_data) {\n    AppDispatcher.dispatch('show-flag', flag_data);\n  },\n\n  removeFlag: function(flag_index) {\n    AppDispatcher.dispatch('remove-flag', flag_index);\n  }\n\n};\n\nmodule.exports = FlagActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/flag_actions.js\n **/","/**\n * @typedef {{name: string, key: string}} AnalyticsEventKeys\n * @type {Object.<string, string>}\n */\nconst AnalyticsEventKeys = Object.freeze({\n  AUTH: \"hipchat.client.app.perf.auth.server\",\n  BROWSER_METRICS: \"browser.metrics.app\",\n  CLIENT_CURRENT: \"hipchat.client.current\",\n  CLIENT_LAUNCH: \"hipchat.client.launch\",\n  CLIENT_READY: \"hipchat.client.ready\",\n  CLIENT_READY_FOR_USER: \"hipchat.client.app.perf.load.ready\",\n  CONNECTION_ESTABLISHED: \"hc_web.hcjsclient.initial.connection.established\",\n  DOM_READY: \"hipchat.client.app.perf.nav.timing.dom\",\n  INITIAL_EMOTICONS: \"hipchat.client.app.perf.emoticons.initial.server\",\n  INITIAL_FETCH: \"hc_web.hcjsclient.initial.data.fetch\",\n  INITIAL_IQ: \"hipchat.client.app.perf.iq.initial.server\",\n  INITIAL_PRESENCE: \"hipchat.client.app.perf.presence.initial.server\",\n  INITIAL_ROOMS: \"hipchat.client.app.perf.rooms.initial.server\",\n  INITIAL_ROSTER: \"hipchat.client.app.perf.roster.initial.server\",\n  CHAT_SENDABLE: \"hipchat.client.app.perf.user.chat-sendable\",\n  CHAT_IS_COMPLETE: \"hipchat.client.app.perf.user.chat-is-complete\",\n  LAUNCH_TO_ACTIVE_CHAT_LIST: \"hipchat.client.app.perf.user.launch-to-active-chat-list\",\n  LAUNCH_TO_CHAT: \"hipchat.client.app.perf.user.launch-to-chat\",\n  LAUNCH_TO_CHAT_COMPLETE: \"hipchat.client.app.perf.user.launch-to-chat-complete\",\n  LOBBY_RENDER: \"hipchat.client.app.perf.lobby.panel.render\",\n  PRODUCT: \"HipChat\",\n  RECONNECTION: \"hc_web.hcjsclient.reconnection\",\n  ROOM_FILES_LOAD: \"hipchat.client.app.perf.room.files.load.server\",\n  ROOM_HISTORY_LOAD: \"hipchat.client.app.perf.room.history.load.server\",\n  ROOM_MEMBERS_LOAD: \"hipchat.client.app.perf.room.members.load.server\",\n  ROOM_RENDER: \"hipchat.client.app.perf.room.render\"\n});\nexport default AnalyticsEventKeys;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/analytics_event_keys.js\n **/","import utils from 'helpers/utils';\nimport HJC from './hipchat';\nimport HCApi from './rest/apiv2/apiV2';\nimport REST from './rest/rest';\nimport ConnectionManager from './xmpp/connection_manager';\nimport DALCache from './dal.cache';\nimport VideoCallStrings from 'strings/video_call_strings';\nimport Presence from 'lib/enum/presence';\nimport User from './models/user';\nimport DALError from './models/dal-error';\nimport Room from './models/room';\nimport Emoticon from './models/emoticon';\nimport DALUser from './dal.user';\nimport DALRoom from './dal.room';\nimport DALEmoticon from './dal.emoticon';\nimport DALConnection from './dal.connection';\n\n/**\n * Top level API for server communication. Passes through to HJC\n * until all of the HJC module have been rewritten and/or moved\n * to the xmpp, rest or internal_api modules.\n *\n * This should be the single entry point used in the app for server\n * communication. The long-term goal is to expand on this to also\n * include localStorage, and possibly analytics.\n *\n * @module DAL\n */\nconst DAL = {\n\n  /**\n   * Start up XMPP connection\n   *\n   * @method attemptConnect\n   */\n  attemptConnect() {\n    ConnectionManager.connect();\n  },\n\n  /**\n   * Resume a chat session after connection down\n   *\n   * @method attemptReconnect\n   */\n  attemptReconnect(resetAndReconnect = true) {\n    ConnectionManager.reconnect(resetAndReconnect);\n  },\n\n  /**\n   * Kill chat session\n   *\n   * @method terminateChatSession\n   * @param {boolean} [shouldReconnect=true]\n   */\n  terminateChatSession(shouldReconnect = true) {\n    ConnectionManager.disconnect(shouldReconnect);\n  },\n\n  /**\n   * Send initial presence to the server to announce the client has connected\n   *\n   * @method sendInitialPresence\n   * @param {string} [show = 'chat']\n   * @returns {Promise<undefined>}\n   */\n  sendInitialPresence(show = Presence.AVAILABLE) {\n    return ConnectionManager.Connection.Presence.sendInitialPresence(show);\n  },\n\n  /**\n   * Change user presence/status\n   *\n   * @method setPresence\n   * @param {string} [show = 'chat']\n   * @param {string|null} [status = null]\n   * @returns {Promise<undefined>}\n   */\n  setPresence(show = Presence.AVAILABLE, status = null) {\n    return ConnectionManager.Connection.Presence.setPresence(show, status);\n  },\n\n  /**\n   * Join a room\n   *\n   * @method joinRoom\n   * @param {string} jid\n   * @param {number} [maxstanzas=0]\n   * @param {boolean} [limitPresences=true]\n   * @returns {Promise<JoinRoomResponse, DALError>}\n   */\n  joinRoom(jid, maxstanzas = 0, limitPresences = true) {\n    return ConnectionManager.Connection.Rooms.join(jid, maxstanzas, null, limitPresences);\n  },\n\n  /**\n   * Join a one-to-one chat\n   *\n   * @method joinChat\n   * @param {string} jid\n   */\n  joinChat(jid, cb = _.noop) {\n    HJC.joinChat(jid, cb);\n  },\n\n  /**\n   * Join a set of rooms\n   *\n   * @param {array} rooms - list of objects containing a JID {jid:'jid'}\n   * @param {number} [maxstanzas=0]\n   */\n  joinRooms(rooms, maxstanzas = 0) {\n    let map = rooms.reduce((result, room) => {\n      if (utils.jid.is_room(room.jid)) {\n        result.push(ConnectionManager.Connection.Rooms.join(room.jid, maxstanzas));\n      } else {\n        //TODO: need to refactor this method next to also return a promise and add it to promise map returned here\n        HJC.joinChat(room.jid);\n      }\n      return result;\n    }, []);\n    return Promise.all(map);\n  },\n\n  /**\n   * Leave a room/chat\n   *\n   * @param jid\n   * @param {string} type - \"chat\" or \"groupchat\"\n   * @returns {Promise<undefined,DALError>}\n   */\n  leaveRoom(jid, type) {\n    if (type === 'groupchat') {\n      return ConnectionManager.Connection.Rooms.leave(jid);\n    }\n    HJC.sendStateMessage(jid, type, 'gone');\n    return Promise.resolve();\n  },\n\n  /**\n   * Fetch a list of participants in a room\n   *\n   * @method fetchParticipants\n   * @param {number} room id\n   * @returns {Promise<Object, DALError>}\n   */\n  fetchParticipants(roomId, includeOffline = true) {\n    return REST.fetchRoomParticipants(roomId, includeOffline);\n  },\n\n  /**\n   * Fetch profile for a user\n   *\n   * @method fetchProfile\n   * @param {string} jid\n   * @param {function} [callback]\n   */\n  fetchProfile(jid, callback = _.noop) {\n    HJC.fetchUserProfile(jid, callback);\n  },\n\n  /**\n   * Fetch the history from the server\n   *\n   * @param {string} jid\n   * @param {string|date} [before]\n   * @param {number} [maxstanzas=50]\n   * @param {number} id\n   * @param {function} callback\n   */\n  fetchHistory (jid, before, maxstanzas = 50, id, callback = _.noop) {\n    HJC.fetchHistory(jid, before, maxstanzas, id, callback);\n  },\n\n  /**\n   * @method fetchRecentHistory\n   * @param {object} data\n   * @param {object} data.path\n   * @param {string} data.path.type\n   * @param {string|number} data.path.identifier - room or user id\n   * @param {object} data.params - querystring / post body params\n   * @param {function} [callback]\n   */\n  fetchRecentHistory(data, callback = _.noop) {\n    if (data.path.type === 'user') {\n      HCApi.user.recent_history(data, callback);\n    } else {\n      HCApi.room.recent_history(data, callback);\n    }\n  },\n\n  /**\n   * Fetch files for a room/chat\n   *\n   * @param {string} jid\n   * @param {date} [before=null]\n   * @param {number} [limit=50]\n   * @returns {Promise<ChatFilesResponse, DALError>}\n   */\n  fetchFiles(jid, before = null, limit = 50) {\n    return ConnectionManager.Connection.Chat.getFiles(jid, before, limit);\n  },\n\n  /**\n   * Fetch links for a room/chat\n   *\n   * @param {string} jid\n   * @param {date} [before=null]\n   * @param {number} [limit=50]\n   * @returns {Promise<ChatLinksResponse, DALError>}\n   */\n  fetchLinks(jid, before = null, limit = 50) {\n    return ConnectionManager.Connection.Chat.getLinks(jid, before, limit);\n  },\n\n  /**\n   * Fetch presences for given users\n   *\n   * @method fetchPresences\n   * @param {array} ids - list of user ids\n   * @param {function} [callback]\n   */\n  fetchPresences(ids, callback = _.noop) {\n    HJC.fetchPresence(ids, callback);\n  },\n\n  /**\n   * Limit the presences you are subscribed to\n   *\n   * @method filterPresences\n   * @param {Array<string|number>} ids - array of user ids\n   * @returns {Promise<undefined,DALError>}\n   */\n  filterPresences(ids) {\n    return ConnectionManager.Connection.Presence.filterPresences(ids);\n  },\n\n  /**\n   * Sends a message\n   *\n   * @method sendMessage\n   * @param {string} message\n   * @returns {Promise}\n   */\n  sendMessage(message) {\n    HJC.sendMessage(message);\n  },\n\n  /**\n   * Edits a message\n   *\n   * @method editMessage\n   * @param {string} jid message jid\n   * @param {string} message edited message\n   * @param {string} original_mid original message id\n   * @param {ts} ts timestamp\n   */\n  editMessage(jid, message, original_mid, ts) {\n    HJC.editMessage(jid, message, original_mid, ts);\n  },\n\n  /**\n   * Deletes a message\n   *\n   * @method deleteMessage\n   * @param {string} message the message to delete\n   */\n  deleteMessage(message) {\n    HJC.deleteMessage(message);\n  },\n\n  /**\n   * Send a state-change message\n   *\n   * @param {string} jid\n   * @param {string} type\n   * @param {string} state\n   */\n  sendStateMessage(jid, type, state) {\n    HJC.sendStateMessage(jid, type, state);\n  },\n\n  /**\n   * @method sendVideoMessage\n   * @param {string} jid\n   * @param {string} [type='call']\n   * @param {boolean} [audioOnly=false]\n   * @param {string} [url]\n   * @param {string} [service]\n   * @param {function} [callback=_.noop]\n   * @param {string} reason\n   */\n  sendVideoMessage(jid, type = 'call', audioOnly = false, url, service, callback = _.noop, reason) {\n    HJC.sendVideoMessage({jid, type, audioOnly, url, service, callback, reason});\n  },\n\n  /**\n   * @method sendEnsoInviteMessage\n   * @param {string} jid\n   * @param {string} url\n   */\n  sendEnsoInviteMessage(jid, url) {\n    let message = `<a href=\"${url}\" data-target-options=\"enso_invite\">${VideoCallStrings.join_video_call_message}</a>`;\n    HCApi.user.send_private_message({\n      path: {\n        identifier: utils.jid.user_id(jid)\n      },\n      params: {\n        message: message,\n        notify: false,\n        message_format: 'html'\n      }\n    });\n  },\n\n  /**\n   * @method sendFile\n   * @param {string} jid\n   * @param {object} uploadData\n   * @param {object} uploadData.path\n   * @param {string} uploadData.path.identifier - room id\n   * @param {object} uploadData.params\n   * @param {file|object} uploadData.params.file\n   * @param {string} uploadData.params.fileName\n   * @param {string} uploadData.params.message\n   * @param {string} uploadData.params.progressBarSelector\n   * @param {function} uploadData.params.success\n   * @param {function} uploadData.params.error\n   */\n  sendFileMessage(jid, uploadData) {\n    if (utils.jid.is_private_chat(jid)) {\n      return HCApi.user.share_file(uploadData);\n    }\n\n    return HCApi.room.share_file(uploadData);\n  },\n\n  /**\n   * @method requestAddliveCredentials\n   * @param {string} jid\n   * @param {function} [callback]\n   */\n  requestAddliveCredentials(jid, callback = _.noop) {\n    HJC.requestAddliveCredentials(jid, callback);\n  },\n\n  /**\n   * @method clearWebCookies\n   * @param {function} [callback]\n   */\n  clearWebCookies(callback = _.noop) {\n    HJC.clearWebCookies(callback);\n  },\n\n  /**\n   * Fetch a current API V1 token from server\n   *\n   * @method updateAPIV1Token\n   * @return {promise}\n   */\n  updateAPIV1Token() {\n    return ConnectionManager.updateApiV1Token();\n  },\n\n  /**\n   * Revoke oauth2 token\n   *\n   * @method revokeOauth2Token\n   * @param callback\n   */\n  revokeOauth2Token(callback = _.noop) {\n    HJC.revokeOauth2Token(callback);\n  },\n\n  /**\n   * @method inviteUsersToRoom\n   * @param {string} roomJid\n   * @param {array} userJids\n   * @param {function} [callback]\n   */\n  inviteUsersToRoom(roomJid, userJids, callback = _.noop) {\n    HJC.inviteUsersToRoom(roomJid, userJids, callback);\n  },\n\n  /**\n   * @method removeUsersFromRoom\n   * @param {string} roomJid\n   * @param {array} userJids\n   * @param {function} [callback]\n   */\n  removeUsersFromRoom(roomJid, userJids, callback = _.noop) {\n    HJC.removeUsersFromRoom(roomJid, userJids, callback);\n  },\n\n  /**\n   * @method savePreferences\n   * @param {object} prefs\n   * @param {function} [callback]\n   */\n  savePreferences(prefs, callback = _.noop) {\n    HJC.savePreferences(prefs, callback);\n  },\n\n  /**\n   * @method fetchReadstate\n   * @param {function} [callback]\n   */\n  fetchReadstate() {\n    HJC.readstate.fetch();\n  },\n\n  /**\n   * @method updateReadstate\n   * @param {object} data\n   */\n  updateReadstate(data) {\n    HJC.readstate.update(data);\n  },\n\n  /**\n   * @method removeReadstate\n   * @param {object} data\n   */\n  removeReadstate(data) {\n    HJC.readstate.remove(data);\n  },\n\n  /**\n   * @method retryReadstate\n   */\n  retryReadstate() {\n    HJC.readstate.retry();\n  },\n\n  /**\n   * @method resetReadstate\n   */\n  resetReadstate() {\n    HJC.readstate.reset();\n  },\n\n  /**\n   * @method syncIntegrations\n   * @param {object} data\n   * @param {object} data.integrations\n   * @param {object} data.room_ids\n   * @param callback\n   */\n  syncIntegrations(data, callback = _.noop) {\n    HCApi.integrations.sync(data, callback);\n  },\n\n  /**\n   * @method getSignedUrl\n   * @param {object} data\n   * @param {string} data.extension\n   * @param {string} [data.attribute=url]\n   * @param {object} params - query params\n   * @param {function} [callback]\n   */\n  getSignedUrl(data, params, callback = _.noop) {\n    HCApi.integrations.getSignedUrl(data, params, callback);\n  },\n\n  /**\n   * @method requestWithSignedUrl\n   * @param {object} data\n   * @param {object} params\n   * @param {function} [callback]\n   */\n  requestWithSignedUrl(data, params, callback = _.noop) {\n    HCApi.integrations.requestWithSignedUrl(data, params, callback);\n  },\n\n  /**\n   * @method fetchAllGlancesForRoom\n   * @param {object} data\n   * @param {function} [callback]\n   */\n  fetchAllGlancesForRoom(data, callback = _.noop) {\n    HCApi.integrations.fetchAllGlancesForRoom(data, callback);\n  },\n\n  /**\n   * @method fetchSignedFile\n   * @param {string} url\n   * @return {promise}\n   */\n  fetchSignedFile(url) {\n    return REST.fetchSignedFile(url);\n  },\n\n  /**\n   * @method fetchSignedThumbnailCollection\n   * @param {Object} fileObjects\n   * @returns {promise}\n   */\n  fetchSignedThumbnailCollection(fileObjects) {\n    return REST.fetchSignedThumbnailCollection(fileObjects);\n  },\n\n  /**\n   * @method checkNetwork\n   * @return {promise}\n   */\n  checkNetwork() {\n    return REST.checkNetwork();\n  },\n\n  /**\n   * @method isConnected\n   * @return {boolean}\n   */\n  isConnected() {\n    return ConnectionManager.isConnected();\n  },\n\n\n  /**\n   * @method fetchVideoToken\n   */\n  fetchVideoToken(recipient_id, room_id) {\n    return REST.fetchVideoToken(recipient_id, room_id);\n  }\n};\n\nDAL.User = DALUser;\nDAL.Cache = DALCache;\nDAL.Room = DALRoom;\nDAL.Emoticon = DALEmoticon;\nDAL.Connection = DALConnection;\n\nDAL.Models = {\n  Room,\n  User,\n  Emoticon,\n  DALError\n};\n\nexport default DAL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.js\n **/","import utils from 'helpers/utils';\nimport * as Constants from './common/constants';\nimport Logger from 'helpers/logger';\nimport ConnectionManager from './xmpp/connection_manager';\nimport ReadState from './rest/readstate';\nimport ConfigStore from 'stores/configuration_store';\nimport x2js from './common/x2js';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport VideoCallStrings from 'strings/video_call_strings';\n\nvar noop = function() { return {}; };\nvar isNil = function(val) {\n  return val === null || val === undefined;\n};\n\n/**\n * HipChat Client\n */\nclass HipChat {\n  /**\n   * Creates an instance of the HipChat client that interacts with HipChat's XMPP\n   * service via BOSH\n   * @returns {object}      HipChat instance\n   */\n  constructor() {\n\n    /**\n     * config contains all of the properties needed to connect to an HC server\n     *\n     * For nonce based auth (web/session based), the following are required:\n     *\n     *   * auth_method = 'nonce'\n     *   * auth_nonce: nonce value used to validate auth. Issued by web\n     *   * jid: user's jid\n     *   * user_id\n     *   * route: xmpp route (e.g., xmpp:devvm.hipchat.com:5222)\n     *   * bind_url: BOSH end-point (e.g. https://likeabosh.hipchat.com/http-bind/)\n     *   * chat_server: XMPP end-point (e.g. chat.hipchat.com)\n     *\n     * For oauth2 based auth, the following are required:\n     *\n     *   * auth_method = 'oauth2'\n     *   * access_token: OAuth2 access token obtained through 3LO dance\n     *   * jid: user's jid\n     *   * user_id\n     *   * route: xmpp route (e.g., xmpp:devvm.hipchat.com:5222)\n     *   * bind_url: BOSH end-point (e.g. https://likeabosh.hipchat.com/http-bind/)\n     *   * chat_server: XMPP end-point (e.g. chat.hipchat.com)\n     *\n     * @type {object}\n     * @required\n     */\n\n    // instance properties\n    this.cached_profiles = {};\n    this.savePrefsAttempts = 0;\n    this.savePrefsRetryDelay = Constants.RECONNECT_DELAY_MS;\n\n    /**\n     * @deprecated\n     * @type {ReadState}\n     */\n    this.readstate = new ReadState({\n      fetchCallback: (err, data) => {\n        AppDispatcher.dispatch('DAL:readstate-fetched', err, data);\n      },\n      patchCallBack: (err, data) => {\n        AppDispatcher.dispatch('DAL:readstate-patched', err, data);\n      }\n    });\n\n    AppDispatcher.registerOnce({\n      'DAL:cache-configured': () => {\n        this.readstate.loadStorage();\n      }\n    });\n\n    this.parsedCallback = (data, once, cb) => {\n      if (typeof once === 'function') {\n        cb = once;\n        once = false;\n      }\n      cb(data);\n      return !once;\n    };\n\n    this.sendIQ = (stanza, cb) => {\n      // Wer're just passing the same thing through in both cases here... combine?\n      return ConnectionManager.sendIQ(stanza.tree(), (data) => {\n        return this.parsedCallback(x2js.xml2json(data), cb);\n      }, (err) => {\n        return this.parsedCallback(x2js.xml2json(err), cb);\n      });\n    };\n\n    this.subscribe = (evt, once, opts, cb) => {\n      var from, id, ns, type;\n      if (isNil(once)) {\n        once = false;\n      }\n      if (isNil(opts)) {\n        opts = null;\n      }\n      switch(evt) {\n        case 'roomChange':\n          evt = 'iq';\n          type = 'set';\n          ns = 'http://hipchat.com/protocol/muc#room';\n          break;\n        case 'presenceError':\n          evt = 'presence';\n          type = 'error';\n          ns = 'http://jabber.org/protocol/muc#room';\n          break;\n        case 'joinRoom':\n          evt = 'presence';\n          type = null;\n          ns = null;\n          break;\n        case 'videoMessage':\n          evt = 'message';\n          type = null;\n          ns = null;\n        default:\n          type = null;\n          ns = null;\n      }\n      if (opts) {\n        id = opts.id;\n        from = opts.from;\n      }\n      return ConnectionManager.addHandler((data) => {\n        var jsonified_data = x2js.xml2json(data);\n        return this.parsedCallback(jsonified_data, once, cb);\n      }, ns, evt, type, id, from);\n    };\n\n    this.toXMPPDate = (dttm) => {\n      if (typeof dttm === 'string') {\n        return dttm;\n      }\n      return (new Date(dttm.setMilliseconds(0))).toISOString().replace(/\\.000/, '');\n    };\n\n    this.getJidType = (jid) => {\n      var re;\n      re = new RegExp(ConfigStore.get('conference_server'));\n      if (re.test(jid)) {\n        return 'groupchat';\n      }\n      return 'chat';\n    };\n  }\n\n  on(evt, opts, cb = noop) {\n    if (typeof opts === 'function') {\n      cb = opts;\n      opts = null;\n    }\n    return this.subscribe(evt, false, opts, cb);\n  }\n\n  once(evt, opts, cb = noop) {\n    if (typeof opts === 'function') {\n      cb = opts;\n      opts = null;\n    }\n    return this.subscribe(evt, true, opts, cb);\n  }\n\n  off(subscriptionRef) {\n    return ConnectionManager.deleteHandler(subscriptionRef);\n  }\n\n  /**\n   * @deprecated\n   */\n  fetchPresence(uid, cb = _.noop) {\n    var stanza;\n    if (isNil(uid)) {\n      uid = [];\n    }\n    if (!Array.isArray(uid)) {\n      uid = [uid];\n    }\n    stanza = $iq({\n      type: 'get'\n    }).c('query', {\n      xmlns: 'http://hipchat.com/protocol/presence'\n    });\n    uid.forEach((id) => {\n      return stanza.c('uid', id).up();\n    });\n    return this.sendIQ(stanza, cb);\n  }\n\n  /**\n   * @deprecated\n   */\n  inviteUsersToRoom(room_jid, user_jids, reason, id) {\n    var attrs, node;\n    if (isNil(user_jids)) {\n      user_jids = [];\n    }\n    if (isNil(reason)) {\n      reason = '';\n    }\n    if (isNil(id)) {\n      id = null;\n    }\n    if (!Array.isArray(user_jids)) {\n      user_jids = [user_jids];\n    }\n    attrs = {\n      to: room_jid,\n      id: Math.random() * 10000000 | 0\n    };\n    if (id !== null) {\n      attrs['id'] = id;\n    }\n    node = $msg(attrs).c('x', {\n      xmlns: 'http://jabber.org/protocol/muc#user'\n    });\n    user_jids.forEach((jid) => {\n      node.c('invite', {\n        to: jid\n      });\n      node.c('reason');\n      node.t(reason);\n      node.up();\n      return node.up();\n    });\n    return ConnectionManager.send(node.tree());\n  }\n\n  /**\n   * @deprecated\n   */\n  removeUsersFromRoom(room_jid, user_jids, cb = _.noop) {\n    var stanza;\n    if (isNil(user_jids)) {\n      user_jids = [];\n    }\n    if (!Array.isArray(user_jids)) {\n      user_jids = [user_jids];\n    }\n    Logger.info(`Removing users from room - room_jid: ${room_jid}, user_jids: ${user_jids}`);\n    stanza = $iq({\n      type: 'set',\n      to: room_jid\n    }).c('query', {\n      xmlns: 'http://hipchat.com'\n    });\n    user_jids.forEach((jid) => {\n      stanza.c('item', {\n        jid: jid,\n        affiliation: \"none\"\n      });\n      return stanza.up();\n    });\n    return this.sendIQ(stanza, cb);\n  }\n\n  /**\n   * @deprecated\n   */\n  fetchHistory(jid, before, maxstanzas, id, cb) {\n    var opts, stanza;\n    if (isNil(maxstanzas)) {\n      maxstanzas = 50;\n    }\n    if (ConfigStore.isGuest()) {\n      return false;\n    }\n    Logger.info(`Getting history - jid: ${jid}`);\n    opts = {\n      xmlns: 'http://hipchat.com/protocol/history',\n      maxstanzas: maxstanzas,\n      type: this.getJidType(jid)\n    };\n    if (!isNil(before)) {\n      opts.before = this.toXMPPDate(before);\n    }\n    stanza = $iq({\n      type: 'get',\n      to: jid,\n      id: id\n    }).c('query', opts);\n    return this.sendIQ(stanza, cb);\n  }\n\n  /**\n   * @deprecated\n   */\n  fetchUserProfile(jid, cb = _.noop) {\n    var stanza;\n    if (!jid) {\n      return;\n    }\n    if (this.cached_profiles[jid] && cb) {\n      cb(this.cached_profiles[jid]);\n      return;\n    }\n    Logger.info(`Fetching profile - jid: ${jid}`);\n    stanza = $iq({\n      type: 'get',\n      to: jid\n    }).c('query', {\n      xmlns: 'http://hipchat.com/protocol/profile'\n    });\n    return this.sendIQ(stanza, (data) => {\n      if (!data.error) {\n        this.cached_profiles[jid] = data;\n      }\n      if (cb) {\n        return cb(data);\n      }\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  joinChat(jid, cb = noop) {\n    return this.sendStateMessage(jid, 'chat', 'active');\n  }\n\n  /**\n   * @deprecated\n   */\n  sendMessage(msg) {\n    var attrs, node;\n    attrs = {\n      to: msg.jid,\n      type: this.getJidType(msg.jid),\n      id: Math.random() * 10000000 | 0\n    };\n    if (msg.id !== null) {\n      attrs['id'] = msg.id;\n    }\n    node = $msg(attrs).c('body').t(msg.text).up();\n    if (attrs.type === 'chat') {\n      attrs.from = ConfigStore.get('jid');\n      node.c('active', {\n        xmlns: 'http://jabber.org/protocol/chatstates'\n      }).up().c('x', {\n        xmlns: 'http://hipchat.com'\n      }).c('echo').up().up();\n    }\n    if (msg.xhtml) {\n      node.c('html').c('body').c('p').h(msg.xhtml);\n    }\n    return ConnectionManager.send(node.tree());\n  }\n\n  /**\n   * Sends a message stanza with a replace node\n   * @deprecated\n   */\n  editMessage(jid, text, original_mid, ts, id) {\n    var attrs, node;\n    if (isNil(id)) {\n      id = null;\n    }\n    attrs = {\n      to: jid,\n      type: this.getJidType(jid),\n      from: ConfigStore.get('jid'),\n      id: Math.random() * 10000000 | 0\n    };\n    if (id !== null) {\n      attrs['id'] = id;\n    }\n    node = $msg(attrs).c('body').t(text).up();\n    node.c('replace', {\n      xmlns: 'urn:xmpp:message-correct:0',\n      id: original_mid,\n      ts: ts\n    }).up().c('x', {\n      xmlns: 'http://hipchat.com'\n    }).c('echo');\n    return ConnectionManager.send(node.tree());\n  }\n\n  /**\n   * Deletes a message\n   * @deprecated\n   */\n  deleteMessage(msg) {\n    // current implementation of deleting a message is to send an edit message with an empty message body\n    // shortcutting to reusing sendEditMessage for now to minimize code duplication\n    return this.editMessage(msg.from, \"\", msg.mid, msg.ts);\n  }\n\n  /**\n   * @deprecated\n   */\n  sendStateMessage(jid, type, state) {\n    var attrs, node;\n    attrs = {\n      to: jid,\n      type: type,\n      id: Math.random() * 10000000 | 0\n    };\n    node = $msg(attrs).c(state, {\n      xmlns: 'http://jabber.org/protocol/chatstates'\n    }).up();\n    return ConnectionManager.send(node.tree());\n  }\n\n  /**\n   * @deprecated\n   */\n  savePreferences(changeset = {}, cb = _.noop) {\n    var token = ConfigStore.get('apiv1_token');\n    if (!token || ConfigStore.get('is_guest') || !ConnectionManager.isConnected()) {\n      return;\n    }\n    if (_.has(changeset, 'autoJoin')) {\n      if (!Array.isArray(changeset.autoJoin)) {\n        delete changeset.autoJoin;\n      } else {\n        changeset.autoJoin = _.reduce(changeset.autoJoin, (acc, room) => {\n            if (_.isPlainObject(room) && !_.isEmpty(room)) {\n              acc.push(room);\n            }\n\n            return acc;\n         }, []);\n      }\n    }\n    if (!_.isEmpty(changeset)) {\n      var jsonResp;\n      return $.ajax({\n        type: 'POST',\n        dataType: 'json',\n        url: `${ ConfigStore.get('base_url') }/api/save_preferences`,\n        data: {\n          json: JSON.stringify(_.omitBy(changeset, _.isNull)),\n          user_id: ConfigStore.get('user_id'),\n          group_id: ConfigStore.get('group_id'),\n          token: token,\n          format: 'json'\n        },\n        async: true,\n        complete: (resp) => {\n          try {\n            jsonResp = JSON.parse(resp.responseText);\n            if (jsonResp.error && jsonResp.error === 'Invalid token') {\n              ConnectionManager.updateApiV1Token()\n                .then(() => {\n                  this.savePrefsAttempts++;\n                  if (this.savePrefsAttempts <= 5) {\n                    this.savePrefsRetryDelay = utils.decorrelatedJitter(Constants.RECONNECT_MAX_DELAY, Constants.RECONNECT_DELAY_MS, this.savePrefsRetryDelay, Constants.RECONNECT_BACKOFF_FACTOR);\n                    _.delay(this.savePreferences.bind(this), this.savePrefsRetryDelay);\n                  }\n                });\n            } else {\n              this.savePrefsAttempts = 0;\n              cb();\n            }\n          } catch (e) {\n            Logger.warn('[API V1 response structure:] ' + resp.responseText);\n            cb(resp.responseText);\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Looks to be completely unused\n   * @deprecated\n   */\n  sendUploadMessage(data) {\n    var attrs, file_info, msg;\n    if (!ConnectionManager.isConnected()) {\n      return false;\n    }\n    file_info = x2js.xml2json(data.file_info);\n    attrs = {\n      to: data.jid,\n      type: data.type\n    };\n    msg = $msg(attrs).c('x', {\n      xmlns: 'http://hipchat.com/protocol/muc#room'\n    }).c('file', {\n      'id': file_info.response.file_id\n    }).up().up();\n    if (data.type !== 'groupchat') {\n      msg.c('x', {\n        xmlns: 'http://hipchat.com'\n      }).c('echo').up().up();\n    }\n    return ConnectionManager.send(msg.tree());\n  }\n\n  /**\n   * @deprecated\n   */\n  clearWebCookies(cb = _.noop) {\n    var url = utils.url.clearWebCookies(ConfigStore.get('web_server'));\n    if (url) {\n      utils.request.simplePost(url, cb);\n    }\n  }\n\n  /**\n   * @deprecated\n   */\n  revokeOauth2Token(cb = _.noop) {\n    var token = ConfigStore.getOAuthToken(),\n        url = utils.url.revokeOauth2Token(ConfigStore.get('api_host'), token);\n    $.ajax({\n      type: 'DELETE',\n      beforeSend: function (xhr) {\n        xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n      },\n      url: url,\n      async: true,\n      success: function (resp) {\n        cb(resp);\n      },\n      error: function (resp) {\n        cb(resp);\n      }\n    });\n  }\n\n  /**\n   * @deprecated\n   */\n  requestAddliveCredentials(jid, cb = _.noop) {\n    var done, fail, stanza;\n    stanza = $iq({\n      to: jid,\n      type: 'get'\n    }).c('query', {\n      xmlns: 'http://hipchat.com/protocol/addlive'\n    });\n    done = function(resp) {\n      resp = x2js.xml2json(resp);\n      return cb(null, resp.query);\n    };\n    fail = function(resp) {\n      resp = x2js.xml2json(resp);\n      return cb(resp.error);\n    };\n    return ConnectionManager.sendIQ(stanza, done, fail);\n  }\n\n  /**\n   * @deprecated\n   */\n  sendVideoMessage(...args) {\n    let attrs,\n      data = args[0],\n      type = data.type,\n      node,\n      id = Math.random() * 10000000 | 0;\n    if (isNil(data.type)) {\n      type = 'call';\n    }\n    if (!ConnectionManager.isConnected()) {\n      return false;\n    }\n    attrs = {\n      to: data.jid,\n      type: this.getJidType(data.jid),\n      from: ConfigStore.get('user_jid'),\n      id: id\n    };\n    node = $msg(attrs).c('x', {\n      xmlns: `http://hipchat.com/protocol/${data.service}`\n    }).c(type);\n    if (data.service === 'enso') {\n      if (type === 'call') {\n        node.c('url').t(data.url);\n        node.up().up().up().c('body')\n          .t(VideoCallStrings.enso_to_addlive( data.url.replace('/join/', '/call/') ));\n      } else if (type === 'decline') {\n        node.c('reason').t(data.reason);\n      }\n    } else {\n      node.c('audio').up();\n      if (!data.audio_only) {\n        node.c('video');\n      }\n    }\n    this.once('videoMessage', {id: id}, data.callback);\n    return ConnectionManager.send(node.tree());\n  }\n}\n\nexport default new HipChat();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/hipchat.js\n **/","import * as Constants from 'core/common/constants';\nimport Timer from 'core/common/timer';\nimport DAL from 'core/dal';\nimport utils from 'helpers/utils';\nimport Logger from 'helpers/logger';\nimport HC_Strophe_Connection from './connection/connection_manager_connection';\nimport x2js from 'core/common/x2js';\nimport ConfigStore from 'stores/configuration_store';\nimport ConfigActions from 'actions/config_actions';\nimport ConfigurationModel from 'models/configuration_model';\nimport ConnectionActions from 'actions/connection_actions';\nimport PingPlugin from './plugins/ping_plugin';\nimport ConnectionHooksPlugin from './plugins/connection_hooks_plugin';\nimport RoomsPlugin from './plugins/rooms_plugin';\nimport ChatPlugin from './plugins/chat_plugin';\nimport PresencePlugin from './plugins/presence_plugin';\nimport XMPPTrapPlugin from './plugins/xmpp_trap_plugin';\nimport RosterPlugin from './plugins/roster_plugin';\nimport EmoticonsPlugin from './plugins/emoticons_plugin';\nimport CachePlugin from './plugins/cache_plugin';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport DALCache from 'core/dal.cache';\n\nconst STATE = Symbol.for('HJC.Connection.Manager.State');\nconst PREFIX = '[Connection]';\n\n/**\n * @class ConnectionManager\n * @singleton\n */\nclass ConnectionManager {\n\n  constructor() {\n\n    /**\n     * Internal STATE\n     */\n    this[STATE] = {\n      isInitialConnect: true,\n      connected: false,\n      shouldReconnect: true, //should only ever be set to false when exiting the app\n      isRefreshOAuthTokenInFlight: false,\n      isSessionRequestInFlight: false,\n      reconnectDelay: Constants.RECONNECT_DELAY_MS,\n      oauthTokenRefreshDelay: Constants.OAUTH_TOKEN_REFRESH_DELAY_MS,\n      reconnectAttempts: 0,\n      disconnectedTimestamp: null\n    };\n\n    this.refreshOAuthToken = () => { Promise.resolve(); };\n\n    /**\n     * Can't instantiate this until after we get the bind_url\n     * @property Connection\n     * @type {Strophe.Connection}\n     */\n    this.Connection = null;\n\n    /**\n     * Started once the CM sends a 'connect' stanza to the server when\n     * trying to reconnect. If the app connects before it runs out, it\n     * will clear itself. If not, it will re-call the 'reconnect' method\n     * to try again\n     *\n     * @property {Timer} reconnectionTimer\n     */\n    this.reconnectionTimer = new Timer(() => {\n      if (this[STATE].shouldReconnect || this.isBOSHSessionExpired()) {\n        this.reconnect(false);\n      }\n    }, this[STATE].reconnectDelay);\n\n    /**\n     * For OAuth, starts once connection is established and executes\n     * an hour later when the oauth token has expired to get a new token\n     *\n     * @property {Timer} oauthRefreshTimer\n     */\n    this.oauthRefreshTimer = new Timer(() => {\n      Logger.debug(PREFIX, 'OAuth timer expired. Fetching new OAuth token');\n      AnalyticsDispatcher.dispatch('analytics-event', {\n        name: 'hipchat.client.oauth.token.refresh.requested',\n        properties: {\n          reason: 'Token expiry timer lapsed'\n        }\n      });\n      this._getNewOAuthToken().then(_.noop).catch((err) => {\n        Logger.error(PREFIX, `Failed to fetch new OAuth token due to: ${err}`);\n      });\n    }, 3599000, 5000);\n    this.oauthRetryTimer = null;\n\n    /**\n     * The apiV1TokenRefreshTimer is started on initial connect.\n     * Refreshes the token each time it fires, then starts over again\n     */\n    this.apiV1TokenRefreshTimer = new Timer(() => {\n      this.updateApiV1Token().catch(() => {});\n    }, ConfigStore.getApiV1TokenExpiry(), 5000);\n  }\n\n  //TODO: temp stopgap to get this holdover callback from native initState in here\n  setOAuthTokenCallback(callback) {\n    if (_.isFunction(callback)){\n      this.refreshOAuthToken = callback;\n    }\n    return this;\n  }\n\n  /**\n   * Begins connection. Nothing happens until this method is called\n   *\n   * @method connect\n   */\n  connect() {\n    return this._initializeSession()\n      .then(() => {\n\n        /**\n         * Install Strophe Connection plugins. You only need to do this once, and before\n         * the Strophe.Connection is instantiated. Installing them here as the client\n         * configuration will be guaranteed by this point from the _initializeSession method.\n         * NOTE: ConnectionHooks must be installed first as it provides hooks\n         * other plugins are using\n         */\n        Strophe.addConnectionPlugin('ConnectionHooks', new ConnectionHooksPlugin());\n        Strophe.addConnectionPlugin('XMPPTrapPlugin', new XMPPTrapPlugin());\n        Strophe.addConnectionPlugin('Presence', new PresencePlugin());\n        Strophe.addConnectionPlugin('Ping', new PingPlugin());\n        Strophe.addConnectionPlugin('Rooms', new RoomsPlugin());\n        Strophe.addConnectionPlugin('Chat', new ChatPlugin());\n        Strophe.addConnectionPlugin('Roster', new RosterPlugin());\n        Strophe.addConnectionPlugin('Emoticons', new EmoticonsPlugin());\n        Strophe.addConnectionPlugin('Cache', new CachePlugin());\n\n        this.Connection = new HC_Strophe_Connection();\n        return this._doConnect();\n      })\n      .then(() => {\n        this._registerEventListeners();\n      })\n      .catch((error) => {\n        Logger.error('[ConnectionManager.connect]: ', error);\n      });\n  }\n\n  /**\n   * Does the initial connection handshake requests to the server. If\n   * the ajax and auth handshake is successful, will resolve. If the\n   * requests time out, auth fail or connection fail, will reject\n   * @returns {Promise}\n   * @private\n   */\n  _doConnect() {\n    return new Promise((resolve, reject) => {\n      this.Connection.ConnectionHooks.addXmppConnectedHandler(() => {\n        Logger.debug(PREFIX, 'Strophe successfully connected');\n        this._resetForNewReconnection();\n        this[STATE].connected = true;\n\n        resolve();\n        return false;\n      });\n\n      this.Connection.ConnectionHooks.addXmppDisconnectedHandler((status, condition) => {\n        Logger.error(PREFIX, `Strophe failed to connect. Status: ${status}, Condition: ${condition}`);\n        reject({ status, condition });\n        return false;\n      });\n\n      this.Connection.connect(ConfigStore.get('jid'), null, this._onConnectionChange.bind(this), null, null, ConfigStore.get('route'));\n    });\n  }\n\n  /**\n   * Initiate reconnection request through Strophe\n   *\n   * @method reconnect\n   */\n  reconnect(resetAndReconnect = true) {\n    if (this[STATE].connected || this[STATE].isSessionRequestInFlight) {\n      return Promise.resolve();\n    }\n\n    if (resetAndReconnect) {\n      this._resetForNewReconnection();\n      this[STATE].connected = false;\n      clearTimeout(this.oauthRetryTimer);\n    }\n\n    return this._doReconnect();\n  }\n\n  /**\n   * @method _doReconnect\n   */\n  _doReconnect() {\n    Logger.debug(PREFIX, 'Strophe reconnecting');\n\n    this.reconnectionTimer.clear();\n    this[STATE].reconnectAttempts++;\n    if (this[STATE].reconnectAttempts < 6) {\n      this._signalReconnecting();\n    }\n\n    return this._reestablishSession()\n      .then(() => {\n        this.Connection.disconnect('Resetting before reconnect');\n        this.Connection.reset();\n        return this._doConnect();\n      })\n      .catch((data) => {\n        Logger.error(PREFIX, `Error reestablishing connection. Server response: ${JSON.stringify(data)}`);\n        // Your session cookie has expired. You need to login again\n        if (data && data.refresh_page) {\n          ConnectionActions.reconnectionError(`${PREFIX} Error reestablishing connection. Server response: ${JSON.stringify(data)}`);\n        }\n\n        this._setReconnectTimer();\n\n        if (this[STATE].reconnectAttempts < 5) {\n          this._signalReconnectDelay();\n          Logger.debug(PREFIX, `reconnect(). Next attempt in ${this[STATE].reconnectDelay / 1000}s`);\n        } else {\n          this._signalConnectionFailed(`Error: 5 failure attempts to reestablish connection. Server response (if any): ${JSON.stringify(data)}`);\n        }\n      });\n  }\n\n  /**\n   * Disconnect from xmpp, put in not-connected STATE\n   * and kill any timers going on\n   *\n   * @method disconnect\n   * @param {boolean} should_reconnect\n   */\n  disconnect(should_reconnect = true) {\n    Logger.debug(PREFIX, 'disconnect() called.');\n    if (!should_reconnect) {\n      Logger.debug(PREFIX, 'disconnect() called. Should not auto-reconnect.');\n      this[STATE].shouldReconnect = false;\n      this.reconnectionTimer.clear();\n    }\n    this[STATE].connected = false;\n    this.Connection.disconnect();\n    this.Connection.flush();\n  }\n\n  /**\n   * Pass through to Strophe.Connection.send\n   * @method send\n   */\n  send(...args) {\n    if (!this.Connection) {\n      Logger.error(PREFIX, 'Attempted to send stanza before establishing an initial XMPP connection:', arguments[0].outerHTML);\n      return;\n    }\n    this.Connection.send(...args);\n  }\n\n  /**\n   * Pass through to Strophe.Connection.sendIQ\n   */\n  sendIQ(...args) {\n    if (!this.Connection) {\n      Logger.error(PREFIX, 'Attempted to sendIQ before establishing an initial XMPP connection:', arguments[0].outerHTML);\n      return;\n    }\n    this.Connection.sendIQ(...args);\n  }\n\n  /**\n   * Pass through to Strophe.Connection.addHandler\n   * @returns {Strophe.Handler}\n   */\n  addHandler(...args) {\n    if (this.Connection) {\n      return this.Connection.addHandler(...args);\n    }\n  }\n\n  /**\n   * Pass through to Strophe.Connection.addTimedHandler\n   * @returns {Strophe.Handler}\n   */\n  addTimedHandler(...args) {\n    if (this.Connection) {\n      return this.Connection.addTimedHandler(...args);\n    }\n  }\n\n  /**\n   * Pass through to Strophe.Connection.deleteHandler\n   * @method deleteHandler\n   */\n  deleteHandler(...args) {\n    if (this.Connection) {\n      this.Connection.deleteHandler(...args);\n    }\n  }\n\n  /**\n   * Returns the time (in milliseconds) the last disconnection occurrred\n   * @return {Date} The time the last disconnect occurred\n   */\n  getDisconnectedTimestamp() {\n    return this[STATE].disconnectedTimestamp;\n  }\n\n  /**\n   * @method isConnected\n   * @returns {boolean} is it currently connected\n   */\n  isConnected() {\n    return this[STATE].connected;\n  }\n\n  /**\n   * @method isInitialConnect\n   * @returns {boolean}\n   */\n  isInitialConnect() {\n    return this[STATE].isInitialConnect;\n  }\n\n  /**\n   * @method isBOSHSessionExpired\n   */\n\n  isBOSHSessionExpired() {\n    return (utils.now() - this.Connection.last_BOSH_activity) > this.Connection.allowedInactivityInterval + Constants.NETWORK_LATENCY_GRACE_PERIOD;\n  }\n\n  /**\n   * @method updateApiV1Token - Send the IQ to update the API V1 token\n   * @return {promise}\n   */\n  updateApiV1Token() {\n    return new Promise((resolve) => {\n      let stanza = $iq({\n        type: 'get',\n        to: ConfigStore.get('chat_server')\n      }).c('query', {\n        xmlns: 'http://hipchat.com/protocol/auth'\n      });\n      this.Connection.sendIQ(stanza, (response) => {\n        let parsedResponse = x2js.xml2json(response);\n        if (parsedResponse.query.token) {\n          ConfigActions.updateAuthTokens(new ConfigurationModel({\n            token: x2js.xml2json(response).query.token\n          }));\n          this.apiV1TokenRefreshTimer.clear()\n            .resetTime(ConfigStore.getApiV1TokenExpiry())\n            .start();\n        }\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * @function _initializeSession\n   * @private\n   * @returns {Promise}\n   */\n  _initializeSession() {\n    return new Promise((resolve, reject) => {\n      // If in oauth mode, we should've been provided the config we need so resolve with what we have\n      // If there's a base_url defined, then we're connecting to a server that requires a nonce token\n      // (ie. connecting to atlassian.hipchat.com from a devvm). This only happens when you gulp build\n      // with an explicit HC_WEB_BASEURL defined. In that case, we need to get that session token\n      // and then resolve with the response we get. Otherwise, just proceed and connect. In production,\n      // no base_url is defined, and the session token is passed from web in the initial STATE\n      if (!ConfigStore.get('base_url') || ConfigStore.isOAuth()) {\n        DALCache.configure(ConfigStore.get('user_id'), ConfigStore.get('group_id'));\n        return resolve();\n      }\n\n      let request = $.ajax({\n        url: `${ConfigStore.get('base_url')}/chat/session?nonce_auth=1`,\n        type: 'GET',\n        headers: {\n          'accepts': 'application/json'\n        }\n      });\n\n      request\n        .done((response) => {\n          if (response.error) {\n            reject(response.error);\n          } else {\n            ConfigActions.updateAppConfiguration(new ConfigurationModel(response));\n            DALCache.configure(ConfigStore.get('user_id'), ConfigStore.get('group_id'));\n            resolve();\n          }\n        })\n        .fail((jqXHR) => {\n          this._handleErrorResponse(jqXHR, reject);\n        });\n    });\n  }\n\n  /**\n   * For Nonce, post ajax req to /chat/session to reestablish session\n   * For OAuth, if the token is old, get a new one\n   *\n   * @function _reestablishSession\n   * @private\n   */\n  _reestablishSession() {\n    return new Promise((resolve, reject) => {\n      if (ConfigStore.isNonce()) {\n        this[STATE].isSessionRequestInFlight = true;\n\n        let request = $.ajax({\n          url: `${ConfigStore.get('base_url')}/chat/session`,\n          type: 'GET',\n          timeout: 10000,\n          data: {\n            is_guest: ConfigStore.isGuest(),\n            guest_key: ConfigStore.get('guest_key'),\n            uid: ConfigStore.get('user_id'),\n            nonce_auth: 1\n          }\n        });\n\n        request\n          .done((response) => {\n            if (response.error) {\n              reject(response);\n            } else {\n              ConfigActions.updateAppConfiguration(new ConfigurationModel(response));\n              resolve();\n            }\n          })\n          .fail((jqXHR) => {\n            this._handleErrorResponse(jqXHR, reject);\n          })\n          .always(() => {\n            this[STATE].isSessionRequestInFlight = false;\n          });\n\n      } else if (ConfigStore.isOAuth()) {\n        if (this.oauthRefreshTimer.hasExpired()) {\n          AnalyticsDispatcher.dispatch('analytics-event', {\n            name: 'hipchat.client.oauth.token.refresh.requested',\n            properties: {\n              reason: '_reestablishSession() called'\n            }\n          });\n          this._getNewOAuthToken().then(resolve).catch(reject);\n        } else {\n          DAL.checkNetwork().then(resolve).catch(reject);\n        }\n      }\n    });\n  }\n\n  /**\n   * Does the jQuery-specific responseText checking on the xhr for errors\n   *\n   * @param xhr the jqXHR object\n   * @param callback the function you intend to use as your error handler\n   * @private\n   */\n  _handleErrorResponse(xhr, callback) {\n    var response = xhr.responseText;\n    if (_.isString(response) && response !== \"\") {\n      try {\n        response = JSON.parse(response);\n      } catch (e) {\n        response = {\n          error: e\n        };\n      }\n    }\n    callback(response, xhr);\n  }\n\n  /**\n   * Request the startup stanza from xmpp, and resolve\n   * once it comes back\n   *\n   * @method _getStartupStanza\n   * @private\n   * @returns {Promise}\n   */\n  _getStartupStanza() {\n    return new Promise((resolve) => {\n      let stanza = $iq({\n        type: 'get',\n        id: Math.random() * 10000000 | 0\n      }).c('query', {\n        xmlns: 'http://hipchat.com/protocol/startup',\n        send_auto_join_user_presences: false\n      });\n      this.Connection.sendIQ(stanza, (d) => {\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Fetch feature flags from [server]/api/features\n   *\n   * @method _getFeatureFlags\n   * @private\n   * @returns {Object}\n   */\n  _getFeatureFlags() {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        type: 'POST',\n        url: utils.url.featureFlagsAPI(ConfigStore.get('base_url')),\n        dataType: 'json',\n        data: {\n          user_id: ConfigStore.get('user_id'),\n          group_id: ConfigStore.get('group_id')\n        }\n      })\n      .done((data) => {\n        let featureFlags = _.pickBy(data.features, (val, key) =>\n          key.indexOf('web_client') === 0 || key === 'btf' || key === 'entity_versioning' // conditions copied from chat.php\n        );\n        // Pass native_feature_flags along with feature_flags so Configuration Model\n        // correctly reconciles the flags\n        let flags = new ConfigurationModel({\n          'feature_flags': featureFlags,\n          'native_feature_flags': ConfigStore.get(\"native_feature_flags\")\n        });\n        ConfigActions.updateFeatureFlags(flags);\n        resolve(flags);\n      })\n      .fail((jqXHR, textStatus) => {\n        Logger.error(\"[_getFeatureFlags]\", jqXHR.statusText);\n        reject(jqXHR.statusText);\n      });\n    });\n  }\n\n  /**\n   * @method _setReconnectTimer\n   */\n  _setReconnectTimer() {\n    let decorrelatedJitterMS = utils.decorrelatedJitter(Constants.RECONNECT_MAX_DELAY, Constants.RECONNECT_DELAY_MS, this[STATE].reconnectDelay, Constants.RECONNECT_BACKOFF_FACTOR);\n    this[STATE].reconnectDelay = Math.round(decorrelatedJitterMS / 1000) * 1000;\n    Logger.debug(PREFIX, 'Attempting reconnect in ' + this[STATE].reconnectDelay);\n    this.reconnectionTimer.resetTime(this[STATE].reconnectDelay).start();\n  }\n\n  /**\n  * Reset variables used for reconnection attempts.\n  * This should only be used after 5 failed reconnection attempts.\n  *\n  * @method _resetForNewReconnection\n  */\n  _resetForNewReconnection() {\n    this[STATE].shouldReconnect = true;\n    this[STATE].reconnectDelay = Constants.RECONNECT_DELAY_MS;\n    this[STATE].reconnectAttempts = 0;\n  }\n\n  /**\n   * Callback fired whenever Strophe signals a connection change\n   * Exported to make mocking easier. Not to be used outside of testing\n   *\n   * @method _onConnectionChange\n   * @private\n   * @param status\n   * @param condition\n   */\n  _onConnectionChange(status, condition) {\n    switch (status) {\n\n      /**\n       * Reset flags to connected status\n       * Kill reconnect timer\n       * Emit connect + initial-connect/reconnect events\n       */\n      case Strophe.Status.CONNECTED:\n        this._updateSID();\n\n        Logger.debug(PREFIX, 'Strophe connected');\n\n        let promises = [];\n\n        if (ConfigStore.isOAuth()) {\n          promises.push(this._getStartupStanza()\n            .then(() => {\n              Logger.debug(PREFIX, 'Startup stanza received');\n              ConfigActions.updateAuthTokens({\n                apiv1_token: ConfigStore.getApiV1Token()\n              });\n              this.apiV1TokenRefreshTimer\n                .resetTime(ConfigStore.getApiV1TokenExpiry())\n                .restart();\n            })\n            .catch((err) => {\n              Logger.error(PREFIX, 'Error getting startup stanza', err);\n            }));\n          if (this[STATE].isInitialConnect) {\n            this.oauthRefreshTimer.resetTime(ConfigStore.getOAuthTokenExpiry()).start();\n          } else {\n            this.oauthRefreshTimer.resume();\n          }\n        } else if (ConfigStore.isNonce() && !ConfigStore.isGuest()) {\n          this.apiV1TokenRefreshTimer\n            .resetTime(ConfigStore.getApiV1TokenExpiry())\n            .restart();\n        }\n\n        if (this[STATE].isInitialConnect) {\n          ConnectionActions.stropheConnected();\n        } else {\n          ConnectionActions.stropheReconnected();\n        }\n\n        promises.push(this._getFeatureFlags()\n          .then(() => {\n            Logger.debug(PREFIX, 'Feature flags received');\n          })\n          .catch((err) => {\n            Logger.error(PREFIX, 'Error getting feature flags', err);\n          }));\n\n        return Promise.all(promises)\n          .then(() => {\n            if (this[STATE].isInitialConnect) {\n              ConnectionActions.appStateConnected();\n              this[STATE].isInitialConnect = false;\n            } else {\n              ConnectionActions.appStateReconnected();\n            }\n          })\n          .catch((err) => {\n            Logger.error(PREFIX, 'Unknown connection error', err);\n          });\n\n      /**\n       * Reset flags to disconnected status\n       * If condition is 'conflict', disable reconnect\n       * Emit connection fail\n       */\n      case Strophe.Status.CONNFAIL:\n      case Strophe.Status.AUTHFAIL:\n\n        Logger.debug(PREFIX, `[Strophe] Offline. Condition: ${condition}`);\n        this[STATE].connected = false;\n        if (condition === 'conflict' || condition === 'not-allowed' || condition === 'not-authorized') {\n          ConnectionActions.stropheAuthFailed(status, condition);\n          this.reconnectionTimer.clear();\n        } else if (condition === 'policy-violation'){\n          ConnectionActions.strophePolicyViolation(status, condition);\n          this.reconnectionTimer.clear();\n        } else {\n          this._signalConnectionFailed(condition);\n        }\n        break;\n\n      /**\n       * Reset flags to disconnected status\n       * Start reconnection timer\n       */\n      case Strophe.Status.DISCONNECTED:\n\n        Logger.debug(PREFIX, '[Strophe] Disconnected');\n        this[STATE].disconnectedTimestamp = new Date().getTime();\n        this[STATE].connected = false;\n        this.oauthRefreshTimer.pause();\n        this.apiV1TokenRefreshTimer.clear();\n        ConnectionActions.stropheDisconnected();\n        if (this[STATE].shouldReconnect) {\n          Logger.debug(PREFIX, '[Strophe] Disconnected and attempting Reconnect');\n          this.reconnect(false);\n        }\n        break;\n\n      /**\n       * Just log. No further action needed\n       */\n      case Strophe.Status.AUTHENTICATING:\n        Logger.debug(PREFIX, '[Strophe] Authenticating');\n        ConnectionActions.stropheAuthenticating();\n        break;\n\n      case Strophe.Status.CONNECTING:\n        Logger.debug(PREFIX, '[Strophe] Connecting');\n        break;\n\n      case Strophe.Status.DISCONNECTING:\n        Logger.debug(PREFIX, '[Strophe] Disconnecting. Condition: ' + condition);\n        ConnectionActions.stropheDisconnecting({ status, condition });\n        break;\n    }\n  }\n\n  /**\n   * @function _getNewOAuthToken\n   * @private\n   */\n  _getNewOAuthToken() {\n    // This is currently a pretty janky scenario as the function to actually get a new oauth token is passed in the initState from native\n    // TODO: make this a spi\n    if (this[STATE].isRefreshOAuthTokenInFlight) {\n      Logger.error('Oauth: OAuth token refresh already in progress');\n    }\n\n    return new Promise((resolve, reject) => {\n      this._tryToGetOAuthToken()\n\n        // Success will resolve to: { \"access_token\": \"t0k3n\", \"expires_in\": 0000 }\n        // expires_in is number of seconds (not milliseconds)\n        .then((data) => {\n          Logger.debug(PREFIX, `Successfully received new OAuth token. Expires in: ${data.expires_in} seconds.`);\n          this[STATE].isRefreshOAuthTokenInFlight = false;\n          this.oauthRefreshTimer.resetTime(ConfigStore.getOAuthTokenExpiry()).start();\n          try {\n            ConfigActions.updateAuthTokens(new ConfigurationModel(data));\n          } catch (e) {\n            Logger.error(PREFIX, `Downstream error captured when dispatching new oauth token to the rest of the app: ${ e.message }`);\n          }\n          resolve();\n        })\n\n        // Rejection will resolve to: { \"error\": \"some error\", \"error_code\": 000, \"error_description\": \"long error string\" }\n        // error_code of 302 (or 401) should trigger sign-out as the oauth refresh token on the native side has been revoked\n        .catch((data) => {\n          Logger.error(PREFIX, `Failed to retrieve OAuth token: ${data.error_description}`);\n          ConnectionActions.stropheAuthFailed({\n            status: Strophe.Status.AUTHFAIL,\n            condition: data.error_description\n          });\n          reject();\n        });\n    });\n  }\n\n  _tryToGetOAuthToken() {\n    return new Promise((resolve, reject) => {\n      let attempts = 1,\n        delay = Constants.OAUTH_TOKEN_REFRESH_DELAY_MS,\n        tryAgain;\n\n      let onError = (data) => {\n        this[STATE].isRefreshOAuthTokenInFlight = false;\n        Logger.debug(PREFIX, `Attempt #${ attempts } to refresh oauth token failed with ${ data.error_code }, ${ data.error_description }. Retrying again in ${delay}`);\n        if (data.error_code === 302 || data.error_code === 401 || (data.error_code === 400 && data.error === 'invalid_grant')) {\n          reject(data);\n          return;\n        }\n\n        attempts++;\n        delay = utils.decorrelatedJitter(Constants.OAUTH_TOKEN_REFRESH_MAX_DELAY, Constants.OAUTH_TOKEN_REFRESH_DELAY_MS, delay, Constants.OAUTH_TOKEN_REFRESH_BACKOFF_FACTOR);\n        this.oauthRetryTimer = setTimeout(tryAgain, delay);\n      };\n\n      tryAgain = () => {\n        Logger.debug(PREFIX, `Trying to refresh oauth token. Attempt #${attempts}`);\n        this[STATE].isRefreshOAuthTokenInFlight = true;\n        this.refreshOAuthToken().then(resolve).catch(onError);\n      };\n\n      tryAgain();\n    });\n  }\n\n  /**\n   * @private\n   */\n  _registerEventListeners() {\n    $(window).on('beforeunload', this._unloadListener.bind(this));\n  }\n\n  /**\n   * Event listener registered on window when the page is being unloaded\n   * @private\n   */\n  _unloadListener() {\n    if (this[STATE].connected) {\n      this.disconnect(false);\n    }\n  }\n\n  _updateSID() {\n    let sid = _.clone(this.Connection._proto.sid);\n    ConfigActions.updateSID(new ConfigurationModel({\n      sid: sid\n    }));\n  }\n\n  _signalReconnecting() {\n    ConnectionActions.stropheReconnecting({\n      reconnectAttempts: this[STATE].reconnectAttempts\n    });\n  }\n\n  _signalReconnectDelay() {\n    ConnectionActions.stropheReconnectDelay({\n      reconnectDelay: this[STATE].reconnectDelay\n    });\n  }\n\n  _signalConnectionFailed(data) {\n    ConnectionActions.stropheConnectionFailed(Strophe.Status.CONNFAIL, data);\n  }\n\n  /**\n   * Reset configuration variables to empty STATE\n   * FOR TESTING ONLY\n   * @method reset\n   */\n  reset() {\n    this.Connection = null;\n    this.oauthRefreshTimer.clear();\n    this.reconnectionTimer.clear();\n    this.apiV1TokenRefreshTimer.clear();\n    this[STATE].connected = false;\n    this[STATE].isInitialConnect = true;\n    this[STATE].shouldReconnect = true;\n    this[STATE].reconnectDelay = Constants.RECONNECT_DELAY_MS;\n    this[STATE].reconnectAttempts = 0;\n    this[STATE].isRefreshOAuthTokenInFlight = false;\n    this[STATE].isSessionRequestInFlight = false;\n    $(window).off('beforeunload', this._unloadListener.bind(this));\n  }\n}\n\nexport default new ConnectionManager();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/connection_manager.js\n **/","import Logger from 'helpers/logger';\n\n/**\n * Instead of using window.setTimeout for anything that requires real\n * time-based intervals, use this. It sets an interval that checks\n * on a given frequency to see if the number of ms have passed since\n * you started the timer.\n *\n * @class Timer\n */\nexport default class Timer {\n\n  /**\n   * @constructs\n   * @param {function} callback\n   * @param {number} delay\n   * @param {number} [interval]\n   * @param {boolean} repeat\n   */\n  constructor(callback, delay, interval, repeat = false) {\n    this._callback = callback;\n    this._delay = delay;\n    this._repeat = repeat;\n    this.id = null;\n    this.resetTime(delay, interval);\n    this.started = false;\n    this.cleared = false;\n  }\n\n  /**\n   * Starts the timer. Can optionally override the callback,\n   * delay or interval set in the constructor when calling start().\n   * @method start\n   */\n  start() {\n    if (this.id) {\n      this.clear();\n      Logger.info('[Timer]', 'Timer was already running. Clearing timer and restarting.');\n    }\n    this._startTime = new Date().getTime();\n    this.started = true;\n    this.cleared = false;\n    this.id = setInterval(() => {\n      if (this.hasExpired()) {\n        this.resolve();\n      }\n    }, this._frequency);\n    return this;\n  }\n\n  /**\n   * Update the time for the timer\n   * @param {number} delay\n   * @param {number} [interval=1000]\n   */\n  resetTime(delay, interval = (this._frequency || 1000)) {\n    this._delay = delay;\n    this._frequency = interval < delay ? interval : delay;\n    return this;\n  }\n\n  /**\n   * Restarts the timer\n   * @method reset\n   */\n  restart() {\n    this.clear().start();\n    return this;\n  }\n\n  /**\n   * Clears the timer\n   * @method clear\n   */\n  clear() {\n    clearInterval(this.id);\n    this.id = null;\n    this.cleared = true;\n    this.started = false;\n    return this;\n  }\n\n  /**\n   * Pauses the timer\n   * @method pause\n   */\n  pause() {\n    if (!this._paused) {\n      clearInterval(this.id);\n      this._paused = true;\n    }\n  }\n\n  /**\n   * Resumes the timer\n   * @method resume\n   */\n  resume() {\n    if (this._paused) {\n      this._paused = false;\n      let remaining = Math.max(this._delay - new Date().getTime() + this._startTime, 0);\n      this.resetTime(remaining).start();\n    }\n  }\n\n  /**\n   * Clear timer and execute callback\n   * @method resolve\n   */\n  resolve() {\n    if (!this._repeat) {\n      this.clear();\n    }\n    this._callback();\n  }\n\n  /**\n   * Check to see if enough time has passed\n   * @method hasExpired\n   */\n  hasExpired() {\n    return (new Date().getTime() - this._startTime) >= this._delay;\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/common/timer.js\n **/","import './connection_manager_request';\nimport ConfigStore from 'stores/configuration_store';\nimport ConfigActions from 'actions/config_actions';\nimport ConfigurationModel from 'models/configuration_model';\nimport utils from 'helpers/utils';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport ClientType from 'lib/enum/client_type';\n\n/**\n * Have to create a temporary faux-class here to fix the prototype chain\n * that is broken due to the way Strophe is written (sadpanda)\n */\nvar StropheConnectionClassFix = function () {\n  Strophe.Connection.apply(this, arguments);\n};\n\nStropheConnectionClassFix.prototype = _.extend(StropheConnectionClassFix.prototype, Strophe.Connection.prototype);\n\n/**\n * Extends Strophe.Connection to apply overrides for\n * HipChat authentication.\n *\n * @class HCStropheConnection\n */\nexport default class Connection extends StropheConnectionClassFix {\n\n  /**\n   * @constructs\n   */\n  constructor() {\n    super(ConfigStore.get('bind_url'));\n\n    /**\n     * @property {boolean} supportsRestarts\n     */\n    this.supportsRestarts = false;\n  }\n\n  /**\n   * @override\n   * @method connect\n   */\n  connect(...args) {\n    let onAuthSuccessCallback = (elem) => {\n      let jid = elem.textContent,\n        access_token = elem.getAttribute('oauth2_token') || ConfigStore.getOAuthToken();\n      AnalyticsActions.successfulAuthEvent(jid, access_token);\n      ConfigActions.updateAuthTokens(new ConfigurationModel({ access_token }));\n      return this._sasl_success_cb(elem);\n    };\n    let onAuthFailedCallback = (elem) => {\n      if (this._sasl_success_handler) {\n        this.deleteHandler(this._sasl_success_handler);\n        this._sasl_success_handler = null;\n      }\n      if (this._sasl_challenge_handler) {\n        this.deleteHandler(this._sasl_challenge_handler);\n        this._sasl_challenge_handler = null;\n      }\n\n      if (this._sasl_mechanism) {\n        this._sasl_mechanism.onFailure();\n      }\n\n      let conditionElement = elem.firstElementChild;\n      let condition = (conditionElement && conditionElement.nodeName) || null;\n      this._changeConnectStatus(Strophe.Status.AUTHFAIL, condition);\n      return false;\n    };\n\n    // Need to reapply these callbacks each time connect is called to handle auth\n    this._sasl_success_handler = this._addSysHandler(onAuthSuccessCallback, null, 'success', null, null);\n    this._sasl_failure_handler = this._addSysHandler(onAuthFailedCallback, null, 'failure', null, null);\n    this._sasl_challenge_handler = this._addSysHandler(this._sasl_challenge_cb.bind(this), null, \"challenge\", null, null);\n\n    super.connect(...args);\n  }\n\n  /**\n   * @override\n   * @method authenticate\n   */\n  authenticate() {\n    if (!this.supportsRestarts && this._needsRestartFeature()) {\n      ConfigActions.serverUnsupportedError('stream-restart-unsupported');\n      return;\n    }\n    return this.send(this._buildRequestAuthExchangeTree());\n  }\n\n  /**\n   * @override\n   * @method _sasl_auth1_cb\n   */\n  _sasl_auth1_cb() {\n    this.authenticated = true;\n    return this._changeConnectStatus(Strophe.Status.CONNECTED, null);\n  }\n\n  /**\n   * @override\n   * @method _connect_cb\n   */\n  _connect_cb(req, callback, raw) {\n    var body = this._proto._reqToData(req);\n    if (!body) {\n      return;\n    }\n\n    let updateRestartSupport = (elem) => {\n      this.supportsRestarts = this.supportsRestarts || (elem.getElementsByTagNameNS(\"http://hipchat.com\", \"authrestartlogic\").length > 0);\n    };\n\n    let inactivity = body.getAttribute('inactivity');\n    let wait = body.getAttribute('wait');\n    this.allowedInactivityInterval = parseInt(inactivity ? inactivity : wait, 10) * 1000;\n\n    updateRestartSupport(body);\n    this._addSysHandler(updateRestartSupport, null, 'stream:features', null, null);\n    return super._connect_cb(req, callback, raw);\n  }\n\n  /**\n   * @method needsRestartFeature\n   * @returns {boolean}\n   */\n  _needsRestartFeature() {\n    return ConfigStore.isOAuth();\n  }\n\n  /**\n   * Builds the correctly formatted auth exchange stanza\n   *\n   * @private\n   * @method _buildRequestAuthExchangeTree\n   * @returns {stanza}\n   */\n  _buildRequestAuthExchangeTree() {\n    let clientType,\n        clientSubType,\n        clientIdentifier,\n        exchange;\n\n    clientType = ConfigStore.get('client_type');\n\n    if (clientType === ClientType.WEB) {\n      clientSubType = utils.browser.family();\n    } else {\n      clientSubType = ConfigStore.get('client_subtype');\n    }\n\n    clientIdentifier = `${clientType}_${clientSubType}`;\n\n    switch (ConfigStore.get('auth_method')) {\n      case 'nonce':\n        exchange = $build('auth', {\n          xmlns: Strophe.NS.SASL,\n          mechanism: 'X-HIPCHAT-WEB',\n          nonce: ConfigStore.getNonceToken(),\n          oauth2_token: 'true',\n          node: ConfigStore.get('client_node'),\n          ver: ConfigStore.get('client_version_id')\n        });\n        exchange.t(ConfigStore.get('jid').split('@')[0]);\n        break;\n\n      case 'oauth2':\n        exchange = $build('auth', {\n          xmlns: 'http://hipchat.com',\n          mechanism: 'oauth2',\n          oauth2_token: 'false',\n          restart_stream: 'true',\n          node: ConfigStore.get('client_node'),\n          ver: ConfigStore.get('client_version_id')\n        });\n        exchange.t(Base64.encode(`\\u0000${ConfigStore.getOAuthToken()}\\u0000${clientIdentifier}`));\n        break;\n    }\n    return exchange.tree();\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/connection/connection_manager_connection.js\n **/","import spi from \"spi\";\n\n/**\n * Monkey-patches Strophe.Request\n *\n * Strophe.Request is called internally throughout Strophe.Connection for XHRs.\n * In order to modify that logic, we either have to rewrite all of Strophe.Connection's\n * methods that call it or overwrite Strophe.Request directly... which we're doing here\n * (sadplanet)\n */\nvar originalXHRFactory = Strophe.Request.prototype._newXHR;\n\nStrophe.Request.prototype._newXHR = function() {\n\n  var xhr = (originalXHRFactory.bind(this))(),\n      originalOnReadyStateChange = xhr.onreadystatechange;\n\n  /**\n   *\n   * This _customTimeout method allows us to notify the wrapper\n   * when the network appears to be up, but requests are timing out\n   *\n   */\n  xhr._customTimeout = xhr.ontimeout;\n  xhr.ontimeout = function () {\n    spi.onHostRequestTimeout();\n    if (xhr._customTimeout) {\n      xhr._customTimeout.apply(xhr, arguments);\n    }\n  };\n\n  xhr.send = (function () {\n    return function () {\n      try {\n        return XMLHttpRequest.prototype.send.apply(xhr, arguments);\n      } catch (err) {\n        return Strophe.warn(err.message);\n      }\n    };\n  })(this);\n\n  xhr.onreadystatechange = function() {\n    if (this.readyState === 1 && !this.withCredentials) {\n      this.withCredentials = true;\n    }\n    return originalOnReadyStateChange.apply(this, arguments);\n  };\n\n  return xhr;\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/connection/connection_manager_request.js\n **/","export default Object.freeze({\n  WEB: 'web',\n  QT: 'qt',\n  MAC: 'mac'\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/enum/client_type.js\n **/","import X2JS from 'x2js';\n\nexport default new X2JS({stripWhitespaces: false});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/common/x2js.js\n **/","!function(t,e){\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?module.exports=e():t.X2JS=e()}(this,function(){return function(t){\"use strict\";function e(){void 0===t.escapeMode&&(t.escapeMode=!0),t.attributePrefix=t.attributePrefix||\"\",t.arrayAccessForm=t.arrayAccessForm||\"none\",t.emptyNodeForm=t.emptyNodeForm||\"text\",void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!1)}function r(){function t(t){var e=String(t);return 1===e.length&&(e=\"0\"+e),e}\"function\"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\\s+|^\\n+|(\\s|\\n)+$/g,\"\")}),\"function\"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+\"-\"+t(this.getUTCMonth()+1)+\"-\"+t(this.getUTCDate())+\"T\"+t(this.getUTCHours())+\":\"+t(this.getUTCMinutes())+\":\"+t(this.getUTCSeconds())+\".\"+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+\"Z\"})}function n(t){var e=t.localName;return null==e&&(e=t.baseName),(null==e||\"\"==e)&&(e=t.nodeName),e}function i(t){return t.prefix}function o(t){return\"string\"==typeof t?t.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#x27;\"):t}function a(e,r,n){switch(t.arrayAccessForm){case\"property\":e[r]instanceof Array?e[r+\"_asArray\"]=e[r]:e[r+\"_asArray\"]=[e[r]]}if(!(e[r]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var i=0;i<t.arrayAccessFormPaths.length;i++){var o=t.arrayAccessFormPaths[i];if(\"string\"==typeof o){if(o==n)break}else if(o instanceof RegExp){if(o.test(n))break}else if(\"function\"==typeof o&&o(e,r,n))break}i!=t.arrayAccessFormPaths.length&&(e[r]=[e[r]])}}function s(t){var e=t.split(/[-T:+Z]/g),r=new Date(e[0],e[1]-1,e[2]),n=e[5].split(\".\");if(r.setHours(e[3],e[4],n[0]),n.length>1&&r.setMilliseconds(n[1]),e[6]&&e[7]){var i=60*e[6]+Number(e[7]),o=/\\d\\d-\\d\\d:\\d\\d$/.test(t)?\"-\":\"+\";i=0+(\"-\"==o?-1*i:i),r.setMinutes(r.getMinutes()-i-r.getTimezoneOffset())}else-1!==t.indexOf(\"Z\",t.length-1)&&(r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())));return r}function c(e,r,n){if(t.datetimeAccessFormPaths.length>0){for(var i=n.split(\".#\")[0],o=0;o<t.datetimeAccessFormPaths.length;o++){var a=t.datetimeAccessFormPaths[o];if(\"string\"==typeof a){if(a==i)break}else if(a instanceof RegExp){if(a.test(i))break}else if(\"function\"==typeof a&&a(obj,r,i))break}return o!=t.datetimeAccessFormPaths.length?s(e):e}return e}function l(e,r){if(e.nodeType==b.DOCUMENT_NODE){for(var o=new Object,s=e.childNodes,u=0;u<s.length;u++){var f=s.item(u);if(f.nodeType==b.ELEMENT_NODE){var _=n(f);o[_]=l(f,_)}}return o}if(e.nodeType==b.ELEMENT_NODE){var o=new Object,d=n(e);o.__cnt=0;var s=e.childNodes,p=Array.prototype.filter.call(s,function(t){return t.nodeType===b.TEXT_NODE}).length;if(p>1&&p===s.length){var h=document.createDocumentFragment(),g=document.createTextNode(e.textContent);h.appendChild(g),s=h.childNodes}Array.prototype.forEach.call(s,function(t){if(\"html\"===n(t)&&\"http://jabber.org/protocol/xhtml-im\"===t.namespaceURI)for(var e=0;e<t.childNodes.length;e++){var r=t.childNodes.item(e),i=n(r);\"body\"===i&&\"http://www.w3.org/1999/xhtml\"===r.namespaceURI&&(o.xhtml_im_body=r.innerHTML)}});for(var u=0;u<s.length;u++){var f=s.item(u),_=n(f);f.nodeType!=b.COMMENT_NODE&&(o.__cnt++,null==o[_]?(o[_]=l(f,r+\".\"+_),a(o,_,r+\".\"+_)):(null!=o[_]&&(o[_]instanceof Array||(o[_]=[o[_]],a(o,_,r+\".\"+_))),o[_][o[_].length]=l(f,r+\".\"+_)))}for(var m=0;m<e.attributes.length;m++){var x=e.attributes.item(m);o.__cnt++;var y=t.attributePrefix;\"http://jabber.org/protocol/httpbind\"===e.namespaceURI&&\"body\"===d&&(y=\"boshwrapper_\"),o[y+x.name]=x.value}var v=i(e);return null!=v&&\"\"!=v&&(o.__cnt++,o.__prefix=v),null!=o[\"#text\"]&&(o.__text=o[\"#text\"],o.__text instanceof Array&&(o.__text=o.__text.join(\"\\n\")),t.stripWhitespaces&&(o.__text=o.__text.trim()),delete o[\"#text\"],\"property\"==t.arrayAccessForm&&delete o[\"#text_asArray\"],o.__text=c(o.__text,_,r+\".\"+_)),null!=o[\"#cdata-section\"]&&(o.__cdata=o[\"#cdata-section\"],delete o[\"#cdata-section\"],\"property\"==t.arrayAccessForm&&delete o[\"#cdata-section_asArray\"]),1==o.__cnt&&null!=o.__text?o=o.__text:0==o.__cnt&&\"text\"==t.emptyNodeForm?o=\"\":o.__cnt>1&&null!=o.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&\"\"==o.__text||\"\"==o.__text.trim())&&delete o.__text,delete o.__cnt,!t.enableToStringFunc||null==o.__text&&null==o.__cdata||(o.toString=function(){return(null!=this.__text?this.__text:\"\")+(null!=this.__cdata?this.__cdata:\"\")}),o}return e.nodeType==b.TEXT_NODE||e.nodeType==b.CDATA_SECTION_NODE?e.nodeValue:void 0}function u(e,r,n,i){var a=\"<\"+(null!=e&&null!=e.__prefix?e.__prefix+\":\":\"\")+r;if(null!=n)for(var s=0;s<n.length;s++){var c=n[s],l=e[c];t.escapeMode&&(l=o(l)),a+=\" \"+c.substr(t.attributePrefix.length)+\"=\",a+=t.useDoubleQuotes?'\"'+l+'\"':\"'\"+l+\"'\"}return a+=i?\"/>\":\">\"}function f(t,e){return\"</\"+(null!=t.__prefix?t.__prefix+\":\":\"\")+e+\">\"}function _(t,e){return-1!==t.indexOf(e,t.length-e.length)}function d(e,r){return\"property\"==t.arrayAccessForm&&_(r.toString(),\"_asArray\")||0==r.toString().indexOf(t.attributePrefix)||0==r.toString().indexOf(\"__\")||e[r]instanceof Function?!0:!1}function p(t){var e=0;if(t instanceof Object)for(var r in t)d(t,r)||e++;return e}function h(e){var r=[];if(e instanceof Object)for(var n in e)-1==n.toString().indexOf(\"__\")&&0==n.toString().indexOf(t.attributePrefix)&&r.push(n);return r}function g(e){var r=\"\";return null!=e.__cdata&&(r+=\"<![CDATA[\"+e.__cdata+\"]]>\"),null!=e.__text&&(r+=t.escapeMode?o(e.__text):e.__text),r}function m(e){var r=\"\";return e instanceof Object?r+=g(e):null!=e&&(r+=t.escapeMode?o(e):e),r}function x(t,e,r){var n=\"\";if(0==t.length)n+=u(t,e,r,!0);else for(var i=0;i<t.length;i++)n+=u(t[i],e,h(t[i]),!1),n+=y(t[i]),n+=f(t[i],e);return n}function y(t){var e=\"\",r=p(t);if(r>0)for(var n in t)if(!d(t,n)){var i=t[n],o=h(i);if(null==i||void 0==i)e+=u(i,n,o,!0);else if(i instanceof Object)if(i instanceof Array)e+=x(i,n,o);else if(i instanceof Date)e+=u(i,n,o,!1),e+=i.toISOString(),e+=f(i,n);else{var a=p(i);a>0||null!=i.__text||null!=i.__cdata?(e+=u(i,n,o,!1),e+=y(i),e+=f(i,n)):e+=u(i,n,o,!0)}else e+=u(i,n,o,!1),e+=m(i),e+=f(i,n)}return e+=m(t)}var v=\"1.1.8\";t=t||{},e(),r();var b={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(t){var e=window.ActiveXObject||\"ActiveXObject\"in window;if(void 0===t)return null;var r;if(window.DOMParser){var n=new window.DOMParser,i=null;if(!e)try{i=n.parseFromString(\"INVALID\",\"text/xml\").childNodes[0].namespaceURI}catch(o){i=null}try{r=n.parseFromString(t,\"text/xml\"),null!=i&&r.getElementsByTagNameNS(i,\"parsererror\").length>0&&(r=null)}catch(o){r=null}}else 0==t.indexOf(\"<?\")&&(t=t.substr(t.indexOf(\"?>\")+2)),r=new ActiveXObject(\"Microsoft.XMLDOM\"),r.async=\"false\",r.loadXML(t);return r},this.asArray=function(t){return void 0===t||null==t?[]:t instanceof Array?t:[t]},this.toXmlDateTime=function(t){return t instanceof Date?t.toISOString():\"number\"==typeof t?new Date(t).toISOString():null},this.asDateTime=function(t){return\"string\"==typeof t?s(t):t},this.xml2json=function(t){return l(t)},this.xml_str2json=function(t){var e=this.parseXmlString(t);return null!=e?this.xml2json(e):null},this.json2xml_str=function(t){return y(t)},this.json2xml=function(t){var e=this.json2xml_str(t);return this.parseXmlString(e)},this.getVersion=function(){return v}}});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/x2js/xml2json.min.js\n ** module id = 203\n ** module chunks = 0\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\n/**\n * ConnectionActions\n */\nexport default {\n\n  stropheConnected() {\n    AppDispatcher.dispatch('strophe-connected');\n  },\n\n  stropheReconnected() {\n    AppDispatcher.dispatch('strophe-reconnected');\n  },\n\n  stropheReconnecting(params) {\n    AppDispatcher.dispatch('strophe-reconnecting', params);\n  },\n\n  stropheReconnectDelay(params) {\n    AppDispatcher.dispatch('strophe-reconnect-delay', params);\n  },\n\n  stropheAuthenticating() {\n    AppDispatcher.dispatch('strophe-authenticating');\n  },\n\n  stropheDisconnected() {\n    AppDispatcher.dispatch('strophe-disconnected');\n  },\n\n  stropheDisconnecting() {\n    AppDispatcher.dispatch('strophe-disconnecting');\n  },\n\n  stropheAuthFailed(status, condition) {\n    AppDispatcher.dispatch('strophe-auth-failed', status, condition);\n  },\n\n  stropheConnectionFailed(status, condition) {\n    AppDispatcher.dispatch('strophe-connection-failed', status, condition);\n  },\n\n  strophePolicyViolation(status, condition){\n    AppDispatcher.dispatch('strophe-policy-violation', status, condition);\n  },\n\n  reconnect() {\n    AppDispatcher.dispatch('attempt-reconnect');\n  },\n\n  reconnectionError(error) {\n    AppDispatcher.dispatch('reconnection-error', error);\n  },\n\n  disconnect(should_reconnect = false) {\n    AppDispatcher.dispatch('attempt-disconnect', should_reconnect);\n  },\n\n  handleReconnectLinkClick() {\n    AppDispatcher.dispatch('attempt-reconnect-without-reset');\n  },\n\n  appStateConnected() {\n    AppDispatcher.dispatch('app-state-connected');\n  },\n\n  appStateReconnected() {\n    AppDispatcher.dispatch('app-state-reconnected');\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/connection_actions.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport Timer from 'core/common/timer';\nimport Logger from 'helpers/logger';\nimport * as Constants from 'core/common/constants';\nimport ConfigStore from 'stores/configuration_store';\n\nconst PING_RESPONSE_TIMEOUT = Constants.XMPP_INACTIVITY_INTERVAL + Constants.XMPP_PONG_WAIT + Constants.NETWORK_LATENCY_GRACE_PERIOD;\nconst GRACEFUL_INACTIVITY_PERIOD = Constants.XMPP_INACTIVITY_INTERVAL + Constants.NETWORK_LATENCY_GRACE_PERIOD;\n\n/**\n * Strophe Connection Plugin for handling pings\n *\n * @class PingPlugin\n * @property {Timer} xmppPingTimer\n * @property {Strophe.Connection} Connection\n */\nexport default class PingPlugin extends AbstractPlugin {\n\n  /**\n   * @override\n   */\n  init(...args) {\n    super.init(...args);\n\n    Strophe.addNamespace('PING', 'urn:xmpp:ping');\n\n    this.pingTimer = new Timer(this.ping.bind(this), GRACEFUL_INACTIVITY_PERIOD);\n  }\n\n  /**\n   * If the server returns an XMPP body that is not empty, restart\n   * the timer. If the timer runs out, and there hasn't been an XMPP\n   * response that contains childNodes, send a ping to keep the BOSH\n   * session alive\n   *\n   * @override\n   */\n  onConnected() {\n    this.Connection.ConnectionHooks.addXmlInputHandler((xmpp) => {\n      if (xmpp.hasChildNodes()) {\n        this.pingTimer.restart();\n      }\n      return true;\n    });\n  }\n\n  /**\n   * If we lose connection, clear the ping timer\n   *\n   * @override\n   */\n  onDisconnected() {\n    this.pingTimer.clear();\n  }\n\n  /**\n   * @private\n   * @method _doPing\n   */\n  ping() {\n    let type = 'get',\n      to = ConfigStore.get('chat_server'),\n      stanza = $iq({type, to}).c('ping', {xmlns: Strophe.NS.PING}).tree();\n\n    this.Connection.sendIQ(stanza, null, this._onPingError.bind(this), PING_RESPONSE_TIMEOUT);\n    Logger.debug('[PING]', 'Sending ping to keep XMPP session alive');\n  }\n\n  /**\n   * If this IQ times out, the stanza passed in from Strophe will be null\n   * @private\n   */\n  _onPingError(stanza) {\n    if (!stanza) {\n      Logger.debug('[PING]', 'Ping request timed out. Disconnecting Strophe');\n      this.Connection.disconnect();\n    }\n  }\n\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/ping_plugin.js\n **/","import NetworkStatusHelper from 'helpers/network_status_helper';\nimport DALError from 'core/models/dal-error';\nimport { XMPP_SEND_IQ_TIMEOUT } from 'core/common/constants';\n\n/**\n * @class AbstractPlugin\n * @property {Strophe.Connection} Connection\n */\nexport default class AbstractPlugin {\n\n  constructor() {\n    this.Connection = null;\n  }\n\n  /**\n   * @method init\n   * @param {Strophe.Connection} connection\n   */\n  init(connection) {\n    this.Connection = connection;\n    this.connected = false;\n  }\n\n  /**\n   * @method onStatusChanged\n   * @param {Strophe.Status} status\n   * @param {string} [reason]\n   */\n  statusChanged(status, reason) {\n    switch (status) {\n      case Strophe.Status.CONNECTED:\n        this.connected = true;\n        this.onConnected();\n        break;\n\n      case Strophe.Status.AUTHENTICATING:\n        this.onAuthenticating();\n        break;\n\n      case Strophe.Status.CONNECTING:\n        this.onConnecting();\n        break;\n\n      case Strophe.Status.DISCONNECTING:\n        this.onDisconnecting();\n        break;\n\n      case Strophe.Status.AUTHFAIL:\n        this.onAuthFailure();\n        break;\n\n      case Strophe.Status.CONNFAIL:\n        this.onConnectionFailure();\n        break;\n\n      case Strophe.Status.DISCONNECTED:\n        this.connected = false;\n        this.onDisconnected(reason);\n        break;\n    }\n  }\n\n  /**\n   * @method onConnected\n   */\n  onConnected() {}\n\n  /**\n   * @method onAuthenticating\n   */\n  onAuthenticating() {}\n\n  /**\n   * @method onConnecting\n   */\n  onConnecting() {}\n\n  /**\n   * @method onDisconnecting\n   */\n  onDisconnecting() {}\n\n  /**\n   * @method onDisconnected\n   * @param {string} [reason]\n   */\n  onDisconnected(reason) {}\n\n  /**\n   * @method onAuthFailure\n   */\n  onAuthFailure() {}\n\n  /**\n   * @method onConnectionFailure\n   */\n  onConnectionFailure() {}\n\n  isConnected() {\n    return this.connected;\n  }\n\n  /**\n   * Wrapper for Connection.sendIQ.\n   *\n   * @method sendIQWithOfflineGuard\n   * @param {object} stanza\n   * @param {function} onSuccess\n   * @param {function} onError\n   *\n   * @returns {Promise<success, error>}\n   */\n  sendIQWithOfflineGuard(stanza, onSuccess = _.noop, onError = _.noop) {\n\n    return new Promise((resolve, reject) => {\n      if (!NetworkStatusHelper.isOnline() || !this.isConnected()) {\n        return reject(DALError.ofType(DALError.Types.OFFLINE));\n      }\n\n      let success = (xmpp) => {\n        onSuccess(xmpp);\n        resolve();\n      };\n      let error = (xmppErr) => {\n        onError(xmppErr);\n        if (!xmppErr) {\n          //On xmpp reqest timeout, the stanza will be null.\n          return reject(DALError.ofType(DALError.Types.TIMEOUT));\n        }\n        return reject(DALError.fromXMPP(xmppErr));\n      };\n\n      this.Connection.sendIQ(stanza.tree(), success, error, XMPP_SEND_IQ_TIMEOUT);\n    });\n  }\n\n  /**\n   * test is it online returns resolved or rejected Promise.\n   *\n   * @method checkIfOnline\n   *\n   * @returns {Promise}\n   */\n  checkIfOnline() {\n\n    return new Promise((resolve, reject) => {\n      if (!NetworkStatusHelper.isOnline() || !this.isConnected()) {\n        reject(DALError.ofType(DALError.Types.OFFLINE));\n      } else {\n        resolve();\n      }\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/abstract_plugin.js\n **/","import Logger from 'helpers/logger';\nimport ConfigStore from 'stores/configuration_store';\nimport NetworkStatusActions from 'actions/network_status_actions';\nimport REST from 'core/rest/rest';\n\nclass NetworkStatusHelper {\n\n  constructor() {\n    this._state = false;\n    this._shouldCheckNetwork = true;\n    this._currentConfirmNetworkUpPromise = null;\n  }\n\n  initialize({ doHealthCheck = true } = {}) {\n    this._state = true;\n    this._shouldCheckNetwork = !!doHealthCheck;\n\n    if (ConfigStore.get('client_type') === 'web') {\n      $(window).on('online', this.onNetworkUp.bind(this));\n      $(window).on('offline', this.onNetworkDown.bind(this));\n    }\n  }\n\n  /**\n   * called by the external API or the browser when online status detected\n   */\n  onNetworkUp() {\n    this._currentConfirmNetworkUpPromise = null;\n\n    if (this._state === true) {\n      return;\n    }\n\n    Logger.debug('[NetworkStatusHelper]', 'network up event received, signaling UI');\n    this._state = true;\n    NetworkStatusActions.networkUp();\n  }\n\n  /**\n   * called by the external API or the browser when offline status detected\n   */\n  onNetworkDown() {\n    this._currentConfirmNetworkUpPromise = null;\n\n    if (this._state === false) {\n      return Promise.resolve();\n    }\n\n    Logger.debug('[NetworkStatusHelper]', 'network down event received, performing health check to confirm');\n\n    if (!this._shouldCheckNetwork) {\n      Logger.debug('[NetworkStatusHelper]', 'health check disabled, signaling offline to UI');\n      this._state = false;\n      NetworkStatusActions.networkDown();\n      return;\n    }\n\n    var confirmNetworkUpPromise = this._confirmNetworkUp().then(() => {\n      Logger.error('[NetworkStatusHelper]', 'network down event received, health check indicates we are still online, leaving UI as is');\n    }).catch(() => {\n      Logger.debug('[NetworkStatusHelper]', 'network down event received, health check confirmed');\n      if (this._currentConfirmNetworkUpPromise === confirmNetworkUpPromise) {\n        Logger.debug('[NetworkStatusHelper]', 'health check still current, signaling offline to UI');\n        this._state = false;\n        NetworkStatusActions.networkDown();\n      } else {\n        Logger.debug('[NetworkStatusHelper]', 'health check was cancelled, no UI changes');\n      }\n    });\n\n    this._currentConfirmNetworkUpPromise = confirmNetworkUpPromise;\n    return confirmNetworkUpPromise;\n  }\n\n  _confirmNetworkUp() {\n    return REST.checkNetwork();\n  }\n\n  /**\n   * Check our network connectivity\n   *\n   * @method isOnline\n   * @returns {boolean}\n   */\n  isOnline() {\n    return this._state;\n  }\n\n}\n\nexport default new NetworkStatusHelper();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/network_status_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\n\n/**\n * NetworkStatusActions\n */\nexport default {\n\n  onNetworkDown() {\n    NetworkStatusHelper.onNetworkDown();\n  },\n\n  onNetworkUp() {\n    NetworkStatusHelper.onNetworkUp();\n  },\n\n  networkDown() {\n    AppDispatcher.dispatch('network-down');\n  },\n\n  networkUp() {\n    AppDispatcher.dispatch('network-up');\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/network_status_actions.js\n **/","import ConfigStore from 'stores/configuration_store';\nimport Room from 'core/models/room';\nimport User from 'core/models/user';\nimport DALError from 'core/models/dal-error';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\nimport { SYNC_REQUEST_GZIP_SIZE } from 'core/common/constants';\nimport { gzip } from 'pako/lib/deflate';\nimport logger from 'helpers/logger';\n\n/**\n * @module REST\n */\nexport default {\n\n  /**\n   * POST: https://{api_host}/v2/room\n   *\n   * @method createRoom\n   * @param name\n   * @param topic\n   * @param privacy\n   * @returns {Promise<Object, DALError>} - Object with room's \"id\" property\n   */\n  createRoom(name, topic, privacy) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest();\n      let url = `https://${ ConfigStore.get('api_host') }/v2/room`;\n\n      let success = () => {\n        let data = JSON.parse(request.responseText);\n        data = data.entity ? data.entity : data;\n        resolve(data);\n      };\n      let error = () => reject(DALError.fromJqXHR(request));\n\n      // Status handler\n      request.onreadystatechange = () => {\n        if(request.readyState === 4) {\n          let status = request.status;\n          let isSuccess = status >= 200 && status < 300 || status === 304;\n          if(isSuccess) {\n            success();\n          } else {\n            error();\n          }\n        }\n      };\n\n      // Making request\n      request.open('POST', url, true);\n      request.setRequestHeader('Content-Type', 'application/json');\n      request.setRequestHeader('Authorization', `Bearer ${ ConfigStore.get('oauth_token') }`);\n      request.send(JSON.stringify({ name, topic, privacy }));\n    });\n  },\n\n  /**\n   * DELETE: https://{api_host}/v2/room/{id}\n   * @param id\n   * @returns {Promise<undefined,DALError>} - ajax returns 204 so no content in resolve\n   */\n  deleteRoom(id) {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: `https://${ ConfigStore.get('api_host') }/v2/room/${ id }`,\n        type: 'DELETE',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        success: () => resolve(),\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  },\n\n  /**\n   * GET: https://{api_host}/v2/room/{id}\n   *\n   * @method fetchRoom\n   * @param id\n   * @returns {Promise<Room, DALError>}\n   */\n  fetchRoom(id) {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: `https://${ ConfigStore.get('api_host') }/v2/room/${ id }`,\n        type: 'GET',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        success: (data) => resolve(Room.fromREST(data)),\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  },\n\n  /**\n   * PUT: https://{api_host}/v2/room/{id}/avatar\n   *\n   * @method uploadRoomAvatar\n   * @param id\n   * @param avatar - Base64 encoded image string without data URI/MimeType (Ex: \"data:image/png;base64,\")\n   * @returns {Promise<Object, DALError>} - Object with room's \"id\" property\n   */\n  uploadRoomAvatar(id, avatar) {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: `https://${ ConfigStore.get('api_host') }/v2/room/${ id }/avatar`,\n        type: 'PUT',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        data: JSON.stringify({avatar}),\n        success: (data) => resolve({room_id: id}),\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  },\n\n  /**\n   * DELETE: https://{api_host}/v2/oauth/token/{token}\n   *\n   * @method revokeOAuthToken\n   */\n  revokeOAuthToken() {\n  },\n\n  /**\n   * POST: https://{api_host}/v2/sync/users\n   *\n   * @method syncRoster\n   * @params {Roster} cached - the cached roster\n   * @returns {Promise<Array<User>, DALError>}\n   */\n  syncRoster(cached = {}) {\n    return new Promise((resolve, reject) => {\n      let fields = [\n        'xmpp_jid',\n        'name',\n        'mention_name',\n        'email',\n        'title',\n        'photo_url',\n        // 'timezone', // this isn't actually useful\n        'version',\n        'is_guest'\n      ].join(',');\n\n      let knownUsers = _.transform(cached, (result, user, id) => {\n        result[id] = user.version;\n        return result;\n      });\n\n      let params = {\n        url: `https://${ ConfigStore.get('api_host') }/v2/sync/users?auth_token=${ ConfigStore.getOAuthToken() }&expand=changedUsers&fields=${ fields }`,\n        type: 'POST',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Requested-With': 'XMLHttpRequest'\n        },\n        data: JSON.stringify({ requireFullList: true, knownUsers }),\n        success: (response) => {\n          resolve(response.changedUsers.map(user => User.fromREST(user)));\n        },\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      };\n\n      if (params.data.length >= SYNC_REQUEST_GZIP_SIZE) {\n        params.headers['Content-Encoding'] = 'gzip';\n        params.data = gzip(params.data);\n        params.processData = false;\n      }\n\n      $.ajax(params);\n    });\n  },\n\n  /**\n   * POST: https://{api_host}/v2/sync/rooms\n   *\n   * @method syncRooms\n   * @params {RoomsList} cached - the cached rooms list\n   * @returns {Promise<Array<Room>, DALError>}\n   */\n  syncRooms(cached = {}) {\n    return new Promise((resolve, reject) => {\n      let fields = [\n        'xmpp_jid',\n        'name',\n        'privacy',\n        'is_guest_accessible',\n        'guest_access_url',\n        'avatar_url',\n        'is_archived',\n        'topic',\n        'version',\n        'owner'\n      ].join(',');\n\n      let knownRooms = _.transform(cached, (result, room, id) => {\n        // HW-1298 fix problem with cache on some old versions of HipChat server\n        if (room.name){\n          result[id] = room.version;\n        }\n        return result;\n      });\n\n      let params = {\n        url: `https://${ ConfigStore.get('api_host') }/v2/sync/rooms?auth_token=${ ConfigStore.getOAuthToken() }&expand=changedRooms&fields=${ fields }`,\n        type: 'POST',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'X-Requested-With': 'XMLHttpRequest'\n        },\n        data: JSON.stringify({ requireFullList: true, knownRooms }),\n        success: (response) => {\n          resolve(response.changedRooms.map(room => Room.fromREST(room)));\n        },\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      };\n\n      if (params.data.length >= SYNC_REQUEST_GZIP_SIZE) {\n        params.headers['Content-Encoding'] = 'gzip';\n        params.data = gzip(params.data);\n        params.processData = false;\n      }\n\n      $.ajax(params);\n    });\n  },\n\n  /**\n   * Update a room details\n   * PUT: https://{api_host}/room/{room_id}\n   *\n   * @method updateRoomDetails\n   */\n  updateRoomDetails() {\n  },\n\n  /**\n   * Fetch a list of participants in a room\n   * GET: https://{api_host}/v2/room/{room_id}/participant\n   *\n   * @method fetchRoomParticipants\n   */\n  fetchRoomParticipants(roomId, includeOffline = true) {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: `https://${ ConfigStore.get('api_host') }/v2/room/${ roomId }/participant`,\n        type: 'GET',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        data: {\n          'include-offline': includeOffline,\n          'expand': 'items',\n          'max-results': AppConfig.room_participant_page_limit,\n          'fields': 'is_guest,is_group_admin,xmpp_jid,group,name,mention_name,is_present_in_room'\n        },\n        success: (data) => resolve({roomId, participants: data.items}),\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  },\n\n  /**\n   * Fetch recent history for a room or chat\n   * GET: https://{api_host}/user/{user_id}/history/latest\n   * GET: https://{api_host}/room/{room_id}/history/latest\n   *\n   * @method fetchRecentHistory\n   */\n  fetchRecentHistory() {\n  },\n\n  /**\n   * Upload a file to a room or chat\n   * POST: https://{api_host}/room/{room_id}/share/file\n   * POST: https://{api_host}/user/{user_id}/share/file\n   *\n   * @method sendFileMessage\n   */\n  sendFileMessage() {\n  },\n\n  /**\n   * Send a private message to a user\n   * POST: https://{api_host}/user/{user_id}/message\n   *\n   * @method sendPrivateMessage\n   */\n  sendPrivateMessage() {\n  },\n\n  /**\n   * POST: https://{api_host}/addon/sync\n   *\n   * @method syncIntegrations\n   */\n  syncIntegrations() {\n  },\n\n  /**\n   * GET: https://{api_host}/addon/signed-url/{room_id}/{addon_key}/{mod_type}/{key}/{addon_timestamp}\n   *\n   * @method getSignedUrl\n   */\n  getSignedUrl() {\n  },\n\n  /**\n   * Calls getSignedUrl, then makes a GET request to it\n   *\n   * @method requestWithSignedUrl\n   */\n  requestWithSignedUrl() {\n  },\n\n  /**\n   * Fetch the signed url for a secure file\n   * GET: https://{api_host}/v2/file/{file_id}\n   *\n   * @method fetchSignedFile\n   */\n  fetchSignedFile(url) {\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: url,\n        type: 'GET',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        success: (data) => resolve(data),\n        error: (jqXHR) => {\n          const error = DALError.fromJqXHR(jqXHR);\n          logger.error('[Secure files] Error while getting signed url', error);\n          reject(DALError.fromJqXHR(jqXHR));\n        }\n      });\n    });\n  },\n\n  /**\n   * Fetch signed thumbnails for secure files\n   * GET: https://{api_host}/v2/file/mget/thumbnails\n   *\n   * @param {Array} fileObjects\n   * @method fetchSignedThumbnails\n   */\n  fetchSignedThumbnailCollection(fileObjects) {\n    let url = `https://${ ConfigStore.get('api_host') }/v2/file/mget/thumbnails`;\n    let ids = _.keys(fileObjects);\n\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url,\n        method: 'POST',\n        dataType: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        data: JSON.stringify({ ids }),\n        success: ({ files }) => {\n          _.forIn(files, (value, key) => {\n            if(!value) {\n              logger.error(`[Secure files] Error while getting signed thumbnail for file with id ${key}`);\n              fileObjects[key].errCb({ status: 400 });\n            } else {\n              fileObjects[key].cb(value);\n            }\n          });\n\n          resolve(files);\n        },\n        error: (jqXHR) => {\n          const error = DALError.fromJqXHR(jqXHR);\n\n          logger.error('[Secure files] Error while getting signed thumbnails', error);\n          _.forIn(fileObjects, (value) => {\n            value.errCb(error);\n          });\n          reject(error);\n        }\n      });\n    });\n  },\n\n  /**\n   * GET: https://{api_host}/v2/video/token\n   *\n   * @returns {Promise}\n   */\n  fetchVideoToken(recipient_id = null, room_id = null) {\n    let url = `https://${ ConfigStore.get('api_host') }/v2/video${recipient_id ? '/callee/' + recipient_id : ''}/token`;\n    if (room_id) {\n      url += `?room=${room_id}`;\n    }\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url,\n        method: 'GET',\n        type: 'json',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${ ConfigStore.get('oauth_token') }`\n        },\n        success: (data, text, jqXHR) => {\n          try {\n            let parsed_response = JSON.parse(data);\n            resolve(parsed_response);\n          } catch (e) {\n            reject(DALError.fromJqXHR(jqXHR));\n          }\n        },\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  },\n\n  /**\n   * Ensure that we have a network connection, hits features endpoint for btf, health-check for cloud\n   * HEAD: https://{api_host}/v2/health-check\n   */\n  checkNetwork() {\n    let url = _.get(ConfigStore.get('feature_flags'), 'btf', false) ? utils.url.featureFlagsAPI(ConfigStore.get('base_url')) : utils.url.networkCheckAPI(ConfigStore.get('api_host'));\n    return new Promise((resolve, reject) => {\n      $.ajax({\n        url: url,\n        type: 'HEAD',\n        timeout: 10000,\n        success: () => resolve(),\n        error: (jqXHR) => reject(DALError.fromJqXHR(jqXHR))\n      });\n    });\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/rest.js\n **/","'use strict';\n\n\nvar zlib_deflate = require('./zlib/deflate.js');\nvar utils = require('./utils/common');\nvar strings = require('./utils/strings');\nvar msg = require('./zlib/messages');\nvar zstream = require('./zlib/zstream');\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overriden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nvar Deflate = function(options) {\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new zstream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n};\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` meansh Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function(data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): ouput data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function(chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function(status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate alrorythm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/deflate.js\n ** module id = 210\n ** module chunks = 0\n **/","'use strict';\n\nvar utils   = require('../utils/common');\nvar trees   = require('./trees');\nvar adler32 = require('./adler32');\nvar crc32   = require('./crc32');\nvar msg   = require('./messages');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2*L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only (s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH-1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH-1)) ? s.strstart : MIN_MATCH-1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH-1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size-MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH-1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1- s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length-1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH-1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart-1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart-1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH-1 ? s.strstart : MIN_MATCH-1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nvar Config = function (good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n};\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2*D_CODES+1) * 2);\n  this.bl_tree    = new utils.Buf16((2*BL_CODES+1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS+1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2*L_CODES+1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2*L_CODES+1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  s.d_buf = s.lit_bufsize >> 1;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n                );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n/* =========================================================================\n * Copy the source state to the destination state\n */\n//function deflateCopy(dest, source) {\n//\n//}\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/deflate.js\n ** module id = 211\n ** module chunks = 0\n **/","'use strict';\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (source.hasOwnProperty(p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs+len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i=0; i<len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function(chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i=0, l=chunks.length; i<l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i=0, l=chunks.length; i<l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i=0; i<len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function(chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/utils/common.js\n ** module id = 212\n ** module chunks = 0\n **/","'use strict';\n\n\nvar utils = require('../utils/common');\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2*L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array insdead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES+2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH-MIN_MATCH+1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nvar StaticTreeDesc = function (static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n};\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nvar TreeDesc = function(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n};\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short (s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c*2]/*.Code*/, tree[c*2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max]*2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max+1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n*2 +1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n*2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n-base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n*2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length-1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits+1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m*2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m*2 + 1]/*.Len*/)*tree[m*2]/*.Freq*/;\n        tree[m*2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS+1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits-1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n*2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n*2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS+1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES-1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1<<extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length-1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0 ; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1<<extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1<<(extra_dbits[code]-7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n*2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n*2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n*2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n*2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES+1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n*2 + 1]/*.Len*/ = 5;\n    static_dtree[n*2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS+1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc =new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n*2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n*2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n*2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK*2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n*2;\n  var _m2 = m*2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j+1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx*2] << 8) | (s.pending_buf[s.d_buf + lx*2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code+LITERALS+1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n*2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node*2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n*2 + 1]/*.Dad*/ = tree[m*2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0*2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code+1)*2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n+1)*2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6*2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10*2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138*2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0*2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n+1)*2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count-3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count-3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count-11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES-1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex]*2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3*(max_blindex+1) + 5+5+4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes-257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes-1,   5);\n  send_bits(s, blcodes-4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank]*2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes-1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes-1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n*2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK<<1)+(last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES<<1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len+3+7) >>> 3;\n    static_lenb = (s.static_len+3+7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len+4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES<<1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES<<1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code+1, s.d_desc.max_code+1, max_blindex+1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc*2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc]+LITERALS+1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defailts,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize-1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/trees.js\n ** module id = 213\n ** module chunks = 0\n **/","'use strict';\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It doesn't worth to make additional optimizationa as in original.\n// Small size is preferable.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/adler32.js\n ** module id = 214\n ** module chunks = 0\n **/","'use strict';\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n =0; n < 256; n++) {\n    c = n;\n    for (var k =0; k < 8; k++) {\n      c = ((c&1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc = crc ^ (-1);\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/crc32.js\n ** module id = 215\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = {\n  '2':    'need dictionary',     /* Z_NEED_DICT       2  */\n  '1':    'stream end',          /* Z_STREAM_END      1  */\n  '0':    '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/messages.js\n ** module id = 216\n ** module chunks = 0\n **/","// String encode/decode helpers\n'use strict';\n\n\nvar utils = require('./common');\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safary\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [0]); } catch(__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch(__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q=0; q<256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254]=_utf8len[254]=1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {\n      c2 = str.charCodeAt(m_pos+1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i=0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos+1 < str_len)) {\n      c2 = str.charCodeAt(m_pos+1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // use fallback for big arrays to avoid stack overflow\n  if (len < 65537) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i=0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function(buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function(str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i=0, len=buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len*2);\n\n  for (out=0, i=0; i<len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len-1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function(buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max-1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Fuckup - very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means vuffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/utils/strings.js\n ** module id = 217\n ** module chunks = 0\n **/","'use strict';\n\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/pako/lib/zlib/zstream.js\n ** module id = 218\n ** module chunks = 0\n **/","import AbstractPlugin from './abstract_plugin';\n\n/**\n * Strophe Connection Plugin that uses the xmlInput, xmlOutput,\n * rawInput, and rawOutput methods in Strophe.Connection and\n * turns them into hooks that all Connection plugins can hook into.\n *\n * This follows the existing Strophe convention in that you'll now call\n * addXmlInputHandler, passing in a function. If the function returns\n * true, it will be persistent. If not, it will be cleaned up on first\n * iteration.\n *\n * NOTE: This plugin must be installed before any others to ensure\n * no conflicts\n *\n * @class HooksPlugin\n */\nexport default class ConnectionHooksPlugin extends AbstractPlugin {\n\n  constructor() {\n    super();\n    this.handlers = {};\n    this.added = {};\n    this.removed = {};\n    this.reset();\n  }\n\n  statusChanged(status, condition) {\n    switch (status) {\n      case Strophe.Status.CONNECTED:\n        this.xmppConnected(status, condition);\n        break;\n\n      case Strophe.Status.CONNFAIL:\n      case Strophe.Status.AUTHFAIL:\n      case Strophe.Status.ERROR:\n      case Strophe.Status.DISCONNECTED:\n        this.xmppDisconnected(status, condition);\n        break;\n    }\n    super.statusChanged(status, condition);\n  }\n\n  init(...args) {\n    super.init(...args);\n    this.Connection.xmlInput = this._createHooksHandler('xmlInput');\n    this.Connection.xmlOutput = this._createHooksHandler('xmlOutput');\n    this.Connection.rawInput = this._createHooksHandler('rawInput');\n    this.Connection.rawOutput = this._createHooksHandler('rawOutput');\n    this.xmppConnected = this._createHooksHandler('xmppConnected');\n    this.xmppDisconnected = this._createHooksHandler('xmppDisconnected');\n\n    /**\n     * Add a handler that will be fired when the xmlInput method is called on the connection\n     * (each time a new request body is received). The handler function will be called, and\n     * passed in the XML response body. If the handler returns true, it will be persistent, and called\n     * for every request until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addXmlInputHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addXmlInputHandler = this._createAddHandler('xmlInput');\n\n    /**\n     * Add a handler that will be fired when the xmlOutput method is called on the connection\n     * (each time a new request body is sent). The handler function will be called, and\n     * passed in the XML request body. If the handler returns true, it will be persistent, and called\n     * for every request until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addXmlOutputHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addXmlOutputHandler = this._createAddHandler('xmlOutput');\n\n    /**\n     * Add a handler that will be fired when the rawInput method is called on the connection\n     * (each time a new request body is received). The handler function will be called, and\n     * passed in the plain text response body. If the handler returns true, it will be persistent,\n     * and called for every request until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addRawInputHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addRawInputHandler = this._createAddHandler('rawInput');\n\n    /**\n     * Add a handler that will be fired when the rawOutput method is called on the connection\n     * (each time a new request body is sent). The handler function will be called, and\n     * passed in the plain text request body. If the handler returns true, it will be persistent, and called\n     * for every request until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addRawOutputHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addRawOutputHandler = this._createAddHandler('rawOutput');\n\n    /**\n     * Remove an xmlInput handler that was added with the addXmlInputHandler method. Pass it the\n     * handler function as was returned by addXmlInputHandler.\n     *\n     * @method deleteXmlInputHandler\n     * @param {Function} handler\n     */\n    this.deleteXmlInputHandler = this._createDeleteHandler('xmlInput');\n\n    /**\n     * Remove an xmlOutput handler that was added with the addXmlOutputHandler method. Pass it the\n     * handler function as was returned by addXmlOutputHandler.\n     *\n     * @method deleteXmlOutputHandler\n     * @param {Function} handler\n     */\n    this.deleteXmlOutputHandler = this._createDeleteHandler('xmlOutput');\n\n    /**\n     * Remove an rawInput handler that was added with the addRawInputHandler method. Pass it the\n     * handler function as was returned by addRawInputHandler.\n     *\n     * @method deleteRawInputHandler\n     * @param {Function} handler\n     */\n    this.deleteRawInputHandler = this._createDeleteHandler('rawInput');\n\n    /**\n     * Remove an rawOutput handler that was added with the addRawOutputHandler method. Pass it the\n     * handler function as was returned by addRawOutputHandler.\n     *\n     * @method deleteRawOutputHandler\n     * @param {Function} handler\n     */\n    this.deleteRawOutputHandler = this._createDeleteHandler('rawOutput');\n\n    /**\n     * Add a handler that will be fired when strophe successfully connects.\n     * If the handler returns true, it will be persistent, and called on every reconnection\n     * until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addXmppConnectedHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addXmppConnectedHandler = this._createAddHandler('xmppConnected');\n\n    /**\n     * Remove an xmppConnected handler that was added with the addXmppConnectedHandler method.\n     * Pass it the handler function as was returned by addXmppConnectedHandler.\n     *\n     * @method deleteXmppConnectedHandler\n     * @param {Function} handler\n     */\n    this.deleteXmppConnectedHandler = this._createDeleteHandler('xmppConnected');\n\n    /**\n     * Add a handler that will be fired when strophe disconnects for any reason.\n     * The handler will be passed the Strophe.Status enum and condition string if provided.\n     * If the handler returns true, it will be persistent, and called on every disconnect\n     * until it is removed. If it returns a falsy value, it will only fire once\n     *\n     * @method addXmppDisconnectedHandler\n     * @param {Function} handler\n     * @returns {Function} handler\n     */\n    this.addXmppDisconnectedHandler = this._createAddHandler('xmppDisconnected');\n\n    /**\n     * Remove an xmppDisconnected handler that was added with the addXmppDisconnectedHandler method.\n     * Pass it the handler function as was returned by addXmppDisconnectedHandler.\n     *\n     * @method deleteXmppDisconnectedHandler\n     * @param {Function} handler\n     */\n    this.deleteXmppDisconnectedHandler = this._createDeleteHandler('xmppDisconnected');\n  }\n\n  /**\n   * When the connection is lost, remove all the xml/raw input/output handlers\n   */\n  onDisconnected() {\n    this.reset();\n  }\n\n  /**\n   * Reset the handlers to the default empty state. Called on init and on disconnection.\n   * Don't actually clear the connection handlers on disconnection, as they should remain\n   * persistent across reconnection events. Only clear out the xml/raw input/output handlers\n   */\n  reset() {\n    this.handlers.xmlInput = [];\n    this.handlers.xmlOutput = [];\n    this.handlers.rawInput = [];\n    this.handlers.rawOutput = [];\n    this.handlers.xmppConnected = this.handlers.xmppConnected || [];\n    this.handlers.xmppDisconnected = this.handlers.xmppDisconnected || [];\n    this.added.xmlInput = [];\n    this.added.xmlOutput = [];\n    this.added.rawInput = [];\n    this.added.rawOutput = [];\n    this.added.xmppConnected = this.added.xmppConnected || [];\n    this.added.xmppDisconnected = this.added.xmppDisconnected || [];\n    this.removed.xmlInput = [];\n    this.removed.xmlOutput = [];\n    this.removed.rawInput = [];\n    this.removed.rawOutput = [];\n    this.removed.xmppConnected = this.removed.xmppConnected || [];\n    this.removed.xmppDisconnected = this.removed.xmppDisconnected || [];\n  }\n\n\n  /**\n   * Add handler factory\n   * @param type\n   * @returns {Function}\n   * @private\n   */\n  _createAddHandler(type) {\n    return (handler) => {\n      if (!_.includes(this.added[type], handler) && !_.includes(this.handlers[type], handler)) {\n        this.added[type].push(handler);\n      }\n      return handler;\n    };\n  }\n\n  /**\n   * @param type\n   * @returns {Function}\n   * @private\n   */\n  _createDeleteHandler(type) {\n    return (handler) => {\n      this.removed[type].push(handler);\n    };\n  }\n\n  /**\n   * Hooks factory\n   * @param type\n   * @returns {Function}\n   * @private\n   */\n  _createHooksHandler(type) {\n\n    if (this.Connection[type] !== Strophe.Connection.prototype[type]) {\n      throw new Error(`\n        Error installing Strophe Connection Hooks plugin.\n        Strophe.Connection.${type} has already been overwritten.\n        Please ensure that the ConnectionHooks plugin is installed\n        before any other plugin, and that nothing is overwriting the\n        ${type} method.\n      `);\n    }\n\n    return (...args) => {\n\n      // remove handlers\n      while (this.removed[type].length > 0) {\n        _.pull(this.handlers[type], this.removed[type].pop());\n      }\n\n      // add new handlers\n      while (this.added[type].length > 0) {\n        this.handlers[type].push(this.added[type].pop());\n      }\n\n      let handlers = this.handlers[type];\n      this.handlers[type] = [];\n\n      // iterate through handlers and execute them. If they return true,\n      // keep them. If they return false or throw an exception, remove them\n      handlers.forEach((handler) => {\n        try {\n          if (handler(...args)) {\n            this.handlers[type].push(handler);\n          }\n        } catch (e) {\n          Strophe.warn('Removing Strophe handlers due to uncaught exception: ' + e.message);\n        }\n      });\n    };\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/connection_hooks_plugin.js\n **/","import ConfigStore from 'stores/configuration_store';\nimport AppConfig from 'config/app_config';\nimport AbstractPlugin from './abstract_plugin';\nimport DALError from 'core/models/dal-error';\nimport Room from 'core/models/room';\nimport XMPPUtils from '../lib/xmpp-utils';\nimport * as NS from '../lib/namespaces';\n\n/**\n * Strophe Connection plugin that contains logic around\n * creating, modifying, deleting rooms\n */\nexport default class RoomsPlugin extends AbstractPlugin {\n\n  init(...args) {\n    super.init(...args);\n    Strophe.addNamespace('HC', NS.HC);\n    Strophe.addNamespace('HC_MUC_ROOM', NS.HC_MUC_ROOM);\n    Strophe.addNamespace('HC_MUC_PERMISSIONS', NS.HC_MUC_PERMISSIONS);\n    Strophe.addNamespace('MUC_USER', NS.MUC_USER);\n    Strophe.addNamespace('MUC_OWNER', NS.MUC_OWNER);\n  }\n\n  /**\n   * Create a new room by sending an \"available\" presence with\n   * the new room details to a non-existent room jid.\n   * http://xmpp.org/extensions/xep-0045.html#createroom\n   * https://extranet.atlassian.com/pages/viewpage.action?pageId=2334034757#HipChatClients:HowDoTheyWork?-JoiningroomJoiningaroom\n   *\n   * @method create\n   * @param {string} name\n   * @param {string} topic\n   * @param {string} privacy\n   * @returns {Promise<CreateRoomResponse, DALError>}\n   */\n  create(name, topic, privacy) {\n    let jid = XMPPUtils.createRoomJid(name);\n    return new Promise((resolve, reject) => {\n\n      /**\n       * Creating a room via XMPP triggers an iq \"set\" stanza to be\n       * returned with the room id, name, topic, privacy and version:\n       *\n       * <iq xmlns=\"jabber:client\" to=\"${my_jid}\" type=\"set\">\n       *  <query xmlns=\"http://hipchat.com/protocol/muc#room\">\n       *    <item jid=\"${room_jid}\" name=\"${name}\">\n       *      <id>2115114</id>\n       *      <name>${name}</name>\n       *      <topic>${topic}</topic>\n       *      <privacy>${privacy}</privacy>\n       *      <owner>${owner_jid}</owner>\n       *      <guest_url />\n       *      <version>${version_hash}</version>\n       *      <num_participants>0</num_participants>\n       *    </item>\n       *  </query>\n       * </iq>\n       *\n       * We'll listen for that iq, and resolve with the room id\n       * so the return value of this api is the same as the rest version\n       *\n       * @typedef {object} CreateRoomResponse\n       * @property {number} id\n       */\n      let successHandler = this.Connection.addHandler((xmpp) => {\n        let item = xmpp.querySelector(`item[jid=\"${ jid }\"]`);\n        if (item && item.getAttribute('name') === name) {\n          let id = parseInt(item.querySelector('id').textContent, 10);\n          resolve({ id });\n          return false;\n        }\n        return true;\n      }, Strophe.NS.HC_MUC_ROOM, 'iq', 'set');\n\n      this.checkIfOnline().then(() => {\n        this.join(jid, 0, { name, topic, privacy }).catch((error) => {\n          this.Connection.deleteHandler(successHandler);\n          reject(error);\n        });\n      }, (connectionError) => {\n        this.Connection.deleteHandler(successHandler);\n        reject(connectionError);\n      });\n    });\n  }\n\n  /**\n   * Join a room by sending an \"available\" presence to the room jid.\n   * http://xmpp.org/extensions/xep-0045.html#enter\n   * https://extranet.atlassian.com/pages/viewpage.action?pageId=2334034757#HipChatClients:HowDoTheyWork?-JoiningroomJoiningaroom\n   *\n   * TODO: If a maxstanzas value is provided, this method triggers multiple side-effects\n   * TODO: in that it returns a join success AND history messages. It may make sense to\n   * TODO: either break this into multiple methods or make the return value an observable.\n   * TODO: For now, just returning the join success and letting the global trap take care of history\n   *\n   * @method join\n   * @param {string} jid\n   * @param {number} [maxstanzas=0]\n   * @param {object} [newRoomOpts=null] options if room being joined is a new room.\n   *  - Should be an object containing: { name, topic, privacy }\n   * @returns {Promise<JoinRoomResponse, DALError>}\n   */\n  join(jid, maxstanzas = 0, newRoomOpts = null, limitPresences = true) {\n    let id = `joinRoom:${ _.uniqueId() }`,\n      room = `${ jid }/${ ConfigStore.get('user_name') }`,\n      type = 'available',\n      stanza = $pres({ type, to: room, id })\n        .c('x', { xmlns: Strophe.NS.MUC })\n        .c('history', { maxstanzas }).up().up();\n\n    if (newRoomOpts) {\n      stanza.c('x', { xmlns: Strophe.NS.HC_MUC_ROOM })\n        .c('name').t(newRoomOpts.name).up()\n        .c('topic').t(newRoomOpts.topic).up()\n        .c('privacy').t(newRoomOpts.privacy).up().up();\n    }\n\n    if (!ConfigStore.get('is_guest', false) && limitPresences) {\n      //HC Servers that do not recognize this element will simply ignore it and function as always\n      //sending all room participant presences automatically after room join.\n      stanza.c('limit', {\n          maxmemberpresences: AppConfig.initial_room_participants_limit,\n          xmlns: Strophe.NS.HC\n        });\n    }\n\n    return new Promise((resolve, reject) => {\n      let successHandler, errorHandler;\n\n      successHandler = this.Connection.addHandler((xmpp) => {\n        let mucUser = xmpp.getElementsByTagNameNS(Strophe.NS.MUC_USER, 'x')[0];\n        if (mucUser.querySelector('status[code=\"110\"]')) {\n          this.Connection.deleteHandler(errorHandler);\n          resolve(this._processJoinRoomPresence(xmpp));\n          return false;\n        }\n        return true;\n      }, Strophe.NS.MUC_USER, 'presence', null, null, room);\n\n      errorHandler = this.Connection.addHandler((xmpp) => {\n        this.Connection.deleteHandler(successHandler);\n        reject(DALError.fromXMPP(xmpp));\n        return false;\n      }, null, 'presence', 'error', id, null);\n\n      this.Connection.send(stanza.tree());\n    });\n  }\n\n  /**\n   * Leave a room. Sends an unavailable presence to the room. The room returns\n   * a corresponding unavailable presence back to you with status code of 110:\n   *\n   * <presence xmlns='jabber:client' from='room_jid/User Name' type='unavailable' to='my_full_jid'>\n   *  <x xmlns='http://jabber.org/protocol/muc#user'>\n   *    <item affiliation='member' jid='my_bar_jid' role='none'/>\n   *    <status code='110'/>\n   *  </x>\n   *  <status>reason for leaving (unused)</status>\n   * </presence>\n   *\n   * @method leave\n   * @param {string} jid\n   * @returns {Promise<undefined,DALError>}\n   */\n  leave(jid) {\n    let room = jid + '/' + ConfigStore.get('user_name'),\n      stanza = $pres({ to: room, type: 'unavailable' });\n\n    return new Promise((resolve, reject) => {\n\n      this.Connection.addHandler((xmpp) => {\n        let mucUser = xmpp.getElementsByTagNameNS(Strophe.NS.MUC_USER, 'x')[0];\n\n        if (xmpp.getAttribute('type') === 'error') {\n          reject(DALError.fromXMPP(xmpp));\n          return false;\n\n        } else if (mucUser.querySelector('status[code=\"110\"]')) {\n          resolve();\n          return false;\n        }\n        return true;\n      }, null, 'presence', ['unavailable', 'error'], null, room);\n\n      this.Connection.send(stanza.tree());\n    });\n  }\n\n  /**\n   * Fetch details for a specific room\n   * http://xmpp.org/extensions/xep-0045.html#disco-roominfo\n   *\n   * @method fetch\n   * @param {string} jid\n   * @returns {Promise<Room, DALError>}\n   */\n  fetch(jid) {\n    let stanza = $iq({ type: 'get', to: jid })\n      .c('query', { xmlns: Strophe.NS.DISCO_INFO });\n\n    return new Promise((resolve, reject) => {\n      this.Connection.sendIQ(stanza.tree(),\n        (xmpp) => resolve(Room.fromXMPPDiscoInfo(xmpp)),\n        (xmpp) => reject(DALError.fromXMPP(xmpp)));\n    });\n  }\n\n  /**\n   * Rename a room. Sends rename IQ to server. Success response is an empty result IQ:\n   * <iq xmlns='jabber:client' type='result' from='room_jid' id='XXX' to='my_full_jid'/>\n   *\n   * @method rename\n   * @param {string} jid\n   * @param {string} name\n   * @returns {Promise<undefined,DALError>}\n   */\n  rename(jid, name) {\n    let stanza = $iq({ type: 'set', to: jid })\n      .c('query', { xmlns: Strophe.NS.HC })\n      .c('rename').t(name);\n\n    return this.sendIQWithOfflineGuard(stanza);\n  }\n\n  /**\n   * Downloads the entire rooms list from XMPP. Last resort if sync'ing fails; This is\n   * slow and expensive for large groups.\n   *\n   * @method getAll\n   * @returns {Promise<Array<Room>, DALError>}\n   */\n  getAll() {\n    let stanza = $iq({ type: 'get', to: ConfigStore.get('conference_server') })\n      .c('query', { xmlns: Strophe.NS.DISCO_ITEMS, ignore_archived: true });\n\n    return new Promise((resolve, reject) => {\n      let success = (xmpp) => {\n        let query = xmpp.getElementsByTagNameNS(Strophe.NS.DISCO_ITEMS, 'query')[0],\n          items = Array.from(query.querySelectorAll('item')),\n          rooms = items.map((item) => Room.fromXMPPDiscoItem(item));\n        resolve(rooms);\n      };\n\n      let error = (xmpp) => reject(DALError.fromXMPP(xmpp));\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n  /**\n   * Change a room's privacy setting. Success response is an empty result IQ:\n   * <iq xmlns='jabber:client' type='result' from='room_jid' id='XXX' to='my_full_jid'/>\n   *\n   * @method setPrivacy\n   * @param {string} jid\n   * @param {string} privacy - \"public\" or \"private\"\n   * @returns {Promise<undefined,DALError>}\n   */\n  setPrivacy(jid, privacy) {\n    let stanza = $iq({ type: 'set', to: jid })\n      .c('query', { xmlns: Strophe.NS.HC })\n      .c('privacy').t(privacy);\n\n    return this.sendIQWithOfflineGuard(stanza);\n  }\n\n  /**\n   * Set room topic\n   *\n   * @method setTopic\n   * @param {string} jid\n   * @param {string} [topic='']\n   * @returns {Promise<undefined,DALError>}\n   */\n  setTopic(jid, topic = '') {\n    topic = topic.trim().substr(0, AppConfig.max_topic_text_length);\n    let stanza = $msg({ to: jid, type: 'groupchat' }).c('subject').t(topic);\n\n    return new Promise((resolve, reject) => {\n      let success, error, timeout;\n\n      success = this.Connection.addHandler((message) => {\n        let subjectNode = message.querySelector('subject'),\n          subject = subjectNode ? subjectNode.textContent.trim() : '';\n        if (subject === topic) {\n          this.Connection.deleteHandler(error);\n          this.Connection.deleteTimedHandler(timeout);\n          resolve();\n          return false;\n        }\n        return true;\n      }, null, 'message', 'groupchat', null, jid, { matchBare: true });\n\n      error = this.Connection.addHandler((message) => {\n        this.Connection.deleteHandler(success);\n        this.Connection.deleteTimedHandler(timeout);\n        reject(DALError.fromXMPP(message));\n      }, null, 'message', 'error', null, jid, { matchBare: true });\n\n      timeout = this.Connection.addTimedHandler(AppConfig.default_message_confirmation_timeout, () => {\n        this.Connection.deleteHandler(success);\n        this.Connection.deleteHandler(error);\n        reject(DALError.ofType(DALError.Types.TIMEOUT));\n      });\n\n      this.Connection.send(stanza.tree());\n    });\n  }\n\n  /**\n   * Set guest access on a room. Success response is an empty result IQ:\n   * <iq xmlns='jabber:client' type='result' from='room_jid' id='XXX' to='my_full_jid'/>\n   *\n   * @method setGuestAccess\n   * @param {string} jid\n   * @param {boolean} enabled\n   * @returns {Promise<undefined,DALError>}\n   */\n  setGuestAccess(jid, enabled) {\n    let stanza = $iq({ type: 'set', to: jid })\n      .c('query', { xmlns: Strophe.NS.HC })\n      .c('guest_access').t(enabled ? 1 : 0);\n\n    return this.sendIQWithOfflineGuard(stanza);\n  }\n\n  /**\n   * @method inviteUsers\n   * @param {string} roomJid\n   * @param {array} userJids\n   * @returns {Promise}\n   */\n  inviteUsers(roomJid, userJids) {}\n\n  /**\n   * @method removeUsers\n   * @param {string} roomJid\n   * @param {array} userJids\n   * @returns {Promise}\n   */\n  removeUsers(roomJid, userJids) {}\n\n  /**\n   * Delete a room.\n   * Sends an IQ to tell the server to delete the room. The server will respond with\n   * an empty IQ result that matches your sent IQ id and room\n   *\n   * <iq xmlns='jabber:client' type='result' from='the-room-you-deleted@conf.btf.hipchat.com'\n   *   id='10:sendIQ' to='1_2@chat.btf.hipchat.com'/>\n   *\n   * @method delete\n   * @param {string} jid\n   * @returns {Promise}\n   */\n  delete(jid) {\n    let stanza = $iq({ type: 'set', to: jid })\n      .c('query', { xmlns: Strophe.NS.MUC_OWNER })\n      .c('destroy');\n\n    return this.sendIQWithOfflineGuard(stanza);\n  }\n\n  /**\n   * Process a join room presence response stanza:\n   *\n   *  <presence xmlns=\"jabber:client\" to=\"1_4@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222\" from=\"1_adfasdfasdfas@conf.devvm.hipchat.com/Homer Simpson\">\n   *    <x xmlns=\"http://jabber.org/protocol/muc#user\">\n   *      <item affiliation=\"owner\" jid=\"1_4@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222\" role=\"participant\" />\n   *      <status code=\"110\" />\n   *    </x>\n   *    <x xmlns=\"http://hipchat.com/protocol/muc#room\">\n   *      <name>adfasdfasdfas</name>\n   *      <privacy>public</privacy>\n   *      <topic />\n   *      <rostersize>1</rostersize>\n   *    </x>\n   *    <x xmlns=\"http://hipchat.com/protocol/muc#permissions\">\n   *      <permission>room:invite_user</permission>\n   *      <permission>room:create</permission>\n   *      <permission>update_own_user</permission>\n   *    </x>\n   *  </presence>\n   *\n   * @param xmpp\n   * @returns {JoinRoomResponse}\n   * @private\n   */\n  _processJoinRoomPresence(xmpp) {\n    let permsNode = xmpp.getElementsByTagNameNS(Strophe.NS.HC_MUC_PERMISSIONS, 'x')[0],\n      item = xmpp.getElementsByTagNameNS(Strophe.NS.MUC_USER, 'x')[0].querySelector('item'),\n      mucRoomNode = item = xmpp.getElementsByTagNameNS(Strophe.NS.HC_MUC_ROOM, 'x')[0],\n      topicNode = mucRoomNode ? mucRoomNode.querySelector('topic') : null,\n      topic = topicNode ? topicNode.textContent : '',\n      permissions = permsNode ? _.map(permsNode.querySelectorAll('permission'), (ele) => ele.textContent) : [],\n      rosterSize = (xmpp.querySelector('rostersize')) ? parseInt(xmpp.querySelector('rostersize').textContent, 10) : 0;\n\n    /**\n     * @typedef {object} JoinRoomResponse\n     * @property {string} jid\n     * @property {string} type - \"groupchat\"\n     * @property {string} [role]\n     * @property {string} [affiliation]\n     * @property {Array<string>} permissions - list of permissions the current user has on this room\n     */\n    return {\n      jid: Strophe.getBareJidFromJid(xmpp.getAttribute('from')),\n      type: 'groupchat',\n      role: item ? item.getAttribute('role') : null,\n      affiliation: item ? item.getAttribute('affiliation') : null,\n      permissions: permissions,\n      roster_size: rosterSize,\n      topic: topic\n    };\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/rooms_plugin.js\n **/","import ConfigStore from 'stores/configuration_store';\n\nconst LETTER_UTF8_RANGES = \"\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0\\u08A2-\\u08AC\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097F\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191C\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA697\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA793\\uA7A0-\\uA7AA\\uA7F8-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA80-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC\";\n\nexport default {\n\n  /**\n   * Slugify a string\n   * @param {string} str\n   * @returns {string}\n   */\n  toSlug(str) {\n    let from = \"àáäâèéëêìíïîòóöôùúüûñç\",\n      to = \"aaaaeeeeiiiioooouuuunc\";\n    str = str.replace(/^\\s+|\\s+$/g, \"\").toLowerCase();\n    for (let i = 0; i < from.length; i++) {\n      str = str.replace(new RegExp(from.charAt(i), \"g\"), to.charAt(i));\n    }\n    str = str.replace(new RegExp(`[^0-9${LETTER_UTF8_RANGES} -]`, 'g'), \"\").replace(/\\s+/g, \"_\").replace(/-+/g, \"-\");\n    return str;\n  },\n\n  /**\n   * Create a new room jid from the name\n   * @param {string} name\n   * @returns {string}\n   */\n  createRoomJid (name) {\n    let { group_id, conference_server } = ConfigStore.getAll(),\n      slug = this.toSlug(name);\n    return `${ group_id }_${ slug }@${ conference_server }`;\n  },\n\n  /**\n   * Formats a date to the format XMPP recognizes\n   * @param {date|string} date\n   * @returns {string}\n   */\n  toXMPPDate (date) {\n    if (_.isDate(date)) {\n      return (new Date(date.setMilliseconds(0))).toISOString().replace(/\\.000/, '');\n    }\n    return date;\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/lib/xmpp-utils.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport * as NS from '../lib/namespaces';\nimport XMPPUtils from '../lib/xmpp-utils';\nimport DALError from 'core/models/dal-error';\nimport File from 'core/models/file';\n\nexport default class ChatPlugin extends AbstractPlugin {\n\n  init(...args) {\n    super.init(...args);\n    Strophe.addNamespace('HC_LINKS', NS.HC_LINKS);\n    Strophe.addNamespace('HC_FILES', NS.HC_FILES);\n  }\n\n  /**\n   * Get list of links for a given room/one-to-one.\n   * Tetra is not currently honoring the limit parameter here -- HC-28429\n   *\n   * @param {string} jid\n   * @param {date} [before=null]\n   * @param {number} [limit=50]\n   * @returns {Promise<ChatLinksResponse, DALError>}\n   */\n  getLinks(jid, before, limit = 50) {\n    let query = {\n      xmlns: Strophe.NS.HC_LINKS,\n      limit: limit\n    };\n\n    if (before) {\n      query.before = XMPPUtils.toXMPPDate(before);\n    }\n\n    let stanza = $iq({ type: 'get', to: jid }).c('query', query);\n\n    return new Promise((resolve, reject) => {\n      let success = (xmpp) => {\n        resolve(this._processLinksResponse(xmpp, before, limit));\n      };\n\n      let error = (xmpp) => {\n        reject(DALError.fromXMPP(xmpp));\n      };\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n  /**\n   * Get list of files for a given room/one-to-one\n   * Tetra is not currently honoring the limit parameter here -- HC-28429\n   *\n   * @param {string} jid\n   * @param {date} [before=null]\n   * @param {number} [limit=50]\n   * @returns {Promise<ChatFilesResponse, DALError>}\n   */\n  getFiles(jid, before, limit = 50) {\n    let query = {\n      xmlns: Strophe.NS.HC_FILES,\n      limit: limit\n    };\n\n    if (before) {\n      query.before = XMPPUtils.toXMPPDate(before);\n    }\n\n    let stanza = $iq({ type: 'get', to: jid })\n                    .c('query', query)\n                    .c('auth_scheme', 'bearer');\n\n    return new Promise((resolve, reject) => {\n      let success = (xmpp) => {\n        resolve(this._processFilesResponse(xmpp, before, limit));\n      };\n\n      let error = (xmpp) => {\n        reject(DALError.fromXMPP(xmpp));\n      };\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n  /**\n   * Process successful links query iq response:\n   *\n   * <iq xmlns='jabber:client' type='result' from='10804_samar@conf.hipchat.com' id='15:sendIQ' to='10804_220836@chat.hipchat.com/web||proxy|proxy-b301.hipchat.com|5252'>\n   *  <query xmlns='http://hipchat.com/protocol/links'>\n   *    <item>\n   *      <id>246769778</id>\n   *      <group_id>10804</group_id>\n   *      <user_id>3197019</user_id>\n   *      <url>https://austin.craigslist.org/hsh/5369067832.html</url>\n   *      <date>2016-01-11T16:45:22Z</date>\n   *    </item>\n   *    ...\n   *  </query>\n   * </iq>\n   *\n   * @param xmpp\n   * @param before\n   * @param limit\n   * @returns {ChatLinksResponse}\n   * @private\n   */\n  _processLinksResponse(xmpp, before, limit) {\n    let query = xmpp.getElementsByTagNameNS(Strophe.NS.HC_LINKS, 'query')[0],\n      jid = Strophe.getBareJidFromJid(xmpp.getAttribute('from')),\n      items = query.querySelectorAll('item'),\n      end = items.length < limit;\n\n    /**\n     * @typedef {Object} ChatLink\n     * @property {number} id\n     * @property {number} group_id\n     * @property {number} user_id\n     * @property {string} url\n     * @property {date} date\n     * @property {string} name\n     */\n     let links = _.map(items, (item) => ({\n        id: parseInt(item.querySelector('id').textContent, 10),\n        group_id: parseInt(item.querySelector('group_id').textContent, 10),\n        user_id: parseInt(item.querySelector('user_id').textContent, 10),\n        url: item.querySelector('url').textContent,\n        date: new Date(item.querySelector('date').textContent),\n        name: item.querySelector('url').textContent.split('/').pop()\n      }));\n\n      links = _.orderBy(links, 'date', 'desc');\n\n    /*\n     * NOTE: HipChat Server v1.3.1 and lower do not honor the \"before\" param\n     * in the fetchLinks api, so you'll get the same result set back on every\n     * request. This check is to ensure the links we just got back are indeed\n     * older than what was requested.\n     */\n    let oldestLinkDate = _.get(_.last(links), 'date');\n    if (links.length && before && before - oldestLinkDate <= 0) {\n      links = [];\n      end = true;\n    }\n\n    /**\n     * @typedef {Object} ChatLinksResponse\n     * @property {string} jid\n     * @property {boolean} end\n     * @property {Array<ChatLink>} links\n     */\n    return { jid, links, end };\n  }\n\n  /**\n   * Process successful files query iq response. Using the File model to normalize\n   * authenticated/secure files and unauthenticated/legacy files. See the model\n   * for sample data and details on the returned File object.\n   *\n   * @param xmpp\n   * @param before\n   * @param limit\n   * @returns {ChatFilesResponse}\n   * @private\n   */\n  _processFilesResponse(xmpp, before, limit) {\n    let query = xmpp.getElementsByTagNameNS(Strophe.NS.HC_FILES, 'query')[0],\n        jid = Strophe.getBareJidFromJid(xmpp.getAttribute('from')),\n        items, end;\n\n    items = query.querySelectorAll('authenticated_file');\n    if (items.length === 0) {\n      items = query.querySelectorAll('item');\n    }\n    end = items.length < limit;\n\n    let files = _.map(items, (item) => {\n      return File.fromXMPP(item);\n    });\n\n    /*\n     * NOTE: HipChat Server v1.3.1 and lower do not honor the \"before\" param\n     * in the fetchFiles api, so you'll get the same result set back on every\n     * request. This check is to ensure the files we just got back are indeed\n     * older than what was requested.\n     */\n    let oldestFileDate = _.get(_.last(files), 'date');\n    if (files.length && before && before - oldestFileDate <= 0) {\n      files = [];\n      end = true;\n    }\n\n    /**\n     * @typedef {Object} ChatFilesResponse\n     * @property {string} jid\n     * @property {boolean} end\n     * @property {Array<File>} files\n     */\n    return { jid, files, end };\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/chat_plugin.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport * as NS from '../lib/namespaces';\nimport DALError from 'core/models/dal-error';\nimport ConfigStore from 'stores/configuration_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport Presence from 'lib/enum/presence';\n\nexport default class PresencePlugin extends AbstractPlugin {\n\n  constructor(...args) {\n    super(...args);\n    this.idleTimestamp = null;\n  }\n\n  init(...args) {\n    super.init(...args);\n    Strophe.addNamespace('HC_PRESENCE', NS.HC_PRESENCE);\n    Strophe.addNamespace('ENTITY_CAPABILITIES', NS.ENTITY_CAPABILITIES);\n    Strophe.addNamespace('LAST_ACTIVITY', NS.LAST_ACTIVITY);\n  }\n\n  /**\n   * Sends the initial presence to tell the server the client has\n   * connected or reconnected. Send on connection events. Same as\n   * regular presence, but includes the ENTITY_CAPABILITIES info:\n   *\n   * <presence roster_presences=\"false\" xmlns=\"jabber:client\">\n   *  <show>chat</show>\n   *  <c xmlns=\"http://jabber.org/protocol/caps\"\n   *     node=\"http://hipchat.com/client/web\"\n   *     ver=\"4.15.0\"\n   *     os_ver=\"Chrome 49\"/>\n   * </presence>\n   *\n   * @param {string} [show = 'chat']\n   * @returns {Promise<undefined,DALError>}\n   */\n  sendInitialPresence(show = Presence.AVAILABLE) {\n    return this.setPresence(show, null, true);\n  }\n\n  /**\n   * Sends global presences to the server to broadcast your status.\n   * Subscribes to echoes of these presences since the server will\n   * send the right back to you as long as you're subscribed to your\n   * own presence updates -- which you should always be\n   *\n   * Just presence (show):\n   *\n   * <presence roster_presences=\"false\" xmlns=\"jabber:client\">\n   *   <show>dnd</show>\n   * </presence>\n   *\n   * Presence and status text:\n   *\n   * <presence roster_presences=\"false\" xmlns=\"jabber:client\">\n   *   <show>chat</show>\n   *   <status>I'm back</status>\n   * </presence>\n   *\n   * Idle (show === 'away'):\n   *\n   * <presence roster_presences=\"false\" xmlns=\"jabber:client\">\n   *   <show>away</show>\n   *   <status>I'm away</status>\n   *   <query xmlns=\"jabber:iq:last\" seconds=\"900\"/>\n   * </presence>\n   *\n   * @param {string} [show = 'chat']\n   * @param {string|null} [status = null]\n   * @param {boolean} [send_caps = false]\n   * @returns {Promise<undefined,DALError>}\n   */\n  setPresence(show = Presence.AVAILABLE, status = null, send_caps = false) {\n    return new Promise((resolve, reject) => {\n      let success, error;\n\n      success = this.Connection.addHandler(() => {\n        this.Connection.deleteHandler(error);\n        resolve();\n        return false;\n      }, null, 'presence', null, null, ConfigStore.get('jid'), { matchBare: true });\n\n      error = this.Connection.addHandler((xmpp) => {\n        this.Connection.deleteHandler(success);\n        reject(DALError.fromXMPP(xmpp));\n        return false;\n      }, null, 'presence', 'error', null, ConfigStore.get('jid'), { matchBare: true });\n\n      this.Connection.send(this._createPresenceStanza(show, status, send_caps));\n    });\n  }\n\n  /**\n   * Sets global presence filter to the provided list of user ids.\n   * Must include the current user's id; it will be appended if absent.\n   * We should *always* be subscribed to receive our own presences.\n   *\n   * Sends:\n   *\n   * <iq type=\"set\" xmlns=\"jabber:client\">\n   *  <query xmlns=\"http://hipchat.com/protocol/presence\" action=\"presence_filter\">\n   *    <uid>1</uid>\n   *    <uid>2</uid>\n   *    <uid>3</uid>\n   *    ...\n   *  </query>\n   * </iq>\n   *\n   * Receives:\n   *\n   * <iq xmlns='jabber:client' type='result' from='jid' id='18:sendIQ' to='my-jid'/>\n   *\n   * @param {Array<string|number>} idList = [[]]\n   * @returns {Promise<undefined,DALError>}\n   */\n  filterPresences(idList = []) {\n    let currentUserId = ConfigStore.get('user_id').toString(),\n      stanza = $iq({ type: 'set' })\n        .c('query', {\n          xmlns: Strophe.NS.HC_PRESENCE,\n          action: 'presence_filter'\n        });\n\n    if (!_.find(idList, (item) => item.toString() === currentUserId)) {\n      idList.push(currentUserId);\n    }\n\n    idList.forEach((uid) => {\n      stanza.c('uid', uid).up();\n    });\n\n    return new Promise((resolve, reject) => {\n      this.Connection.sendIQ(\n        stanza.tree(),\n        (iq) => resolve(),\n        (err) => reject(DALError.fromXMPP(err))\n      );\n    });\n  }\n\n  /**\n   * @method _createPresenceStanza\n   * @param {string} [show = 'chat']\n   * @param {string|null} [status = null]\n   * @param {boolean} [send_caps = false]\n   * @returns {*} Strophe presence stanza object\n   * @private\n   */\n  _createPresenceStanza(show = Presence.AVAILABLE, status = null, send_caps = false) {\n    let stanza = $pres({ roster_presences: 'false' })\n      .c('show').t(show).up();\n\n    if (status) {\n      stanza.c('status').t(status).up();\n    }\n\n    if (show === Presence.IDLE) {\n      stanza.c('query', {\n        xmlns: Strophe.NS.LAST_ACTIVITY,\n        seconds: this._getIdleSeconds()\n      }).up();\n      this._updateIdleTimestamp();\n    } else {\n      this._resetIdleTimestamp();\n    }\n\n    if (send_caps) {\n      stanza.c('c', {\n        xmlns: Strophe.NS.ENTITY_CAPABILITIES,\n        node: ConfigStore.get('client_node'),\n        ver: ConfigStore.get('client_version_id'),\n        os_ver: ConfigStore.get('client_os_version_id')\n      }).up();\n    }\n\n    return stanza.tree();\n  }\n\n  /**\n   * Get the current idle preference in milliseconds\n   * @returns {number}\n   * @private\n   */\n  _getIdlePreferenceMS() {\n    return PreferencesStore.get('idleMinutes') * 60 * 1000;\n  }\n\n  /**\n   * Get the number of seconds the user has been idle.\n   * @returns {number}\n   * @private\n   */\n  _getIdleSeconds() {\n    if (this.idleTimestamp) {\n      return Math.round((new Date().getTime() - this.idleTimestamp + this._getIdlePreferenceMS()) / 1000);\n    }\n    return this._getIdlePreferenceMS() / 1000;\n  }\n\n  /**\n   * Update idleTimestamp value any time you set presence to 'away'\n   * @private\n   */\n  _updateIdleTimestamp() {\n    this.idleTimestamp = this.idleTimestamp ? this.idleTimestamp : new Date().getTime();\n  }\n\n  /**\n   * Clear idleTimestamp any time you set presence to something\n   * other than 'away'\n   * @private\n   */\n  _resetIdleTimestamp() {\n    this.idleTimestamp = null;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/presence_plugin.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport IQProcessor from 'core/common/iq_processor';\nimport BoshActions from 'actions/bosh_actions';\nimport x2js from 'core/common/x2js';\nimport Logger from 'helpers/logger';\nimport * as NS from '../lib/namespaces';\n\n/**\n * This is the \"global xmpp trap\" that propagates the majority of the\n * XMPP data to our application -- and is a total and terrible hack.\n *\n * The xmlInput and rawInput methods are noops within Strophe that can be overridden\n * to provide custom xml processing before moving them along to Strophe's handlers.\n * Here, we're building a JSON blob out of the 2 methods since they're called\n * one after the other, and bypassing Strophe from there -- passing the converted\n * JSON up to our app via the receivedServerData action (shrug)\n *\n * @class XMPPTrapPlugin\n */\nexport default class XMPPTrapPlugin extends AbstractPlugin {\n\n  constructor() {\n    super();\n    this.queue = null;\n  }\n\n  /**\n   * Create a single instance of the handler callbacks that are bound to 'this'\n   * just after the plugin is instantiated. These will be the callback instances\n   * registered to the xmlInput and rawInput hooks each time\n   * @param args\n   */\n  init(...args) {\n    super.init(...args);\n    this.xmlInputHandler = this.onXmlInput.bind(this);\n    this.xmlOutputHandler = this.onXmlOutput.bind(this);\n    this.rawInputHandler = this.onRawInput.bind(this);\n  }\n\n  /**\n   * On connected, attach the global trap handlers.\n   * @override\n   */\n  onConnected() {\n    this.Connection.last_BOSH_activity = new Date().getTime();\n    this.Connection.ConnectionHooks.addXmlInputHandler(this.xmlInputHandler);\n    this.Connection.ConnectionHooks.addRawInputHandler(this.rawInputHandler);\n    this.Connection.ConnectionHooks.addXmlOutputHandler(this.xmlOutputHandler);\n  }\n\n  /**\n   * Called by Strophe on each ajax response with the parsed XML data\n   * @param elem\n   * @returns {boolean} true - always return true\n   */\n  onXmlInput(elem) {\n    try {\n      Logger.logXML(elem, 'RECV');\n      let xmpp = this._removeExcludedNodes(elem);\n      this.queue = {\n        xml: xmpp,\n        json: x2js.xml2json(xmpp)\n      };\n      let is_iq_stanza = !!_.get(this.queue.json, 'iq', false);\n      if (is_iq_stanza) {\n        this.queue.json = IQProcessor.transform(this.queue.json);\n      }\n    } catch (e) {\n      Logger.type('xmpp-trap').error(`Exception thrown in xmlInput handler: ${e.message}.`);\n    }\n    return true;\n  }\n\n  /**\n   * Called by Strophe on each ajax response with the raw body text\n   * @param raw\n   * @returns {boolean} true - always return true\n   */\n  onRawInput(raw) {\n    try {\n      this.Connection.last_BOSH_activity = new Date().getTime();\n      if (this.queue.xml && this.queue.xml.hasChildNodes()) {\n        if (this.queue.json.message) {\n          this.queue.json.message = this._fixXhtmlMessageBody(raw, this.queue.json.message);\n        }\n        BoshActions.receivedServerData(this.queue.json);\n      }\n      this.queue = null;\n    } catch (e) {\n      Logger.type('xmpp-trap').error(`Exception thrown in rawInput handler: ${e.message}.`);\n    }\n    return true;\n  }\n\n  /**\n   * Called by Strophe just *after* sending each ajax request.\n   * Useful for logging\n   * @param elem\n   * @returns {boolean} true - always return true\n   */\n  onXmlOutput(elem) {\n    Logger.logXML(elem, 'SEND');\n    return true;\n  }\n\n  /**\n   * As we begin to properly manage xmpp in the DAL, we should start removing from incoming\n   * XML before passing it to the app to prevent data propagating multiple times. This\n   * is done on a clone of the xml passed in, as we don't want to remove the nodes from\n   * the original as the nodes won't make it to our plugin handlers.\n   * @param {xml} xmpp raw xml input from the ajax request\n   * @returns {xml} clone of the original xml with appropriate nodes removed\n   */\n  _removeExcludedNodes(xmpp) {\n    let exclusions = [],\n      elem = xmpp.cloneNode(true);\n\n    let iqIgnoreList = [\n      NS.ROSTER,\n      NS.DISCO_ITEMS,\n      NS.DISCO_INFO,\n      NS.HC_LINKS,\n      NS.HC_FILES,\n      NS.HC_AUTHENTICATED_FILE\n    ];\n\n    Array.from(elem.querySelectorAll('iq')).forEach(function (iq) {\n      if (_.includes(['result', 'error'], iq.getAttribute('type'))) {\n        let query = iq.querySelector('query');\n        if (query && _.includes(iqIgnoreList, query.getAttribute('xmlns'))) {\n          exclusions.push(iq);\n        }\n      }\n    });\n\n    exclusions.forEach(function (node) {\n      elem.removeChild(node);\n    });\n\n    return elem;\n  }\n\n  /**\n   * Regexes out the xhtml body of an xhtml message from the raw ajax response.\n   * (noidea) why or what purpose this serves, but this has existed since the\n   * first commit of HJC (shrug)\n   */\n  _fixXhtmlMessageBody(raw, messages) {\n    return _.map([].concat(messages), (message) => {\n      if (_.get(message, 'html.body.xmlns') === 'http://www.w3.org/1999/xhtml') {\n        let messageExtractor = new RegExp(\"mid=['\\\"]\" + message.mid + \"['\\\"]\\.+?</message>\", \"i\"),\n          xhtmlBodyExtractor = new RegExp(\"<body[^>]*xmlns=[\\\"']http:\\\\/\\\\/www\\\\.w3\\\\.org\\\\/1999\\\\/xhtml[\\\"'][^>]*>(.*?)<\\/body>\", \"i\"),\n          matches = messageExtractor.exec(raw) || [];\n        if (matches.length) {\n          matches = xhtmlBodyExtractor.exec(matches[0]) || [];\n          if (matches.length > 1) {\n            message.html.body.__text = matches[1];\n          }\n        }\n      }\n      return message;\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/xmpp_trap_plugin.js\n **/","import utils from 'helpers/utils';\n\nexport default {\n\n  transform(data) {\n    let xmlns, transformer;\n\n    // Single IQ: normalize to array\n    if (!_.isArray(data.iq)) {\n      data.iq = [data.iq];\n    }\n\n    data.iq = data.iq.map(iq => {\n      xmlns = _.get(iq, 'query.xmlns');\n      transformer = this._getTransformer(xmlns);\n\n      return transformer(iq);\n    });\n\n    return data;\n  },\n\n  _getTransformer(xmlns) {\n    let transformer;\n\n    switch (xmlns) {\n      case 'http://hipchat.com/protocol/muc#room':\n        transformer = this._hipchatRoomEntity;\n        break;\n      default:\n        transformer = _.identity;\n        break;\n    }\n\n    return transformer;\n  },\n\n  _hipchatRoomEntity(iq) {\n    // This stanza also comes through for room deletions, which do not\n    // have an owner\n    if (_.has(iq, 'query.item.owner')) {\n      iq.query.item.owner = utils.jid.user_id(iq.query.item.owner);\n    }\n\n    return iq;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/common/iq_processor.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  receivedServerData (data) {\n    AppDispatcher.dispatch('server-data', data);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/bosh_actions.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport User from 'core/models/user';\nimport DALError from 'core/models/dal-error';\n\nexport default class RosterPlugin extends AbstractPlugin {\n\n  init(...args) {\n    super.init(...args);\n  }\n\n  /**\n   * Get the full roster from XMPP\n   *\n   * @method getRoster\n   * @returns {Promise<Array<User>, DALError>}\n   */\n  getRoster() {\n    let stanza = $iq({ type: 'get' })\n      .c('query', { xmlns: Strophe.NS.ROSTER });\n\n    return new Promise((resolve, reject) => {\n      let success = (xmpp) => {\n        let query = xmpp.getElementsByTagNameNS(Strophe.NS.ROSTER, 'query')[0],\n          items = Array.from(query.querySelectorAll('item')),\n          users = items.map((item) => User.fromXMPP(item));\n        resolve(users);\n      };\n\n      let error = (xmpp) => reject(DALError.fromXMPP(xmpp));\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/roster_plugin.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport Emoticon from 'core/models/emoticon';\nimport DALError from 'core/models/dal-error';\nimport * as NS from '../lib/namespaces';\n\nexport default class EmoticonsPlugin extends AbstractPlugin {\n\n  init(...args) {\n    super.init(...args);\n    Strophe.addNamespace('HC_EMOTICONS', NS.HC_EMOTICONS);\n  }\n\n  /**\n   * Get the full emoticon list from XMPP\n   *\n   * @method getEmoticons\n   * @returns {Promise<Array<Emoticon>, DALError>}\n   */\n  getEmoticons(cached_ver = '') {\n    let stanza = $iq({ type: 'get' })\n      .c('query', { xmlns: Strophe.NS.HC_EMOTICONS, ver: cached_ver });\n\n    return new Promise((resolve, reject) => {\n      let success = (xmpp) => {\n        let query = xmpp.getElementsByTagNameNS(Strophe.NS.HC_EMOTICONS, 'query')[0];\n        let ver = query.getAttribute('ver') || '';\n        let path_prefix = query.querySelector('path_prefix').textContent || '';\n        let items = Array.from(query.querySelectorAll('item'));\n        let emoticons = items.map((item) => Emoticon.fromXMPP(item));\n\n        resolve({ ver, path_prefix, emoticons });\n      };\n\n      let error = (xmpp) => {\n        reject(DALError.fromXMPP(xmpp));\n      };\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/emoticons_plugin.js\n **/","import AbstractPlugin from './abstract_plugin';\nimport User from 'core/models/user';\nimport Room from 'core/models/room';\nimport Emoticon from 'core/models/emoticon';\nimport DALCache from 'core/dal.cache';\nimport * as NS from '../lib/namespaces';\nimport { RECONNECT_SYNC_THRESHOLD } from 'core/common/constants';\nimport { create as createHash } from 'core/common/hash';\n\nexport default class CachePlugin extends AbstractPlugin {\n\n  constructor(...args) {\n    super(...args);\n    this.disconnectedTimestamp = null;\n  }\n\n\n  init(...args) {\n    super.init(...args);\n    Strophe.addNamespace('HC_MUC_ROOM', NS.HC_MUC_ROOM);\n    Strophe.addNamespace('HC_ROSTER_HASH', NS.HC_ROSTER_HASH);\n    Strophe.addNamespace('HC_ROOMS_HASH', NS.HC_ROOMS_HASH);\n    Strophe.addNamespace('HC_EMOTICONS', NS.HC_EMOTICONS);\n  }\n\n  /**\n   * @override\n   */\n  onConnected() {\n    this.Connection.addHandler(this.updateCacheFromRosterPush.bind(this), NS.ROSTER, 'iq', 'set');\n    this.Connection.addHandler(this.updateCacheFromRoomPush.bind(this), NS.HC_MUC_ROOM, 'iq', 'set');\n    this.Connection.addHandler(this.updateCacheFromEmoticonPush.bind(this), NS.HC_EMOTICONS, 'iq', 'set');\n  }\n\n  /**\n   * @override\n   */\n  onDisconnected() {\n    this.disconnectedTimestamp = new Date().getTime();\n  }\n\n  /*\n   * Updates the Cached user list when roster pushes from the server are received.\n   * If there is no cached roster currently, disregard. Pushes should not be\n   * saved as the entire roster.\n   */\n  updateCacheFromRosterPush(xmpp) {\n    DALCache.has(DALCache.Keys.ROSTER).then((hasRoster) => {\n      if (!hasRoster) {\n        return;\n      }\n\n      let query = xmpp.getElementsByTagNameNS(Strophe.NS.ROSTER, 'query')[0],\n        items = query.querySelectorAll('item'),\n        users = Array.from(items).map((item) => User.fromXMPP(item));\n      return DALCache.updateRoster(users);\n    }).catch(_.noop);\n    return true;\n  }\n\n  /*\n   * Updates the cached rooms list when room pushes from the server are received.\n   * If there is no cached rooms list, disregard. Pushes should not be\n   * saved as the entire list.\n   */\n  updateCacheFromRoomPush(xmpp) {\n    DALCache.has(DALCache.Keys.ROOMS).then((hasRooms) => {\n      if (!hasRooms) {\n        return;\n      }\n\n      let query = xmpp.getElementsByTagNameNS(Strophe.NS.HC_MUC_ROOM, 'query')[0],\n        items = query.querySelectorAll('item'),\n        rooms = Array.from(items).map((item) => Room.fromXMPPMucRoom(item));\n      return DALCache.updateRooms(rooms);\n    }).catch(_.noop);\n    return true;\n  }\n\n  /*\n   * Updates the cached emoticons list when emoticon pushes from the server are received.\n   * If there is no cached emoticons list, disregard. Pushes should not be\n   * saved as the entire list.\n   */\n  updateCacheFromEmoticonPush(xmpp) {\n    DALCache.has(DALCache.Keys.EMOTICONS).then((hasEmoticons) => {\n      if (!hasEmoticons) {\n        return;\n      }\n\n      let query = xmpp.getElementsByTagNameNS(Strophe.NS.HC_EMOTICONS, 'query')[0],\n        items = query.querySelectorAll('item'),\n        emoticons = Array.from(items).map((item) => Emoticon.fromXMPP(item));\n\n      return DALCache.updateEmoticons({\n        type: 'set',\n        query: {\n          item: emoticons\n        }\n      });\n    }).catch(_.noop);\n    return true;\n  }\n\n  /**\n   * Determines if the `disconnected_time` is within the threshold that should\n   * trigger syncing-on-reconnection\n   *\n   * @method isReconnectedWithinSyncThreshold\n   * @returns {boolean}\n   */\n  isReconnectedWithinSyncThreshold() {\n    let result = false,\n      time_since_disconnected;\n\n    if (_.isFinite(this.disconnectedTimestamp)) {\n      time_since_disconnected = Date.now() - this.disconnectedTimestamp;\n      result = time_since_disconnected < RECONNECT_SYNC_THRESHOLD;\n    }\n\n    return result;\n  }\n\n  /**\n   * Checks to see if the provided version of the roster is in sync with\n   * the server. If the provided cache is empty, resolves with false.\n   * If not, will request the server hash value via xmpp and compare it\n   * with the calculated hash value, and resolve with whether they match.\n   *\n   * @method isResourceInSync\n   * @param {string} resource - either DAL.Cache.Keys.ROSTER or ROOMS\n   * @param {string} cache - Roster or Rooms cache\n   * @returns {Promise<boolean>}\n   */\n  isResourceInSync(resource, cache) {\n    if (Object.keys(cache).length === 0) {\n      return Promise.resolve(false);\n    }\n    return this.getResourceHash(resource).then((serverHash) => {\n\n      let resourceList = Object.keys(cache).reduce(function (result, id) {\n        if (!(cache[id].is_deleted || cache[id].is_archived)) {\n          result.push({ id, version: cache[id].version });\n        }\n        return result;\n      }, []);\n\n      return createHash(resourceList) === serverHash;\n    });\n  }\n\n  /**\n   * Get the server version-hash of the roster or rooms list.\n   * Returns a Promise that will resolve with either the hash\n   * or null if an error occurred. Will not reject.\n   *\n   * <iq xmlns='jabber:client'\n   *   to='1_4@chat.devvm.hipchat.com/web||proxy|devvm.hipchat.com|5222'\n   *   type='result'\n   *   id='551ac781-4175-44a1-9fad-f5d5396b2244:sendIQ'>\n   *     <query xmlns='http://hipchat.com/protocol/users#hash'>4118399e0e44423d602c8a804dddd672</query>\n   * </iq>\n   *\n   * @method getResourceHash\n   * @param {string} resource - 'roster' or 'rooms-wo-archived'\n   * @returns {Promise<hash|null>}\n   */\n  getResourceHash(resource) {\n    let xmlns = resource === DALCache.Keys.ROSTER ? Strophe.NS.HC_ROSTER_HASH : Strophe.NS.HC_ROOMS_HASH,\n      type = 'get',\n      use_full_list = true,\n      stanza = $iq({ type }).c('query', { xmlns, use_full_list });\n\n    return new Promise((resolve) => {\n      let success = function (xmpp) {\n        let query = xmpp.getElementsByTagNameNS(xmlns, 'query')[0];\n        resolve(query ? query.textContent.trim() : null);\n      };\n\n      let error = function () {\n        resolve(null);\n      };\n\n      this.Connection.sendIQ(stanza.tree(), success, error);\n    });\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/xmpp/plugins/cache_plugin.js\n **/","var md5 = require('blueimp-md5');\n\n/**\n * Serializes the given list of `users`. The serialization logic is:\n * - Sort users on the uniqueId portion of the JID\n * - Map each user to \"<user_id>:<version>\"\n * - Join with commas\n *\n * @param {array} users The users to serialize\n * @returns {string} The serialized users string\n */\nlet serialize = (items) => {\n  var list = items.concat()\n    .filter((item) => 'id' in item && 'version' in item)\n    .sort((a, b) => {\n      var aId = Number(a.id),\n      bId = Number(b.id);\n\n      if (aId < bId) {\n        return -1;\n      } else if (bId < aId) {\n        return 1;\n      }\n      return 0;\n    })\n    .map((item) => `${item.id}:${item.version}`);\n\n  return list.join(',');\n};\n\n/**\n * Serializes and hashes the given list of `users`.\n *\n * @param {array} users The users to hash\n * @returns {string} The hashed users string\n */\nlet create = (items) => {\n  if (!Array.isArray(items)) {\n    return '';\n  }\n  return md5(serialize(items));\n};\n\nmodule.exports = {\n  create,\n  serialize\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/common/hash.js\n **/","/*\n * JavaScript MD5 1.0.1\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n * \n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/*jslint bitwise: true */\n/*global unescape, define */\n\n(function ($) {\n    'use strict';\n\n    /*\n    * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n    * to work around bugs in some JS interpreters.\n    */\n    function safe_add(x, y) {\n        var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n            msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n        return (msw << 16) | (lsw & 0xFFFF);\n    }\n\n    /*\n    * Bitwise rotate a 32-bit number to the left.\n    */\n    function bit_rol(num, cnt) {\n        return (num << cnt) | (num >>> (32 - cnt));\n    }\n\n    /*\n    * These functions implement the four basic operations the algorithm uses.\n    */\n    function md5_cmn(q, a, b, x, s, t) {\n        return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n    }\n    function md5_ff(a, b, c, d, x, s, t) {\n        return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n    }\n    function md5_gg(a, b, c, d, x, s, t) {\n        return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n    }\n    function md5_hh(a, b, c, d, x, s, t) {\n        return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n    }\n    function md5_ii(a, b, c, d, x, s, t) {\n        return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n    }\n\n    /*\n    * Calculate the MD5 of an array of little-endian words, and a bit length.\n    */\n    function binl_md5(x, len) {\n        /* append padding */\n        x[len >> 5] |= 0x80 << (len % 32);\n        x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n        var i, olda, oldb, oldc, oldd,\n            a =  1732584193,\n            b = -271733879,\n            c = -1732584194,\n            d =  271733878;\n\n        for (i = 0; i < x.length; i += 16) {\n            olda = a;\n            oldb = b;\n            oldc = c;\n            oldd = d;\n\n            a = md5_ff(a, b, c, d, x[i],       7, -680876936);\n            d = md5_ff(d, a, b, c, x[i +  1], 12, -389564586);\n            c = md5_ff(c, d, a, b, x[i +  2], 17,  606105819);\n            b = md5_ff(b, c, d, a, x[i +  3], 22, -1044525330);\n            a = md5_ff(a, b, c, d, x[i +  4],  7, -176418897);\n            d = md5_ff(d, a, b, c, x[i +  5], 12,  1200080426);\n            c = md5_ff(c, d, a, b, x[i +  6], 17, -1473231341);\n            b = md5_ff(b, c, d, a, x[i +  7], 22, -45705983);\n            a = md5_ff(a, b, c, d, x[i +  8],  7,  1770035416);\n            d = md5_ff(d, a, b, c, x[i +  9], 12, -1958414417);\n            c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\n            b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\n            a = md5_ff(a, b, c, d, x[i + 12],  7,  1804603682);\n            d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\n            c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\n            b = md5_ff(b, c, d, a, x[i + 15], 22,  1236535329);\n\n            a = md5_gg(a, b, c, d, x[i +  1],  5, -165796510);\n            d = md5_gg(d, a, b, c, x[i +  6],  9, -1069501632);\n            c = md5_gg(c, d, a, b, x[i + 11], 14,  643717713);\n            b = md5_gg(b, c, d, a, x[i],      20, -373897302);\n            a = md5_gg(a, b, c, d, x[i +  5],  5, -701558691);\n            d = md5_gg(d, a, b, c, x[i + 10],  9,  38016083);\n            c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\n            b = md5_gg(b, c, d, a, x[i +  4], 20, -405537848);\n            a = md5_gg(a, b, c, d, x[i +  9],  5,  568446438);\n            d = md5_gg(d, a, b, c, x[i + 14],  9, -1019803690);\n            c = md5_gg(c, d, a, b, x[i +  3], 14, -187363961);\n            b = md5_gg(b, c, d, a, x[i +  8], 20,  1163531501);\n            a = md5_gg(a, b, c, d, x[i + 13],  5, -1444681467);\n            d = md5_gg(d, a, b, c, x[i +  2],  9, -51403784);\n            c = md5_gg(c, d, a, b, x[i +  7], 14,  1735328473);\n            b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n            a = md5_hh(a, b, c, d, x[i +  5],  4, -378558);\n            d = md5_hh(d, a, b, c, x[i +  8], 11, -2022574463);\n            c = md5_hh(c, d, a, b, x[i + 11], 16,  1839030562);\n            b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\n            a = md5_hh(a, b, c, d, x[i +  1],  4, -1530992060);\n            d = md5_hh(d, a, b, c, x[i +  4], 11,  1272893353);\n            c = md5_hh(c, d, a, b, x[i +  7], 16, -155497632);\n            b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\n            a = md5_hh(a, b, c, d, x[i + 13],  4,  681279174);\n            d = md5_hh(d, a, b, c, x[i],      11, -358537222);\n            c = md5_hh(c, d, a, b, x[i +  3], 16, -722521979);\n            b = md5_hh(b, c, d, a, x[i +  6], 23,  76029189);\n            a = md5_hh(a, b, c, d, x[i +  9],  4, -640364487);\n            d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\n            c = md5_hh(c, d, a, b, x[i + 15], 16,  530742520);\n            b = md5_hh(b, c, d, a, x[i +  2], 23, -995338651);\n\n            a = md5_ii(a, b, c, d, x[i],       6, -198630844);\n            d = md5_ii(d, a, b, c, x[i +  7], 10,  1126891415);\n            c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\n            b = md5_ii(b, c, d, a, x[i +  5], 21, -57434055);\n            a = md5_ii(a, b, c, d, x[i + 12],  6,  1700485571);\n            d = md5_ii(d, a, b, c, x[i +  3], 10, -1894986606);\n            c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\n            b = md5_ii(b, c, d, a, x[i +  1], 21, -2054922799);\n            a = md5_ii(a, b, c, d, x[i +  8],  6,  1873313359);\n            d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\n            c = md5_ii(c, d, a, b, x[i +  6], 15, -1560198380);\n            b = md5_ii(b, c, d, a, x[i + 13], 21,  1309151649);\n            a = md5_ii(a, b, c, d, x[i +  4],  6, -145523070);\n            d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\n            c = md5_ii(c, d, a, b, x[i +  2], 15,  718787259);\n            b = md5_ii(b, c, d, a, x[i +  9], 21, -343485551);\n\n            a = safe_add(a, olda);\n            b = safe_add(b, oldb);\n            c = safe_add(c, oldc);\n            d = safe_add(d, oldd);\n        }\n        return [a, b, c, d];\n    }\n\n    /*\n    * Convert an array of little-endian words to a string\n    */\n    function binl2rstr(input) {\n        var i,\n            output = '';\n        for (i = 0; i < input.length * 32; i += 8) {\n            output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\n        }\n        return output;\n    }\n\n    /*\n    * Convert a raw string to an array of little-endian words\n    * Characters >255 have their high-byte silently ignored.\n    */\n    function rstr2binl(input) {\n        var i,\n            output = [];\n        output[(input.length >> 2) - 1] = undefined;\n        for (i = 0; i < output.length; i += 1) {\n            output[i] = 0;\n        }\n        for (i = 0; i < input.length * 8; i += 8) {\n            output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\n        }\n        return output;\n    }\n\n    /*\n    * Calculate the MD5 of a raw string\n    */\n    function rstr_md5(s) {\n        return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n    }\n\n    /*\n    * Calculate the HMAC-MD5, of a key and some data (raw strings)\n    */\n    function rstr_hmac_md5(key, data) {\n        var i,\n            bkey = rstr2binl(key),\n            ipad = [],\n            opad = [],\n            hash;\n        ipad[15] = opad[15] = undefined;\n        if (bkey.length > 16) {\n            bkey = binl_md5(bkey, key.length * 8);\n        }\n        for (i = 0; i < 16; i += 1) {\n            ipad[i] = bkey[i] ^ 0x36363636;\n            opad[i] = bkey[i] ^ 0x5C5C5C5C;\n        }\n        hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n        return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n    }\n\n    /*\n    * Convert a raw string to a hex string\n    */\n    function rstr2hex(input) {\n        var hex_tab = '0123456789abcdef',\n            output = '',\n            x,\n            i;\n        for (i = 0; i < input.length; i += 1) {\n            x = input.charCodeAt(i);\n            output += hex_tab.charAt((x >>> 4) & 0x0F) +\n                hex_tab.charAt(x & 0x0F);\n        }\n        return output;\n    }\n\n    /*\n    * Encode a string as utf-8\n    */\n    function str2rstr_utf8(input) {\n        return unescape(encodeURIComponent(input));\n    }\n\n    /*\n    * Take string arguments and return either raw or hex encoded strings\n    */\n    function raw_md5(s) {\n        return rstr_md5(str2rstr_utf8(s));\n    }\n    function hex_md5(s) {\n        return rstr2hex(raw_md5(s));\n    }\n    function raw_hmac_md5(k, d) {\n        return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\n    }\n    function hex_hmac_md5(k, d) {\n        return rstr2hex(raw_hmac_md5(k, d));\n    }\n\n    function md5(string, key, raw) {\n        if (!key) {\n            if (!raw) {\n                return hex_md5(string);\n            }\n            return raw_md5(string);\n        }\n        if (!raw) {\n            return hex_hmac_md5(key, string);\n        }\n        return raw_hmac_md5(key, string);\n    }\n\n    if (typeof define === 'function' && define.amd) {\n        define(function () {\n            return md5;\n        });\n    } else {\n        $.md5 = md5;\n    }\n}(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/blueimp-md5/js/md5.js\n ** module id = 231\n ** module chunks = 0\n **/","import ReadStateRequest from './readstate_request';\nimport ReadStateError from './readstate_error';\nimport ConfigStore from 'stores/configuration_store';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\nimport * as Constants from 'core/common/constants';\nimport DALCache from 'core/dal.cache';\n\n\nclass ReadState {\n\n  constructor(config = {}) {\n    this.request = new ReadStateRequest();\n\n    // set this to a valid log level to enable logging\n    this.logLevel = null;\n\n    this.queued = false;\n    this.waiting = false;\n    this.disabled = false;\n    this.fetched = false;\n\n    this.timer = null;\n    this.backoff = Constants.READSTATE_DEFAULT_BACKOFF;\n    this.retryCount = 0;\n    this.api_token = null;\n\n    this.fetchCallback = config.fetchCallback || _.noop;\n    this.patchCallback = config.patchCallback || _.noop;\n\n    this.state = {\n      server: null,\n      client: {},\n      inflight: {}\n    };\n\n    this.debouncedPatch = _.debounce(this.tryPatch, Constants.READSTATE_UPDATE_DEBOUNCE).bind(this);\n  }\n\n  log(){\n    if (logger.levels.indexOf(this.logLevel) !== -1) {\n      logger[this.logLevel].apply(logger, arguments);\n    }\n  }\n\n  loadStorage() {\n    this.log('[ReadState] loadStorage');\n    return DALCache.get(DALCache.Keys.READSTATE).then((storedClientState) => {\n      if (_.isPlainObject(storedClientState) && !_.isEmpty(storedClientState)) {\n        this.state.client = storedClientState;\n        DALCache.unset(DALCache.Keys.READSTATE);\n        this.queued = true;\n      }\n    });\n  }\n\n  fetch() {\n    this.log('[ReadState] fetch');\n\n    this.clearTimer();\n\n    this.state.server = null;\n    this.fetched = false;\n    this.tryFetch();\n  }\n\n  update(data) {\n    if (!utils.jid.is_chat(data.jid)) { return false; }\n    this.log('[ReadState] update', data);\n\n    this.state.client[data.jid] = {\n      op: 'add',\n      mid: data.mid,\n      timestamp: data.timestamp\n    };\n    DALCache.set(DALCache.Keys.READSTATE, this.state.client);\n\n    if (this.fetched) {\n      this.debouncedPatch();\n    }\n  }\n\n  remove(data) {\n    if (!utils.jid.is_chat(data.jid)) { return false; }\n    this.log('[ReadState] remove', data);\n\n    this.state.client[data.jid] = {\n      op: 'remove'\n    };\n    DALCache.set(DALCache.Keys.READSTATE, this.state.client);\n\n    if (this.fetched) {\n      this.debouncedPatch();\n    }\n  }\n\n  retry() {\n    this.log('[ReadState] retry');\n\n    this.disabled = false;\n    this.dequeue();\n  }\n\n  reset() {\n    this.log('[ReadState] reset');\n\n    this.clearTimer();\n\n    this.queued = false;\n    this.state.client = {};\n    DALCache.unset(DALCache.Keys.READSTATE);\n  }\n\n  tryFetch() {\n    this.log('[ReadState] tryFetch');\n\n    if (!NetworkStatusHelper.isOnline()) {\n      this.log('[ReadState] Aborting fetch', { 'isOnline': NetworkStatusHelper.isOnline() });\n      this.fetchCallback(ReadStateError.OFFLINE, null);\n      this.enqueue(this.backoff);\n      return;\n\n    } else if (this.waiting) {\n      this.log('[ReadState] Aborting fetch', { 'waiting': this.waiting });\n      return;\n    }\n\n    this.waiting = true;\n    this.disabled = false;\n\n    this.api_token = ConfigStore.get('oauth_token');\n\n    if (this.queued) {\n      this.request.get(this.handleRefetchResponse.bind(this), false);\n    } else {\n      this.request.get(this.handleGetResponse.bind(this), true);\n    }\n  }\n\n  tryPatch() {\n    this.log('[ReadState] tryPatch');\n\n    if (!NetworkStatusHelper.isOnline()){\n      this.log('[ReadState] Aborting patch', { 'isOnline': NetworkStatusHelper.isOnline() });\n      this.patchCallback(ReadStateError.OFFLINE, null);\n      return;\n\n    } else if (this.waiting){\n      this.log('[ReadState] Aborting patch', { 'waiting': this.waiting });\n      this.queued = true;\n      return;\n\n    } else if (!this.state.server) {\n      this.log('[ReadState] Aborting patch', { 'serverState': this.state.server });\n      this.queued = true;\n      this.fetch();\n      return;\n\n    } else if (this.disabled) {\n      this.log('[ReadState] Aborting patch', { 'disabled': this.disabled });\n      return;\n    }\n\n    this.patch(this.state.client);\n  }\n\n  patch(data, withCounts = false) {\n    var patch_data = this.buildPatchBody(data);\n\n    if (patch_data.length === 0) {\n      this.log('[ReadState] Aborting patch', {\n        'patch_data': patch_data,\n        'withCounts': withCounts\n      });\n      this.queued = false;\n      if (withCounts) {\n        this.fetch();\n        this.waiting = true;\n      }\n      return;\n    }\n\n    this.log('[ReadState] Sending patch data', patch_data);\n\n    this.waiting = true;\n    this.queued = false;\n\n    this.api_token = ConfigStore.get('oauth_token');\n\n    DALCache.unset(DALCache.Keys.READSTATE);\n    this.state.inflight = _.clone(data);\n    this.state.client = {};\n\n    this.request.patch(patch_data, this.handlePatchResponse.bind(this), withCounts);\n  }\n\n  buildPatchBody(state) {\n    var body = [];\n\n    _.forOwn(state, (val, key) => {\n      let obj = {\n            op: val.op,\n            path: '/' + key\n          };\n\n      if (val.op === 'add') {\n        obj.value = {\n          mid: val.mid || Constants.READSTATE_NULL_MID,\n          timestamp: val.timestamp ? val.timestamp.toFixed(6) : Constants.READSTATE_NULL_TS\n        };\n      }\n\n      let server_ts = _.get(this.state.server[key], 'timestamp', 0);\n      if (val.op === 'remove' || !server_ts || (val.timestamp && server_ts < val.timestamp)) {\n        body.push(obj);\n      }\n    });\n\n    return body;\n  }\n\n  handleResponse(err, res) {\n    this.disabled = false;\n    this.waiting = false;\n\n    this.handleError(err);\n    this.updateBackoffInterval(res, err);\n    this.handleBackoff();\n  }\n\n  handleError(err) {\n    if (!err) {\n      this.retryCount = 0;\n      return false;\n    }\n\n    this.queued = true;\n\n    let errorHandlers = {\n          [ReadStateError.UNAUTHORIZED]: () => {\n            this.disabled = true;\n            if (this.api_token !== ConfigStore.get('oauth_token')) {\n              this.retry();\n            } else {\n              ConfigStore.once('change:oauth_token', this.retry.bind(this));\n            }\n          },\n          [ReadStateError.BAD_REQUEST]: () => {\n            this.disabled = true;\n            this.reset();\n          },\n          [ReadStateError.DISABLED]: () => {\n            this.disabled = true;\n          },\n          [ReadStateError.RATE_LIMITED]: () => {\n            this.retryCount++;\n          },\n          [ReadStateError.UNAVAILABLE]: () => {\n            this.retryCount++;\n          }\n        };\n\n    if (errorHandlers[err]) {\n      this.log('[ReadState] handleError: %s', err);\n      errorHandlers[err]();\n    }\n  }\n\n  handleServerData(body) {\n    body = (body && Array.isArray(body.items)) ? body.items : [];\n    this.resetServerState(body);\n    this.fetched = true;\n    return body;\n  }\n\n  handleGetResponse(err, body, res) {\n    var data = null;\n\n    this.handleResponse(err, res);\n    if (!err) {\n      data = this.handleServerData(body);\n    }\n    this.fetchCallback(err, data);\n  }\n\n  handleRefetchResponse(err, body, res) {\n    this.handleResponse(err, res);\n\n    if (err) {\n      return this.fetchCallback(err, null);\n    }\n\n    this.handleServerData(body);\n    this.patch(this.state.client, true);\n  }\n\n  handlePatchResponse(err, body, res) {\n    this.handleResponse(err, res);\n\n    if (err) {\n      this.reapplyInflightData();\n    } else {\n      this.updateServerState();\n    }\n\n    if (body) {\n      var data = this.handleServerData(body);\n      this.fetchCallback(err, data);\n    }\n\n    this.patchCallback(err, body);\n  }\n\n  updateBackoffInterval(res, err) {\n    var backoff = res.backoff ? res.backoff * 1000 : 0;\n\n    if (err === ReadStateError.RATE_LIMITED) {\n      backoff = this.handleRateLimitReset(res.rateLimitReset, res.serverTime, backoff);\n\n    } else if (err === ReadStateError.UNAVAILABLE) {\n      backoff = this.jitterBackoff(backoff);\n      backoff = Math.min(backoff, Constants.READSTATE_MAX_BACKOFF);\n    }\n\n    if (backoff && backoff !== this.backoff) {\n      this.log('[ReadState] Changing backoff interval. New value: %s', backoff);\n      this.backoff = backoff;\n    }\n  }\n\n  handleRateLimitReset(resetTime, serverTime, backoff) {\n    var nowTime = serverTime ? serverTime : Date.now(),\n        diff = (resetTime + 5) - nowTime;\n\n    return diff > 0 ? diff * 1000 : this.jitterBackoff(backoff);\n  }\n\n  jitterBackoff(backoff) {\n    var max = Constants.READSTATE_MAX_BACKOFF,\n        base = Constants.READSTATE_DEFAULT_BACKOFF,\n        factor = Constants.READSTATE_BACKOFF_FACTOR;\n\n    return utils.decorrelatedJitter(max, backoff || base, this.backoff, factor);\n  }\n\n  handleBackoff() {\n    this.log('[ReadState] handleBackoff', {\n      backoff: this.backoff,\n      disabled: this.disabled\n    });\n    this.clearTimer();\n    if (this.backoff && !this.disabled) {\n      this.enqueue(this.backoff);\n    }\n  }\n\n  enqueue(backoff) {\n    this.waiting = true;\n    this.timer = setTimeout(this.dequeue.bind(this), backoff);\n  }\n\n  dequeue() {\n    this.log('[ReadState] dequeue');\n    this.clearTimer();\n    if (!this.state.server || !this.fetched) {\n      this.fetch();\n    } else if (this.queued) {\n      this.queued = false;\n      this.tryPatch(false);\n    }\n  }\n\n  clearTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n      this.timer = null;\n      this.waiting = false;\n    }\n  }\n\n  resetServerState(data) {\n    this.state.server = {};\n\n    if (!Array.isArray(data)){\n      return;\n    }\n\n    data.forEach((chat) => {\n      if (chat.xmppJid){\n        this.state.server[chat.xmppJid] = {\n          mid: chat.mid,\n          timestamp: Number(chat.timestamp)\n        };\n      }\n    });\n  }\n\n  reapplyInflightData() {\n    _.forOwn(this.state.inflight, (val, key) => {\n      if (!this.state.client[key] || val.timestamp > this.state.client[key].timestamp) {\n        this.state.client[key] = val;\n      }\n    });\n\n    this.state.inflight = {};\n    DALCache.set(DALCache.Keys.READSTATE, this.state.client);\n  }\n\n  updateServerState() {\n    if (!this.state.server) {\n      this.state.server = {};\n    }\n\n    _.forOwn(this.state.inflight, (val, key) => {\n      if (this.state.server[key] && val.op === 'remove') {\n        delete this.state.server[key];\n      } else if (!this.state.server[key] || val.timestamp > Number(this.state.server[key].timestamp)) {\n        this.state.server[key] = val;\n      }\n    });\n\n    this.state.inflight = {};\n  }\n\n}\n\nexport default ReadState;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/readstate/index.js\n **/","import ReadStateError from './readstate_error';\nimport ConfigStore from 'stores/configuration_store';\nimport logger from 'helpers/logger';\nimport moment from 'moment';\n\nclass ReadStateRequest {\n\n  /**\n   * Handles making the various API requests for readstate.\n   * @param {String} HTTP request method\n   * @param {String} API request URL\n   * @param {Object|null} request body\n   * @param {Function} callback function\n   * @param {Object} XMLHttpRequest object (not used, passed-in to facilitate testing)\n   * @return {Object} XMLHttpRequest object\n   */\n  request(method, url, data = null, callback = ()=>{}, xhr = new XMLHttpRequest()) {\n    if (!method || !url) { return; }\n\n    var handler = (evt) => {\n          var req = evt.target,\n              { err, body, res } = this.handleResponse(req);\n\n          if (typeof callback === 'function') {\n            callback(err, body, res);\n          }\n        };\n\n    xhr.open(method, url);\n    xhr.setRequestHeader('Authorization', 'Bearer ' + ConfigStore.getOAuthToken());\n    xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n\n    if (method.toUpperCase() === 'PATCH') {\n      xhr.setRequestHeader('Content-Type', 'application/json-patch+json');\n    } else {\n      xhr.setRequestHeader('Content-Type', 'application/json');\n    }\n\n    xhr.addEventListener('load', handler);\n    xhr.addEventListener('error', handler);\n    xhr.addEventListener('abort', handler);\n    xhr.addEventListener('timeout', handler);\n\n    if (data) {\n      data = JSON.stringify(data);\n    }\n\n    xhr.send(data);\n    return xhr;\n  }\n\n  getUrl(withCounts) {\n    var host = ConfigStore.get('api_host'),\n        query = withCounts ? '?expand=items.unreadCount' : '';\n\n    return `https://${host}/v2/readstate${query}`;\n  }\n\n  /**\n   * Gets the user's readstate data from the Coral v2 API.\n   * @param {Function} callback function\n   * @param {Boolean} return unread counts\n   * @return {Object} XMLHttpRequest object\n   */\n  get(callback, withCounts = true) {\n    var url = this.getUrl(withCounts);\n    logger.log('[ReadStateRequest] Initiating get request', url);\n    return this.request('GET', url, null, callback);\n  }\n\n  /**\n   * Updates the user's readstate data in the Coral v2 API.\n   * @param {Object} readstate patch object\n   * @param {Function} callback function\n   * @param {Boolean} return unread counts\n   * @return {Object} XMLHttpRequest object\n   */\n  patch(data, callback, withCounts = false) {\n    var url = this.getUrl(withCounts);\n    return this.request('PATCH', url, data, callback);\n  }\n\n  /**\n   * Processes the `xhr`'s status and response. Returns an object\n   * with `err` and `body` properties which are populated as needed.\n   * @param {Object} XMLHttpRequest object\n   * @return { err: String, body: Object|null, res: Object }\n   */\n  handleResponse(xhr) {\n    let err = ReadStateError.handleRequestErrors(xhr.status),\n        serverDate = xhr.getResponseHeader('Date'),\n        serverFormat = 'ddd, D MMM YYYY H:mm:ss',\n        res = {\n          status: xhr.status,\n          backoff: xhr.getResponseHeader('X-Backoff'),\n          rateLimitReset: Number(xhr.getResponseHeader('X-RateLimit-Reset')),\n          serverTime: serverDate ? Number(moment.utc(serverDate, serverFormat).unix()) : null\n        },\n        body;\n\n    // Response may not be valid JSON\n    try {\n      body = JSON.parse(xhr.responseText);\n    } catch (e) {\n      body = null;\n    }\n\n    return { err, body, res };\n  }\n}\n\nexport default ReadStateRequest;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/readstate/readstate_request.js\n **/","\nlet ReadStateError = {\n\n  // The browser or native wrapper is (or at least think it is) offline.\n  OFFLINE: 'offline',\n\n  // HTTP 401 - User is not authorized to make requests to the API.\n  // The client should retry the request once a new oauth token is received.\n  UNAUTHORIZED: 'unauthorized',\n\n  // HTTP 404 - The readstate feature is not enabled for the user's group.\n  // The client should stop trying to update readstate until reconnect.\n  DISABLED: 'disabled',\n\n  // HTTP 429 - The client has made too many API requests in a set timeframe.\n  // The client should schedule a retry for when the rate limit gets reset.\n  RATE_LIMITED: 'rateLimited',\n\n  // HTTP 4XX - The client is making a bad request.\n  // The client is attempting to send data that does not conform to the\n  // server spec, and should stop trying to update readstate.\n  BAD_REQUEST: 'badRequest',\n\n  // HTTP 0 - Request was unsuccessful because the request timed out or\n  // because the browser might be offline.\n  // HTTP 5XX - Server is not accepting readstate updates at this time.\n  // This may be due to too much load. So the client should continue\n  // to retry this request, but backoff up to a maximum.\n  UNAVAILABLE: 'unavailable',\n\n\n  handleRequestErrors(status) {\n    var err = null;\n\n    if (status === 401) {\n      return ReadStateError.UNAUTHORIZED;\n    } else if (status === 404) {\n      return ReadStateError.DISABLED;\n    } else if (status === 429) {\n      return ReadStateError.RATE_LIMITED;\n    } else if (status >= 400 && status < 500) {\n      return ReadStateError.BAD_REQUEST;\n    } else if (!status || status >= 500) {\n      return ReadStateError.UNAVAILABLE;\n    }\n\n    return err;\n  }\n\n};\n\nexport default ReadStateError;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/readstate/readstate_error.js\n **/","/*global escape*/\nimport fileUploader from './uploader';\nimport ConfigStore from 'stores/configuration_store';\nimport logger from 'helpers/logger';\nimport version_info from '../../../app/version-info.json';\nimport utils from 'helpers/utils';\nimport URITemplate from 'helpers/uri_template';\n\nconst MAX_URL_LENGTH = 2048;\nconst CONNECT_API_VERSION = version_info.connect_api_version;\n\nclass HCApiClient {\n\n  constructor() {\n    this.room = {\n\n      /**\n       * @deprecated\n       */\n      recent_history: (data, callback) => {\n        this.request('GET', `room/${data.path.identifier}/history/latest`, data.params, callback);\n      },\n\n      /**\n       * Looks to be unused\n       * @deprecated\n       */\n      invite_users: (data, callback) => {\n        this.request('POST', `room/${data.path.identifier}/invite/${data.user_id}`, data.params, callback);\n      },\n\n      /**\n       * @deprecated\n       */\n      update_room: (data, callback) => {\n        this.request('PUT', `room/${data.path.identifier}`, data.params, callback, true);\n      },\n\n      /**\n       * @deprecated\n       */\n      share_file: (data) => {\n        data.params.token = ConfigStore.getOAuthToken();\n        return fileUploader.uploadFile(this.getUrl(`room/${data.path.identifier}/share/file`), data.params);\n      }\n    };\n\n    this.user = {\n\n      /**\n       * @deprecated\n       */\n      recent_history: (data, callback) => {\n        this.request('GET', `user/${data.path.identifier}/history/latest`, data.params, callback);\n      },\n\n      /**\n       * @deprecated\n       */\n      share_file: (data) => {\n        data.params.token = ConfigStore.getOAuthToken();\n        return fileUploader.uploadFile(this.getUrl(`user/${data.path.identifier}/share/file`), data.params);\n      },\n\n      /**\n       * @deprecated\n       */\n      send_private_message: (data) => {\n        this.request('POST', `user/${data.path.identifier}/message`, data.params, _.noop, true);\n      }\n    };\n\n    this.integrations = {\n\n      /**\n       * @deprecated\n       */\n      sync: (data, callback) => {\n\n        function createSyncBody(integrations, room_ids) {\n          let req = {\n            'knownIntegrations': {},\n            'connectApiVersion': CONNECT_API_VERSION\n          };\n\n          _.each(room_ids || [], (room_id) => {\n            req.knownIntegrations[room_id] = {};\n          });\n\n          // for each room\n          _.each(integrations, (addons, roomId) => {\n            // Only sync rooms we are actually wanting to sync, not for all rooms in store\n            if (!_.includes(room_ids, roomId)) { return; }\n\n            req.knownIntegrations[roomId] = {};\n\n            // for each add-on in the room\n            _.each(addons, (addon) => {\n              req.knownIntegrations[roomId][addon.addon_key] = addon.version;\n            });\n          });\n          return req;\n        }\n\n        let str_room_ids = _.map(data.room_ids, room_id => String(room_id));\n        let body = createSyncBody(data.integrations, str_room_ids);\n\n        this.request('POST', 'addon/sync', body, callback, true);\n      },\n\n      /**\n       * @deprecated\n       */\n      getSignedUrl: (requestData, parameters, callback) => {\n        this.integrations._signedUrl(requestData, parameters, callback);\n      },\n\n      /**\n       * @deprecated\n       */\n      requestWithSignedUrl: (requestData, parameters, callback) => {\n        this.integrations._signedUrl(requestData, parameters, (data, result) => {\n          let location = data ? data.location : null;\n          if (!location) {\n            callback(data, result);\n          } else {\n            location = utils.addConnectApiVersionToUrl(location);\n            this.requestUrl('GET', location, null, null, callback, null, data.timeout);\n          }\n        });\n      },\n\n      fetchAllGlancesForRoom: (requestData, callback) => {\n        let resultPromise = new Promise((resolve, reject) => {\n          this.integrations._allSignedGlances(requestData, (data, result) => {\n            if (!data || data.error || result.status >= 300) {\n              let error = (data && data.error) ? data.error : `(status code: ${result.status})`;\n              reject(error);\n            } else {\n              let promises = _.map(data, (glance_result, key) => {\n                let promise = new Promise((mapResolve, mapReject) => {\n                  if (!glance_result.success) {\n                    logger.warn('[HC-Integrations]', `Failed to fetch signed url for Glance ${key}`);\n                    let path = null;\n                    mapResolve({path, data, result});\n                  } else {\n                    let glance_url = utils.addConnectApiVersionToUrl(glance_result['url']);\n                    this.requestUrl('GET', glance_url, null, null, (req_data, req_result) => {\n                      mapResolve({\n                        path: glance_url,\n                        data: req_data,\n                        result: req_result\n                      });\n                    });\n                  }\n                });\n                return {promise, key};\n              });\n\n              resolve(promises);\n            }\n          });\n        });\n\n        callback(resultPromise);\n      },\n\n      _signedUrl: (data, parameters, callback) => {\n        let ext = data.extension;\n        let attribute = data.attribute || \"url\";\n\n        let usedParameters = {};\n        let url = data.extension[attribute];\n        if (url) {\n          let template = new URITemplate(url);\n          usedParameters = template.getTemplateValuesFromParameters(parameters);\n        }\n\n        let mod_type = `${attribute}@${ext.type}`;\n        let path = `addon/signed-url/${data.room_id}/${ext.addon_key}/${mod_type}/${ext.key}/${ext.addon_timestamp}`;\n        this.request('GET', path, usedParameters, callback, null, data.timeout);\n      },\n\n      _allSignedGlances: (data, callback) => {\n        this.request('GET', `addon/signed-urls/${data.room_id}/glances`, {}, callback, null, data.timeout);\n      }\n    };\n  }\n\n  getAPIRoot() {\n    var api_host = ConfigStore.get('api_host');\n    return `https://${api_host}/v2/`;\n  }\n\n  url(url_path, data) {\n    /**\n     * A UTF-8 compatible version of deprecated encode\n     */\n    function encodePath(path_to_encode){\n      var newPath = \"\",\n      additionallyEncode = ['?','&'];\n\n      if(typeof path_to_encode === \"string\"){\n        newPath = encodeURI(path_to_encode);\n        additionallyEncode.forEach((charToEncode) => {\n          newPath = newPath.replace(new RegExp('\\\\' + charToEncode, 'g'), encodeURIComponent(charToEncode));\n        });\n        return newPath;\n      }\n    }\n\n    var url = this.getAPIRoot() + encodePath(url_path),\n        values = [],\n        queryString = function (query) {\n          for (var key in query) {\n            if (query[key]) {\n              values.push(encodeURIComponent(key) + '=' + encodeURIComponent(query[key]));\n            }\n          }\n          return values.length ? '?' + values.join('&') : '';\n        };\n\n    if (!data) {\n      return url;\n    } else if (typeof data === 'object') {\n      data = _.omitBy(data, (val) => { return !val; });\n      return url + queryString(data);\n    }\n  }\n\n  getUrl(path, payload, postJSON) {\n    if (postJSON) {\n      return this.url(path);\n    }\n    return this.url(path, payload);\n  }\n\n  request(method, path, payload, callback, postJSON, timeout) {\n    let url = this.getUrl(path, payload, postJSON);\n    if (url.length > MAX_URL_LENGTH) {\n      logger.warn(`Unsafe URL length (${url.length}): ${url}`);\n    }\n    this.requestUrl(method, url, ConfigStore.getOAuthToken(), payload, callback, postJSON, timeout);\n  }\n\n  requestUrl(method, url, token, payload, callback, postJSON, timeout) {\n    var options = {\n          url: url,\n          type: method\n        };\n\n    if (timeout) {\n      options[\"timeout\"] = timeout;\n    }\n\n    if (postJSON) {\n      options[\"contentType\"] = \"application/json\";\n      options[\"data\"] = JSON.stringify(payload);\n    }\n\n    if (token) {\n      options[\"beforeSend\"] = (request) => {\n        request.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      };\n    }\n\n    $.ajax(options)\n      .done((data, textStatus, jqXHR) => {\n       this.handleResponse(jqXHR, callback);\n      })\n      .fail((jqXHR) => {\n        this.handleResponse(jqXHR, callback);\n      });\n  }\n\n  handleResponse(xhr, callback) {\n    var response = xhr.responseText;\n    if (_.isString(response) && response !== \"\") {\n      try {\n        response = JSON.parse(response);\n      } catch (e) {\n        response = {\n          error: e\n        };\n      }\n    }\n    callback(response, xhr);\n  }\n}\n\nexport default new HCApiClient();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/apiv2/apiV2.js\n **/","import utf8 from 'utf8';\nimport logger from 'helpers/logger';\nimport { EventEmitter } from 'events';\n\nexport default {\n\n  /**\n   * Returns a promise that will resolve with the given `file`'s contents\n   *\n   * @param {string} file The path to the file to read\n   * @returns {Promise} A promise that will be resolved/rejected based on the outcome of the the read.\n   */\n  _readFile(file) {\n    return new Promise((resolve, reject) => {\n      let reader = new FileReader();\n\n      reader.onloadend = () => {\n        if (reader.error) {\n          reject(reader.error);\n        } else {\n          resolve(reader.result);\n        }\n\n        reader.onloadend = null; // Cleanup\n      };\n\n      reader.readAsArrayBuffer(file);\n    });\n  },\n\n  /**\n   * Builds the contents of a file message for multi-part XHR upload\n   *\n   * @param {ArrayBuffer} config.fileContent The content for the request body\n   * @param {string} config.fileType The MIME type for the file to upload\n   * @param {string} config.fileName The name of the file to upload\n   * @param {string} config.message The message content\n   * @param {string} boundary The boundary string for separating the parts of the requeset body\n   * @returns {Blob} A blob of the message and file, in the multi-part format\n   */\n  _getRequestBody({fileContent, fileType, fileName, message}, boundary) {\n    let data = new Uint8Array(fileContent), // Wrap in view to get data\n        type = (fileType === 'application/json') ? 'text/plain' : fileType, // with new API request can't contains two application/json parts.\n        before = utf8.encode([\n          `--${boundary}`,\n          '\\r\\n',\n          'Content-Type: application/json; charset=UTF-8',\n          '\\r\\n',\n          'Content-Disposition: attachment; name=\"metadata\"',\n          '\\r\\n\\r\\n',\n          JSON.stringify({message: message}),\n          '\\r\\n',\n          `--${boundary}`,\n          '\\r\\n',\n          `Content-Type: ${type}`,\n          '\\r\\n',\n          `Content-Disposition: attachment; name=\"file\"; filename=\"${fileName}\"`,\n          '\\r\\n\\r\\n'\n        ].join('')),\n        after = `\\r\\n--${boundary}--`,\n        size = before.length + data.byteLength + after.length,\n        arrayBuffer = new ArrayBuffer(size),\n        uint8array = new Uint8Array(arrayBuffer, 0),\n        i = 0,\n        j = 0;\n\n    // Append the string.\n    for (; i < before.length; i++) {\n      uint8array[i] = before.charCodeAt(i) & 0xff;\n    }\n\n    // Append the binary data.\n    for (j = 0; j < data.byteLength; i++, j++) {\n      uint8array[i] = data[j];\n    }\n\n    // Append the remaining string\n    for (j = 0; j < after.length; i++, j++) {\n      uint8array[i] = after.charCodeAt(j) & 0xff;\n    }\n\n    return new Blob([arrayBuffer]);\n  },\n\n  /**\n   * Returns the appropriate event source for XHR uploads. This is a cross-browser\n   * solution to capturing 'progress' events.\n   *\n   * @param {XMLHttpRequest} xhr The XHR instance to normalize\n   * @returns {EventTarget} The appropriate target for 'progress' events\n   */\n  _getXHREventSource(xhr) {\n    return xhr.upload || xhr;\n  },\n\n  /**\n   * Listens for events on the given `xhr` and translates them to events on the\n   * given `emitter`.\n   *\n   * @param {XMLHttpRequest} xhr The XHR instance to listen on\n   * @param {EventEmitter} emitter The EventEmitter instance to dispatch from\n   */\n  _registerXHREvents(xhr, emitter) {\n    let eventSource = this._getXHREventSource(xhr),\n        cleanup,\n        onProgress,\n        onReadyStateChange,\n        onError;\n\n    onProgress = (e) => {\n      let position = e.position || e.loaded,\n          total = e.totalSize || e.total,\n          percentage = position / total;\n\n      emitter.emit('progress', percentage);\n    };\n\n    onReadyStateChange = () => {\n      if (xhr.readyState !== 4) {\n        return;\n      }\n\n      if (xhr.status === 204){\n        emitter.emit('success');\n      } else {\n        let error = {\n          code: xhr.status,\n          message: \"Unexpected error!\"\n        };\n\n        if (xhr.responseXML && xhr.responseXML.getElementsByTagName('error').length) {\n          error = xhr.responseXML.getElementsByTagName('error')[0].firstChild.nodeValue;\n        }\n\n        try {\n          let response = JSON.parse(xhr.response);\n          if (response.error){\n            error = response.error;\n          }\n        } catch (e) {\n          logger.error(e);\n        }\n\n        emitter.emit('error', error);\n      }\n\n      cleanup();\n    };\n\n    onError = (error) => {\n      emitter.emit('error', error);\n      cleanup();\n    };\n\n    cleanup = () => {\n      eventSource.removeEventListener('progress', onProgress);\n      xhr.removeEventListener('readystatechange', onReadyStateChange);\n      xhr.removeEventListener('error', onError);\n      xhr.blob = null;\n      emitter.emit('complete');\n    };\n\n    eventSource.addEventListener('progress', onProgress);\n    xhr.addEventListener('readystatechange', onReadyStateChange);\n    xhr.addEventListener('error', onError);\n  },\n\n  /**\n   * Creates and configures the XHR to post the file message to the API.\n   *\n   * @param {object} messageData\n   * @param {String} config.fileName The name of the file\n   * @param {String} config.fileType The MIME type of the file\n   * @param {ArrayBuffer} config.fileContent The result of reading the file via FileReader::readAsArrayBuffer\n   * @param {String} config.message The message to be sent with the file\n   * @param {object} requestData\n   * @param {String} requestData.boundary The boundary delimiter for the multi-part request\n   * @param {String} requestData.token The API token to use for the request\n   * @param {String} conrequestDatafig.url The URL to post the request to\n   * @param {XMLHttpRequest} xhr The XHR instance to be sent\n   * @param {EventEmitter} emitter The EventEmitter to dispatch against\n   */\n  _sendRequest(messageData, requestData, xhr, emitter) {\n    xhr.open('POST', requestData.url, true);\n    xhr.setRequestHeader('Content-Type', `multipart/related; boundary=${requestData.boundary}; charset=UTF-8`);\n    xhr.setRequestHeader('Authorization', `Bearer ${requestData.token}`);\n    xhr.blob = this._getRequestBody(messageData, requestData.boundary);\n\n    this._registerXHREvents(xhr, emitter);\n\n    xhr.send(xhr.blob);\n  },\n\n  /**\n   * Uploads file with HipChat V2 API. Returns an EventEmitter that dispatches:\n   * - 'progress' : Fired as the XHR 'progress' event fires, passes along the percentage\n   *                of the file that has been uploaded\n   * - 'success'  : Fired if the upload is successful\n   * - 'error'    : Fired if the upload fails, passes along the error\n   * - 'complete' : Fired after the upload, whether it succeeded or failed\n   *\n   * @param {string} url Url for upload file\n   * @param {object} config Parameters\n   * @param {String} config.token Token for authorization\n   * @param {object} config.file File object\n   * @param {String} config.fileName File name\n   * @param {String} config.message Message sent with file\n   * @returns {EventEmitter} An emitter that dispatches events about the upload\n   */\n  uploadFile(url, {token, file, fileName, message}) {\n    let emitter = new EventEmitter(),\n        xhr = new XMLHttpRequest(),\n        boundary = `hcb_${Math.random().toString(36).substring(7)}`;\n\n    this._readFile(file)\n      .then((fileContent) => {\n        this._sendRequest({\n          fileContent,\n          fileName,\n          fileType: file.type,\n          message\n        }, {\n          boundary,\n          token,\n          url\n        }, xhr, emitter);\n      })\n      .catch(error => {\n        emitter.emit('error', error);\n        emitter.emit('complete');\n      });\n\n    return emitter;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/rest/apiv2/uploader.js\n **/","/*! https://mths.be/utf8js v2.0.0 by @mathias */\n;(function(root) {\n\n\t// Detect free variables `exports`\n\tvar freeExports = typeof exports == 'object' && exports;\n\n\t// Detect free variable `module`\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\n\t// Detect free variable `global`, from Node.js or Browserified code,\n\t// and use it as `root`\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar stringFromCharCode = String.fromCharCode;\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2decode(string) {\n\t\tvar output = [];\n\t\tvar counter = 0;\n\t\tvar length = string.length;\n\t\tvar value;\n\t\tvar extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// Taken from https://mths.be/punycode\n\tfunction ucs2encode(array) {\n\t\tvar length = array.length;\n\t\tvar index = -1;\n\t\tvar value;\n\t\tvar output = '';\n\t\twhile (++index < length) {\n\t\t\tvalue = array[index];\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t}\n\t\treturn output;\n\t}\n\n\tfunction checkScalarValue(codePoint) {\n\t\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t}\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction createByte(codePoint, shift) {\n\t\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n\t}\n\n\tfunction encodeCodePoint(codePoint) {\n\t\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\t\treturn stringFromCharCode(codePoint);\n\t\t}\n\t\tvar symbol = '';\n\t\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t\t}\n\t\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\t\tcheckScalarValue(codePoint);\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\t\tsymbol += createByte(codePoint, 12);\n\t\t\tsymbol += createByte(codePoint, 6);\n\t\t}\n\t\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\t\treturn symbol;\n\t}\n\n\tfunction utf8encode(string) {\n\t\tvar codePoints = ucs2decode(string);\n\t\tvar length = codePoints.length;\n\t\tvar index = -1;\n\t\tvar codePoint;\n\t\tvar byteString = '';\n\t\twhile (++index < length) {\n\t\t\tcodePoint = codePoints[index];\n\t\t\tbyteString += encodeCodePoint(codePoint);\n\t\t}\n\t\treturn byteString;\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tfunction readContinuationByte() {\n\t\tif (byteIndex >= byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\tif ((continuationByte & 0xC0) == 0x80) {\n\t\t\treturn continuationByte & 0x3F;\n\t\t}\n\n\t\t// If we end up here, it’s not a continuation byte\n\t\tthrow Error('Invalid continuation byte');\n\t}\n\n\tfunction decodeSymbol() {\n\t\tvar byte1;\n\t\tvar byte2;\n\t\tvar byte3;\n\t\tvar byte4;\n\t\tvar codePoint;\n\n\t\tif (byteIndex > byteCount) {\n\t\t\tthrow Error('Invalid byte index');\n\t\t}\n\n\t\tif (byteIndex == byteCount) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Read first byte\n\t\tbyte1 = byteArray[byteIndex] & 0xFF;\n\t\tbyteIndex++;\n\n\t\t// 1-byte sequence (no continuation bytes)\n\t\tif ((byte1 & 0x80) == 0) {\n\t\t\treturn byte1;\n\t\t}\n\n\t\t// 2-byte sequence\n\t\tif ((byte1 & 0xE0) == 0xC0) {\n\t\t\tvar byte2 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\t\tif (codePoint >= 0x80) {\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 3-byte sequence (may include unpaired surrogates)\n\t\tif ((byte1 & 0xF0) == 0xE0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\t\tif (codePoint >= 0x0800) {\n\t\t\t\tcheckScalarValue(codePoint);\n\t\t\t\treturn codePoint;\n\t\t\t} else {\n\t\t\t\tthrow Error('Invalid continuation byte');\n\t\t\t}\n\t\t}\n\n\t\t// 4-byte sequence\n\t\tif ((byte1 & 0xF8) == 0xF0) {\n\t\t\tbyte2 = readContinuationByte();\n\t\t\tbyte3 = readContinuationByte();\n\t\t\tbyte4 = readContinuationByte();\n\t\t\tcodePoint = ((byte1 & 0x0F) << 0x12) | (byte2 << 0x0C) |\n\t\t\t\t(byte3 << 0x06) | byte4;\n\t\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t\treturn codePoint;\n\t\t\t}\n\t\t}\n\n\t\tthrow Error('Invalid UTF-8 detected');\n\t}\n\n\tvar byteArray;\n\tvar byteCount;\n\tvar byteIndex;\n\tfunction utf8decode(byteString) {\n\t\tbyteArray = ucs2decode(byteString);\n\t\tbyteCount = byteArray.length;\n\t\tbyteIndex = 0;\n\t\tvar codePoints = [];\n\t\tvar tmp;\n\t\twhile ((tmp = decodeSymbol()) !== false) {\n\t\t\tcodePoints.push(tmp);\n\t\t}\n\t\treturn ucs2encode(codePoints);\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\tvar utf8 = {\n\t\t'version': '2.0.0',\n\t\t'encode': utf8encode,\n\t\t'decode': utf8decode\n\t};\n\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine(function() {\n\t\t\treturn utf8;\n\t\t});\n\t}\telse if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = utf8;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tvar object = {};\n\t\t\tvar hasOwnProperty = object.hasOwnProperty;\n\t\t\tfor (var key in utf8) {\n\t\t\t\thasOwnProperty.call(utf8, key) && (freeExports[key] = utf8[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.utf8 = utf8;\n\t}\n\n}(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/utf8/utf8.js\n ** module id = 237\n ** module chunks = 0\n **/","import DALSync from './dal.sync';\nimport User from './models/user';\nimport * as NS from './xmpp/lib/namespaces';\n\n/**\n * Dictionary object of User models keyed by their id\n * @typedef {Object.<string, User>} Roster\n */\n\n/**\n * XMPP representation of roster, as received by roster IQ and\n * parsed via x2js\n * @typedef {Object} XMPPRoster\n * @property {Object} iq\n * @property {Object} iq.query\n * @property {Array<User>} iq.query.item\n * @property {string} iq.query.xmlns - 'jabber:iq:roster'\n * @property {string} iq.xmlns - 'jabber:client'\n * @property {string} iq.type - 'result'\n */\n\n/**\n * @module DALUser\n */\nconst DALUser = {\n\n  /**\n   * Temporary method to get the roster in the expected structure of a\n   * \"download the world\" roster IQ XMPP request (ughh)\n   *\n   * @method getRosterAsXMPP\n   * @returns {Promise<XMPPRoster, DALError>}\n   */\n  getRosterAsXMPP() {\n    return this.getRoster().then((roster) => {\n      return {\n        iq: {\n          query: {\n            item: Object.keys(roster).map((id) => User.asX2JS(roster[id])),\n            xmlns: NS.ROSTER\n          },\n          type: 'result',\n          xmlns: NS.JABBER\n        }\n      };\n    });\n  },\n\n  /**\n   * Gets the entire roster by either syncing or downloading the list\n   * from the server.\n   *\n   * @method getRoster\n   * @returns {Promise<Roster, DALError>}\n   */\n  getRoster() {\n    return DALSync.getRoster();\n  }\n\n};\n\nexport default DALUser;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.user.js\n **/","import utils from 'helpers/utils';\nimport * as Constants from 'core/common/constants';\nimport ConnectionManager from './xmpp/connection_manager';\nimport REST from './rest/rest';\nimport DALCache from './dal.cache';\nimport DALError from './models/dal-error';\n\n/**\n * @module DALSync\n */\nconst DALSync = {\n\n  /**\n   * Gets the full roster. Will try to first sync\n   * @method getRoster\n   * @returns {Promise<Roster, DALError>}\n   */\n  getRoster() {\n    let syncRoster = (cached) => {\n      // Try to sync via Coral. If it fails, download the world via XMPP\n      return this._tryToSync(this._syncRosterViaREST.bind(this), cached)\n        .catch((err) => {\n          // console.error(err)\n          return this._syncRosterViaXMPP();\n        });\n    };\n\n    return DALCache.get(DALCache.Keys.ROSTER).then((cached) => {\n\n      // if it's been over 3 minutes, just go ahead and try to sync via Coral\n      if (!ConnectionManager.Connection.Cache.isReconnectedWithinSyncThreshold()) {\n        return syncRoster(cached);\n      }\n\n      // If it's been under 3 minutes, ask the server if our cached data is in sync.\n      // If so, resolve with the cache. Otherwise try to sync via Coral\n      return ConnectionManager.Connection.Cache.isResourceInSync(DALCache.Keys.ROSTER, cached).then((isSynced) => {\n        if (isSynced) {\n          return cached;\n        }\n        return syncRoster(cached);\n      });\n    });\n  },\n\n  /**\n   * Gets the full list of rooms. Will try to first sync\n   *\n   * @method getRoomsList\n   * @returns {Promise<RoomsList, DALError>}\n   */\n  getRoomsList() {\n    let syncRooms = (cached) => {\n      // Try to sync via Coral. If it fails, download the world via XMPP\n      return this._tryToSync(this._syncRoomsViaREST.bind(this), cached)\n        .catch((err) => {\n           //console.error(err)\n          return this._syncRoomsViaXMPP();\n        });\n    };\n\n    return DALCache.get(DALCache.Keys.ROOMS).then((cached) => {\n\n      // if it's been over 3 minutes, just go ahead and try to sync via Coral\n      if (!ConnectionManager.Connection.Cache.isReconnectedWithinSyncThreshold()) {\n        return syncRooms(cached);\n      }\n\n      // If it's been under 3 minutes, ask the server if our cached data is in sync.\n      // If so, resolve with the cache. Otherwise try to sync via Coral\n      return ConnectionManager.Connection.Cache.isResourceInSync(DALCache.Keys.ROOMS, cached).then((isSynced) => {\n        if (isSynced) {\n          return cached;\n        }\n        return syncRooms(cached);\n      });\n    });\n  },\n\n  /**\n   * Given the provided sync method (either this._syncRosterViaREST\n   * or this._syncRoomsViaREST) try to sync successfully. If the\n   * sync request fails with a 403 or 404 error, or if it's tried\n   * 5 times, then reject with appropriate error.\n   *\n   * @method _tryToSync\n   * @returns {Promise<*,DALError>}\n   * @private\n   */\n  _tryToSync(syncFn, ...syncArgs) {\n    return new Promise((resolve, reject) => {\n      let attempts = 1,\n        delay = Constants.RECONNECT_DELAY_MS,\n        tryAgain,\n        onError;\n\n      // If the sync function failed:\n      onError = (dalError) => {\n\n        // If we've tried 5 times, give up and reject\n        if (attempts >= 5) {\n          reject(DALError.ofType(DALError.Types.RATE_LIMITED));\n          return;\n        }\n\n        // If we get a 403 or 404 response we cannot recover, so reject\n        if (_.includes([403, 404], dalError.status)) {\n          reject(dalError);\n          return;\n        }\n\n        // otherwise, bump our \"attempts\" count, and try again after jittered backoff\n        attempts++;\n        delay = utils.decorrelatedJitter(Constants.RECONNECT_MAX_DELAY, Constants.RECONNECT_DELAY_MS, delay, Constants.RECONNECT_BACKOFF_FACTOR);\n        setTimeout(tryAgain, delay);\n      };\n\n      // Call the sync function. If it succeeds, resolve with the response\n      tryAgain = () => {\n        syncFn(...syncArgs).then(resolve).catch(onError);\n      };\n\n      tryAgain();\n    });\n  },\n\n  /**\n   * Try the happy path to sync'ing the Roster. Will generate a version-map\n   * of the users in the cache and send that up to the server. The server will\n   * respond with a diff of the users that are different than what we sent up.\n   * We'll apply the diff, create an aggregate hash, and ask the server for their\n   * aggregate hash. If they match, we resolve with the updated roster. If any\n   * of the requests fail or if the hashes do not match, we reject with an\n   * appropriate error\n   *\n   * @method _syncRosterViaREST\n   * @returns {Promise<Roster, DALError>}\n   * @private\n   */\n  _syncRosterViaREST(cached) {\n    let syncedRoster = cached ? _.cloneDeep(cached) : {};\n    return REST.syncRoster(cached).then((serverDiff) => {\n      serverDiff.forEach((user) => {\n        syncedRoster[user.id] = user;\n      });\n      return Promise.all([\n        DALCache.updateRoster(serverDiff),\n        ConnectionManager.Connection.Cache.isResourceInSync(DALCache.Keys.ROSTER, syncedRoster)\n      ]);\n    })\n    .then(([,isSynced]) => {\n      if (isSynced) {\n        return syncedRoster;\n      }\n      return Promise.reject(DALError.ofType(DALError.Types.OUT_OF_SYNC));\n    });\n  },\n\n  /**\n   * Try the happy path to sync'ing the RoomsList. Will generate a version-map\n   * of the users in the cache and send that up to the server. The server will\n   * respond with a diff of the rooms that are different than what we sent up.\n   * We'll apply the diff, create an aggregate hash, and ask the server for their\n   * aggregate hash. If they match, we resolve with the updated data. If any\n   * of the requests fail or if the hashes do not match, we reject with an\n   * appropriate error\n   *\n   * @method _syncRoomsViaREST\n   * @returns {Promise<RoomsList, DALError>}\n   * @private\n   */\n  _syncRoomsViaREST(cached) {\n    let syncedRooms = cached ? _.cloneDeep(cached) : {};\n    return REST.syncRooms(cached).then((serverDiff) => {\n        serverDiff.forEach((room) => {\n          syncedRooms[room.id] = room;\n        });\n        return Promise.all([\n          DALCache.updateRooms(serverDiff),\n          ConnectionManager.Connection.Cache.isResourceInSync(DALCache.Keys.ROOMS, syncedRooms)\n        ]);\n      })\n      .then(([,isSynced]) => {\n        if (isSynced) {\n          return syncedRooms;\n        }\n        return Promise.reject(DALError.ofType(DALError.Types.OUT_OF_SYNC));\n      });\n  },\n\n  /**\n   * Request the entire roster from XMPP. This is the fallback case if syncing fails.\n   *\n   * @returns {Promise<Roster, DALError>}\n   * @private\n   */\n  _syncRosterViaXMPP() {\n    let roster;\n    return ConnectionManager.Connection.Roster.getRoster().then((users) => {\n      roster = users.reduce(function (result, user) {\n        result[user.id] = user;\n        return result;\n      }, {});\n      return DALCache.set(DALCache.Keys.ROSTER, roster).catch(_.noop);\n    }).then(() => roster);\n  },\n\n  /**\n   * Request the entire room list from XMPP. This is the fallback case if syncing fails.\n   *\n   * @returns {Promise<RoomsList, DALError>}\n   * @private\n   */\n  _syncRoomsViaXMPP() {\n    let roomsList;\n    return ConnectionManager.Connection.Rooms.getAll().then((rooms) => {\n      roomsList = rooms.reduce(function (result, room) {\n        result[room.id] = room;\n        return result;\n      }, {});\n      return DALCache.set(DALCache.Keys.ROOMS, roomsList).catch(_.noop);\n    }).then(() => roomsList);\n  }\n\n};\n\nexport default DALSync;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.sync.js\n **/","import DALSync from './dal.sync';\nimport DALCache from './dal.cache';\nimport XMPPUtils from './xmpp/lib/xmpp-utils';\nimport ConnectionManager from './xmpp/connection_manager';\nimport REST from './rest/rest';\nimport HCApi from './rest/apiv2/apiV2';\nimport Room from './models/room';\nimport * as NS from './xmpp/lib/namespaces';\nimport ConfigStore from 'stores/configuration_store';\nimport Logger from 'helpers/logger';\n\n/**\n * Dictionary object of User models keyed by their id\n * @typedef {Object.<string, Room>} RoomsList\n */\n\n/**\n * XMPP representation of rooms list, as received by roster IQ and\n * parsed via x2js\n * @typedef {Object} XMPPRoomsList\n * @property {Object} iq\n * @property {Object} iq.query\n * @property {Array<User>} iq.query.item\n * @property {string} iq.query.xmlns - 'http://jabber.org/protocol/disco#items'\n * @property {string} iq.xmlns - 'jabber:client'\n * @property {string} iq.type - 'result'\n */\n\n/**\n * @module DALUser\n */\nconst DALRooms = {\n\n  /**\n   * Create a new room. Will attempt REST, but fallback\n   * to XMPP if the REST API requests fail\n   *\n   * @method createRoom\n   * @param {string} name\n   * @param {string} topic\n   * @param {string} privacy\n   * @returns {Promise<Room, DALError>}\n   */\n  create(name, topic, privacy) {\n\n    let createNewRoom = () => REST.createRoom(name, topic, privacy)\n      .catch(() => ConnectionManager.Connection.Rooms.create(name, topic, privacy));\n\n    let fetchRoomDetails = (entity) => this.getById(entity.id)\n      .catch(() => this.getByJid(XMPPUtils.createRoomJid(name)));\n\n    // Putting room creation via Coral behind a feature flag until we're confident\n    // that this doesn't cause any unnecessary load on Coral\n    if (_.get(ConfigStore.get('feature_flags'), 'web_client_coral_room_creation', false)) {\n      return createNewRoom().then(fetchRoomDetails);\n    }\n\n    return ConnectionManager.Connection.Rooms.create(name, topic, privacy)\n      .then(() => this.getByJid(XMPPUtils.createRoomJid(name)));\n  },\n\n  /**\n   * Delete a room\n   *\n   * @method deleteRoom\n   * @param {number} id\n   * @param {string} jid\n   * @returns {Promise<undefined, DALError>}\n   */\n  delete(id, jid) {\n    return REST.deleteRoom(id)\n      .catch((err) => {\n        Logger.error('[REST:delete-room]', err);\n        return ConnectionManager.Connection.Rooms.delete(jid);\n      });\n  },\n\n  /**\n   * Fetch a room by it's id\n   *\n   * @method fetchRoomById\n   * @param {int} id\n   * @returns {Promise<Room, DALError>}\n   */\n  getById(id) {\n    return REST.fetchRoom(id).then((room) => {\n      DALCache.updateRooms([ room ]);\n      return room;\n    });\n  },\n\n  /**\n   * Fetch a room by it's jid\n   *\n   * @method fetchRoomByJid\n   * @param {string} jid\n   * @returns {Promise<Room, DALError>}\n   */\n  getByJid(jid) {\n    return ConnectionManager.Connection.Rooms\n      .fetch(jid)\n      .then((room) => {\n        DALCache.updateRooms([ room ]);\n        return room;\n      });\n  },\n\n  /**\n   * Change a room's privacy setting\n   *\n   * @method setRoomPrivacy\n   * @param {string} jid\n   * @param {string} privacy\n   * @returns {Promise<undefined,DALError>}\n   */\n  setPrivacy(jid, privacy) {\n    return ConnectionManager.Connection.Rooms.setPrivacy(jid, privacy);\n  },\n\n  /**\n   * Change a room's name\n   *\n   * @method renameRoom\n   * @param {string} jid\n   * @param {string} name\n   * @returns {Promise<undefined,DALError>}\n   */\n  rename(jid, name) {\n    return ConnectionManager.Connection.Rooms.rename(jid, name);\n  },\n\n  /**\n   * Set room topic\n   *\n   * @method setTopic\n   * @param {string} jid\n   * @param {string} topic\n   * @returns {Promise<undefined, DALError>}\n   */\n  setTopic(jid, topic) {\n    return ConnectionManager.Connection.Rooms.setTopic(jid, topic);\n  },\n\n  /**\n   * Set guest access on a room\n   *\n   * @method setGuestAccess\n   * @param {string} jid\n   * @param {boolean} enabled\n   * @returns {Promise<undefined,DALError>}\n   */\n  setGuestAccess(jid, enabled) {\n    return ConnectionManager.Connection.Rooms.setGuestAccess(jid, enabled);\n  },\n\n  /**\n   * Update room details via REST. Currently looks to only be\n   * used to archive/unarchive rooms - but could possibly be\n   * used to rename, change topic/privacy as well.\n   *\n   * @method updateRoom\n   * @param data\n   *\n   * @param callback\n   */\n  update(data, callback = _.noop) {\n    HCApi.room.update_room(data, callback);\n  },\n\n  /**\n   * Change a room's avatar\n   *\n   * @param {number} id\n   * @param {string} avatar - Base 64 encoded image string\n   * @return {promise}\n   */\n  uploadAvatar(id, avatar) {\n    return REST.uploadRoomAvatar(id, avatar);\n  },\n\n  /**\n   * Temporary method to get the rooms list in the expected structure of a\n   * \"download the world\" disco#items IQ XMPP request (ughh)\n   *\n   * @method getRoomsAsXMPP\n   * @returns {Promise<XMPPRoster, DALError>}\n   */\n  getRoomsAsXMPP() {\n    return this.getRoomsList().then((rooms) => {\n      return {\n        iq: {\n          query: {\n            item: Object.keys(rooms).map((id) => Room.asX2JS(rooms[id])),\n            xmlns: NS.DISCO_ITEMS\n          },\n          type: 'result',\n          xmlns: NS.JABBER\n        }\n      };\n    });\n  },\n\n  /**\n   * Gets the complete list of rooms. Attempts to sync using the cache\n   * so that it only downloads what it needs.\n   *\n   * @method getRoomsList\n   * @returns {Promise<RoomsList, DALError>}\n   */\n  getRoomsList() {\n    return DALSync.getRoomsList();\n  }\n\n};\n\nexport default DALRooms;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.room.js\n **/","import DALCache from './dal.cache';\nimport Emoticon from './models/emoticon';\nimport ConnectionManager from './xmpp/connection_manager';\nimport * as NS from './xmpp/lib/namespaces';\n\n/**\n * Dictionary object of Emoticon models keyed by their id\n * @typedef {Object.<string, Emoticon>} Emoticons\n */\n\n/**\n * XMPP representation of emoticons, as received by emoticon list IQ and\n * parsed via x2js\n * @typedef {Object} XMPPEmoticon\n * @property {Object} iq\n * @property {Object} iq.query\n * @property {Array<Emoticon>} iq.query.item\n * @property {string} iq.query.xmlns - 'jabber:iq:roster'\n * @property {string} iq.xmlns - 'jabber:client'\n * @property {string} iq.type - 'result'\n */\n\n/**\n * @module DALEmoticon\n */\nconst DALEmoticon = {\n\n  /**\n   * Temporary method to get the roster in the expected structure of a\n   * \"download the world\" roster IQ XMPP request (ughh)\n   *\n   * @method getEmoticonsAsXMPP\n   * @returns {Promise<XMPPEmoticons, DALError>}\n   */\n  getEmoticonsAsXMPP(cached) {\n    let cached_ver = _.get(cached, 'query.ver', '');\n    return this.getEmoticons(cached_ver).then(({ ver, path_prefix, emoticons }) => {\n      var iq = {\n            query: {\n              ver,\n              path_prefix,\n              item: Object.keys(emoticons).map((id) => Emoticon.asX2JS(emoticons[id])),\n              xmlns: NS.HC_EMOTICONS\n            },\n            type: 'result',\n            xmlns: NS.JABBER\n          };\n\n      DALCache.updateEmoticons(iq);\n      return iq;\n    })\n    .catch(() => {\n      return null;\n    });\n  },\n\n  /**\n   * Gets the full emoticon list.\n   * @method getEmoticons\n   * @returns {Promise<Emoticons, DALError>}\n   */\n  getEmoticons(ver) {\n    return ConnectionManager.Connection.Emoticons.getEmoticons(ver);\n  }\n\n};\n\nexport default DALEmoticon;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.emoticon.js\n **/","import ConnectionManager from './xmpp/connection_manager';\nimport utils from 'helpers/utils';\n\n/**\n * @module DALConnection\n */\nconst DALConnection = {\n\n  /**\n   * Gets the time remaining that we are still able recover the session in.\n   *\n   * @method getSessionRecoveryTime\n   * @returns {number}\n   */\n  getSessionRecoveryTime() {\n    return ConnectionManager.Connection.allowedInactivityInterval - (utils.now() - ConnectionManager.Connection.last_BOSH_activity);\n  }\n\n};\n\nexport default DALConnection;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/dal.connection.js\n **/","!function(){var a,b;a=function(){var a={},b={};return a.getLocalStorage=function(){return window.localStorage},a.getSessionStorage=function(){return window.sessionStorage},a.getInternalStorage=function(){return b.getItem=function(a){return b[a]},b.setItem=function(a,c){b[a]=c},b.clear=function(){b={}},b},a.getStorage=function(){var b;try{var c=a.getLocalStorage();b=\"undefined\"!=typeof c?c:a.getSessionStorage()}catch(d){}return\"undefined\"==typeof b&&(b=a.getInternalStorage()),b},a.isCORSRequest=function(a){var b=document.createElement(\"a\");return b.href=a,b.host!==window.location.host},a.useXDomainRequest=function(b){return a.isCORSRequest(b)&&!!window.XDomainRequest&&(-1!==navigator.appVersion.indexOf(\"MSIE 8.\")||-1!==navigator.appVersion.indexOf(\"MSIE 9.\"))},a.getCookieValue=function(a){for(var b=a+\"=\",c=document.cookie.split(\";\"),d=0;d<c.length;d++){for(var e=c[d];\" \"===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(b))return e.substring(b.length,e.length)}return null},a}(),b=function(a){function b(a){return d&&d.is_started?(d.stop(),d.config=d.parseConfig(a)):(d=new c(a),window[\"herment-gas-client\"]=d),d}function c(b){return this.STORAGE_KEY_PREAMBLE=\"herment\",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.config=this.parseConfig(b),this.storage=a.getStorage(),this.is_started=!1,\"undefined\"!=typeof window.addEventListener?window.addEventListener(\"unload\",function(){this.moveQueueToStorage()}.bind(this)):window.attachEvent(\"onunload\",function(){this.moveQueueToStorage()}.bind(this)),this}var d=window[\"herment-gas-client\"];return c.prototype={getAtlPath:function(){return a.getCookieValue(\"__atl_path\")},getServerName:function(){var a;return\"undefined\"!=typeof document.location&&\"undefined\"!=typeof document.location.hostname&&(a=document.location.hostname),\"\"===a&&(a=\"-\"),a},getProductNameFromServerName:function(a){return\"undefined\"!=typeof a?a.replace(\".com\",\"\").replace(\".net\",\"\").replace(\".org\",\"\").replace(\".au\",\"\").replace(\".io\",\"\"):\"-\"},getSubdomain:function(a){var b=\"-\",c=a.match(/^([a-z0-9\\.]*)[\\-\\.]{1}([a-z0-9]+)+\\.([a-z]{2,6})$/i);if(c){var d=a.split(\".\");d=2===d[d.length-1].length?d.slice(0,d.length-3):d.slice(0,d.length-2),0!==d.length&&(b=d.join(\".\"))}return b},generateRandomStorageKey:function(){var a=2,b=12,c=(Math.random()+\"\").slice(a,b),d=(Math.random()+\"\").slice(a,b);return c.concat(d)},ajaxPost:function(b,c){var d;if(a.useXDomainRequest(b))d=new window.XDomainRequest;else if(window.XMLHttpRequest)d=new XMLHttpRequest;else{if(!window.ActiveXObject)return;d=new window.ActiveXObject(\"Microsoft.XMLHTTP\")}d.open(\"POST\",b,!0),\"undefined\"!=typeof d.setRequestHeader&&(d.setRequestHeader(\"Content-Type\",\"application/json\"),d.setRequestHeader(\"Accept\",\"application/json, text/javascript, */*;\")),d.send(c)},parseConfig:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;if(\"undefined\"==typeof a||\"undefined\"==typeof a.queue){var t=window.AJS=window.AJS||{};t.EventQueue=t.EventQueue||[],b=t.EventQueue}else b=a.queue;return c=\"undefined\"==typeof a||\"undefined\"==typeof a.analyticsscheme?\"https\":a.analyticsscheme,d=\"undefined\"==typeof a||\"undefined\"==typeof a.analyticsserver?\"analytics.atlassian.com\":a.analyticsserver,e=\"undefined\"==typeof a||\"undefined\"==typeof a.analyticsurl?\"/analytics/events\":a.analyticsurl,f=\"undefined\"==typeof a||\"undefined\"==typeof a.server?this.getServerName():a.server,g=\"undefined\"==typeof a||\"undefined\"==typeof a.product?this.getProductNameFromServerName(f):a.product,\"undefined\"==typeof a||\"undefined\"==typeof a.subproduct?(h=this.getSubdomain(f),\"undefined\"==typeof h&&(h=\"-\")):h=a.subproduct,i=\"undefined\"==typeof a||\"undefined\"==typeof a.version?null:a.version,j=\"undefined\"==typeof a||\"undefined\"==typeof a.session?null:a.session,k=\"undefined\"==typeof a||\"undefined\"==typeof a.sen?null:a.sen,l=\"undefined\"==typeof a||\"undefined\"==typeof a.sourceip?null:a.sourceip,m=\"undefined\"==typeof a||\"undefined\"==typeof a.atlpath?this.getAtlPath():a.atlpath,n=\"undefined\"==typeof a||\"undefined\"==typeof a.ajax?this.ajaxPost:a.ajax,o=\"undefined\"==typeof a||\"undefined\"==typeof a.maxevents?this.MAXEVENTS:a.maxevents,p=\"undefined\"==typeof a||\"undefined\"==typeof a.storage_key?this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey():a.storage_key,q=\"undefined\"==typeof a||\"undefined\"==typeof a.user?\"default\":a.user,r=\"undefined\"==typeof a||\"undefined\"==typeof a.publish_interval?this.PUBLISH_INTERVAL:a.publish_interval,s=\"undefined\"==typeof a||\"undefined\"==typeof a.save_interval?this.SAVE_INTERVAL:a.save_interval,{queue:b,gasScheme:c,gasServer:d,gasUrl:e,serverName:f,productName:g,subProductName:h,version:i,session:j,sen:k,sourceIP:l,atlPath:m,post:n,maxevents:o,storageKey:p,user:q,publishInterval:r,saveInterval:s}},pushToServer:function(a,b){var c=\"undefined\"!=typeof b?b:this.config.post,d=this.config.gasScheme+\"://\"+this.config.gasServer+this.config.gasUrl,e={events:a},f=JSON.stringify(e);c(d,f)},addEventsToArray:function(a,b,c){if(\"undefined\"!=typeof c&&\"undefined\"!=typeof c.server&&\"undefined\"!=typeof c.product&&\"undefined\"!=typeof c.subproduct&&\"undefined\"!=typeof c.user)for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];if(b.length>=this.config.maxevents)break;if(e.name&&e.properties){var f={name:e.name,properties:e.properties,serverTime:e.time||(new Date).getTime(),server:c.server,user:c.user,product:c.product,subproduct:c.subproduct,version:c.version,session:c.session,sen:c.sen,sourceIP:c.sourceIP,atlPath:c.atlPath};b.push(f)}}},publishFromQueueAndStorage:function(a){try{var b=\"undefined\"!=typeof a?a:this.pushToServer.bind(this),c=[];if(this.config.queue.length<1&&(\"undefined\"==typeof this.storage||this.storage.length<1))return;var d={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,c,d);var e=this.popEventsFromStorage();this.addEventsToArray(e,c,d),this.config.queue.length=0,c&&c.length&&b(c)}catch(f){}},serialiseEventsToString:function(a){return JSON.stringify(a)},deserialiseEvents:function(a){return JSON.parse(a)},storeEvents:function(a){if(\"undefined\"!=typeof this.storage)try{if(this.storage[this.config.storageKey]){var b=this.deserialiseEvents(this.storage[this.config.storageKey])||[];b.length<this.config.maxevents&&b.push.apply(b,a),a=b}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(a))}catch(c){}},popEventsFromStorage:function(){if(\"undefined\"==typeof this.storage)return[];try{if(this.storage[this.config.storageKey]){var a=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),a}}catch(b){}return[]},moveQueueToStorage:function(){0!==this.config.queue.length&&\"undefined\"!=typeof this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)},start:function(){this.is_started=!0;var a=Array.prototype.push;this.config.queue.push=function(b){b.time=(new Date).getTime(),a.call(this.config.queue,b)}.bind(this),this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)},stop:function(){this.is_started=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)},destroy:function(){this.stop(),window[\"herment-gas-client\"]=b}},b}(a),window[\"herment-gas-client\"]=b,window.define&&window.define(\"herment\",[],function(){return b})}();\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/vendor/herment.2.5.7.min.js\n ** module id = 243\n ** module chunks = 0\n **/","import Store from \"lib/core/store\";\nimport DALCache from 'core/dal.cache';\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AppConfig from 'config/app_config';\nimport PreferencesStore from 'stores/preferences_store';\n\nclass AppHeaderStore extends Store {\n\n  getDefaults(){\n    return {\n      ready: false,\n      active_chat: false,\n      search_text: '',\n      focus_search: false,\n      notification_supported: typeof Notification !== 'undefined',\n      notification_dismissed: null,\n      notification_dismissed_forever: null,\n      notification_preference: false,\n      notification_permission: false,\n      user_is_admin: false,\n      invite_url: false,\n      feature_flags: {},\n      web_server: AppConfig.default_web_server,\n      banner_shown: false,\n      client_subtype: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'DAL:cache-configured': () => {\n        Promise.all([\n          DALCache.get(DALCache.Keys.NOTIF_BANNER_DISMISSAL_COUNT),\n          DALCache.get(DALCache.Keys.NOTIF_BANNER_DISMISSED_FOREVER)\n        ]).then((cached) => {\n          this.set({\n            notification_dismissed: cached[0],\n            notification_dismissed_forever: cached[1]\n          });\n        });\n      },\n      'app-state-ready': () => {\n        this.set({\n          ready: true\n        });\n      },\n      'hc-init': (data) => {\n        this.handleConfig(data);\n      }\n    });\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:client_subtype': (client_subtype) => {\n        if (client_subtype) {\n          this.set({\n            client_subtype: client_subtype\n          });\n        }\n      },\n      'updated:active_chat': (jid) => {\n        this.set({\n          active_chat: jid\n        });\n      },\n      'updated:preferences': () => {\n        this.set({\n          notification_preference: PreferencesStore.getShowToasters(),\n          should_animate_avatar: PreferencesStore.shouldAnimateAvatars()\n        });\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'search-history': (data) => {\n        this.handleSearch(data);\n      },\n      'search-history-externally': (data) => {\n        this.handleSearch(data);\n      },\n      'set-search-text': (data) => {\n        this.set('search_text', data.text);\n      },\n      'request-notification-permission': () => {\n        Notification.requestPermission();\n      },\n      'dismiss-notification-banner': () => {\n        this.getDismissalCount().then((val) => {\n          let count = val ? val + 1 : 1;\n          DALCache.set(DALCache.Keys.NOTIF_BANNER_DISMISSAL_COUNT, count);\n        });\n      },\n      'dismiss-notification-banner-forever': () => {\n        DALCache.set(DALCache.Keys.NOTIF_BANNER_DISMISSED_FOREVER, true);\n      },\n      'focus-search': () => {\n        this.set('focus_search', true);\n      },\n      'blur-search': () => {\n        this.set('focus_search', false);\n      },\n      'notification-banner-status': (data) => {\n        this.set('banner_shown', data.shown);\n      }\n    });\n  }\n\n  handleConfig(config) {\n    this.set({\n      user_is_admin: _.get(config, \"is_admin\", false),\n      invite_url: _.get(config, \"invite_url\", false),\n      feature_flags: _.get(config, \"feature_flags\", {})\n    });\n  }\n\n  handleSearch() {\n    this.set('search_text', '');\n  }\n\n  getDismissalCount() {\n    return DALCache.get(DALCache.Keys.NOTIF_BANNER_DISMISSAL_COUNT);\n  }\n}\n\nexport default new AppHeaderStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/app_header_store.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport IdleManager from 'core/idle/idle_manager';\nimport ConnectionManager from 'core/xmpp/connection_manager';\nimport spi from 'spi';\nimport AvatarHelper from 'helpers/avatar_helper';\nimport ConfigStore from 'stores/configuration_store';\nimport AppConfig from 'config/app_config';\nimport PreferencesStore from 'stores/preferences_store';\nimport utils from 'helpers/utils';\nimport UploadFileHelper from 'helpers/upload_file_helper';\nimport FileHelper from 'helpers/file_helper';\nimport Logger from 'helpers/logger';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\nimport DialogActions from \"actions/dialog_actions\";\nimport PresenceSubscriptionHelper from 'helpers/presence_subscription_helper';\nimport DAL from 'core/dal';\nimport Presence from 'lib/enum/presence';\nimport VideoModule from 'helpers/video_module';\n\nexport default (config) => {\n\n  var initialPresenceProcessed = false;\n  var outgoing_message_predicate = utils.createSafePredicate(AppConfig.outgoing_message_filter_predicate, AppConfig);\n  var upload_file_helper = new UploadFileHelper();\n\n  const signOut = (data) => {\n    $(window).off('beforeunload');\n    upload_file_helper.destroy();\n    spi.onSignOut(DAL, data);\n  };\n\n  const onConnectFetchData = () => {\n    if (ConfigStore.isGuest()) {\n      //The following block is to build a roster from the room participants,\n      //because guests shouldn't have access to the full roster\n      let roomId = ConfigStore.get('room_id');\n\n      DAL.Room.getById(roomId)\n        .then((room) => AppDispatcher.dispatch('DAL:handle-new-room', {\n          jid: room.jid,\n          name: room.name,\n          x: room\n        }));\n      DAL.Emoticon.getEmoticonsAsXMPP((data) => {\n        AnalyticsDispatcher.dispatch('analytics-emoticons-loaded', {verbose: data});\n      });\n      DAL.fetchParticipants(roomId)\n        .then((resp) => AppDispatcher.dispatch('DAL:guest-fetched-room-participants', resp))\n        .catch((err) => Logger.type('dal').error('[fetch-room-participants]', err.message));\n\n    } else {\n      let cachedEmoticons = null;\n\n      Promise.all([\n        DAL.Cache.getRosterAsXMPP(),\n        DAL.Cache.getRoomsAsXMPP(),\n        DAL.Cache.getEmoticonsAsXMPP()\n      ])\n      .then(function ([ roster, rooms, emoticons ]) {\n        if (roster) {\n          AppDispatcher.dispatch('server-data', roster);\n        }\n        if (rooms) {\n          AppDispatcher.dispatch('server-data', rooms);\n        }\n        if (emoticons) {\n          cachedEmoticons = emoticons;\n        }\n        return Promise.all([\n          DAL.User.getRosterAsXMPP(),\n          DAL.Room.getRoomsAsXMPP(),\n          DAL.Emoticon.getEmoticonsAsXMPP(cachedEmoticons)\n        ]);\n      })\n      .then(function ([ roster, rooms, emoticons ]) {\n        AppDispatcher.dispatch('server-data', roster);\n        AppDispatcher.dispatch('server-data', rooms);\n        AppDispatcher.dispatch('server-data', emoticons || cachedEmoticons);\n        AnalyticsDispatcher.dispatch('analytics-roster-loaded', { verbose: roster });\n        AnalyticsDispatcher.dispatch('analytics-rooms-loaded', { verbose: rooms });\n        AnalyticsDispatcher.dispatch('analytics-emoticons-loaded', { verbose: emoticons });\n      })\n      .catch((err) => {\n        Logger.type('dal').error('[fetch-roster/fetch-rooms/fetch-emoticons]', err.message);\n      });\n    }\n  };\n\n  AppDispatcher.register({\n    'hipchat-client-configured': () => {\n      DAL.attemptConnect();\n    },\n    'strophe-reconnecting': () => {\n      AnalyticsDispatcher.dispatch('analytics-hc-client-reconnection-start');\n      IdleManager.stop();\n    },\n    'strophe-authenticating': () => {\n      if (ConnectionManager.isInitialConnect()) {\n        AnalyticsDispatcher.dispatch('analytics-initial-auth-start');\n      }\n    },\n    'strophe-disconnected': () => {\n      AnalyticsDispatcher.dispatch('analytics-event', {\n        name: 'hipchat.client.disconnected'\n      });\n      IdleManager.stop();\n    },\n    'strophe-connection-failed': (stropheStatus, reason) => {\n      AnalyticsDispatcher.dispatch('analytics-event', {\n        name: `hipchat.client.${ConnectionManager.isInitialConnect() ? 'connection' : 'reconnection'}.failed`,\n        properties: { reason }\n      });\n      if (!ConnectionManager.isInitialConnect()) {\n        AppDispatcher.dispatch('reconnect-fail');\n      }\n      IdleManager.stop();\n      let errorMsg = `[Connection Failure] ${reason}`;\n      Logger.error(errorMsg);\n      Logger.type('strophe-connection-failed').error(reason);\n      spi.onStropheConnectionFailed(errorMsg);\n    },\n    'strophe-policy-violation': (stropheStatus, reason) => {\n      let errorMsg = `[Authentication Failure] ${reason}`;\n      Logger.error(errorMsg);\n      Logger.type('strophe-auth-failed').error(reason);\n      spi.onStrophePolicyViolation({ reason, web_server: ConfigStore.get('web_server') });\n    },\n    'strophe-auth-failed': (stropheStatus, reason) => {\n      let errorMsg = `[Authentication Failure] ${reason}`;\n      Logger.error(errorMsg);\n      Logger.type('strophe-auth-failed').error(reason);\n      spi.onStropheAuthFailed(errorMsg);\n    },\n    'reconnection-error': (error) => {\n      spi.onReconnectionError(error);\n    },\n    'strophe-connected': () => {\n      AnalyticsDispatcher.dispatch(\"analytics-hc-client-initial-connection\");\n      // The following is an approximation; The difference between the actual auth success and this is about ~100+ms\n      // and may include other interactions. The proper solution would be embedding an event into\n      // hipchatAuthSuccessCallback in hipchat.js\n      AnalyticsDispatcher.dispatch(\"analytics-initial-auth-done\");\n\n      var group_avatar_bg = AvatarHelper.getGroupAvatarDefaultColor(ConfigStore.get('group_id'));\n      var initialConfig = _.merge(ConfigStore.getAll(), {\n        feature_flags: config.feature_flags,\n        group_avatar_bg: group_avatar_bg || AppConfig.default_group_avatar_bg\n      });\n\n      new VideoModule();\n\n      AppDispatcher.dispatch('hc-init', initialConfig);\n      AnalyticsDispatcher.dispatch('analytics-hc-init', {});\n\n      onConnectFetchData();\n      PresenceSubscriptionHelper.init();\n\n      DAL.sendInitialPresence().then(() => {\n        Logger.type('dal').log('[update-presence]', `Successfully sent initial presence`);\n      });\n      IdleManager.start();\n    },\n    'strophe-reconnected': () => {\n      if (ConfigStore.isGuest() && ConfigStore.get('room_jid')) {\n        DAL.joinRoom(ConfigStore.get('room_jid'))\n          .then((room) => AppDispatcher.dispatch('DAL:handle-joined-rooms', room))\n          // TODO: probably need a generic flag component for throwing common errors. For now, the global trap\n          // TODO: will throw a flag if it sees a presence error, so any errs here should already be covered\n          .catch((err) => Logger.error(err.message));\n      } else {\n        // wait till the config updates so we have the updated autoJoin list before sending up join presences\n        AppDispatcher.registerOnce('updated:config', () => {\n          DAL.joinRooms(PreferencesStore.getAutoJoinRooms(), 0)\n            .then((chats) => AppDispatcher.dispatch('DAL:handle-joined-rooms', chats))\n            .catch((err) => Logger.type('dal').error('[join-rooms]', err.message));\n        });\n      }\n\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: \"hipchat.client.reconnected\"\n      });\n      AnalyticsDispatcher.dispatch(\"analytics-hc-client-reconnection-success\");\n\n      onConnectFetchData();\n      PresenceSubscriptionHelper.resubscribe();\n\n      IdleManager.start();\n      DAL.sendInitialPresence(IdleManager.isIdle() ? Presence.IDLE : Presence.AVAILABLE).then(() => {\n        Logger.type('dal').log('[update-presence]', `Successfully sent initial presence`);\n        if (!IdleManager.isIdle()) {\n          AppDispatcher.dispatch('set-current-user-active');\n        }\n      });\n    },\n    'user-on-call': () => {\n      IdleManager.stop();\n    },\n    'user-leave-call': () => {\n      IdleManager.start();\n    },\n    'close-room': (data) => {\n      if (!data.doNotNotifyHC){\n        DAL.leaveRoom(data.jid, data.type)\n          .catch((err) => Logger.type('dal').error('[leave-room]', err.message));\n      }\n    },\n    'fetch-files': ({ room, before }) => {\n      // TODO: Remove this default limit value once HC-28429 is fixed\n      DAL.fetchFiles(room, before, AppConfig.fetching_files_limit)\n        .then((response) => {\n          AppDispatcher.dispatch('DAL:handle-fetched-files', response);\n        })\n        .catch((err) => {\n          Logger.type('dal').error('[fetch-files]', err.message);\n          AppDispatcher.dispatch('DAL:handle-fetched-files', { jid: room, files: [], end: true });\n        });\n    },\n    'fetch-links': ({ room, before }) => {\n      // TODO: Remove this default limit value once HC-28429 is fixed\n      DAL.fetchLinks(room, before, AppConfig.fetching_links_limit)\n        .then((response) => {\n          AppDispatcher.dispatch('DAL:handle-fetched-links', response);\n        })\n        .catch((err) => {\n          Logger.type('dal').error('[fetch-links]', err.message);\n          AppDispatcher.dispatch('DAL:handle-fetched-links', { jid: room, links: [], end: true });\n        });\n    },\n    'create-room': (data, cb) => {\n      DAL.Room.create(data.name, data.topic, data.privacy)\n        .then((room) => {\n          AppDispatcher.dispatch('DAL:handle-created-room', room);\n          if (room.privacy === \"private\") {\n            DialogActions.showInviteUsersDialog();\n          } else {\n            DialogActions.closeDialog();\n          }\n          cb(null, room);\n        })\n        .catch((err) => {\n          Logger.type('dal').error('[create-room]', err.message);\n          cb(err);\n        });\n    },\n    'delete-room': (data, callback) => {\n      DAL.Room.delete(data.id, data.jid)\n        .then(() => {\n          callback();\n        })\n        .catch((err) => {\n          Logger.type('dal').error('[delete-room]', err.message);\n          callback(err);\n        });\n    },\n    'change-room-privacy': (data, callback) => {\n      DAL.Room.setPrivacy(data.jid, data.privacy)\n        .then(callback)\n        .catch((err) => {\n          Logger.type('dal').error('[set-room-privacy]', err.message);\n          callback(err);\n        });\n    },\n    'change-room-name': (data, callback) => {\n      DAL.Room.rename(data.jid, data.name)\n        .then(callback)\n        .catch((error) => {\n          Logger.type('dal').error('[rename-room]', error.message);\n          callback(error);\n        });\n    },\n    'update-presence': (presence) => {\n      spi.onChangeUserStatus(presence.show);\n      DAL.setPresence(presence.show, presence.status).then(() => {\n        Logger.type('dal').log('[update-presence]', `Successfully set presence to ${presence.show}, ${presence.status}`);\n      });\n    },\n    'set-guest-access': (data, callback = _.noop) => {\n      DAL.Room.setGuestAccess(data.jid, data.enable)\n        .then(() => {\n          callback();\n        })\n        .catch((err) => {\n          Logger.type('dal').error('[set-guest-access]', err.message);\n          callback(err);\n        });\n    },\n    'guest-access-revoked': () => {\n      signOut(DAL, {});\n    },\n    'sync-preferences': (data) => {\n      DAL.savePreferences(data, () => {\n        AppDispatcher.dispatch('preferences-saved', data);\n      });\n    },\n    'request-profile': (jid, cb) => {\n      DAL.fetchProfile(jid, cb);\n    },\n    'filter-presences': (ids) => {\n      DAL.filterPresences(ids).then(() => {\n        Logger.type('dal').log('[filter-presence]', `Updated presence filter to ${ids.join(',')}`);\n      });\n    },\n    'fetch-presences': (ids) => {\n      DAL.fetchPresences(ids);\n    },\n    'attempt-reconnect': () => {\n      DAL.attemptReconnect();\n    },\n    'attempt-reconnect-without-reset': () => {\n      DAL.attemptReconnect(false);\n    },\n    'attempt-disconnect': (should_reconnect) => {\n      DAL.terminateChatSession(should_reconnect);\n    },\n    'network-down': () => {},\n    'network-up': () => {\n      DAL.attemptReconnect();\n    },\n    'fetch-previous': (data, cb) => {\n      DAL.fetchHistory(data.jid, data.oldest || null, AppConfig.message_retrieval_chunk_size, data.id, cb);\n    },\n    'upload-file': (data) => {\n      let uploadParams = {\n            path: {\n              identifier: data.room_id\n            },\n            params: {\n              file: data.file,\n              fileName: data.fileName,\n              message: data.message\n            }\n          },\n          jid = data.jid,\n          emitter = DAL.sendFileMessage(jid, uploadParams);\n          emitter.on('progress', (percentage) => {\n                    AppDispatcher.dispatch('upload-progress-update', {\n                      percentage,\n                      jid\n                    });\n                  })\n                  .on('success', () => {\n                    AppDispatcher.dispatch('upload-successful', {\n                      message: 'fileName: ' + data.fileName,\n                      text: data.message,\n                      jid\n                    });\n                  })\n                  .on('error', (error) => {\n                    AppDispatcher.dispatch('upload-failed', {\n                      error: error,\n                      jid\n                    });\n                  })\n                  .on('complete', () => {\n                    AppDispatcher.dispatch('upload-complete', {\n                      jid\n                    });\n                    emitter.removeAllListeners(); // Cleanup\n                  });\n    },\n    'send-message': (data) => {\n      if (!NetworkStatusHelper.isOnline()) {\n        Logger.type('dal').warn('[send-message]', 'client appears to be offline, aborting send-message');\n        return;\n      } else if (!DAL.isConnected()) {\n        Logger.type('dal').warn('[send-message]', 'client appears to be disconnected, aborting send-message');\n        return;\n      }\n      if (outgoing_message_predicate(data)) {\n        DAL.sendMessage(data);\n      }\n    },\n    'edit-message': (data) => {\n      DAL.editMessage(data.jid, data.message, data.original_mid, data.ts);\n    },\n    'delete-message': (message) => {\n      DAL.deleteMessage(message);\n    },\n    'resend-message': (data) => {\n      if (outgoing_message_predicate(data)) {\n        DAL.sendMessage(data);\n      }\n    },\n    'send-topic': ({ jid, topic }) => {\n      DAL.Room.setTopic(jid, topic)\n        .then(() => {\n          AppDispatcher.dispatch('DAL:handle-topic-updated', { jid, topic });\n        })\n        .catch((err) => Logger.type('dal').error('[set-topic]', err.message));\n    },\n    'fetch-room-participants': (room, includeOffline = true) => {\n      DAL.fetchParticipants(room.id, includeOffline)\n        .then((resp) => AppDispatcher.dispatch('DAL:fetched-room-participants', resp))\n        .catch((fetchParticipantsErr) => {\n          Logger.type('dal').error('[fetch-room-participants]', fetchParticipantsErr.message);\n          Logger.type('dal').warn('[fetch-room-participants]', 'fallback to fetch participants via XMPP join without maxmemberpresences');\n          //Note: This joins the rooms a second time. Not ideal but is currently the only mechanism to request room participants via XMPP.\n          AppDispatcher.dispatch('set-room-participants-fully-initialized', room.jid);\n          DAL.joinRoom(room.jid, 0, false)\n            .then((joinedRoom) => AppDispatcher.dispatch('DAL:handle-joined-rooms', joinedRoom))\n            .catch((joinedRoomErr) => Logger.type('dal').error('[join-room]', joinedRoomErr.message));\n        });\n    },\n    'fetch-room': (jid, cb) => {\n      DAL.Room.getByJid(jid)\n        .then((room) => cb(null, room))\n        .catch((err) => {\n          Logger.type('dal').error('[fetch-room-by-jid]', err.message);\n          cb(err);\n        });\n    },\n    'open-room': (data) => {\n      if (!utils.jid.is_private_chat(data.jid)) {\n        DAL.Room.getByJid(data.jid)\n          .catch((err) => {\n            Logger.type('dal').error('[fetch-room-by-jid]', err.message);\n          });\n        DAL.joinRoom(data.jid)\n          .then((room) => AppDispatcher.dispatch('DAL:handle-joined-rooms', room))\n          .catch((err) => Logger.type('dal').error('[join-room]', err.message));\n      } else {\n        DAL.joinChat(data.jid);\n      }\n    },\n    'exit-app': (data) => {\n      signOut(DAL, data);\n    },\n    'app-state-ready': () => {\n      $(document).trigger(\"app-state-ready\");\n      let chatToFocus = PreferencesStore.getChatToFocus();\n      if (chatToFocus && utils.jid.is_room(chatToFocus)) {\n        AppDispatcher.dispatch('initial-join-presence-sent', {\n          jid: chatToFocus,\n          with_history: false\n        });\n      }\n      DAL.joinRooms(PreferencesStore.getAutoJoinRooms())\n        .then((chats) => AppDispatcher.dispatch('DAL:handle-joined-rooms', chats))\n        .catch((err) => Logger.type('dal').error('[join-rooms]', err.message));\n\n      spi.onAppStateReady(ConfigStore.getAll());\n\n      if (!console) { return; }\n      console.emote(\"Hey there … Trying to reverse engineer something? Why not join our team instead?\");\n      console.emote(\"Apply at https://www.hipchat.com/jobs and mention this comment.\");\n    },\n    'invite-users': (data) => {\n      DAL.inviteUsersToRoom(data.room_jid, data.user_jids, data.reason);\n    },\n    'remove-users': (data, cb) => {\n      DAL.removeUsersFromRoom(data.room_jid, data.user_jids, cb);\n    },\n    'send-user-state-message': (data) => {\n      DAL.sendStateMessage(data.jid, data.type, data.state);\n    },\n    'send-video-message': (data) => {\n      DAL.sendVideoMessage(data.jid, data.type, data.audio_only, data.url, data.service, data.callback, data.reason);\n    },\n    'request-addlive-credentials': (data, cb) => {\n      DAL.requestAddliveCredentials(data.jid, cb);\n    },\n    'clear-web-cookies': (cb = _.noop) => {\n      DAL.clearWebCookies(cb);\n    },\n    'revoke-oauth2-token': (cb = _.noop) => {\n      DAL.revokeOauth2Token(cb);\n      DAL.terminateChatSession(false);\n    },\n    'DAL:fetch-readstate': () => {\n      DAL.fetchReadstate();\n    },\n    'DAL:update-readstate': (data) => {\n      DAL.updateReadstate(data);\n    },\n    'DAL:remove-readstate': (data) => {\n      DAL.removeReadstate(data);\n    },\n    'DAL:retry-readstate': () => {\n      DAL.retryReadstate();\n    },\n    'DAL:reset-readstate': () => {\n      DAL.resetReadstate();\n    },\n    'server-data': (data) => {\n      if (!initialPresenceProcessed && 'presence' in data) {\n        initialPresenceProcessed = true;\n        AnalyticsDispatcher.dispatch(\"analytics-initial-presence-response-received\", {verbose: data});\n      }\n    },\n    'apiv1-token-update-requested': () => {\n      DAL.updateAPIV1Token();\n    },\n    'auth-token-update': (data) => {\n      if ('apiv1_token' in data) {\n        Logger.debug(\"Updating API v1 auth token: \", Logger.sanitize(data));\n        spi.onInternalTokenRefreshed(data.apiv1_token);\n      }\n    },\n    'before:new-active-chat': (data) => {\n      let isChat = utils.jid.is_chat(data.jid);\n      spi.onChangeActiveChat(isChat);\n      AnalyticsDispatcher.dispatch(\"analytics-new-active-chat\", data);\n    },\n    'API:fetch-recent-history': (data) => {\n      DAL.fetchRecentHistory(data, ({ error, items }) => {\n        if (!error && items){\n          AppDispatcher.dispatch('API:fetched-recent-history', {\n            jid: data.jid,\n            results: items,\n            mid: data.params['not-before']\n          });\n        } else {\n          Logger.type('dal').error('[fetch-recent-history]', error);\n        }\n      });\n    },\n    'API:update-room': (data, cb) => {\n      DAL.Room.update(data, cb);\n    },\n    'API:sync-integrations': (data, cb) => {\n      DAL.syncIntegrations(data, cb);\n    },\n    'API:get-signed-url': (data, parameters, cb) => {\n      DAL.getSignedUrl(data, parameters, cb);\n    },\n    'API:request-with-signed-url': (data, parameters, cb) => {\n      DAL.requestWithSignedUrl(data, parameters, cb);\n    },\n    'API:fetch-all-glances-for-room': (data, cb) => {\n      DAL.fetchAllGlancesForRoom(data, cb);\n    },\n\n    'API:fetch-signed-file': (data, cb = _.noop, errCb = _.noop) => {\n      DAL.fetchSignedFile(data.url).then(cb).catch(errCb);\n    },\n    'API:upload-room-avatar': (data, cb = _.noop) => {\n      DAL.Room.uploadAvatar(data.id, data.avatar).then(cb).catch(cb);\n    },\n    'API:fetch-signed-thumbnail': (file, cb = _.noop, errCb = _.noop) => {\n      let featureFlags = ConfigStore.get('feature_flags');\n      let multiGetThumbnails = featureFlags.web_client_secure_files_multi_get_for_thumbnails;\n      if(multiGetThumbnails) {\n        FileHelper.fetchSignedThumbnail(file, cb, errCb);\n      } else {\n        DAL.fetchSignedFile(file.thumb_url).then(cb).catch(errCb);\n      }\n    },\n    'API:fetch-signed-thumbnail-collection': (fileObj) => {\n      DAL.fetchSignedThumbnailCollection(fileObj);\n    },\n    'API:fetch-last-message': (data, cb) => {\n      data.params = {\n        'max-results': 1\n      };\n      DAL.fetchRecentHistory(data, response => {\n        cb({\n          jid: data.jid,\n          items: response.items\n        });\n      });\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/hipchat-client/app-dispatcher-events.js\n **/","import Timer from 'core/common/timer';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport Logger from 'helpers/logger';\nimport ConfigStore from 'stores/configuration_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport ConnectionManager from 'core/xmpp/connection_manager';\n\nconst STATE = Symbol.for('HJC.Idle.Manager.State');\n\n/**\n * Manage Idle for the web\n */\nclass IdleManager {\n\n  constructor() {\n\n    /**\n     * Internal state\n     */\n    this[STATE] = {\n      isIdle: false,\n      isRunning: false,\n      lastUserAction: new Date().getTime()\n    };\n\n    /**\n     * Timer to set the user to idle\n     */\n    this.idleTimer = new Timer(this._onUserIdle.bind(this), PreferencesStore.get('idleMinutes') * 60 * 1000);\n\n    /**\n     * Timer to check for activity, in order to return from idle\n     */\n    this.activityTimer = new Timer(this._checkForActivity.bind(this), 1000);\n  }\n\n  /**\n   * Bootstrap the idle stuff. Only do this on web, NOT in native\n   */\n  start() {\n    if (ConfigStore.get('client_type') === 'web' && !this.isRunning()) {\n      let delay = PreferencesStore.get('idleMinutes') * 60 * 1000;\n      $(document).on('mousemove.idle keydown.idle DOMMouseScroll.idle mousewheel.idle mousedown.idle', () => {\n        this[STATE].lastUserAction = new Date().getTime();\n      });\n      this.idleTimer.resetTime(delay).start();\n      this.activityTimer.start();\n      this[STATE].isRunning = true;\n      Logger.info('[IdleManager] starting idle timers & events');\n    }\n  }\n\n  /**\n   * Stop idle management\n   */\n  stop() {\n    this.idleTimer.clear();\n    this.activityTimer.clear();\n    $(document).off('mousemove.idle keydown.idle DOMMouseScroll.idle mousewheel.idle mousedown.idle');\n    this[STATE].isRunning = false;\n    Logger.info('[IdleManager] stopping idle timers & events');\n  }\n\n  /**\n   * Ask if the user is idle\n   * @method isIdle\n   * @returns {boolean|IdleManager.isIdle}\n   */\n  isIdle() {\n    return this[STATE].isIdle;\n  }\n\n  /**\n   * Check if the idle manager is already running\n   */\n  isRunning() {\n    return this[STATE].isRunning;\n  }\n\n  /**\n   * Callback fired when the idle timer runs all the way down\n   * @private\n   */\n  _onUserIdle() {\n    if (!ConnectionManager.isConnected()) {\n      return;\n    }\n\n    Logger.info('[IdleManager] Going idle');\n    this[STATE].isIdle = true;\n    CurrentUserActions.goIdle();\n  }\n\n  /**\n   * Checks current time against last activity time to see if the\n   * user has taken action\n   * @private\n   */\n  _userHasTakenActionInTheLastSecond() {\n    return (new Date().getTime() - this[STATE].lastUserAction) < 1000;\n  }\n\n  /**\n   * Fired every second to check when the last user activity was\n   * @private\n   */\n  _checkForActivity() {\n    if (this._userHasTakenActionInTheLastSecond()) {\n      if (!ConnectionManager.isConnected()) {\n        return;\n      }\n\n      this.idleTimer.restart();\n      if (this.isIdle()) {\n        Logger.info('[IdleManager] Returning from idle');\n        this[STATE].isIdle = false;\n        CurrentUserActions.returnToActive();\n      }\n    }\n    this.activityTimer.restart();\n  }\n\n  /**\n   * Used for testing\n   */\n  reset() {\n    this[STATE].isIdle = false;\n    this[STATE].lastUserAction = new Date().getTime();\n    this.stop();\n  }\n\n}\n\nexport default new IdleManager();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/core/idle/idle_manager.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport Presence from 'lib/enum/presence';\n\nexport default {\n\n  goIdle() {\n    AppDispatcher.dispatch('set-current-user-idle');\n    AnalyticsDispatcher.dispatch('analytics-update-presence', { show: Presence.IDLE });\n  },\n\n  returnToActive() {\n    AppDispatcher.dispatch('set-current-user-active');\n  },\n\n  changeStatus({ show = Presence.AVAILABLE, status = '', type = '' } = {}) {\n    AppDispatcher.dispatch('set-current-user-status', { show, status });\n\n    if (type === 'show') {\n      AnalyticsDispatcher.dispatch('analytics-update-presence', { show });\n    } else if (type === 'status') {\n      AnalyticsDispatcher.dispatch('analytics-update-status-message', { status });\n    } else if (type === 'showAndStatus') {\n      AnalyticsDispatcher.dispatch('analytics-update-presence', { show });\n      AnalyticsDispatcher.dispatch('analytics-update-status-message', { status });\n    }\n  },\n\n  onCall() {\n    AppDispatcher.dispatch('user-on-call');\n  },\n\n  leaveCall(){\n    AppDispatcher.dispatch('user-leave-call');\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/current_user_actions.js\n **/","import config from 'config/app_config.js';\n\nvar AvatarHelper = {\n  defaultAvatarColors: config.default_avatar_colors,\n\n  createAvatarURL: function (url) {\n    return `http://${url}`;\n  },\n\n  getHash: function (str) {\n    var hash = 0, chr;\n    for (var idx = 0, max = str.length; idx < max; idx++) {\n      chr = str.charCodeAt(idx);\n      hash = hash * 31 + chr;\n      hash &= hash;\n    }\n    return hash;\n  },\n\n  getGroupAvatarDefaultColor: function (str) {\n    var colors = this.defaultAvatarColors,\n        colorIndex;\n\n    if (_.isNumber(str)) {\n      str = str.toString();\n    }\n\n    colorIndex = Math.abs(this.getHash(str) % colors.length);\n    return colors[colorIndex];\n  },\n\n  getAvatarInitialsFromName(name) {\n    let trimmedSpaceName = name.trim();\n    let result = this._trimNonAlphanumericChars(trimmedSpaceName).split(/\\s+/i).map((el) => {\n      let trimmedName = this._trimNonAlphanumericChars(el);\n      return trimmedName.charAt(0);\n    }).join('').slice(0, 3).toUpperCase();\n\n    return result;\n  },\n\n  _trimNonAlphanumericChars(str) {\n    let rule = /[=*\\/\\\\+\\-_'\"`~\\(\\)\\[\\]\\{\\}@]+/i;\n    let result = str.replace(rule, '').split('').reverse().join('').replace(rule, '').split('').reverse().join('');\n\n    return result;\n  },\n\n  cleanAvatarURL: function (avatarUrl) {\n    if (_.isString(avatarUrl) && avatarUrl.indexOf(\"http://\") === -1 && avatarUrl.indexOf(\"https://\") === -1) {\n      avatarUrl = this.createAvatarURL(avatarUrl);\n    }\n    return avatarUrl;\n  }\n};\n\nmodule.exports = AvatarHelper;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/avatar_helper.js\n **/","import AppDispatcher from \"dispatchers/app_dispatcher\";\nimport utils from \"helpers/utils\";\nimport link_utils from \"helpers/link_utils\";\nimport FileUploaderActions from \"actions/file_uploader_actions\";\nimport ChatInputActions from \"actions/chat_input_actions\";\nimport AppConfig from \"config/app_config\";\nimport chatInputStrings from 'strings/chat_input_strings';\nimport spi from 'spi';\nimport logger from 'helpers/logger';\nimport URI from 'helpers/uri';\nimport api from 'api/api';\nimport regex_helpers from \"helpers/regex_helpers\";\nimport ConfigStore from 'stores/configuration_store';\n\nclass UploadFileHelper {\n\n  constructor() {\n    this._registerListeners();\n    this._bindDOMEvents();\n    this._uploading_state = {};\n  }\n\n  destroy() {\n    this._unregisterListeners();\n    this._unbindDOMEvents();\n  }\n\n  _registerListeners() {\n    AppDispatcher.register({\n      'upload-file': (data) => {\n        this._uploading_state[data.jid] = true;\n      },\n      'upload-successful': (data) => {\n        this._uploading_state[data.jid] = false;\n      },\n      'upload-failed': (data) => {\n        this._handleUploadFailed(data);\n        this._uploading_state[data.jid] = false;\n      },\n      'open-file-picker': () => {\n        this._openFilePicker();\n      },\n      'file-pasted': (e) => {\n        this._handleFilePasted(e);\n      },\n      'file-chosen': (e, source) => {\n        this._onFileChosen(e, source);\n      },\n      'add-file-for-upload-with-url': (data) => {\n        this._handleUploadViaUrl(data);\n      },\n      'add-file-for-upload-with-base64': (data) => {\n        this._handleUploadViaBase64(data);\n      },\n      'updated:active_chat': (jid) => {\n        this.active_chat = jid;\n      },\n    });\n  }\n\n  _unregisterListeners() {\n    AppDispatcher.unregister({\n      'upload-failed': () => {\n        this._handleUploadFailed();\n      },\n      'open-file-picker': () => {\n        this._openFilePicker();\n      },\n      'file-pasted': () => {\n        this._handleFilePasted();\n      },\n      'file-chosen': () => {\n        this._onFileChosen();\n      },\n      'add-file-for-upload': () => {\n        this._handleFileForUploadWithUrl();\n      },\n      'add-file-for-upload-with-base64': () => {\n        this._handleUploadViaBase64();\n      }\n    });\n  }\n\n  _bindDOMEvents() {\n    document.addEventListener('dragenter', this._handleDragEnter.bind(this));\n    document.addEventListener('dragover', this._handleDragEnter.bind(this));\n    document.addEventListener('drop', this._handleDrop.bind(this));\n  }\n\n  _unbindDOMEvents() {\n    document.removeEventListener('dragenter', this._handleDragEnter);\n    document.removeEventListener('dragover', this._handleDragEnter);\n    document.removeEventListener('drop', this._handleDrop);\n  }\n\n  _handleUploadViaUrl(data) {\n    if (data && data.fileUrl) {\n      this._handleFileForUploadWithUrl(data.fileUrl, data.source);\n    }\n  }\n\n  _handleUploadViaBase64(data) {\n    if (data && data.base64) {\n      this._handleFileForUploadWithBase64(data.base64, data.fileName, data.source);\n    }\n  }\n\n  _handleUploadFailed(data = {}) {\n    if (data.error && data.error.code === 503){\n      this._dispatchError('service_unavailable', data.jid);\n    } else if (data.error && data.error.code === 400) {\n      this._dispatchError('unable_to_upload_image', data.jid);\n    } else {\n      this._dispatchError('unable_to_upload', data.jid);\n    }\n  }\n\n  _handleDragEnter(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  _handleDrop(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    if (this._uploading_state[this.active_chat]) {\n      return;\n    }\n\n    let url_regex = new RegExp(regex_helpers.url, \"i\");\n\n    let html = e.dataTransfer.getData('text/html'),\n        textOrUrl = e.dataTransfer.getData('text/plain'),\n        text = null,\n        url = null,\n        file = !!e.dataTransfer.files.length;\n\n    if (!file && textOrUrl !== '') {\n      if (url_regex.test(textOrUrl)) {\n        url = textOrUrl;\n      } else {\n        text = textOrUrl;\n      }\n    }\n\n    if (url) {\n      this._handleDropUrl(url);\n    } else if (text) {\n      this._handleDropText(text);\n    } else if (html) {\n      this._handleDropHtml(html);\n    } else {\n      this._handleDropFile(e);\n    }\n  }\n\n  _handleDropHtml(html) {\n    let url = '',\n        img = $('<div/>').html(html).find('img')[0],\n        a = $('<div/>').html(html).find('a')[0];\n\n    if (img && $(img).hasClass('remoticon')) {\n      this._handleDropText($(img).attr('alt'));\n    } else if (img) {\n      url = this._tryRemoveQuery($(img).attr('src'));\n      this._handleUrl(url);\n    } else if (a) {\n      url = this._tryRemoveQuery($(a).attr('href'));\n      this._handleUrl(url);\n    }\n  }\n\n  _handleDropUrl(url) {\n    this._handleUrl(url);\n  }\n\n  _handleDropText(text) {\n    api.focusChatInput();\n    ChatInputActions.appendMessage({text: text});\n  }\n\n  _handleDropFile(e) {\n    spi.focusApp();\n    this._onFileChosen(e, \"dragndrop\");\n  }\n\n  _tryRemoveQuery(urlForCheck) {\n    let withoutQuery = link_utils.remove_query_string(urlForCheck);\n\n    if (this._isAllowedUrlFileType(withoutQuery)){\n      urlForCheck = withoutQuery;\n    }\n    return urlForCheck;\n  }\n\n  _handleUrl(url) {\n    api.focusChatInput();\n    if (this._isAllowedUrlFileType(url)) {\n      this._handleFileForUploadWithUrl(url, \"dragndrop\");\n    } else {\n      this._tryUrlByLoadingImage(url);\n    }\n  }\n\n  _isAllowedUrlFileType(url) {\n    let isBase64 = this.isBase64Image(url);\n    url = url.toLowerCase();\n    return ( _.endsWith(url, '.jpg')\n           || _.endsWith(url, '.jpeg')\n           || _.endsWith(url, '.png')\n           || this.isGIF(url)\n           || isBase64);\n  }\n\n  isGIF(url){\n    return _.endsWith(url.toLowerCase(), '.gif');\n  }\n\n  isBase64Image(src){\n    return /^data:image\\/[a-z+]{3,8};base64,(.|\\n)+/.test(src);\n  }\n\n  _handleFilePasted(e) {\n    if (e.clipboardData && e.clipboardData.items) {\n      var dataTransferItem = e.clipboardData.items[0];\n      if (dataTransferItem && dataTransferItem.kind === \"file\") {\n        this._onFileChosen(e, \"paste\");\n      }\n    }\n  }\n\n  _handleFileForUploadWithBase64(base64, fileName, source) {\n    var blob = utils.file.base64_to_blob(base64, fileName);\n    if (blob) {\n      this._handleBlobLoaded(blob, fileName, source);\n    }\n  }\n\n  _handleFileForUploadWithUrl(fileUrl, source) {\n    this._getBlobFromUrl(fileUrl, this._handleBlobLoaded.bind(this), source);\n  }\n\n  _getBlobFromUrl(file_url, cb, source, xhr = new XMLHttpRequest(), reader = new FileReader()) {\n\n    if (!_.isFunction(cb)){\n      logger.type('upload-file-helper').warn('Callback for _getBlobFromUrl function is not defined.');\n      return;\n    }\n\n    if (!file_url || !this._validateFileUrl(file_url)){\n      logger.type('upload-file-helper').warn('File url is not valid: ', file_url);\n      return;\n    }\n\n    let file_name = (this.isBase64Image(file_url)) ? false : utils.file.get_file_name(file_url);\n\n    if (URI.getProtocol(file_url).length >= location.protocol.length - 1){\n\n      this._getDataWithXHRRequest(xhr, reader, cb, source, file_name, file_url);\n\n    } else {\n\n      if (this.isBase64Image(file_url)) {\n\n        let blob = utils.file.base64_to_blob(file_url);\n\n        cb(blob, file_name, source);\n        logger.type('upload-file-helper').info('Blob from base64 image received.');\n\n      } else if (this.isGIF(file_url)) {\n\n        logger.type('upload-file-helper').info('GIF loading via canvas is skipped.');\n        ChatInputActions.appendMessage({text: ` ${file_url}`});\n\n      } else {\n\n        this._getDataByLoadingImage(cb, source, file_name, file_url);\n      }\n    }\n  }\n\n  _getDataWithXHRRequest(xhr, reader, cb, source, file_name, file_url){\n\n    xhr.open(\"GET\", file_url);\n    xhr.responseType = \"blob\";\n    xhr.onerror = () => {\n      ChatInputActions.appendMessage({text: ` ${file_url}`});\n      logger.type('upload-file-helper').warn('Image failed to load via xhr: ', file_url);\n    };\n    xhr.onload = function() {\n      let response = xhr.response;\n      reader.readAsArrayBuffer(response);\n      reader.onerror = () => {\n        this._dispatchError('unable_to_upload');\n        logger.type('upload-file-helper').warn('Reader failed to read the file: ', file_url);\n      };\n      reader.onload = function(e) {\n        let blob = new Blob([e.srcElement.result], {type: response.type});\n        cb(blob, file_name, source);\n        logger.type('upload-file-helper').info('Blob from image received via xhr: ', file_url);\n      };\n    };\n\n    xhr.send();\n  }\n\n  _getDataByLoadingImage(cb, source, file_name, file_url, append_url = true){\n\n    let extension = utils.file.get_extension(file_url) || 'png',\n        mimeType = `image/${extension}`;\n\n    let img = new Image();\n    img.setAttribute('crossOrigin', 'anonymous');\n    img.onload = () => {\n\n      let canvas = document.createElement(\"canvas\");\n      canvas.width = img.naturalWidth;\n      canvas.height = img.naturalHeight;\n\n      let ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(img, 0, 0);\n\n      let imd = canvas.toDataURL(mimeType),\n        blob = utils.file.base64_to_blob(imd);\n\n      cb(blob, file_name, source);\n      logger.type('upload-file-helper').info('Blob from image received: ', file_url);\n    };\n\n    img.onerror = () => {\n      if (append_url) {\n        logger.type('upload-file-helper').warn('Image failed to load: ', file_url);\n        ChatInputActions.appendMessage({text: `${file_url}`});\n      } else {\n        logger.type('upload-file-helper').warn('Url failed to load: ', file_url);\n      }\n    };\n\n    img.src = file_url;\n  }\n\n  _tryUrlByLoadingImage(url){\n    this._getDataByLoadingImage(this._handleBlobLoaded.bind(this), \"dragndrop\", false, url, true);\n  }\n\n  _handleBlobLoaded(blob, name, source) {\n    if (blob) {\n      var file;\n      if (!name) {\n        name = `${chatInputStrings.upload_default_name}.${utils.file.get_extension_for_mime_type(blob.type)}`;\n      }\n\n      file = utils.file.blob_to_file(blob, name);\n      this._handleFileForChatInput(file, name, source);\n    }\n  }\n\n  _onFileChosen(e, source = \"browse\") {\n    var file,\n        name;\n\n    if (e.type === 'change') {\n      file = e.target.files[0];\n      name = _.get(file, \"name\");\n    } else if (e.type === 'drop') {\n      file = e.dataTransfer.files[0];\n      name = _.get(file, \"name\");\n    } else if (e.type === 'paste') {\n      var dataTransferItem = e.clipboardData.items[0];\n      if (dataTransferItem) {\n        file = dataTransferItem.getAsFile();\n        var ext = utils.file.get_extension_for_mime_type(dataTransferItem.type);\n        if (ext) {\n          name = `${chatInputStrings.upload_default_name}.${ext}`;\n        }\n      }\n    }\n\n    if (file && name && source) {\n      this._handleFileForChatInput(file, name, source);\n    }\n    api.focusChatInput();\n  }\n\n  _handleFileForChatInput(file, name, source) {\n    if (file) {\n      file.file_obj = null;\n      ChatInputActions.expandAttachment({\n        jid: this.active_chat,\n        file_name: name,\n        file: file,\n        file_selection_source: source\n      });\n      this._processFile(file, name, source);\n    }\n  }\n\n  _openTooltip(file, name, source, fileObj) {\n      file.file_obj = fileObj;\n\n      ChatInputActions.openTooltip({\n        type: 'upload_preview',\n        data: {\n          file: fileObj\n        }\n      });\n\n      ChatInputActions.expandAttachment({\n        jid: this.active_chat,\n        file_name: name,\n        file: file,\n        file_selection_source: source\n      });\n  }\n\n  _processFile(file, name, source) {\n    let fileTypeBreakdown = utils.file.get_selected_file_type(file),\n        file_type = fileTypeBreakdown.major,\n        subtype = fileTypeBreakdown.minor,\n        client_subtype = ConfigStore.get(\"client_subtype\"),\n        isQT = utils.clientSubType.isQT(client_subtype),\n        isWindows = utils.platform.isWindows(),\n        isSafari = utils.browser.is.safari();\n\n    file_type = this._determineFileType(file_type, subtype);\n\n    if (this._validateFile(file) && this._shouldOpenFilePreview(file_type)) {\n      let fileObj = {\n        file_type\n      };\n\n      fileObj.src = window.URL.createObjectURL(file);\n\n      if(file_type === 'image') {\n        utils.image.resizeImage(fileObj.src).then((processedFile) => {\n          fileObj.src_processed = window.URL.createObjectURL(processedFile);\n          this._openTooltip(file, name, source, fileObj);\n        });\n      } else if (file_type === 'video') {\n        if (!(isWindows && isQT) && (subtype === 'mp4' || (subtype === 'quicktime' && isSafari))) {\n          this._openTooltip(file, name, source, fileObj);\n        }\n      } else {\n        this._openTooltip(file, name, source, fileObj);\n      }\n    }\n  }\n\n  _validateFile(file, max_upload_size = AppConfig.max_upload_size) {\n    let result;\n    if (file.size && file.size / 1024 / 1024 > max_upload_size) {\n      this._dispatchError('file_too_large');\n      result = false;\n    } else {\n      this._readFile(file);\n      result = true;\n    }\n    return result;\n  }\n\n  _validateFileUrl(url) {\n    let result;\n    if (_.isString(url) && utils.file.get_file_name(url) && url.slice(-1) !== \"/\") {\n      result = true;\n    } else {\n      this._dispatchError('file_is_folder');\n      result = false;\n    }\n    return result;\n  }\n\n  _readFile(file, reader = new FileReader()) {\n    reader.onload = () => {\n      this._clearErrors();\n    };\n    reader.onerror = () => {\n      this._dispatchError('file_is_folder');\n    };\n    reader.readAsText(file);\n  }\n\n  _shouldOpenFilePreview(file_type) {\n    return _.includes(['image', 'video', 'audio'], file_type);\n  }\n\n  _determineFileType(file_type, subtype) {\n    if (subtype){\n      if (subtype === 'pdf') {\n        file_type = 'text';\n      } else if (_.includes(['xml', 'html', 'rtf'], subtype) || _.includes(subtype, 'photoshop')) {\n        file_type = 'application';\n      }\n    }\n    return file_type;\n  }\n\n  _openFilePicker() {\n    var node = document.getElementById('fileInput');\n    if (node) {\n      node.click();\n    }\n    spi.showFileChooser();\n  }\n\n  _clearErrors() {\n    FileUploaderActions.clearFileErrors({jid: this.active_chat});\n  }\n\n  _dispatchError(key, jid) {\n    FileUploaderActions.dispatchFileError({jid: jid || this.active_chat, key: key});\n  }\n\n}\n\nmodule.exports = UploadFileHelper;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/upload_file_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\n\nmodule.exports = {\n\n  dispatchFileError: function(data) {\n    AppDispatcher.dispatch('file-error', data);\n  },\n\n  clearFileErrors: function(data) {\n    AppDispatcher.dispatch('clear-errors', data);\n  },\n\n  openFilePicker: function() {\n    AnalyticsDispatcher.dispatch('analytics-input-actions-upload-invoke');\n    AppDispatcher.dispatch('open-file-picker');\n  },\n\n  filePasted: function(e) {\n    AppDispatcher.dispatch('file-pasted', e);\n  },\n\n  fileChosen: function(e, source) {\n    AppDispatcher.dispatch('file-chosen', e, source);\n  },\n\n  changeFileName: function(data) {\n    AppDispatcher.dispatch('change-filename', data);\n  },\n\n  /**\n   * Upload's a file to the currently active chat\n   * @param {object} data\n   * @param {string} data.jid JID of the currently active chat\n   * @param {string} data.fileName Name of the file\n   */\n  uploadFile: function(data) {\n    AppDispatcher.dispatch('upload-file', data);\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/file_uploader_actions.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport FormsStrings from 'strings/forms_strings';\n\n/**\n * Used to trigger actions on the chat message input\n * @module actions/ChatInputActions\n */\nexport default {\n\n  /**\n   * Sends a message to the currently active chat\n   * @param {object} data\n   * @param {string} data.id Message ID\n   * @param {string} data.jid JID of the currently active chat\n   * @param {string} data.text Text of the message\n   */\n  sendMessage(data) {\n    AppDispatcher.dispatch('send-message', data);\n    AnalyticsDispatcher.dispatch('analytics-send-message', data);\n  },\n\n  clearChat(data) {\n    AppDispatcher.dispatch('clear-messages', data);\n  },\n\n  closeChat(data) {\n    AppDispatcher.dispatch('close-room', data);\n  },\n\n  /**\n   * Join room\n   * @param {object} data\n   * @param {string} data.room Name of room or user mention\n   */\n  joinChat(data) {\n    AppDispatcher.dispatch('join-room', data);\n  },\n\n  clearChatInput() {\n    AppDispatcher.dispatch('clear-chat-input');\n  },\n\n  /**\n   * Sets the chat input field's text value\n   * @param {object} data\n   * @param {string} data.text Text value of the message\n   */\n  setMsgValue(data) {\n    AppDispatcher.dispatch('set-message-value', data.text);\n  },\n\n  appendMessage(data) {\n    AppDispatcher.dispatch('append-message-value', data.text);\n  },\n\n  setCaretPosition(data) {\n    AppDispatcher.dispatch('set-chat-caret-position', data);\n  },\n\n  resetNewForcedCaretPosition() {\n    AppDispatcher.dispatch('reset-new-forced-caret-position');\n  },\n\n  expandAttachment(data) {\n    AppDispatcher.dispatch('expand-attachment', data);\n  },\n\n  closeAttachment(data) {\n    AppDispatcher.dispatch('close-attachment', data);\n  },\n\n  toggleTooltip(data) {\n    AppDispatcher.dispatch('toggle-tooltip', data);\n  },\n\n  openTooltip(data) {\n    AppDispatcher.dispatch('open-tooltip', data);\n  },\n\n  closeTooltip(data) {\n    AppDispatcher.dispatch('close-tooltip', data);\n  },\n\n  showMessageLengthError() {\n    AppDispatcher.dispatch('show-flag', {\n      type: \"error\",\n      body: FormsStrings.fail.message_too_long,\n      close: \"auto\"\n    });\n  },\n\n  showFileDescriptionLengthError() {\n    AppDispatcher.dispatch('show-flag', {\n      type: \"error\",\n      body: FormsStrings.fail.file_description_too_long,\n      close: \"auto\"\n    });\n  },\n\n  setUserState(data) {\n    AppDispatcher.dispatch('set-user-state', {\n      jid: data.jid,\n      type: data.type,\n      state: data.state\n    });\n  },\n\n  dismissActionsDropDown() {\n    AppDispatcher.dispatch('dismiss-active-actions-dropdown');\n  },\n\n  getLastMessageSentByCurrentUser: function(jid, cb){\n    AppDispatcher.dispatch('get-last-message-sent-by-current-user', {\n        jid: jid,\n        cb: cb\n    });\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/chat_input_actions.js\n **/","import common from 'strings/common_strings';\n\nexport default {\n  description: {\n    create_room_description: `Name your room after your team, project, or anything really.`,\n    create_room_topic: `Tell people what this room is about.`,\n    privacy: `Everyone already here will still have access. To add more people, you'll have to invite them.`,\n    public_room: `Anyone on your team can join this room and invite others.`,\n    private_room: `Only people invited to this room may join.`,\n    choose_people_to_remove: `Choose people to remove from this room:`,\n    notif_header_prefix: `Customize notifications for: `,\n    notif_settings_info_prefix: `You can also change your `,\n    notif_settings_link: `default settings`,\n    notif_settings_info_suffix: ` for all rooms.`,\n    notif_default: `Change your default in Settings`,\n    notif_loud: `For every message`,\n    notif_normal: function (mention) {\n      return `For @all, @here, and @${mention} mentions only`;\n    },\n    notif_quiet: function (mention) {\n      return `For @${mention} mentions only`;\n    }\n  },\n  label: {\n    room_name: `Room name:`,\n    room_topic: `Topic:`,\n    these_people: `These people:`,\n    message: `Message:`,\n    new_room_name: `New room name:`,\n    public_room: `Open room`,\n    private_room: `Private room`,\n    global: `Global`,\n    default_text: `Default:`,\n    custom: `Custom`,\n    loud: common.loud,\n    normal: common.normal,\n    quiet: common.quiet\n  },\n  button: {\n    try_again: `Try again`\n  },\n  success: {\n    users_invited: `People invited.`,\n    users_removed: `People removed.`,\n    rename_flag: `Room renamed.`,\n    privacy_changed: function(room, privacy) {\n      return `${room} is now ${privacy}.`;\n    },\n    room_created: function(name) {\n      return `${name} created.`;\n    }\n  },\n  fail: {\n    invite_fail: `Couldn't invite people.`,\n    remove_users: `Couldn't remove people.`,\n    no_users_flag: `Choose someone to remove.`,\n    rename_flag: `Couldn't rename the room.`,\n    create_room: `Couldn't create the room.`,\n    change_privacy_flag: `Couldn't change the room privacy.`,\n    sent_message_in_archived_room: `Messages cannot be sent in archived rooms.`,\n    message_too_long: `Message too long.`,\n    file_description_too_long: `Message too long. It can't be more than 1000 characters.`,\n    oto_chats_disabled: `1-1 (private) chats are disabled by the administrator.`\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/forms_strings.js\n **/","export default {\n  attachment: \"Attachment\",\n  upload_file: `Upload a file`,\n  edit_message: \"Edit\",\n  delete_message: \"Delete\",\n  upload_default_name: `upload`\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/chat_input_strings.js\n **/","/**\n * The HipChat web client's top level API,\n * for use by native wrappers and experiments.\n *\n * @module API\n */\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport PreferencesActions from 'actions/preferences_actions';\nimport PreferencesStore from 'stores/preferences_store';\nimport DialogActions from 'actions/dialog_actions';\nimport LayoutActions from 'actions/layout_actions';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport AppStore from 'stores/application_store';\nimport ChatHeaderStore from 'stores/chat_header_store';\nimport ChatInputStore from 'stores/chat_input_store';\nimport ConfigStore from 'stores/configuration_store';\nimport RosterStore from 'stores/roster_store';\nimport AppConfig from 'config/app_config';\nimport ChatInputActions from 'actions/chat_input_actions';\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport RoomDropDownActions from 'actions/room_dropdown_actions';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport RoomNavActions from 'actions/room_nav_actions';\nimport ConnectionActions from 'actions/connection_actions';\nimport AppActions from 'actions/app_actions';\nimport sentryHelper from 'helpers/sentry_helper';\nimport NetworkStatusActions from 'actions/network_status_actions';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport FileUploaderActions from \"actions/file_uploader_actions\";\nimport VideoActions from 'actions/video_actions';\nimport VideoServiceKeys from 'keys/video_service_keys';\nimport DALError from 'core/models/dal-error';\nimport spi from 'spi';\n\n\nfunction _isVideoEnabled(jid = '') {\n  let isChat = utils.jid.is_chat(jid);\n  let isRoom = utils.jid.is_room(jid);\n\n  if (!isChat) {\n    return false;\n  }\n\n  let video_enabled = ChatHeaderStore.get('video_enabled');\n  let enso_enabled = ChatHeaderStore.get('web_client_enso_video_enabled');\n  let room_enabled = ChatHeaderStore.get('web_client_enso_room_video_enabled');\n\n  if (isRoom) {\n    return video_enabled && enso_enabled && room_enabled;\n  }\n  return video_enabled;\n}\n\n\nclass API {\n\n  constructor() {\n\n    /**\n     * @type {object}\n     * @property {number} ConnectionStatus.CONNECTED 1\n     * @property {number} ConnectionStatus.CONNECTING 2\n     * @property {number} ConnectionStatus.DISCONNECTED 3\n     * @property {number} ConnectionStatus.DISCONNECTING 4\n     * @property {number} ConnectionStatus.NETWORK_DOWN 5\n     * @property {number} ConnectionStatus.NETWORK_UP 6\n     * @property {number} ConnectionStatus.ERROR 0\n     *\n     * @constant ConnectionStatus\n    */\n    this.ConnectionStatus = {\n      CONNECTED: 1,\n      CONNECTING: 2,\n      DISCONNECTED: 3,\n      DISCONNECTING: 4,\n      NETWORK_DOWN: 5,\n      NETWORK_UP: 6,\n      SUSPEND: 7,\n      ERROR: 0\n    };\n\n    /**\n     * @type {object}\n     * @property {string} FileUploaderErrors.FILE_TOO_LARGE 'file_too_large'\n     * @property {string} FileUploaderErrors.FILE_IS_FOLDER 'file_is_folder'\n     * @property {string} FileUploaderErrors.UNABLE_TO_UPLOAD 'unable_to_upload'\n     *\n     * @constant FileUploaderErrors\n     */\n    this.FileUploaderErrors = {\n      FILE_TOO_LARGE: 'file_too_large',\n      FILE_IS_FOLDER: 'file_is_folder',\n      UNABLE_TO_UPLOAD: 'unable_to_upload'\n    };\n  }\n\n  /**\n   * Gets the init data received by the web client\n   * from the server on initial connect. Filtered\n   * to data pertinente to native clients\n   * @param {object} initData the web client's initialization data\n   * @param {string} initData.user_jid the jid of the current user\n   * @param {string} initData.user_id the user id of the current user\n   * @param {string} initData.group_id the group id of the current group\n   * @param {string} initData.group_name the name of the current group\n   * @param {string} initData.photo_large a large version of the current users avatar image\n   * @param {string} initData.photo_small a small version of the current users avatar image\n   * @param {string} initData.oauth_token the oauth2_token for the currently logged in user\n   * @param {object} initData.apiv1_token the api token information for the currently logged in user\n   * @returns {object|false} returns false if init data not received by web client\n   *\n   * @method getInitData\n   * @static\n   */\n  getInitData() {\n    if (!AppStore.local.initialized) {\n      return false;\n    }\n\n    var current_user = AppStore.get(\"current_user\");\n    return _.merge({}, {\n      user_jid: current_user.user_jid,\n      user_id: current_user.user_id,\n      photo_large: current_user.photo_large,\n      photo_small: current_user.photo_small,\n      oauth_token: ConfigStore.getOAuthToken(),\n      apiv1_token: ConfigStore.getApiV1Token(),\n      group_id: AppStore.get(\"group_id\"),\n      group_name: AppStore.get(\"group_name\")\n    });\n  }\n\n  /**\n   * Gets the current user's server and client preferences\n   * see {@link prefs} for keys\n   * @returns {Object} prefs the user/client prefs\n   *\n   * @method getPreferences\n   * @static\n   */\n  getPreferences() {\n    return PreferencesStore.getAll();\n  }\n\n  /**\n   * Get a user object by name\n   *\n   * @param {string} name user name query\n   * @returns {Object} the found user object or undefined if not found\n   *\n   * @method getUserByName\n   * @static\n   */\n  getUserByName(name) {\n    if (_.isString(name)) {\n      var roster = AppStore.get(\"roster\");\n      var result = _.find(roster, function (user) {\n        if (_.has(user, \"name\")) {\n          return name.toLowerCase() === user.name.toLowerCase();\n        }\n      });\n      return result;\n    }\n  }\n\n  /**\n   * Get a user object by @mention\n   *\n   * @param {string} mention user mention query\n   * @returns {Object} the found user object or undefined if not found\n   *\n   * @method getUserByMention\n   * @static\n   */\n  getUserByMention(mention) {\n    if (_.isString(mention)) {\n      mention = (mention.charAt(0) === \"@\") ? mention.slice(1) : mention;\n      var roster = AppStore.get(\"roster\");\n      var result = _.find(roster, function (user) {\n        if (_.has(user, \"mention_name\")) {\n          return mention.toLowerCase() === user.mention_name.toLowerCase();\n        }\n      });\n      return result;\n    }\n  }\n\n  /**\n   * Request Addlive credentials from the server\n   *\n   * @method requestAddLiveCredentials\n   * @returns {Promise<AddLiveCredentials, AddLiveCredentialsError>}\n   */\n  requestAddLiveCredentials() {\n    return new Promise((resolve, reject) => {\n      AppActions.requestAddLiveCredentials(ConfigStore.get('jid'), (error, data) => {\n        if (error) {\n          /**\n           * @typedef {object} AddLiveCredentialsError\n           * @property {integer} code\n           * @property {string} message\n           */\n          return reject({\n            message: _.get(error, 'text.__text', ''),\n            code: parseInt(error.code, 10)\n          });\n        }\n        /**\n         * @typedef {object} AddLiveCredentials\n         * @property {integer} app_id\n         * @property {integer} user_id\n         * @property {string} scope_id\n         * @property {string} salt\n         * @property {number} expires\n         * @property {string} signature\n         */\n        resolve({\n          app_id: parseInt(data.app_id, 10),\n          user_id: parseInt(data.user_id, 10),\n          scope_id: data.scope_id,\n          salt: data.salt,\n          expires: parseInt(data.expires, 10),\n          signature: data.signature\n        });\n      });\n    });\n  }\n\n  /**\n   * Joins an AddLive video call\n   *\n   * @param {String} jid The JID that the call is connecting to\n   * @param {Boolean} audio_only Whether or not to exclude video\n   */\n  joinAddLiveCall(jid, audio_only = false) {\n    VideoActions.joinAddLiveCall({\n      jid: jid,\n      audio_only: audio_only\n    });\n  }\n\n  /**\n   * Leaves an AddLive video call\n   *\n   * @param {String} jid The JID that the call is connecting to\n   */\n  leaveAddLiveCall(jid) {\n    VideoActions.endAddLiveVideoSession(jid);\n    VideoActions.leaveAddLiveCall(jid);\n  }\n\n  /**\n   * Notifies the web app that the connection has changed\n   *\n   * @param {number} connectionStatus see {@link module:API~ConnectionStatus} for values\n   * @param {function} [callback=noop]\n   *\n   * @example\n   *  // onConnectionChanged(HC.api.ConnectionStatus.CONNECTED)\n   * @method onConnectionChanged\n   * @static\n   */\n  onConnectionChanged(ConnectionStatus, callback = _.noop) {\n    switch (ConnectionStatus) {\n      case this.ConnectionStatus.CONNECTED:\n        AppDispatcher.registerOnce('after:strophe-reconnected', callback);\n        ConnectionActions.reconnect();\n        break;\n      case this.ConnectionStatus.CONNECTING:\n        break;\n      case this.ConnectionStatus.DISCONNECTED:\n        ConnectionActions.disconnect(true);\n        break;\n      case this.ConnectionStatus.DISCONNECTING:\n        break;\n      case this.ConnectionStatus.ERROR:\n        logger.error(\"Connection error\");\n        break;\n      case this.ConnectionStatus.NETWORK_DOWN:\n        NetworkStatusActions.onNetworkDown();\n        break;\n      case this.ConnectionStatus.NETWORK_UP:\n        NetworkStatusActions.onNetworkUp();\n        break;\n      case this.ConnectionStatus.SUSPEND:\n        AppDispatcher.registerOnce('after:strophe-disconnected', callback);\n        ConnectionActions.disconnect(false);\n        break;\n      default:\n        logger.error(\"Connection status invalid\");\n        break;\n    }\n  }\n\n  /**\n   * Sets preferences\n   * User/server preferences will be automatically sorted and synced appropriately\n   * User preferences are synced to localStorage, while server preferences are\n   * synced via the /preferences api\n   *\n   * @param {Object.<key, value>} prefs see {@link prefs} for accepted keys\n   *\n   * @method setPreferences\n   * @static\n   */\n  setPreferences(prefs) {\n    PreferencesActions.savePreferences(prefs);\n  }\n\n  /**\n   * Sets user idle status\n   * Supports {\"idle\": boolean} and {\"show\": string} currently.\n   *\n   * @param {Object.<key, value>} - {\"idle\": true} or {\"idle\": false} or {\"show\": \"chat|away|xa|dnd|unavailable\"}\n   *\n   * @method setUserStatus\n   * @static\n   */\n  setUserStatus(userStatus) {\n    if (typeof userStatus !== \"object\") { return logger.error(\"API: setUserStatus: object expected\"); }\n\n    if (userStatus.show) {\n      CurrentUserActions.changeStatus(userStatus);\n    } else if (userStatus.idle) {\n      CurrentUserActions.goIdle();\n    } else {\n      CurrentUserActions.returnToActive();\n    }\n  }\n\n  /**\n   * Open the lobby\n   *\n   * @method openLobby\n   * @static\n   */\n  openLobby() {\n    RoomNavActions.openLobby();\n  }\n\n  /**\n   * Open the quick switcher\n   *\n   * @method openQuickSwitcher\n   * @static\n   */\n  openQuickSwitcher() {\n    DialogActions.showQuickSwitcherDialog();\n  }\n\n  /**\n   * Open a chat - room or 1-to-1\n   *\n   * @param {Object.<key, value>} - {\"jid\": \"jid\"}\n   *\n   * @method openChat\n   * @static\n   */\n  openChat(data) {\n    AppActions.openChatByJID(data);\n    this.focusChatInput();\n  }\n\n  /**\n   * Places focus in the chat input\n   *\n   * @method focusChatInput\n   * @static\n   */\n  focusChatInput() {\n    let chatInput = document.getElementById(AppConfig.chat_input_id);\n\n    if (chatInput) {\n      chatInput.focus();\n    }\n  }\n\n  /**\n   * Open the create room dialog\n   *\n   * @param {Object.<key, value>} - {\"room_name\": \"room name\", \"room_topic\": \"topic\", \"privacy\": \"private\" || \"public\"}\n   *\n   * @method createRoom\n   * @static\n   */\n  createRoom(data) {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.create_new_room) {\n      DialogActions.showCreateRoomDialog(data);\n    }\n  }\n\n  /**\n   * Open the delete room dialog\n   *\n   * @method deleteRoom\n   */\n  deleteRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions(),\n      { jid, name } = ChatHeaderStore.get('chat');\n    if (actions.delete_room) {\n      DialogActions.showDeleteRoomDialog({ jid, name });\n    }\n  }\n\n  /**\n   * Open the invite users dialog\n   *\n   * @method inviteUsersToRoom\n   * @static\n   */\n  inviteUsersToRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.invite_users) {\n      DialogActions.showInviteUsersDialog();\n    }\n  }\n\n  /**\n   * Open the remove users dialog\n   *\n   * @method removeUsersFromRoom\n   */\n  removeUsersFromRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.remove_users) {\n      DialogActions.showRemoveUsersDialog();\n    }\n  }\n\n  /**\n   * blur the app\n   *\n   * @method blurApp\n   * @static\n   */\n  blurApp() {\n    AppDispatcher.dispatch(\"application-blurred\");\n  }\n\n  /**\n   * focus the app\n   *\n   * @method focusApp\n   * @static\n   */\n  focusApp() {\n    AppDispatcher.dispatch(\"application-focused\");\n  }\n\n  /**\n   * Focus the search input\n   *\n   * @method focusSearch\n   * @static\n   */\n  focusSearch() {\n    AppDispatcher.dispatch(\"focus-search\");\n  }\n\n\n  /**\n   * Gets information about the active chat - room or 1-to-1\n   * @returns {Object}\n   *\n   * @method getActiveChat\n   * @static\n   */\n  getActiveChat() {\n    var jid = AppStore.get(\"active_chat\");\n    var activeChat = AppStore.data.activeRooms[jid];\n\n    return activeChat;\n  }\n\n  /**\n   * Get the list of actions that can be taken on the currently active room\n   *\n   * @method getCurrentRoomActions\n   * @return {object}\n   */\n  getCurrentRoomActions() {\n    return ChatHeaderStore.getCurrentRoomActions();\n  }\n\n  /**\n   * Open a new external window pointed to the integrations url for current user/room\n   *\n   * @method openIntegrationsWindow\n   */\n  openIntegrationsWindow() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.integrations) {\n      spi.openExternalWindow(IntegrationHelper.getIntegrationsUrl(\n        ConfigStore.get('web_server'),\n        ChatHeaderStore.get('chat').id,\n        ConfigStore.get('user_id'),\n        IntegrationHelper.API_SOURCE_ID\n      ));\n    }\n  }\n\n  /**\n   * Opens room notifications dialog, if you are in a group chat\n   * and room notifications are enabled\n   *\n   * @method openRoomNotificationsDialog\n   */\n  openRoomNotifications() {\n    let actions = ChatHeaderStore.getCurrentRoomActions(),\n      { jid, name: room_name } = ChatHeaderStore.get('chat');\n    if (actions.room_notifications) {\n      DialogActions.showRoomNotificationsDialog({ jid, room_name });\n    }\n  }\n\n  /**\n   * Archive the currently open room\n   *\n   * @method archiveRoom\n   */\n  archiveRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.archive_room) {\n      DialogActions.showArchiveRoomDialog({ archive: true });\n    }\n  }\n\n  /**\n   * Unarchive the currently open room\n   *\n   * @method unarchiveRoom\n   */\n  unarchiveRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.unarchive_room) {\n      DialogActions.showArchiveRoomDialog({ archive: false });\n    }\n  }\n\n  /**\n   * Open the edit room topic input in the chat header\n   *\n   * @method changeRoomTopic\n   */\n  changeRoomTopic() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.change_topic) {\n      RoomDropDownActions.editTopic();\n    }\n  }\n\n  /**\n   * Open the change room privacy dialog\n   *\n   * @method changeRoomPrivacy\n   */\n  changeRoomPrivacy() {\n    let actions = ChatHeaderStore.getCurrentRoomActions(),\n      { jid, name, privacy } = ChatHeaderStore.get('chat');\n    if (actions.change_privacy) {\n      DialogActions.showRoomPrivacyDialog({ jid, name, privacy });\n    }\n  }\n\n  /**\n   * Open the rename room dialog\n   *\n   * @method renameRoom\n   */\n  renameRoom() {\n    let actions = ChatHeaderStore.getCurrentRoomActions(),\n      { jid, name } = ChatHeaderStore.get('chat');\n    if (actions.rename_room) {\n      DialogActions.showRenameRoomDialog({ jid, name });\n    }\n  }\n\n  /**\n   * Enable guest access in the current room\n   *\n   * @method enableGuestAccess\n   */\n  enableGuestAccess() {\n    let actions = ChatHeaderStore.getCurrentRoomActions(),\n      { jid } = ChatHeaderStore.get('chat');\n    if (actions.enable_guest_access) {\n      RoomDropDownActions.enableGuestAccess({ jid });\n    }\n  }\n\n  /**\n   * Show disable guest access dialog\n   *\n   * @method disableGuestAccess\n   */\n  disableGuestAccess() {\n    let actions = ChatHeaderStore.getCurrentRoomActions();\n    if (actions.disable_guest_access) {\n      DialogActions.showDisableGuestAccessDialog();\n    }\n  }\n\n  /**\n   * Close the currently open chat (if it can be)\n   *\n   * @method closeActiveChat\n   * @static\n   */\n  closeActiveChat() {\n    var jid = AppStore.get(\"active_chat\");\n    if (utils.jid.is_chat(jid)) {\n      RoomNavActions.close(jid, utils.room.detect_chat_type(jid));\n    } else if (utils.jid.is_search(jid)) {\n      this.closeSearchResults();\n    }\n  }\n\n  /**\n   * Close the currently open search results (if it can be)\n   *\n   * @method closeSearchResults\n   * @static\n   */\n  closeSearchResults() {\n    RoomNavActions.closeSearchResults();\n  }\n\n  /**\n   * Gets information about the active chat - room or 1-to-1\n   * @returns {Object}\n   *\n   * @method getActiveChat\n   * @static\n   */\n  getActiveChats() {\n    return AppStore.data.activeRooms;\n  }\n\n  /**\n   * Navigate to the chat opened above this one,\n   * if this is the first chat, navigate to the last\n   *\n   * @method navigateChatUp\n   * @static\n   */\n  navigateChatUp() {\n    AppDispatcher.dispatch('navigate-rooms', {\n      direction: \"up\"\n    });\n  }\n\n  /**\n   * Navigate to the chat opened below this one,\n   * if this is the last chat, navigate to the first\n   *\n   * @method navigateChatDown\n   * @static\n   */\n  navigateChatDown() {\n    AppDispatcher.dispatch('navigate-rooms', {\n      direction: \"down\"\n    });\n  }\n\n  /**\n   * Navigate to the chat at the top of your list.  If you are at the top chat,\n   * or there are no chats open, this will do nothing.\n   *\n   * @method navigateToTopChat\n   * @static\n   */\n  navigateToTopChat() {\n    AppDispatcher.dispatch('navigate-rooms', {\n      direction: \"top\"\n    });\n  }\n\n  /**\n   * Navigate to the chat at the bottom of your list.  If you are at the bottom chat,\n   * or there are no chats open, this will do nothing.\n   *\n   * @method navigateToBottomChat\n   * @static\n   */\n  navigateToBottomChat() {\n    AppDispatcher.dispatch('navigate-rooms', {\n      direction: \"bottom\"\n    });\n  }\n\n  /**\n   * Navigate to the chat at the index specified.  If no chat is found at that index\n   * this will do nothing.\n   *\n   * @method navigateToChatAtIndex\n   * @static\n   */\n  navigateToChatAtIndex(index) {\n    AppDispatcher.dispatch('navigate-rooms', {\n      direction: \"index\",\n      index: index\n    });\n  }\n\n  /**\n   * Open the modal preferences dialog\n   *\n   * @method showPreferencesDialog\n   * @static\n   */\n  showPreferencesDialog() {\n    DialogActions.showSettingDialog();\n  }\n\n  /**\n   * Toggle sound notifications\n   *\n   * @method toggleSoundNotifications\n   * @static\n   */\n  toggleSoundNotifications() {\n    AppDispatcher.dispatch('toggle-sound-notifications');\n  }\n\n  /**\n   * Clear unread message counts\n   *\n   * @method markChatsAsRead\n   * @static\n   */\n  markChatsAsRead() {\n    AppDispatcher.dispatch('mark-chats-as-read');\n  }\n\n  /**\n   * Clear unread message counts for rooms only\n   *\n   * @method markRoomsAsRead\n   * @static\n   */\n  markRoomsAsRead() {\n    AppDispatcher.dispatch('mark-rooms-as-read');\n  }\n\n  /**\n   * Clear unread message counts for people only\n   *\n   * @method markPeopleAsRead\n   * @static\n   */\n  markPeopleAsRead() {\n    AppDispatcher.dispatch('mark-people-as-read');\n  }\n\n  /**\n   * Send a message\n   *\n   * @param {Object.<key, value>} - {\"text\": \"text message\", \"jid\": \"jid\"}\n   *\n   * @method sendMessage\n   * @static\n   */\n  sendMessage(data) {\n    data.id = data.id || ChatInputStore.get(\"message_id\");\n    data.text = utils.strings.stripHiddenCharacters(data.text);\n    data.source = \"api\";\n    ChatInputActions.sendMessage(data);\n  }\n\n  /**\n   * Append text to the current message\n   *\n   * @param data Expects the parameter data.text, which should be the text to append\n   */\n  appendMessage(data) {\n    let text = data.text;\n\n    ChatInputActions.appendMessage({text: text});\n  }\n\n  /**\n   * Open the invite a teammate dialog\n   *\n   * @method showInviteTeammatesDialog\n   * @static\n   */\n  showInviteTeammatesDialog() {\n    DialogActions.showInviteTeammatesDialog();\n  }\n\n  /**\n   * Reopen the last closed chat\n   *\n   * @method reopenLastChat\n   * @static\n   */\n  reopenLastChat() {\n    var last_chat_jid = AppStore.getLastClosedChat();\n\n    if (last_chat_jid) {\n      AppActions.navigateToChat(last_chat_jid);\n      AppActions.restoreRoomOrder(last_chat_jid);\n    }\n  }\n\n  /**\n   * Recall older message from input history\n   *\n   * @method recallOlderInputHistory\n   * @static\n   */\n  recallOlderInputHistory(e) {\n    AppDispatcher.dispatch('recall-older-message', e);\n  }\n\n  /**\n   * Recall newer message from input history\n   *\n   * @method recallNewerInputHistory\n   * @static\n   */\n  recallNewerInputHistory(e) {\n    AppDispatcher.dispatch('recall-newer-message', e);\n  }\n\n  /**\n   * Show the Desktop 4.0 release dialog - content provided\n   * by wrappers via api or config.release_dialog_content\n   *\n   * @param {object} dialogData\n   * @param {boolean} dialogData.bgDismiss allow the modal to be dismissed by a background click\n   * @param {boolean} dialogData.assetBaseUri the asset base uri\n   * @param {object} dialogData.content the content for the release dialog\n   * @param {string} dialogData.content.title the title for the dialog\n   * @param {string} dialogData.content.intro the intro text\n   * @param {array} dialogData.content.bullets the bullet points for the dialog\n   * @param {string} dialogData.content.outro the outro text\n   * @param {string} dialogData.content.cta the call to action button text\n   *\n   * @method showDesktop4Dialog\n   * @static\n   */\n  showDesktop4Dialog(dialogData) {\n    let content = _.isObject(_.get(dialogData, \"content\")) ? dialogData.content : AppStore.get(\"release_dialog_content\") || {},\n        bgDismiss = _.has(dialogData, \"bgDismiss\") ? dialogData.bgDismiss : true,\n        data = {\n          bgDismiss: bgDismiss,\n          content: content\n        };\n    DialogActions.showDesktop4Dialog(data);\n  }\n\n  /**\n   * Add a file to the chat input for uploading via fileUrl\n   *\n   * @param fileUrl\n   * @param source dragndrop or paste\n   *\n   * @method addFileForUploadWithUrl\n   * @static\n   */\n  addFileForUploadWithUrl(fileUrl, source) {\n    if (fileUrl) {\n      AppActions.addFileForUploadWithUrl(fileUrl, source);\n    }\n  }\n\n  /**\n   * Add a file to the chat input for uploading via base64 string\n   *\n   * @param base64 valid base64 string\n   * @param {string|null} [fileName]\n   * @param {string} source - paste or dragndrop\n   *\n   * @method addFileForUploadWithBase64\n   * @static\n   */\n  addFileForUploadWithBase64(base64, fileName = null, source) {\n    if (ChatInputStore.get('uploading')){\n      return false;\n    }\n\n    if (_.includes(['paste', 'dragndrop'], fileName)) {\n      source = fileName;\n      fileName = null;\n    }\n    if (base64) {\n      AppActions.addFileForUploadWithBase64(base64, fileName, source);\n    }\n  }\n\n  /**\n   * Trigger a file uploader error message\n   *\n   * @method showFileUploadError\n   * @param {string} [file_name] - UI will show blank if not provided\n   * @param {string} key - one of the HC.api.FileUploaderErrors enums\n   * @static\n   */\n  showFileUploadError(file_name, key) {\n    let jid = AppStore.get('active_chat');\n    ChatInputActions.expandAttachment({ jid, file_name });\n    FileUploaderActions.dispatchFileError({ jid, key });\n  }\n\n  /**\n   * Open the file chooser dialog\n   *\n   * @method openFilePicker\n   * @static\n   */\n  openFilePicker() {\n    FileUploaderActions.openFilePicker();\n  }\n\n  /**\n   * Clear active web cookies\n   *\n   * @param cb callback to be executed on success or failure\n   *\n   * @method clearWebCookies\n   */\n  clearWebCookies(cb = _.noop) {\n    AppActions.clearWebCookies(cb);\n  }\n\n  /**\n   * Revoke Oauth2 token\n   *\n   * @param cb callback to be executed on success or failure\n   *\n   * @method revokeOauth2Token\n   */\n  revokeOauth2Token(cb = _.noop) {\n    AppActions.revokeOauth2Token(cb);\n  }\n\n  /**\n   * Sanitize Sentry errors\n   *\n   * @param data Sentry error objects\n   * @returns {Object} sanitized error object for Sentry\n   *\n   * @method sanitizeError\n   */\n  sanitizeError(data) {\n    if (data) {\n      return sentryHelper.sanitize(data);\n    }\n  }\n\n  /**\n   * Toggles the left sidebar\n   *\n   * @method toggleLeftSidebar\n   * @static\n   */\n  toggleLeftSidebar() {\n    var toggle = !PreferencesStore.shouldShowNavigationSidebar();\n    LayoutActions.setLeftSidebarVisibility(toggle);\n  }\n\n  /**\n   * Toggles the right sidebar for the active chat type\n   *\n   * @method toggleRightSidebar\n   * @static\n   */\n  toggleRightSidebar() {\n    var active_chat = AppStore.get(\"active_chat\"),\n        chat_type = utils.room.detect_chat_type(active_chat),\n        visibility = false;\n\n    if (chat_type === \"chat\") {\n      visibility = !PreferencesStore.shouldShowChatSidebar();\n      LayoutActions.setRightChatSidebarVisibility(visibility);\n    } else if (chat_type === \"groupchat\") {\n      visibility = !PreferencesStore.shouldShowGroupChatSidebar();\n      LayoutActions.setRightGroupChatSidebarVisibility(visibility);\n    }\n  }\n\n  /**\n   * Gets the temporary signed url and download url for the specified file\n   * @param fileUrl\n   */\n  getFileUrls(fileUrl) {\n    return new Promise((resolve, reject) => {\n      let fetchSignedFile = (url) => {\n        AppDispatcher.dispatch('API:fetch-signed-file', {\n          url: url\n        }, resp => {\n          if (resp instanceof DALError) {\n            reject(resp);\n          } else {\n            resolve({\n              url: url,\n              signedUrl: resp.temp_url,\n              downloadUrl: resp.temp_download_url\n            });\n          }\n        });\n      };\n\n      if (RosterStore.isSignedFile(fileUrl)) {\n        let url = fileUrl;\n        if (!RosterStore.isFileUrlAuthenticated(url)) {\n          url = RosterStore.getPublicUrlFromThumbnail(url);\n        }\n\n        fetchSignedFile(url);\n      } else {\n        resolve({\n          url: fileUrl,\n          signedUrl: fileUrl,\n          downloadUrl: fileUrl\n        });\n      }\n    });\n  }\n\n  /**\n   * Lets the app know that the user is on a call\n   */\n  onVideoConferenceJoined() {\n    AppDispatcher.dispatch('enso.video-conference-joined');\n  }\n\n  /**\n   * Lets the app know that the user has left the call\n   */\n  onVideoConferenceLeft() {\n    AppDispatcher.dispatch('enso.video-conference-left');\n  }\n\n  startVideoCall() {\n    let jid = AppStore.get('active_chat');\n\n    if (!_isVideoEnabled(jid)) {\n      return;\n    }\n\n    let chat = AppStore.get('activeRooms')[jid];\n    let enso_enabled = ChatHeaderStore.get('web_client_enso_video_enabled');\n    let data = {\n      jid,\n      name: chat.name,\n      service: enso_enabled ? VideoServiceKeys.ENSO : VideoServiceKeys.ADDLIVE\n    };\n\n    if (utils.jid.is_room(jid)) {\n      data.room_id = chat.id;\n      ChatHeaderActions.startEnsoRoomVideo(data);\n    } else {\n      data.audio_only = false;\n      ChatHeaderActions.startCall(data);\n    }\n  }\n\n  isVideoEnabled() {\n    let jid = AppStore.get('active_chat');\n    return _isVideoEnabled(jid);\n  }\n\n  isFileSharingEnabled() {\n    let jid = AppStore.get('active_chat');\n\n    if (!utils.jid.is_chat(jid)) {\n      return false;\n    }\n\n    return ChatInputStore.get('can_share_files');\n  }\n\n  /**\n   * Lets the app know that the user  is on addlive call\n   */\n  onAddLiveCall() {\n    CurrentUserActions.onCall();\n  }\n\n  /**\n   * Scrolls down in chat on zoom\n   */\n  scrollDownOnZoom() {\n    AppDispatcher.dispatch('scroll-down-on-zoom');\n  }\n }\n\nexport default new API();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/api.js\n **/","var AppDispatcher = require(\"dispatchers/app_dispatcher\");\n\nmodule.exports = {\n\n  savePreferences: function(data) {\n    AppDispatcher.dispatch(\"save-preferences\", data);\n  },\n\n  addRoomToIntegrationDiscoveryIgnoreList: function(roomId) {\n    AppDispatcher.dispatch(\"add-room-integration-discovery-ignore-list\", roomId);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/preferences_actions.js\n **/","/**\n * DialogActions\n *\n * Exposed a window. Used for exposing actions to non react managed actions\n * like mention clicks, etc.\n */\n\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppHeaderStore from 'stores/app_header_store';\n\nexport default {\n\n  closeDialog: function() {\n    AppDispatcher.dispatch(\"hide-modal-dialog\");\n  },\n\n  /*\n   showAddonDialog\n\n   Display an ADG dialog overlayed over the chat, with the content provided by an add-on.\n\n   @param {object} data - Object with properties addon_key, addon_url, addon_options & module_key.\n    addon_key: identifier as in the add-on's the descriptor\n    addon_url: url from with the dialog content will be retrieved via HTTP GET\n    addon_options: object representing UI toggles: {\n                       resize (boolean) - enable / disable the auto-resizer\n                       width / height - as pixels or % of the web client\n                       chrome (boolean) - if the dialog should have a header and footer\n                       header (text) - the text to be written into the dialog header\n                    }\n    module_key: identifier of the add-on module corresponding to the dialog, as in its descriptor\n   */\n  showAddonDialog: function(data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"addon-dialog\",\n      dialog_data: {\n        addon_key: data.addon_key,\n        module_key: data.module_key,\n        addon_url: data.addon_url,\n        addon_options: data.addon_options\n      }\n    });\n  },\n\n  showIntegrationDialog: function(data){\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"integration-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showIntegrationsManagementDialog: function(data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"integrations-management-dialog\",\n      dialog_data: data\n    });\n  },\n\n  startBtnLoading: function() {\n    AppDispatcher.dispatch(\"modal-dialog-btn-loading\", {\n      loading: true\n    });\n  },\n\n  stopBtnLoading: function() {\n    AppDispatcher.dispatch(\"modal-dialog-btn-loading\", {\n      loading: false\n    });\n  },\n\n  showSettingDialog: function(data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"settings-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showInviteTeammatesDialog: function (data) {\n    var user_is_admin = AppHeaderStore.get(\"user_is_admin\"),\n        invite_url = AppHeaderStore.get(\"invite_url\");\n\n    if (user_is_admin || invite_url) {\n      AppDispatcher.dispatch(\"show-modal-dialog\", {\n        dialog_type: \"invite-teammates-dialog\",\n        dialog_data: data || {}\n      });\n    }\n  },\n\n  showInviteUsersDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"invite-users-dialog\",\n      dialog_data: data || false\n    });\n  },\n\n  showRemoveUsersDialog: function () {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"remove-users-dialog\",\n      dialog_data: false\n    });\n  },\n\n  showCreateRoomDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"create-room-dialog\",\n      dialog_data: data || false\n    });\n  },\n\n  showRoomPrivacyDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"room-privacy-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showRenameRoomDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"rename-room-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showDeleteRoomDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"delete-room-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showArchiveRoomDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"archive-room-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showDisableGuestAccessDialog: function () {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"disable-guest-dialog\",\n      dialog_data: false\n    });\n  },\n\n  showRoomNotificationsDialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"room-notifications-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showKeyboardShortcutsDialog: function (shortcuts) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"keyboard-shortcuts-dialog\",\n      dialog_data: {\n        shortcuts: shortcuts\n      }\n    });\n  },\n\n  showQuickSwitcherDialog: function(hideHint = false) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"quick-switcher-dialog\",\n      dialog_data: {\n        bgDismiss: true,\n        hideHint: (hideHint === true)\n      }\n    });\n  },\n\n  showReleaseNotesDialog: function () {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"release-notes-dialog\",\n      dialog_data: {\n        bgDismiss: true\n      }\n    });\n  },\n\n  showDesktop4Dialog: function (data) {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"desktop-4-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showEditMessageDialog: function(data) {\n    if (!data) {\n      return;\n    }\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"edit-message-dialog\",\n      dialog_data: {\n        bgDismiss: false,\n        message: data\n      }\n    });\n  },\n\n  showDeleteMessageDialog: function(data) {\n    if (!data) {\n      return;\n    }\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"delete-message-dialog\",\n      dialog_data: {\n        bgDismiss: false,\n        message: data\n      }\n    });\n  },\n\n  showNotEditableDialog: function(data) {\n    if (!data) {\n      return;\n    }\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"not-editable-dialog\",\n      dialog_data: {\n        action: data.action\n      }\n    });\n  },\n\n  showWelcomeDialog: function() {\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"welcome-dialog\",\n      dialog_data: false\n    });\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/dialog_actions.js\n **/","/**\n * MainLayoutActions\n */\n\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\n\nexport default {\n\n  setLeftSidebarVisibility: function (visibility) {\n    let data = {\n      [ClientPreferencesKeys.SHOW_NAVIGATION_SIDEBAR]: visibility\n    };\n    AppDispatcher.dispatch(\"save-preferences\", data);\n    AppDispatcher.dispatch(\"left-column-width-updated\");\n  },\n\n  setRightChatSidebarVisibility: function (visibility) {\n    let data = {\n      [ClientPreferencesKeys.SHOW_CHAT_SIDEBAR]: visibility\n    };\n    AppDispatcher.dispatch(\"save-preferences\", data);\n  },\n\n  setRightGroupChatSidebarVisibility: function (visibility) {\n    let data = {\n      [ClientPreferencesKeys.SHOW_GROUPCHAT_SIDEBAR]: visibility\n    };\n    AppDispatcher.dispatch(\"save-preferences\", data);\n  },\n\n  saveLeftColumnWidth: function (width) {\n    let data = {\n      [ClientPreferencesKeys.LEFT_COLUMN_WIDTH]: width\n    };\n    AppDispatcher.dispatch(\"save-preferences\", data);\n    AppDispatcher.dispatch(\"left-column-width-updated\");\n  },\n\n  saveRightColumnWidth: function (width) {\n    let data = {\n      [ClientPreferencesKeys.RIGHT_COLUMN_WIDTH]: width\n    };\n    AppDispatcher.dispatch(\"save-preferences\", data);\n    AppDispatcher.dispatch(\"right-column-width-updated\");\n  },\n\n  setRightColumnWidthIsChanging: function (changing) {\n    AppDispatcher.dispatch(\"set-right-sidebar-visible-width-is-changing\", changing);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/layout_actions.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\nimport FlagActions from 'actions/flag_actions';\nimport PreferencesStore from './preferences_store';\nimport ChatHeaderStrings from 'strings/chat_header_strings';\nimport PermissionsStore from './permissions_store';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport Store from 'lib/core/store';\nimport utils from 'helpers/utils';\nimport moment from 'moment';\nimport spi from 'spi';\n\nclass ChatHeaderStore extends Store {\n\n  constructor() {\n\n    super();\n\n    this.default_profile = {\n      email: '',\n      mention_name: '',\n      name: '',\n      photo_large: '',\n      photo_small: '',\n      timezone: false,\n      title: ''\n    };\n\n    this.local = {\n      profiles: {}\n    };\n  }\n\n  getDefaults() {\n    return {\n      initialized: false,\n      active_chat: null,\n      path_prefix: '',\n      type: '',\n      rooms: {},\n      topic_editing: false,\n      chat: {\n        jid: '',\n        name: '',\n        topic: null,\n        photo_large: '',\n        title: '',\n        status: '',\n        privacy: '',\n        is_archived: '0',\n        email: '',\n        presence: {},\n        time: '',\n        loading_profile: true\n      },\n      video_enabled: false,\n      user_is_admin: false,\n      current_user: {},\n      per_room_notifications_enabled: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'hc-init': (config) => {\n        this.handleConfig(config);\n      }\n    });\n    AppDispatcher.register({\n      'app-state-ready': () => {\n        this.set('initialized', true);\n      },\n      'updated:emoticons': ({ path_prefix }) => {\n        this.set({ path_prefix });\n      },\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:current_user': (user) => {\n        this.local.profiles[user.user_jid] = _.assign({\n          name: user.user_name,\n          mention_name: user.mention\n        }, user);\n        this.set({\n          current_user: user\n        });\n      },\n      'updated:activeRooms': (rooms) => {\n        this.handleRoomsUpdate(rooms);\n        spi.onRoomActionsChanged(this.getCurrentRoomActions());\n      },\n      'updated:profiles': (profiles) => {\n        this.handleProfilesUpdate(profiles);\n      },\n      'updated:roster': (roster) => {\n        this.handleRosterUpdate(roster);\n      },\n      'updated:active_chat': (jid) => {\n        this.data.active_chat = jid;\n        this.updateRoomHeaderState(jid);\n      },\n      'after:updated:active_chat': () => {\n        spi.onRoomActionsChanged(this.getCurrentRoomActions());\n      },\n      'before:set-route': (data) => {\n        if (data.jid !== this.data.active_chat) {\n          this.resetChat(data.jid);\n        }\n      },\n      'edit-topic': () => {\n        this.set('topic_editing', true);\n      },\n      'dismiss-topic-edit': () => {\n        this.set({\n          'topic_editing': false\n        });\n      },\n      'set-topic': (topic) => {\n        this.handleSetTopic(topic);\n      },\n      'updated:preferences': () => {\n        const jid = this.data.active_chat;\n        if (utils.jid.is_private_chat(jid) && this.data.rooms[jid]) {\n          this._updateChatTime(this.data.rooms[jid]);\n          this.set('chat', this.data.chat);\n        }\n      }\n    });\n  }\n\n  handleRoomsUpdate(updatedRooms) {\n    var currentRooms = this.data.rooms,\n        activeChat = this.data.active_chat,\n        deleted = _.difference(_.keys(currentRooms), _.keys(updatedRooms));\n\n    if (deleted.length) {\n      currentRooms = _.omit(currentRooms, deleted);\n    }\n\n    let update = {\n          rooms: _.merge(currentRooms, updatedRooms)\n        };\n\n    if (updatedRooms[activeChat]) {\n      update.chat = _.merge(this.data.chat, updatedRooms[activeChat]);\n    }\n\n    this.set(update);\n    this.updateRoomHeaderState(activeChat);\n  }\n\n  handleProfilesUpdate(profiles) {\n    _.map(profiles, (profile, jid) => {\n      this.local.profiles[jid] = profile;\n      if (this.data.rooms[jid]) {\n        this.data.rooms[jid] = _.merge(this.data.rooms[jid], profile);\n      }\n    });\n    this.updateRoomHeaderState(this.data.active_chat);\n  }\n\n  updateProfile(jid, profile) {\n    const keys = _.keys(this.default_profile );\n    _.forEach(keys, (key) => {\n      if (profile[key]) {\n        this.local.profiles[jid][key] = profile[key];\n      }\n    });\n  }\n\n  handleRosterUpdate(roster) {\n    let rooms = _.cloneDeep(this.data.rooms);\n    let profiles = this.local.profiles;\n    const updateProfile = this.updateProfile.bind(this);\n\n    _.forEach(rooms, (room, jid) => {\n      if (room && roster[jid]) {\n        let presence = roster[jid].presence;\n\n        room.presence = { ...presence };\n        room.name = roster[jid].name;\n        if (profiles[jid]) {\n          updateProfile(jid, room);\n        }\n      }\n    });\n\n    this.handleRoomsUpdate(rooms);\n  }\n\n  resetChat(jid) {\n    var chat = _.assign({}, this.data.chat, this.data.rooms[jid]);\n    chat.loading_profile = true;\n    this.set(\"chat\", chat);\n  }\n\n  updateRoomHeaderState(jid) {\n    clearTimeout(this.timeout);\n\n    if (!jid || utils.jid.is_lobby(jid) || !this.data.rooms[jid]) {\n      return;\n    }\n\n    let updatedChat = this.data.rooms[jid];\n    let currentChat = this.data.chat;\n    let updatedChatType = this.data.rooms[jid].type;\n    let currentChatType = this.data.type;\n    let localProfile = this.local.profiles[jid];\n    let defaultPanel = {\n      chat: 'files',\n      groupchat: 'roster'\n    };\n\n    if (currentChatType !== updatedChatType) {\n      this.data.active_panel = defaultPanel[updatedChatType];\n    }\n    if (updatedChatType === 'chat' && updatedChat) {\n      if (localProfile) {\n        updatedChat.loading_profile = false;\n      }\n      _.merge(updatedChat, _.clone(this.default_profile), localProfile);\n      this._updateChatTime(updatedChat);\n      this.timeout = setTimeout( () => {\n        this.updateRoomHeaderState(jid);\n      }, 60000);\n    }\n\n    var chat = _.assign({}, currentChat, updatedChat);\n    this.set({\n      active_chat: jid,\n      type: chat.type,\n      chat: chat,\n      active_panel: this.data.active_panel\n    });\n  }\n\n  _updateChatTime(chat){\n    const format = PreferencesStore.shouldUse24HrTime() ? 'ddd HH:mm' : 'ddd h:mm A';\n    if (chat.timezone) {\n      var timezone_offset = parseFloat(chat.timezone.utc_offset);\n      this.data.chat.time = moment().utcOffset(timezone_offset).format(format);\n    } else {\n      this.data.chat.time = moment().format(format);\n    }\n  }\n\n  getCurrentRoomActions() {\n    let chat = this.data.chat,\n      activeJid = this.data.active_chat,\n      isLobby = activeJid === 'lobby',\n      isSearch = activeJid === 'search',\n      isRoom = this.data.type === 'groupchat' && !isLobby && !isSearch,\n      isAdmin = PermissionsStore.get('user_is_room_admin'),\n      isPublic = chat.privacy === 'public',\n      isArchived = utils.room.is_archived(chat);\n\n    if (isRoom) {\n      return {\n        room_notifications: !!this.data.per_room_notifications_enabled,\n        integrations: PermissionsStore.canManageRoomIntegrations() && !isArchived,\n        create_new_room: PermissionsStore.canCreateRoom(),\n        invite_users: (isPublic || !isPublic && isAdmin) && !isArchived,\n        remove_users: !isPublic && isAdmin && !isArchived,\n        enable_guest_access: PermissionsStore.canToggleGuestAccess() && !chat.guest_url,\n        disable_guest_access: PermissionsStore.canToggleGuestAccess() && !!chat.guest_url,\n        archive_room: isAdmin && !isArchived,\n        unarchive_room: isAdmin && isArchived,\n        change_topic: !isArchived,\n        change_privacy: isAdmin && !isArchived,\n        delete_room: isAdmin && !isArchived,\n        rename_room: isAdmin && !isArchived\n      };\n    }\n\n    return {\n      room_notifications: false,\n      integrations: false,\n      create_new_room: PermissionsStore.canCreateRoom(),\n      invite_users: false,\n      remove_users: false,\n      enable_guest_access: false,\n      disable_guest_access: false,\n      archive_room: false,\n      unarchive_room: false,\n      change_topic: false,\n      change_privacy: false,\n      delete_room: false,\n      rename_room: false\n    };\n  }\n\n  handleSetTopic(topic) {\n    topic = topic.trim();\n\n    if (topic.length > AppConfig.max_topic_text_length) {\n      FlagActions.showFlag({\n        type: \"error\",\n        body: this._flagBody(ChatHeaderStrings.topic_length_error(AppConfig.max_topic_text_length)),\n        close: \"auto\"\n      });\n      topic = topic.substring(0, AppConfig.max_topic_text_length);\n    }\n\n    this.data.chat.topic = topic;\n\n    AppDispatcher.dispatch('send-topic', {\n      jid: this.data.chat.jid,\n      topic: topic\n    });\n    this.data.topic_editing = false;\n  }\n\n  _flagBody(error_msg) {\n    return () => (\n      <div>\n        <p className=\"hc-message-body\">{error_msg}</p>\n      </div>\n    );\n  }\n\n  handleConfig(config) {\n    this.set({\n      active_chat: PreferencesStore.get('chatToFocus') || this.data.active_chat,\n      video_enabled: _.get(config, \"video_chat_enabled\") && _.get(config, 'feature_flags.web_client_video_chat'),\n      per_room_notifications_enabled: _.get(config, 'feature_flags.web_client_per_room_notifications'),\n      web_client_integrations_enabled: IntegrationHelper.isFeatureEnabled(config),\n\n      // Defaulting this feature flag to true because existing deployments of HCS don't include this flag\n      web_client_addlive_video_enabled: _.get(config, 'feature_flags.web_client_addlive_video', true),\n\n      web_client_enso_video_enabled: _.get(config, 'feature_flags.web_client_enso_video', false),\n      web_client_enso_room_video_enabled: _.get(config, 'feature_flags.web_client_enso_room_video', false)\n    });\n  }\n\n}\n\nmodule.exports = new ChatHeaderStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/chat_header_store.js\n **/","export default {\n  default_topic: `This is the room topic. Double click to change it.`,\n  loading: `Loading…`,\n  beta: function(feature){\n    return `Still baking! The ${feature} feature is not in the beta, but will be soon.`;\n  },\n  enso_video: `HipChat Video`,\n  room_notifications: `Room Notifications`,\n  integrations: `Integrations`,\n  create_new_room: `Create New Room…`,\n  invite_users: `Invite People`,\n  remove_users: `Remove People`,\n  disable_guest: `Disable Guest Access`,\n  guest_enabled: `Guest Access Enabled`,\n  guest_disabled: `Guest Access Disabled`,\n  guest_access_on: `Guest Access On`,\n  enable_guest: `Enable Guest Access`,\n  archive: `Archive`,\n  unarchive: `Unarchive`,\n  change_topic: `Change Topic`,\n  change_privacy: `Change Privacy`,\n  delete: `Delete`,\n  rename: `Rename`,\n  files: `Files`,\n  links: `Links`,\n  people: `People`,\n  room_actions: `Room actions`,\n  show_roster: `Show people`,\n  hide_roster: `Hide people`,\n  show_files: `Show files`,\n  hide_files: `Hide files`,\n  show_links: `Show links`,\n  hide_links: `Hide links`,\n  show_integrations: `Show integrations`,\n  hide_integrations: `Hide integrations`,\n  show_sidebar: `Show sidebar`,\n  hide_sidebar: `Hide sidebar`,\n  video_call: `Make a video call`,\n  audio_call: `Make an audio call`,\n  hipchat_video: `AddLive`,\n  topic_length_error: function(maxlength) {\n    return `Maximum topic length is ${maxlength}.`;\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/chat_header_strings.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport ConfigStore from 'stores/configuration_store';\nimport Store from 'lib/core/store';\nimport utils from 'helpers/utils';\n\nclass PermissionsStore extends Store {\n\n  constructor() {\n    super();\n    this._hasRoomPermissionCheck = _.memoize(this._hasRoomPermission);\n  }\n\n  getDefaults() {\n    return {\n      permissions: {},\n      room_roles: {},\n      room_permissions: {},\n      current_room: null,\n      user_is_admin: false,\n      user_is_room_admin: false,\n      current_user: {},\n      invite_url: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'hc-init': (data) => {\n        this._init(data);\n      }\n    });\n\n    AppDispatcher.register({\n      'updated:config': (data) => {\n        this._init(data);\n      },\n      'updated:permissions': (perms) => {\n        this.set('permissions', perms);\n      },\n      'updated:current_user': (user) => {\n        this.set('current_user', user);\n        this._updateCurrentRoomRoles();\n      },\n      'updated:activeRooms': (rooms) => {\n        let roomRolesInformation = _.mapValues(rooms, room => ({admins: room.admins, owner: room.owner}));\n        let updatedRoomRoles = _.merge(this.data.room_roles, roomRolesInformation);\n\n        this.set('room_roles', updatedRoomRoles);\n        this._updateCurrentRoomRoles();\n      },\n      'updated:active_chat': (jid) => {\n        this._clearPermissionsCache();\n        this.data.current_room = jid;\n        this._updateCurrentRoomRoles();\n      },\n      'DAL:handle-joined-rooms': (rooms) => {\n        this._updateRoomPermissions(rooms);\n      }\n    });\n  }\n\n  _init(data) {\n    this.set({\n      user_is_admin: data.is_admin,\n      invite_url: data.invite_url\n    });\n  }\n\n  canCreateRoom() {\n    var permissions = this.data.permissions;\n    return permissions.create_rooms === \"all\" || (permissions.create_rooms === \"admins\" && this.data.user_is_admin);\n  }\n\n  canInviteUsersToGroup() {\n    return !ConfigStore.get('feature_flags').hide_invite_your_team_button && (this.data.user_is_admin === true || this.data.invite_url);\n  }\n\n  canViewGuestAccess() {\n    return this._hasRoomPermissionCheck('room:view_guest_access');\n  }\n\n  canToggleGuestAccess() {\n    return this._hasRoomPermissionCheck('room:toggle_guest_access');\n  }\n\n  _hasRoomPermission(permission) {\n    let user_jid = _.get(this.data.current_user, \"jid\"),\n        current_room_permissions = this.data.room_permissions[this.data.current_room] || {},\n        current_user_room_permissions = current_room_permissions[user_jid] || [];\n\n    return current_user_room_permissions.indexOf(permission) !== -1;\n  }\n\n  canManageRoomIntegrations(){\n    return this.data.user_is_admin === true\n      || this.data.user_is_room_admin === true\n      || this.data.permissions.manage_room_integrations === 'all';\n  }\n\n  canUpdateRoomIntegrations() {\n    return this.data.user_is_admin === true\n      || this.data.user_is_room_admin === true;\n  }\n\n  _updateRoomPermissions(rooms) {\n    let user_jid = this.data.current_user.jid;\n    utils.toArray(rooms).forEach((room) => {\n      _.set(this.data.room_permissions, [room.jid, user_jid], room.permissions);\n    });\n    this._clearPermissionsCache();\n    this.set('room_permissions', this.data.room_permissions);\n  }\n\n  _updateCurrentRoomRoles() {\n    let current_room_admins = _.get(this.data.room_roles, [this.data.current_room, 'admins'], []);\n    let current_room_owner = _.get(this.data.room_roles, [this.data.current_room, 'owner'], null);\n    let user_is_room_admin = utils.user.is_admin(current_room_admins, current_room_owner, this.data.current_user);\n\n    this.set({\n      user_is_room_admin: user_is_room_admin\n    });\n  }\n\n  _clearPermissionsCache() {\n    this._hasRoomPermissionCheck.cache.clear();\n  }\n\n  clear() {\n    super.clear();\n    this._clearPermissionsCache();\n  }\n\n  reset() {\n    super.reset();\n    this._clearPermissionsCache();\n  }\n\n}\n\nmodule.exports = new PermissionsStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/permissions_store.js\n **/","import AppConfig from 'config/app_config';\nimport Store from 'lib/core/store';\nimport RosterStore from './roster_store';\nimport PreferencesStore from './preferences_store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport utils from 'helpers/utils';\nimport { chatSearch } from 'helpers/chat_search';\nimport Strings from 'strings/file_input_errors';\nimport Presence from 'lib/enum/presence';\nimport { commands as slashCommands } from 'helpers/slash_command_helper';\nimport { sort_users as sortUsers } from 'helpers/user_utils';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport KeyboardShortcuts from 'helpers/keyboard_shortcuts';\n\nclass ChatInputStore extends Store {\n\n  constructor() {\n\n    super();\n\n    this.local = {\n      unsentText: {}, // map of last input text value\n      uploadingStatus: {}, // map of jid to uploading status\n      allRooms: {}, // map of allRooms to get active chat data needed for store\n      guests: [], // local property for mention autocomplete, should not trigger a render\n      members: [], // local property for mention autocomplete, should not trigger a render\n      users: {}, // local property for mention autocomplete, should not trigger a render\n      room_privacy: '', // local property for mention autocomplete, should not trigger a render\n      caret_position: 0, // current caret position of the input, should not trigger a render\n      input_history: {}, // map of chat input text history\n      input_history_index: {}, // map of current index of chat input history in use\n      unsent_text_before_recall: {}, // map of unsent text in input typed before recalling input history\n      upload_progress: {}\n    };\n  }\n\n  getDefaults(){\n    return {\n      active_autocomplete: null,\n      active_chat: null,\n      active_chat_id: null,\n      attachment_expanded: false,\n      can_share_files: true,\n      can_use_oto_chats: true,\n      chat_type: '',\n      default_mentions: _.map(AppConfig.core_mentions, (mention) => {\n        return {\n          jid: mention.jid,\n          name: mention.name,\n          mention_name: mention.mention_name,\n          presence: {\n            show: Presence.AVAILABLE\n          }\n        };\n      }),\n      emoticon_list: [],\n      emoticon_text: '',\n      emoticon_selected_item: 0,\n      emoticon_results_count: 0,\n      emoticon_regex: AppConfig.emoticon_regex,\n      file: null,\n      file_error: false,\n      file_error_message: '',\n      file_name: '',\n      mention_list: [],\n      mention_text: '',\n      mention_selected_item: 0,\n      mention_results_count: 0,\n      mention_regex: AppConfig.mention_regex,\n      message_id: 0,\n      new_forced_caret_position: 0,\n      path_prefix: '',\n      post_emoticon_text: '',\n      post_mention_text: '',\n      pre_emoticon_text: '',\n      pre_mention_text: '',\n      room_is_archived: true,\n      should_animate_avatar: true,\n      slash_command_list: [],\n      slash_command_results_count: 0,\n      slash_command_selected_item: 0,\n      smileys: {},\n      text: '',\n      uploading: false,\n      upload_progress: null,\n      user_is_admin: false,\n      user_is_guest: false,\n      user_state: 'active',\n      video_enabled: false,\n      keyboard_shortcuts: null,\n      keyboard_shortcuts_initialized: false,\n      web_server: ''\n    };\n  }\n\n  registerListeners() {\n\n    AppDispatcher.registerOnce({\n      'hc-init': (config) => {\n        this.handleConfig(config);\n      }\n    });\n\n    AppDispatcher.register({\n      'app-state-ready': () => {\n        this.set('initialized', true);\n\n        if (!this.data.keyboard_shortcuts_initialized) {\n          this.set('keyboard_shortcuts_initialized', true);\n          KeyboardShortcuts.init(this.data.keyboard_shortcuts);\n        }\n      },\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:preferences': () => {\n        this.handlePreferences();\n      },\n      'updated:current_user': (data) => {\n        this.data.user_is_admin = !!data.is_admin;\n        this.data.user_is_guest = !!data.is_guest;\n      },\n      'updated:web_server': (server) => {\n        this.data.web_server = server;\n      },\n      'updated:permissions': (perms) => {\n        this.set({\n          can_share_files: perms.file_sharing === 'all',\n          can_use_oto_chats: perms.oto_chat === 'all'\n        });\n      },\n      'close-room': (data) => {\n        this.deleteInputHistory(data.jid);\n        this.deleteUnsentText(data.jid);\n        this.deleteUploadingStatus(data.jid);\n      },\n      'updated:activeRooms': (rooms) => {\n        this.handleActiveRoomsUpdate(rooms);\n      },\n      'send-message': (data) => {\n        this.saveInputHistory(data);\n        this.resetHistoryIndex(data.jid);\n        this.data.message_id++;\n        if (data.source !== 'api') {\n          this.set({\n            text: '',\n            message_id: this.data.message_id,\n            user_state: 'active'\n          });\n        }\n      },\n      'initiate-edit-message': (msg) => {\n        let isExpired = Date.now() - (msg.time * 1000) > AppConfig.edit_message_threshold;\n        if (isExpired) {\n          DialogActions.showNotEditableDialog({action: 'edit'});\n        } else if (!msg.is_deleted) {\n          DialogActions.showEditMessageDialog(msg);\n        }\n      },\n      'initiate-delete-message': (msg) => {\n        let isExpired = Date.now() - (msg.time * 1000) > AppConfig.edit_message_threshold;\n        if (isExpired) {\n          DialogActions.showNotEditableDialog({action: 'delete'});\n        } else if (!msg.is_deleted) {\n          DialogActions.showDeleteMessageDialog(msg);\n        }\n      },\n      'clear-messages': () => {\n        this.clearText();\n      },\n      'clear-chat-input': () => {\n        this.clearText();\n      },\n      'recall-newer-message': (e) => {\n        if (this.isFocused()) {\n          this.recallNewerMessage();\n          e.preventDefault();\n        }\n      },\n      'recall-older-message': (e) => {\n        if (this.isFocused()) {\n          this.recallOlderMessage();\n          e.preventDefault();\n        }\n      },\n      'updated:smileys': (data) => {\n        let smileys = _.keyBy(_.keyBy(data, 'file'), 'shortcut');\n        this.set({ smileys });\n      },\n      'updated:emoticons': (data) => {\n        this.set({\n          path_prefix: data.path_prefix,\n          emoticons: data.icons\n        });\n      },\n      'before:updated:active_chat': () => {\n        this.setUnsentText(this.data.active_chat);\n        this.setUploadingStatus(this.data.active_chat);\n      },\n      'updated:active_chat': (jid) => {\n        let data = _.assign({}, {\n          active_chat: jid,\n          active_chat_id: this._getActiveChatId(jid),\n          chat_type: utils.room.detect_chat_type(jid),\n          room_is_archived: utils.room.is_archived(this.local.allRooms[jid]),\n          text: this.getUnsentText(jid),\n          upload_progress: this.getUploadProgress(jid)\n        }, this.getUploadingStatus(jid));\n\n        this.set(data);\n\n        if (this.data.file\n          && this.data.attachment_expanded\n          && this.data.file.file_obj\n          && !this.data.file_error\n          && !this.data.uploading) {\n          AppDispatcher.dispatch('open-tooltip', {\n            type: 'upload_preview',\n            data: {\n              file: this.data.file.file_obj\n            }\n          });\n        } else {\n          AppDispatcher.dispatch('close-tooltip', {\n            type: 'upload_preview'\n          });\n        }\n      },\n      'upload-file': () => {\n        this.set({\n          uploading: true\n        });\n      },\n      'upload-successful': ({ jid, text }) => {\n        this.updateUploadingStatus(jid, {\n          uploading: false,\n          attachment_expanded: false,\n          file: null,\n          file_extension: '',\n          file_name: ''\n        });\n        if (jid === this.data.active_chat &&\n            text === this.data.text) {\n              this.clearText();\n        }\n        if (jid !== this.data.active_chat &&\n            text === this.local.unsentText[jid]){\n            delete this.local.unsentText[jid];\n        }\n      },\n      'upload-failed': (data) => {\n        this.updateUploadingStatus(data.jid, {\n          uploading: false\n        });\n      },\n      'upload-progress-update': ({ jid, percentage }) => {\n        this.local.upload_progress[jid] = percentage;\n        this.updateUploadProgress(jid);\n      },\n      'upload-complete': ({ jid }) => {\n        delete this.local.upload_progress[jid];\n        this.updateUploadProgress(jid);\n      },\n      'set-message-value': (text) => {\n        this.set('text', text);\n        this.resetHistoryIndex(this.data.active_chat);\n      },\n      'append-message-value': (text) => {\n        this.set('text', _.get(this.data, 'text', '') + text);\n      },\n      'expand-attachment': (data) => {\n        this.updateUploadingStatus(data.jid, {\n          attachment_expanded: true,\n          file: data.file,\n          file_name: data.file_name,\n          file_error: false,\n          file_extension: utils.file.get_extension(data.file_name),\n          file_selection_source: data.file_selection_source\n        });\n      },\n      'close-attachment': (data) => {\n        this.updateUploadingStatus(data.jid, {\n          attachment_expanded: false,\n          file: null,\n          file_name: '',\n          file_error: false,\n          file_extension: ''\n        });\n      },\n      'set-chat-caret-position': (caretPosition) => {\n        this.local.caret_position = caretPosition;\n      },\n      'reset-new-forced-caret-position': () => {\n        this.set('new_forced_caret_position', 0);\n      },\n      'sender-clicked': (data) => {\n        var text = this.data.text,\n            caret_position = this.local.caret_position;\n\n        if (text.indexOf(data.mention + ' ') === -1){\n          this.local.caret_position = caret_position + data.mention.length + 1;\n          this.resetHistoryIndex(this.data.active_chat);\n          this.set({\n            text: `${text.substr(0, caret_position)}${data.mention} ${text.substr(caret_position)}`,\n            new_forced_caret_position: this.local.caret_position\n          });\n        }\n      },\n      'change-filename': (data) => {\n        this.set('file_name', data.file_name);\n      },\n      'smiley-chosen': (data) => {\n        this.handleSmileyChosen(data);\n      },\n      'set-user-state': (data) => {\n        if (this.data.user_state !== data.state) {\n          this.data.user_state = data.state;\n        }\n      },\n      'file-error': (data) => {\n        this.updateUploadingStatus(data.jid, {\n          'file_error': true,\n          'file_error_message': Strings[data.key]\n        });\n      },\n      'clear-errors': (data) => {\n        this.updateUploadingStatus(data.jid, {\n          'file_error': false,\n          'file_error_message': ''\n        });\n      },\n      'dismiss-emoticon-autocomplete': () => {\n        this.dismissEmoticonAutoComplete();\n      },\n      'process-emoticon-text': (data) => {\n        this.processEmoticonText(data.text, data.caret_position);\n      },\n      'emoticon-selected': () => {\n        this.handleEmoticonSelected();\n      },\n      'dismiss-mention-autocomplete': () => {\n        this.dismissMentionAutoComplete();\n      },\n      'process-mention-text': (data) => {\n        this.processMentionText(data.text, data.caret_position);\n      },\n      'process-slash-command-text': ({ text, caret_position }) => {\n        this.processSlashCommandText(text, caret_position);\n      },\n      'navigate-autocomplete': (data) => {\n        this.navigateAutoComplete(data.autocomplete, data.direction);\n      },\n      'mention-selected': () => {\n        this.handleMentionSelected();\n      },\n      'menu-item-hovered': (data) => {\n        this.updateActiveMenuItem(data);\n      },\n      'slash-command-selected': () => {\n        this.handleSlashCommandSelected();\n      }\n    });\n  }\n\n  updateUploadProgress(jid){\n    if (jid === this.data.active_chat){\n      this.set('upload_progress', this.getUploadProgress(jid));\n    }\n  }\n\n  getUploadProgress(jid){\n    const percentage = this.local.upload_progress[jid];\n    return (percentage !== undefined) ? percentage : null;\n  }\n\n  handleActiveRoomsUpdate(rooms) {\n    var active_chat,\n        room_is_archived,\n        active_chat_id;\n\n    this.local.allRooms = rooms;\n    active_chat = this.local.allRooms[this.data.active_chat];\n\n    if (active_chat) {\n      room_is_archived = utils.room.is_archived(active_chat);\n      active_chat_id = this._getActiveChatId(active_chat.jid);\n      if (active_chat.type !== this.data.chat_type || room_is_archived !== this.data.room_is_archived || this.data.active_chat_id !== active_chat_id) {\n        // We only want the store updated if these values have changed\n        this.set({\n          active_chat_id: active_chat_id,\n          chat_type: active_chat.type,\n          room_is_archived: room_is_archived\n        });\n      }\n    }\n  }\n\n  processEmoticonText(text, caret_position) {\n    var pre_emoticon = text.substring(0, caret_position),\n        post_emoticon = text.substring(caret_position),\n        emoticon_text = pre_emoticon.split(this.data.emoticon_regex).slice(-1)[0],\n        filtered_list,\n        sliced_list;\n\n    if (emoticon_text.indexOf('(') === 0 && emoticon_text !== '(') {\n      this.data.emoticon_text = emoticon_text.toLowerCase();\n      filtered_list = this.filterEmoticonList(this.data.emoticon_text);\n      sliced_list = filtered_list.slice(0, 40);\n      this.set({\n        emoticon_text: emoticon_text,\n        emoticon_selected_item: 0,\n        pre_emoticon_text: pre_emoticon,\n        post_emoticon_text: post_emoticon,\n        path_prefix: this.data.path_prefix,\n        emoticon_list: sliced_list,\n        emoticon_results_count: sliced_list.length,\n        active_autocomplete: 'emoticon'\n      });\n    } else {\n      if (this.data.active_autocomplete === 'emoticon') {\n        this.dismissEmoticonAutoComplete();\n      }\n    }\n  }\n\n  filterEmoticonList(text) {\n    var filtered, query = text.slice(1),\n      wrap = (match) => {\n        return `<strong>${match}</strong>`;\n      };\n      filtered = _.filter(this.getEmoticons(), (emoticon) => {\n        return emoticon.shortcut.indexOf(query) !== -1;\n      });\n\n      filtered = _.sortBy(filtered, (emoticon) => {\n        return emoticon.shortcut.indexOf(query);\n      });\n      filtered = _.forEach(filtered, (emoticon) => {\n        emoticon.match_markup = emoticon.shortcut.split(query).join(wrap(query));\n      });\n    return filtered;\n  }\n\n  getEmoticons() {\n    var emoticons = _.toArray(this.data.emoticons),\n        default_emoticons = _.filter(_.toArray(this.data.smileys), (smileys) => {\n          return smileys.shortcut.indexOf('(') === 0;\n        });\n    return _.sortBy(emoticons.concat(default_emoticons), 'shortcut');\n  }\n\n  handleEmoticonSelected() {\n    var emoticon = this.data.emoticon_list[this.data.emoticon_selected_item],\n        new_pre_text = this.getPreEmoticonOnSelect(emoticon.shortcut),\n        new_post_text = this.data.post_emoticon_text,\n        first_space = this.data.post_emoticon_text.indexOf(' ');\n\n    if (first_space !== 0) {\n      new_post_text = this.data.post_emoticon_text.slice(first_space + 1);\n    }\n\n    this.set({\n      text: new_pre_text + new_post_text,\n      new_forced_caret_position: new_pre_text.length\n    });\n    this.dismissEmoticonAutoComplete();\n  }\n\n  handleSlashCommandSelected(){\n    var slash_command = this.data.slash_command_list[this.data.slash_command_selected_item];\n\n    let command;\n\n    if (slash_command.name.indexOf(this.data.text) === 0){\n      command = slash_command.name;\n    } else {\n      for (let alias of slash_command.aliases){\n        if (alias.indexOf(this.data.text) === 0){\n          command = alias;\n        }\n      }\n    }\n\n    AnalyticsActions.slashCommandUsedInAutocomplete({\n      room: utils.jid.is_room(this.data.active_chat) ? this.data.active_chat_id : null,\n      slashUsed: command\n    });\n\n    let text = `${command} `;\n\n    this.set({\n      text,\n      new_forced_caret_position: text.length\n    });\n    this.dismissSlashCommandAutoComplete();\n  }\n\n  getPreEmoticonOnSelect(shortcut) {\n    return this.data.pre_emoticon_text.slice(0, -this.data.emoticon_text.length) + shortcut + ' ';\n  }\n\n  dismissEmoticonAutoComplete() {\n    this.set({\n      emoticon_text: '',\n      emoticon_selected_item: 0,\n      emoticon_results_count: 0,\n      emoticon_list: [],\n      active_autocomplete: null\n    });\n  }\n\n  clearText() {\n    this.resetHistoryIndex(this.data.active_chat);\n    this.set({\n      text: ''\n    });\n  }\n\n  handleSmileyChosen(data) {\n    var text = this.data.text + data.shortcut + ' ';\n    this.set({\n      text: text,\n      new_forced_caret_position: text.length\n    });\n  }\n\n  setUnsentText(jid) {\n    if (utils.jid.is_chat(jid)) {\n      this.local.unsentText[jid] = this.data.text;\n    }\n  }\n\n  getUnsentText(jid) {\n    return this.local.unsentText[jid] || '';\n  }\n\n  deleteUnsentText(jid) {\n    delete this.local.unsentText[jid];\n  }\n\n  updateUploadingStatus(jid, data){\n    if (this.data.active_chat === jid){\n      this.set(data);\n    } else {\n      this.setUploadingStatus(jid, data);\n    }\n  }\n\n  setUploadingStatus(jid, data) {\n    if(utils.jid.is_chat(jid)) {\n      if (data){\n        this.local.uploadingStatus[jid] = _.assign({}, this.local.uploadingStatus[jid], data);\n      } else {\n        this.local.uploadingStatus[jid] = _.pick(this.data, [\n          'uploading',\n          'attachment_expanded',\n          'file',\n          'file_error',\n          'file_error_message',\n          'file_extension',\n          'file_name',\n          'file_selection_source'\n        ]);\n      }\n    }\n  }\n\n  getUploadingStatus(jid) {\n    return this.local.uploadingStatus[jid] || {\n        uploading: false,\n        attachment_expanded: false,\n        file: null,\n        file_error: '',\n        file_error_message: '',\n        file_extension: '',\n        file_name: '',\n        file_selection_source: null\n      };\n  }\n\n  deleteUploadingStatus(jid) {\n    delete this.local.uploadingStatus[jid];\n  }\n\n  updateRoomData() {\n    var room = RosterStore.getAll();\n    this.local.guests = room.participants.guests;\n    this.local.members = room.participants.members;\n    this.local.users = room.users;\n    this.local.room_privacy = room.active_chat_privacy;\n  }\n\n  processMentionText(text, caret_position) {\n    var pre_mention = text.substring(0, caret_position),\n        post_mention = text.substring(caret_position),\n        mention_text = pre_mention.split(/\\s/).slice(-1)[0];\n\n    if (mention_text.indexOf('@') === 0) {\n      this.updateRoomData();\n      let giving_out = this.getMentionList(mention_text).slice(0, 25);\n      let results = sortUsers(giving_out, mention_text.slice(1), 'mention_name');\n\n      this.set({\n        mention_list: results,\n        mention_results_count: results.length,\n        mention_text: mention_text,\n        mention_selected_item: 0,\n        pre_mention_text: pre_mention,\n        post_mention_text: post_mention,\n        active_autocomplete: 'mention'\n      });\n    } else {\n      if (this.data.active_autocomplete === 'mention') {\n        this.dismissMentionAutoComplete();\n      }\n    }\n  }\n\n  getMentionList(mention_text) {\n    var query = mention_text.slice(1),\n        room = this.local.allRooms[this.data.active_chat],\n        participants_fully_initialized = room && room.participants_fully_initialized,\n        people_in_this_room = this.local.members.concat(this.local.guests).concat(this.data.default_mentions),\n        priorities,\n        results;\n\n    if (query === '') {\n      priorities = _.map(this.data.default_mentions, 'jid');\n      results = chatSearch(people_in_this_room, query, priorities);\n\n    } else if (this.local.room_privacy === 'private' && participants_fully_initialized || this.data.user_is_guest) {\n      results = chatSearch(people_in_this_room, query);\n\n    } else {\n      let people_to_search = this.removeGuests(this.local.users).concat(this.local.guests).concat(this.data.default_mentions);\n      priorities = _.map(people_in_this_room, 'jid');\n      results = chatSearch(people_to_search, query, priorities);\n    }\n\n    return results;\n  }\n\n  processSlashCommandText(text, caret_position){\n\n      if (!this.data.web_client_slash_command_autocomplete_enabled){\n        return;\n      }\n\n      if (/^\\/(\\w*)$/.test(text) && caret_position > 0) {\n        let filtered = _.filter(slashCommands, ({ name, aliases, members_only, oto_only, room_only, filter }) => {\n            if (oto_only && !utils.jid.is_private_chat(this.data.active_chat) ||\n                room_only && !utils.jid.is_room(this.data.active_chat) ||\n                members_only && this.data.user_is_guest ||\n                filter && !filter({ video_enabled: this.data.video_enabled })){\n              return false;\n            }\n\n            if (name.indexOf(text) === 0){\n              return true;\n            }\n\n            for (let alias of aliases) {\n              if (alias.indexOf(text) === 0){\n                return true;\n              }\n            }\n\n          });\n\n        let sorted = _.sortBy(filtered, 'name');\n        let normalized = sorted.map(({ name, usage, description, aliases }) => ({ name, usage, description, aliases }));\n\n        this.set({\n          active_autocomplete: \"slash_command\",\n          slash_command_list: normalized,\n          slash_command_selected_item: 0,\n          slash_command_results_count: normalized.length\n        });\n\n      } else if (this.data.active_autocomplete === 'slash_command') {\n          this.dismissSlashCommandAutoComplete();\n      }\n  }\n\n  dismissSlashCommandAutoComplete(){\n    this.set({\n      slash_command_list: [],\n      slash_command_selected_item: 0,\n      slash_command_results_count: 0,\n      active_autocomplete: null\n    });\n  }\n\n  removeGuests(users) {\n    // Remove guests in the roster\n    return _.reject(_.toArray(users), utils.user.is_guest);\n  }\n\n  navigateAutoComplete(autocomplete, direction) {\n    if (autocomplete === 'mention' ||\n        autocomplete === 'emoticon' ||\n        autocomplete === 'slash_command') {\n        if (direction === 'up') {\n          this.navigateAutocompleteUp(autocomplete);\n        } else if (direction === 'down') {\n          this.navigateAutocompleteDown(autocomplete);\n        }\n    }\n  }\n\n  navigateAutocompleteUp(type) {\n    var selected_item = this.data[`${type}_selected_item`],\n        results_count = this.data[`${type}_results_count`],\n        new_index;\n\n    if (selected_item > 0) {\n      new_index = selected_item - 1;\n    } else {\n      new_index = results_count - 1;\n    }\n    this.set({\n      [`${type}_selected_item`]: new_index\n    });\n  }\n\n  navigateAutocompleteDown(type) {\n    var selected_item = this.data[`${type}_selected_item`],\n        results_count = this.data[`${type}_results_count`],\n        new_index;\n\n    if (selected_item < (results_count - 1)) {\n      new_index = selected_item + 1;\n    } else {\n      new_index = 0;\n    }\n    this.set({\n      [`${type}_selected_item`]: new_index\n    });\n  }\n\n  handleMentionSelected() {\n    var user = this.data.mention_list[this.data.mention_selected_item],\n        new_pre_text = this.getPreMentionOnSelect((user.mention_name)),\n        new_post_text = this.data.post_mention_text;\n    this.set({\n      text: new_pre_text + new_post_text,\n      new_forced_caret_position: new_pre_text.length\n    });\n    this.dismissMentionAutoComplete();\n  }\n\n  getPreMentionOnSelect(mention_name) {\n    return this.data.pre_mention_text.slice(0, -this.data.mention_text.length) + '@' + mention_name + ' ';\n  }\n\n  updateActiveMenuItem(data) {\n    this.set(`${data.type}_selected_item`, data.index);\n  }\n\n  dismissMentionAutoComplete() {\n    this.set({\n      active_autocomplete: null,\n      mention_list: [],\n      mention_text: '',\n      pre_mention_text: '',\n      post_mention_text: '',\n      mention_selected_item: 0,\n      mention_results_count: 0\n    });\n  }\n\n  recallOlderMessage() {\n    var jid = this.data.active_chat,\n        index = this.local.input_history_index[jid];\n\n    if (_.isEmpty(this.local.input_history[jid])) {\n      return;\n    }\n\n    if (_.isNull(index) || _.isUndefined(index)) {\n      this.local.unsent_text_before_recall[jid] = this.data.text;\n      index = 0;\n      this.local.input_history_index[jid] = index;\n      this.set('text', this.local.input_history[jid][index]);\n      return;\n    }\n\n    if (index < this.local.input_history[jid].length - 1) {\n      index++;\n      this.local.input_history_index[jid] = index;\n      this.set('text', this.local.input_history[jid][index]);\n    }\n  }\n\n  recallNewerMessage() {\n    var jid = this.data.active_chat,\n        index = this.local.input_history_index[jid];\n\n    if (_.isNull(index) || _.isUndefined(index)) {\n      return;\n    }\n\n    if (index) {\n      index = --this.local.input_history_index[jid];\n      this.set('text', this.local.input_history[jid][index]);\n    } else {\n      this.resetHistoryIndex(jid);\n      this.set('text', this.local.unsent_text_before_recall[jid]);\n    }\n  }\n\n  /**\n   * Saves sent message to chat input history and manages stack\n   *\n   * Input history is saved per room, using messages sent within this client during this session.\n   * The input history arrays are queues, wherein new messages are added to the front of the array\n   * and older messages removed from the end of the array.\n   *\n   * @method saveInputHistory\n   */\n  saveInputHistory(message) {\n    var text = message.text.trim(),\n        jid = message.jid;\n\n    if (!this.local.input_history[jid]) {\n      this.local.input_history[jid] = [];\n    }\n\n    if (this.local.input_history[jid].length === AppConfig.input_history_max) {\n      this.local.input_history[jid].pop();\n    }\n\n    this.local.input_history[jid].unshift(text);\n  }\n\n  deleteInputHistory(jid) {\n    delete this.local.input_history[jid];\n    delete this.local.input_history_index[jid];\n    delete this.local.unsent_text_before_recall[jid];\n  }\n\n  resetHistoryIndex(jid) {\n    this.local.input_history_index[jid] = null;\n  }\n\n  isFocused() {\n    return _.get(document.activeElement, 'id') === AppConfig.chat_input_id;\n  }\n\n  _getActiveChatId(jid){\n\n    let active_chat_id = null;\n\n    if (!utils.jid.is_lobby(jid)){\n      if (utils.jid.is_private_chat(jid)){\n        active_chat_id = utils.jid.user_id(jid);\n      } else {\n        if (this.local.allRooms[jid]) {\n          active_chat_id = parseInt(this.local.allRooms[jid].id);\n        }\n      }\n    }\n\n    return active_chat_id;\n  }\n\n  handlePreferences() {\n    this.set({\n      should_animate_avatar: PreferencesStore.shouldAnimateAvatars()\n    });\n  }\n\n  handleConfig(config) {\n    this.set({\n      video_enabled: _.get(config, 'video_chat_enabled') && _.get(config, 'feature_flags.web_client_video_chat'),\n      keyboard_shortcuts: _.get(config, 'keyboard_shortcuts'),\n      // Defaulting this feature flag to true because existing deployments of HCS don't include this flag\n      web_client_addlive_video_enabled: _.get(config, 'feature_flags.web_client_addlive_video', true),\n\n      web_client_enso_video_enabled: _.get(config, 'feature_flags.web_client_enso_video', false),\n      web_client_enso_room_video_enabled: _.get(config, 'feature_flags.web_client_enso_room_video', false),\n      web_client_slash_command_autocomplete_enabled: _.get(config, 'feature_flags.web_client_slash_command_autocomplete_enabled'),\n      message_editing_enabled: _.get(config, 'feature_flags.web_client_message_editing')\n\n    });\n  }\n}\n\nexport default new ChatInputStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/chat_input_store.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport PreferencesStore from './preferences_store';\nimport PreferencesActions from 'actions/preferences_actions';\nimport LayoutActions from 'actions/layout_actions';\nimport ClientPrefKeys from 'keys/client_preferences_keys';\nimport Store from 'lib/core/store';\nimport RoomSize from 'lib/enum/room_size';\nimport utils from 'helpers/utils';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport app_config from 'config/app_config';\n\nclass RosterStore extends Store {\n\n  getDefaults() {\n    return {\n      admins: [],\n      current_user: {},\n      users: {},\n      rooms: {},\n      files: [],\n      links: [],\n      loading: false,\n      participants: {\n        members: [],\n        guests: []\n      },\n      initialized: false,\n      size: RoomSize.MEDIUM,\n      active_chat: null,\n      active_chat_privacy: null,\n      guest_url: '',\n      chat_type: '',\n      invite_url: false,\n      user_is_admin: false,\n      active_integration: null,\n      active_integration_data_template_values: null,\n      can_share_files: true,\n      panels_scroll_top: {}\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'hc-init': (data) => {\n        this.handleConfig(data);\n      }\n    });\n\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:current_user': (user) => {\n        this.data.current_user = user;\n      },\n      'updated:roster': (roster) => {\n        this.handleRosterUpdate(roster);\n      },\n      'updated:permissions': (perms) => {\n        this.set({\n          can_share_files: perms.file_sharing === 'all'\n        });\n      },\n      'app-state-ready': () => {\n        this.data.initialized = true;\n        this.fetchPanelContent(this.data.active_chat);\n      },\n      'app-state-reconnected': () => {\n        AppDispatcher.dispatch('fetch-files-history');\n        AppDispatcher.dispatch('fetch-links-history');\n      },\n      'fetch-files-history': () => {\n        if (utils.jid.is_chat(this.data.active_chat)){\n          let lastFile = _.last(this.data.files);\n          let before = lastFile ? lastFile.date : utils.format_time_for_history(new Date());\n          let room = this.data.active_chat;\n\n          AppDispatcher.dispatch('fetch-files', { room, before });\n        }\n      },\n      'fetch-links-history': () => {\n        if (utils.jid.is_chat(this.data.active_chat)) {\n          let lastLink = _.last(this.data.links);\n          let before = lastLink ? lastLink.date : utils.format_time_for_history(new Date()),\n              room = this.data.active_chat;\n          AppDispatcher.dispatch('fetch-links', {room, before});\n        }\n      },\n      'DAL:handle-created-room': (room) => {\n        this.handleNewRoom(room);\n      },\n      'mark-participant-unknown': (data) => {\n        this.markParticipantForPrivateRoom(data);\n      },\n      'unmark-participant': (data) => {\n        this.unmarkParticipantForPrivateRoom(data);\n      },\n      'updated:active_chat': (jid) => {\n        this.handleSelectRoom(jid);\n        this.fetchPanelContent(jid);\n      },\n      'updated:activeRooms': (rooms) => {\n        this.handleActiveRoomsUpdate(rooms);\n      },\n      'select-panel': (data) => {\n        this.selectPanel(data);\n      },\n      'fetch-panel-content-for-internal-glances': (data) => {\n        if (data.activeIntegration) {\n          this.fetchPanelContent(this.data.active_chat);\n        }\n      },\n      'toggle-right-sidebar': () => {\n        this.toggleSidebar(this.data.chat_type);\n      },\n      'set-right-sidebar-panel-scrolltop': ({ room, type, scroll_top }) => {\n        if (utils.jid.is_chat(room)){\n          if (!this.data.panels_scroll_top[room]){\n            this.data.panels_scroll_top[room] = {};\n          }\n          this.data.panels_scroll_top[room][type] = scroll_top;\n          this.set('panels_scroll_top', this.data.panels_scroll_top);\n        }\n      }\n    });\n  }\n\n  updateLoadingSpinner(){\n\n    if (!utils.jid.is_chat(this.data.active_chat)){\n      return;\n    }\n\n    let chat = this.data.rooms[this.data.active_chat];\n\n    if (!chat) {\n      return;\n    }\n\n    if (chat.files_fetching && !chat.files_fetched) {\n      this.showLoadingSpinnerOnPanel(\"files\");\n    } else {\n      this.hideLoadingSpinnerOnPanel(\"files\");\n    }\n    if (chat.links_fetching && !chat.links_fetched) {\n      this.showLoadingSpinnerOnPanel(\"links\");\n    } else {\n      this.hideLoadingSpinnerOnPanel(\"links\");\n    }\n  }\n\n  showLoadingSpinnerOnPanel(type){\n    if (this.getActivePanel(this.data.chat_type) === type) {\n        this.set('loading', true);\n    }\n  }\n\n  hideLoadingSpinnerOnPanel(type){\n    if (this.getActivePanel(this.data.chat_type) === type) {\n      this.set('loading', false);\n    }\n  }\n\n  handleConfig(config) {\n    this.data.active_chat = this.data.active_chat || PreferencesStore.getChatToFocus();\n    this.set({\n      user_is_admin: config.is_admin,\n      invite_url: config.invite_url,\n      web_client_integrations_enabled: IntegrationHelper.isFeatureEnabled(config)\n    });\n    this.fetchPanelContent(this.data.active_chat);\n  }\n\n  selectPanel(data) {\n    if (this.shouldToggleSidebar(data.activePanel)) {\n      this.toggleSidebar(this.data.chat_type);\n    }\n    this.setPanel(data.activePanel);\n    this.fetchPanelContent(this.data.active_chat);\n  }\n\n  setPanel(panel) {\n    if (this.data.chat_type === \"chat\") {\n      PreferencesActions.savePreferences({ [ClientPrefKeys.CHAT_ACTIVE_PANEL]: panel });\n    } else if (this.data.chat_type === \"groupchat\") {\n      PreferencesActions.savePreferences({ [ClientPrefKeys.GROUPCHAT_ACTIVE_PANEL]: panel });\n    }\n  }\n\n  shouldToggleSidebar(panel) {\n    var result = false;\n    if (this.data.chat_type === \"chat\") {\n      result = (panel === PreferencesStore.getChatActivePanel() || !PreferencesStore.shouldShowChatSidebar());\n    } else if (this.data.chat_type === \"groupchat\") {\n      result = (panel === PreferencesStore.getGroupChatActivePanel() || !PreferencesStore.shouldShowGroupChatSidebar());\n    }\n    return result;\n  }\n\n  toggleSidebar(chat_type) {\n    var visibility;\n    if (chat_type === \"chat\") {\n      visibility = !PreferencesStore.shouldShowChatSidebar();\n      LayoutActions.setRightChatSidebarVisibility(visibility);\n    } else if (chat_type === \"groupchat\") {\n      visibility = !PreferencesStore.shouldShowGroupChatSidebar();\n      LayoutActions.setRightGroupChatSidebarVisibility(visibility);\n    }\n  }\n\n  sidebarShowing(jid) {\n    return ((utils.room.detect_chat_type(jid) === \"chat\" && PreferencesStore.shouldShowChatSidebar()) || (utils.room.detect_chat_type(jid) === \"groupchat\" && PreferencesStore.shouldShowGroupChatSidebar()));\n  }\n\n  getActivePanel(chat_type) {\n    if (!this.data.web_client_integrations_enabled) {\n      if (chat_type === \"chat\") {\n        return PreferencesStore.getChatActivePanel();\n      } else if (chat_type === \"groupchat\") {\n        return PreferencesStore.getGroupChatActivePanel();\n      }\n    } else {\n      let key = null;\n\n      if (chat_type === \"chat\") {\n        key = _.get(PreferencesStore.getActiveChatIntegration(), 'key');\n      } else if (chat_type === \"groupchat\") {\n        key = _.get(PreferencesStore.getActiveGroupchatIntegration(), 'key');\n      }\n\n      if (IntegrationHelper.isInternalIntegrationKey(key)) {\n        return IntegrationHelper.split_full_key(key)[1];\n      }\n    }\n  }\n\n  fetchPanelContent(jid) {\n    // Only fetch if sidebar is visible\n    if (this.data.initialized && utils.jid.is_chat(jid) && this.sidebarShowing(jid) && !this.data.current_user.is_guest) {\n      let activePanel = this.getActivePanel(this.data.chat_type);\n\n      if (activePanel === 'files' || activePanel === 'links') {\n        if (this._shouldFetchPanelContent(jid, activePanel)) {\n          AppDispatcher.dispatch(`fetch-${activePanel}`, {room: jid});\n        }\n      }\n    }\n  }\n\n  _shouldFetchPanelContent(jid, panel) {\n    let room = this.data.rooms[jid];\n\n    let fetching = _.get(room, `${panel}_fetching`, false);\n    let fetched = _.get(room, `${panel}_fetched`, false);\n\n    return !(fetching || fetched);\n  }\n\n  isSignedFile(url) {\n    return this.isFileUrlAuthenticated(url) || this.getPublicUrlFromThumbnail(url);\n  }\n\n  isFileUrlAuthenticated(url) {\n    let file = _.find(this.data.files, { url });\n    return _.get(file, 'is_authenticated', false);\n  }\n\n  getPublicUrlFromThumbnail(url) {\n    let publicUrl = null;\n    let jid = this.data.active_chat;\n\n    AppDispatcher.dispatch('get-public-url-from-thumbnail', url, jid, (fileUrl) => publicUrl = fileUrl);\n    return publicUrl;\n  }\n\n  markParticipantForPrivateRoom(data) {\n    let user = this.data.users[data.user];\n\n    if (user) {\n      if (user['not_present_in']) {\n        user['not_present_in'].push(data.room);\n      } else {\n        user['not_present_in'] = [data.room];\n      }\n    }\n  }\n\n  unmarkParticipantForPrivateRoom(data) {\n    let user = this.data.users[data.user];\n    if (_.includes(_.get(user, 'not_present_in'), data.room)) {\n      user['not_present_in'] = _.without(user['not_present_in'], data.room);\n    }\n  }\n\n  sortRoster(roster) {\n    return _.sortBy(roster, 'name');\n  }\n\n  static compareStatus(x, y) {\n    if (x === y) {\n      return 0;\n    }\n    var x_rank = RosterStore.status_sorting_order[x] || 7;\n    var y_rank = RosterStore.status_sorting_order[y] || 7;\n    return x_rank > y_rank ? 1 : -1;\n  }\n\n  static compareName(x, y) {\n    if (x === y) {\n      return 0;\n    }\n    return x.name.toLowerCase() > y.name.toLowerCase() ? 1 : -1;\n  }\n\n  static comparePeople(x, y) {\n    if (x === y) {\n      return 0;\n    }\n    if (!x.presence || !y.presence) {\n      return (!y.presence) ? 1 : (!x.presence) ? -1 : 0;\n    }\n\n    var status_comparison = RosterStore.compareStatus(x.presence.show, y.presence.show);\n    if (status_comparison !== 0) {\n      return status_comparison;\n    }\n    return RosterStore.compareName(x, y);\n  }\n\n  sortRosterByPresenceAndName(roster) {\n    return roster.sort(RosterStore.comparePeople);\n  }\n\n  sortRosterByName(roster) {\n    return roster.sort(RosterStore.compareName);\n  }\n\n  getSortedRosterByPresenceAndName(roles) {\n    var all_people = [].concat.apply([], _.map(roles, (role) => this.get('participants')[role]));\n    return this.sortRosterByPresenceAndName(all_people);\n  }\n\n  getSortedRoster(roles) {\n    var all_people = [].concat.apply([], _.map(roles, (role) => this.get('participants')[role])),\n        size = this.getRoomSize();\n\n    if (size === RoomSize.XLARGE) {\n      return [];\n    } else if (size === RoomSize.LARGE) {\n      return this.sortRosterByName(all_people);\n    }\n    return this.sortRosterByPresenceAndName(all_people);\n  }\n\n  insertAlphaHeadings(users = []) {\n    let roster = [],\n        letter = '';\n\n    _.forEach(users, user => {\n      var initial = user.name.substr(0, 1).toUpperCase();\n      if (initial !== letter) {\n        letter = initial.toUpperCase();\n        roster.push({ letter });\n      }\n      roster.push(user);\n    });\n\n    return roster;\n  }\n\n  getRoomSize() {\n    var count = this.getRosterCount(['members', 'guests']).total,\n        breakpoints = app_config.roster_panel.breakpoints;\n\n    if (count < breakpoints.small) {\n      return RoomSize.SMALL;\n    } else if (count < breakpoints.medium) {\n      return RoomSize.MEDIUM;\n    } else if (count < breakpoints.large) {\n      return RoomSize.LARGE;\n    }\n    return RoomSize.XLARGE;\n  }\n\n  getRoster() {\n    let size = this.getRoomSize(),\n        roster = [];\n\n    if (size === RoomSize.XLARGE) {\n      return roster;\n    }\n\n    let members = this.getSortedRoster(['members']),\n        guests = this.getSortedRoster(['guests']),\n        hasMembers = members.length > 0,\n        hasGuests = guests.length > 0;\n\n    if (hasMembers) {\n      if (size === RoomSize.LARGE) {\n        members = this.insertAlphaHeadings(members);\n      }\n      roster = roster.concat(members);\n    }\n\n    if (hasGuests) {\n      roster.push({ group_title: 'guests' });\n      roster = roster.concat(guests);\n    }\n\n    return roster;\n  }\n\n  countRoster(roster) {\n    var total_members = 0,\n        online_members = 0,\n        room = this.data.rooms[this.data.active_chat];\n\n    if (_.get(room, 'roster_size') && !room.participants_fully_initialized) {\n      total_members = room.roster_size;\n      online_members = 0;\n    } else {\n      _.each(roster, user => {\n        total_members++;\n        if (user.presence && user.presence.show === \"chat\") {\n          online_members++;\n        }\n      });\n    }\n\n    return {\n      online: online_members,\n      total: total_members\n    };\n  }\n\n  getRosterCount(roles) {\n    var all_people = [].concat.apply([], _.map(roles, (role) => this.get('participants')[role]));\n    return this.countRoster(all_people);\n  }\n\n  handleActiveRoomsUpdate(rooms) {\n    var deleted = _.difference(_.keys(this.data.rooms), _.keys(rooms));\n    if (deleted.length) {\n      this.data.rooms = _.omit(this.data.rooms, deleted);\n    } else {\n      this.data.rooms = _.merge(this.data.rooms, rooms);\n    }\n    if (this.data.active_chat && utils.jid.is_chat(this.data.active_chat)) {\n      this.data.rooms[this.data.active_chat] = rooms[this.data.active_chat];\n      this.handleSelectRoom(this.data.active_chat);\n    }\n  }\n\n  handleRosterUpdate(roster) {\n    _.map(this.data.participants, (group, role) => {\n      if (this.data.participants[role].length) {\n        this.sortRoster(this.data.participants[role]);\n      }\n    });\n    this.data.users = roster;\n    this.handleSelectRoom(this.data.active_chat);\n  }\n\n  handleNewRoom(room) {\n    this.set({\n      active_chat: room.jid,\n      chat_type: utils.room.detect_chat_type(room.jid)\n    });\n  }\n\n  handleSelectRoom(jid) {\n    if (!jid || !utils.jid.is_chat(jid)) {\n      return;\n    }\n\n    var type = utils.room.detect_chat_type(jid),\n        room_privacy,\n        files = [],\n        links = [],\n        admins,\n        owner,\n        guest_url;\n\n    this.data.participants = {\n      members: [],\n      guests: []\n    };\n\n    if (this.data.rooms[jid]) {\n      room_privacy = this.data.rooms[jid].privacy;\n      guest_url = this.data.rooms[jid].guest_url;\n      files = this.data.rooms[jid].files;\n      links = this.data.rooms[jid].links;\n      admins = this.data.rooms[jid].admins;\n      owner = this.data.rooms[jid].owner;\n      type = this.data.rooms[jid].type;\n      _.map(this.data.rooms[jid].participants, (group, role) => {\n        _.each(group, (user_jid) => {\n          if (this.data.users[user_jid]) {\n            if (this.data.rooms[jid].privacy === 'private'\n                && this.data.users[user_jid].not_present_in\n                && this.data.users[user_jid].not_present_in.indexOf(jid) !== -1) {\n              this.data.participants[role].push(_.assign({}, this.data.users[user_jid], {\n                presence: {\n                  show: 'unknown',\n                  status: '',\n                  idleTime: false\n                }\n              }));\n            } else {\n              this.data.participants[role].push(_.cloneDeep(this.data.users[user_jid]));\n            }\n          }\n        });\n        this.data.participants[role] = this.sortRoster(_.compact(this.data.participants[role]));\n      });\n    }\n\n    this.set({\n      admins: admins,\n      owner: owner,\n      users: this.data.users,\n      participants: this.data.participants,\n      active_chat: jid,\n      active_chat_privacy: room_privacy,\n      chat_type: type,\n      size: this.getRoomSize(),\n      files: files,\n      links: links,\n      guest_url: guest_url\n    });\n\n    this.updateLoadingSpinner();\n  }\n}\n\nRosterStore.status_sorting_order = {\n  \"chat\": 1,\n  \"away\": 2,\n  \"xa\": 2,\n  \"dnd\": 3,\n  \"mobile\": 4,\n  \"unavailable\": 5,\n  \"unknown\": 6\n};\n\nexport default new RosterStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/roster_store.js\n **/","export default Object.freeze({\n  SMALL: 'small',\n  MEDIUM: 'medium',\n  LARGE: 'large',\n  XLARGE: 'xlarge',\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/enum/room_size.js\n **/","import utils from 'helpers/utils';\n\nfunction getContainsMultipartQueryRegExp(query) {\n  var split_query = query.replace(/\\s/g, '|');\n  return new RegExp(`${split_query}`, 'gi');\n}\n\nfunction getStartsWithRegExp(query) {\n  return new RegExp(`^${query}`, 'i');\n}\n\nfunction getOtherWordsStartWithRegExp(query) {\n  return new RegExp(`\\\\s${query}`, 'i');\n}\n\nfunction getAnyWordStartsWithRegExp(query) {\n  return new RegExp(`^${query}|\\\\s${query}`, 'i');\n}\n\nfunction getMentionStartsWithRegExp(query) {\n  if (query.indexOf('@') === 0){\n    query = query.slice(1);\n  }\n  return new RegExp(`^${query}`, 'i');\n}\n\nfunction getMentionContainsRegExp(query) {\n  if (query.indexOf('@') === 0){\n    query = query.slice(1);\n  }\n  return new RegExp(`${query}`, 'i');\n}\n\nfunction getContainsRegExp(query) {\n  return new RegExp(`${query}`, 'i');\n}\n\nfunction lowerCaseMentionHelper(item) {\n  return _.isString(item.mention_name) ? item.mention_name.toLocaleLowerCase() : null;\n}\n\nfunction isValidChat(item) {\n  // If a room or person, has a valid name, and if-is-a-person-then-has-a-mention-name\n  return (utils.jid.is_private_chat(item.jid) || utils.jid.is_room(item.jid))\n    && _.isString(item.name)\n    && (utils.jid.is_private_chat(item.jid) === _.isString(item.mention_name));\n}\n\nfunction containsAllMatches(name, queries) {\n  return queries.split(\" \").every( (query) => {\n    return name.toLowerCase().indexOf(query.toLowerCase()) !== -1;\n  });\n}\n\nfunction getMatches(chats, query) {\n  var number_of_query_parts = query ? _.size(query.match(/\\s/g)) + 1 : 0,\n      multipart_query = number_of_query_parts > 1,\n      any_word_starts_with = getAnyWordStartsWithRegExp(query),\n      contains = getContainsRegExp(query),\n      global_contains = getContainsMultipartQueryRegExp(query),\n      mention_starts_with = getMentionStartsWithRegExp(query),\n      mention_contains = getMentionContainsRegExp(query);\n\n  return _.reduce(chats, function (matches, chat_item) {\n    if (!isValidChat(chat_item)) {\n      // Continues to next item\n      return matches;\n    }\n\n    let default_name_match_markup = _.escape(chat_item.name),\n        default_mention_match_markup = _.escape(chat_item.mention_name);\n\n    if (!query) {\n      // If no query, we want to update each item's markup to its default (the actual name/mention_name)\n      //  and send all chats along to sort\n      if (chat_item.mention_name) {\n        chat_item.mention_match_markup = default_mention_match_markup;\n      }\n      chat_item.name_match_markup = default_name_match_markup;\n      matches.push(chat_item);\n      return matches;\n    }\n    let name_match,\n        mention_match,\n        name_match_origin,\n        mention_match_origin;\n\n    if (chat_item.mention_name) {\n        chat_item.mention_name = chat_item.mention_name;\n      }\n\n    if (multipart_query) {\n      // If multipart query, chats must matches all parts of query\n      let all_matches = chat_item.name.match(global_contains);\n\n      if (all_matches && all_matches.length >= number_of_query_parts) {\n        // No need to check further if chat doesn't have at least as many matches as parts of query\n\n        // Check if name contains every part of query, even if queries are equal or have some equal part\n        if (containsAllMatches(chat_item.name, query)) {\n          name_match = all_matches;\n        }\n\n      }\n    } else if (query.length === 1) {\n      // If query is only one letter, only match on word starts with for name and mention\n      name_match = chat_item.name.match(any_word_starts_with);\n\n      if (chat_item.mention_name) {\n        mention_match = chat_item.mention_name.match(mention_starts_with);\n      }\n    } else {\n      // If single-part query longer than one letter, match on word starts with or contains\n      name_match = chat_item.name.match(any_word_starts_with) || chat_item.name.match(contains);\n\n      // \"starts_with\" matches take priority in match markup\n\n      if (chat_item.mention_name) {\n        mention_match = chat_item.mention_name.match(mention_contains);\n      }\n    }\n\n    if (name_match) {\n      name_match_origin = name_match.map(item => {\n        var idx = chat_item.name.indexOf(item);\n        return chat_item.name.slice(idx, idx + item.length);\n      });\n    }\n    if (mention_match) {\n      mention_match_origin = mention_match.map(item => {\n        var idx = chat_item.mention_name.indexOf(item);\n        return chat_item.mention_name.slice(idx, idx + item.length);\n      });\n    }\n    // We want all chats regardless of match to get updated markup\n    chat_item.name_match_markup = name_match ? utils.highlight_matches(chat_item.name, name_match_origin) : default_name_match_markup;\n    chat_item.mention_match_markup = mention_match ? utils.highlight_matches(chat_item.mention_name, mention_match_origin) : default_mention_match_markup;\n\n    if (name_match || mention_match) {\n      matches.push(chat_item);\n    }\n\n    return matches;\n  }, []);\n}\n\nfunction priorityCompare(lhs, rhs, priorities) {\n  var rhs_is_priority = _.includes(priorities, rhs.jid);\n\n  if (_.includes(priorities, lhs.jid) === rhs_is_priority) {\n    // If both active or both not active\n    return 0;\n  }\n  return rhs_is_priority ? 1 : -1;\n}\n\nfunction nameCompare(lhs, rhs, query) {\n  var lhs_name = lhs.name.toLocaleLowerCase(),\n      rhs_name = rhs.name.toLocaleLowerCase(),\n      lhs_mention = lowerCaseMentionHelper(lhs),\n      rhs_mention = lowerCaseMentionHelper(rhs),\n\n      starts_with = getStartsWithRegExp(query),\n      other_word_starts_with = getOtherWordsStartWithRegExp(query),\n      mention_starts_with = getMentionStartsWithRegExp(query),\n\n      lhs_full_name_equals = query === lhs_name,\n      rhs_full_name_equals = query === rhs_name,\n      lhs_first_word_starts_with = starts_with.test(lhs_name),\n      rhs_first_word_starts_with = starts_with.test(rhs_name),\n      lhs_other_word_starts_with = other_word_starts_with.test(lhs_name),\n      rhs_other_word_starts_with = other_word_starts_with.test(rhs_name),\n\n      equal_comparsion_query = (query.indexOf('@') === 0) ? query.slice(1) : query,\n      lhs_mention_equals = equal_comparsion_query === lhs_mention,\n      rhs_mention_equals = equal_comparsion_query === rhs_mention,\n      lhs_mention_starts_with = lhs_mention ? mention_starts_with.test(lhs_mention) : false,\n      rhs_mention_starts_with = rhs_mention ? mention_starts_with.test(rhs_mention) : false;\n\n  if (lhs_full_name_equals === rhs_full_name_equals) {\n    // If both first words equal to query or both do not\n\n    if (lhs_mention_equals === rhs_mention_equals) {\n        // If both mentions equal to with query or both do not\n\n        if (lhs_first_word_starts_with === rhs_first_word_starts_with) {\n          // If both first words start with query or both do not\n\n          if (lhs_other_word_starts_with === rhs_other_word_starts_with) {\n\n            if (lhs_mention && rhs_mention) {\n\n                if (lhs_mention_starts_with === rhs_mention_starts_with) {\n                  // If both mentions start with query or both do not\n                  return 0;\n                }\n                // If only one mention starts with query\n                return rhs_mention_starts_with ? 1 : -1;\n              }\n            // If both have other words that start with the query or both do not\n            return 0;\n          }\n          // If only one item's other name starts with query\n          return rhs_other_word_starts_with ? 1 : -1;\n        }\n        // If only one item's name starts with query\n        // First word prioritized over others\n        return rhs_first_word_starts_with ? 1 : -1;\n    }\n\n    return rhs_mention_equals ? 1 : -1;\n  }\n\n  return rhs_full_name_equals ? 1 : -1;\n}\n\nfunction alphaCompare(lhs, rhs) {\n  var lhs_name = lhs.name.toLocaleLowerCase(),\n      rhs_name = rhs.name.toLocaleLowerCase();\n\n  return lhs_name.localeCompare(rhs_name);\n}\n\nfunction sortMatches(matches, priorities, query) {\n  // All chats are separated into two groups: priorities and non-priority.\n  // Within these groups, names and mention names are compared for \"starts with,\"\n  //  \"other words start with,\" and \"contains\" matches.\n  // If two chats match the query equally, they are then sorted alphabetically by name.\n\n  function comparator(lhs, rhs) {\n    if (!query) {\n      // If no query, no need to sort based on name matches\n      return alphaCompare(lhs, rhs);\n    }\n\n    let comparison = priorities.length ? priorityCompare(lhs, rhs, priorities) : 0;\n\n    if (comparison === 0) {\n      comparison = nameCompare(lhs, rhs, query);\n    }\n\n    if (comparison === 0) {\n      comparison = alphaCompare(lhs, rhs);\n    }\n\n    return comparison;\n  }\n\n  // This is where we finally kick off the sort\n  return matches.sort(comparator);\n}\n\n\n/**\n * Filters and sorts chats using search string\n * @param {array|object} all_chats - List of chats (rooms and users)\n * @param {string} query - User input\n * @param {array|object} priorities - List of chats (rooms and users) to prioritize\n * @returns {array} Filtered and sorted list of chats\n */\nexport function chatSearch(all_chats = [], query = '', priorities = []) {\n  if (_.isEmpty(all_chats)) {\n    return [];\n  }\n\n  query = utils.escapeRegEx(query.trim().toLocaleLowerCase()).replace(/\\s+/g, ' ');\n\n  try {\n    /*eslint-disable */\n    var regex_test = new RegExp(query);\n    /*eslint-enable */\n  }\n  catch (e) {\n    return [];\n  }\n\n  // Filter and return sorted list of chats\n  let matches = getMatches(all_chats, query);\n  return sortMatches(matches, priorities, query);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/chat_search.js\n **/","import appConfig from 'config/app_config';\n\nexport default {\n  file_too_large: `This file is too large. Try a file that's ${appConfig.max_upload_size} MB or smaller.`,\n  file_is_folder: `This looks like a folder; zip it up and try again.`,\n  unable_to_upload: `Couldn't upload the file`,\n  unable_to_upload_image: 'This image is too large',\n  service_unavailable: `The service for uploading files is unavailable. Try again later.`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/file_input_errors.js\n **/","import ChatInputActions from 'actions/chat_input_actions';\nimport AppHeaderActions from 'actions/app_header_actions';\nimport KeyboardShortcuts from \"helpers/keyboard_shortcuts\";\nimport DialogActions from \"actions/dialog_actions\";\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport FormActions from 'actions/form_actions';\nimport FormsStrings from 'strings/forms_strings';\nimport FlagActions from 'actions/flag_actions';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport Presence from 'lib/enum/presence';\nimport logger from 'helpers/logger';\nimport utils from 'helpers/utils';\n\nexport function matchCommand(data = {}) {\n  let is_private_chat = utils.jid.is_private_chat(data.jid);\n  for (let command of commands) {\n    if (command.matcher.test(data.text) &&\n      (command.members_only && !data.is_guest || !command.members_only) &&\n      (command.oto_only && is_private_chat || !command.oto_only) &&\n      (command.room_only && !is_private_chat || !command.room_only) &&\n      (command.filter && command.filter(data) || !command.filter)) {\n      return command;\n    }\n  }\n}\n\nexport function executeCommand(command, data = {}) {\n  if (command && command.action) {\n    command.action(data);\n    logger.type('slash-commands').log('Action executed for command: ', command.name);\n  }\n}\n\nexport function clearAction({ jid }) {\n  ChatInputActions.clearChat({jid});\n}\n\nexport function partAction({ jid }) {\n  ChatInputActions.closeChat({jid});\n  ChatInputActions.clearChatInput();\n}\n\nexport function topicAction({ text }) {\n  let topic = text.replace(this.matcher, \"\").trim();\n  ChatHeaderActions.changeTopic(topic);\n  ChatInputActions.clearChatInput();\n}\n\nexport function renameAction({ jid, text }) {\n  var roomName = text.replace(this.matcher, \"\").trim();\n\n  FormActions.changeRoomName({\n    jid,\n    name: roomName\n  }, (error) => {\n    if (error) {\n      let error_msg = error.message || FormsStrings.fail.rename_flag;\n      FlagActions.showFlag({\n        type: \"error\",\n        body: error_msg,\n        close: \"auto\"\n      });\n    } else {\n      FlagActions.showFlag({\n        type: \"success\",\n        body: FormsStrings.success.rename_flag,\n        close: \"auto\"\n      });\n    }\n  });\n  ChatInputActions.clearChatInput();\n}\n\nexport function joinAction({ text }) {\n  let room = text.replace(this.matcher, \"\").trim();\n  ChatInputActions.clearChatInput();\n  ChatInputActions.joinChat({room});\n}\n\nexport function shortcutsAction() {\n  var commands = KeyboardShortcuts.getKeyCommands();\n  DialogActions.showKeyboardShortcutsDialog(commands);\n  ChatInputActions.clearChatInput();\n}\n\nexport function settingsAction() {\n  AppHeaderActions.requestPreferencesDialog();\n  ChatInputActions.clearChatInput();\n}\n\nexport function callAction({ jid, videoService, room_id, room_is_archived }) {\n  if (utils.jid.is_room(jid) && !room_is_archived) {\n    ChatHeaderActions.startEnsoRoomVideo({\n      jid: jid,\n      room_id: room_id\n    });\n  } else {\n    ChatHeaderActions.startCall({\n      jid,\n      service: videoService\n    });\n  }\n  ChatInputActions.clearChatInput();\n}\n\nexport function presenceAction({ text }) {\n  var index = text.indexOf(' '),\n    show_type = text,\n    payload = {\n      type: 'showAndStatus'\n    },\n    status;\n\n  if (_.includes(text, ' ')) {\n    status = text.substr(index).trim();\n    if (status) {\n      payload.status = status;\n    }\n    show_type = show_type.substr(0, index);\n  }\n\n  switch (show_type.substr(1)) {\n    case 'available':\n    case 'here':\n    case 'back':\n      payload.show = Presence.AVAILABLE;\n      break;\n\n    case 'away':\n      payload.show = Presence.AWAY;\n      break;\n\n    case 'dnd':\n      payload.show = Presence.DND;\n      break;\n  }\n\n  CurrentUserActions.changeStatus(payload);\n  ChatInputActions.clearChatInput();\n}\n\nexport const commands = [\n  {\n    name: '/topic',\n    aliases: [],\n    description: 'Change chat topic',\n    usage: '[new topic]',\n    members_only: true,\n    room_only: true,\n    matcher: /^\\/(topic)\\s/,\n    action: topicAction\n  },\n  {\n    name: '/rename',\n    aliases: [],\n    description: 'Rename a room',\n    usage: '[new name]',\n    members_only: true,\n    room_only: true,\n    matcher: /^\\/(rename)\\s/,\n    action: renameAction\n  },\n  {\n    name: '/clear',\n    aliases: [],\n    description: 'Locally clears history for chat',\n    usage: null,\n    matcher: /^\\/clear\\s?$/,\n    action: clearAction\n  },\n  {\n    name: '/join',\n    aliases: [\n      '/enter'\n    ],\n    description: 'Join a room or 1-1 chat',\n    usage: '[or /enter] [room name/user mention]',\n    members_only: true,\n    matcher: /^\\/(join|enter)\\s/,\n    action: joinAction\n  },\n  {\n    name: '/part',\n    aliases: [\n      '/close',\n      '/leave'\n    ],\n    description: 'Leave a room or 1-1 chat',\n    usage: '[or /close, /leave]',\n    members_only: true,\n    matcher: /^\\/(part|leave|close)\\s?$/,\n    action: partAction\n  },\n  {\n    name: '/me',\n    aliases: [\n      '/em'\n    ],\n    description: 'Display action text',\n    usage: '[or /em] your message',\n    members_only: true,\n    matcher: /^\\/(me|em)\\s/,\n    should_send_message: true\n  },\n  {\n    name: '/quote',\n    aliases: [],\n    description: 'Display quote message',\n    usage: 'your message',\n    matcher: /^\\/(quote)\\s\\w/,\n    should_send_message: true\n  },\n  {\n    name: '/code',\n    aliases: [],\n    description: 'Display code snippet',\n    usage: 'some code',\n    matcher: /^\\/(code)\\s\\w/,\n    should_send_message: true\n  },\n  {\n    name: '/pre',\n    aliases: [\n      '/monospace'\n    ],\n    description: 'Display text in monospaced font',\n    usage: '[or /monospace] some text',\n    matcher: /^\\/(pre|monospace)\\s\\w/,\n    should_send_message: true\n  },\n  {\n    name: '/here',\n    aliases: [\n      '/available',\n      '/back'\n    ],\n    description: 'Set presence to available',\n    usage: '[or /available, /back] [your status]',\n    matcher: /^\\/(here|available|back)\\s?/,\n    action: presenceAction\n  },\n  {\n    name: '/away',\n    aliases: [],\n    description: 'Set presence to away',\n    usage: '[your status]',\n    matcher: /^\\/(away)\\s?/,\n    action: presenceAction\n  },\n  {\n    name: '/dnd',\n    aliases: [],\n    description: 'Set presence to do not disturb',\n    usage: '[your status]',\n    matcher: /^\\/(dnd)\\s?/,\n    action: presenceAction\n  },\n  {\n    name: '/shortcuts',\n    aliases: [\n      '/keys'\n    ],\n    description: 'Open the keyboard shortcuts dialog',\n    usage: '[or /keys]',\n    members_only: true,\n    matcher: /^\\/(shortcuts|keys)\\s?$/,\n    action: shortcutsAction\n  },\n  {\n    name: '/settings',\n    aliases: [\n      \"/prefs\"\n    ],\n    description: 'Open the settings dialog',\n    usage: '[or /prefs]',\n    members_only: true,\n    matcher: /^\\/(prefs|settings)\\s?$/,\n    action: settingsAction\n  },\n  {\n    name: '/videocall',\n    aliases: [\n      '/call'\n    ],\n    description: 'Start video call',\n    usage: '[or /call]',\n    members_only: true,\n    oto_only: false,\n    matcher: /^\\/(videocall|call)\\s?$/,\n    action: callAction,\n    filter: ({ jid, video_enabled, room_video_enabled }) => {\n      return utils.jid.is_room(jid) ? room_video_enabled : video_enabled;\n    }\n  }\n];\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/slash_command_helper.js\n **/","/**\n * Used to trigger actions on the application header\n * @module actions/AppHeaderActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\nvar AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\nvar DialogActions = require('actions/dialog_actions');\nvar InlineDialogActions = require('actions/inline_dialog_actions');\nvar spi = require('spi');\n\nmodule.exports = {\n\n  requestReleaseNotesDialog: function() {\n    DialogActions.showReleaseNotesDialog();\n  },\n\n  /**\n   * Displays settings dialog\n   */\n  requestPreferencesDialog: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.top.navigation.profile.settings.clicked\"\n    });\n\n    spi.showPreferencesDialog();\n  },\n\n  /**\n   * Hides inline dialog for status message update\n   */\n  hideStatusMessageForm: function() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  /**\n   * Analytics event\n   * @private\n   */\n  helpButtonClicked: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.top.navigation.help.clicked\"\n    });\n  },\n\n  /**\n   * Analytics event\n   * @private\n   */\n  userProfileDropdownClicked: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.top.navigation.profile.clicked\"\n    });\n  },\n\n  /**\n   * Sets focus to search box\n   * @param jid JID of the currently selected chat\n   */\n  searchHistory: function(jid, text) {\n    AppDispatcher.dispatch('set-route', {jid: 'search'});\n    AppDispatcher.dispatch(\"search-history\", {jid: jid, text: text});\n  },\n\n  /**\n   * Executes search in external HipChat search page by launching a new tab/window\n   * @param jid JID of the currently selected chat\n   */\n  searchHistoryExternally: function(jid, text) {\n    AppDispatcher.dispatch(\"search-history-externally\", {jid: jid, text: text});\n  },\n\n  /**\n   * Sets the search text inside the search input field\n   * @param {object} data\n   * @param {string} data.text Search query\n   */\n  setSearchText: function(data) {\n    AppDispatcher.dispatch('set-search-text', data);\n  },\n\n  /**\n   * Remove focus from search input field\n   */\n  searchBlurred: function() {\n    AppDispatcher.dispatch(\"blur-search\");\n  },\n\n  /**\n   * Dismiss the notification permission banner that appears when the user\n   * first uses the chat client. This method just dismisses it temporarily.\n   * If you want to dismiss it forever, use the dismissNotificationBannerForever()\n   * method.\n   */\n  dismissNotificationBanner: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.banner.notification.dismiss.once\"\n    });\n    AppDispatcher.dispatch('dismiss-notification-banner');\n  },\n\n  /**\n   * Dismiss the notification permission banner that appears when the user\n   * first uses the chat client. This method just dismisses it forever.\n   * If you want to dismiss it temporarily, use the dismissNotificationBanner()\n   * method.\n   */\n  dismissNotificationBannerForever: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.banner.notification.dismiss.forever\"\n    });\n    AppDispatcher.dispatch('dismiss-notification-banner-forever');\n  },\n\n  /**\n   * Triggers the HTML5 notification permission prompt\n   */\n  requestNotificationPermission: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.banner.notification.request.permission\"\n    });\n    AppDispatcher.dispatch('request-notification-permission');\n  },\n\n  /**\n   * Dispatch event to reposition active dialogs in the app header\n   */\n  positionDialogs: function() {\n    AppDispatcher.dispatch('position-app-header-dialogs');\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/app_header_actions.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport InlineDialogStore from 'stores/inline_dialog_store';\n\nexport default {\n\n  hideInlineDialog: function() {\n    AppDispatcher.dispatch('hide-inline-dialog', {\n      dialog_type: InlineDialogStore.getCurrentInlineDialog()\n    });\n  },\n\n  toggleInlineDialog: function(dialogType, data) {\n    AppDispatcher.dispatch('toggle-inline-dialog', {\n      dialog_type: dialogType,\n      current_dialog_type: InlineDialogStore.getCurrentInlineDialog(),\n      dialog_data: data\n    });\n  },\n\n  showUserStatusMessage: function(data) {\n    AppDispatcher.dispatch(\"show-inline-dialog\", {\n      dialog_type: \"user-status-message-inline-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showConnectionStatusMessage: function (data) {\n    AppDispatcher.dispatch(\"show-inline-dialog\", {\n      dialog_type: \"connection-status-message-inline-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showGuestAccessInformation: function (data) {\n    AppDispatcher.dispatch(\"show-inline-dialog\", {\n      dialog_type: \"guest-access-information-inline-dialog\",\n      dialog_data: data\n    });\n  },\n\n  showAddIntegrationsHelperDialog: function(data) {\n    AppDispatcher.dispatch(\"show-inline-dialog\", {\n      dialog_type: \"add-integrations-help-dialog\",\n      dialog_data: data\n    });\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/inline_dialog_actions.js\n **/","import Store from \"lib/core/store\";\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AppConfig from \"config/app_config\";\n\nclass InlineDialogStore extends Store {\n\n  getDefaults() {\n    return {\n      activeDialog: false,\n      bannerShown: false,\n      dialogData: false,\n      web_server: AppConfig.default_web_server,\n      current_user_id: ''\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'show-inline-dialog': (data) => {\n        this._showInlineDialog(data);\n      },\n      'hide-inline-dialog': () => {\n        this._hideInlineDialog();\n      },\n      'toggle-inline-dialog': (data) => {\n        this._toggleInlineDialog(data);\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'notification-banner-status': (data) => {\n        this.set('bannerShown', data.shown);\n      },\n      'updated:current_user': (data) => {\n        this.set('current_user_id', data.user_id);\n      }\n    });\n  }\n\n  _toggleInlineDialog(data) {\n    // Show a new dialog if it is different to the current one\n    if (data.dialog_type !== this.getCurrentInlineDialog()) {\n      this._showInlineDialog(data);\n    } else { // Otherwise the new and current are the same so we hide it\n      this._hideInlineDialog();\n    }\n  }\n\n  _showInlineDialog(data) {\n    this.set({\n      activeDialog: data.dialog_type,\n      dialogData: data.dialog_data\n    });\n  }\n\n  _hideInlineDialog() {\n    if (this.getCurrentInlineDialog() !== false) {\n      this.set({\n        activeDialog: false,\n        dialogData: false\n      });\n    }\n  }\n\n  getCurrentInlineDialog() {\n    return this.get(\"activeDialog\");\n  }\n}\n\nexport default new InlineDialogStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/inline_dialog_store.js\n **/","import mousetrap from \"mousetrap\";\nimport AnalyticsDispatcher from \"dispatchers/analytics_dispatcher\";\nimport KeyboardActions from \"actions/keyboard_shortcut_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport KeyboardShortcutStrings from \"strings/keyboard_shortcut_strings\";\nimport KeyboardShortcutActionKeys from \"keys/keyboard_shortcut_action_keys\";\nimport utils from \"helpers/utils\";\nimport ModalDialogStore from \"stores/modal_dialog_store\";\n\nlet KeyboardShortcuts = {\n\n  /**\n   * This method initializes the key commands. Pass an optional array of key commands.\n   * If no key commands are provided defaults will be used.\n   *\n   * Simple example:\n   * [{\n   *   \"keys\": \"command+j\", // see https://craig.is/killing/mice for available options\n   *   \"action\": \"New chat\" // default title and display will show in key commands dialog\n   * }]\n   *\n   * Advanced example:\n   * [{\n   *   \"keys\": [\"command+j\", \"command+n\"], // array for multiple commands to single action\n   *   \"action\": function(){ alert(\"example\") }, // custom action\n   *   \"title\": \"New action!\", // overwrite default title\n   *   \"display\": \"Cmd + J or Cmd + N\" // overwrite default key display\n   * }]\n   */\n  init(keyCommands) {\n    this.commands = [];\n    this.processCommands(keyCommands || this.getDefaults());\n  },\n\n  processCommands(keyCommands) {\n    keyCommands.forEach((command) => {\n      // must have keys and an associated action (string or function)\n      // keys can be a string or array (for multiple commands with the same action)\n      if (command.keys && command.action) {\n        this.bindHandler(command);\n      }\n\n      // all key commands will be added to the visible list unless the property\n      // display: false is passed. The default display is the \"keys\" property\n      // but you can set this to anything with display: \"example+any+key\". If you\n      // pass an array into the \"keys\" prop only the first will be use for display.\n      if (command.display !== false) {\n        this.addDisplayItem(command);\n      }\n    });\n  },\n\n  bindHandler(command) {\n    let actionHandler = (typeof command.action === \"function\") ? command.action : this.getHandler(command.action);\n\n    mousetrap.bind(command.keys, (e) => {\n      this.dispatchAnalyticsEvent(command);\n      return actionHandler.apply(this, [command, e]);\n    });\n  },\n\n  dispatchAnalyticsEvent(command) {\n    if (typeof command.action === 'function') {\n      command.action = '[Function]';\n    }\n    AnalyticsDispatcher.dispatch('analytics-keyboard-shortcut-used', command);\n  },\n\n  addDisplayItem(command) {\n    let title = (command.title) ? command.title : this.getTitle(command.action);\n    let keys = this.formatDisplay(command.display || command.keys);\n\n    this.commands.push({\n      title,\n      keys\n    });\n  },\n\n  getTitle(action) {\n    let title;\n\n    switch (action) {\n      case KeyboardShortcutActionKeys.NEW_CHAT:\n        title = KeyboardShortcutStrings.new_chat;\n        break;\n      case KeyboardShortcutActionKeys.INVITE_TO_ROOM:\n        title = KeyboardShortcutStrings.room_invite_users;\n        break;\n      case KeyboardShortcutActionKeys.CLOSE_ROOM:\n        title = KeyboardShortcutStrings.close_room;\n        break;\n      case KeyboardShortcutActionKeys.CREATE_ROOM:\n        title = KeyboardShortcutStrings.create_room;\n        break;\n      case KeyboardShortcutActionKeys.NAVIGATE_ROOMS_UP:\n        title = KeyboardShortcutStrings.navigate_rooms_up;\n        break;\n      case KeyboardShortcutActionKeys.NAVIGATE_ROOMS_DOWN:\n        title = KeyboardShortcutStrings.navigate_rooms_down;\n        break;\n      case KeyboardShortcutActionKeys.SEARCH_HISTORY:\n        title = KeyboardShortcutStrings.search_history;\n        break;\n      case KeyboardShortcutActionKeys.TOGGLE_SOUND_NOTIFICATIONS:\n        title = KeyboardShortcutStrings.toggle_sound_notifications;\n        break;\n      case KeyboardShortcutActionKeys.MARK_ROOMS_AS_READ:\n        title = KeyboardShortcutStrings.mark_rooms_as_read;\n        break;\n      case KeyboardShortcutActionKeys.MARK_CHATS_AS_READ:\n        title = KeyboardShortcutStrings.mark_chats_as_read;\n        break;\n      case KeyboardShortcutActionKeys.RECALL_OLDER_INPUT_HISTORY:\n        title = KeyboardShortcutStrings.recall_older_input_history;\n        break;\n      case KeyboardShortcutActionKeys.RECALL_NEWER_INPUT_HISTORY:\n        title = KeyboardShortcutStrings.recall_newer_input_history;\n        break;\n      case KeyboardShortcutActionKeys.VIEW_SHORTCUTS:\n        title = KeyboardShortcutStrings.view_shortcuts;\n        break;\n      default:\n        title = \"\";\n    }\n    return title;\n  },\n\n  getHandler(action) {\n    let result;\n\n    switch (action) {\n      case KeyboardShortcutActionKeys.NEW_CHAT:\n        result = this.openQuickSwitcher.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.INVITE_TO_ROOM:\n        result = this.inviteUsersToRoom.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.CLOSE_ROOM:\n        result = this.closeRoom.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.CREATE_ROOM:\n        result = this.createRoom.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.NAVIGATE_ROOMS_UP:\n        result = this.navigateRoomsUp.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.NAVIGATE_ROOMS_DOWN:\n        result = this.navigateRoomsDown.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.SEARCH_HISTORY:\n        result = this.searchHistory.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.TOGGLE_SOUND_NOTIFICATIONS:\n        result = this.toggleSoundNotifications.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.MARK_ROOMS_AS_READ:\n        result = this.markRoomsAsRead.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.MARK_CHATS_AS_READ:\n        result = this.markChatsAsRead.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.VIEW_SHORTCUTS:\n        result = this.showKeyboardShortcutsDialog.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.REOPEN_LAST_CHAT:\n        result = this.reopenLastChat.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.RECALL_OLDER_INPUT_HISTORY:\n        result = this.recallOlderInputHistory.bind(this);\n        break;\n      case KeyboardShortcutActionKeys.RECALL_NEWER_INPUT_HISTORY:\n        result = this.recallNewerInputHistory.bind(this);\n        break;\n      default:\n        result = null;\n    }\n    return result;\n  },\n\n  formatDisplay(display = \"\") {\n    display = utils.toArray(display)[0];\n\n    let keys = _.forEach(display.split(\"+\"), (val, index, arr) => {\n      val = val.toLowerCase();\n      let type = (val === \"command\") ? \"modifier\" : \"normal\";\n      let keyName = \"\";\n\n      switch (val) {\n        case \"ctrl\":\n          keyName = KeyboardShortcutStrings.control;\n          break;\n        case \"alt\":\n          keyName = KeyboardShortcutStrings.alt;\n          break;\n        case \"shift\":\n          keyName = KeyboardShortcutStrings.shift;\n          break;\n        case \"option\":\n          keyName = KeyboardShortcutStrings.option;\n          break;\n        case \"command\":\n          keyName = KeyboardShortcutStrings.command;\n          break;\n        case \"esc\":\n          keyName = KeyboardShortcutStrings.esc;\n          break;\n        case \"tab\":\n          keyName = KeyboardShortcutStrings.tab;\n          break;\n        case \"up\":\n          keyName = KeyboardShortcutStrings.up_arrow;\n          break;\n        case \"down\":\n          keyName = KeyboardShortcutStrings.down_arrow;\n          break;\n        case \"left\":\n          keyName = KeyboardShortcutStrings.left_arrow;\n          break;\n        case \"right\":\n          keyName = KeyboardShortcutStrings.right_arrow;\n          break;\n        default:\n          keyName = val;\n      }\n\n      arr[index] = {\n        type: type,\n        name: keyName\n      };\n    });\n    return keys;\n  },\n\n  getDefaults() {\n    let defaults = (utils.platform.isMac()) ? this.getDefaultsMac() : this.getDefaultsWindows();\n    return defaults;\n  },\n\n  getDefaultsMac() {\n    return [\n      {\n        \"keys\": \"command+j\",\n        \"action\": KeyboardShortcutActionKeys.NEW_CHAT\n      },\n      {\n        \"keys\": \"command+i\",\n        \"action\": KeyboardShortcutActionKeys.INVITE_TO_ROOM\n      },\n      {\n        \"keys\": \"command+option+w\",\n        \"action\": KeyboardShortcutActionKeys.CLOSE_ROOM\n      },\n      {\n        \"keys\": \"command+option+up\",\n        \"action\": KeyboardShortcutActionKeys.NAVIGATE_ROOMS_UP\n      },\n      {\n        \"keys\": \"command+option+down\",\n        \"action\": KeyboardShortcutActionKeys.NAVIGATE_ROOMS_DOWN\n      },\n      {\n        \"keys\": \"command+option+f\",\n        \"action\": KeyboardShortcutActionKeys.SEARCH_HISTORY\n      },\n      {\n        \"keys\": \"command+shift+s\",\n        \"action\": KeyboardShortcutActionKeys.TOGGLE_SOUND_NOTIFICATIONS\n      },\n      {\n        \"keys\": \"command+option+m\",\n        \"action\": KeyboardShortcutActionKeys.MARK_ROOMS_AS_READ\n      },\n      {\n        \"keys\": \"command+option+shift+m\",\n        \"action\": KeyboardShortcutActionKeys.MARK_CHATS_AS_READ\n      },\n      {\n        \"keys\": \"option+up\",\n        \"action\": KeyboardShortcutActionKeys.RECALL_OLDER_INPUT_HISTORY\n      },\n      {\n        \"keys\": \"option+down\",\n        \"action\": KeyboardShortcutActionKeys.RECALL_NEWER_INPUT_HISTORY\n      },\n      {\n        \"keys\": \"command+/\",\n        \"action\": KeyboardShortcutActionKeys.VIEW_SHORTCUTS\n      }\n    ];\n  },\n\n  getDefaultsWindows() {\n    return [\n      {\n        \"keys\": \"ctrl+j\",\n        \"action\": KeyboardShortcutActionKeys.NEW_CHAT\n      },\n      {\n        \"keys\": \"ctrl+i\",\n        \"action\": KeyboardShortcutActionKeys.INVITE_TO_ROOM\n      },\n      {\n        \"keys\": \"ctrl+alt+w\",\n        \"action\": KeyboardShortcutActionKeys.CLOSE_ROOM\n      },\n      {\n        \"keys\": \"ctrl+alt+up\",\n        \"action\": KeyboardShortcutActionKeys.NAVIGATE_ROOMS_UP\n      },\n      {\n        \"keys\": \"ctrl+alt+down\",\n        \"action\": KeyboardShortcutActionKeys.NAVIGATE_ROOMS_DOWN\n      },\n      {\n        \"keys\": \"ctrl+alt+f\",\n        \"action\": KeyboardShortcutActionKeys.SEARCH_HISTORY\n      },\n      {\n        \"keys\": \"ctrl+shift+s\",\n        \"action\": KeyboardShortcutActionKeys.TOGGLE_SOUND_NOTIFICATIONS\n      },\n      {\n        \"keys\": \"ctrl+alt+m\",\n        \"action\": KeyboardShortcutActionKeys.MARK_ROOMS_AS_READ\n      },\n      {\n        \"keys\": \"ctrl+alt+shift+m\",\n        \"action\": KeyboardShortcutActionKeys.MARK_CHATS_AS_READ\n      },\n      {\n        \"keys\": \"ctrl+up\",\n        \"action\": KeyboardShortcutActionKeys.RECALL_OLDER_INPUT_HISTORY\n      },\n      {\n        \"keys\": \"ctrl+down\",\n        \"action\": KeyboardShortcutActionKeys.RECALL_NEWER_INPUT_HISTORY\n      },\n      {\n        \"keys\": \"ctrl+/\",\n        \"action\": KeyboardShortcutActionKeys.VIEW_SHORTCUTS\n      }\n    ];\n  },\n\n  getKeyCommands() {\n    return this.commands;\n  },\n\n  getCommandByTitle(title) {\n    let command = _.find(this.commands, { 'title': title });\n\n    if (command) {\n      return command.keys.map((key) => {\n        return key.name;\n      });\n    }\n  },\n\n  openQuickSwitcher() {\n    if (ModalDialogStore.getCurrentModalDialog()) {\n      return false;\n    }\n\n    DialogActions.showQuickSwitcherDialog(true); //true param to hide hint\n    return false;\n  },\n\n  inviteUsersToRoom() {\n    KeyboardActions.inviteUsersToRoom();\n    return false;\n  },\n\n  createRoom() {\n    KeyboardActions.createRoom();\n    return false;\n  },\n\n  searchHistory() {\n    KeyboardActions.searchHistory();\n    return false;\n  },\n\n  closeRoom() {\n    KeyboardActions.closeRoom();\n    return false;\n  },\n\n  navigateRoomsUp() {\n    KeyboardActions.navigateRoomsUp();\n    return false;\n  },\n\n  navigateRoomsDown() {\n    KeyboardActions.navigateRoomsDown();\n    return false;\n  },\n\n  openSettings() {\n    KeyboardActions.openSettings();\n    return false;\n  },\n\n  toggleSoundNotifications() {\n    KeyboardActions.toggleSoundNotifications();\n    return false;\n  },\n\n  markRoomsAsRead() {\n    KeyboardActions.markRoomsAsRead();\n    return false;\n  },\n\n  markChatsAsRead() {\n    KeyboardActions.markChatsAsRead();\n    return false;\n  },\n\n  showKeyboardShortcutsDialog() {\n    DialogActions.showKeyboardShortcutsDialog(this.commands);\n    return false;\n  },\n\n  reopenLastChat() {\n    KeyboardActions.reopenLastChat();\n    return false;\n  },\n\n  recallOlderInputHistory(command, e) {\n    KeyboardActions.recallOlderInputHistory(e);\n    return false;\n  },\n\n  recallNewerInputHistory(command, e) {\n    KeyboardActions.recallNewerInputHistory(e);\n    return false;\n  }\n\n};\n\nexport default KeyboardShortcuts;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/keyboard_shortcuts.js\n **/","/*global define:false */\n/**\n * Copyright 2015 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.5.3\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n        _MAP[i + 96] = i;\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (window, document);\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mousetrap/mousetrap.js\n ** module id = 271\n ** module chunks = 0\n **/","/**\n * KeyboardShortcutActions\n */\n\nimport AnalyticsActions from 'actions/analytics_actions';\nimport api from 'api/api';\n\nexport default {\n\n  openLobby: function () {\n    api.openLobby();\n    AnalyticsActions.lobbyFocusedWithKeyboardShortcut();\n  },\n\n  createRoom: function () {\n    api.createRoom();\n    AnalyticsActions.createRoomClickedEvent(\"keyboard.shortcut\");\n  },\n\n  inviteUsersToRoom: function () {\n    api.inviteUsersToRoom();\n  },\n\n  searchHistory: function () {\n    api.focusSearch();\n  },\n\n  closeRoom: function () {\n    api.closeActiveChat();\n  },\n\n  navigateRoomsUp: function () {\n    api.navigateChatUp();\n  },\n\n  navigateRoomsDown: function () {\n    api.navigateChatDown();\n  },\n\n  openSettings: function () {\n    api.openSettings();\n  },\n\n  markChatsAsRead: function () {\n    api.markChatsAsRead();\n  },\n\n  markRoomsAsRead: function () {\n    api.markRoomsAsRead();\n  },\n\n  toggleSoundNotifications: function () {\n    api.toggleSoundNotifications();\n  },\n\n  reopenLastChat: function () {\n    api.reopenLastChat();\n  },\n\n  recallOlderInputHistory: function (e) {\n    api.recallOlderInputHistory(e);\n  },\n\n  recallNewerInputHistory: function (e) {\n    api.recallNewerInputHistory(e);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/keyboard_shortcut_actions.js\n **/","export default {\n  separator: `+`,\n  control: `Ctrl`,\n  alt: `Alt`,\n  option: `Option`,\n  shift: `Shift`,\n  space: `Space`,\n  esc: `Esc`,\n  tab: `Tab`,\n  command: `\\u{2318}`,\n  up_arrow: `\\u{2191}`,\n  down_arrow: `\\u{2193}`,\n  left_arrow: `\\u{2190}`,\n  right_arrow: `\\u{2192}`,\n  new_chat: `New chat`,\n  room_invite_users: `Invite to room`,\n  search_history: `Search chat history`,\n  close_room: `Close room`,\n  create_room: `Create room`,\n  navigate_rooms_up: `Navigate rooms up`,\n  navigate_rooms_down: `Navigate rooms down`,\n  toggle_sound_notifications: `Toggle sound notifications`,\n  mark_chats_as_read: `Mark all chats as read`,\n  mark_rooms_as_read: `Mark all rooms as read`,\n  recall_older_input_history: `Navigate up through sent messages`,\n  recall_newer_input_history: `Navigate down through sent messages`,\n  view_shortcuts: `View shortcuts`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/keyboard_shortcut_strings.js\n **/","/**\n * @typedef {{name: string, key: string}} keyboard_shortcut_strings\n * @type {Object.<string, string>}\n */\nmodule.exports = {\n  NEW_CHAT: \"newChat\",\n  INVITE_TO_ROOM: \"inviteUsersToRoom\",\n  CLOSE_ROOM: \"closeRoom\",\n  CREATE_ROOM: \"createRoom\",\n  NAVIGATE_ROOMS_UP: \"navigateRoomsUp\",\n  NAVIGATE_ROOMS_DOWN: \"navigateRoomsDown\",\n  SEARCH_HISTORY: \"searchHistory\",\n  TOGGLE_SOUND_NOTIFICATIONS: \"toggleSoundNotifications\",\n  MARK_CHATS_AS_READ: \"markChatsAsRead\",\n  MARK_ROOMS_AS_READ: \"markRoomsAsRead\",\n  VIEW_SHORTCUTS: \"viewShortcuts\",\n  REOPEN_LAST_CHAT: \"reopenLastChat\",\n  RECALL_OLDER_INPUT_HISTORY: \"recallOlderInputHistory\",\n  RECALL_NEWER_INPUT_HISTORY: \"recallNewerInputHistory\"\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/keyboard_shortcut_action_keys.js\n **/","import Store from 'lib/core/store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\n\nclass ModalDialogStore extends Store {\n\n  constructor() {\n    super();\n\n    // Allowance for animation\n    this.delayDuration = AppConfig.modal_transition_allowance;\n    this.delayTimeout = null;\n\n    this.activationDelay = 100;\n\n    this.local = {\n      fileViewerOpened: false\n    };\n  }\n\n  getDefaults() {\n    return {\n      activeDialog: false,\n      dialogData: false,\n      dialogVisible: false,\n      btnLoading: false,\n      bgDismiss: true,\n      web_server: AppConfig.default_web_server,\n      dialogs_queue: []\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'show-modal-dialog': (data) => {\n        let dialogData = {\n          activeDialog: data.dialog_type,\n          dialogVisible: false,\n          dialogData: data.dialog_data,\n          btnLoading: false\n        };\n\n        if (!this.isQueueableDialog(dialogData) && this.isDialogActive(dialogData)) {\n          return;\n        }\n\n        // If I'm in the middle of the closing animation from one dialog, and I'm told to\n        // show another, clear that animation timeout and wipe out the old dialog data\n        if (this.deactivateTimeout) {\n          clearTimeout(this.deactivateTimeout);\n          this.deactivateTimeout = null;\n          this.data.dialogData = null;\n          this.data.activeDialog = null;\n        }\n\n        if (this.isQueueableDialog(dialogData) && this.shouldDialogQueue()) {\n          this.data.dialogs_queue.push(dialogData);\n        } else {\n          this.showDialog(dialogData);\n        }\n      },\n      'hide-modal-dialog': () => {\n        // If I'm in the middle of the opening animation from one dialog, and I'm told\n        // to close it, clear that animation timeout and shut it down\n        if (this.activateTimeout) {\n          clearTimeout(this.activateTimeout);\n          this.activateTimeout = null;\n        }\n\n        // Set dialog invisible\n        this.set({\n          dialogVisible: false,\n          btnLoading: false\n        });\n\n        // after animation timeout, wipe out dialog data\n        this.deactivateDialog();\n\n        if (this.data.dialogs_queue.length) {\n          let nextDialog = this.data.dialogs_queue.shift();\n          this.showDialog(nextDialog);\n        }\n      },\n      'modal-dialog-btn-loading': (data) => {\n        this.set('btnLoading', !!data.loading);\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'open-in-file-viewer': () => {\n        this.local.fileViewerOpened = true;\n      },\n      'file-viewer-closed': () => {\n        this.local.fileViewerOpened = false;\n\n        if (this.data.dialogs_queue.length) {\n          let nextDialog = this.data.dialogs_queue.shift();\n          this.showDialog(nextDialog);\n        }\n      }\n    });\n  }\n\n  showDialog(data) {\n    // Init dialog data\n    this.set({\n      activeDialog: data.activeDialog,\n      dialogVisible: data.dialogVisible,\n      dialogData: data.dialogData,\n      btnLoading: data.btnLoading\n    });\n\n    // Set dialog visible after animation to trigger focus hooks\n    this.activateDialog();\n  }\n\n  activateDialog() {\n    let activate = () => {\n      this.set('dialogVisible', true);\n      this.activateTimeout = null;\n    };\n\n    if (this.activationDelay) {\n      this.activateTimeout = setTimeout(activate, this.activationDelay);\n    } else {\n      activate();\n    }\n\n  }\n\n  deactivateDialog() {\n    let deactivate = () => {\n      this.set({\n        activeDialog: null,\n        dialogData: false\n      });\n    };\n\n    if (this.delayDuration){\n      this.deactivateTimeout = setTimeout(()=>{\n        if (!this.get('dialogVisible')){\n          deactivate();\n          this.delayTimeout = null;\n        }\n      }, this.delayDuration);\n    } else {\n      deactivate();\n    }\n  }\n\n  getCurrentModalDialog() {\n    return this.get(\"activeDialog\");\n  }\n\n  isDialogActive(dialog) {\n    return this.get('activeDialog') === dialog.activeDialog;\n  }\n\n  isQueueableDialog(dialog) {\n    return !!_.get(dialog, 'dialogData.should_queue');\n  }\n\n  shouldDialogQueue() {\n    return this.data.dialogVisible || this.local.fileViewerOpened;\n  }\n\n}\n\nexport default new ModalDialogStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/modal_dialog_store.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport VideoServiceKeys from 'keys/video_service_keys';\n\nconst DEBOUNCE_DELAY = 500;\n\nconst DEBOUNCE_OPTIONS = Object.freeze({\n  leading: true,\n  trailing: false\n});\n\n/**\n * Opens the video UI and calls a user\n * @param {object} data\n * @param {string} data.jid the jid of the user to call\n * @param {bool} data.audio_only whether or not this is an audio-only call\n */\nexport function startAddliveCall(data) {\n  AnalyticsDispatcher.dispatch(\"analytics-event\", {\n    name: \"hipchat.client.user.oto.video.call\",\n    properties: {\n      service: VideoServiceKeys.ADDLIVE\n    }\n  });\n  AppDispatcher.dispatch('addlive.start-video-call', {\n    jid: data.jid,\n    audio_only: data.audio_only,\n    type: 'call',\n    name: data.name || ''\n  });\n}\n\n/**\n * Opens the video UI and calls a user\n * @param {object} data\n * @param {string} data.jid the jid of the user to call\n * @param {bool} data.audio_only whether or not this is an audio-only call\n */\nexport function startEnsoCall(data) {\n  AnalyticsDispatcher.dispatch(\"analytics-event\", {\n    name: \"hipchat.client.user.oto.video.call\",\n    properties: {\n      service: VideoServiceKeys.ENSO\n    }\n  });\n  AppDispatcher.dispatch('enso.start-video-call', {\n    jid: data.jid,\n    audio_only: data.audio_only,\n    type: 'call',\n    name: data.name || ''\n  });\n}\n\n/**\n * Sends a notification to the room for users to join a room call\n * @param {object} data\n * @param {string} data.jid the jid of the room to call\n */\nexport function startEnsoRoomVideo(data) {\n  AnalyticsDispatcher.dispatch(\"analytics-event\", {\n    name: \"hipchat.client.user.room.video.call\",\n    properties: {\n      room: data.room_id\n    }\n  });\n  AppDispatcher.dispatch('enso.start-room-video', {\n    jid: data.jid,\n    room_id: data.room_id,\n    audio_only: false,\n    type: 'call',\n    name: data.name || ''\n  });\n}\n\n\n/**\n * Used to trigger actions on the chat header\n * @module actions/ChatHeaderActions\n */\nexport default {\n\n  /**\n   *\n   * @param {object} data\n   * @param {string} data.room JID of current chat\n   * @param {string} data.type Panel type. Valid values: files, links, roster.\n   */\n  handlePanelSelect(data) {\n    AppDispatcher.dispatch('select-panel', {\n      activePanel: data.type\n    });\n  },\n\n  /**\n   * Initiates edit mode for the topic in the chat header\n   */\n  editTopicInChatHeader() {\n    AppDispatcher.dispatch('edit-topic');\n  },\n\n  /**\n   * Cancels the inline edit mode for the topic in the chat header\n   */\n  dismissTopicEdit() {\n    AppDispatcher.dispatch('dismiss-topic-edit');\n  },\n\n  /**\n   * Updates the topic value in the chat header\n   * @param {string} newTopic New topic\n   */\n  changeTopic(newTopic) {\n    AppDispatcher.dispatch('set-topic', newTopic);\n  },\n\n  startAddliveCall: _.debounce(startAddliveCall, DEBOUNCE_DELAY, DEBOUNCE_OPTIONS),\n  startEnsoCall: _.debounce(startEnsoCall, DEBOUNCE_DELAY, DEBOUNCE_OPTIONS),\n  startEnsoRoomVideo: _.debounce(startEnsoRoomVideo, DEBOUNCE_DELAY, DEBOUNCE_OPTIONS),\n\n  startCall(data) {\n    if (data.service === VideoServiceKeys.ENSO) {\n      this.startEnsoCall(data);\n    } else if (data.service === VideoServiceKeys.ADDLIVE) {\n      this.startAddliveCall(data);\n    }\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/chat_header_actions.js\n **/","/**\n * @typedef {{name: string, key: string}} videoServiceKeys\n * @type {Object.<string, string>}\n */\nconst VideoServiceKeys = Object.freeze({\n  ENSO: 'enso',\n  ADDLIVE: 'addlive'\n});\nexport default VideoServiceKeys;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/video_service_keys.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\n\nexport default {\n\n  changeRoomPrivacy: function (submit_data, callback) {\n    AppDispatcher.dispatch(\"change-room-privacy\", submit_data, callback);\n  },\n\n  changeRoomName: function (submit_data, callback) {\n    AppDispatcher.dispatch(\"change-room-name\", submit_data, callback);\n  },\n\n  createRoom: function (submit_data, callback) {\n    AppDispatcher.dispatch(\"create-room\", submit_data, callback);\n    AnalyticsDispatcher.dispatch(\"analytics-create-room\", submit_data);\n  },\n\n  inviteUsers: function (submit_data) {\n    AppDispatcher.dispatch('invite-users', submit_data);\n  },\n\n  removeUsers: function (submit_data, callback) {\n    AppDispatcher.dispatch('remove-users', submit_data, callback);\n  },\n\n  editMessage: function(submit_data) {\n    AppDispatcher.dispatch('edit-message', submit_data);\n  },\n\n  deleteMessage: function(submit_data) {\n    AppDispatcher.dispatch('delete-message', submit_data);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/form_actions.js\n **/","/**\n * Room Dropdown Actions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\n\nmodule.exports = {\n\n  editTopic: function () {\n    AppDispatcher.dispatch('edit-topic');\n  },\n\n  deleteRoom: function (data, cb) {\n    AppDispatcher.dispatch('delete-room', {\n      jid: data.jid,\n      id: data.id\n    }, cb);\n  },\n\n  closeRoom: function(jid) {\n    AppDispatcher.dispatch('close-room', {\n      jid: jid,\n      doNotNotifyHC: true\n    });\n  },\n\n  archiveRoom: function (data, cb) {\n    AppDispatcher.dispatch('archive-room', {\n      jid: data.jid,\n      id: data.id\n    }, cb);\n  },\n\n  unarchiveRoom: function (data, cb) {\n    AppDispatcher.dispatch('unarchive-room', {\n      jid: data.jid,\n      id: data.id\n    }, cb);\n  },\n\n  enableGuestAccess: function (data, cb) {\n    AppDispatcher.dispatch('set-guest-access', {\n      jid: data.jid,\n      enable: true\n    }, cb);\n  },\n\n  disableGuestAccess: function (data, cb) {\n    AppDispatcher.dispatch('set-guest-access', {\n      jid: data.jid,\n      enable: false\n    }, cb);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/room_dropdown_actions.js\n **/","/**\n * RoomNavActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\nvar AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\n\nvar RoomNavActions = {\n\n  /**\n   * @param  {string} jid\n   */\n  select: function(jid, type) {\n    var data = {\n      jid: jid,\n      type: type\n    };\n    AppDispatcher.dispatch('set-route', data);\n    AnalyticsDispatcher.dispatch('analytics-select-room', data);\n  },\n\n  /**\n   * @param  {string} jid\n   */\n  close: function(jid, type) {\n    AppDispatcher.dispatch('close-room', {\n      jid: jid,\n      type: type\n    });\n  },\n\n  closeSearchResults: function() {\n    AppDispatcher.dispatch('close-room', {jid: \"search\"});\n    AppDispatcher.dispatch('remove-search-nav-item');\n  },\n\n  openSearchResults: function() {\n    AppDispatcher.dispatch('set-route', {\n      jid: \"search\"\n    });\n  },\n\n  openLobby: function() {\n    var data = {\n      jid: \"lobby\"\n    };\n    AppDispatcher.dispatch('set-route', {jid: 'lobby'});\n    AnalyticsDispatcher.dispatch('analytics-select-room', data);\n  },\n\n  update_room_order: function(room_jids) {\n    AppDispatcher.dispatch('update-room-order', room_jids);\n  },\n\n  dragStart: function(data) {\n    AppDispatcher.dispatch('rooms-nav-drag-start', {\n      target: data.target\n    });\n  },\n\n  dragOver: function(data) {\n    AppDispatcher.dispatch('rooms-nav-drag-over', {\n      event: data.event\n    });\n  },\n\n  dragEnd: function () {\n    AppDispatcher.dispatch('rooms-nav-drag-end');\n  }\n\n};\n\nmodule.exports = RoomNavActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/room_nav_actions.js\n **/","/* Helper used to sanitize Sentry error objects on native */\nmodule.exports = {\n\n  constants: {\n    fileKey: \"file://\",\n    splitKey: \"/\",\n    fallback: \"Unknown\"\n  },\n\n  containsKey(string, key) {\n    if (!_.isString(string) || !_.isString(key)) {\n      return false;\n    }\n    return string.indexOf(key) !== -1;\n  },\n\n  returnLastItem(splitArray, fallback) {\n    if (!_.isArray(splitArray) || _.isArray(splitArray) && !splitArray.length) {\n      return fallback;\n    }\n    return splitArray[splitArray.length - 1];\n  },\n\n  sanitizePath(string) {\n    let splitString,\n        key = this.constants.splitKey,\n        fallback = this.constants.fallback,\n        response;\n\n    if (string && this.containsKey(string, key)) {\n      splitString = string.split(key);\n      response = this.returnLastItem(splitString, fallback);\n    } else {\n      response = fallback;\n    }\n    return response;\n  },\n\n  sanitizeStackTrace(data, frames) {\n    let key = this.constants.splitKey,\n        fileKey = this.constants.fileKey,\n        fallback = this.constants.fallback;\n\n    for (var i = 0; i < frames.length; i++) {\n      let filename = (frames[i] && frames[i].filename) ? frames[i].filename : false;\n      if (filename && this.containsKey(filename, fileKey)) {\n        let filenameSplit = filename.split(key);\n        data.stacktrace.frames[i].filename = this.returnLastItem(filenameSplit, fallback);\n      }\n    }\n  },\n\n  sanitize(data) {\n    if (_.isObject(data)) {\n      if (data.culprit) {\n        data.culprit = this.sanitizePath(data.culprit);\n      }\n\n      if (_.has(data, \"request.url\")) {\n        data.request.url = this.sanitizePath(data.request.url);\n      }\n\n      if (_.has(data, \"request.headers.Referer\")) {\n        data.request.headers.Referer = this.sanitizePath(data.request.headers.Referer);\n      }\n\n      if (_.has(data, \"stacktrace.frames\")) {\n        this.sanitizeStackTrace(data, data.stacktrace.frames);\n      }\n    }\n    return data;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/sentry_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport VideoServiceKeys from 'keys/video_service_keys';\nimport jid_utils from 'helpers/jid_utils';\n\nexport default {\n\n  startScreenShare: function (jid) {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ENSO}.start-screen-share`, {jid});\n  },\n\n  showInviteFlag(data) {\n    AppDispatcher.dispatch('show-flag', {\n      id: data.id,\n      type: 'video',\n      sender: data.sender,\n      photo: data.photo_url,\n      message: data.message,\n      service: VideoServiceKeys.ENSO\n    });\n  },\n\n  showPopupsDisabledFlag(data) {\n    AppDispatcher.dispatch('show-flag', {\n      id: data.flag_id,\n      type: 'video_popup_blocked',\n      body: data.message,\n      promise: data.promise\n    });\n  },\n\n  removeInviteFlag(data) {\n    AppDispatcher.dispatch('remove-flag', data.index);\n  },\n\n  sendVideoInviteDeclineMessage(data) {\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.jid,\n      type: 'decline',\n      reason: data.reason,\n      service: VideoServiceKeys.ENSO\n    });\n  },\n\n  handleRemoteDeclinedMessage(data) {\n    AppDispatcher.dispatch('call-declined', data.message);\n  },\n\n  sendVideoInviteAcceptMessage(data) {\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.jid,\n      type: 'accept',\n      service: VideoServiceKeys.ENSO\n    });\n  },\n\n  sendVideoInviteMessage(data) {\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.jid,\n      url: data.url,\n      type: 'call',\n      service: VideoServiceKeys.ENSO,\n      callback: data.callback\n    });\n  },\n\n  sendHangupMessage(data) {\n    let type = jid_utils.is_room(data.jid) ? 'room' : 'oto';\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.user.${type}.video.hangup`,\n      properties: {\n        room: data.room_id,\n        service: VideoServiceKeys.ENSO\n      }\n    });\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.jid,\n      type: 'hangup',\n      service: VideoServiceKeys.ENSO\n    });\n  },\n\n  generateMissedCallMessage(data) {\n    AppDispatcher.dispatch('missed-call', data.message);\n  },\n\n  videoConferenceJoined() {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ENSO}.video-conference-joined`);\n  },\n\n  videoConferenceLeft() {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ENSO}.video-conference-left`);\n  },\n\n  destroyVideoSession() {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ENSO}.video-session-destroyed`);\n  },\n\n  videoCallConnected({ jid, start = 0, done = 0}) {\n    let type = jid_utils.is_room(jid) ? 'room' : 'oto';\n    let time = done - start;\n\n    if (time <= 0) {\n      return;\n    }\n\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.user.${type}.video.connected`,\n      properties: {\n        time,\n        service: VideoServiceKeys.ENSO\n      }\n    });\n  },\n\n  joinRoomVideoCall(data) {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: `hipchat.client.user.room.video.join`,\n      properties: {\n        room: data.room_id,\n        service: VideoServiceKeys.ENSO\n      }\n    });\n    AppDispatcher.dispatch(`${VideoServiceKeys.ENSO}.join-room-video`, data);\n  },\n\n  joinAddLiveCall(data) {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ADDLIVE}.start-video-call`, {\n      service: VideoServiceKeys.ADDLIVE,\n      type: 'call',\n      jid: data.jid,\n      audio_only: data.audio_only\n    });\n  },\n\n  leaveAddLiveCall(jid) {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ADDLIVE}.audio-video-call-hung-up`, {\n      sender: {\n        jid\n      }\n    });\n  },\n\n  endAddLiveVideoSession(jid) {\n    AppDispatcher.dispatch(`${VideoServiceKeys.ADDLIVE}.video-window-event`, {\n      type: 'video_session_ended',\n      data: {\n        jid: jid,\n        reloading: false\n      }\n    });\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/video_actions.js\n **/","import moment from 'moment';\nimport utils from './utils';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport PreferencesStore from '../stores/preferences_store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport strings from 'strings/fileviewer_strings';\n\nclass FileHelper {\n  constructor() {\n    let timeout = AppConfig.fetch_thumbnails_timeout;\n    let boundFunction = this.fetchSignedThumbnailCollection.bind(this);\n\n    this.thumbnailMap = {};\n    this._debouncedFetchSignedThumbnailCollection = _.debounce(boundFunction, timeout, {\n      leading: false,\n      trailing: true\n    });\n  }\n\n  /**\n   * Returns true if the click event was triggered by a left click\n   * @param  {event} event\n   * @return {bool}\n   */\n  shouldOpenFileViewer(event = {}) {\n    return (event.button === 0);\n  }\n\n  /**\n   * Returns the filename from a path.\n   * @param {string} path\n   * @returns {string} filename\n   */\n  basename(path = '') {\n    return path.split('/').pop();\n  }\n\n  /**\n   * Returns the suffix from a path.\n   * @param {string} path\n   * @returns {string} filename\n   */\n  filesuffix(path = '') {\n    var basename = this.basename(path);\n    var suffix = basename.split('.').pop();\n    return basename !== suffix ? suffix : '';\n  }\n\n  /**\n   * Check if FileViewer supports previewing the given file.\n   * @param {object} file\n   * @returns {boolean} is file supported\n   */\n  fileViewerSupports(file = {}) {\n    var normalized = this._normalizeFile(file);\n    return this._guessMimeType(normalized) !== 'unknown';\n  }\n\n  /**\n   * Transform a file to the format used by fileviewer.\n   * @param {object} file\n   * @returns {boolean} FileViewer file\n   */\n  transformForFileViewer(file = {}) {\n    var normalized = this._normalizeFile(file);\n    var item = {\n      is_authenticated: normalized.is_authenticated,\n      src: normalized.signed_url || normalized.url,\n      srcDownload: normalized.url,\n      title: normalized.name,\n\n      // if we return 'not/supported' as the mime type for signed files, the file viewer will resolve the signed url before previewing the file\n      type: normalized.is_authenticated ? 'not/supported' : this._guessMimeType(normalized),\n\n      downloadable: this._isDownloadable(normalized),\n      date: normalized.date,\n      meta: normalized.meta\n    };\n\n    if (item.type === 'video/youtube') {\n      item.title = file.title || 'Youtube Video';\n    }\n\n    return item;\n  }\n\n  _formatDateTime(time, format) {\n    if (/^-?\\d*\\.?\\d*$/.test(time)) {\n      time = moment.unix(time);\n    } else {\n      time = moment(time);\n    }\n\n    return time.format(format);\n  }\n\n  /**\n   * A file can either be an uploaded file or a link to a file.\n   * @param {object} file\n   * @returns {object} normalized file\n   */\n  _normalizeFile(file) {\n    var dateFormatString = 'MMM D YYYY';\n    var timeFormatString = PreferencesStore.shouldUse24HrTime() ? 'HH:mm' : 'h:mm A';\n\n    return {\n      url: file.image || file.file_url || file.url,\n      name: this.basename(file.name || file.title || file.url),\n      date: file.date || '',\n      is_authenticated: !!file.is_authenticated,\n      meta: {\n        avatarSrc: file.sender_avatar,\n        author: file.user_name || file.sender,\n        authorPrefix: strings.default_metabar_author_prefix,\n        date: this._formatDateTime(file.date, dateFormatString),\n        time: this._formatDateTime(file.date, timeFormatString),\n        fileSize: utils.file.get_size_string(file.size),\n        fileType: this.filesuffix(file.image || file.file_url || file.name || file.url)\n      }\n    };\n  }\n\n  /**\n   * Guesses the mimetype for a given file based on the path.\n   * @param {object} normalized file\n   * @returns {string} mimetype\n   */\n  _guessMimeType(file) {\n    var name = (file.url || '').split('?')[0].toLowerCase() || (file.name || '').toLowerCase();\n    var fileType = file.meta && file.meta.fileType ? file.meta.fileType : '';\n\n    var isImage = name.match(/\\.(png|jpg|jpeg|gif|svg)$/i) || fileType.match(/(png|jpg|jpeg|gif|svg)$/i);\n    var isDoc = name.match(/\\.pdf$/i) || fileType.match(/pdf$/i);\n    var isAudio = name.match(/\\.mp3$/i) || fileType.match(/mp3$/i);\n    var isVideo = name.match(/\\.mp4$/i) || fileType.match(/mp4$/i);\n    var isYoutube = name.match(/(youtu(?:be\\.com|\\.be))/i);\n\n    if (isImage) {\n      return 'image/' + isImage[1].replace('jpg', 'jpeg').replace('svg', 'svg+xml');\n    }\n    if (isDoc) {\n      return 'application/pdf';\n    }\n    if (isYoutube) {\n      return 'video/youtube';\n    }\n    if (isVideo) {\n      return 'video/mp4';\n    }\n    if (isAudio) {\n      return 'audio/mp3';\n    }\n\n    return 'unknown';\n  }\n\n  /**\n   * Check if a file is downloadable.\n   * @param {object} file\n   * @returns {boolean} is downloadable\n   */\n  _isDownloadable(file) {\n    return this._guessMimeType(file) !== 'video/youtube';\n  }\n\n  /**\n   * Download a file at a URL directly\n   * @param {string} url of the file\n   * @returns {boolean}\n   */\n  downloadFileAtUrl(url) {\n    /*\n     This is the only method available that works cross-browser,\n     regardless of popup/privacy settings.\n     */\n    AnalyticsDispatcher.dispatch('analytics-secure-file-download');\n    let frame = document.createElement('iframe'),\n      remove = () => {\n        frame.parentNode.removeChild(frame);\n        AppDispatcher.dispatch('file-download-stop');\n      };\n    document.body.appendChild(frame);\n\n    // this delay is necessary to initiate download\n    _.delay(remove, AppConfig.file_download_timeout);\n    frame.src = url;\n  }\n\n  /**\n   * Fetches signed thumbnail collection from thumbnail map\n   */\n  fetchSignedThumbnailCollection() {\n    ChatWindowActions.fetchSignedThumbnailCollection(this.thumbnailMap);\n    this.thumbnailMap = {};\n  }\n\n  /**\n   * Fetch signed thumbnail method\n   * @param {File} file\n   * @param {Function} cb\n   * @param {Function} errCb\n   */\n  fetchSignedThumbnail({ id }, cb = _.noop, errCb = _.noop) {\n    let item = { cb, errCb };\n\n    this.thumbnailMap[id] = item;\n    this._debouncedFetchSignedThumbnailCollection();\n  }\n}\n\nmodule.exports = new FileHelper();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/file_helper.js\n **/","/**\n * ChatWindowActions\n */\n\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\n\nexport default {\n\n  /**\n   * Request ancient history for a chat\n   * @param data\n   * @param data.jid JID of the chat\n   */\n  requestAncientHistory: function(data) {\n    AppDispatcher.dispatch('requesting-ancient-history', data);\n  },\n\n  setScrollValue: function(data) {\n    AppDispatcher.dispatch('set-scroll-value', data);\n  },\n\n  preserveScrollValue: function(opts = {}) {\n    AppDispatcher.dispatch('preserve-scroll-value', opts);\n  },\n\n  displayMessageAction: function(data) {\n    AnalyticsDispatcher.dispatch('analytics-events', {\n      name: 'hipchat.client.integrations.message.action.open'\n    });\n\n    AppDispatcher.dispatch('display-message-action', data);\n  },\n\n  hideMessageAction: function(data) {\n    AnalyticsDispatcher.dispatch('analytics-events', {\n      name: 'hipchat.client.integrations.message.action.close'\n    });\n\n    AppDispatcher.dispatch('hide-message-action', data);\n  },\n\n  chatStartedScroll: function(jid) {\n    AppDispatcher.dispatch('chat-is-scrolling', {scrolling: true, jid: jid});\n  },\n\n  updateScrollPosition: function(data) {\n    AppDispatcher.dispatch('update-scroll-position', data);\n  },\n\n  chatStoppedScroll: function(jid) {\n    AppDispatcher.dispatch('chat-is-scrolling', {scrolling: false, jid: jid});\n  },\n\n  toggleImage: function (data) {\n    AppDispatcher.dispatch('toggle-image', {\n      jid: data.jid,\n      mid: data.mid\n    });\n  },\n\n  senderClick: function(data) {\n    AppDispatcher.dispatch('sender-clicked', data);\n  },\n\n  chatPanelMounted: function(data) {\n    AnalyticsDispatcher.dispatch('analytics-chat-mount', data);\n  },\n\n  onFailedCancel: function(msg) {\n    AppDispatcher.dispatch('cancel-failed-message', msg);\n  },\n\n  onFailedRetry: function(msg) {\n    AppDispatcher.dispatch('retry-failed-message', msg);\n  },\n\n  /**\n   * Opens a 1-1 chat by mention name\n   * @param {string} mention name\n   */\n  openChatByMentionName: function(data){\n    AppDispatcher.dispatch('open-chat-by-mention-name', data.mentionName);\n  },\n\n  dismissActionsDropDown: function() {\n    AppDispatcher.dispatch('dismiss-active-actions-dropdown');\n  },\n\n  messageMediaLoaded(data){\n    AppDispatcher.dispatch('message-media-loaded', data);\n  },\n\n  messageMediaSizeFound(data){\n    AppDispatcher.dispatch('message-media-size-found', data);\n  },\n\n  toggleAttachedCards: function (mid) {\n    AppDispatcher.dispatch('toggle-attached-cards', mid);\n  },\n\n  fetchSignedThumbnail(data, cb, errCb) {\n    AppDispatcher.dispatch('API:fetch-signed-thumbnail', data, cb, errCb);\n  },\n\n  fetchSignedThumbnailCollection(fileObj) {\n    AppDispatcher.dispatch('API:fetch-signed-thumbnail-collection', fileObj);\n  },\n\n  thumbnailIsLoading(instance) {\n    AppDispatcher.dispatch('thumbnail-is-loading', instance);\n  },\n\n  thumbnailLoadedSuccess(instance) {\n    AppDispatcher.dispatch('thumbnail-loaded-success', instance);\n  },\n\n  thumbnailLoadedError(data) {\n    AppDispatcher.dispatch('thumbnail-loaded-error', data);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/chat_window_actions.js\n **/","export default {\n  default_metabar_author_prefix: 'Shared by',\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/fileviewer_strings.js\n **/","import AppConfig from 'config/app_config';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport utils from 'helpers/utils';\n\nclass PresenceSubscriptionHelper {\n\n  constructor(config) {\n\n    this.initialized = false;\n\n    this.current_filter_list = [];\n\n    /** Object keyed by user id representing how many components we have on the screen that care about this user's presence\n     *\n     * @type {{}}\n     */\n    this.subscribed = {};\n\n    /** list of user ids that we still haven't fetched presence for yet\n     *\n     * @type {Array}\n     */\n    this.pending_presence_fetch = [];\n\n    this.debouncedFilterPresences = _.debounce(this._filterPresences, config.filter_participant_presences_timeout, {\n      leading: false,\n      trailing: true\n    });\n\n    this.throttledRequestPresences = _.throttle(this._requestPresences, config.request_participant_presences_timeout, {\n      leading: false,\n      trailing: true\n    });\n\n  }\n\n  /**\n   * Initialize the subscription helper\n   *\n   * @method init\n   */\n  init() {\n    this.initialized = true;\n    this.resubscribe();\n  }\n\n  /**\n   * Add one or more UIDs to the presence subscription object\n   *\n   * @method addUsers\n   * @param {Array} uids\n   */\n  subscribeToPresence(uids) {\n\n    let uids_array = utils.toArray(uids);\n\n    this._incrementSubscriptionCounts(uids_array);\n\n    this.throttledRequestPresences();\n    this.debouncedFilterPresences();\n  }\n\n  /**\n   * Remove one or more UIDs from the presence subscription object\n   *\n   * @method removeUsers\n   * @param {Array} uids\n   */\n  unsubscribeFromPresence(uids) {\n\n    let uids_array = utils.toArray(uids);\n\n    this._decrementSubscriptionCounts(uids_array);\n\n    this.debouncedFilterPresences();\n  }\n\n  /**\n   * Resubscribe to presence changes\n   *\n   * @method resubscribe\n   */\n  resubscribe() {\n    this.pending_presence_fetch = _.keys(this.subscribed);\n    this.throttledRequestPresences();\n    this.debouncedFilterPresences();\n  }\n\n  _incrementSubscriptionCounts(uids) {\n    _.forEach(uids, (uid) => {\n      uid = uid.toString();\n      if (this.subscribed[uid]) {\n        this.subscribed[uid]++;\n      } else {\n        this.subscribed[uid] = 1;\n\n        // we don't want to explicitly fetch a presence if we're already listening for changes\n        if (!_.includes(this.current_filter_list, uid) && !_.includes(this.pending_presence_fetch, uid)) {\n          this.pending_presence_fetch.push(uid);\n        }\n      }\n    });\n  }\n\n  _decrementSubscriptionCounts(uids) {\n    _.forEach(uids, (uid) => {\n      uid = uid.toString();\n      if (this.subscribed[uid] > 1) {\n        this.subscribed[uid]--;\n      } else {\n        this.subscribed = _.omit(this.subscribed, uid);\n        _.pull(this.pending_presence_fetch, uid);\n      }\n    });\n  }\n\n  _filterPresences() {\n\n    // get the list of users who've been added or removed\n    let filter = _.keys(this.subscribed),\n      changeset = _.xor(this.current_filter_list, filter),\n      changed = !_.isEmpty(changeset);\n\n    // only make the request if there are changes, we're initialized, and there's a uid list to filter on\n    if (changed && this.initialized && filter.length) {\n      this.current_filter_list = filter;\n      AppDispatcher.dispatch('filter-presences', this.current_filter_list);\n    }\n  }\n\n  _requestPresences() {\n\n    let uniq = _.uniq(this.pending_presence_fetch);\n\n    // only fetch if we are initialized and we have a uid list\n    if (uniq.length && this.initialized) {\n      AppDispatcher.dispatch('fetch-presences', uniq);\n\n      // clear out the list so that it's built fresh the next time the throttled call executes\n      this.pending_presence_fetch = [];\n    }\n  }\n\n}\n\nexport {PresenceSubscriptionHelper as PresenceSubscriptionHelperClass};\n\nexport default new PresenceSubscriptionHelper(AppConfig);\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/presence_subscription_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppActions from 'actions/app_actions';\nimport VideoActions from 'actions/video_actions';\nimport FlagActions from 'actions/flag_actions';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport DAL from 'core/dal';\nimport spi from 'spi';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport notifier from 'helpers/notifier';\nimport strings from 'strings/video_call_strings';\nimport VideoServiceKeys from 'keys/video_service_keys';\nimport PreferencesStore from 'stores/preferences_store';\nimport ConfigStore from 'stores/configuration_store';\nimport CurrentUserStore from 'stores/current_user_store';\nimport Presence from 'lib/enum/presence';\n\nclass VideoModule {\n\n  /**\n   * Create a VideoModule\n   */\n  constructor() {\n    this.data = this.getDefaults();\n    this.registerListeners();\n  }\n\n  /**\n   *\n   * @returns {{\n   *            video_session: null,\n   *            incoming_invites: Array,\n   *            roster: {},\n   *            video_chat_uri: null,\n   *            asset_base_uri: null\n   *          }}\n   */\n  getDefaults() {\n    return {\n      video_session: {},\n      incoming_invites: [],\n      roster: {},\n      feature_flags: {},\n      video_chat_uri: null,\n      asset_base_uri: null,\n      is_native: utils.clientSubType.isNative(ConfigStore.get('client_subtype'))\n    };\n  }\n\n  /**\n   * register callbacks on the AppDispatcher\n   */\n  registerListeners() {\n    this.handlerMap = {\n      'updated:config': this._handleConfig,\n      'updated:roster': this._handleRoster,\n      'enso.start-video-call': this.initiateVideoCall,\n      'enso.start-screen-share': this.initiateVideoCall,\n      'enso.start-room-video': this.initiateRoomVideoCall,\n      'enso.join-room-video': this.joinRoomVideoCall,\n      'enso.invite-to-audio-video-call': this.handleVideoCallInvite,\n      'enso.answer-audio-video-call': this.answerIncomingVideoCall,\n      'enso.audio-video-call-accepted': this.videoCallAcceptedByRemoteUser,\n      'enso.audio-video-call-declined': this.handleDeclinedMessage,\n      'enso.decline-audio-video-call': this.declineIncomingVideoCall,\n      'enso.audio-video-call-hung-up': this.handleHangupMessage,\n      'enso.focus-video-window': this._focusVideoWindow,\n      'enso.video-conference-joined': this.handleVideoConferenceJoined,\n      'enso.video-conference-left': this.handleVideoConferenceLeft,\n      'enso.video-session-destroyed': this.handleVideoSessionDestroy\n    };\n\n    _.mapValues(this.handlerMap, (fn, evt, map) => {\n      map[evt] = _.bind(fn, this);\n    });\n\n    AppDispatcher.register(this.handlerMap);\n  }\n\n  cleanupListeners() {\n    AppDispatcher.unregister(this.handlerMap);\n  }\n\n  _handleConfig(config) {\n    if (config.asset_base_uri) {\n      this.data.asset_base_uri = config.asset_base_uri;\n    }\n    if (config.video_base_url) {\n      this.data.video_base_url = config.video_base_url;\n    }\n    if (_.has(config, 'feature_flags') && _.isObject(config.feature_flags)) {\n      this.data.feature_flags = _.assign({}, this.data.feature_flags, config.feature_flags);\n    }\n  }\n\n  _handleRoster(roster) {\n    this.data.roster = roster;\n  }\n\n  _focusVideoWindow() {\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession) {\n        this.data.video_session.window.focus();\n      }\n    });\n  }\n\n  _getConferenceIdFromURL(url) {\n    let path = url.split('?')[0];\n    return path.slice(path.lastIndexOf('/') + 1, path.length);\n  }\n\n  _addTokenToUrl(url, token) {\n    if (!token) {\n      return url;\n    }\n    return utils.appendQueryParameter(url, 'jwt', token);\n  }\n\n  _addRingToUrl(url) {\n    // If we should play_ring_sound_in_client, than we should not ring in Video Window\n    if (this.data.feature_flags.web_client_play_ring_sound_in_client) {\n      url = utils.setHashFragment(url, {\n        'interfaceConfig.DISABLE_RINGING': 'true'\n      });\n    }\n    return url;\n  }\n\n  /**\n   * Initiate a video call\n   * @param data\n   * @returns {boolean}\n   * TODO: refactor this so it's easier to follow and test\n   */\n  initiateVideoCall(data) {\n    let start = Date.now();\n\n    // if there's no active video session\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession) {\n        this.determineVideoWindowAction(data, this.initiateVideoCall);\n      } else {\n        // create a new video session\n        let is_outgoing = data.type === 'call';\n        let [callee_id, conference_id] = is_outgoing\n          ? [utils.jid.user_id(data.jid), utils.alphaNumeric(20)]\n          : [null, this._getConferenceIdFromURL(data.url)];\n        let optionallyPreparedWindow = this.prepareCallSession();\n\n        this.showConnectingFlag();\n        DAL.fetchVideoToken(callee_id, conference_id).then(response => {\n          data.url = data.url || `${this.data.video_base_url}/${conference_id}?`;\n          if (is_outgoing) {\n            clearTimeout(this.data.connecting_timer);\n            return this.sendInvitation(data)\n              .then(() => {\n                data.url = this._addRingToUrl(data.url);\n                data.url = this._addTokenToUrl(data.url, response.token);\n                return this.createCallSession(data, optionallyPreparedWindow).then(video_window => {\n                  this.data.video_session.start_time = start;\n                  if (video_window.window || this.data.is_native) {\n                    this.notifyForOutgoingCall();\n                  } else {\n                    this.notifyForPopupBlocked(data);\n                  }\n                });\n              })\n              .catch((action, reason) => {\n                logger.debug('[ENSO]', action, reason);\n              });\n          } else if (data.type === 'accept') {\n            data.url = this._addTokenToUrl(data.url, response.token);\n            return this.createCallSession(data, optionallyPreparedWindow).then(video_window => {\n              this.data.video_session.start_time = start;\n              if (!video_window.window && !this.data.is_native) {\n                this.notifyForPopupBlocked(data);\n              }\n            });\n          }\n        }).catch(error => {\n          logger.debug('[ENSO JWT]', error);\n          //TODO: Display an error to the user somehow\n        });\n      }\n    });\n  }\n\n  initiateRoomVideoCall(data) {\n    let start = Date.now();\n\n    data.url = `${this.data.video_base_url}/${utils.alphaNumeric(20)}?`;\n\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession) {\n        this.determineVideoWindowAction(data, this.initiateRoomVideoCall);\n      } else {\n        return this.sendRoomInvitation({\n          jid: data.jid,\n          url: data.url.replace('/join/', '/call/')\n        }).then(() => {\n          this._joinRoomVideoCall(data, start);\n        });\n      }\n    });\n  }\n\n  joinRoomVideoCall(data = { url: '' }) {\n    let start = Date.now();\n\n    data.url = data.url.replace('/call/', '/join/');\n\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession) {\n        this.determineVideoWindowAction(data, this.joinRoomVideoCall);\n      } else {\n        this._joinRoomVideoCall(data, start);\n      }\n    });\n  }\n\n  _joinRoomVideoCall(data, start) {\n    let conference_id = this._getConferenceIdFromURL(data.url);\n    let optionallyPreparedWindow = this.prepareCallSession();\n\n    this.showConnectingFlag();\n    return DAL.fetchVideoToken(null, conference_id).then(response => {\n      data.url = this._addTokenToUrl(data.url, response.token);\n\n      this.createCallSession(data, optionallyPreparedWindow)\n        .then(video_window => {\n          this.data.video_session.start_time = start;\n          if (!video_window.window && !this.data.is_native) {\n            this.notifyForPopupBlocked(data);\n          }\n        })\n        .catch((action, reason) => {\n          logger.debug('[ENSO]', action, reason);\n        });\n    }).catch(error => {\n      logger.debug('[ENSO JWT]', error);\n      //TODO: Display an error to the user somehow\n    });\n  }\n\n  determineVideoWindowAction(data, next = () => {}) {\n    var session = this.data.video_session,\n        startNewConference = () => {\n          this.handleVideoSessionDestroy().then(() => {\n            next.call(this, data);\n          });\n        };\n\n    // if there is an active video session\n    if (data.jid === session.jid) {\n      // focus call window if connected or rejoin the conference if not\n      if (session.connected || session.connecting) {\n        session.window.focus();\n      } else {\n        startNewConference();\n      }\n    } else if (session.connected) {\n      // ask the user to confirm before leaving the current active conference\n      if (confirm(strings.confirm_leave)) {\n        startNewConference();\n      } else {\n        // if they choose not to leave the active conference, do nothing\n        return true;\n      }\n    } else {\n      // if they have a video window open but it's not connected, start a new session\n      startNewConference();\n    }\n  }\n\n  showConnectingFlag() {\n    if (this.data.feature_flags.web_client_video_connecting_flag && this.data.is_native) {\n      FlagActions.showFlag({\n        type: 'info',\n        body: strings.connecting,\n        close: 'auto',\n        delay: 10000\n      });\n    }\n  }\n\n  sendInvitation(data) {\n    return new Promise((resolve, reject) => {\n      VideoActions.sendVideoInviteMessage({\n        jid: data.jid,\n        url: data.url,\n        callback: _.bind(this.handleResponseToSentInvitation, this, resolve, reject)\n      });\n    });\n  }\n\n  sendRoomInvitation(data) {\n    return new Promise((resolve, reject) => {\n      VideoActions.sendVideoInviteMessage({\n        jid: data.jid,\n        url: data.url\n      });\n      resolve();\n    });\n  }\n\n  handleResponseToSentInvitation(success, fail, message) {\n    let messageInfo = _.get(message, 'x');\n    let [action, reason] = _.transform(messageInfo, (arr, val, key) => {\n        if (key !== 'xmlns') {\n        arr.push(key, val.reason);\n      }\n      return arr;\n    }, []);\n\n    switch (action) {\n      case 'decline':\n      case 'hangup':\n        fail(action, reason);\n        break;\n      case 'trying':\n      case 'ringing':\n        success();\n        break;\n      default:\n        fail('Error handling message ', message);\n    }\n  }\n\n  /**\n   * handle an invitation to a video conference\n   * @param {Object} data\n   * @returns {boolean}\n   * TODO: refactor this so it's easier to follow and test\n   */\n  handleVideoCallInvite(data) {\n    let jid = utils.jid.bare_jid(data.sender.jid);\n\n    if (jid !== CurrentUserStore.get('jid')) {\n      let user = this.getCaller(jid),\n          session = this.data.video_session,\n          invite_flag_id;\n\n      return this.hasVideoSession().then(hasSession => {\n        if (hasSession) {\n          if (session.jid !== jid && session.connected) {\n            // the user is currently in an active video conference: decline the invite\n            VideoActions.sendVideoInviteDeclineMessage({\n              jid: jid,\n              reason: 'on_a_call'\n            });\n            return true;\n          } else if (session.jid !== jid && !session.connected) {\n            // the user has the video window open but is disconnected from the conference: show the invite flag\n            invite_flag_id = `video-flag-${utils.now()}`;\n          } else if (session.jid === jid && session.connected) {\n            // the invite message is coming from the current session: take no action\n            return true;\n          }\n        } else {\n          invite_flag_id = `video-flag-${utils.now()}`;\n        }\n\n        // there's no current session\n        VideoActions.showInviteFlag({\n          id: invite_flag_id,\n          sender: data.sender.name,\n          photo_url: user.photo_url,\n          message: data.message\n        });\n        this.notifyForIncomingCall(user);\n        var invite = {\n          invite_flag_id: invite_flag_id,\n          caller: user,\n          missed_timer: setTimeout(() => {\n            this.handleMissedCall(user);\n          }, AppConfig.missed_video_call_timeout)\n        };\n        this.data.incoming_invites.push(invite);\n        spi.handleVideoCallInvite(\n          this.answerIncomingVideoCall.bind(this, data.message),\n          this.declineIncomingVideoCall.bind(this, data.message),\n          {\n            id: invite_flag_id,\n            name: data.sender.name,\n            avatar: user.photo_url\n          }\n        );\n      });\n    }\n  }\n\n  /**\n   * remove an invitation flag\n   * @param {String} jid\n   */\n  removeInvite(jid) {\n    let invite = _.find(this.data.incoming_invites, {\n      caller: { jid }\n    });\n\n    if (invite) {\n      clearTimeout(invite.missed_timer);\n      this.stopAllSounds();\n      _.pull(this.data.incoming_invites, invite);\n      VideoActions.removeInviteFlag({\n        index: invite.invite_flag_id\n      });\n      spi.dismissVideoCallInvite(invite.invite_flag_id);\n    }\n  }\n\n  /**\n   * answer an incoming invitation\n   * @param {Object} data\n   */\n  answerIncomingVideoCall(data) {\n    let url = _.get(data, 'x.call.url', ''),\n      jid = utils.jid.bare_jid(data.from);\n\n    this.stopAllSounds();\n    this.stopIncomingNotification(jid);\n    this.removeInvite(jid);\n    VideoActions.sendVideoInviteAcceptMessage({\n      jid: jid\n    });\n    this.initiateVideoCall({\n      jid: jid,\n      type: 'accept',\n      url: url,\n      service: VideoServiceKeys.ENSO\n    });\n  }\n\n  /**\n   * decline an incoming invitation\n   * @param {Object} data\n   */\n  declineIncomingVideoCall(data) {\n    let jid = utils.jid.bare_jid(data.from);\n    this.stopAllSounds();\n    this.stopIncomingNotification(jid);\n    this.removeInvite(jid);\n    VideoActions.sendVideoInviteDeclineMessage({\n      jid: jid,\n      reason: 'decline'\n    });\n  }\n\n  /**\n   * handle a missed call\n   * @param {Object} caller\n   */\n  handleMissedCall(caller) {\n    this.stopAllSounds();\n    this.stopIncomingNotification(caller.jid);\n    var msg = {\n      body: strings.missed_call_message(caller.name),\n      type: \"missed-call\",\n      from: caller.jid,\n      delay: false,\n      sender: \" \"\n    };\n    VideoActions.generateMissedCallMessage({\n      message: msg\n    });\n  }\n\n  /**\n   * handle a missed call\n   * @param {Object} caller\n   */\n  handleDeclinedCall(actor, reason) {\n    this.stopAllSounds();\n    var msg = {\n      body: strings.call_declined[reason](actor.name),\n      type: \"system\",\n      from: actor.jid,\n      delay: false,\n      sender: 'HipChat',\n      sender_avatar: []\n    };\n    VideoActions.handleRemoteDeclinedMessage({\n      message: msg\n    });\n  }\n\n  /**\n   * prepare a call session\n   */\n  prepareCallSession() {\n    let props = utils.video.get_video_window_props();\n    return spi.prepareVideoWindow('HipChatVideoConference', props);\n  }\n\n  /**\n   * create a call session\n   * @param {String} jid\n   * @param {String} url\n   */\n  createCallSession({ jid, room_id, url }, optionallyPreparedWindow) {\n    let props = utils.video.get_video_window_props();\n    return spi.initializeVideoWindow(url, 'HipChatVideoConference', props, optionallyPreparedWindow).then((videoWindow) => {\n      this.data.video_session = {\n        jid,\n        connecting: true,\n        connected: false,\n        window: videoWindow\n      };\n      return videoWindow;\n    });\n  }\n\n  /**\n   * handle the remote decline message\n   * @param {Object} data\n   */\n  handleDeclinedMessage(data) {\n    let jid = utils.jid.bare_jid(data.message.from),\n        reason = _.get(data.message, 'x.decline.reason', '');\n\n    this.stopAllSounds();\n    clearTimeout(this.data.connecting_timer);\n    this.data.video_session.connecting = false;\n    if (jid !== CurrentUserStore.get('jid') && reason) {\n      this.handleDeclinedCall(data.sender, reason);\n      CurrentUserActions.leaveCall();\n    }\n    if (reason === 'on_a_call') {\n      try {\n        const videoWindow = _.get(this.data, 'video_session.window');\n        videoWindow.close.call(videoWindow);\n      } catch (err) {\n        logger.debug('[ENSO]', 'handleDeclinedMessage() attempted to close a video window and failed');\n      }\n    }\n  }\n\n  /**\n   * handle the remote hangup message\n   * @param {Object} data\n   */\n  handleHangupMessage(data) {\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession && this.data.video_session.jid !== utils.jid.bare_jid(data.sender.jid)) {\n        return;\n      }\n      this.stopAllSounds();\n      this.removeInvite(utils.jid.bare_jid(data.message.from));\n      CurrentUserActions.leaveCall();\n    });\n  }\n\n  /**\n   * handle the remote accept message\n   */\n  videoCallAcceptedByRemoteUser() {\n    clearTimeout(this.data.connecting_timer);\n    this.stopAllSounds();\n  }\n\n  /**\n   * destroy the video conference session\n   */\n  destroyVideoSession() {\n    _.attempt(() => this.data.video_session.window.close());\n    this.data.video_session = {};\n  }\n\n  /**\n   * handle video session destroyed\n   */\n  handleVideoSessionDestroy() {\n    return this.handleVideoConferenceLeft().then(() => {\n      this.destroyVideoSession();\n    });\n  }\n\n  /**\n   * get the roster item for a user's jid\n   * @param {String} jid\n   * @returns {Object} - roster item\n   */\n  getCaller(jid) {\n    return _.find(this.data.roster, {jid: jid});\n  }\n\n  /**\n   * notify the user of an incoming call invite\n   * @param {Object} caller\n   * @param {bool} doNotification\n   * @param {bool} playSound\n   */\n  notifyForIncomingCall(caller) {\n    notifier.setTitleNotification({\n      id: caller.jid,\n      text: strings.incoming_call_notification(caller.name)\n    });\n\n    const notifyWhenDND = PreferencesStore.getNotifyForVideoWhenDND() || PreferencesStore.getNotifyWhenDND();\n    const isDND = CurrentUserStore.get('show') === Presence.DND;\n    const shouldNotify = notifyWhenDND && isDND || !isDND;\n\n    if (shouldNotify) {\n      AppActions.showNotification({\n        group_id: ConfigStore.get('group_id'),\n        group_name: ConfigStore.get('group_name'),\n        jid: caller.jid,\n        title: caller.name,\n        body: strings.incoming_call_notification(caller.name),\n        icon: this.data.asset_base_uri + AppConfig.notification_icon,\n        type: 'incoming_call'\n      });\n    }\n    notifier.playSound('incoming_call', true);\n  }\n\n  /**\n   * notify the user that they're calling another user\n   */\n  notifyForOutgoingCall() {\n    if (this.data.feature_flags.web_client_play_ring_sound_in_client) {\n      notifier.playSound('outgoing_call', true);\n    }\n    clearTimeout(this.data.connecting_timer);\n    this.data.connecting_timer = setTimeout(() => {\n      this.handleUnansweredCall();\n    }, AppConfig.missed_video_call_timeout);\n  }\n\n  handleUnansweredCall() {\n    this.stopAllSounds();\n    this.data.video_session.connected = false;\n    this.data.video_session.connecting = false;\n  }\n\n  /**\n   * notify the user that the browser is preventing the video window from opening\n   */\n  notifyForPopupBlocked(data) {\n    VideoActions.showPopupsDisabledFlag({\n      flag_id: 'popups_disabled_flag',\n      message: 'Please enable popups and try again',\n      promise: _.bind(() => {\n        return this.createCallSession(data);\n      }, this)\n    });\n  }\n\n  /**\n   * check if there's a session\n   * @returns {boolean}\n   */\n  hasVideoSession() {\n    return spi.hasActiveVideoSession().then(active_session => {\n      return active_session || !!this.data.video_session.jid;\n    });\n  }\n\n  /**\n   * stop all ringing sounds\n   */\n  stopAllSounds() {\n    notifier.stopSounds();\n  }\n\n  /**\n   * stop the incoming call notification\n   * @param {String} caller_jid\n   */\n  stopIncomingNotification(caller_jid) {\n    notifier.unsetTitleNotification(caller_jid);\n  }\n\n  /**\n   * take action when the video conference is joined\n   */\n  handleVideoConferenceJoined() {\n    let done = Date.now();\n    return this.hasVideoSession().then(hasSession => {\n      if (hasSession) {\n        this.data.video_session.connected = true;\n        this.data.video_session.connecting = false;\n        VideoActions.videoCallConnected({\n          jid: this.data.video_session.jid,\n          start: this.data.video_session.start_time,\n          done\n        });\n        CurrentUserActions.onCall();\n      }\n    });\n  }\n\n  /**\n   * take action when the video conference is left\n   */\n  handleVideoConferenceLeft() {\n    this.stopAllSounds();\n    return this.hasVideoSession().then(hasSession => {\n      let shouldHangup = this.data.video_session.connected || this.data.video_session.connecting;\n      if (hasSession && shouldHangup) {\n        this.data.video_session.connected = false;\n        this.data.video_session.connecting = false;\n        let jid = this.data.video_session.jid;\n        let room_id = this.data.video_session.room_id;\n        VideoActions.sendHangupMessage({ jid, room_id });\n        CurrentUserActions.leaveCall();\n      }\n    });\n  }\n\n}\n\nexport default VideoModule;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/video_module.js\n **/","import ModelStore from 'lib/core/model_store';\nimport CurrentUserModel from 'models/current_user_model';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport Presence from 'lib/enum/presence';\nimport AppConfig from 'config/app_config';\nimport VideoCallStrings from 'strings/video_call_strings';\n\nconst ON_CALL_PRESENCE = {\n  show: Presence.DND,\n  status: VideoCallStrings.call_status\n};\n\nclass CurrentUserStore extends ModelStore {\n\n  constructor() {\n    super();\n\n    this.local = {\n      manual_presence: {\n        show: Presence.AVAILABLE,\n        status: ''\n      }\n    };\n  }\n\n  /**\n   * @override\n   */\n  getModel() {\n    return CurrentUserModel;\n  }\n\n  getDefaults() {\n    return {\n      email: '',\n      guest_key: null,\n      is_admin: false,\n      is_guest: false,\n      jid: '',\n      mention: '',\n      photo_large: '',\n      photo_small: '',\n      title: '',\n      user_created_utc: null,\n      id: null,\n      user_name: '',\n      show: Presence.AVAILABLE,\n      status: '' // user set presence text\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'updated:current_user': (user) => {\n        this.setIfNotEqual(user);\n      },\n      'updated:roster': (roster) => {\n        let user = roster[this.data.jid];\n        if (user && user.presence) {\n          this.setIfNotEqual({\n            show: user.presence.show,\n            status: user.presence.status\n          });\n        }\n      },\n      'set-current-user-status': (presence) => {\n        this._saveManualPresence(presence);\n        this._updatePresence(presence);\n      },\n      'set-current-user-idle': () => {\n        if (!this._checkIfOnCall()) {\n          this._setIdle();\n        }\n      },\n      'set-current-user-active': () => {\n        if (!this._checkIfOnCall()) {\n          this._setActive();\n        }\n      },\n      'user-on-call': () => {\n        this._setOnCall();\n      },\n      'user-leave-call': () => {\n        this._setLeaveCall();\n      },\n      'application-focused': () => {\n        // Only restore the presence if the user is idle.\n        if (this.data.show === Presence.IDLE) {\n          this._setActive();\n        }\n      }\n    });\n  }\n\n  _setIdle() {\n    this._updatePresence({ show: Presence.IDLE });\n  }\n\n  _setActive() {\n    this._updatePresence(this.local.manual_presence);\n  }\n\n  _checkIfOnCall() {\n    return this.data.status === ON_CALL_PRESENCE.status && this.data.show === ON_CALL_PRESENCE.show;\n  }\n\n  _setOnCall() {\n    this._updatePresence(ON_CALL_PRESENCE);\n  }\n\n  _setLeaveCall() {\n    this._updatePresence(this.local.manual_presence);\n  }\n\n  _saveManualPresence(presence) {\n    // Don't save the current presence if the user is idle.\n    // This is a safeguard as you can't manually set yourself as idle.\n    if (presence.show !== Presence.IDLE) {\n      this.local.manual_presence = { ...presence };\n    }\n  }\n\n  _resetManualPresence() {\n    this.local.manual_presence = {\n      show: Presence.AVAILABLE,\n      status: ''\n    };\n  }\n\n  _updatePresence({ show = this.data.show, status = this.data.status } = {}) {\n    var presence = { show, status },\n        current = { show: this.data.show, status: this.data.status };\n\n    if (!_.isEqual(presence, current)) {\n      presence.status = presence.status.trim();\n\n      if (presence.status.length > AppConfig.max_presence_text_length) {\n        presence.status = presence.status.substring(0, AppConfig.max_presence_text_length);\n      }\n\n      this.set(presence);\n      AppDispatcher.dispatch('update-presence', presence);\n    }\n  }\n\n  /**\n   * @override\n   */\n  reset() {\n    this._resetManualPresence();\n    super.reset();\n  }\n\n}\n\nexport default new CurrentUserStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/current_user_store.js\n **/","import utils from 'helpers/utils';\n\n/**\n * @class CurrentUserModel\n *\n * @property {string} email\n * @property {string} guest_key\n * @property {boolean} is_admin\n * @property {boolean} is_guest\n * @property {string} jid\n * @property {string} mention\n * @property {string} photo_large\n * @property {string} photo_small\n * @property {string} title\n * @property {number} user_created_utc\n * @property {number} user_id\n * @property {string} user_name\n * @property {string} show\n * @property {string} status\n */\n\nfunction normalizeCurrentUser (input) {\n  return _.transform(input, (result, val, key) => {\n    switch (key) {\n\n      case 'email':\n      case 'guest_key':\n      case 'mention':\n      case 'photo_large':\n      case 'photo_small':\n      case 'title':\n      case 'show':\n      case 'status':\n      case 'is_in_welcome_range':\n        result[key] = val;\n        break;\n\n      case 'user_name':\n      case 'name':\n        result.user_name = val;\n        break;\n\n      case 'jid':\n      case 'user_jid':\n        result.jid = val;\n        break;\n\n      case 'user_created_utc':\n        result[key] = !_.isNaN(val) ? parseInt(val, 10) : null;\n        break;\n\n      case 'user_id':\n      case 'id':\n        result.id = !_.isNaN(val) ? parseInt(val, 10) : null;\n        break;\n\n      case 'is_admin':\n      case 'is_guest':\n        result[key] = utils.coerceBoolean(val, false);\n        break;\n\n      case 'presence':\n        result.show = val.show;\n        result.status = val.status;\n        break;\n    }\n  });\n}\n\n\nexport default class CurrentUserModel {\n  constructor(input = Object.create(null)) {\n    Object.assign(this, normalizeCurrentUser(input));\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/models/current_user_model.js\n **/","/*global ENV*/\nimport link_utils from 'helpers/link_utils';\n\nclass HCGlobal {\n\n  constructor(data) {\n    if (data) {\n      this.buildForHC(data);\n    }\n    this.Actions = require('actions');\n    this.AppDispatcher = require('dispatchers/app_dispatcher');\n    this.AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\n    this.ApplicationStore = require('stores/application_store');\n    this.AppConfig = require('config/app_config');\n    this.utils = require('helpers/utils');\n    this.Emoticons = require('helpers/emoticons');\n    this.Rehacked = require('helpers/experiment_registry');\n    this.ENV = ENV;\n    this.api = require('api/api');\n    this.resolution = Math.ceil(window.devicePixelRatio);\n    this.emoticon_resolution_helper = function (img) {\n      img.onerror = null;\n      img.src = link_utils.remove_resolution(img.src);\n    };\n\n    if (ENV !== 'production') {\n      this.DAL = require('core/dal');\n    }\n  }\n\n  buildForHC(data) {\n    _.forOwn(data, (value, key) => {\n      this[key] = value;\n    });\n  }\n\n}\n\nmodule.exports = HCGlobal;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/hc_global.js\n **/","module.exports = {\n  \"AppActions\": require(\"./app_actions\"),\n  \"ChatHeaderActions\": require(\"./chat_header_actions\"),\n  \"ChatInputActions\": require(\"./chat_input_actions\"),\n  \"ChatWindowActions\": require(\"./chat_window_actions\"),\n  \"ConnectionActions\": require(\"./connection_actions\"),\n  \"AppHeaderActions\": require(\"./app_header_actions\"),\n  \"DialogActions\": require(\"./dialog_actions\"),\n  \"FlagActions\": require(\"./flag_actions\"),\n  \"FormActions\": require(\"./form_actions\"),\n  \"InlineDialogActions\": require(\"./inline_dialog_actions\"),\n  \"LobbyActions\": require(\"./lobby_actions\"),\n  \"PreferenceActions\": require(\"./preferences_actions\"),\n  \"RoomDropdownActions\": require(\"./room_dropdown_actions\"),\n  \"RoomNavActions\": require(\"./room_nav_actions\"),\n  \"RosterActions\": require(\"./roster_actions\"),\n  \"TooltipActions\": require(\"./tooltip_actions\")\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/index.js\n **/","/**\n * LobbyActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\nvar AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\nvar AnalyticsActions = require('actions/analytics_actions');\n\nvar LobbyActions = {\n\n  /**\n   * @param  {object} data\n   */\n  applyFilter: function(data) {\n    AppDispatcher.dispatch('filter-lobby', data);\n    AnalyticsDispatcher.dispatch('analytics-filter-lobby', data);\n  },\n\n  openChat: function(data) {\n    AppDispatcher.dispatch('set-route', {jid: data.jid});\n    data.source = \"lobby\";\n    AnalyticsDispatcher.dispatch('analytics-open-room', data);\n  },\n\n  resetFilter: function() {\n    AppDispatcher.dispatch('set-lobby-filter-text', {text: ''});\n    AppDispatcher.dispatch('filter-lobby', {\n      query: \"\",\n      scope: \"all\"\n    });\n  },\n\n  showCreateRoomDialog: function() {\n    // Old inconsistent event.\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.lobby.create.room.dialog.open\"\n    });\n    AnalyticsActions.createRoomClickedEvent(\"lobby\");\n    AppDispatcher.dispatch(\"show-modal-dialog\", {\n      dialog_type: \"create-room-dialog\",\n      dialog_data: false\n    });\n  },\n\n  lobbyMounted: function() {\n    AnalyticsDispatcher.dispatch('analytics-lobby-mount', {id: 'lobby'});\n  },\n\n  setInputText: function(text) {\n    AppDispatcher.dispatch('set-lobby-filter-text', {text: text});\n  },\n\n  resetSelectedItem: function() {\n    AppDispatcher.dispatch('lobby-reset-selected-item');\n  },\n\n  itemHovered: function(data) {\n    AppDispatcher.dispatch('lobby-item-hover', {\n      index: data.index\n    });\n  },\n\n  selectedNextItem: function() {\n    AppDispatcher.dispatch('lobby-select-next-item');\n  },\n\n  selectedPrevItem: function() {\n    AppDispatcher.dispatch('lobby-select-prev-item');\n  }\n};\n\nmodule.exports = LobbyActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/lobby_actions.js\n **/","/**\n * LobbyRosterActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\n\nvar LobbyRosterActions = {\n\n  fetchPresence: function() {\n    AppDispatcher.dispatch('fetch-presence');\n  }\n\n};\n\nmodule.exports = LobbyRosterActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/roster_actions.js\n **/","/**\n * TooltipActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\nvar AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\n\n\nvar TooltipActions = {\n\n  showTooltip: function(data) {\n    AppDispatcher.dispatch('show-tooltip', data);\n  },\n\n  smileyChosen: function(data) {\n    AppDispatcher.dispatch('smiley-chosen', data);\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.emoticon.dialog.emoticon.clicked\",\n      properties: {\n        emoticonString: data.shortcut\n      }\n    });\n  },\n\n  moreEmoticonsChosen: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.emoticon.dialog.more.clicked\"\n    });\n  },\n\n  customEmoticonsChosen: function() {\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.emoticon.dialog.custom.clicked\"\n    });\n  }\n\n};\n\nmodule.exports = TooltipActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/tooltip_actions.js\n **/","var Rehacked = require('rehacked')(require('react/addons'));\nvar rehackedPlaceholderBuilder = require('components/experiments/rehacked_placeholder_builder');\n\nvar _before = Rehacked.before;\nvar _after = Rehacked.after;\nvar _on = Rehacked.on;\n\nfunction createPlaceholder(opts) {\n  var node = opts.node || 'div';\n  return rehackedPlaceholderBuilder(node, opts.props, opts.lifecycle);\n}\n\nRehacked.on = function (componentName, selector, element /*, arguments */) {\n  if (_.isPlainObject(element)) {\n    Array.prototype.splice.call(arguments, 2, 1, createPlaceholder(element));\n  }\n  return _on.apply(Rehacked, arguments);\n};\n\nRehacked.before = function (componentName, selector, element /*, arguments */) {\n  if (_.isPlainObject(element)) {\n    Array.prototype.splice.call(arguments, 2, 1, createPlaceholder(element));\n  }\n  return _before.apply(Rehacked, arguments);\n};\n\nRehacked.after = function (componentName, selector, element /*, arguments */) {\n  if (_.isPlainObject(element)) {\n    Array.prototype.splice.call(arguments, 2, 1, createPlaceholder(element));\n  }\n  return _after.apply(Rehacked, arguments);\n};\n\nmodule.exports = Rehacked;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/experiment_registry.js\n **/","var Rehacked = require('./rehacked');\nvar ElementMatcher = require('./element_matcher');\nvar _ = require('./util');\n\nmodule.exports = function (React) {\n  function search(expression, idx, nodeChildren, hack) {\n    var theEnd = expression.length === idx+1;\n    var matcher = new ElementMatcher(expression[idx]);\n    var foundChildren = [];\n    _.compact(nodeChildren).forEach((child) => {\n      if (_.isArray(child)) {\n        search(expression, idx, child, hack);\n      } else {\n        var matches = matcher.test(child);\n        var hasChildren = child.props && child.props.children;\n        if (!matches && hasChildren && matcher.shouldTraverse()) {\n          child.props.children = _.asArray(child.props.children);\n          search(expression, idx, child.props.children, hack);\n        } else if (matches && !theEnd && hasChildren) {\n          child.props.children = _.asArray(child.props.children);\n          search(expression, idx+1, child.props.children, hack);\n        } else if (matches && theEnd) {\n          foundChildren.push(child);\n        }\n      }\n    });\n    foundChildren.forEach((foundChild) => {\n      var idx = nodeChildren.indexOf(foundChild);\n      var hackElement = React.createElement(hack.reactClass, {reference: foundChild});\n      if (hack.location === -1) {\n        nodeChildren.splice(idx, 0, hackElement);\n      } else if (hack.location === 1) {\n        nodeChildren.splice(idx+1, 0, hackElement);\n      } else if (hack.location === 0) {\n        nodeChildren.splice(idx, 1, hackElement);\n      }\n    });\n  }\n\n  var inst = new Rehacked();\n  var _createClass = React.createClass;\n  React.createClass = function(spec /*, arguments*/) {\n    var _render = spec.render;\n    var componentName = spec.displayName;\n    spec.render = function (/* arguments */) {\n      var renderedComponent = _render.apply(this, arguments);\n      if (inst.isAnythingBeingHacked() && inst.isBeingHacked(componentName)) {\n        var hacks = inst._getEntry(componentName);\n        hacks.forEach((hack) => {\n          var expressions = hack.selector.expressions;\n          expressions && expressions.forEach((expression) => {\n            search(expression, 0, [renderedComponent], hack);\n          })\n        });\n      }\n      return renderedComponent;\n    };\n    return _createClass.apply(React, arguments);\n  };\n\n  return inst;\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/rehacked/src/js/main.js\n **/","var parse = require('../lib/Slick.Parser-1.1.7').Slick.parse;\nvar _ = require('./util');\n\nfunction Rehacked() {\n  this._hackRegistry = {};\n}\n\nvar _assert = function(condition, message) {\n  if (!condition) throw message;\n};\n\n/**\n * Returns if any hacks are registered with Rehacked\n * @returns {boolean} if any hacks are registered\n */\nRehacked.prototype.isAnythingBeingHacked = function () {\n  return this._hackRegistry.length !== 0;\n};\n\n/**\n * Returns if a specific component is being hacked with Rehacked\n * @param {string} componentName the display name of the component\n * @returns {boolean} if any hacks are registered for the specified component\n */\nRehacked.prototype.isBeingHacked = function (componentName) {\n  return typeof this._hackRegistry[componentName] !== 'undefined';\n};\n\n/**\n * Render an element before a selector in a component’s DOM tree\n * @param {string} componentName the display name of the component\n * @param {string} selector a CSS3 selector specifying which elements to hack\n * @param {Object} reactClass a React.js element to render before the found elements\n * @param {Object=} opts an optional options hash\n */\nRehacked.prototype.before = function (componentName, selector, reactClass, opts) {\n  this._hack(componentName, selector, reactClass, _.extend({location: -1}, opts))\n};\n\n/**\n * Render an element after a selector in a component’s DOM tree\n * @param {string} componentName the display name of the component\n * @param {string} selector a CSS3 selector specifying which elements to hack\n * @param {Object} reactClass a React.js element to render before the found elements\n * @param {Object=} opts an optional options hash\n */\nRehacked.prototype.after = function (componentName, selector, reactClass, opts) {\n  this._hack(componentName, selector, reactClass, _.extend({location: 1}, opts))\n};\n\n/**\n * Render an element in place of a selector in a component’s DOM tree (experimental)\n * @param {string} componentName the display name of the component\n * @param {string} selector a CSS3 selector specifying which elements to hack\n * @param {Object} reactClass a React.js element to render before the found elements\n * @param {Object=} opts an optional options hash\n */\nRehacked.prototype.on = function (componentName, selector, reactClass, opts) {\n  this._hack(componentName, selector, reactClass, _.extend({location: 0}, opts))\n};\n\nRehacked.prototype._getEntry = function (componentName) {\n  return this._hackRegistry[componentName];\n};\n\nRehacked.prototype._hack = function (componentName, selector, reactClass, opts) {\n  _assert(componentName, \"You must specify a component type to hack\");\n  _assert(selector, \"You must specify a selector\");\n  _assert(reactClass, \"You must provide an element to render\");\n  _assert(opts.location !== -1 || opts.location !== 0 || opts.location !== 1, \"You must specify a place for the hack to appear\");\n\n  var isComponentBeingHacked = this.isBeingHacked(componentName);\n  var entry = {\n    selector: parse(selector),\n    location: opts.location,\n    reactClass: reactClass\n  };\n\n  if (isComponentBeingHacked) {\n    this._hackRegistry[componentName].push(entry);\n  } else {\n    this._hackRegistry[componentName] = [entry];\n  }\n};\n\nRehacked.prototype._clear = function () {\n  this._hackRegistry = {};\n};\n\nmodule.exports = Rehacked;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rehacked/src/js/rehacked.js\n **/","/*\n---\nname: Slick.Parser\ndescription: Standalone CSS3 Selector parser\nprovides: Slick.Parser\n...\n*/\n\n;(function(){\n\nvar parsed,\n\tseparatorIndex,\n\tcombinatorIndex,\n\treversed,\n\tcache = {},\n\treverseCache = {},\n\treUnescape = /\\\\/g;\n\nvar parse = function(expression, isReversed){\n\tif (expression == null) return null;\n\tif (expression.Slick === true) return expression;\n\texpression = ('' + expression).replace(/^\\s+|\\s+$/g, '');\n\treversed = !!isReversed;\n\tvar currentCache = (reversed) ? reverseCache : cache;\n\tif (currentCache[expression]) return currentCache[expression];\n\tparsed = {\n\t\tSlick: true,\n\t\texpressions: [],\n\t\traw: expression,\n\t\treverse: function(){\n\t\t\treturn parse(this.raw, true);\n\t\t}\n\t};\n\tseparatorIndex = -1;\n\twhile (expression != (expression = expression.replace(regexp, parser)));\n\tparsed.length = parsed.expressions.length;\n\treturn currentCache[parsed.raw] = (reversed) ? reverse(parsed) : parsed;\n};\n\nvar reverseCombinator = function(combinator){\n\tif (combinator === '!') return ' ';\n\telse if (combinator === ' ') return '!';\n\telse if ((/^!/).test(combinator)) return combinator.replace(/^!/, '');\n\telse return '!' + combinator;\n};\n\nvar reverse = function(expression){\n\tvar expressions = expression.expressions;\n\tfor (var i = 0; i < expressions.length; i++){\n\t\tvar exp = expressions[i];\n\t\tvar last = {parts: [], tag: '*', combinator: reverseCombinator(exp[0].combinator)};\n\n\t\tfor (var j = 0; j < exp.length; j++){\n\t\t\tvar cexp = exp[j];\n\t\t\tif (!cexp.reverseCombinator) cexp.reverseCombinator = ' ';\n\t\t\tcexp.combinator = cexp.reverseCombinator;\n\t\t\tdelete cexp.reverseCombinator;\n\t\t}\n\n\t\texp.reverse().push(last);\n\t}\n\treturn expression;\n};\n\nvar escapeRegExp = function(string){// Credit: XRegExp 0.6.1 (c) 2007-2008 Steven Levithan <http://stevenlevithan.com/regex/xregexp/> MIT License\n\treturn string.replace(/[-[\\]{}()*+?.\\\\^$|,#\\s]/g, function(match){\n\t\treturn '\\\\' + match;\n\t});\n};\n\nvar regexp = new RegExp(\n/*\n#!/usr/bin/env ruby\nputs \"\\t\\t\" + DATA.read.gsub(/\\(\\?x\\)|\\s+#.*$|\\s+|\\\\$|\\\\n/,'')\n__END__\n\t\"(?x)^(?:\\\n\t  \\\\s* ( , ) \\\\s*               # Separator          \\n\\\n\t| \\\\s* ( <combinator>+ ) \\\\s*   # Combinator         \\n\\\n\t|      ( \\\\s+ )                 # CombinatorChildren \\n\\\n\t|      ( <unicode>+ | \\\\* )     # Tag                \\n\\\n\t| \\\\#  ( <unicode>+       )     # ID                 \\n\\\n\t| \\\\.  ( <unicode>+       )     # ClassName          \\n\\\n\t|                               # Attribute          \\n\\\n\t\\\\[  \\\n\t\t\\\\s* (<unicode1>+)  (?:  \\\n\t\t\t\\\\s* ([*^$!~|]?=)  (?:  \\\n\t\t\t\t\\\\s* (?:\\\n\t\t\t\t\t([\\\"']?)(.*?)\\\\9 \\\n\t\t\t\t)\\\n\t\t\t)  \\\n\t\t)?  \\\\s*  \\\n\t\\\\](?!\\\\]) \\n\\\n\t|   :+ ( <unicode>+ )(?:\\\n\t\\\\( (?:\\\n\t\t(?:([\\\"'])([^\\\\12]*)\\\\12)|((?:\\\\([^)]+\\\\)|[^()]*)+)\\\n\t) \\\\)\\\n\t)?\\\n\t)\"\n*/\n\t\"^(?:\\\\s*(,)\\\\s*|\\\\s*(<combinator>+)\\\\s*|(\\\\s+)|(<unicode>+|\\\\*)|\\\\#(<unicode>+)|\\\\.(<unicode>+)|\\\\[\\\\s*(<unicode1>+)(?:\\\\s*([*^$!~|]?=)(?:\\\\s*(?:([\\\"']?)(.*?)\\\\9)))?\\\\s*\\\\](?!\\\\])|(:+)(<unicode>+)(?:\\\\((?:(?:([\\\"'])([^\\\\13]*)\\\\13)|((?:\\\\([^)]+\\\\)|[^()]*)+))\\\\))?)\"\n\t.replace(/<combinator>/, '[' + escapeRegExp(\">+~`!@$%^&={}\\\\;</\") + ']')\n\t.replace(/<unicode>/g, '(?:[\\\\w\\\\u00a1-\\\\uFFFF-]|\\\\\\\\[^\\\\s0-9a-f])')\n\t.replace(/<unicode1>/g, '(?:[:\\\\w\\\\u00a1-\\\\uFFFF-]|\\\\\\\\[^\\\\s0-9a-f])')\n);\n\nfunction parser(\n\trawMatch,\n\n\tseparator,\n\tcombinator,\n\tcombinatorChildren,\n\n\ttagName,\n\tid,\n\tclassName,\n\n\tattributeKey,\n\tattributeOperator,\n\tattributeQuote,\n\tattributeValue,\n\n\tpseudoMarker,\n\tpseudoClass,\n\tpseudoQuote,\n\tpseudoClassQuotedValue,\n\tpseudoClassValue\n){\n\tif (separator || separatorIndex === -1){\n\t\tparsed.expressions[++separatorIndex] = [];\n\t\tcombinatorIndex = -1;\n\t\tif (separator) return '';\n\t}\n\n\tif (combinator || combinatorChildren || combinatorIndex === -1){\n\t\tcombinator = combinator || ' ';\n\t\tvar currentSeparator = parsed.expressions[separatorIndex];\n\t\tif (reversed && currentSeparator[combinatorIndex])\n\t\t\tcurrentSeparator[combinatorIndex].reverseCombinator = reverseCombinator(combinator);\n\t\tcurrentSeparator[++combinatorIndex] = {combinator: combinator, tag: '*'};\n\t}\n\n\tvar currentParsed = parsed.expressions[separatorIndex][combinatorIndex];\n\n\tif (tagName){\n\t\tcurrentParsed.tag = tagName.replace(reUnescape, '');\n\n\t} else if (id){\n\t\tcurrentParsed.id = id.replace(reUnescape, '');\n\n\t} else if (className){\n\t\tclassName = className.replace(reUnescape, '');\n\n\t\tif (!currentParsed.classList) currentParsed.classList = [];\n\t\tif (!currentParsed.classes) currentParsed.classes = [];\n\t\tcurrentParsed.classList.push(className);\n\t\tcurrentParsed.classes.push({\n\t\t\tvalue: className,\n\t\t\tregexp: new RegExp('(^|\\\\s)' + escapeRegExp(className) + '(\\\\s|$)')\n\t\t});\n\n\t} else if (pseudoClass){\n\t\tpseudoClassValue = pseudoClassValue || pseudoClassQuotedValue;\n\t\tpseudoClassValue = pseudoClassValue ? pseudoClassValue.replace(reUnescape, '') : null;\n\n\t\tif (!currentParsed.pseudos) currentParsed.pseudos = [];\n\t\tcurrentParsed.pseudos.push({\n\t\t\tkey: pseudoClass.replace(reUnescape, ''),\n\t\t\tvalue: pseudoClassValue,\n\t\t\ttype: pseudoMarker.length == 1 ? 'class' : 'element'\n\t\t});\n\n\t} else if (attributeKey){\n\t\tattributeKey = attributeKey.replace(reUnescape, '');\n\t\tattributeValue = (attributeValue || '').replace(reUnescape, '');\n\n\t\tvar test, regexp;\n\n\t\tswitch (attributeOperator){\n\t\t\tcase '^=' : regexp = new RegExp(       '^'+ escapeRegExp(attributeValue)            ); break;\n\t\t\tcase '$=' : regexp = new RegExp(            escapeRegExp(attributeValue) +'$'       ); break;\n\t\t\tcase '~=' : regexp = new RegExp( '(^|\\\\s)'+ escapeRegExp(attributeValue) +'(\\\\s|$)' ); break;\n\t\t\tcase '|=' : regexp = new RegExp(       '^'+ escapeRegExp(attributeValue) +'(-|$)'   ); break;\n\t\t\tcase  '=' : test = function(value){\n\t\t\t\treturn attributeValue == value;\n\t\t\t}; break;\n\t\t\tcase '*=' : test = function(value){\n\t\t\t\treturn value && value.indexOf(attributeValue) > -1;\n\t\t\t}; break;\n\t\t\tcase '!=' : test = function(value){\n\t\t\t\treturn attributeValue != value;\n\t\t\t}; break;\n\t\t\tdefault   : test = function(value){\n\t\t\t\treturn !!value;\n\t\t\t};\n\t\t}\n\n\t\tif (attributeValue == '' && (/^[*$^]=$/).test(attributeOperator)) test = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tif (!test) test = function(value){\n\t\t\treturn value && regexp.test(value);\n\t\t};\n\n\t\tif (!currentParsed.attributes) currentParsed.attributes = [];\n\t\tcurrentParsed.attributes.push({\n\t\t\tkey: attributeKey,\n\t\t\toperator: attributeOperator,\n\t\t\tvalue: attributeValue,\n\t\t\ttest: test\n\t\t});\n\n\t}\n\n\treturn '';\n};\n\n// Slick NS\n\nvar Slick = (this.Slick || {});\n\nSlick.parse = function(expression){\n\treturn parse(expression);\n};\n\nSlick.escapeRegExp = escapeRegExp;\n\nif (!this.Slick) this.Slick = Slick;\n\n}).apply(/*<CommonJS>*/(typeof exports != 'undefined') ? exports : /*</CommonJS>*/this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/rehacked/src/lib/Slick.Parser-1.1.7.js\n **/","var hasOwnProperty = Object.prototype.hasOwnProperty;\nvar toString = Object.prototype.toString;\n\nmodule.exports = {\n  extend: function(obj, source) {\n    var prop;\n    for (prop in source) {\n      if (hasOwnProperty.call(source, prop)) {\n        obj[prop] = source[prop];\n      }\n    }\n    return obj;\n  },\n  isArray: function(obj) {\n    return toString.call(obj) === '[object Array]';\n  },\n  pluck: function(arr, key) {\n    var output = [];\n    arr.forEach((item) => {\n      output.push(item[key]);\n    });\n    return output;\n  },\n  every: function(arr, predicate, ctx) {\n    var matching = true;\n    arr.forEach((item) => {\n      matching = matching && predicate.call(ctx, item)\n    });\n    return matching;\n  },\n  compact: function (arr) {\n    var results = [];\n    arr.forEach((item) => {\n        if (item) results.push(item);\n    });\n    return results;\n  },\n  asArray: function(val) {\n    return this.isArray(val) ? val : [val];\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./~/rehacked/src/js/util.js\n **/","var _ = require('./util');\n\nfunction ElementMatcher(selector) {\n  this._selector = selector;\n}\n\nElementMatcher.prototype.test = function (node) {\n  var matching = true;\n  if (matching && this._selector.tag && this._selector.tag !== \"*\") {\n    matching = (node.type === this._selector.tag) || (node.type && node.type.displayName === this._selector.tag);\n  }\n\n  if (matching && this._selector.classes) {\n    matching = node.props && node.props.className\n    && _.every(\n      _.pluck(this._selector.classes, 'regexp'),\n      (regexp) => {\n        return regexp.test(node.props.className);\n      });\n  }\n\n  if (matching && this._selector.id) {\n    matching = node.props.id === this._selector.id;\n  }\n\n  if (matching && this._selector.pseudos) {\n    throw \"rehacked doesn't understand pseudo classes (yet)\";\n  }\n\n  if (matching && this._selector.attributes) {\n    matching = _.every(this._selector.attributes, (attribute) => {\n        var value = node.props[attribute.key];\n        return value && attribute.test(value);\n      });\n  }\n\n  return matching;\n};\n\nElementMatcher.prototype.shouldTraverse = function() {\n  return this._selector.combinator !== '>'\n};\n\nmodule.exports = ElementMatcher;\n\n\n/** WEBPACK FOOTER **\n ** ./~/rehacked/src/js/element_matcher.js\n **/","module.exports = React;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 301\n ** module chunks = 0\n **/","module.exports = function (node, props, lifecycle) {\n  var lifecycleAwareMethods = [\n    'componentWillMount',\n    'componentDidMount',\n    'componentWillReceiveProps',\n    'componentWillUpdate',\n    'componentDidUpdate',\n    'componentWillUnmount'\n  ];\n\n  var base = {\n    displayName: \"RehackedPlaceholder\",\n\n    render: function () {\n      return React.createElement(node, props);\n    }\n  };\n\n  var proxyLifecycleMethods = function (data) {\n    var lifecycleMethods = lifecycleAwareMethods.map((method) => {\n      return function (/* arguments */) {\n        var requested = lifecycle[method];\n        if (requested) {\n          requested.apply(this, arguments);\n        }\n      };\n    });\n    return _.extend(_.fromPairs(lifecycleAwareMethods, lifecycleMethods), data);\n  };\n\n  return React.createClass(proxyLifecycleMethods(base));\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/experiments/rehacked_placeholder_builder.js\n **/","import Header from 'components/app_header/header';\nimport InlineDialogManagerMixin from 'components/mixins/inline_dialog_manager_mixin';\nimport ModalDialogContainer from 'components/common/modal_dialog/modal_dialog_container';\nimport InlineDialogContainer from 'components/common/inline_dialog/inline_dialog_container';\nimport FlagsContainer from 'components/common/flags/flags_container';\nimport MainBodyLayout from 'components/layout/main_body_layout';\nimport FileViewer from 'components/common/file_viewer/file_viewer';\nimport Tipsify from 'components/tipsify/tipsify';\nimport 'stores/window_store';\n\nexport default React.createClass({\n\n  displayName: \"MainLayout\",\n\n  mixins: [InlineDialogManagerMixin],\n\n  render () {\n    return (\n      <div id=\"page\">\n        <Header is_guest={this.props.is_guest} />\n        <MainBodyLayout is_guest={this.props.is_guest} />\n        <ModalDialogContainer />\n        <InlineDialogContainer />\n        <FlagsContainer />\n        <FileViewer ref=\"fileViewer\" items={this.props.files} />\n        <Tipsify />\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/layout/main_layout.js\n **/","import UserStatus from \"./user_status\";\nimport AppActions from \"actions/app_actions\";\nimport AppHeaderStore from \"stores/app_header_store\";\nimport NotificationBanner from './notification_banner';\nimport DialogActions from 'actions/dialog_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport appHeaderStrings from 'strings/app_header_strings';\nimport commonStrings from 'strings/common_strings';\nimport utils from 'helpers/utils';\nimport cx from'classnames';\nimport AnalyticsKeys from 'keys/analytics_keys';\n\nexport default React.createClass({\n\n  displayName: \"AppHeader\",\n\n  getInitialState: function() {\n    return this._getState();\n  },\n\n  _getState: function() {\n    return AppHeaderStore.getAll();\n  },\n\n  componentDidMount: function() {\n    AppHeaderStore.on(\"change\", this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    AppHeaderStore.off(\"change\", this._onChange);\n  },\n\n  _onLogoClick: function() {\n    AppActions.logoClicked();\n  },\n\n  _onNewChatClick: function(evt) {\n    AnalyticsActions.newChatButtonClicked();\n    DialogActions.showQuickSwitcherDialog();\n    evt.preventDefault();\n  },\n\n  _getUserStatus: function() {\n    if (this.state.ready) {\n      return <UserStatus search_text={this.state.search_text}\n                         focus_search={this.state.focus_search}\n                         active_chat={this.state.active_chat}\n                         multi_org_supported={this.state.feature_flags.web_client_subdomain_scoped_session}\n                         search_enabled={this.state.feature_flags.web_client_embedded_search}\n                         should_animate_avatar={this.state.should_animate_avatar}\n                         is_guest={this.props.is_guest} />;\n    }\n  },\n\n  _getNewChatButton: function () {\n    if (this.state.ready) {\n      let newChatClasses = cx({\n        'aui-button': true,\n        'aui-button-primary': true,\n        'is-native': utils.clientSubType.isNative(this.state.client_subtype)\n      });\n\n      return (\n        <ul className=\"aui-nav\" data-skate-ignore>\n          <li>\n            <a onClick={this._onNewChatClick} id=\"new_chat_btn\" ref=\"new_chat_btn\" className={newChatClasses} aria-label={appHeaderStrings.new_chat_btn_title} data-tipsify-ignore>{appHeaderStrings.new_chat_btn_title}</a>\n          </li>\n        </ul>\n      );\n    }\n  },\n\n  _getInviteUserButton: function () {\n    if (!this.state.feature_flags.hide_invite_your_team_button) {\n      if (this.state.ready && (this.state.user_is_admin || this.state.invite_url)) {\n        return (\n          <ul className=\"aui-nav\" data-skate-ignore>\n            <li>\n              <a onClick={this._onInviteUserClick}\n                 className=\"aui-button aui-button-link hc-invite-users aui-inline-dialog-trigger\"\n                 aria-label={appHeaderStrings.invite_your_team_btn_title}\n                 data-tipsify-ignore>{appHeaderStrings.invite_your_team_btn_title}</a>\n            </li>\n          </ul>\n        );\n      }\n    }\n  },\n\n  _getAppLogo: function() {\n    return (\n      <a id=\"app_logo\" ref=\"app_logo\" href={`https://${this.state.web_server}/home`} onClick={this._onLogoClick} target=\"_blank\">\n        <span className=\"aui-header-logo-device\">{commonStrings.hipchat}</span>\n      </a>\n    );\n  },\n\n  _onInviteUserClick: function() {\n    DialogActions.showInviteTeammatesDialog({type: AnalyticsKeys.TOP});\n    AnalyticsActions.inviteTeamClickedEvent(\"top.navigation\");\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n  },\n\n  render: function () {\n    var hipchatLogo = !utils.clientSubType.isNative(this.state.client_subtype) ? this._getAppLogo() : false;\n    var userStatus = this._getUserStatus();\n    var newChatButton = (this.props.is_guest) ? false : this._getNewChatButton();\n    var inviteUsersButton = (this.props.is_guest) ? false : this._getInviteUserButton();\n\n    var banner;\n    var show_banner = this.state.ready && this.state.notification_supported && !this.state.notification_dismissed_forever && !this.state.notification_permission;\n    if (show_banner) {\n      banner = <NotificationBanner {...this.state} />;\n    }\n\n    var classes = cx({\n      'app-header': true,\n      'banner-dismissed': !this.state.banner_shown,\n      'banner-shown': this.state.banner_shown && show_banner\n    });\n\n    return (\n      <header id=\"header\" className={classes} role=\"banner\">\n        {banner}\n        <nav className=\"aui-header aui-dropdown2-trigger-group\" role=\"navigation\" data-aui-responsive=\"true\">\n          <div className=\"aui-header-inner\">\n            <div className=\"aui-header-primary\">\n              <h1 id=\"logo\" className=\"aui-header-logo aui-header-logo-hc\">\n                {hipchatLogo}\n              </h1>\n              {newChatButton}\n              {inviteUsersButton}\n            </div>\n            {userStatus}\n          </div>\n        </nav>\n      </header>\n\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/header.js\n **/","import PersonAvatar from \"components/common/avatars/person_avatar\";\nimport UserStatusMenu from \"components/app_header/user_status_menu\";\nimport ConnectionStatus from 'components/app_header/connection_status';\nimport HelpMenuContent from \"components/app_header/help_menu_content\";\nimport CurrentUserStore from 'stores/current_user_store';\nimport ConfigStore from 'stores/configuration_store';\nimport AppHeaderActions from 'actions/app_header_actions';\nimport SearchInput from 'components/app_header/search_input';\nimport PresenceIcon from 'components/common/icon/presence-icon';\nimport utils from 'helpers/utils';\nimport AUIDropdownTrigger from 'components/common/aui/dropdown2/aui_dropdown2_trigger';\nimport AUIDropdown from 'components/common/aui/dropdown2/aui_dropdown2';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport ConnectionStatusStore from 'stores/connection_status_store';\nimport ConnectionStates from 'lib/enum/connection';\nimport NetworkStates from 'lib/enum/network';\n\nexport default React.createClass({\n\n  displayName: \"UserStatus\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  componentDidMount (){\n    CurrentUserStore.on(['change'], this._onChange);\n    ConfigStore.on('change:web_server', this._onChange);\n    ConnectionStatusStore.on('change', this._onChange);\n\n    this._debouncedResize = _.debounce(this._debouncedChange, 50, {leading: false, trailing: true});\n    $(window).on('resize', this._debouncedResize);\n  },\n\n  componentWillUnmount() {\n    CurrentUserStore.off(['change'], this._onChange);\n    ConfigStore.off('change:web_server', this._onChange);\n    ConnectionStatusStore.off('change', this._onChange);\n\n    $(window).off('resize', this._debouncedResize);\n    this._debouncedResize.cancel();\n  },\n\n  _onHelpButtonClicked() {\n    AppHeaderActions.helpButtonClicked();\n  },\n\n  _onUserProfileDropdownClick() {\n    AppHeaderActions.userProfileDropdownClicked();\n  },\n\n  _getSearchInput() {\n    return (\n      <li>\n        <SearchInput jid={this.props.active_chat}\n                     text={this.props.search_text}\n                     focus_search={this.props.focus_search}\n                     search_enabled={this.props.search_enabled} />\n      </li>\n    );\n  },\n\n  _getHelpMenu(is_guest) {\n    var help_menu;\n\n    if (!is_guest) {\n      help_menu = (\n        <li>\n          <AUIDropdownTrigger type=\"link\" id=\"header-help-menu-link\" dropdownID=\"header-help-menu\" className=\"hc-header-help-menu\" arrowless={true}>\n            <span className='aui-icon aui-icon-small aui-iconfont-help'></span>\n          </AUIDropdownTrigger>\n          <AUIDropdown dropdownID=\"header-help-menu\" className=\"aui-dropdown2-in-header\">\n            <HelpMenuContent />\n          </AUIDropdown>\n        </li>\n      );\n    }\n\n    return help_menu;\n  },\n\n  render() {\n    var searchInput = (this.props.is_guest || this._shouldHideSearchInput()) ? false : this._getSearchInput(),\n        help_menu = this._getHelpMenu(this.props.is_guest);\n\n    return (\n      <div className=\"aui-header-secondary\">\n        <ul className=\"aui-nav\" data-skate-ignore>\n          <li>\n            <ConnectionStatus />\n          </li>\n          {searchInput}\n          {help_menu}\n          <li id=\"status_dropdown\" ref=\"status_dropdown\" className=\"status-dropdown\" onClick={this._onUserProfileDropdownClick}>\n            <AUIDropdownTrigger type=\"link\" dropdownID=\"current-user-status\" className=\"hc-header-user-avatar\">\n              <PersonAvatar avatar_url={this.state.photo_small}\n                         size=\"small\"\n                         shouldAnimate={this.props.should_animate_avatar}\n                         show_presence={false}/>\n              <PresenceIcon presence={this.state.show} active={true} uid={this.state.id}/>\n            </AUIDropdownTrigger>\n            <AUIDropdown dropdownID=\"current-user-status\" className=\"aui-dropdown2-in-header\">\n              <UserStatusMenu\n                web_server={this.state.web_server}\n                is_guest={this.props.is_guest}\n                multi_org_supported={this.props.multi_org_supported}\n                presence_show={this.state.show}\n                presence_status={this.state.status}\n                current_user_uid={this.state.id}/>\n            </AUIDropdown>\n          </li>\n        </ul>\n      </div>\n    );\n  },\n\n  _shouldHideSearchInput() {\n    var headerWidth = $('.aui-header').width();\n\n    return ((this.state.connectionStatus !== ConnectionStates.CONNECTED || this.state.networkStatus !== NetworkStates.ONLINE) && headerWidth < 950);\n  },\n\n  _getState() {\n    return _.extend({\n        web_server: ConfigStore.get('web_server'),\n        presenceDialogVisible: false,\n        currentTime: utils.getMoment(),\n        connectionStatus: ConnectionStatusStore.get('connection_status'),\n        networkStatus: ConnectionStatusStore.get('network_status')\n      },\n      CurrentUserStore.getAll()\n    );\n  },\n\n  _onChange(){\n    this.setState(this._getState());\n  },\n\n  _debouncedChange(){\n    AppHeaderActions.positionDialogs();\n    this._onChange();\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/user_status.js\n **/","import AppConfig from 'config/app_config';\nimport PresenceIcon from 'components/common/icon/presence-icon';\nimport utils from 'helpers/utils';\nimport ConfigStore from 'stores/configuration_store';\nimport AvatarHelper from 'helpers/avatar_helper';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'PersonAvatar',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    active: React.PropTypes.bool,\n    show_presence: React.PropTypes.bool,\n    size: React.PropTypes.string,\n    avatar_url: React.PropTypes.string,\n    avatar_bg_color: React.PropTypes.string,\n    text: React.PropTypes.string,\n    name: React.PropTypes.string,\n    uid: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.number]),\n    shouldAnimate: React.PropTypes.bool\n  },\n\n  getDefaultProps: function () {\n    return {\n      active: true,\n      show_presence: true,\n      size: 'xsmall',\n      avatar_url: '',\n      avatar_bg_color: AppConfig.default_group_avatar_bg,\n      text: '',\n      name: '',\n      uid: '',\n      shouldAnimate: true,\n      onClick: () => {}\n    };\n  },\n\n  getInitialState() {\n    return {\n      src: null,\n      asset_base_uri: ConfigStore.get('asset_base_uri'),\n      force_default_avatar: false\n    };\n  },\n\n  /*\n   * NOTE: The _isMounted code here is an anti-pattern. Do not emulate this code.\n   *       The utils.image.load promise below can't be cancelled when it unmounts\n   *       so this is a workaround.\n   */\n  _isMounted: false,\n\n  componentDidMount() {\n    this._isMounted = true;\n    if (this.props.avatar_url){\n      utils.image.load(this.props.avatar_url, AppConfig.avatar_loading_timeout)\n        .then((image) => {\n          if (this._isMounted) {\n            if (this.state.src !== image) {\n              this.setState({\n                src: image\n              });\n            }\n            this._drawCanvas();\n          }\n        })\n        .catch(() => {\n          if (this._isMounted) {\n            this.setState({\n              force_default_avatar: true\n            });\n          }\n        });\n    }\n  },\n\n  componentDidUpdate() {\n    this._drawCanvas();\n  },\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  },\n\n  _getAvatar: function () {\n    if (!this.props.shouldAnimate && utils.file.is_gif(this.props.avatar_url)) {\n      return <canvas className='aui-avatar-img' ref='canvas'></canvas>;\n    }\n\n    let style = {\n      backgroundImage: `url(${this.props.avatar_url})`\n    };\n\n    return <span className='aui-avatar-img' style={style} />;\n  },\n\n  _drawCanvas: function () {\n    let image = this.state.src;\n    let canvas = this.refs.canvas;\n\n    if (image && canvas) {\n      let w = image.width;\n      let h = image.height;\n      let min = w;\n      let x = 0;\n      let y = 0;\n\n      // maintaining aspect ratio and centering image in canvas\n      if (w < h) {\n        min = w;\n        y = (h - min) / 2;\n      } else if (h < w) {\n        min = h;\n        x = (w - min) / 2;\n      }\n\n      canvas.height = canvas.width = min;\n      canvas.getContext('2d').drawImage(image, x, y, min, min, 0, 0, min, min);\n    }\n  },\n\n  _getDefaultAvatar: function () {\n    let style = {\n          backgroundColor: this.props.avatar_bg_color\n        },\n        text = this.props.text.toUpperCase();\n\n    if (this.props.name && !text) {\n      text = AvatarHelper.getAvatarInitialsFromName(this.props.name);\n    }\n\n    if (this.state.asset_base_uri && !text){\n      style.backgroundImage = `url(${this.state.asset_base_uri}assets/img/user-avatar-blue-48${(window.HC.resolution > 1) ? `@2x` : ``}.png)`;\n    }\n\n    return (\n      <div className='hc-default-avatar' style={style}>\n        {text}\n      </div>\n    );\n  },\n\n  _getStatus: function () {\n    if (!this.props.show_presence) {\n      return false;\n    }\n\n    return <PresenceIcon presence={this.props.presence}\n                         mobile={this.props.mobile}\n                         active={this.props.active}\n                         uid={this.props.uid}/>;\n  },\n\n  render: function () {\n    let avatar = this.props.avatar_url && !this.state.force_default_avatar ? this._getAvatar() : this._getDefaultAvatar(),\n        status = this._getStatus(),\n        classes = `aui-avatar aui-avatar-project aui-avatar-${this.props.size}`;\n\n    return (\n      <span className={classes} onClick={this.props.onClick}>\n        <span className='aui-avatar-inner'>\n          {avatar}\n        </span>\n        {status}\n      </span>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/avatars/person_avatar.js\n **/","import Icon from \"./icon\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport PresenceSubscriptionHelper from 'helpers/presence_subscription_helper';\n\nexport default React.createClass({\n\n  displayName: \"PresenceIcon\",\n\n  mixins: [PureRenderMixin],\n\n  componentWillMount() {\n    if (this.props.uid) {\n      PresenceSubscriptionHelper.subscribeToPresence(this.props.uid);\n    }\n  },\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.uid !== this.props.uid) {\n      PresenceSubscriptionHelper.unsubscribeFromPresence(prevProps.uid);\n      PresenceSubscriptionHelper.subscribeToPresence(this.props.uid);\n    }\n  },\n\n  componentWillUnmount() {\n    if (this.props.uid) {\n      PresenceSubscriptionHelper.unsubscribeFromPresence(this.props.uid);\n    }\n  },\n\n  getDefaultProps: function() {\n    return {\n      classNames: {\n        \"hc-status-icon\": true\n      },\n      presence: \"chat\",\n      mobile: false,\n      active: false,\n      uid: ''\n    };\n  },\n\n  _getPresenceIconName: function(statusName) {\n    var iconName = statusName;\n\n    if (statusName === \"chat\") {\n      iconName = \"available\";\n    } else if (statusName === \"unknown\") {\n      iconName = \"unavailable\";\n    }\n\n    if (this.props.active) {\n      iconName += \"-selected\";\n    }\n\n    return iconName;\n  },\n\n  _getStatusName: function() {\n    var statusName = \"unknown\";\n\n    if (this.props.presence === \"unknown\" && this.props.mobile) {\n      statusName = \"mobile\";\n    } else if (this.props.presence) {\n      statusName = this.props.presence;\n    }\n\n    return statusName;\n  },\n\n  render: function() {\n    var statusName = this._getStatusName();\n    var iconName = this._getPresenceIconName(statusName);\n    var className = \"icon-\" + statusName;\n    var c = {};\n    c[className] = true;\n    var classes = _.assign({}, this.props.classNames, c);\n\n    return (\n      <Icon classes={classes} iconName={iconName} uid={this.props.uid}/>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/icon/presence-icon.js\n **/","var cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"Icon\",\n\n  getDefaultProps: function() {\n    return {\n      classes: {},\n      iconName: \"chat\",\n      active: false,\n      uid: ''\n    };\n  },\n\n  _getClassNames: function() {\n    return _.assign({}, {\n      \"aui-icon\": true,\n      \"hipchat-icon-small\": true\n    }, this.props.classes);\n  },\n\n  render: function() {\n    var classNames = this._getClassNames();\n    var iconHtml = \"<svg class='\" + cx(classNames) + \"' data-uid='\" + this.props.uid + \"'><use xlink:href='#icon-\" + this.props.iconName + \"'></use></svg>\";\n\n    return (\n      <span dangerouslySetInnerHTML={{__html: iconHtml}}></span>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/icon/icon.js\n **/","/*!\n  Copyright (c) 2016 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(null, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/classnames/index.js\n ** module id = 309\n ** module chunks = 0\n **/","module.exports = require('react/lib/ReactComponentWithPureRenderMixin');\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react-addons-pure-render-mixin/index.js\n ** module id = 310\n ** module chunks = 0\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule ReactComponentWithPureRenderMixin\n */\n\n'use strict';\n\nvar shallowCompare = require('./shallowCompare');\n\n/**\n * If your React component's render function is \"pure\", e.g. it will render the\n * same result given the same props and state, provide this Mixin for a\n * considerable performance boost.\n *\n * Most React components have pure render functions.\n *\n * Example:\n *\n *   var ReactComponentWithPureRenderMixin =\n *     require('ReactComponentWithPureRenderMixin');\n *   React.createClass({\n *     mixins: [ReactComponentWithPureRenderMixin],\n *\n *     render: function() {\n *       return <div className={this.props.className}>foo</div>;\n *     }\n *   });\n *\n * Note: This only checks shallow equality for props and state. If these contain\n * complex data structures this mixin may have false-negatives for deeper\n * differences. Only mixin to components which have simple props and state, or\n * use `forceUpdate()` when you know deep data structures have changed.\n */\nvar ReactComponentWithPureRenderMixin = {\n  shouldComponentUpdate: function (nextProps, nextState) {\n    return shallowCompare(this, nextProps, nextState);\n  }\n};\n\nmodule.exports = ReactComponentWithPureRenderMixin;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react/lib/ReactComponentWithPureRenderMixin.js\n ** module id = 311\n ** module chunks = 0\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n* @providesModule shallowCompare\n*/\n\n'use strict';\n\nvar shallowEqual = require('fbjs/lib/shallowEqual');\n\n/**\n * Does a shallow comparison for props and state.\n * See ReactComponentWithPureRenderMixin\n */\nfunction shallowCompare(instance, nextProps, nextState) {\n  return !shallowEqual(instance.props, nextProps) || !shallowEqual(instance.state, nextState);\n}\n\nmodule.exports = shallowCompare;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react/lib/shallowCompare.js\n ** module id = 312\n ** module chunks = 0\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule shallowEqual\n * @typechecks\n * \n */\n\n'use strict';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  var bHasOwnProperty = hasOwnProperty.bind(objB);\n  for (var i = 0; i < keysA.length; i++) {\n    if (!bHasOwnProperty(keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/fbjs/lib/shallowEqual.js\n ** module id = 313\n ** module chunks = 0\n **/","import PresenceIcon from 'components/common/icon/presence-icon';\nimport strings from 'strings/app_header_strings';\nimport AppActions from 'actions/app_actions';\nimport AppHeaderActions from 'actions/app_header_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport AUISection from 'components/common/aui/dropdown2/aui_section';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport Presence from 'lib/enum/presence';\n\nexport default React.createClass({\n\n  displayName: \"UserStatusMenu\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    web_server: React.PropTypes.string,\n    is_guest: React.PropTypes.bool,\n    multi_org_supported: React.PropTypes.bool,\n    presence_show: React.PropTypes.string,\n    presence_status: React.PropTypes.string\n  },\n\n  getDefaultProps: function () {\n    return {\n      active: true\n    };\n  },\n\n  _onSignOut (){\n    AppActions.signout();\n  },\n\n  _onSettingsClick () {\n    AppHeaderActions.requestPreferencesDialog();\n  },\n\n  _onLogInToAnotherTeam () {\n    AppActions.logInToAnotherTeam();\n  },\n\n  _onPresenceUpdate (e) {\n    let show = e.currentTarget.getAttribute('data-show');\n    CurrentUserActions.changeStatus({\n      status: this.props.presence_status,\n      show,\n      type: 'show'\n    });\n    InlineDialogActions.showUserStatusMessage({\n      anchor: document.getElementById('status_dropdown'),\n      status: this.props.presence_status,\n      show\n    });\n  },\n\n  _shouldAllowLogIntoAnotherTeam: function () {\n    return !this.props.is_guest && this.props.multi_org_supported;\n  },\n\n  _getSettings: function () {\n    return (\n      <li className=\"settings\" role=\"listitem\">\n        <a id=\"hc-settings\" onClick={this._onSettingsClick}>\n          <span className=\"aui-icon aui-icon-small aui-iconfont-configure\"></span> {strings.settings}\n        </a>\n      </li>\n    );\n  },\n\n  _getLogIntoAnotherTeam: function () {\n    return (\n      <AUISection className=\"hc-actions\">\n        <ul role=\"list\">\n          <li className=\"login-to-another-team\" role=\"listitem\">\n            <a id=\"hc-login-team\" onClick={this._onLogInToAnotherTeam}>\n              <span className=\"aui-icon aui-icon-small aui-iconfont-list-add\"></span> {strings.log_in_to_another_team}\n            </a>\n          </li>\n        </ul>\n      </AUISection>\n    );\n  },\n\n  _getProfileSection: function () {\n    return (\n      <AUISection>\n        <ul role=\"list\">\n          <li role=\"listitem\">\n            <a onClick={this._onUserProfileClick} className=\"hc-user-name\" href={`https://${this.props.web_server}/account`} target=\"_blank\">{strings.profile}</a>\n          </li>\n        </ul>\n      </AUISection>\n    );\n  },\n\n  _onUserProfileClick(){\n    AnalyticsActions.editProfileClicked();\n  },\n\n  render: function () {\n    var settings = (this.props.is_guest) ? false : this._getSettings();\n    var userProfileSection = (this.props.is_guest) ? null : this._getProfileSection();\n    var loginToAnotherTeam = (this._shouldAllowLogIntoAnotherTeam()) ? this._getLogIntoAnotherTeam() : false;\n\n    return (\n      <div role=\"application\">\n        {userProfileSection}\n        <AUISection className=\"hc-availability\">\n          <ul role=\"list\">\n            <li className=\"chat aui-inline-dialog-trigger\" role=\"listitem\">\n              <a id=\"hc-avail\" data-show={Presence.AVAILABLE} onClick={this._onPresenceUpdate}>\n                <PresenceIcon\n                  presence={Presence.AVAILABLE}\n                  active={this.props.active} />\n                {strings.available}\n              </a>\n            </li>\n            <li className=\"xa aui-inline-dialog-trigger\" role=\"listitem\">\n              <a id=\"hc-xa\" data-show={Presence.AWAY} onClick={this._onPresenceUpdate}>\n                <PresenceIcon\n                  presence={Presence.AWAY}\n                  active={this.props.active} />\n                {strings.away}\n              </a>\n            </li>\n            <li className=\"dnd aui-inline-dialog-trigger\" role=\"listitem\">\n              <a id=\"hc-dnd\" data-show={Presence.DND} onClick={this._onPresenceUpdate}>\n                <PresenceIcon\n                  presence={Presence.DND}\n                  active={this.props.active} />\n                {strings.dnd}\n              </a>\n            </li>\n          </ul>\n        </AUISection>\n        <AUISection className=\"hc-actions\">\n          <ul role=\"list\">\n            {settings}\n            <li className=\"signout\" role=\"listitem\">\n              <a id=\"hc-signout\" onClick={this._onSignOut}>\n                <span className=\"aui-icon aui-icon-small aui-iconfont-devtools-checkout\"></span> {strings.log_out}\n              </a>\n            </li>\n          </ul>\n        </AUISection>\n        {loginToAnotherTeam}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/user_status_menu.js\n **/","export default {\n  provide_feedback: `Provide feedback`,\n  profile: `Profile`,\n  help: `Help & Support`,\n  get_started: `Get started`,\n  keyboard_shortcuts: `Keyboard shortcuts`,\n  whats_new: `What's new`,\n  emoticon_list: `Emoticon list`,\n  status: `Status`,\n  available: `Available`,\n  away: `Away`,\n  dnd: `Do not disturb`,\n  settings: `Settings`,\n  log_out: `Log out`,\n  log_in_to_another_team: `Log in to another team`,\n  new_chat_btn_title: `New chat`,\n  invite_your_team_btn_title: `Invite your team`\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/app_header_strings.js\n **/","import cx from 'classnames';\n\nexport default React.createClass({\n\n  propTypes: {\n    heading: React.PropTypes.string\n  },\n\n  getDefaultProps() {\n    return {\n      heading: ''\n    };\n  },\n\n  _getHeading() {\n    if (!this.props.heading) {\n      return undefined;\n    }\n    return <strong aria-role=\"presentation\" class=\"aui-dropdown2-heading\">{ this.props.heading }</strong>;\n  },\n\n  render() {\n\n    let attrs = {\n      'role': 'presentation',\n      'className': cx({\n        [this.props.className]: !!this.props.className,\n        'aui-dropdown2-section': true\n      })\n    };\n\n    let heading = this._getHeading;\n\n    return (\n      <div {...attrs}>\n        { heading }\n        <div role=\"group\">\n          { this.props.children }\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/dropdown2/aui_section.js\n **/","import OfflineStatus from 'components/app_header/connection_offline_status';\nimport CannotConnectStatus from 'components/app_header/connection_cannot_connect_status';\nimport CountdownStatus from 'components/app_header/connection_countdown_status';\nimport ConnectionStatusStore from 'stores/connection_status_store';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport Spinner from 'components/common/spinner/spinner';\nimport strings from 'strings/connection_notification_strings';\nimport ConnectionStates from 'lib/enum/connection';\nimport NetworkStates from 'lib/enum/network';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"ConnectionStatus\",\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  componentDidMount() {\n    ConnectionStatusStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount() {\n    ConnectionStatusStore.off('change', this._onChange);\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    /*\n     * Connection inline dialog should be hidden\n     * if the status changes.\n     */\n    if (this.state.status !== nextState.status ||\n        this.state.network_status !== nextState.network_status) {\n      InlineDialogActions.hideInlineDialog();\n    }\n  },\n\n  shouldComponentUpdate(nextProps, nextState) {\n    /*\n     * Should only re-render if:\n     * - the status changes (ex: connected -> reconnecting)\n     * - the network status changes (ex: online -> offline)\n     * - the countdown banner is showing (allows time changes to render)\n     * - secondsToRetry is counting down from 1 to 0\n     *\n     * This logic prevents the connecting spinner from jumping due\n     * to re-renders.\n     */\n\n    return this.state.status !== nextState.status ||\n           this.state.network_status !== nextState.network_status ||\n           this.state.status === ConnectionStates.RECONNECT_DELAY ||\n           this.state.secondsToRetry === 1 && nextState.secondsToRetry === 0;\n  },\n\n  render() {\n    if (this.state.network_status === NetworkStates.OFFLINE) {\n      AnalyticsActions.connectionUIStateOffline();\n      return <OfflineStatus status={this.state.network_status} />;\n    }\n\n    switch (this.state.status) {\n      case ConnectionStates.RECONNECTING:\n        AnalyticsActions.connectionUIStateConnecting();\n        return this._getReconnectingBanner();\n\n      case ConnectionStates.RECONNECT_DELAY:\n        AnalyticsActions.connectionUIStateConnectDelay();\n        return this._getDelayBanner();\n\n      case ConnectionStates.DISCONNECTED:\n        AnalyticsActions.connectionUIStateCannotConnect();\n        return <CannotConnectStatus status={this.state.status} />;\n\n      default:\n        return <span />;\n    }\n  },\n\n  _getReconnectingBanner() {\n    let banner = <span />;\n    banner = (\n      <div className=\"hc-header-connection reconnecting\">\n        <span className=\"connection-status-icon\">\n          <Spinner spin={true} spinner_class=\"connection-spinner\" size=\"small\" color=\"white\" left=\"-16px\" top=\"-8px\" />\n        </span>\n        <span className=\"connection-status\">{strings.connecting}</span>\n      </div>\n    );\n    return banner;\n  },\n\n  _getDelayBanner() {\n    let banner = <span />;\n    banner = <CountdownStatus seconds={this.state.secondsToRetry} status={this.state.status}/>;\n    return banner;\n  },\n\n  _getState() {\n    let connectionState = ConnectionStatusStore.getAll(),\n        msToRetry = connectionState.reconnectingIn,\n        secondsToRetry = Math.round(msToRetry / 1000);\n\n    /*\n     * The page fires the unloading event, THEN strophe fires a disconnected event -- but we\n     * don't want the red \"disconnected\" banner to show after you hit the refresh button, so\n     * unsubscribe from the ConnectionStatusStore when we get the UNLOADING status\n     */\n    if (connectionState.connection_status === ConnectionStates.UNLOADING) {\n      ConnectionStatusStore.off('change', this._onChange);\n    }\n\n    return {\n      status: connectionState.connection_status,\n      network_status: connectionState.network_status,\n      msToRetry: msToRetry,\n      secondsToRetry: secondsToRetry\n    };\n  },\n\n  _onChange() {\n    this.setState(this._getState());\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/connection_status.js\n **/","import InlineDialogActions from 'actions/inline_dialog_actions';\nimport strings from 'strings/connection_notification_strings';\n\nexport default React.createClass({\n\n  displayName: \"ConnectionOfflineStatus\",\n\n  _showInlineDialog() {\n    InlineDialogActions.showConnectionStatusMessage({\n      anchor: this.refs.banner,\n      status: this.props.status\n    });\n  },\n\n  _hideInlineDialog() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  render () {\n    return (\n      <div ref=\"banner\" className=\"hc-header-connection disconnected aui-inline-dialog-trigger\" onMouseEnter={this._showInlineDialog} onClick={this._hideInlineDialog}>\n        <span className=\"connection-status-icon\">\n          <span className=\"aui-icon aui-icon-small aui-iconfont-warning\" />\n        </span>\n        <span className=\"connection-status\">{ strings.offline }</span>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/connection_offline_status.js\n **/","export default {\n  connecting: `Connecting...`,\n  connecting_seconds: (sec) => {\n    return `Connecting in ${sec} second${sec !== 1 ? 's' : ''}`;\n  },\n  check_network: `We're having trouble connecting to HipChat. We'll try again in a few seconds.`,\n  retry_cta: `Retry now`,\n  unable_to_connect_hipchat: (status_url) => (`We couldn't connect to HipChat. Check your network connection or check our <a href=\"${status_url}\" target=\"_blank\">status</a>.`),\n  cant_connect: `Couldn't connect`,\n  disconnecting: `Disconnecting`,\n  offline: `Offline`,\n  offline_status: `It looks like you’re not connected to the internet. Check your network connection.`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/connection_notification_strings.js\n **/","import InlineDialogActions from 'actions/inline_dialog_actions';\nimport strings from 'strings/connection_notification_strings';\nimport ConnectionActions from 'actions/connection_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"ConnectionCannotConnectStatus\",\n\n  _handleMouseEnter() {\n    InlineDialogActions.showConnectionStatusMessage({\n      anchor: this.refs.banner,\n      status: this.props.status\n    });\n  },\n\n  _handleCantConnectLinkClick() {\n    ConnectionActions.reconnect();\n    InlineDialogActions.hideInlineDialog();\n    AnalyticsActions.tryToReconnectFromHeader();\n  },\n\n  _hideInlineDialog() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  render () {\n    return (\n      <div ref=\"banner\" className=\"hc-header-connection disconnected aui-inline-dialog-trigger\" onMouseEnter={this._handleMouseEnter} onClick={this._hideInlineDialog}>\n        <span className=\"connection-status-icon\">\n          <span className=\"aui-icon aui-icon-small aui-iconfont-warning\" />\n        </span>\n        <span className=\"connection-status\">{ strings.cant_connect }</span>\n        <a className=\"reconnect-now\" onClick={this._handleCantConnectLinkClick}>{strings.retry_cta}</a>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/connection_cannot_connect_status.js\n **/","import InlineDialogActions from 'actions/inline_dialog_actions';\nimport strings from 'strings/connection_notification_strings';\nimport ConnectionActions from 'actions/connection_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"ConnectionCountdownStatus\",\n\n  propTypes: {\n    seconds: React.PropTypes.number,\n    minutes: React.PropTypes.number\n  },\n\n  getDefaultProps() {\n    return {\n      seconds: 0,\n      minutes: 0\n    };\n  },\n\n  _handleMouseEnter() {\n    InlineDialogActions.showConnectionStatusMessage({\n      anchor: this.refs.banner,\n      status: this.props.status\n    });\n  },\n\n  _handleReconnectClick() {\n    ConnectionActions.handleReconnectLinkClick();\n    InlineDialogActions.hideInlineDialog();\n    AnalyticsActions.tryToReconnectFromHeader();\n  },\n\n  _hideInlineDialog() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  /* Get correct countdown message\n   * - seconds singular or plural\n   */\n  _getCountdownMessage() {\n    return strings.connecting_seconds(this.props.seconds);\n  },\n\n  render () {\n    let message = this._getCountdownMessage();\n    return (\n      <div ref=\"banner\" className=\"hc-header-connection countdown aui-inline-dialog-trigger\" onMouseEnter={this._handleMouseEnter} onClick={this._hideInlineDialog}>\n        {message}\n        <a className=\"reconnect-now\" onClick={this._handleReconnectClick}>{strings.retry_cta}</a>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/connection_countdown_status.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport Store from 'lib/core/store';\nimport Timer from 'core/common/timer';\nimport ConnectionStates from 'lib/enum/connection';\nimport NetworkStates from 'lib/enum/network';\n\nclass ConnectionStatusStore extends Store {\n\n  constructor() {\n    super();\n    this._countdownTimer = new Timer(() => this._countdownTimerFn(), 1000, 1000, true);\n    this._offlineBannerTimer = new Timer(() => this._offlineBannerTimerFn(), 5000);\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'network-up': () => {\n        this._offlineBannerTimer.clear();\n        this.set({'network_status': NetworkStates.ONLINE});\n      },\n      'network-down': () => {\n        this._offlineBannerTimer.start();\n      },\n      'strophe-connected': () => {\n        this._setConnectionState(ConnectionStates.CONNECTED);\n      },\n      'strophe-reconnected': () => {\n        this._setConnectionState(ConnectionStates.CONNECTED);\n      },\n      'strophe-reconnecting': (data) => {\n        this._setConnectionState(ConnectionStates.RECONNECTING, data);\n      },\n      'strophe-reconnect-delay': (data) => {\n        this._setConnectionState(ConnectionStates.RECONNECT_DELAY, data);\n        this._countdownTimer.clear().start();\n      },\n      'strophe-connection-failed': () => {\n        this._setConnectionState(ConnectionStates.DISCONNECTED);\n      },\n      'unload-app': () => {\n        this._setConnectionState(ConnectionStates.UNLOADING);\n      },\n      'exit-app': () => {\n        this._setConnectionState(ConnectionStates.UNLOADING);\n      }\n    });\n  }\n\n  getDefaults() {\n    return {\n      connection_status: ConnectionStates.CONNECTED,\n      network_status: NetworkStates.ONLINE,\n      reconnectingIn: 0,\n      reconnectionAttempts: 0\n    };\n  }\n\n  _setConnectionState(status, data) {\n    this.set({\n      connection_status: status,\n      reconnectionAttempts: _.get(data, 'reconnectAttempts') || this.data.reconnectionAttempts,\n      reconnectingIn: _.get(data, 'reconnectDelay') || this.data.reconnectingIn\n    });\n  }\n\n  _countdownTimerFn() {\n    let current = this.data.reconnectingIn,\n        next = current > 1000 ? current - 1000 : 0;\n    this.set('reconnectingIn', next);\n    if (next === 0) {\n      this._countdownTimer.clear();\n    }\n  }\n\n  _offlineBannerTimerFn() {\n    this.set({'network_status': NetworkStates.OFFLINE});\n  }\n}\n\nexport default new ConnectionStatusStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/connection_status_store.js\n **/","export default Object.freeze({\n  CONNECTED: 'connected',\n  DISCONNECTED: 'disconnected',\n  RECONNECTING: 'reconnecting',\n  RECONNECT_DELAY: 'reconnect-delay',\n  UNLOADING: 'unloading'\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/enum/connection.js\n **/","export default Object.freeze({\n  ONLINE: 'online',\n  OFFLINE: 'offline'\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/lib/enum/network.js\n **/","import PreferencesStore from 'stores/preferences_store';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: 'Spinner',\n\n  propTypes: {\n    size: React.PropTypes.oneOf(['small', 'medium', 'large']).isRequired,\n    delay: React.PropTypes.number\n  },\n\n  componentWillUnmount() {\n    this._stopSpinner();\n  },\n\n  componentWillUpdate() {\n    this._stopSpinner();\n  },\n\n  getDefaultProps() {\n    return {\n      size: 'medium',\n      zIndex: 100,\n      ref: 'spinner',\n      delay: 0\n    };\n  },\n\n  componentDidMount() {\n    this._setSpinner();\n  },\n\n  componentDidUpdate() {\n    this._setSpinner();\n  },\n\n  _getSpinner(){\n    return ReactDOM.findDOMNode(this);\n  },\n\n  _setSpinner() {\n    var options;\n\n    if (this.props.spin) {\n      options = this._getOptions();\n      this._startSpinner(this.props.size, options);\n    } else {\n      this._stopSpinner();\n    }\n  },\n\n  _getColor() {\n    var theme = PreferencesStore.getTheme();\n    return AppConfig.spinner_colors[theme];\n  },\n\n  _getOptions() {\n    var options = _.clone(this.props);\n\n    if (!options.color) {\n      options.color = this._getColor();\n    }\n\n    return options;\n  },\n\n  _startSpinner(optsOrPreset, opts) {\n    let spinner = AJS.$(this._getSpinner());\n    if (this.props.delay > 0) {\n      this.timer = setTimeout(() => { spinner.spin(optsOrPreset, opts); }, this.props.delay);\n    } else {\n      spinner.spin(optsOrPreset, opts);\n    }\n  },\n\n  _stopSpinner() {\n    if (this.timer) {\n      this.timer = clearTimeout(this.timer);\n    }\n    AJS.$(this._getSpinner()).spinStop();\n  },\n\n  render(){\n    return (\n      <div className={'hc-spinner ' + ((this.props.spinner_class) ? this.props.spinner_class : '')} ref={this.props.ref}></div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/spinner/spinner.js\n **/","import HeaderStrings from \"strings/app_header_strings\";\nimport AppHeaderActions from \"actions/app_header_actions\";\nimport KeyboardShortcuts from \"helpers/keyboard_shortcuts\";\nimport DialogActions from \"actions/dialog_actions\";\nimport ConfigStore from 'stores/configuration_store';\nimport AppConfig from 'config/app_config.js';\nimport utils from 'helpers/utils';\n\nexport default React.createClass({\n\n  displayName: \"HelpMenuContent\",\n\n  getInitialState () {\n    return this._getState();\n  },\n\n  componentDidMount () {\n    ConfigStore.on([\"change:web_server\", \"change:feature_flags\"], this._onChange);\n  },\n\n  componentWillUnmount () {\n    ConfigStore.off([\"change:web_server\", \"change:feature_flags\"], this._onChange);\n  },\n\n  _onChange () {\n    this.setState(this._getState());\n  },\n\n  _getState () {\n    let client_subtype = ConfigStore.get(\"client_subtype\");\n    return {\n      web_server: ConfigStore.get(\"web_server\"),\n      isWindows: utils.clientSubType.isWindows(client_subtype),\n      isMac: utils.clientSubType.isMac(client_subtype),\n      isNative: utils.clientSubType.isNative(client_subtype),\n      isBTF: _.get(ConfigStore.get('feature_flags'), 'btf', false)\n    };\n  },\n\n  _onKeyboardShortcutsClick () {\n    var commands = KeyboardShortcuts.getKeyCommands();\n    DialogActions.showKeyboardShortcutsDialog(commands);\n  },\n\n  _onWhatsNewClick () {\n    AppHeaderActions.requestReleaseNotesDialog();\n  },\n\n  _getOnlineHelp () {\n    return (\n      <li>\n        <a className=\"hc-online-help\" href={AppConfig.help_link_url} target=\"_blank\">{HeaderStrings.help}</a>\n      </li>\n    );\n  },\n\n  _getGetStartedLink () {\n    return (\n      <li>\n        <a className=\"hc-get-started\" href={AppConfig.get_started_url} target=\"_blank\">{HeaderStrings.get_started}</a>\n      </li>\n    );\n  },\n\n  _getKeyboardShortcutsLink () {\n    return (\n      <li>\n        <a className=\"hc-keyboard-shortcuts\" onClick={this._onKeyboardShortcutsClick}>{HeaderStrings.keyboard_shortcuts}</a>\n      </li>\n    );\n  },\n\n  _getEmoticonListLink () {\n    var link = `https://${this.state.web_server}/emoticons`;\n    return (\n      <li>\n        <a className=\"hc-emoticon-list-link\" href={link} target=\"_blank\">{HeaderStrings.emoticon_list}</a>\n      </li>\n    );\n  },\n\n  _getWhatsNewLink () {\n    if (this.state.isNative || this.state.isBTF) {\n      return null;\n    }\n    return (\n      <li>\n        <a id=\"whats-new\" onClick={this._onWhatsNewClick}>{HeaderStrings.whats_new}</a>\n      </li>\n    );\n  },\n\n  _getStatusLink () {\n    return (\n      <li>\n        <a className=\"hc-status-page-link\" href={AppConfig.status_page_url} target=\"_blank\">{HeaderStrings.status}</a>\n      </li>\n    );\n  },\n\n  _getFeedbackLink () {\n    return (\n      <li>\n        <a id=\"give-feedback\" href={AppConfig.feedback_issue_url} target=\"_blank\">{HeaderStrings.provide_feedback}</a>\n      </li>\n    );\n  },\n\n  render () {\n    var onlineHelpLink = this._getOnlineHelp(),\n        getStartedLink = this._getGetStartedLink(),\n        keyboardShortcutsLink = this._getKeyboardShortcutsLink(),\n        statusLink = (this.state.isBTF) ? false : this._getStatusLink(),\n        emoticonLink = this._getEmoticonListLink(),\n        whatsNewLink = (!this.state.isBTF && !this.state.isNative) ? this._getWhatsNewLink() : false,\n        feedbackLink = this._getFeedbackLink();\n\n    return (\n      <div className=\"aui-dropdown2-section\">\n        <ul>\n          {onlineHelpLink}\n          {getStartedLink}\n          {keyboardShortcutsLink}\n          {emoticonLink}\n          {whatsNewLink}\n          {statusLink}\n          {feedbackLink}\n        </ul>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/help_menu_content.js\n **/","import AppHeaderActions from 'actions/app_header_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport utils from 'helpers/utils';\nimport cx from 'classnames';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: \"SearchInput\",\n\n  componentDidMount() {\n    this._shouldFocus();\n  },\n\n  componentDidUpdate() {\n    this._shouldFocus();\n  },\n\n  _shouldFocus() {\n    var input = ReactDOM.findDOMNode(this.refs.searchInput);\n    if (this.props.focus_search && input) {\n      this._focusAndSelect(input);\n    }\n  },\n\n  _focusAndSelect(input) {\n    if (input !== document.activeElement) {\n      input.focus();\n      input.select();\n    }\n  },\n\n  render() {\n    var inputClasses = cx({\n      'mousetrap': true\n    });\n\n    return (\n      <div className=\"aui-quicksearch\">\n        <input id=\"search-query\"\n               tabIndex=\"-1\"\n               type=\"text\"\n               className={inputClasses}\n               placeholder=\"Search history\"\n               name=\"name\"\n               autoComplete=\"off\"\n               data-tipsify-ignore\n               aria-label=\"Search for something\"\n               ref=\"searchInput\"\n               onKeyDown={this._onKeyDown}\n               onChange={this._onChange}\n               onBlur={this._onBlur}\n               onFocus={this._onFocus}\n               value={this.props.text} />\n      </div>\n    );\n  },\n\n  _onKeyDown(evt) {\n    if (evt.keyCode === utils.keyCode.Enter) {\n      if (this.props.search_enabled) {\n        AppHeaderActions.searchHistory(this.props.jid, this.props.text);\n      } else {\n        AppHeaderActions.searchHistoryExternally(this.props.jid, this.props.text);\n      }\n      AnalyticsActions.searchInputSubmitted(this.props.jid);\n    } else if (evt.keyCode === utils.keyCode.Esc) {\n      AppHeaderActions.setSearchText({\n        text: \"\"\n      });\n      if (this.props.jid !== 'search') {\n        this._focusOnMessageInput();\n      }\n    }\n  },\n\n  _focusOnMessageInput() {\n    document.getElementById(`${AppConfig.chat_input_id}`).focus();\n  },\n\n  _onChange(evt) {\n    AppHeaderActions.setSearchText({\n      text: evt.target.value\n    });\n  },\n\n  _onBlur() {\n    AppHeaderActions.searchBlurred();\n  },\n\n  _onFocus(){\n    AnalyticsActions.searchInputClicked();\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/search_input.js\n **/","import cx from 'classnames';\n\n/**\n * Create an AUI Dropdown2 trigger. The standard use case as defined in the\n * AUI docs (https://docs.atlassian.com/aui/latest/docs/dropdown2.html) is for\n * the trigger to be a button. This component does not make that distinction,\n * so if you want the trigger to be a button, you simply need to add the button\n * css classes:\n *\n * <AUIDropdown2Trigger className=\"aui-button aui-button-primary\" dropdownID=\"123\">\n *   Trigger text\n * </AUIDropdownTrigger>\n */\nexport default React.createClass({\n\n  displayName: 'AUIDropdown2Trigger',\n\n  propTypes: {\n    type: React.PropTypes.oneOf(['a', 'link', 'button']),\n    dropdownID: React.PropTypes.string.isRequired,\n    arrowless: React.PropTypes.bool,\n    disabled: React.PropTypes.bool,\n    alignmentContainer: React.PropTypes.string, // optional selector\n    hideLocation: React.PropTypes.string // optional selector\n  },\n\n  getDefaultProps() {\n    return {\n      type: 'button',\n      arrowless: false,\n      disabled: false\n    };\n  },\n\n  render() {\n    let attrs = {\n      'id': this.props.id || _.uniqueId(),\n      'href': `#${this.props.dropdownID}`,\n      'aria-owns': this.props.dropdownID,\n      'title': this.props.title || '',\n      'aria-label': this.props['aria-label'] || this.props.title || '',\n      'aria-controls': this.props.dropdownID,\n      'aria-disabled': this.props.disabled,\n      'aria-haspopup': true,\n      'className': cx({\n        [this.props.className]: !!this.props.className,\n        'aui-dropdown2-trigger': true,\n        'aui-dropdown2-trigger-arrowless': this.props.arrowless\n      })\n    };\n\n    if (this.props.alignmentContainer) {\n      attrs['data-container'] = this.props.alignmentContainer; // AUI 5.7\n      attrs['data-aui-alignment-container'] = this.props.alignmentContainer; // AUI 5.8\n    }\n\n    if (this.props.hideLocation) {\n      attrs['data-dropdown2-hide-location'] = this.props.hideLocation;\n    }\n\n    switch (this.props.type) {\n      case 'a':\n      case 'link':\n        return <a {...attrs}>{ this.props.children }</a>;\n\n      case 'button':\n      default:\n        return <button {...attrs}>{ this.props.children }</button>;\n    }\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/dropdown2/aui_dropdown2_trigger.js\n **/","import cx from 'classnames';\n\n/**\n * https://docs.atlassian.com/aui/latest/docs/dropdown2.html\n * Usage:\n *\n * <AUIDropdown2Trigger dropdownID=\"123\">Trigger</AUIDropdown2Trigger>\n *\n * <AUIDropdown2 dropdownID=\"123\">\n *   // dropdown html contents or a react component that renders it\n * <AUIDropdown2>\n *\n * Notes:\n *  - dropdownID is required for both the dropdown and trigger elements and must match\n */\nexport default React.createClass({\n\n  displayName: 'AUIDropdown2',\n\n  propTypes: {\n    dropdownID: React.PropTypes.string.isRequired,\n    onShow: React.PropTypes.func,\n    onHide: React.PropTypes.func\n  },\n\n  getDefaultProps() {\n    return {\n      onShow: _.noop,\n      onHide: _.noop\n    };\n  },\n\n  /*\n   * When the dropdown is shown, AUI will move the container element\n   * to the body and fire a \"show\" event. We'll wait for that event\n   * and then React.render this component's children to the container\n   *\n   * When the dropdown is closed, we'll unmount this component's\n   * children from the container element\n   */\n  componentDidMount() {\n    AJS.$(this._getDropdownElement()).on({\n      'aui-dropdown2-show': this.renderDropdownContents,\n      'aui-dropdown2-hide': this.removeDropdownContents\n    });\n  },\n\n  /*\n   * Remove AUI DOM event listeners\n   */\n  componentWillUnmount() {\n    this.removeDropdownContents();\n    AJS.$(this._getDropdownElement()).off();\n  },\n\n  /*\n   * AUI's gonna take over and move this element all around the DOM\n   * mutating it all the way so don't let React try to update it\n   */\n  shouldComponentUpdate() {\n    return false;\n  },\n\n  /*\n   * For our initial render, we want to take the dropdown html\n   * and render it statically within this component. We don't want\n   * React to try to manage the HTML at all, but we *DO* want to have\n   * it in there so AUI can properly measure the size of the contents\n   * and place it properly when the dropdown becomes visible\n   */\n  render() {\n    let attrs = {\n      'id': this.props.dropdownID,\n      'aria-hidden': 'true',\n      'role': 'menu',\n      'className': cx({\n        [this.props.className]: !!this.props.className,\n        'aui-dropdown2': true,\n        'aui-style-default': true\n      }),\n      'dangerouslySetInnerHTML': {\n        __html: this._getStaticDropdownDOM()\n      }\n    };\n\n    return <div {...attrs} />;\n  },\n\n  invokeTrigger() {\n    AJS.$(`[aria-owns=\"${this.props.dropdownID}\"]`).trigger('aui-button-invoke');\n  },\n\n  /*\n   * When the dropdown is shown & once AUI has moved it across\n   * the DOM, we'll blow away the static contents, and overwrite\n   * it with a new React-managed component\n   */\n  renderDropdownContents() {\n    ReactDOM.render(this.props.children, this._getDropdownElement());\n    AJS.$(window).one('resize', this.invokeTrigger);\n    this.props.onShow();\n  },\n\n  /*\n   * When the dropdown is hidden & once AUI has moved it again,\n   * we'll unmount the React component, and replace the inner\n   * contents with the static DOM children we had originally.\n   * This way AUI has the contents again to measure with for\n   * the next time the dropdown opens\n   */\n  removeDropdownContents() {\n    AJS.$(window).off('resize', this.invokeTrigger);\n    ReactDOM.unmountComponentAtNode(this._getDropdownElement());\n    AJS.$(this._getDropdownElement())\n      .empty()\n      .html(this._getStaticDropdownDOM());\n    this.props.onHide();\n  },\n\n  /*\n   * Find the element on the page. It can be anywhere in the DOM after AUI moves it\n   */\n  _getDropdownElement() {\n    return document.getElementById(this.props.dropdownID);\n  },\n\n  /*\n   * Render the child components in this dropdown as raw HTML\n   */\n  _getStaticDropdownDOM() {\n    return ReactDOMServer.renderToStaticMarkup(this.props.children);\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/dropdown2/aui_dropdown2.js\n **/","import AppHeaderActions from 'actions/app_header_actions';\nimport strings from 'strings/notification_banner_strings';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport appConfig from 'config/app_config';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"NotificationBanner\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    ready: React.PropTypes.bool.isRequired,\n    notification_permission: React.PropTypes.bool.isRequired,\n    notification_preference: React.PropTypes.bool.isRequired,\n    notification_dismissed: React.PropTypes.oneOfType([\n      React.PropTypes.bool,\n      React.PropTypes.number\n    ]).isRequired\n  },\n\n  getInitialState (){\n    return {\n      dismissed: false\n    };\n  },\n\n  componentDidMount(){\n    if (this.props.notification_preference && !this.props.notification_permission) {\n      this._updateBannerState(true);\n    }\n  },\n\n  componentWillReceiveProps (nextProps) {\n\n    if (this.state.dismissed){\n      return;\n    }\n\n    if (!this.props.notification_preference && nextProps.notification_preference) {\n         this._updateBannerState(true);\n    } else if (this.props.notification_preference && !nextProps.notification_preference) {\n         this._updateBannerState(false);\n    }\n  },\n\n  render () {\n    return (\n      <div className=\"aui-banner hc-banner-warning\" role=\"banner\" aria-hidden=\"false\">{strings.banner_message}&nbsp;\n        <a onClick={this._enableNotifications} ref=\"enable_btn\" className=\"enable\">{strings.enable_link}</a> {this.props.notification_dismissed > 0 ? strings.seriously_recommended : strings.recommended}\n        <strong>&nbsp;&nbsp;&middot;&nbsp;&nbsp;</strong>\n        <a onClick={this._dismiss} ref=\"dismiss_btn\">{strings.dismiss_link}</a>\n          {\n            this.props.notification_dismissed > 0 ? <span>\n              <strong>&nbsp;&nbsp;&middot;&nbsp;&nbsp;</strong>\n              <a onClick={this._dismissForever} ref=\"dismiss_forever_btn\">{strings.dismiss_forever_link}</a>\n            </span> : <span></span>\n            }\n      </div>\n    );\n  },\n\n  _updateBannerState (shown){\n    _.delay(() => {\n      AppDispatcher.dispatch('position-app-header-dialogs');\n      AppDispatcher.dispatch('notification-banner-status', {shown: shown});\n    }, appConfig.notification_banner_slide);\n  },\n\n  _enableNotifications () {\n    this._hideBanner();\n    AppHeaderActions.requestNotificationPermission();\n  },\n\n  _dismiss () {\n    this._hideBanner();\n    AppHeaderActions.dismissNotificationBanner();\n  },\n\n  _dismissForever () {\n    this._hideBanner();\n    AppHeaderActions.dismissNotificationBannerForever();\n  },\n\n  _hideBanner () {\n    this.setState({\n      dismissed: true\n    });\n    AppDispatcher.dispatch('notification-banner-status', {\n      shown: false\n    });\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/notification_banner.js\n **/","export default {\n  banner_message: `Don't miss out on all those important messages.`,\n  enable_link: `Enable desktop notifications`,\n  dismiss_link: `Not right now`,\n  dismiss_forever_link: `Don't ask me again`,\n  recommended: `(Recommended)`,\n  seriously_recommended: `(We seriously recommend this)`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/notification_banner_strings.js\n **/","var InlineDialogActions = require(\"actions/inline_dialog_actions\");\n\nfunction _hideLayerFromEscKeypress(e) {\n  var intKey = (window.Event) ? e.which : e.keyCode;\n  if (intKey === 27) {\n    InlineDialogActions.hideInlineDialog();\n  }\n}\n\nfunction _hideLayerFromClick(e) {\n  var $target = $(e.target);\n  if ($target.closest(\".aui-inline-dialog-trigger\").length === 0 && $target.parents(\".aui-inline-dialog\").length === 0) {\n    InlineDialogActions.hideInlineDialog();\n  }\n}\n\nmodule.exports = {\n  componentDidMount: function() {\n    window.addEventListener('keydown', _hideLayerFromEscKeypress);\n    window.addEventListener('click', _hideLayerFromClick);\n  },\n\n  componentWillUnmount: function() {\n    window.removeEventListener('keydown', _hideLayerFromEscKeypress);\n    window.removeEventListener('click', _hideLayerFromClick);\n  },\n\n  _onKeyDown: _hideLayerFromEscKeypress\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/inline_dialog_manager_mixin.js\n **/","import ModalDialogStore from \"stores/modal_dialog_store\";\nimport SettingsDialog from \"components/dialogs/settings_dialog/settings_dialog\";\nimport appConfig from \"config/app_config\";\nimport InviteUserDialog from \"components/dialogs/invite_user_dialog/invite_user_dialog\";\nimport RemoveUserDialog from \"components/dialogs/remove_user_dialog/remove_user_dialog\";\nimport CreateRoomDialog from \"components/dialogs/create_room_dialog/create_room_dialog\";\nimport RoomPrivacyDialog from \"components/dialogs/room_privacy_dialog/room_privacy_dialog\";\nimport RenameRoomDialog from \"components/dialogs/rename_room_dialog/rename_room_dialog\";\nimport DeleteRoomDialog from \"components/dialogs/delete_room_dialog/delete_room_dialog\";\nimport RoomInviteDialog from \"components/dialogs/room_invite_dialog/room_invite_dialog\";\nimport ArchiveRoomDialog from 'components/dialogs/archive_room_dialog/archive_room_dialog';\nimport Desktop4Dialog from 'components/dialogs/desktop_4_dialog/desktop_4_dialog';\nimport AddonDialog from \"components/dialogs/addon_dialog/addon_dialog\";\nimport QuickSwitcherDialog from \"components/quick_switcher/quick_switcher_dialog\";\nimport InviteTeammatesDialog from \"components/dialogs/invite_teammates_dialog/invite_teammates_dialog\";\nimport DisableGuestAccessDialog from 'components/dialogs/guest_access_dialog/guest_access_dialog';\nimport RoomNotificationsDialog from 'components/dialogs/room_notifications_dialog/room_notifications_dialog';\nimport KeyboardShortcutsDialog from 'components/dialogs/keyboard_shortcuts_dialog/keyboard_shortcuts_dialog';\nimport ReleaseNotesDialog from 'components/dialogs/release_notes_dialog/release_notes_dialog';\nimport IntegrationDialog from 'components/dialogs/integration_dialog/integration_dialog';\nimport IntegrationsManagementDialog from 'components/dialogs/integrations_dialog/integrations_management_dialog';\nimport EditMessageDialog from 'components/dialogs/edit_message_dialog/edit_message_dialog';\nimport DeleteMessageDialog from 'components/dialogs/delete_message_dialog/delete_message_dialog';\nimport NotEditableDialog from 'components/dialogs/edit_message_dialog/not_editable_dialog';\nimport WelcomeDialog from 'components/dialogs/welcome_dialog/welcome_dialog';\nimport ModalBackdrop from \"./modal_backdrop\";\n\nexport default React.createClass({\n\n  displayName: \"ModalDialogContainer\",\n\n  componentDidMount: function() {\n    ModalDialogStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    ModalDialogStore.off('change', this._onChange);\n  },\n\n  getInitialState: function() {\n    return ModalDialogStore.getAll();\n  },\n\n  _onChange: function() {\n    this.setState(ModalDialogStore.getAll());\n  },\n\n  _getDialogBackdrop: function() {\n    var dialogData = this.state.dialogData || {},\n        bgDismiss = dialogData.bgDismiss === false ? dialogData.bgDismiss : appConfig.default_backdrop_dismiss_on_click;\n\n    return <ModalBackdrop btnLoading={this.state.btnLoading}\n                          bgDismiss={bgDismiss} />;\n  },\n\n  _getDialog: function() {\n    var currentDialogId = ModalDialogStore.getCurrentModalDialog();\n    var currentDialog = false;\n\n    if (currentDialogId) {\n      switch (currentDialogId) {\n        case \"room-notifications-dialog\":\n          currentDialog = <RoomNotificationsDialog {...this.state.dialogData} />;\n          break;\n\n        case \"settings-dialog\":\n          currentDialog = <SettingsDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"invite-users-dialog\":\n          currentDialog = <InviteUserDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"remove-users-dialog\":\n          currentDialog = <RemoveUserDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"create-room-dialog\":\n          currentDialog = <CreateRoomDialog {...this.state.dialogData} btnLoading={this.state.btnLoading}/>;\n          break;\n\n        case \"room-privacy-dialog\":\n          currentDialog = <RoomPrivacyDialog {...this.state.dialogData} btnLoading={this.state.btnLoading}/>;\n          break;\n\n        case \"rename-room-dialog\":\n          currentDialog = <RenameRoomDialog {...this.state.dialogData} btnLoading={this.state.btnLoading}/>;\n          break;\n\n        case \"delete-room-dialog\":\n          currentDialog = <DeleteRoomDialog {...this.state.dialogData} btnLoading={this.state.btnLoading}/>;\n          break;\n\n        case \"room-invite-dialog\":\n          currentDialog = <RoomInviteDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"archive-room-dialog\":\n          currentDialog = <ArchiveRoomDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"disable-guest-dialog\":\n          currentDialog = <DisableGuestAccessDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"addon-dialog\":\n          currentDialog = <AddonDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"invite-teammates-dialog\":\n          currentDialog = <InviteTeammatesDialog {...this.state.dialogData} web_server={this.state.web_server}/>;\n          break;\n\n        case \"keyboard-shortcuts-dialog\":\n          currentDialog = <KeyboardShortcutsDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"release-notes-dialog\":\n          currentDialog = <ReleaseNotesDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"quick-switcher-dialog\":\n          currentDialog = <QuickSwitcherDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"integration-dialog\":\n          currentDialog = <IntegrationDialog {...this.state.dialogData}/>;\n          break;\n\n        case \"desktop-4-dialog\":\n          currentDialog = <Desktop4Dialog {...this.state.dialogData} />;\n          break;\n\n        case \"integrations-management-dialog\":\n          currentDialog = <IntegrationsManagementDialog {...this.state.dialogData} />;\n          break;\n\n        case \"edit-message-dialog\":\n          currentDialog = <EditMessageDialog {...this.state.dialogData} />;\n          break;\n\n        case \"delete-message-dialog\":\n          currentDialog = <DeleteMessageDialog {...this.state.dialogData} />;\n          break;\n\n        case \"not-editable-dialog\":\n          currentDialog = <NotEditableDialog {...this.state.dialogData} />;\n          break;\n\n        case \"welcome-dialog\":\n          currentDialog = <WelcomeDialog {...this.state.dialogData} />;\n          break;\n\n      }\n    }\n\n    return currentDialog;\n  },\n\n  render: function() {\n    var dialog = this._getDialog(),\n        dialogBackdrop;\n\n\n    if (dialog) {\n      dialogBackdrop = this._getDialogBackdrop();\n    }\n\n    return (\n      // we use key here to draw new backdrop for each new dialog\n      <div key={this.state.activeDialog}>\n        {dialog}\n        {dialogBackdrop}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/modal_dialog/modal_dialog_container.js\n **/","/*global HC*/\nimport ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport NavPanel from 'components/common/nav_panel/nav_panel';\nimport NavPanelContent from 'components/common/nav_panel/nav_panel_content';\nimport PreferenceCheckboxField from './preference_checkbox_field';\nimport PreferenceRadioField from './preference_radio_field';\nimport ConfigStore from 'stores/configuration_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport PreferencesActions from 'actions/preferences_actions';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport strings from 'strings/dialog_strings';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\nimport AuiFormInlineFieldGroup from 'components/common/aui/form/aui_form_inline_fieldgroup';\nimport AuiInputFieldGroup from 'components/common/aui/form/aui_input_fieldgroup';\nimport MacDockBounceField from 'components/dialogs/settings_dialog/mac_dock_bounce_field';\nimport SoundsField from 'components/dialogs/settings_dialog/sounds_field';\nimport GlobalRoomNotificationsForm from 'components/forms/global_room_notifications_form';\nimport DoNotDisturbForm from 'components/forms/do_not_disturb_form';\nimport utils from 'helpers/utils';\nimport spi from 'spi';\n\nexport default React.createClass({\n\n  displayName: 'SettingsDialog',\n\n  componentDidMount() {\n    PreferencesStore.on('change', this._onChange);\n    ConfigStore.on('change', this._onChange);\n    document.querySelector('body').addEventListener('keydown', this._onKeyDown);\n  },\n\n  componentWillUnmount() {\n    PreferencesStore.off('change', this._onChange);\n    ConfigStore.off('change', this._onChange);\n    document.querySelector('body').removeEventListener('keydown', this._onKeyDown);\n  },\n\n  _onChange() {\n    this.setState(this._getState());\n    this.setState({dirty: true});\n  },\n\n  getInitialState() {\n    let initState = this._getState(),\n        otherDefaults = {\n          errors: {},\n          dirty: false\n        };\n\n    return _.merge(initState, otherDefaults);\n  },\n\n  _getState() {\n    let prefs = {},\n        preferences = PreferencesStore.getAll();\n\n    _.assign(prefs, preferences, {\n      feature_flags: ConfigStore.get('feature_flags'),\n      client_subtype: ConfigStore.get('client_subtype'),\n      display_name: ConfigStore.get('display_name'),\n      group_name: ConfigStore.get('group_name')\n    });\n\n    return prefs;\n  },\n\n  //TODO: Remove client subtype checks and let wrappers tell the web client what to display\n  /**\n   * Check for when items need to be Windows-specific\n   * @returns {boolean}\n   * @private\n   */\n  _isWindows() {\n    return utils.clientSubType.isWindows(this.state.client_subtype);\n  },\n\n  /**\n   * Check for when items need to be Linux-specific\n   * @returns {boolean}\n   * @private\n   */\n  _isLinux() {\n    return utils.clientSubType.isLinux(this.state.client_subtype);\n  },\n\n  /**\n   * Check for when items need to be Mac-specific\n   * @returns {boolean}\n   * @private\n   */\n  _isMac() {\n    return utils.clientSubType.isMac(this.state.client_subtype);\n  },\n\n  /**\n   * Check for when items belong any native flavor\n   * @returns {boolean}\n   * @private\n   */\n  _isNative() {\n    return utils.clientSubType.isNative(this.state.client_subtype);\n  },\n\n  _getGeneralPanel() {\n    let generalPanelNativeOptions = this._getGeneralPanelNativeOptions();\n    let attachedCardsOption = this._getAttachedCardsOption();\n\n    return (\n      <NavPanelContent name={strings.general} key=\"general-settings-panel\">\n        <form className='aui' onSubmit={this._onSubmit}>\n          <PreferenceCheckboxField id={PreferencesKeys.HIDE_PRESENCE_MESSAGES}\n            label={strings.hide_presence_messages}\n            value='false'\n            isReverse={true} />\n          <PreferenceCheckboxField id={PreferencesKeys.USE_24_HR_FORMAT}\n            label={strings.use_24_hour_format} />\n          {attachedCardsOption}\n          <PreferenceCheckboxField id={ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT}\n            label={strings.hide_gifs_by_default} />\n          <PreferenceCheckboxField id={ClientPreferencesKeys.REPLACE_TEXT_EMOTICONS}\n            label={strings.replace_text_emoticons} />\n          <PreferenceCheckboxField id={ClientPreferencesKeys.SHOW_UNREAD_DIVIDER}\n            label={strings.show_unread_divider} />\n          {generalPanelNativeOptions}\n        </form>\n      </NavPanelContent>\n    );\n  },\n\n  _getGeneralPanelNativeOptions() {\n    let nativeOptions = [];\n\n    if (this._isWindows()) {\n       nativeOptions.push(this._getWindowsGeneralOptions());\n    }\n    if (this._isNative()) {\n      nativeOptions.push(this._getNativeGeneralOptions());\n    }\n    if (this._isMac()) {\n      nativeOptions.push(this._getMacGeneralOptions());\n    }\n    return nativeOptions;\n  },\n\n  _getAttachedCardsOption() {\n    if (_.get(this.state.feature_flags, 'web_client_attach_to_collapsable_enabled')) {\n      return <PreferenceCheckboxField\n        id={ClientPreferencesKeys.HIDE_ATTACHED_CARDS_BY_DEFAULT}\n        label={strings.hide_attached_cards_by_default}/>;\n    }\n    return undefined;\n  },\n\n  _getWindowsGeneralOptions() {\n    return [\n      <PreferenceCheckboxField id={ClientPreferencesKeys.LAUNCH_WITH_OS_STARTUP} label={strings.start_up_with_windows} />\n    ];\n  },\n\n  _getMacGeneralOptions() {\n    return [\n      <PreferenceCheckboxField id={ClientPreferencesKeys.ENABLE_AUTOCORRECT} label={strings.enable_autocorrect} />\n    ];\n  },\n\n  _getNativeGeneralOptions() {\n    return [\n      <AuiFormInlineFieldGroup>\n        <PreferenceCheckboxField\n          id={PreferencesKeys.ENABLE_IDLE}\n          label={strings.idle} />\n        <AuiInputFieldGroup\n          id={PreferencesKeys.IDLE_MINUTES}\n          key={PreferencesKeys.IDLE_MINUTES}\n          label={strings.minutes}\n          labelPosition='right'\n          size='short-field'\n          defaultValue={this.state[PreferencesKeys.IDLE_MINUTES]}\n          error={this.state.errors[PreferencesKeys.IDLE_MINUTES]}\n          type='text'\n          onChange={this._trackUnsavedChanges}\n          onBlur={this._onPreferenceChanged} />\n      </AuiFormInlineFieldGroup>,\n      <PreferenceCheckboxField id={ClientPreferencesKeys.ENABLE_LOGGING} label={strings.enable_logging} />,\n      <PreferenceCheckboxField id={ClientPreferencesKeys.ENABLE_SPELL_CHECK} label={strings.enable_spell_check} />\n    ];\n  },\n\n  _getAppearancePanel() {\n    let panel = <span name={strings.appearance}></span>;\n    let animated_avatars = null;\n\n    if (ConfigStore.get('feature_flags').web_client_freeze_gifs) {\n      animated_avatars = (\n        <PreferenceRadioField id={ClientPreferencesKeys.ANIMATED_AVATARS}\n          label={strings.animated_avatars}\n          options={PreferencesStore.getAnimatedAvatarsOptions()} />\n      );\n    }\n\n    if ((this.state.feature_flags && this.state.feature_flags.web_client_appearance_settings) || HC.ENV !== 'production' || this._isNative()) {\n      panel = (\n        <NavPanelContent name={strings.appearance} key=\"appearance-settings-panel\">\n          <form className='aui'>\n            <PreferenceRadioField id={PreferencesKeys.THEME}\n              label={strings.theme}\n              options={PreferencesStore.getThemeOptions()} />\n            <PreferenceRadioField id={PreferencesKeys.DENSITY}\n              label={strings.density}\n              options={PreferencesStore.getDensityOptions()} />\n            <PreferenceRadioField id={PreferencesKeys.CHAT_VIEW}\n              label={strings.chat_view}\n              options={PreferencesStore.getChatViewOptions()} />\n            <PreferenceRadioField id={PreferencesKeys.NAME_DISPLAY}\n              label={strings.name_display}\n              options={PreferencesStore.getNameDisplayOptions()} />\n            {animated_avatars}\n          </form>\n        </NavPanelContent>\n      );\n    }\n\n    return panel;\n  },\n\n  _getNotificationsPanel() {\n    var video_enabled = _.get(this.state, 'feature_flags.web_client_video_chat', false),\n        room_notifications_enabled = _.get(this.state, 'feature_flags.web_client_per_room_notifications', false),\n        room_notification_settings = this._getRoomNotificationSettings(room_notifications_enabled),\n        native_notification_settings = this._getNativeNotificationSettings(),\n        sounds_field = this._getSoundsField(video_enabled),\n        dnd_with_video,\n        notify_when_dnd,\n        notify_for_oto;\n\n    if (room_notifications_enabled) {\n      notify_for_oto = (\n        <PreferenceCheckboxField\n          id={PreferencesKeys.NOTIFY_FOR_PRIVATE}\n          label={strings.notify_for_oto_per_room_enabled} />\n      );\n    }\n\n    if (video_enabled) {\n      dnd_with_video = (\n        <DoNotDisturbForm\n          notifyForVideo={this.state[PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND]}\n          notifyAlways={this.state[PreferencesKeys.NOTIFY_WHEN_DND]} />\n      );\n    } else {\n      notify_when_dnd = (\n        <PreferenceCheckboxField\n          id={PreferencesKeys.NOTIFY_WHEN_DND}\n          label={strings.do_not_notify_when_dnd_basic} />\n      );\n    }\n\n    return (\n      <NavPanelContent name={strings.notifications} key=\"notifications-settings-panel\">\n        <form className='aui'>\n          {sounds_field}\n          {notify_for_oto}\n          {native_notification_settings}\n          <PreferenceCheckboxField\n            id={PreferencesKeys.SHOW_TOASTERS}\n            label={strings.show_toasters} />\n          {notify_when_dnd}\n        </form>\n        {room_notification_settings}\n        {dnd_with_video}\n      </NavPanelContent>\n    );\n  },\n\n  _getSoundsField(video_enabled) {\n    var sounds_field;\n    if (video_enabled) {\n      sounds_field = (\n        <SoundsField\n          soundsEnabled={this.state[PreferencesKeys.SOUNDS_ENABLED]}\n          messageSounds={this.state[PreferencesKeys.MESSAGE_SOUNDS]}\n          videoSounds={this.state[PreferencesKeys.VIDEO_SOUNDS]} />\n      );\n    } else {\n      sounds_field = (\n        <PreferenceCheckboxField\n          id={PreferencesKeys.SOUNDS_ENABLED}\n          label={strings.basic_play_sound} />\n      );\n    }\n    return sounds_field;\n  },\n\n  _getRoomNotificationSettings(room_notifications_enabled) {\n    if (room_notifications_enabled) {\n      return <GlobalRoomNotificationsForm />;\n    }\n\n    return (\n      <form className='aui'>\n        <h3>{strings.notify_when_header}</h3>\n        <PreferenceCheckboxField id={PreferencesKeys.NOTIFY_FOR_ROOM}\n          label={strings.notify_for_room} />\n        <PreferenceCheckboxField id={PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM}\n          label={strings.notify_for_private_room} />\n        <PreferenceCheckboxField id={PreferencesKeys.NOTIFY_FOR_TAG}\n          label={strings.notify_for_tag} />\n        <PreferenceCheckboxField id={PreferencesKeys.NOTIFY_FOR_PRIVATE}\n          label={strings.notify_for_oto} />\n      </form>\n    );\n  },\n\n  _getNativeNotificationSettings() {\n    if (this._isWindows()) {\n      return [\n        <PreferenceCheckboxField id={ClientPreferencesKeys.KEEP_POPUPS_VISIBLE}\n          label={strings.keep_popups_visible} />,\n        <PreferenceCheckboxField id={ClientPreferencesKeys.BLINK_TASKBAR}\n          label={strings.blink_taskbar} />\n      ];\n    } else if (this._isLinux()) {\n      return [\n        <PreferenceCheckboxField id={ClientPreferencesKeys.KEEP_POPUPS_VISIBLE}\n          label={strings.keep_popups_visible} />\n      ];\n    } else if (this._isMac()) {\n      return [\n        <MacDockBounceField\n          bounceIcon={this.state.bounceIcon}\n          bounceOnce={this.state.bounceOnce}/>\n      ];\n    }\n  },\n\n  _getConnectionPanel() {\n    return (\n      <NavPanelContent name={strings.connection} key=\"connection-settings-panel\">\n        <p>{strings.proxy_settings_description(this.state.display_name)}</p><br />\n        <button\n          className='aui-button aui-button-primary'\n          aria-disabled={this.props.btnLoading}\n          onClick={this._onClickProxySettings}>\n          {strings.proxy_settings(this.state.display_name)}\n        </button>\n      </NavPanelContent>\n    );\n  },\n\n  _dialogBody() {\n    let generalPanel = this._getGeneralPanel(),\n        appearancePanel = this._getAppearancePanel(),\n        notificationsPanel = this._getNotificationsPanel(),\n        connectionPanel = this._getConnectionPanel(),\n        navPanelContent = [\n          generalPanel,\n          appearancePanel,\n          notificationsPanel\n        ];\n\n    if (this._isWindows()) {\n      navPanelContent.push(connectionPanel);\n    }\n\n    return (\n      <NavPanel\n        onChange={this._onPreferenceChanged}\n        defaultTab={this.props.activeTab}>\n        {navPanelContent}\n      </NavPanel>\n    );\n  },\n\n  trackedPreferences: {},\n\n  _trackUnsavedChanges(e) {\n    e.stopPropagation();\n    this.trackedPreferences[e.target.id] = e.target.value;\n  },\n\n  _onKeyDown(e) {\n    var key = window.Event ? e.which : e.keyCode;\n\n    if (key === utils.keyCode.Esc) {\n      _.forEach(this.trackedPreferences, (value, id) => {\n        let target = {\n          id: id,\n          value: value,\n          type: 'text'\n        };\n        this._onPreferenceChanged({ target: target });\n      });\n    }\n  },\n\n  _getPreference(target) {\n    let pref = {};\n\n    switch(target.type) {\n      case 'radio':\n        let checked = document.querySelector(`input[name='${target.name}']:checked`);\n        pref[target.name] = checked.id;\n      break;\n      case 'checkbox':\n        let value = (target.value === 'true');\n        pref[target.id] = (target.checked) ? value : !value;\n      break;\n      case 'text':\n        pref[target.id] = target.value;\n      break;\n    }\n\n    return pref;\n  },\n\n  _onPreferenceChanged(e) {\n    let target = e.target,\n        preference = this._getPreference(target),\n        formValidated = this._validate(target);\n\n    if (formValidated) {\n      PreferencesActions.savePreferences(preference);\n      spi.onPreferencesUpdated(preference);\n    }\n  },\n\n  _validate(target) {\n    let value = target.value;\n\n    if (Object.keys(this.state.errors).length) {\n      this._clearErrors();\n    }\n\n    if (target.id === PreferencesKeys.IDLE_MINUTES) {\n      if (!+value) {\n        this.setState({\n          errors: {\n            [PreferencesKeys.IDLE_MINUTES]: strings.minimum_idle_minutes\n          }\n        });\n        return false;\n      } else if (+value < 0) {\n        this.setState({\n          errors: {\n            [PreferencesKeys.IDLE_MINUTES]: strings.minimum_idle_minutes\n          }\n        });\n        return false;\n      } else if (+value > 99) {\n        this.setState({\n          errors: {\n            [PreferencesKeys.IDLE_MINUTES]: strings.maximum_idle_minutes\n          }\n        });\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  _clearErrors() {\n    this.setState({\n      errors: {}\n    });\n  },\n\n  _onSubmit(e) {\n    e.preventDefault();\n  },\n\n  _onClickProxySettings() {\n    if (spi.buttonClickedProxySettings) {\n      spi.buttonClickedProxySettings();\n    }\n  },\n\n  render() {\n    return (\n      <ModalDialog\n        dialogId='settings-dialog'\n        title={strings.title_settings(this.state.group_name)}\n        dialogBody={this._dialogBody}\n        noCloseLink />\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/settings_dialog/settings_dialog.js\n **/","import DialogActions from \"actions/dialog_actions\";\nimport ModalDialogVisibilityMixin from \"components/mixins/modal_dialog_visibility_mixin\";\nimport strings from \"strings/dialog_strings\";\nimport Spinner from \"components/common/spinner/spinner\";\nimport AppConfig from 'config/app_config';\nimport utils from \"helpers/utils\";\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"ModalDialog\",\n\n  propTypes: {\n    size: React.PropTypes.oneOf(['small', 'medium', 'large', 'xlarge'])\n  },\n\n  mixins: [ModalDialogVisibilityMixin],\n\n  componentDidMount: function() {\n    document.querySelector(\"body\").addEventListener('keydown', this._onKeyDown);\n  },\n\n  componentWillUnmount: function() {\n    document.querySelector(\"body\").removeEventListener('keydown', this._onKeyDown);\n  },\n\n  getDefaultProps: function() {\n    return {\n      closeLinkText: strings.close,\n      dialogId: \"dialog\",\n      dialogBody: _.noop,\n      dialogFooterButton: _.noop,\n      dialogFooterLinks: _.noop,\n      dialogFilter: false,\n      dialogFilterPlaceholder: \"\",\n      dialogFilterCallback: _.noop,\n      btnLoading: false,\n      size: \"medium\",\n      hint: \"\",\n      isWarning: false,\n      showFooter: true\n    };\n  },\n\n  _getTitle: function () {\n    var title;\n    if (this.props.lozenge_text) {\n      title = (\n        <h2 className=\"aui-dialog2-header-main\">\n          {this.props.title}\n          <span className=\"aui-lozenge aui-lozenge-current\">{this.props.lozenge_text}</span>\n        </h2>\n      );\n    } else {\n      title = <h2 className=\"aui-dialog2-header-main\">{this.props.title}</h2>;\n    }\n    return title;\n  },\n\n  _getSecondaryHeader: function() {\n    var secondaryHeader = false;\n    if (this.props.dialogFilter) {\n      secondaryHeader = (\n        <div className=\"aui-dialog2-header-secondary\">\n          <form className=\"aui\" action=\"#\">\n            <input className=\"text\" type=\"search\" name=\"search\"\n                   placeholder={this.props.dialogFilterPlaceholder} onChange={this.props.dialogFilterCallback}/>\n          </form>\n        </div>\n      );\n    }\n    return secondaryHeader;\n  },\n\n  _getHint: function () {\n    var hint;\n    if (this.props.noHint) {\n      hint = false;\n    } else {\n      hint = (\n        <div className=\"aui-dialog2-footer-hint\">{this.props.hint}</div>\n      );\n    }\n    return hint;\n  },\n\n  _getCloseBtn: function () {\n    var btn;\n    if (this.props.btnLoading) {\n      btn = false;\n    } else {\n      btn = (\n        <a className=\"aui-dialog2-header-close\" onClick={this._onClickClose}>\n          <span className=\"aui-icon aui-icon-small aui-iconfont-close-dialog\">{strings.close}</span>\n        </a>\n      );\n    }\n    return btn;\n  },\n\n  _getCloseLink: function () {\n    var link;\n    if (this.props.noCloseLink) {\n      link = false;\n    } else {\n      link = (\n        <button className=\"aui-button aui-button-link\" aria-disabled={this.props.btnLoading} onClick={this._onClickClose}>\n          {this.props.closeLinkText}\n        </button>\n      );\n    }\n    return link;\n  },\n\n  _getSectionStyle() {\n    var style = {};\n    if (this.props.customWidth) {\n      style = {\n        width: this.props.customWidth\n      };\n    }\n    return style;\n  },\n\n  _getDialogContentStyle() {\n    var style = {};\n    if (this.props.customHeight) {\n      style = {\n        height: this.props.customHeight\n      };\n    }\n    return style;\n  },\n\n  close: function() {\n    DialogActions.closeDialog();\n  },\n\n  _onKeyDown: function (e) {\n    var key = (window.Event) ? e.which : e.keyCode;\n    if (key === utils.keyCode.Esc && !this.props.btnLoading) {\n      this.close();\n    }\n  },\n\n  _onClickClose: function () {\n    if (!this.props.btnLoading) {\n      this.close();\n    }\n  },\n\n  _getFooter: function() {\n    let closeLink = this._getCloseLink(),\n        hint = this._getHint();\n\n    return (\n      <footer className=\"aui-dialog2-footer\">\n        <div className=\"aui-dialog2-footer-actions\">\n          <div className=\"hc-dialog-btn-spinner\">\n            <Spinner spin={this.props.btnLoading} size=\"small\" color={AppConfig.spinner_colors[\"light\"]}/>\n          </div>\n          {this.props.dialogFooterButton()}\n          {this.props.dialogFooterLinks()}\n          {closeLink}\n        </div>\n        {hint}\n      </footer>\n    );\n  },\n\n  render: function() {\n    var closeBtn = this._getCloseBtn(),\n        footer = this.props.showFooter ? this._getFooter() : null,\n        title = this._getTitle(),\n        secondaryHeader = this._getSecondaryHeader();\n\n    var classes = cx({\n      'aui-layer': true,\n      'aui-dialog2': true,\n      'aui-dialog2-warning': this.props.isWarning\n    }, `aui-dialog2-${this.props.size}`);\n\n    return (\n      <section role=\"dialog\" id={this.props.dialogId} className={classes} style={this._getSectionStyle()}\n        aria-hidden={!this.state.dialogVisible}>\n        <header className=\"aui-dialog2-header\">\n          {title}\n          {secondaryHeader}\n          {closeBtn}\n        </header>\n        <div className=\"aui-dialog2-content hc-dialog-content\" style={this._getDialogContentStyle()}>\n          {this.props.dialogBody()}\n        </div>\n        {footer}\n      </section>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/modal_dialog/modal_dialog.js\n **/","import ModalDialogStore from 'stores/modal_dialog_store';\n\nexport default {\n\n  getInitialState: function() {\n    return ModalDialogStore.getAll();\n  },\n\n  _onChange: function() {\n    if (this.isMounted()) {\n      this.setState(ModalDialogStore.getAll());\n    }\n  },\n\n  componentWillMount: function() {\n    ModalDialogStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    ModalDialogStore.off('change', this._onChange);\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/modal_dialog_visibility_mixin.js\n **/","import NavPanelContent from './nav_panel_content';\nimport cx from 'classnames';\nimport strings from 'strings/dialog_strings';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: 'NavPanel',\n\n  propTypes: {\n    children: (props, propName) => {\n      if (props[propName].length < 2) {\n        return new Error('NavPanel component requires more than one tab (child components)');\n      }\n      if (!_.every(props[propName], (child) => child.props.name)) {\n        return new Error('All NavPanel child components *must* have a name attribute');\n      }\n    }\n  },\n\n  _onClick(e) {\n    var name = e.target.getAttribute('name');\n    if (this.state.activeTab !== name) {\n      // Only send analytics event if the activeTab has changed\n      this._handleNavPanelAnalytics(name);\n    }\n    this.setState({\n      activeTab: name\n    });\n  },\n\n  getInitialState() {\n    var activeTab = {activeTab: this.props.children[0].props.name};\n\n    if (this.props.defaultTab && _.find(this.props.children, {props: {name: this.props.defaultTab}})) {\n      activeTab = {activeTab: this.props.defaultTab};\n    }\n\n    return activeTab;\n  },\n\n  _handleNavPanelAnalytics(name) {\n    switch (name) {\n      case strings.general:\n        AnalyticsActions.generalSettingsPanelSelected();\n        break;\n      case strings.notifications:\n        AnalyticsActions.notificationsSettingsPanelSelected();\n        break;\n      case strings.appearance:\n        AnalyticsActions.appearanceSettingsPanelSelected();\n        break;\n    }\n  },\n\n  render() {\n    var menuItems = React.Children.map(this.props.children, (child) => {\n      if (child.type.displayName === 'NavPanelContent') {\n\n        var classes = cx({\n          'aui-nav-selected': this.state.activeTab === child.props.name\n        });\n\n        return (\n          <li role=\"tab\" className={classes} selected={this.state.activeTab === child.props.name} key={_.uniqueId()}>\n            <a onClick={this._onClick}\n                    name={child.props.name}>{child.props.name}</a>\n          </li>\n        );\n      }\n    });\n    var tabPanels = React.Children.map(this.props.children, (child) => {\n      if (child.type.displayName === 'NavPanelContent') {\n        return (\n          <NavPanelContent name={child.props.name} selected={this.state.activeTab === child.props.name}\n                           key={_.uniqueId()} lozenge_text={child.props.lozenge_text}>{child.props.children}</NavPanelContent>\n        );\n      }\n    });\n\n    return (\n      <div {...this.props} className=\"hc-nav-panel aui-group\">\n        <div className=\"aui-item aui-navgroup aui-navgroup-vertical\">\n          <ul className=\"aui-nav\" data-skate-ignore>\n            {menuItems}\n          </ul>\n        </div>\n        <div className=\"aui-item\">\n          {tabPanels}\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/nav_panel/nav_panel.js\n **/","module.exports = React.createClass({\n\n  displayName: \"NavPanelContent\",\n\n  _getTitle: function () {\n    var title;\n    if (this.props.lozenge_text) {\n      title = (\n        <h2>\n          {this.props.name}\n          <span className=\"aui-lozenge aui-lozenge-current\">{this.props.lozenge_text}</span>\n        </h2>\n      );\n    } else {\n      title = <h2>{this.props.name}</h2>;\n    }\n    return title;\n  },\n\n  render: function() {\n    var title = this._getTitle();\n\n    return (\n      <div className=\"nav-panel-content\" aria-hidden={!this.props.selected} aria-labeledby={this.props.tabId}>\n        {title}\n        {this.props.children}\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/nav_panel/nav_panel_content.js\n **/","var AuiCheckboxField = require(\"components/common/aui/form/aui_checkbox_field\");\nvar PreferencesStore = require(\"stores/preferences_store\");\nvar PreferencesKeys = require(\"keys/preferences_keys\");\nvar ClientPreferencesKeys = require(\"keys/client_preferences_keys\");\nvar AnalyticsActions = require(\"actions/analytics_actions\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"PreferenceCheckboxField\",\n\n  getDefaultProps: function() {\n    return {\n      isReverse: false\n    };\n  },\n\n  _isDefaultChecked: function() {\n    var isChecked = PreferencesStore.get(this.props.id);\n\n    if (this.props.isReverse) {\n      isChecked = !isChecked;\n    }\n\n    return isChecked;\n  },\n\n  _handleAnalytics: function () {\n    switch (this.props.id) {\n      case ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT:\n        this._handleGifsClicked();\n        break;\n      case PreferencesKeys.NOTIFY_FOR_PRIVATE_ROOM:\n        this._handlePrivateRoomNotificationClicked();\n        break;\n      case PreferencesKeys.NOTIFY_FOR_ROOM:\n        this._handleOpenRoomNotificationClicked();\n        break;\n    }\n  },\n\n  _handleGifsClicked: function () {\n    var old_val = PreferencesStore.get(this.props.id),\n        new_val = !old_val;\n    AnalyticsActions.hideGifsClicked(old_val, new_val);\n  },\n\n  _handlePrivateRoomNotificationClicked: function () {\n    var old_val = PreferencesStore.get(this.props.id),\n        new_val = !old_val;\n    AnalyticsActions.privateRoomNotificationClicked(old_val, new_val);\n  },\n\n  _handleOpenRoomNotificationClicked: function () {\n    var old_val = PreferencesStore.get(this.props.id),\n        new_val = !old_val;\n    AnalyticsActions.openRoomNotificationClicked(old_val, new_val);\n  },\n\n  render: function() {\n    return (\n      <AuiCheckboxField {...this.props} onChange={this._handleAnalytics} defaultChecked={this._isDefaultChecked()} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/settings_dialog/preference_checkbox_field.js\n **/","var AuiCheckbox = require(\"./aui_checkbox\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"AuiCheckBoxField\",\n\n  render: function() {\n    return (\n      <div className=\"checkbox\">\n        <AuiCheckbox key={_.uniqueId()} {...this.props} />\n        <label htmlFor={this.props.id} key={_.uniqueId()}>{this.props.label}</label>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_checkbox_field.js\n **/","export default React.createClass({\n\n  displayName: \"AuiCheckbox\",\n\n  propTypes: {\n    defaultChecked: React.PropTypes.bool,\n    onChange: React.PropTypes.func\n  },\n\n  getDefaultProps: function() {\n    return {\n      value: true,\n      defaultChecked: false,\n      onChange: () => {}\n    };\n  },\n\n  render: function() {\n    let props = _.clone(this.props);\n        props.name = this.props.name || this.props.id;\n    return (\n      <input type=\"checkbox\" className=\"checkbox\" {...props} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_checkbox.js\n **/","import AuiRadio from 'components/common/aui/form/aui_radio';\nimport PreferencesStore from 'stores/preferences_store';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\nimport strings from 'strings/dialog_strings';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nmodule.exports = React.createClass({\n\n  displayName: \"PreferenceRadioField\",\n\n  propTypes: {\n    options: React.PropTypes.array,\n    label: React.PropTypes.string\n  },\n\n  getDefaultProps: function() {\n    return {\n      options: []\n    };\n  },\n\n  _isDefaultChecked: function(val) {\n    return val === PreferencesStore.get(this.props.id);\n  },\n\n  _handleAnalytics: function (option) {\n    switch (this.props.id) {\n      case PreferencesKeys.THEME:\n        this._handleThemeClicked(option);\n        break;\n      case PreferencesKeys.DENSITY:\n        this._handleDensityClicked(option);\n        break;\n      case PreferencesKeys.CHAT_VIEW:\n        this._handleChatViewClicked(option);\n        break;\n      case PreferencesKeys.NAME_DISPLAY:\n        this._handleNameDisplayClicked(option);\n        break;\n      case ClientPreferencesKeys.ANIMATED_AVATARS:\n        this._handleAnimatedAvatarsClicked(option);\n        break;\n      }\n  },\n\n  _getCurrentPref: function () {\n    return PreferencesStore.get(this.props.id);\n  },\n\n  _handleThemeClicked: function (option) {\n    var currentSelection = this._getCurrentPref();\n    if (option === \"light\" && option !== currentSelection) {\n      AnalyticsActions.lightThemeSelected();\n    } else if (option === \"dark\" && option !== currentSelection) {\n      AnalyticsActions.darkThemeSelected();\n    }\n  },\n\n  _handleDensityClicked: function (option) {\n    var currentSelection = this._getCurrentPref();\n    if (option === \"normal\" && option !== currentSelection) {\n      AnalyticsActions.normalTextDensitySelected();\n    } else if (option === \"tighter\" && option !== currentSelection) {\n      AnalyticsActions.tighterTextDensitySelected();\n    }\n  },\n\n  _handleChatViewClicked: function (option) {\n    var currentSelection = this._getCurrentPref();\n    if (option === \"classic\" && option !== currentSelection) {\n      AnalyticsActions.classicChatViewSelected();\n    } else if (option === \"classic_neue\" && option !== currentSelection) {\n      AnalyticsActions.classicNeueChatViewSelected();\n    }\n  },\n\n  _handleNameDisplayClicked: function (option) {\n    var currentSelection = this._getCurrentPref();\n    if (option === \"names\" && option !== currentSelection) {\n      AnalyticsActions.fullNamesNameDisplaySelected();\n    } else if (option === \"mentions\" && option !== currentSelection) {\n      AnalyticsActions.mentionNamesNameDisplaySelected();\n    }\n  },\n\n  _handleAnimatedAvatarsClicked: function (option) {\n    var currentSelection = this._getCurrentPref();\n    if (option === \"animated\" && option !== currentSelection) {\n      AnalyticsActions.animatedAvatarsSelected();\n    } else if (option === \"static\" && option !== currentSelection) {\n      AnalyticsActions.staticAvatarsSelected();\n    }\n  },\n\n  render: function () {\n    return (\n      <fieldset className=\"group\">\n        <legend>\n          <span>{this.props.label}</span>\n        </legend>\n        {\n          this.props.options.map((option) => {\n              let key = `radio-${this.props.id}-${option}`;\n              return <AuiRadio\n                val={option}\n                id={option}\n                key={key}\n                label={strings[option]}\n                name={this.props.id}\n                defaultChecked={this._isDefaultChecked(option)}\n                onChange={this._handleAnalytics.bind(this, option)} />;\n          })\n        }\n      </fieldset>\n\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/settings_dialog/preference_radio_field.js\n **/","var AuiInput = require(\"./aui_input\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"AuiRadio\",\n\n  _getDescription: function() {\n    var desc = false;\n    if (this.props.description) {\n      if (this.props.description_is_link && this.props.description_link_action) {\n        desc = (\n          <div className=\"description\">\n            <a onClick={this.props.description_link_action.bind(this)}>{this.props.description}</a>\n          </div>\n        );\n      } else {\n        desc = (\n          <div className=\"description\">{this.props.description}</div>\n        );\n      }\n    }\n    return desc;\n  },\n\n  _getIcon: function() {\n    if (this.props.icon) {\n      var iconClass = `aui-icon hipchat-icon-small icon-${this.props.icon}`;\n      return (\n        <span className={iconClass}>{this.props.icon}</span>\n      );\n    }\n  },\n\n\n\n  render: function() {\n    var name = this.props.name || this.props.id;\n    var description = this._getDescription();\n    var classNames = this.props.className || \"\";\n    var icon = this._getIcon();\n\n    return (\n      <div className={`radio ${classNames}`}>\n        <AuiInput type=\"radio\"\n                  ref=\"radio\"\n                  id={this.props.id}\n                  name={name}\n                  value={this.props.value}\n                  checked={this.props.checked}\n                  defaultChecked={this.props.defaultChecked}\n                  onChange={this.props.onChange}/>\n        <label htmlFor={this.props.id}>\n          {icon}\n          {this.props.label}\n        </label>\n        {description}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_radio.js\n **/","module.exports = React.createClass({\n\n  displayName: \"AuiInput\",\n\n  propTypes: {\n    onChange: React.PropTypes.func,\n    onFocus: React.PropTypes.func,\n    onBlur: React.PropTypes.func\n  },\n\n  getDefaultProps: function() {\n    return {\n      type: \"text\",\n      onChange: () => {},\n      onFocus: () => {},\n      onBlur: () => {}\n    };\n  },\n\n  focus: function() {\n    ReactDOM.findDOMNode(this.refs.input).focus();\n  },\n\n  render: function() {\n\n    var name = this.props.name || this.props.id;\n    var classes = (this.props.size) ? this.props.type + \" \" + this.props.size : this.props.type;\n\n    return (\n      <input {...this.props} ref=\"input\" className={classes} name={name} />\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_input.js\n **/","module.exports = React.createClass({\n\n  displayName: \"AuiFormInlineFieldGroup\",\n\n  getDefaults: function() {\n    return {\n      className: ''\n    };\n  },\n\n  render: function() {\n    return (\n      <div className={`inline-field-group ${this.props.className}`}>\n        {this.props.children}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_form_inline_fieldgroup.js\n **/","var AuiFormFieldGroup = require(\"./aui_form_fieldgroup\"),\n    AuiInput = require(\"./aui_input\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"AuiInputFieldGroup\",\n\n  focus: function() {\n    this.refs.input.focus();\n  },\n\n  render: function() {\n    return (\n      <AuiFormFieldGroup {...this.props}>\n        <AuiInput ref=\"input\" {...this.props} />\n      </AuiFormFieldGroup>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_input_fieldgroup.js\n **/","module.exports = React.createClass({\n\n  displayName: \"AuiFormFieldGroup\",\n\n  _getDescription: function () {\n    if (this.props.description) {\n      return (\n        <div className=\"description\">{this.props.description}</div>\n      );\n    }\n  },\n\n  _getRequiredIcon: function () {\n    if (this.props.required) {\n      return (\n        <span className=\"aui-icon icon-required\"> required</span>\n      );\n    }\n  },\n\n  getError: function() {\n    if (this.props.error) {\n      return (\n        <div className=\"error\">{this.props.error}</div>\n      );\n    }\n  },\n\n  render: function() {\n    var name = this.props.name || this.props.id;\n    var description = this._getDescription();\n    var requiredIcon = this._getRequiredIcon();\n    var error = this.getError();\n    var classes = \"field-group\";\n\n    if (this.props.labelPosition) {\n      classes += \" label-position-\" + this.props.labelPosition;\n    }\n\n    return (\n      <div className={classes}>\n        <label htmlFor={name}>\n          {this.props.label}\n          {requiredIcon}\n        </label>\n        {this.props.children}\n        {description}\n        {error}\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_form_fieldgroup.js\n **/","import ClientPreferencesKeys from 'keys/client_preferences_keys';\nimport strings from 'strings/dialog_strings';\nimport PreferencesActions from 'actions/preferences_actions';\nimport AuiFormInlineFieldGroup from 'components/common/aui/form/aui_form_inline_fieldgroup';\nimport AuiCheckbox from 'components/common/aui/form/aui_checkbox';\nimport cx from 'classnames';\n\nexport default React.createClass({\n  displayName: 'MacDockBounceFieldType',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    bounceIcon: React.PropTypes.bool.isRequired,\n    bounceOnce: React.PropTypes.bool.isRequired\n  },\n\n  componentDidMount() {\n    AJS.$(this.refs.dropdown)\n      .auiSelect2({\n        minimumResultsForSearch: Infinity\n      })\n      .on('change.mac-dock-bounce', this._onBounceOnceChange);\n  },\n\n  componentWillUnmount() {\n    AJS.$(this.refs.dropdown).off('.mac-dock-bounce').auiSelect2('destroy');\n    AJS.$('#select2-drop-mask').remove();\n    AJS.$('.select2-sizer').remove();\n  },\n\n  _onBounceIconChange(e) {\n    let data = {\n      bounceIcon: e.target.checked\n    };\n\n    // If we're unsetting the 'bounceIcon' preference, also set 'bounceOnce'\n    // back to the default.\n    if (!data.bounceIcon) {\n      data.bounceOnce = true;\n    }\n\n    e.stopPropagation();\n\n    PreferencesActions.savePreferences(data);\n  },\n\n  _onBounceOnceChange(e) {\n    let data = {\n      bounceOnce: e.target.value === 'once'\n    };\n\n    e.stopPropagation();\n\n    PreferencesActions.savePreferences(data);\n  },\n\n  render() {\n    let { bounceIcon, bounceOnce } = this.props,\n        values = {\n          once: 'once',\n          forever: 'forever'\n        },\n        defaultDropDownValue = bounceOnce ? values.once : values.forever,\n        dropDownDisabled = !bounceIcon,\n        classes = cx({\n          'mac-dock-bounce-preference': true,\n          'checkbox-select2-field': true,\n          'disabled': dropDownDisabled\n        });\n\n    return (\n      <AuiFormInlineFieldGroup className={classes} key={ClientPreferencesKeys.BOUNCE_ICON}>\n        <div className=\"checkbox\">\n          <AuiCheckbox id={ClientPreferencesKeys.BOUNCE_ICON}\n                       defaultChecked={bounceIcon}\n                       onClick={this._onBounceIconChange}/>\n          <label htmlFor={ClientPreferencesKeys.BOUNCE_ICON}>\n            {strings.bounce_icon}\n          </label>\n          <select defaultValue={defaultDropDownValue}\n                  ref=\"dropdown\"\n                  disabled={dropDownDisabled}\n                  aria-disabled={dropDownDisabled}>\n            <option value={values.once}>\n              {strings.bounce_icon_once}\n            </option>\n            <option value={values.forever}>\n              {strings.bounce_icon_forever}\n            </option>\n          </select>\n        </div>\n      </AuiFormInlineFieldGroup>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/settings_dialog/mac_dock_bounce_field.js\n **/","import strings from 'strings/dialog_strings';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport PreferencesActions from 'actions/preferences_actions';\nimport AuiFormInlineFieldGroup from 'components/common/aui/form/aui_form_inline_fieldgroup';\nimport AuiCheckbox from 'components/common/aui/form/aui_checkbox';\nimport cx from 'classnames';\n\nconst MESSAGE_SOUNDS = '1';\nconst VIDEO_SOUNDS = '2';\nconst ALL_SOUNDS = '3';\n\nexport default React.createClass({\n\n  displayName: 'SoundsField',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    soundsEnabled: React.PropTypes.bool.isRequired,\n    messageSounds: React.PropTypes.bool.isRequired,\n    videoSounds: React.PropTypes.bool.isRequired\n  },\n\n  componentDidMount() {\n    AJS.$(this.refs.dropdown)\n      .auiSelect2({\n        minimumResultsForSearch: Infinity\n      })\n      .on('change', this._onSoundPrefChange);\n  },\n\n  componentWillUnmount() {\n    AJS.$(this.refs.dropdown).off('change').auiSelect2('destroy');\n    AJS.$('#select2-drop-mask').remove();\n    AJS.$('.select2-sizer').remove();\n  },\n\n  _onSoundsEnabledChange(e) {\n    e.stopPropagation();\n    PreferencesActions.savePreferences({\n      [PreferencesKeys.SOUNDS_ENABLED]: !this.props.soundsEnabled\n    });\n  },\n\n  _onSoundPrefChange(e) {\n    var selected = e.target.value;\n    e.stopPropagation();\n\n    PreferencesActions.savePreferences({\n      [PreferencesKeys.MESSAGE_SOUNDS]: selected === ALL_SOUNDS || selected === MESSAGE_SOUNDS,\n      [PreferencesKeys.VIDEO_SOUNDS]: selected === ALL_SOUNDS || selected === VIDEO_SOUNDS\n    });\n  },\n\n  render() {\n    var { soundsEnabled, messageSounds, videoSounds } = this.props,\n        message_sounds_selected = messageSounds && !videoSounds ? MESSAGE_SOUNDS : false,\n        video_sounds_selected = !messageSounds && videoSounds ? VIDEO_SOUNDS : false,\n        all_sounds_selected = messageSounds && videoSounds ? ALL_SOUNDS : false,\n        defaultDropDownValue = all_sounds_selected || video_sounds_selected || message_sounds_selected,\n        dropDownDisabled = !soundsEnabled,\n        classes = cx({\n          'sounds-preference': true,\n          'checkbox-select2-field': true,\n          'disabled': dropDownDisabled\n        });\n\n    return (\n      <AuiFormInlineFieldGroup className={classes} key={PreferencesKeys.SOUNDS_ENABLED}>\n        <div className='checkbox'>\n          <AuiCheckbox\n            id={PreferencesKeys.SOUNDS_ENABLED}\n            defaultChecked={soundsEnabled}\n            onClick={this._onSoundsEnabledChange}/>\n          <label className='select-title' htmlFor={PreferencesKeys.SOUNDS_ENABLED}>{strings.play_sound_part_1}</label>\n          <select\n            defaultValue={defaultDropDownValue}\n            ref='dropdown'\n            disabled={dropDownDisabled}\n            aria-disabled={dropDownDisabled}>\n              <option value={MESSAGE_SOUNDS}>{strings.message_notifications}</option>\n              <option value={VIDEO_SOUNDS}>{strings.video_notifications}</option>\n              <option value={ALL_SOUNDS}>{strings.message_and_video_notifications}</option>\n          </select>\n          <label className='select-title' htmlFor={PreferencesKeys.SOUNDS_ENABLED}>{strings.play_sound_part_2}</label>\n        </div>\n      </AuiFormInlineFieldGroup>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/settings_dialog/sounds_field.js\n **/","import AuiFieldSet from \"components/common/aui/form/aui_form_fieldset\";\nimport AuiRadio from \"components/common/aui/form/aui_radio\";\nimport DialogActions from \"actions/dialog_actions\";\nimport formsStrings from 'strings/forms_strings';\nimport dialogStrings from 'strings/dialog_strings';\nimport PreferencesStore from \"stores/preferences_store\";\nimport CurrentUserStore from \"stores/current_user_store\";\nimport AnalyticsActions from 'actions/analytics_actions';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomNotificationsForm\",\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _getNotificationSettings: function() {\n    return {\n      level: PreferencesStore.getGlobalNotificationSetting()\n    };\n  },\n\n  _saveNotificationSettings: function(newSettings) {\n    PreferencesStore.setGlobalNotificationSetting(newSettings.level);\n  },\n\n  _onChange: function(event){\n    var newValue = event.target.value.trim();\n\n    // if they've actually changed the value, fire an analytics event\n    if(this.state.level !== newValue) {\n      AnalyticsActions.globalNotificationLevelChanged(this.state.level, newValue);\n    }\n    this.setState({ level: newValue });\n    this._saveNotificationSettings({level: newValue});\n  },\n\n  _getState: function(){\n    var settings = this._getNotificationSettings(),\n        notification_level = _.get(settings, \"level\", \"global\");\n    return {\n      mention: CurrentUserStore.get('mention') || '',\n      level: notification_level\n    };\n  },\n\n  _showSettingsDialog: function () {\n    DialogActions.showSettingDialog();\n  },\n\n  _closeDialog: function () {\n    DialogActions.closeDialog();\n  },\n\n  render: function () {\n    return (\n      <form id=\"room-notifications-form\" ref=\"form\" className=\"aui per-room-notifs\" onChange={this._onChange}>\n        <h3>{dialogStrings.notify_rooms_header}</h3>\n        <AuiFieldSet ref=\"override-opts\">\n          <AuiRadio id=\"notif-loud\"\n                    name=\"notification\"\n                    defaultChecked={this.state.level === \"loud\"}\n                    value=\"loud\"\n                    icon=\"volume-loud\"\n                    label={formsStrings.label.loud}\n                    description={formsStrings.description.notif_loud} />\n          <AuiRadio id=\"notif-normal\"\n                    name=\"notification\"\n                    defaultChecked={this.state.level === \"normal\"}\n                    value=\"normal\"\n                    icon=\"volume-normal\"\n                    label={formsStrings.label.normal}\n                    description={formsStrings.description.notif_normal(this.state.mention)} />\n          <AuiRadio id=\"notif-quiet\"\n                    name=\"notification\"\n                    defaultChecked={this.state.level === \"quiet\"}\n                    value=\"quiet\"\n                    icon=\"volume-quiet\"\n                    label={formsStrings.label.quiet}\n                    description={formsStrings.description.notif_quiet(this.state.mention)} />\n        </AuiFieldSet>\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/global_room_notifications_form.js\n **/","module.exports = React.createClass({\n\n  displayName: \"AuiFormFieldSet\",\n\n  render: function() {\n    var classNames = this.props.className || \"\";\n    return (\n      <fieldset className={`group ${classNames}`}>\n        <legend><label htmlFor={this.props.id}>{this.props.label}</label></legend>\n        {this.props.children}\n      </fieldset>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_form_fieldset.js\n **/","import AuiRadio from 'components/common/aui/form/aui_radio';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport PreferencesActions from 'actions/preferences_actions';\nimport strings from 'strings/dialog_strings';\n\nexport default React.createClass({\n\n  displayName: 'DoNotDisturbForm',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    notifyForVideo: React.PropTypes.bool.isRequired,\n    notifyAlways: React.PropTypes.bool.isRequired\n  },\n\n  _onChange(e) {\n    var notify_always = e.target.id === PreferencesKeys.NOTIFY_WHEN_DND,\n        notify_for_video = e.target.id === PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND;\n\n    e.stopPropagation();\n    PreferencesActions.savePreferences({\n      [PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND]: notify_for_video,\n      [PreferencesKeys.NOTIFY_WHEN_DND]: notify_always\n    });\n  },\n\n  render() {\n    var true_dnd = !this.props.notifyForMessages && !this.props.notifyForMessages;\n\n    return (\n      <form className='aui' onChange={this._onChange}>\n        <h3>{strings.dnd_header}</h3>\n        <fieldset>\n          <AuiRadio\n            id='trueDND'\n            name='dnd_setting'\n            defaultChecked={true_dnd}\n            label={strings.do_not_notify_when_dnd} />\n          <AuiRadio\n            id={PreferencesKeys.NOTIFY_FOR_VIDEO_WHEN_DND}\n            name='dnd_setting'\n            defaultChecked={this.props.notifyForVideo}\n            label={strings.notify_for_video_when_dnd} />\n          <AuiRadio\n            id={PreferencesKeys.NOTIFY_WHEN_DND}\n            name='dnd_setting'\n            defaultChecked={this.props.notifyAlways}\n            label={strings.notify_when_dnd} />\n        </fieldset>\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/do_not_disturb_form.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    InviteUsersForm = require(\"components/forms/invite_user_form\"),\n    strings = require('strings/dialog_strings'),\n    RoomsNavStore = require(\"stores/rooms_nav_store\"),\n    utils = require(\"helpers/utils\"),\n    ieSubmitMixin = require('components/mixins/ie_submit_mixin'),\n    DialogVisibilityMixin = require('components/mixins/modal_dialog_visibility_mixin');\n\nmodule.exports = React.createClass({\n\n  displayName: \"InviteUserDialog\",\n\n  mixins: [ieSubmitMixin, DialogVisibilityMixin],\n\n  componentDidMount: function () {\n    RoomsNavStore.on(['change'], this._onStoreChange);\n  },\n\n  componentWillUnmount: function () {\n    RoomsNavStore.off(['change'], this._onStoreChange);\n  },\n\n  getInitialState: function () {\n    return this._getActiveChatState();\n  },\n\n  _getActiveChatState: function () {\n    return {\n      active_chat: RoomsNavStore.get(\"active_chat\"),\n      rooms: RoomsNavStore.get(\"rooms\")\n    };\n  },\n\n  _onStoreChange: function () {\n    this.setState(this._getActiveChatState());\n  },\n\n  _dialogTitle: function () {\n    return strings.invite_users(utils.room.get_room_name(_.keyBy(this.state.rooms.rooms, 'jid'), this.state.active_chat));\n  },\n\n  _dialogBody: function () {\n    if (utils.jid.is_room(this.state.active_chat)) {\n      let type = this.state.dialogData ? this.state.dialogData.type : false;\n      return <InviteUsersForm type={type} dialogVisible={this.state.dialogVisible} room_jid={this.state.active_chat} invite_user_jids={this.props.invite_users}/>;\n    }\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button form=\"invite-users-form\" className=\"aui-button aui-button-primary\" type=\"submit\" onClick={this.ieSubmit}>Invite people</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"invite-users-dialog\"\n                   title={this._dialogTitle()}\n                   dialogBody={this._dialogBody}\n                   dialogFooterButton={this._dialogFooterButton}\n                   closeLinkText=\"Cancel\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/invite_user_dialog/invite_user_dialog.js\n **/","import AuiSelect2FieldGroup from \"components/common/aui/form/aui_select2_fieldgroup\";\nimport AuiTextAreaFieldGroup from \"components/common/aui/form/aui_textarea_fieldgroup\";\nimport FlagActions from \"actions/flag_actions\";\nimport FormActions from \"actions/form_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FormsStore from \"stores/forms_store\";\nimport CurrentUserStore from \"stores/current_user_store\";\nimport strings from 'strings/forms_strings';\nimport FormErrors from \"strings/form_error_strings\";\nimport utils from \"helpers/utils\";\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport AnalyticsKeys from 'keys/analytics_keys';\nimport CommonStrings from 'strings/common_strings';\nimport UserUtils from 'helpers/user_utils';\n\nconst NO_MATCHES_FOUND_LINK_ID = 'invite-users-select-no-matches-found';\n\nexport default React.createClass({\n\n  displayName: \"InviteUsersForm\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  componentDidMount: function() {\n    FormsStore.on(['change:activeChatParticipants', 'change:users', 'change:web_server'], this._onChange);\n    this.shouldAutoFocus = true;\n    document.addEventListener('click', this._onDocumentClick, true);\n  },\n\n  componentDidUpdate: function() {\n    if (this.props.dialogVisible && this.shouldAutoFocus) {\n      this._focusInput();\n      this.shouldAutoFocus = false;\n    }\n  },\n\n  componentWillUnmount: function() {\n    FormsStore.off(['change:activeChatParticipants', 'change:users', 'change:web_server'], this._onChange);\n    document.removeEventListener('click', this._onDocumentClick, true);\n  },\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _onChange: function(){\n    this.setState(this._getState());\n  },\n\n  _getState: function(){\n    return {\n      user_is_admin: FormsStore.get(\"user_is_admin\"),\n      invite_url: FormsStore.get(\"invite_url\"),\n      web_server: FormsStore.get(\"web_server\"),\n      users: FormsStore.get(\"users\"),\n      jid: CurrentUserStore.get('jid'),\n      activeChatParticipants: FormsStore.get(\"activeChatParticipants\"),\n      errors: _.get(this, 'state.errors', {})\n    };\n  },\n\n  _onDocumentClick(evt){\n    if (evt.target.id === NO_MATCHES_FOUND_LINK_ID){\n      if (evt.target.getAttribute('target') === '_blank'){\n        evt.stopPropagation();\n        return;\n      }\n      evt.preventDefault();\n      DialogActions.showInviteTeammatesDialog({ type: AnalyticsKeys.INVITE_USERS_DIALOG, default_text: evt.target.getAttribute('data-term')});\n      AnalyticsActions.inviteTeamClickedEvent(AnalyticsKeys.INVITE_USERS_DIALOG);\n    }\n  },\n\n  _rosterForSelect: function () {\n    let nonGuestUsers = utils.roster.get_non_guest_users(this.state.users);\n\n    return utils.roster.format_for_select2(_.union(this.state.jid, this.state.activeChatParticipants), nonGuestUsers);\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n    var form_inputs = $(ReactDOM.findDOMNode(this.refs.form)).serializeArray(),\n        users = form_inputs[0].value,\n        msg = utils.strings.stripHiddenCharacters(form_inputs[1].value.trim()).slice(0, 250),\n        promises = [],\n        errors;\n\n    errors = this._validate(users, msg);\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n    } else {\n      promises.push(this._inviteUsers(users.split(','), msg));\n      this._handlePromises(promises);\n      this._closeDialog();\n    }\n  },\n\n  _validate: function (users, msg) {\n    if (!users) {\n      return {\n        user: FormErrors.invite_users_form.no_users\n      };\n    }\n  },\n\n  _inviteUsers: function (user_jids, msg) {\n    return new Promise( (resolve) => {\n      FormActions.inviteUsers({\n        room_jid: this.props.room_jid,\n        user_jids: user_jids,\n        reason: msg\n      });\n      resolve(user_jids);\n    });\n  },\n\n  _handlePromises: function (promises) {\n    Promise.all(promises).then(function(data) {\n      this._throwFlagSuccess();\n      if (this.props.type){\n         AnalyticsActions.inviteUsersToRoomSent(this.props.type, data[0].length);\n      }\n    }.bind(this), function() {\n      this._throwFlagError();\n    }.bind(this));\n  },\n\n  _throwFlagSuccess: function () {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: strings.success.users_invited,\n      close: \"auto\"\n    });\n  },\n\n  _throwFlagError: function () {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: this._flagErrorActions(strings.fail.invite_fail),\n      close: \"manual\"\n    });\n  },\n\n  _flagErrorActions: function (error_msg) {\n    return () => (\n        <div>\n          <p className=\"hc-message-body\">{error_msg}</p>\n          <ul className=\"aui-nav-actions-list\">\n            <li><a onClick={this._flagActionClick} href=\"#\">strings.button.try_again</a></li>\n          </ul>\n        </div>\n    );\n  },\n\n  _flagActionClick: function (e) {\n    e.preventDefault();\n    var flag_index = $(e.target).closest(\".hc-flag\").data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _showDialog: function () {\n    DialogActions.showInviteUsersDialog();\n  },\n\n  _closeDialog: function () {\n    DialogActions.closeDialog();\n  },\n\n  _focusInput: function () {\n    // Can't use the ref here, because the Select2 plugin has it's own abstraction.\n    ReactDOM.findDOMNode(this).querySelector('input[type=text]:first-of-type').focus();\n  },\n\n  _selectFormatNoMatches: function(term) {\n\n    let link = '';\n\n    if (this.state.user_is_admin || this.state.invite_url){\n\n      link = `<a href=\"#\" data-term=\"${term}\" id=\"${NO_MATCHES_FOUND_LINK_ID}\" className=\"aui-inline-dialog-trigger\">${CommonStrings.buttons.invite_team_in_invite_users_dialog}</a>`;\n\n      if (!this.state.invite_url) {\n        link = `<a href=\"https://${this.state.web_server}/admin\" target=\"_blank\" id=\"${NO_MATCHES_FOUND_LINK_ID}\" className=\"aui-inline-dialog-trigger\">${CommonStrings.buttons.invite_team_in_invite_users_dialog}</a>`;\n      }\n    }\n\n    return `${CommonStrings.no_one_found}. ${link}`;\n  },\n\n  render: function () {\n    var errors = this.state.errors;\n    return (\n      <form id=\"invite-users-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <AuiSelect2FieldGroup\n          id=\"invite-users-people\"\n          label={strings.label.these_people}\n          multiple={true}\n          data={this._rosterForSelect()}\n          selected={this.props.invite_user_jids}\n          sortResults={(results, ctx, search) => UserUtils.sort_users(results, search.term, 'text')}\n          error={errors.user}\n          ref=\"user_select\"\n          formatNoMatches = {this._selectFormatNoMatches}\n        />\n        <AuiTextAreaFieldGroup\n          id=\"invite-users-message\"\n          label={strings.label.message}\n          rows=\"5\"\n          maxLength=\"250\"\n          ref=\"invite_message\" />\n      </form>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/invite_user_form.js\n **/","var AuiFormFieldGroup = require(\"./aui_form_fieldgroup\"),\n    AuiSelect2Input = require(\"./aui_select2_input\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"AuiSelect2FieldGroup\",\n\n  render: function() {\n    let {\n      id, size, name,\n      placeholder, multiple, selected,\n      maxDisplayedItems, data, formatNoMatches,\n      sortResults\n    } = this.props;\n\n    let select2Options = {\n      id, size, name,\n      placeholder, multiple, selected,\n      maxDisplayedItems, data, formatNoMatches\n    };\n\n    if (sortResults) {\n      select2Options.sortResults = sortResults;\n    }\n\n    return (\n      <AuiFormFieldGroup {...this.props}>\n        <AuiSelect2Input {...select2Options}/>\n      </AuiFormFieldGroup>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_select2_fieldgroup.js\n **/","import AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: \"AuiSelect2Input\",\n\n  propTypes: {\n    multiple: React.PropTypes.bool,\n    placeholder: React.PropTypes.string,\n    data: React.PropTypes.array,\n    sortResults: React.PropTypes.func,\n    maxDisplayedItems: React.PropTypes.number,\n    selected: React.PropTypes.array\n  },\n\n  componentDidMount: function () {\n    this._setupSelect();\n  },\n\n  componentWillUnmount: function() {\n    AJS.$(ReactDOM.findDOMNode(this)).auiSelect2(\"destroy\");\n    AJS.$(\"#select2-drop-mask\").remove();\n    AJS.$(\".select2-sizer\").remove();\n  },\n\n  shouldComponentUpdate: function(nextProps) {\n    return !_.isEqual(nextProps, this.props);\n  },\n\n  componentDidUpdate(){\n    this._setupSelect();\n  },\n\n  getDefaultProps: function() {\n    return {\n      multiple: false,\n      placeholder: \"\",\n      data: [],\n      sortResults: (results) => results.slice(0, this.maxDisplayedItems),\n      maxDisplayedItems: AppConfig.select2_max_displayed_items,\n      selected: [],\n      formatNoMatches: function() {\n        return 'No matches found.';\n      }\n    };\n  },\n\n  _setupSelect: function () {\n    var options = this._getSelectOptions();\n    AJS.$(ReactDOM.findDOMNode(this)).auiSelect2(options);\n    if(options.selected && options.selected.length > 0){\n      AJS.$(ReactDOM.findDOMNode(this)).val(options.selected).trigger(\"change\");\n    }\n  },\n\n  _getSelectOptions: function () {\n    return {\n      multiple: this.props.multiple,\n      placeholder: this.props.placeholder,\n      data: this.props.data,\n      selected: this.props.selected,\n      sortResults: (...args) => this.props.sortResults(...args).slice(0, this.props.maxDisplayedItems),\n      formatNoMatches: this.props.formatNoMatches\n    };\n  },\n\n  render: function () {\n    var name = this.props.name || this.props.id,\n        classes = (this.props.size) ? \"aui-select2 \" + this.props.size : \"aui-select2\";\n\n    return (\n      <input type=\"hidden\" id={this.props.id} className={classes} name={name} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_select2_input.js\n **/","var AuiFormFieldGroup = require(\"./aui_form_fieldgroup\"),\n    AuiTextArea = require(\"./aui_textarea\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"AuiTextAreaFieldGroup\",\n\n  render: function() {\n    return (\n      <AuiFormFieldGroup {...this.props}>\n        <AuiTextArea {...this.props} />\n      </AuiFormFieldGroup>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_textarea_fieldgroup.js\n **/","module.exports = React.createClass({\n\n  displayName: \"AuiTextarea\",\n\n  propTypes: {\n    onChange: React.PropTypes.func,\n    onFocus: React.PropTypes.func,\n    onBlur: React.PropTypes.func\n  },\n\n  getDefaultProps: function() {\n    return {\n      onChange: () => {},\n      onFocus: () => {},\n      onBlur: () => {}\n    };\n  },\n\n  render: function() {\n\n    var name = this.props.name || this.props.id;\n    var classes = (this.props.size) ? \"textarea \" + this.props.size : \"textarea\";\n\n    return (\n      <textarea {...this.props} className={classes} name={name}></textarea>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/form/aui_textarea.js\n **/","import Store from \"lib/core/store\";\nimport AppStore from \"stores/application_store\";\nimport dispatcher from \"dispatchers/app_dispatcher\";\nimport AppConfig from 'config/app_config';\n\nclass FormsStore extends Store {\n\n  constructor() {\n    super();\n  }\n\n  getDefaults() {\n    return {\n      activeChat: null,\n      activeChatParticipants: [],\n      roomNames: [],\n      users: {},\n      user_is_admin: false,\n      web_server: AppConfig.default_web_server,\n      invite_url: false\n    };\n  }\n\n  registerListeners() {\n\n    dispatcher.registerOnce({\n      'hc-init': (data) => {\n        this.set({\n          user_is_admin: data.is_admin,\n          invite_url: data.invite_url\n        });\n      }\n    });\n\n    dispatcher.register({\n      'updated:activeRooms': () => {\n        if (this.data.activeChat) {\n          this.handleActiveChatUpdate(this.data.activeChat.jid);\n        }\n      },\n      'updated:allRooms': (rooms) => {\n        this.handleAllRoomsUpdate(rooms);\n      },\n      'updated:roster': (roster) => {\n        this.handleRosterUpdate(roster);\n      },\n      'updated:active_chat': (active_chat_jid) => {\n        this.handleActiveChatUpdate(active_chat_jid);\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      }\n    });\n  }\n\n  handleAllRoomsUpdate(rooms) {\n    var roomNames = _.map(rooms, 'name');\n    this.set(\"roomNames\", roomNames);\n  }\n\n  handleRosterUpdate(roster) {\n    var users = _.keyBy(_.map(roster, (user) => {\n      let is_guest = !!user.is_guest;\n\n      return {\n        name: user.name,\n        jid: user.jid,\n        id: Number(user.id),\n        is_guest\n      };\n\n    }), \"jid\");\n\n    this.set(\"users\", users);\n  }\n\n  handleActiveChatUpdate(active_chat_jid) {\n    var active_chat,\n        active_chat_participants = [],\n        active_rooms = AppStore.get(\"activeRooms\");\n\n    if (active_rooms) {\n      active_chat = active_rooms[active_chat_jid];\n      if (active_chat) {\n        this.set({\n          activeChat: active_chat\n        });\n        _.each(active_chat.participants, (group) => {\n          _.each(group, (jid) => {\n            active_chat_participants.push(jid);\n          });\n        });\n      }\n      if (active_chat_participants.length) {\n        this.set({\n          activeChatParticipants: active_chat_participants\n        });\n      }\n    }\n  }\n}\n\nmodule.exports = new FormsStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/forms_store.js\n **/","export default {\n  create_room_form: {\n    no_permisions: `Your administrator has restricted creating rooms.`,\n    no_room_name: `Every room needs a name.`,\n    room_already_exists: `That room name is already taken`,\n    name_too_long: `That name is too long. You'll have to shorten it.`\n  },\n  rename_room_form: {\n    no_room_name: `Every room needs a name.`,\n    same_name: `That's the same name.`,\n    name_too_long: `That name is too long. You'll have to shorten it.`,\n    room_already_exists: `The room name is already taken`\n  },\n  invite_users_form: {\n    no_users: `Who do you want to invite?`\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/form_error_strings.js\n **/","export default {\n  shouldComponentUpdate(nextProps, nextState) {\n    return !_.isEqual(this.props, nextProps) || !_.isEqual(this.state, nextState);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/deep_equal_render_mixin.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport Store from \"lib/core/store\";\nimport utils from 'helpers/utils';\nimport PreferencesActions from 'actions/preferences_actions';\nimport PreferencesStore from 'stores/preferences_store';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AvatarHelper from 'helpers/avatar_helper';\n\nclass RoomsNavStore extends Store {\n\n  constructor() {\n    super();\n\n    this.local = {\n      auto_join: [],\n      closedChatsIndex: {}\n    };\n\n    this.savePrefsDebounced = _.debounce(this.savePrefs, 2000, {leading: false, trailing: true});\n  }\n\n  getDefaults() {\n    return {\n      current_user: {},\n      active_chat: PreferencesStore.getChatToFocus(),\n      active_chat_type: '',\n      rooms: {\n        people: [],\n        rooms: []\n      },\n      room_order: [],\n      search_nav_item_visible: false,\n      group_name: \"\",\n      group_avatar_url: \"\",\n      group_avatar_bg: \"\",\n      feature_flags: {},\n      drag_target: false,\n      drag_over_target: false,\n      drag_over_clientY: false,\n      dragging: false,\n      ui_available: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'app-state-ready': () => {\n        this.hc_init_complete = true;\n      },\n      'updated:ui_available': (val) => {\n        // This is the point where the preloader has been hidden\n        this.set(\"ui_available\", val);\n      }\n    });\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:current_user': (user) => {\n        this.set('current_user', user);\n      },\n      'updated:roster': (roster) => {\n        this.handleRosterUpdate(roster);\n      },\n      'updated:activeRooms': (rooms) => {\n        this.handleRoomsUpdate(rooms);\n      },\n      'updated:active_chat': (jid) => {\n        this.handleSelectRoom(jid);\n      },\n      'updated:profiles': (profiles) => {\n        this.handleProfiles(profiles);\n      },\n      'room-closed': ({ jid }) => {\n        this.handleRoomClosed(jid);\n      },\n      'search-history': () => {\n        this.set('search_nav_item_visible', true);\n      },\n      'remove-search-nav-item': () => {\n        this.set('search_nav_item_visible', false);\n      },\n      'update-room-order': (room_jids) => {\n        this.set({\n          drag_target: false\n        });\n        this.updateRoomOrder(room_jids);\n      },\n      \"restore-room-order\": ({ jid }) => {\n        let oldIndex = this.local.closedChatsIndex[jid];\n        if (oldIndex !== undefined) {\n          let roomOrder = _.cloneDeep(this.data.room_order);\n          let newIndex = this.data.room_order.indexOf(jid);\n          if (oldIndex !== newIndex && oldIndex < this.data.room_order.length){\n            roomOrder.splice(newIndex, 1);\n            roomOrder.splice(oldIndex, 0, jid);\n            this.updateRoomOrder(roomOrder);\n          }\n          if (NetworkStatusHelper.isOnline()) {\n            delete this.local.closedChatsIndex[jid];\n          }\n        }\n      },\n      'navigate-rooms': (data) => {\n        this.navigateRooms(data);\n      },\n      'rooms-nav-drag-start': (data) => {\n        this.handleDragStart(data.target);\n      },\n      'rooms-nav-drag-over': (data) => {\n        this.handleDragOver(data.event);\n      },\n      'rooms-nav-drag-end': () => {\n        this.handleDragEnd();\n      }\n    });\n  }\n\n  /**\n   * Helper method for grouping tabs (rooms first then people)\n   * @param {object} tabs\n   */\n  groupRooms(tabs) {\n    tabs = _.groupBy(_.reject(tabs, function (item) {\n        return !item || item.name === '';\n      }), function (chat) {\n      return chat.type === 'groupchat' ? 'rooms' : 'people';\n    });\n    return tabs;\n  }\n\n  /**\n   * Helper method for ordering rooms\n   * @param {array} rooms\n   */\n  orderRooms(rooms) {\n    if (this.data.room_order.length) {\n      var results = _.compact(_.map(this.data.room_order, (jid) => {\n        if (rooms[jid]) {\n          return rooms[jid];\n        }\n      }));\n      var newRooms = _.map(rooms, function (room) {\n        var newRoom = _.find(results, function (item) {\n          return room.jid === item.jid;\n        });\n        if (!newRoom) {\n          return room;\n        }\n      });\n      return _.compact(results.concat(newRooms));\n    }\n    return rooms;\n  }\n\n  /**\n   * Helper method for setting room_order array based on autoJoin or RoomsNavStore rooms\n   * @param {array} autoJoin\n   */\n  setRoomOrder(autoJoin) {\n    var jids;\n    if (autoJoin) {\n      jids = _.map(autoJoin, (room) => {\n        return room.jid;\n      });\n    } else {\n      jids = _.flatten(_.map(['rooms', 'people'], (groupName) => {\n        return _.map(this.data.rooms[groupName], (room) => {\n          return room.jid;\n        });\n      }));\n    }\n    this.set({\n      room_order: jids\n    });\n  }\n\n  handleConfig(config) {\n    var group_avatar_url = AvatarHelper.cleanAvatarURL(_.get(config, \"group_avatar_url\"));\n    this.set({\n      group_avatar_bg: _.get(config, \"group_avatar_bg\"),\n      group_avatar_url: group_avatar_url,\n      group_name: _.get(config, \"group_name\"),\n      feature_flags: _.get(config, \"feature_flags\")\n    });\n  }\n\n  handleRosterUpdate(roster) {\n    _.map(roster, (user, jid) => {\n      let room = _.find(this.data.rooms['people'], (chat) => {\n        return chat.jid === jid;\n      });\n      if (room) {\n        _.assign(room.presence, roster[jid].presence);\n        if (_.get(user, \"name\")) {\n          room.name = user.name;\n        }\n      }\n    });\n\n    this.set({\n      rooms: this.data.rooms\n    });\n    this.setRoomOrder();\n  }\n\n  /**\n   * Handle rooms update - accepts activeRooms obj with jids as keys\n   * @param {object} activeRooms\n   */\n  handleRoomsUpdate(activeRooms) {\n    let rooms;\n    let orderedRooms;\n\n    _.reject(activeRooms, (room) => {return !room;});\n    orderedRooms = this.orderRooms(activeRooms);\n    rooms = this.groupRooms(orderedRooms);\n    _.assign(this.data, {\n      rooms: _.defaults(rooms, {rooms: [], people: []}),\n      active_chat: this.data.active_chat\n    });\n    if (this.hc_init_complete && !activeRooms[this.data.active_chat] && !utils.jid.is_search(this.data.active_chat)) {\n      this.data.active_chat = 'lobby';\n    }\n    this.saveRooms(orderedRooms, this.data.active_chat, this.data.rooms);\n  }\n\n  handleProfiles(profiles) {\n    _.forOwn(this.data.rooms.people, (chat) => {\n      let name = _.get(profiles, `[\"${chat.jid}\"].name`);\n      if (name) {\n        chat.name = name;\n      }\n    });\n    this.set({\n      rooms: this.data.rooms\n    });\n  }\n\n  getRoomIndex(jid){\n    return this.data.room_order.indexOf(jid);\n  }\n\n  getNextRoom(jid) {\n    var nextRoom, idx;\n    if (this.data.room_order.length) {\n      idx = this.getRoomIndex(jid);\n      if (idx >= 0) {\n        if (idx === this.data.room_order.length - 1) {\n          idx--;\n        } else {\n          idx++;\n        }\n        if (idx > -1) {\n          nextRoom = this.data.room_order[idx];\n        }\n      }\n    }\n    return nextRoom || \"lobby\";\n  }\n\n  handleRoomClosed(jid) {\n    let index = this.getRoomIndex(jid);\n    if (index !== -1){\n          this.local.closedChatsIndex[jid] = index;\n    }\n    if (jid === this.data.active_chat) {\n      var data = {\n        jid: this.getNextRoom(jid),\n        isClosed: true\n      };\n      AppDispatcher.dispatch('set-route', data);\n      AnalyticsDispatcher.dispatch('analytics-select-room', data);\n    }\n    AppDispatcher.dispatch('close-file-viewer');\n  }\n\n  handleSelectRoom(jid) {\n    var inRoster = _.find(this.data.rooms.rooms, {jid: jid}) || _.find(this.data.rooms.people, {jid: jid});\n    var selectedJid = inRoster || utils.jid.is_search(jid) ? jid : 'lobby';\n    _.map(this.data.rooms, (group) => {\n      _.assign(_.find(group, (room) => {\n        return room.jid === jid;\n      }));\n    });\n    this.set({\n      rooms: this.data.rooms,\n      active_chat: selectedJid\n    });\n    this.setRoomOrder();\n    if (this.hc_init_complete) {\n      this.savePrefsDebounced();\n    }\n  }\n\n  navigateRooms(instructions) {\n    var roomIndex = _.findIndex(this.data.room_order, (jid) => {\n      return jid === this.data.active_chat;\n    });\n\n    if (instructions.direction === \"up\") {\n      this.navigateRoomsUp(roomIndex);\n    } else if (instructions.direction === \"down\") {\n      this.navigateRoomsDown(roomIndex);\n    } else if (instructions.direction === \"top\") {\n      this.navigateToTopChat();\n    } else if (instructions.direction === \"bottom\") {\n      this.navigateToBottomChat();\n    } else if (instructions.direction === \"index\") {\n      this.navigateToChatAtIndex(instructions.index);\n    }\n\n    AppDispatcher.dispatch('close-file-viewer');\n  }\n\n  navigateToTopChat() {\n    let newJid = _.head(this.data.room_order);\n    if (newJid && newJid !== this.data.active_chat) {\n      AppDispatcher.dispatch('set-route', {\n        jid: newJid\n      });\n    }\n  }\n\n  navigateToBottomChat() {\n    let newJid = _.last(this.data.room_order);\n    if (newJid && newJid !== this.data.active_chat) {\n      AppDispatcher.dispatch('set-route', {\n        jid: newJid\n      });\n    }\n  }\n\n  navigateToChatAtIndex(index) {\n    let newJid = this.data.room_order[index];\n    if (newJid && newJid !== this.data.active_chat) {\n      AppDispatcher.dispatch('set-route', {\n        jid: newJid\n      });\n    }\n  }\n\n  navigateRoomsUp(roomIndex) {\n    var newJid;\n    if (roomIndex === -1 && utils.jid.is_lobby(this.data.active_chat)) {\n      newJid = this.data.room_order[this.data.room_order.length - 1];\n    } else if (roomIndex === 0) {\n      newJid = \"lobby\";\n    } else {\n      newJid = this.data.room_order[roomIndex - 1];\n    }\n\n    if (newJid) {\n      AppDispatcher.dispatch('set-route', {\n        jid: newJid\n      });\n    }\n  }\n\n  navigateRoomsDown(roomIndex) {\n    var newJid;\n    if (roomIndex === -1 && utils.jid.is_lobby(this.data.active_chat)) {\n      newJid = this.data.room_order[0];\n    } else if (roomIndex === this.data.room_order.length - 1) {\n      newJid = \"lobby\";\n    } else {\n      newJid = this.data.room_order[roomIndex + 1];\n    }\n\n    if (newJid) {\n      AppDispatcher.dispatch('set-route', {\n        jid: newJid\n      });\n    }\n  }\n\n  /* Takes array of room jids */\n  updateRoomOrder(jids) {\n    let currentRoomData = [];\n    let fullRoomData;\n    let rooms;\n\n    currentRoomData = currentRoomData.concat(this.data.rooms[\"rooms\"], this.data.rooms[\"people\"]);\n    fullRoomData = _.map(jids, (jid) => {\n      return _.find(currentRoomData, function (item) {\n        return item.jid === jid;\n      });\n    });\n    rooms = _.groupBy(fullRoomData, function (chat) {\n      return chat.type === 'groupchat' ? 'rooms' : 'people';\n    });\n    this.saveRooms(fullRoomData, this.data.active_chat, rooms);\n  }\n\n  saveRooms(roomData, activeChat, roomObj) {\n    var autoJoin = _.map(roomData, function (room) {\n      return {\n        jid: room.jid,\n        name: room.name\n      };\n    });\n\n    this.set({\n      rooms: roomObj,\n      active_chat: activeChat\n    });\n    this.local.auto_join = (autoJoin.length) ? autoJoin : false;\n    if (this.hc_init_complete) {\n      this.savePrefsDebounced();\n      this.setRoomOrder();\n    }\n  }\n\n  savePrefs() {\n    var prefs = {};\n\n    prefs[\"autoJoin\"] = this.local.auto_join;\n    if (this.data.active_chat !== 'search') {\n      prefs[\"chatToFocus\"] = this.data.active_chat;\n    }\n\n    PreferencesActions.savePreferences(prefs);\n  }\n\n  handleDragStart(target) {\n    if (target) {\n      this.set({\n        drag_target: target,\n        dragging: true\n      });\n    }\n  }\n\n  handleDragOver(event) {\n    if (event && event.target && event.clientY) {\n      this.set({\n        drag_over_target: event.target,\n        drag_over_clientY: event.clientY,\n        dragging: true\n      });\n    }\n  }\n\n  handleDragEnd() {\n    this.set({\n      drag_over_target: false,\n      drag_over_clientY: false,\n      dragging: false\n    });\n  }\n\n}\n\nmodule.exports = new RoomsNavStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/rooms_nav_store.js\n **/","/*global Modernizr*/\nexport default {\n\n  ieSubmit: (e) => {\n\n    if (!Modernizr.formattribute) {\n\n      e.preventDefault();\n\n      var form = document.getElementById(e.target.getAttribute('form'));\n\n      if (form){\n        var button = form.ownerDocument.createElement('input');\n        button.style.display = 'none';\n        button.type = 'submit';\n        form.appendChild(button).click();\n        form.removeChild(button);\n      }\n    }\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/ie_submit_mixin.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    strings = require('strings/dialog_strings'),\n    RemoveUsersForm = require(\"components/forms/remove_users_form\"),\n    ieSubmitMixin = require('components/mixins/ie_submit_mixin');\n\nmodule.exports = React.createClass({\n\n  displayName: \"RemoveUserDialog\",\n\n  mixins: [ieSubmitMixin],\n\n  _dialogTitle: function () {\n    return strings.choose_removed_members;\n  },\n\n  _dialogBody: function () {\n    return (\n      <RemoveUsersForm />\n    );\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button form=\"remove-users-form\" className=\"aui-button aui-button-primary\" type=\"submit\" onClick={this.ieSubmit}>{strings.ok}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"remove-users-dialog\"\n        title={this._dialogTitle()}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        closeLinkText=\"Cancel\"\n        size=\"small\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/remove_user_dialog/remove_user_dialog.js\n **/","import AuiCheckboxField from 'components/common/aui/form/aui_checkbox_field';\nimport FlagActions from 'actions/flag_actions';\nimport DialogActions from 'actions/dialog_actions.js';\nimport FormActions from 'actions/form_actions';\nimport FormsStore from 'stores/forms_store';\nimport strings from 'strings/forms_strings';\n\nexport default React.createClass({\n\n  displayName: 'RemoveUsersForm',\n\n  shouldComponentUpdate() {\n    return !ReactDOM.findDOMNode(this.refs['form']).querySelectorAll(':checked').length;\n  },\n\n  componentDidMount() {\n    FormsStore.on(['change:users', 'change:activeChat', 'change:activeChatParticipants'], this._onChange);\n  },\n\n  componentDidUpdate() {\n    ReactDOM.findDOMNode(this.refs.form).reset();\n    if ($(ReactDOM.findDOMNode(this.refs.form)).find('.aui-select2')) {\n      AJS.$(ReactDOM.findDOMNode(this.refs.form)).find('.aui-select2').auiSelect2('data', null);\n    }\n  },\n\n  componentWillUnmount() {\n    FormsStore.off(['change:users', 'change:activeChat', 'change:activeChatParticipants'], this._onChange);\n  },\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  _onChange(){\n    this.setState(this._getState());\n  },\n\n  _getState(){\n    return {\n      activeChatParticipants: FormsStore.get('activeChatParticipants'),\n      users: FormsStore.get('users'),\n      activeChat: FormsStore.get('activeChat')\n    };\n  },\n\n  _getName(jid) {\n    return this.state.users[jid].name;\n  },\n\n  _getUID(jid) {\n    return Number(this.state.users[jid].id);\n  },\n\n  _isAdmin(jid) {\n    return _.includes(this.state.activeChat.admins, this._getUID(jid));\n  },\n\n  _sortParticipants() {\n    var participants = _.map(this.state.activeChatParticipants, (jid) => {\n      return {\n        jid: jid,\n        name: this._getName(jid),\n        isAdmin: this._isAdmin(jid)\n      };\n    });\n    return _.sortBy(participants, ['isAdmin', 'name']);\n  },\n\n  _onSubmit(e) {\n    e.preventDefault();\n    var form_inputs = $(ReactDOM.findDOMNode(this.refs.form)).serializeArray(),\n        submit_data = {\n          room_jid: this.state.activeChat.jid,\n          user_jids: _.map(form_inputs, 'value')\n        };\n\n    if (submit_data.user_jids.length) {\n      FormActions.removeUsers(submit_data, this._handleResponse);\n    } else {\n      this._throwFlagError(strings.fail.no_users_flag);\n    }\n    this._closeDialog();\n  },\n\n  _handleResponse(data) {\n    if (data.error) {\n      var error_msg = (_.get(data, 'error.text.__text')) ? data.error.text.__text : strings.fail.remove_users;\n      this._throwFlagError(error_msg);\n    } else {\n      this._throwFlagSuccess(strings.success.users_removed);\n    }\n  },\n\n  _throwFlagSuccess(msg) {\n    FlagActions.showFlag({\n      type: 'success',\n      body: msg,\n      close: 'auto'\n    });\n  },\n\n  _throwFlagError(error) {\n    FlagActions.showFlag({\n      type: 'error',\n      body: this._flagBody(error),\n      close: 'manual'\n    });\n  },\n\n  _flagActionClick(e) {\n    e.preventDefault();\n    var flag_index = $(e.target).closest('.hc-flag').data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _flagBody(error_msg) {\n    return () => (\n        <div>\n          <p className=\"hc-message-body\">{error_msg}</p>\n          <ul className=\"aui-nav-actions-list\">\n            <li><a onClick={this._flagActionClick} href=\"#\">{strings.button.try_again}</a></li>\n          </ul>\n        </div>\n      );\n  },\n\n  _showDialog() {\n    DialogActions.showRemoveUsersDialog();\n  },\n\n  _closeDialog() {\n    DialogActions.closeDialog();\n  },\n\n  render() {\n    var sortedParticipants = this._sortParticipants();\n    return (\n      <form id=\"remove-users-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <div >{strings.description.choose_people_to_remove}</div>\n        {\n          _.map(sortedParticipants, (user, index) => {\n            return <AuiCheckboxField id={user.jid} value={user.jid} label={user.name} disabled={user.isAdmin} key={index}/>;\n          })\n        }\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/remove_users_form.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    strings = require('strings/dialog_strings'),\n    CreateRoomForm = require(\"components/forms/create_room_form\"),\n    ieSubmitMixin = require('components/mixins/ie_submit_mixin'),\n    DialogVisibilityMixin = require('components/mixins/modal_dialog_visibility_mixin'),\n    cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"CreateRoomDialog\",\n\n  mixins: [ieSubmitMixin, DialogVisibilityMixin],\n\n  _dialogBody: function () {\n    return (\n      <CreateRoomForm dialogVisible={this.state.dialogVisible}\n                      loading={this.props.btnLoading}\n                      room_name={this.props.room_name}\n                      room_topic={this.props.room_topic}\n                      privacy={this.props.privacy} />\n    );\n  },\n\n  _dialogFooterButton: function () {\n    var btnClasses = cx({\n          'aui-button': true,\n          'aui-button-primary': true\n        });\n\n    return (\n      <button form=\"create-room-form\" className={btnClasses} aria-disabled={this.props.btnLoading} disabled={this.props.btnLoading} type=\"submit\" onClick={this.ieSubmit}>{strings.create_room}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"create-room-dialog\"\n        title={strings.create_a_new_room}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        btnLoading={this.props.btnLoading}\n        closeLinkText=\"Cancel\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/create_room_dialog/create_room_dialog.js\n **/","import AuiInputFieldGroup from \"components/common/aui/form/aui_input_fieldgroup\";\nimport RoomPrivacyRadios from \"components/forms/room_privacy_radios\";\nimport FlagActions from \"actions/flag_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FormActions from \"actions/form_actions\";\nimport RoomNavActions from \"actions/room_nav_actions\";\nimport FormsStore from \"stores/forms_store\";\nimport strings from 'strings/forms_strings';\nimport FormErrors from \"strings/form_error_strings\";\nimport ChatHeaderStrings from 'strings/chat_header_strings';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: \"CreateRoomForm\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  componentDidMount: function() {\n    FormsStore.on('change:roomNames', this._onChange);\n    this.shouldAutoFocus = true;\n  },\n\n  componentWillUnmount: function() {\n    FormsStore.off('change:roomNames', this._onChange);\n  },\n\n  componentDidUpdate: function() {\n    if (this.state.errors.name || (this.props.dialogVisible && this.shouldAutoFocus)) {\n      this._focusInput();\n      this.shouldAutoFocus = false;\n    }\n  },\n\n  getInitialState: function () {\n    var initialState = _.extend({\n      room_name: this.props.room_name || null,\n      room_topic: this.props.room_topic || null,\n      privacy: this.props.privacy || \"public\"\n    }, this._getState());\n    return initialState;\n  },\n\n  _onChange: function(){\n    this.setState(this._getState());\n  },\n\n  _getState: function(){\n    return {\n      roomNames: FormsStore.get(\"roomNames\"),\n      errors: {}\n    };\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n    var form_inputs = $(this.refs.form).serializeArray(),\n        privacy = (form_inputs[2]) ? form_inputs[2].value : \"public\",\n        submit_data = {\n          name: form_inputs[0].value.trim(),\n          topic: (form_inputs[1]) ? form_inputs[1].value.trim() : \"\",\n          privacy\n        };\n\n    let errors = this._validateFormData(submit_data);\n    if (errors) {\n      this.setState({ errors, privacy });\n    } else {\n      this.setState({ errors: {}, privacy });\n      DialogActions.startBtnLoading();\n      FormActions.createRoom(submit_data, this._handleResponse);\n    }\n  },\n\n  _validateFormData: function (formData) {\n    let errors = {};\n\n    // validate room name\n    if (!formData.name) {\n      errors.name = FormErrors.create_room_form.no_room_name;\n    } else if (formData.name.length > 50) {\n      errors.name = FormErrors.create_room_form.name_too_long;\n    } else if (_.find(this.state.roomNames, function (roomName) { return _.isString(roomName) && (roomName.toLowerCase() === formData.name.toLowerCase()); })) {\n      errors.name = FormErrors.create_room_form.room_already_exists;\n    }\n\n    // validate room topic\n    if (formData.topic.length > AppConfig.max_topic_text_length) {\n      errors.topic = ChatHeaderStrings.topic_length_error(AppConfig.max_topic_text_length);\n    }\n\n    return !_.isEmpty(errors) ? errors : null;\n  },\n\n  _handleResponse: function (error, room) {\n    if (error) {\n      this.setState({\n        errors: {\n          name: error.status === 403 ? FormErrors.create_room_form.no_permisions : (error.message || strings.fail.create_room)\n        }\n      });\n      DialogActions.stopBtnLoading();\n    } else {\n      var name = room.name || \"Room\",\n          success_msg = strings.success.room_created(name);\n      this._throwFlagSuccess(success_msg);\n      RoomNavActions.select(room.jid, 'groupchat');\n    }\n  },\n\n  _throwFlagSuccess: function (msg) {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: msg,\n      close: \"auto\"\n    });\n  },\n\n  _showDialog: function () {\n    DialogActions.showCreateRoomDialog();\n  },\n\n  _focusInput: function () {\n    document.getElementById('create-room-name').focus();\n  },\n\n  render: function () {\n    var errors = this.state.errors;\n    let room_name = this.state.room_name;\n    let room_topic = this.state.room_topic;\n    let privacy = this.state.privacy;\n    return (\n      <form id=\"create-room-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <AuiInputFieldGroup value={room_name}\n                            disabled={this.props.loading}\n                            ref=\"nameField\"\n                            id=\"create-room-name\"\n                            label={strings.label.room_name}\n                            maxLength=\"50\"\n                            description={strings.description.create_room_description}\n                            error={errors.name} />\n        <AuiInputFieldGroup value={room_topic}\n                            disabled={this.props.loading}\n                            ref=\"topicField\"\n                            id=\"create-room-topic\"\n                            label={strings.label.room_topic}\n                            maxLength={AppConfig.max_topic_text_length}\n                            description={strings.description.create_room_topic}\n                            error={errors.topic} />\n        <RoomPrivacyRadios disabled={this.props.loading}\n                           defaultChecked={privacy}/>\n      </form>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/create_room_form.js\n **/","var AuiFieldSet = require(\"components/common/aui/form/aui_form_fieldset\"),\n    strings = require('strings/forms_strings'),\n    AuiRadio = require(\"components/common/aui/form/aui_radio\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomPrivacyRadios\",\n\n  getDefaultProps: function() {\n    return {\n      public_desc: strings.description.public_room,\n      private_desc: strings.description.private_room\n    };\n  },\n\n  render: function() {\n    return (\n      <AuiFieldSet label=\"Access:\">\n        <AuiRadio id=\"public-room\" key={_.uniqueId()} name=\"privacy\" defaultChecked={this.props.defaultChecked === \"public\"} value=\"public\" label={strings.label.public_room} description={this.props.public_desc} />\n        <AuiRadio id=\"private-room\" key={_.uniqueId()} name=\"privacy\" defaultChecked={this.props.defaultChecked === \"private\"} value=\"private\" label={strings.label.private_room} description={this.props.private_desc} />\n      </AuiFieldSet>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/room_privacy_radios.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    strings = require('strings/dialog_strings'),\n    RoomPrivacyForm = require(\"components/forms/room_privacy_form\"),\n    ieSubmitMixin = require('components/mixins/ie_submit_mixin'),\n    cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomPrivacyDialog\",\n\n  mixins: [ieSubmitMixin],\n\n  _dialogBody: function () {\n    return (\n      <RoomPrivacyForm jid={this.props.jid} name={this.props.name} privacy={this.props.privacy} loading={this.props.btnLoading} />\n    );\n  },\n\n  _dialogFooterButton: function () {\n    var btnClasses = cx({\n          'aui-button': true,\n          'aui-button-primary': true\n        });\n\n    return (\n      <button form=\"room-privacy-form\" className={btnClasses} aria-disabled={this.props.btnLoading} disabled={this.props.btnLoading} type=\"submit\" onClick={this.ieSubmit}>{strings.set_privacy}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"room-privacy-dialog\"\n        title={strings.change_privacy}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        btnLoading={this.props.btnLoading}\n        closeLinkText={strings.cancel} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/room_privacy_dialog/room_privacy_dialog.js\n **/","import RoomPrivacyRadios from \"components/forms/room_privacy_radios\";\nimport FlagActions from \"actions/flag_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FormActions from \"actions/form_actions\";\nimport strings from 'strings/forms_strings';\n\nexport default React.createClass({\n\n  displayName: \"RoomPrivacyForm\",\n\n  shouldComponentUpdate: function (nextProps) {\n    var val;\n    if (!nextProps.loading) {\n      val = true;\n    } else {\n      val = false;\n    }\n    return val;\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n    var form_inputs = $(ReactDOM.findDOMNode(this.refs.form)).serializeArray(),\n        submit_data = {\n          jid: this.props.jid,\n          privacy: form_inputs[0].value\n        };\n\n    if (submit_data.privacy !== this.props.privacy) {\n      DialogActions.startBtnLoading();\n      FormActions.changeRoomPrivacy(submit_data, this._handleResponse);\n    }\n  },\n\n  _handleResponse: function (error) {\n    if (error) {\n      this._throwFlagError(error.message || strings.fail.change_privacy_flag);\n    } else {\n      var privacy = (this.props.privacy === \"public\") ? \"private\" : \"public\";\n      var success_msg = strings.success.privacy_changed(this.props.name, privacy);\n      this._throwFlagSuccess(success_msg);\n    }\n    this._closeDialog();\n  },\n\n  _throwFlagSuccess: function (msg) {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: msg,\n      close: \"auto\"\n    });\n  },\n\n  _throwFlagError: function (error) {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: this._flagBody(error),\n      close: \"manual\"\n    });\n  },\n\n  _onFlagActionClick: function (e) {\n    e.preventDefault();\n    let flag_index = $(e.target).closest(\".hc-flag\").data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _flagBody: function (error_msg) {\n    return () => (\n        <div>\n          <p className=\"hc-message-body\">{error_msg}</p>\n          <ul className=\"aui-nav-actions-list\">\n            <li><a onClick={this._onFlagActionClick} href=\"#\">{strings.button.try_again}</a></li>\n          </ul>\n        </div>\n    );\n  },\n\n  _showDialog: function () {\n    DialogActions.showRoomPrivacyDialog({\n      jid: this.props.jid,\n      name: this.props.name,\n      privacy: this.props.privacy\n    });\n  },\n\n  _closeDialog: function () {\n    DialogActions.closeDialog();\n  },\n\n  render: function () {\n    return (\n      <form id=\"room-privacy-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <RoomPrivacyRadios defaultChecked={this.props.privacy} private_desc={strings.description.privacy}/>\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/room_privacy_form.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    RenameRoomForm = require(\"components/forms/rename_room_form\"),\n    strings = require('strings/dialog_strings'),\n    ieSubmitMixin = require('components/mixins/ie_submit_mixin'),\n    DialogVisibilityMixin = require('components/mixins/modal_dialog_visibility_mixin'),\n    cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"RenameRoomDialog\",\n\n  mixins: [ieSubmitMixin, DialogVisibilityMixin],\n\n  _dialogBody: function () {\n    return (\n      <RenameRoomForm dialogVisible={this.state.dialogVisible}\n                      jid={this.props.jid}\n                      name={this.props.name}\n                      loading={this.props.btnLoading}/>\n    );\n  },\n\n  _dialogFooterButton: function () {\n    var btnClasses = cx({\n          'aui-button': true,\n          'aui-button-primary': true\n        });\n\n    return (\n      <button form=\"rename-room-form\" className={btnClasses} aria-disabled={this.props.btnLoading} disabled={this.props.btnLoading} type=\"submit\" onClick={this.ieSubmit}>{strings.rename}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"rename-room-dialog\"\n        title={strings.rename_room(this.props.name)}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        btnLoading={this.props.btnLoading}\n        closeLinkText={strings.cancel} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/rename_room_dialog/rename_room_dialog.js\n **/","import AuiInputFieldGroup from \"components/common/aui/form/aui_input_fieldgroup\";\nimport FlagActions from \"actions/flag_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FormActions from \"actions/form_actions\";\nimport FormErrors from \"strings/form_error_strings\";\nimport FormsStore from \"stores/forms_store\";\nimport strings from \"strings/forms_strings\";\n\nmodule.exports = React.createClass({\n\n  displayName: \"RenameRoomForm\",\n\n  componentDidMount: function() {\n    FormsStore.on('change:roomNames', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    FormsStore.off('change:roomNames', this._onChange);\n  },\n\n  componentDidUpdate: function() {\n    if (this.state.errors.name || this.props.dialogVisible) {\n        this._focusInput();\n    }\n  },\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _onChange: function(){\n    this.setState(this._getState());\n  },\n\n  _getState: function(){\n    return {\n      roomNames: FormsStore.get(\"roomNames\"),\n      errors: {}\n    };\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n    var form_inputs = $(ReactDOM.findDOMNode(this.refs.form)).serializeArray(),\n        name = form_inputs[0].value.trim();\n\n    var errors = this._validate(name);\n    if (errors) {\n      this.setState({\n        errors: errors\n      });\n    } else {\n      this._clearErrors();\n      DialogActions.startBtnLoading();\n      FormActions.changeRoomName({\n        jid: this.props.jid,\n        name: name\n      }, this._handleResponse);\n    }\n  },\n\n  _validate: function (name) {\n    if (!name) {\n      return {\n        name: FormErrors.rename_room_form.no_room_name\n      };\n    } else if (name.length > 50) {\n      return {\n        name: FormErrors.rename_room_form.name_too_long\n      };\n    } else if (name === this.props.name) {\n      return {\n        name: FormErrors.rename_room_form.same_name\n      };\n    } else if (_.find(this.state.roomNames, function (roomName) { return _.isString(roomName) && (roomName.toLowerCase() === name.toLowerCase()); })) {\n      return {\n        name: FormErrors.rename_room_form.room_already_exists\n      };\n    }\n  },\n\n  _clearErrors: function () {\n    this.setState({\n      errors: {}\n    });\n  },\n\n  _handleResponse: function (error) {\n    if (error) {\n      this.setState({\n        errors: {\n          name: (error.message || strings.fail.rename_flag)\n        }\n      });\n      DialogActions.stopBtnLoading();\n    } else {\n      this._throwFlagSuccess(strings.success.rename_flag);\n      this._closeDialog();\n    }\n  },\n\n  _throwFlagSuccess: function (msg) {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: msg,\n      close: \"auto\"\n    });\n  },\n\n  _flagActionClick: function (e) {\n    e.preventDefault();\n    var flag_index = $(e.target).closest(\".hc-flag\").data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _flagBody: function () {\n    return () => (\n        <div>\n          <ul className=\"aui-nav-actions-list\">\n            <li><a onClick={this._flagActionClick} href=\"#\">{strings.button.try_again}</a></li>\n          </ul>\n        </div>\n      );\n  },\n\n  _showDialog: function () {\n    DialogActions.showRenameRoomDialog({\n      jid: this.props.jid,\n      name: this.props.name\n    });\n  },\n\n  _closeDialog: function () {\n    DialogActions.closeDialog();\n  },\n\n  _focusInput: function () {\n    document.getElementById('room-name').focus();\n  },\n\n  render: function () {\n    var errors = this.state.errors;\n\n    return (\n      <form id=\"rename-room-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <AuiInputFieldGroup id=\"room-name\" ref=\"nameField\" disabled={this.props.loading} maxLength=\"50\" label={strings.label.new_room_name} error={errors.name}/>\n      </form>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/rename_room_form.js\n **/","import ModalDialog from \"components/common/modal_dialog/modal_dialog\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FlagActions from \"actions/flag_actions\";\nimport strings from 'strings/dialog_strings';\nimport RoomDropDownActions from \"actions/room_dropdown_actions\";\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"DeleteRoomDialog\",\n\n  propTypes: {\n    jid: React.PropTypes.string.isRequired\n  },\n\n  componentDidMount: function () {\n    this._focusButton();\n  },\n\n  _dialogBody: function () {\n    return strings.confirm_delete(this.props.name);\n  },\n\n  _dialogFooterButton: function () {\n    var btnClasses = cx({\n          'aui-button': true,\n          'aui-button-primary': true\n        });\n\n    return (\n      <button onClick={this._deleteRoom} className={btnClasses} aria-disabled={this.props.btnLoading} disabled={this.props.btnLoading}>{strings.delete_room}</button>\n    );\n  },\n\n  _deleteRoom: function (e) {\n    e.preventDefault();\n    DialogActions.startBtnLoading();\n    RoomDropDownActions.deleteRoom({\n      jid: this.props.jid,\n      id: this.props.room_id\n    }, this._handleResponse);\n  },\n\n  _handleResponse: function (error) {\n    if (error) {\n      this._throwFlagError(error.message || strings.delete_room_fail);\n    } else {\n      var success_msg = strings.room_deleted(this.props.name);\n      this._throwFlagSuccess(success_msg);\n      RoomDropDownActions.closeRoom(this.props.jid);\n    }\n    this._closeDialog();\n  },\n\n  _throwFlagSuccess: function (msg) {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: msg,\n      close: \"auto\"\n    });\n  },\n\n  _throwFlagError: function (error) {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: this._flagBody(error),\n      close: \"manual\"\n    });\n  },\n\n  _flagBody: function (error_msg) {\n    return () => (\n      <div>\n        <p className=\"hc-message-body\">{error_msg}</p>\n        <ul className=\"aui-nav-actions-list\">\n          <li><a onClick={this._flagActionClick} href=\"#\">{strings.try_again}</a></li>\n        </ul>\n      </div>\n    );\n  },\n\n  _flagActionClick: function (e) {\n    e.preventDefault();\n    var flag_index = $(e.target).closest(\".flag\").data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _showDialog: function () {\n    DialogActions.showDeleteRoomDialog({\n      jid: this.props.jid,\n      name: this.props.name\n    });\n  },\n\n  _closeDialog: function () {\n    DialogActions.closeDialog();\n  },\n\n  _focusButton: function () {\n    ReactDOM.findDOMNode(this).querySelector(\".aui-button-primary\").focus();\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"delete-room-dialog\"\n        title={strings.delete_room}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        closeLinkText={strings.cancel}\n        btnLoading={this.props.btnLoading}\n        size=\"small\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/delete_room_dialog/delete_room_dialog.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\"),\n    AppDispatcher = require(\"dispatchers/app_dispatcher\"),\n    strings = require('strings/dialog_strings'),\n    DialogActions = require(\"actions/dialog_actions\");\n\nimport linkify from 'helpers/linkify';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomInviteDialog\",\n\n  _dialogBody: function () {\n    var invitePrompt = strings.invited_to_join(this.props.from_user, this.props.room_name);\n    return (\n      <div>{invitePrompt}<br /><br /><span dangerouslySetInnerHTML={this._getReasonHTML()}></span></div>\n    );\n  },\n\n  _getReasonHTML() {\n    let linkifyConfig = {\n      truncate_length: 50\n    };\n\n    if (this.props.reason) {\n      let reason = linkify.linkify(this.props.reason, undefined, linkifyConfig);\n\n      return {\n        __html: `\"${reason}\"`\n      };\n    }\n\n    return {\n      __html: ''\n    };\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button onClick={this._acceptInvite} className=\"aui-button aui-button-primary\">{strings.join}</button>\n    );\n  },\n\n  _acceptInvite: function (e) {\n    e.preventDefault();\n    AppDispatcher.dispatch('groupchat-invite-accepted', {\n      jid: this.props.room_jid\n    });\n    DialogActions.closeDialog();\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"room-invite-dialog\"\n        title={strings.join_room(this.props.room_name)}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        closeLinkText=\"Ignore\"\n        size=\"small\"/>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/room_invite_dialog/room_invite_dialog.js\n **/","import ModalDialog from \"components/common/modal_dialog/modal_dialog\";\nimport RoomsNavStore from \"stores/rooms_nav_store\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FlagActions from \"actions/flag_actions\";\nimport strings from 'strings/dialog_strings';\nimport RoomDropDownActions from \"actions/room_dropdown_actions\";\nimport utils from \"helpers/utils\";\n\nexport default React.createClass({\n\n  displayName: \"ArchiveRoomDialog\",\n\n  componentDidMount: function () {\n    RoomsNavStore.on(['change'], this._onChange);\n  },\n\n  componentWillUnmount: function () {\n    RoomsNavStore.off(['change'], this._onChange);\n  },\n\n  getInitialState: function () {\n    return this._getActiveChatState();\n  },\n\n  _getActiveChatState: function () {\n    return {\n      active_chat: RoomsNavStore.get(\"active_chat\"),\n      rooms: RoomsNavStore.get(\"rooms\")\n    };\n  },\n\n  _onChange: function () {\n    this.setState(this._getActiveChatState());\n  },\n\n  _dialogBody: function () {\n    return (\n      this.props.archive ?\n        <div>\n        <p><strong>{strings.really_archive(this._getRoomName())}</strong></p>\n        <p>{strings.confirm_archive}</p>\n      </div> : <p>{strings.really_unarchive(this._getRoomName())}</p>\n    );\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button onClick={this.onAction(this.props.archive)} className=\"aui-button aui-button-primary\">{this.props.archive ? strings.archive : strings.unarchive}</button>\n    );\n  },\n\n  _getRoomName: function () {\n    return utils.room.get_room_name(_.keyBy(this.state.rooms.rooms, \"jid\"), this.state.active_chat);\n  },\n\n  _getRoomId: function () {\n    return utils.room.get_room_id(_.keyBy(this.state.rooms.rooms, \"jid\"), this.state.active_chat);\n  },\n\n  onAction(archive){\n\n    let data = {\n      jid: this.state.active_chat,\n      id: this._getRoomId()\n    };\n\n    let cb = this._buildResponseHandler(archive);\n\n    return (evt) => {\n      if (evt) {\n        evt.preventDefault();\n      }\n      if (archive) {\n        RoomDropDownActions.archiveRoom(data, cb);\n      } else {\n        RoomDropDownActions.unarchiveRoom(data, cb);\n      }\n      DialogActions.closeDialog();\n    };\n  },\n\n  _buildResponseHandler(archive) {\n    return (data) => {\n      if (data.error) {\n        var error_msg = archive ? strings.archive_fail : strings.unarchive_fail;\n        this._throwFlagError(error_msg);\n      } else {\n        var success_msg = archive ? strings.room_archived : strings.room_unarchived;\n        this._throwFlagSuccess(success_msg);\n      }\n    };\n  },\n\n  _throwFlagSuccess: function (msg) {\n    FlagActions.showFlag({\n      type: \"success\",\n      body: msg,\n      close: \"auto\"\n    });\n  },\n\n  _throwFlagError: function (error) {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: this._flagBody(error),\n      close: \"manual\"\n    });\n  },\n\n  _flagBody: function (error_msg) {\n    return () => (\n      <div>\n        <p className=\"hc-message-body\">{error_msg}</p>\n        <ul className=\"aui-nav-actions-list\">\n          <li><a onClick={ this.onFlagClickAction(this.props.archive) }>{strings.try_again}</a></li>\n        </ul>\n      </div>\n    );\n  },\n\n  onFlagClickAction(archive){\n\n    let action = this.onAction(archive);\n\n    return (e) => {\n      let flag_index = $(e.target).closest(\".flag\").data('flag-index');\n      FlagActions.removeFlag(flag_index);\n      action(e);\n    };\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"archive-room-dialog\"\n        title={this.props.archive ? strings.archive_room_name(this._getRoomName()) : strings.unarchive_room_name(this._getRoomName())}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        closeLinkText=\"Cancel\" />\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/archive_room_dialog/archive_room_dialog.js\n **/","import ModalDialogAlt from \"components/common/modal_dialog/modal_dialog_alternate\";\nimport strings from \"strings/dialog_strings\";\nimport DialogActions from \"actions/dialog_actions\";\nimport spi from \"spi\";\n\nexport default React.createClass({\n\n  displayName: \"Desktop4Dialog\",\n\n  componentDidMount() {\n    spi.onDesktop4DialogShown();\n  },\n\n  getDefaultProps() {\n    return {\n      content: {}\n    };\n  },\n\n  _onClick() {\n    DialogActions.closeDialog();\n  },\n\n  _getTitle() {\n    let title = _.get(this.props.content, \"title\");\n\n    if (_.isString(title)) {\n      return (\n        <h2>{title}</h2>\n      );\n    }\n  },\n\n  _getIntro() {\n    let intro = _.get(this.props.content, \"intro\");\n\n    if (_.isString(intro)) {\n      return (\n        <p>{intro}</p>\n      );\n    }\n  },\n\n  _getBullets() {\n    let bullets = _.get(this.props.content, \"bullets\");\n\n    if (_.isArray(bullets) && bullets.length) {\n      return (\n        <ul>\n          {bullets.map(function(bullet) {\n            return (\n              <li>{bullet}</li>\n            );\n          })}\n        </ul>\n      );\n    }\n  },\n\n  _getOutro() {\n    let outro = _.get(this.props.content, \"outro\");\n\n    if (_.isString(outro)) {\n      return (\n        <p>{outro}</p>\n      );\n    }\n  },\n\n  _getCTA() {\n    let cta = _.get(this.props.content, \"cta\", strings.close);\n\n    if (_.isString(cta)) {\n      return (\n        <button className=\"aui-button aui-button-primary\" onClick={this._onClick}>{cta}</button>\n      );\n    }\n  },\n\n  _dialogBody() {\n    let title = this._getTitle(),\n        intro = this._getIntro(),\n        bullets = this._getBullets(),\n        outro = this._getOutro(),\n        cta = this._getCTA();\n\n    return (\n      <div>\n        <div className=\"img\" />\n        {title}\n        <div className=\"inner-content\">\n          {intro}\n          {bullets}\n          {outro}\n        </div>\n        {cta}\n      </div>\n    );\n  },\n\n  render() {\n    return (\n      <ModalDialogAlt dialogId=\"desktop-4-dialog\"\n        dialogBody={this._dialogBody}\n        size=\"small\"/>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/desktop_4_dialog/desktop_4_dialog.js\n **/","import DialogActions from \"actions/dialog_actions\";\nimport ModalDialogVisibilityMixin from \"components/mixins/modal_dialog_visibility_mixin\";\nimport utils from \"helpers/utils\";\nimport cx from \"classnames\";\n\nexport default React.createClass({\n\n  displayName: \"ModalDialogAlternate\",\n\n  propTypes: {\n    size: React.PropTypes.oneOf(['small', 'medium', 'large', 'xlarge'])\n  },\n\n  mixins: [ModalDialogVisibilityMixin],\n\n  componentDidMount: function() {\n    document.querySelector(\"body\").addEventListener('keydown', this._onKeyDown);\n  },\n\n  componentWillUnmount: function() {\n    document.querySelector(\"body\").removeEventListener('keydown', this._onKeyDown);\n  },\n\n  getDefaultProps: function() {\n    return {\n      dialogId: \"dialog\",\n      size: \"medium\",\n      dialogBody: _.noop\n    };\n  },\n\n  close: function() {\n    DialogActions.closeDialog();\n  },\n\n  _onKeyDown: function (e) {\n    var key = (window.Event) ? e.which : e.keyCode;\n    if (key === utils.keyCode.Esc) {\n      this.close();\n    }\n  },\n\n  _onClick: function () {\n    this.close();\n  },\n\n  render: function() {\n    let sizeClass = \"aui-dialog2-\" + this.props.size,\n        classes = cx({\n          \"aui-layer\": true,\n          \"aui-dialog2\": true,\n          \"modal-dialog-alt\": true\n        }, sizeClass);\n\n    return (\n      <section role=\"dialog\" id={this.props.dialogId} className={classes} aria-hidden={!this.state.dialogVisible}>\n        <div className=\"aui-dialog2-content\">\n          {this.props.dialogBody()}\n        </div>\n      </section>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/modal_dialog/modal_dialog_alternate.js\n **/","import ConnectAddonHelper from 'helpers/connect_addon';\nimport RoomsNavStore from 'stores/rooms_nav_store';\nimport AppConfig from 'config/app_config';\nimport DialogActions from 'actions/dialog_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport SimpleXDM from 'simple-xdm/host';\nimport ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport strings from 'strings/dialog_strings';\n\nlet REACT_CONTAINER_ID = \"connect-dialog-container\";\nmodule.exports = React.createClass({\n\n  displayName: \"AddonDialog\",\n\n  _getAddonOptions: function() {\n    let addonOptions = $.extend({}, this.props.addon_options);\n    if(addonOptions.chrome === undefined) {\n      addonOptions.chrome = true;\n    }\n\n    if(addonOptions.resize === undefined && (this.props.addon_options.width || this.props.addon_options.height)){\n        addonOptions.resize = false;\n    }\n\n    addonOptions.width = this._getWidth(addonOptions.width || AppConfig.default_connect_dialog_width);\n    addonOptions.height = this._getHeight(addonOptions.height || AppConfig.default_connect_dialog_height, addonOptions.chrome);\n    return addonOptions;\n  },\n\n  _getDimension: function(dimension, value){\n    this.max_width = ConnectAddonHelper.dialog.getMaxWidth();\n    this.max_height = ConnectAddonHelper.dialog.getMaxHeight();\n\n    if(!value || parseInt(value, 10) > this['max_' + dimension]){\n      return this['max_' + dimension];\n    } else if(value) {\n      return parseInt(value, 10);\n    }\n\n    return AppConfig['default_connect_dialog_' + dimension];\n  },\n  _getWidth: function(width) {\n    if(width === undefined){\n      width = parseInt(this.props.addon_options.width, 10) || AppConfig.default_connect_dialog_width;\n    }\n    return this._getDimension('width', width);\n  },\n  _getHeight: function(height, chrome){\n    if(height === undefined){\n      height = parseInt(this.props.addon_options.height, 10) || AppConfig.default_connect_dialog_height;\n    }\n    height = this._getDimension('height', height);\n    let chromeMaxHeight = ConnectAddonHelper.dialog.getMaxHeight() - AppConfig.connect_aui_dialog_chrome_height;\n\n    if(chrome && height > chromeMaxHeight) {\n      return chromeMaxHeight;\n    }\n\n    return height;\n  },\n  _getOptions: function(){\n    return $.extend(true, this._getAddonOptions(), {\n      capabilities: ConnectAddonHelper.dialog.capabilities\n    });\n  },\n  _createDialog: function () {\n    let options = this._getOptions(),\n        containerDiv = AJS.$(ReactDOM.findDOMNode(this.refs.connectDialog));\n\n    containerDiv.css({\n      width: this._getWidth(),\n      height: this._getHeight(undefined, options.chrome)\n    });\n    this.resize(this._getWidth(), this._getHeight(undefined, options.chrome));\n\n    containerDiv.find('.ap-dialog-submit').hide();\n    containerDiv.on(\"ra.iframe.destroy\", function(){\n      DialogActions.closeDialog();\n    });\n\n  },\n  componentDidMount: function () {\n    ConnectAddonHelper.bindAnalyticsIntercept();\n    RoomsNavStore.on(['change'], this._onChange);\n    this._createDialog();\n  },\n  componentWillUnmount: function () {\n    ConnectAddonHelper.unbindAnalyticsIntercept();\n    RoomsNavStore.off(['change'], this._onChange);\n    var addon_key = this.props.addon_key;\n    AnalyticsActions.connectDialogClosedEvent(addon_key);\n  },\n\n  getInitialState: function () {\n    return this._getActiveChatState();\n  },\n\n  _getActiveChatState: function () {\n    return {\n      active_chat: RoomsNavStore.get(\"active_chat\"),\n      rooms: RoomsNavStore.get(\"rooms\")\n    };\n  },\n\n  _onChange: function () {\n    this.setState(this._getActiveChatState());\n  },\n\n  _resized: function (width, height) {\n      this.resize(width, height);\n  },\n  _dimensions: function (width, height) {\n    var max_height = ConnectAddonHelper.dialog.getMaxHeight(),\n        max_width = ConnectAddonHelper.dialog.getMaxWidth();\n\n    return {\n      height: Math.min(parseInt(height, 10), max_height),\n      width: Math.min(parseInt(width, 10), max_width)\n    };\n  },\n  resize: function (width, height) {\n    var top, dimensions = this._dimensions(width, height);\n    top = ($(document).height() - dimensions.height) / 2;\n    let $el = $('#' + REACT_CONTAINER_ID).css('top', top);\n    AJS.layer($el).changeSize(dimensions.width, dimensions.height);\n  },\n  dialogBody: function () {\n    var xdm = SimpleXDM.create({\n      addon_key: this.props.addon_key,\n      key: this.props.module_key\n    });\n    var ns = ConnectAddonHelper.getNamespace(this.props.addon_key, this.props.module_key),\n      options = this._getOptions(),\n      src = ConnectAddonHelper.getIframeUrl(this.props.addon_url, ns, options);\n\n    return (<iframe className=\"hc-addon-iframe\" id={xdm.id} name={xdm.name} src={src}\n                    onLoad={this._onLoad}/>);\n  },\n\n  render: function () {\n    var options = this._getOptions(),\n      dimensions = this._dimensions(this._getWidth(), this._getHeight(undefined, options.chrome));\n    return (\n      <ModalDialog ref=\"connectDialog\" dialogId={REACT_CONTAINER_ID}\n        title={this.props.addon_options.header}\n        dialogBody={this.dialogBody}\n        closeLinkText={strings.close}\n        customWidth={dimensions.width}\n        customHeight={dimensions.height} />\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/addon_dialog/addon_dialog.js\n **/","import AppConfig from 'config/app_config';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport ApplicationStore from 'stores/application_store';\nimport URI from 'helpers/uri';\n\nfunction objectToQueryParams(params) {\n  let url = '';\n\n  Object.keys(params).forEach(function(key){\n    url += key + '=' + encodeURIComponent(params[key]) + '&';\n  });\n\n  return url.substring(0, url.length - 1);\n}\n\n//TODO: this probably should be an action\nfunction callAnalytics (event, params){\n  if (typeof params !== 'undefined') {\n      AnalyticsDispatcher.dispatch(\"analytics-connect-event\", params);\n  }\n}\n\nmodule.exports = {\n  bindAnalyticsIntercept() {\n    if (AJS && typeof AJS.bind === 'function') {\n      AJS.bind('analyticsEvent', callAnalytics);\n    }\n  },\n  unbindAnalyticsIntercept() {\n    if (AJS && typeof AJS.unbind === 'function') {\n      AJS.unbind('analyticsEvent', callAnalytics);\n    }\n  },\n  getCapabilities() {\n    return {\n      hostlib: 'https://' + ApplicationStore.get('web_server') + '/min/?b=js&f=connect/all-debug.js,connect/plugin-init.js'\n    };\n  },\n  getIframeUrl(src, namespace, additionalCapabilties, ...additionalParams) {\n\n    let uri = URI.parse(window.location.href);\n    let params = {\n      'xdm_e': uri.getBase(),\n      'xdm_c': 'channel-' + namespace,\n      'cp': '',\n      'lic': 'none',\n      'embedded': true\n    },\n    capabilities = $.extend({}, this.getCapabilities(), additionalCapabilties),\n    iframeUrl = `${src}${(_.includes(src, '?') ? '&' : '?')}${objectToQueryParams(params)}#${JSON.stringify(capabilities)}`;\n\n    return iframeUrl;\n  },\n  getNamespace(addon_key, module_key) {\n    return addon_key + '__' + module_key;\n  },\n  getDocumentHeight() {\n    return $(document).height();\n  },\n  dialog: {\n    getMaxWidth: function () {\n      var documentWidth = $(document).width();\n      return documentWidth - Math.min(120, (documentWidth / 100) * 10);\n    },\n    getMaxHeight: function (chrome) {\n      var maxHeight = module.exports.getDocumentHeight();\n      if(chrome){\n        maxHeight -= AppConfig.connect_aui_dialog_chrome_height;\n      }\n      return maxHeight - Math.min(60, (maxHeight / 100) * 10);\n    },\n    capabilities: {\n      resize: {},\n      close: {}\n    }\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/connect_addon.js\n **/","import host from './src/host/index';\nmodule.exports = host;\n\n\n/** WEBPACK FOOTER **\n ** ./~/simple-xdm/host.js\n **/","import XDMRPC from './xdmrpc';\nimport Utils from '../common/util';\n\nclass Connect {\n\n  constructor() {\n    this._xdm = new XDMRPC();\n  }\n\n  /**\n   * Send a message to iframes matching the targetSpec. This message is added to\n   *  a message queue for delivery to ensure the message is received if an iframe \n   *  has not yet loaded\n   * \n   * @param type The name of the event type\n   * @param targetSpec The spec to match against extensions when sending this event\n   * @param event The event payload\n   * @param callback A callback to be executed when the remote iframe calls its callback\n   */\n  dispatch(type, targetSpec, event, callback) {\n    this._xdm.queueEvent(type, targetSpec, event, callback);\n    return this.getExtensions(targetSpec);\n  }\n  \n  /**\n   * Send a message to iframes matching the targetSpec immediately. This message will \n   *  only be sent to iframes that are already open, and will not be delivered if none\n   *  are currently open.\n   * \n   * @param type The name of the event type\n   * @param targetSpec The spec to match against extensions when sending this event\n   * @param event The event payload\n   */\n  broadcast(type, targetSpec, event) {\n    this._xdm.dispatch(type, targetSpec, event, null, null);\n    return this.getExtensions(targetSpec);    \n  }\n\n  _createId(extension) {\n    if(!extension.addon_key || !extension.key){\n      throw Error('Extensions require addon_key and key');\n    }\n    return extension.addon_key + '__' + extension.key + '__' + Utils.randomString();\n  }\n  /**\n  * Creates a new iframed module, without actually creating the DOM element.\n  * The iframe attributes are passed to the 'setupCallback', which is responsible for creating\n  * the DOM element and returning the window reference.\n  *\n  * @param extension The extension definition. Example:\n  *   {\n  *     addon_key: 'my-addon',\n  *     key: 'my-module',\n  *     url: 'https://example.com/my-module',\n  *     options: { autoresize: false }\n  *   }\n  *\n  * @param initCallback The optional initCallback is called when the bridge between host and iframe is established.\n  **/\n  create(extension, initCallback) {\n    let extension_id = this.registerExtension(extension, initCallback);\n\n    let data = {\n      extension_id: extension_id,\n      api: this._xdm.getApiSpec(),\n      origin: Utils.locationOrigin(),\n      options: extension.options || {}\n    };\n\n    return {\n      id: extension_id,\n      name: JSON.stringify(data),\n      src: extension.url\n    };\n  }\n\n  registerRequestNotifier(callback) {\n    this._xdm.registerRequestNotifier(callback);\n  }\n\n  registerExtension(extension, initCallback) {\n    let extension_id = this._createId(extension);\n    this._xdm.registerExtension(extension_id, {\n      extension: extension,\n      initCallback: initCallback\n    });\n    return extension_id;\n  }\n\n  registerKeyListener(extension_id, key, modifiers, callback) {\n    this._xdm.registerKeyListener(extension_id, key, modifiers, callback);\n  }\n\n  unregisterKeyListener(extension_id, key, modifiers, callback) {\n   this._xdm.unregisterKeyListener(extension_id, key, modifiers, callback);\n  }\n\n  defineModule(moduleName, module) {\n    this._xdm.defineAPIModule(module, moduleName);\n  }\n\n  defineGlobals(module) {\n    this._xdm.defineAPIModule(module);\n  }\n\n  getExtensions(filter) {\n    return this._xdm.getRegisteredExtensions(filter);\n  }\n\n  unregisterExtension(filter) {\n    return this._xdm.unregisterExtension(filter);\n  }\n\n}\n\nmodule.exports = new Connect();\n\n\n/** WEBPACK FOOTER **\n ** ./~/simple-xdm/src/host/index.js\n **/","/**\n* Postmessage format:\n*\n* Initialization\n* --------------\n* {\n*   type: 'init',\n*   eid: 'my-addon__my-module-xyz'  // the extension identifier, unique across iframes\n* }\n*\n* Request\n* -------\n* {\n*   type: 'req',\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, required for callbacks\n*   mod: 'cookie',  // the module name\n*   fn: 'read',  // the method name\n*   args: [arguments]  // the method arguments\n* }\n*\n* Response\n* --------\n* {\n*   type: 'resp'\n*   eid: 'my-addon__my-module-xyz',  // the extension identifier, unique for iframe\n*   mid: 'xyz',  // a unique message identifier, obtained from the request\n*   args: [arguments]  // the callback arguments\n* }\n*\n* Event\n* -----\n* {\n*   type: 'evt',\n*   etyp: 'some-event',\n*   evnt: { ... }  // the event data\n*   mid: 'xyz', // a unique message identifier for the event\n* }\n**/\n\nimport Utils from '../common/util';\nimport PostMessage from '../common/postmessage';\n\nlet VALID_EVENT_TIME_MS = 30000; //30 seconds\n\nclass XDMRPC extends PostMessage {\n\n  constructor(config) {\n    config = config || {};\n    super(config);\n    this._registeredExtensions = config.extensions || {};\n    this._registeredAPIModules = {};\n    this._pendingCallbacks = {};\n    this._keycodeCallbacks = {};\n    this._pendingEvents = {};\n    this._messageHandlers = {\n      init: this._handleInit,\n      req: this._handleRequest,\n      resp: this._handleResponse,\n      event_query: this._handleEventQuery,\n      broadcast: this._handleBroadcast,\n      key_listen: this._handleKeyListen\n    };\n  }\n\n  _handleInit(event, reg) {\n    this._registeredExtensions[reg.extension_id].source = event.source;\n    if (reg.initCallback) {\n      reg.initCallback(event.data.eid);\n      delete reg.initCallback;\n    }\n  }\n\n  _handleResponse(event) {\n    var data = event.data;\n    var pendingCallback = this._pendingCallbacks[data.mid];\n    if (pendingCallback) {\n      delete this._pendingCallbacks[data.mid];\n      pendingCallback.apply(window, data.args);\n    }\n  }\n\n  registerRequestNotifier(cb) {\n    this._registeredRequestNotifier = cb;\n  }\n\n  _handleRequest(event, reg) {\n    function sendResponse() {\n      var args = Utils.argumentsToArray(arguments);\n      event.source.postMessage({\n        mid: event.data.mid,\n        type: 'resp',\n        args: args\n      }, reg.extension.url);\n    }\n\n    var data = event.data;\n    var module = this._registeredAPIModules[data.mod];\n    const extension = this.getRegisteredExtensions(reg.extension)[0];\n    if (module) {\n      let fnName = data.fn;\n      if (data._cls) {\n        const Cls = module[data._cls];\n        const ns = data.mod + '-' + data._cls + '-';\n        sendResponse._id = data._id;\n        if (fnName === 'constructor') {\n          if (!Cls._construct) {\n            Cls.constructor.prototype._destroy = function() {\n              delete this._context._proxies[ns + this._id];\n            };\n            Cls._construct = function(...args) {\n              const inst = new Cls.constructor(...args);\n              const callback = args[args.length - 1];\n              inst._id = callback._id;\n              inst._context = callback._context;\n              inst._context._proxies[ns + inst._id] = inst;\n              return inst;\n            };\n          }\n          module = Cls;\n          fnName = '_construct';\n        } else {\n          module = extension._proxies[ns + data._id];\n        }\n      }\n      let method = module[fnName];\n      if (method) {\n        var methodArgs = data.args;\n        sendResponse._context = extension;\n        methodArgs.push(sendResponse);\n        method.apply(module, methodArgs);\n        if(this._registeredRequestNotifier) {\n          this._registeredRequestNotifier.call(null, {\n            module: data.mod,\n            fn: data.fn,\n            type: data.type,\n            addon_key: reg.extension.addon_key,\n            key: reg.extension.key,\n            extension_id: reg.extension_id\n          });\n        }\n      }\n    }\n  }\n\n  _handleBroadcast(event, reg) {\n    var event_data = event.data;\n    var targetSpec = r => r.extension.addon_key === reg.extension.addon_key && r.extension_id !== reg.extension_id;\n    this.dispatch(event_data.etyp, targetSpec, event_data.evnt, null, null);\n  }\n\n  _handleKeyListen(event, reg) {\n    var eventData = event.data;\n    var keycodeEntry = this._keycodeKey(eventData.keycode, eventData.modifiers, reg.extension_id);\n    var listeners = this._keycodeCallbacks[keycodeEntry];\n    if(listeners) {\n      listeners.forEach((listener) => {\n        listener.call(null, {\n          addon_key: reg.extension.addon_key,\n          key: reg.extension.key,\n          extension_id: reg.extension_id,\n          keycode: eventData.keycode,\n          modifiers: eventData.modifiers\n        });\n      }, this);\n    }\n  }\n\n  defineAPIModule(module, moduleName){\n    if(moduleName){\n      this._registeredAPIModules[moduleName] = module;\n    } else {\n      this._registeredAPIModules._globals = Utils.extend({}, this._registeredAPIModules._globals, module);\n    }\n    return this._registeredAPIModules;\n  }\n\n  _fullKey(targetSpec){\n    var key = targetSpec.addon_key || 'global';\n    if(targetSpec.key){\n      key = `${key}@@${targetSpec.key}`;\n    }\n\n    return key;\n  }\n\n  queueEvent(type, targetSpec, event, callback) {\n    var loaded_frame,\n    targets = this._findRegistrations(targetSpec);\n\n    loaded_frame = targets.some((target) => {\n      return target.registered_events !== undefined;\n    }, this);\n\n    if(loaded_frame){\n      this.dispatch(type, targetSpec, event, callback);\n    } else {\n      this._pendingEvents[this._fullKey(targetSpec)] = {\n        type,\n        targetSpec,\n        event,\n        callback,\n        time: new Date().getTime(),\n        uid: Utils.randomString()\n      };\n    }\n  }\n\n  _handleEventQuery(message, extension) {\n    let executed = {};\n    let now = new Date().getTime();\n    let keys = Object.keys(this._pendingEvents);\n    keys.forEach((index) => {\n      let element = this._pendingEvents[index];\n      let eventIsValid = (now - element.time) <= VALID_EVENT_TIME_MS;\n      let isSameTarget = !element.targetSpec || this._findRegistrations(element.targetSpec).length !== 0;\n\n      if (eventIsValid && isSameTarget) {\n        executed[index] = element;\n        element.targetSpec = element.targetSpec || {};\n        element.targetSpec.addon_key = extension.extension.addon_key;\n        element.targetSpec.key = extension.extension.key;\n        this.dispatch(element.type, element.targetSpec, element.event, element.callback, message.source);\n      } else if (!eventIsValid) {\n        delete this._pendingEvents[index];\n      }\n    });\n\n    this._registeredExtensions[extension.extension_id].registered_events = message.data.args;\n\n    return executed;\n  }\n\n  dispatch(type, targetSpec, event, callback, source) {\n    function sendEvent(reg, evnt) {\n      if (reg.source) {\n        var mid;\n        if (callback) {\n          mid = Utils.randomString();\n          this._pendingCallbacks[mid] = callback;\n        }\n\n        reg.source.postMessage({\n          type: 'evt',\n          mid: mid,\n          etyp: type,\n          evnt: evnt\n        }, reg.extension.url);\n      }\n    }\n\n    var registrations = this._findRegistrations(targetSpec || {});\n    registrations.forEach(function (reg) {\n      if(source){\n        reg.source = source;\n      }\n\n      if (reg.source) {\n        Utils._bind(this, sendEvent)(reg, event);\n      }\n    }, this);\n  }\n\n  _findRegistrations(targetSpec) {\n    if(this._registeredExtensions.length === 0){\n      Utils.error('no registered extensions', this._registeredExtensions);\n      return [];\n    }\n    var keys = Object.getOwnPropertyNames(targetSpec);\n    var registrations = Object.getOwnPropertyNames(this._registeredExtensions).map((key) => {\n      return this._registeredExtensions[key];\n    });\n\n    if (targetSpec instanceof Function) {\n      return registrations.filter(targetSpec);\n    } else {\n      return registrations.filter(function (reg) {\n        return keys.every(function (key) {\n          return reg.extension[key] === targetSpec[key];\n        });\n      });\n    }\n  }\n\n  registerExtension(extension_id, data) {\n    // delete duplicate registrations\n    if(data.extension.addon_key && data.extension.key){\n      let existingView = this._findRegistrations({\n        addon_key: data.extension.addon_key,\n        key: data.extension.key\n      });\n      if(existingView.length !== 0){\n        delete this._registeredExtensions[existingView[0].extension_id];\n      }\n    }\n    data._proxies = {};\n    data.extension_id = extension_id;\n    this._registeredExtensions[extension_id] = data;\n  }\n\n  _keycodeKey(key, modifiers, extension_id) {\n    var code = key;\n\n    if(modifiers) {\n      if(typeof modifiers === \"string\") {\n        modifiers = [modifiers];\n      }\n      modifiers.sort();\n      modifiers.forEach((modifier) => {\n        code += '$$' + modifier;\n      }, this);\n    }\n\n    return code + '__' + extension_id;\n  }\n\n  registerKeyListener(extension_id, key, modifiers, callback) {\n    if(typeof modifiers === \"string\") {\n      modifiers = [modifiers];\n    }\n    var extension = this._registeredExtensions[extension_id];\n    var keycodeEntry = this._keycodeKey(key, modifiers, extension_id);\n    if(!this._keycodeCallbacks[keycodeEntry]) {\n      this._keycodeCallbacks[keycodeEntry] = [];\n      extension.source.postMessage({\n        type: 'key_listen',\n        keycode: key,\n        modifiers: modifiers,\n        action: 'add'\n      }, extension.source.location.href);\n    }\n    this._keycodeCallbacks[keycodeEntry].push(callback);\n  }\n\n  unregisterKeyListener(extension_id, key, modifiers, callback) {\n    var keycodeEntry = this._keycodeKey(key, modifiers, extension_id);\n    var potentialCallbacks = this._keycodeCallbacks[keycodeEntry];\n    var extension = this._registeredExtensions[extension_id];\n\n    if(potentialCallbacks) {\n      if(callback) {\n        var index = potentialCallbacks.indexOf(callback);\n         this._keycodeCallbacks[keycodeEntry].splice(index, 1);\n      } else {\n        delete this._keycodeCallbacks[keycodeEntry];\n      }\n\n      extension.source.postMessage({\n        type: 'key_listen',\n        keycode: key,\n        modifiers: modifiers,\n        action: 'remove'\n      }, extension.source.location.href);\n    }\n  }\n\n  getApiSpec() {\n    let that = this;\n    function createModule(moduleName) {\n      var module = that._registeredAPIModules[moduleName];\n      if(!module){\n        throw new Error(\"unregistered API module: \" + moduleName);\n      }\n      function getModuleDefinition(mod) {\n        return Object.getOwnPropertyNames(mod).reduce((accumulator, memberName) => {\n          const member = mod[memberName];\n          switch (typeof member) {\n            case 'function':\n              accumulator[memberName] = {\n                args: Utils.argumentNames(member)\n              };\n              break;\n            case 'object':\n              if (member.hasOwnProperty('constructor')) {\n                accumulator[memberName] = getModuleDefinition(member);\n              }\n              break;\n          }\n          return accumulator;\n        }, {});\n      }\n      return getModuleDefinition(module);\n    }\n    return Object.getOwnPropertyNames(this._registeredAPIModules).reduce((accumulator, moduleName) => {\n        accumulator[moduleName] = createModule(moduleName);\n        return accumulator;\n    }, {});\n  }\n\n\n  // validate origin of postMessage\n  _checkOrigin(event, reg) {\n    let no_source_types = ['init', 'event_query'];\n    let isNoSourceType = reg && !reg.source && no_source_types.indexOf(event.data.type) > -1;\n    let sourceTypeMatches = reg && event.source === reg.source;\n    let hasExtensionUrl = reg && reg.extension.url.indexOf(event.origin) === 0;\n    let isValidOrigin = hasExtensionUrl && (isNoSourceType || sourceTypeMatches);\n    if(!isValidOrigin) {\n        Utils.warn(\"Failed to validate origin: \" + event.origin);\n    }\n    return isValidOrigin;\n  }\n\n  getRegisteredExtensions(filter) {\n    if(filter) {\n      return this._findRegistrations(filter);\n    }\n    return this._registeredExtensions;\n  }\n\n  unregisterExtension(filter) {\n    let registrations = this._findRegistrations(filter);\n    if(registrations.length !== 0){\n      registrations.forEach(function(registration) {\n        let keys = Object.keys(this._pendingEvents);\n        keys.forEach((index) => {\n          let element = this._pendingEvents[index];\n          let targetSpec = element.targetSpec || {};\n\n          if (targetSpec.addon_key === registration.extension.addon_key) {\n            delete this._pendingEvents[index];\n          }\n        });\n\n        delete this._registeredExtensions[registration.extension_id];\n      }, this);\n    }\n  }\n\n}\n\nmodule.exports = XDMRPC;\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/simple-xdm/src/host/xdmrpc.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-names\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/get-own-property-names.js\n ** module id = 383\n ** module chunks = 0\n **/","var $ = require('../../modules/$');\nrequire('../../modules/es6.object.get-own-property-names');\nmodule.exports = function getOwnPropertyNames(it){\n  return $.getNames(it);\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/get-own-property-names.js\n ** module id = 384\n ** module chunks = 0\n **/","// 19.1.2.7 Object.getOwnPropertyNames(O)\nrequire('./$.object-sap')('getOwnPropertyNames', function(){\n  return require('./$.get-names').get;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.get-own-property-names.js\n ** module id = 385\n ** module chunks = 0\n **/","const LOG_PREFIX = \"[Simple-XDM] \";\n\nclass Util {\n\n  locationOrigin() {\n    if (!window.location.origin) {\n      return window.location.protocol + \"//\" + window.location.hostname + ( window.location.port ? ':' + window.location.port : '' );\n    } else {\n      return window.location.origin;\n    }\n  }\n\n  randomString() {\n    return Math.floor(Math.random() * 1000000000).toString(16);\n  }\n\n  isString(str) {\n    return typeof str === \"string\" || str instanceof String;\n  }\n\n  argumentsToArray(arrayLike) {\n    return Array.prototype.slice.call(arrayLike);\n  }\n\n  argumentNames(fn) {\n    return fn.toString()\n      .replace(/((\\/\\/.*$)|(\\/\\*[^]*?\\*\\/))/mg, '') // strip comments\n      .replace(/[^(]+\\(([^)]*)[^]+/, '$1') // get signature\n      .match(/([^\\s,]+)/g) || [];\n  }\n\n  hasCallback(args) {\n    var length = args.length;\n    return length > 0 && typeof args[length - 1] === 'function';\n  }\n\n  error(msg) {\n      if (window.console) {\n          console.error(LOG_PREFIX + msg);\n      }\n  }\n\n  warn(msg) {\n      if (window.console) {\n          console.warn(LOG_PREFIX + msg);\n      }\n  }\n\n  _bind(thisp, fn){\n    if(Function.prototype.bind) {\n      return fn.bind(thisp);\n    }\n    return function () {\n      return fn.apply(thisp, arguments);\n    };\n  }\n\n  each(o, it) {\n    var l;\n    var k;\n    if (o) {\n      l = o.length;\n      if (l != null && typeof o !== 'function') {\n        k = 0;\n        while (k < l) {\n          if (it.call(o[k], k, o[k]) === false){\n            break;\n          }\n          k += 1;\n        }\n      } else {\n        for (k in o) {\n          if (o.hasOwnProperty(k)) {\n            if (it.call(o[k], k, o[k]) === false){\n              break;\n            }\n          }\n        }\n      }\n    }\n  }\n\n  extend(dest) {\n    var args = arguments;\n    var srcs = [].slice.call(args, 1, args.length);\n    srcs.forEach(function(source) {\n      if(typeof source === \"object\") {\n        Object.getOwnPropertyNames(source).forEach(function (name) {\n          dest[name] = source[name];\n        });\n      }\n    });\n    return dest;\n  }\n\n}\n\nmodule.exports = new Util();\n\n\n/** WEBPACK FOOTER **\n ** ./~/simple-xdm/src/common/util.js\n **/","import Util from './util';\nclass PostMessage {\n\n  constructor(data) {\n    let d = data || {};\n    this._registerListener(d.listenOn);\n  }\n\n // listen for postMessage events (defaults to window).\n  _registerListener(listenOn) {\n    if(!listenOn || !listenOn.addEventListener) {\n      listenOn = window;\n    }\n    listenOn.addEventListener(\"message\", Util._bind(this, this._receiveMessage), false);\n  }\n\n  _receiveMessage (event) {\n    let extensionId = event.data.eid,\n    reg;\n\n    if(extensionId && this._registeredExtensions){\n      reg = this._registeredExtensions[extensionId];\n    }\n\n    if (!this._checkOrigin(event, reg)) {\n      return false;\n    }\n\n    var handler = this._messageHandlers[event.data.type];\n    if (handler) {\n      handler.call(this, event, reg);\n    }\n  }\n\n}\n\nmodule.exports = PostMessage;\n\n\n/** WEBPACK FOOTER **\n ** ./~/simple-xdm/src/common/postmessage.js\n **/","import ModalDialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\nimport DialogActions from \"actions/dialog_actions\";\nimport AnalyticsActions from 'actions/analytics_actions';\nimport QuickSwitcherContent from \"./quick_switcher_content\";\nimport utils from 'helpers/utils';\n\nexport default React.createClass({\n\n  displayName: \"QuickSwitcherDialog\",\n\n  mixins: [ModalDialogVisibilityMixin],\n\n  componentDidMount () {\n    AnalyticsActions.quickSwitcherViewed();\n    document.querySelector(\"body\").addEventListener('keydown', this._onKeyDown, true);\n    this._focusInput();\n  },\n\n  componentWillUnmount () {\n    clearTimeout(this.timeout);\n    document.querySelector(\"body\").removeEventListener('keydown', this._onKeyDown, true);\n  },\n\n  close () {\n    if (!this.timeout){\n      this.timeout = setTimeout(() => {\n        DialogActions.closeDialog();\n      }, 300);\n    }\n  },\n\n  _onKeyDown (e) {\n    var key = (window.Event) ? e.which : e.keyCode;\n    if (key === utils.keyCode.Esc) {\n      e.stopPropagation();\n      e.preventDefault();\n      this.close();\n    }\n  },\n\n  _focusInput () {\n    var $input = $(ReactDOM.findDOMNode(this.refs.qs_content)).find(\"input\");\n    if ($input.length) {\n      $input.focus();\n    }\n  },\n\n  render () {\n    return (\n      <section role=\"dialog\" id=\"quick-switcher-dialog\" className=\"hc-qs\" aria-hidden={!this.state.dialogVisible}>\n        <QuickSwitcherContent ref=\"qs_content\" hideHint={this.props.hideHint}/>\n      </section>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_dialog.js\n **/","import QuickSwitcherInput from './quick_switcher_input';\nimport QuickSwitcherEmptyState from './quick_switcher_empty_state';\nimport QuickSwitcherHint from './quick_switcher_hint';\nimport QuickSwitcherStore from 'stores/quick_switcher_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport ClientPrefKeys from 'keys/client_preferences_keys';\nimport QuickSwitcherActions from 'actions/quick_switcher_actions';\nimport QuickSwitcherPerson from './quick_switcher_person';\nimport QuickSwitcherRoom from './quick_switcher_room';\nimport utils from 'helpers/utils';\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: 'QuickSwitcherContent',\n\n  componentDidMount () {\n    QuickSwitcherStore.on(['change'], this._onChange);\n    PreferencesStore.on([`change:${ClientPrefKeys.SHOW_QUICK_SWITCHER_HINT}`], this._onChange);\n    this._throttledScrollToSelected = _.throttle(this._scrollToSelected, 100, {leading: false, trailing: true});\n  },\n\n  componentWillUnmount () {\n    QuickSwitcherStore.off(['change'], this._onChange);\n    PreferencesStore.off([`change:${ClientPrefKeys.SHOW_QUICK_SWITCHER_HINT}`], this._onChange);\n    QuickSwitcherActions.reset();\n    this._throttledScrollToSelected.cancel();\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    // only fire the event if we are going from some results to no results.\n    if(nextState.total === 0 && this.state.total > 0) {\n      AnalyticsActions.quickSwitcherNoResults(nextState.text);\n    }\n  },\n\n  componentDidUpdate () {\n    ReactDOM.findDOMNode(this.refs.input.refs.input_field).focus();\n  },\n\n  getInitialState () {\n    return this._getState();\n  },\n\n  _getState () {\n    var qsData = QuickSwitcherStore.getAll();\n\n    return {\n      text: qsData.text,\n      filtered: qsData.filtered,\n      filtered_time: qsData.filtered_time,\n      selected_item: qsData.selected_item,\n      rows: qsData.list,\n      total: qsData.list.length,\n      show_hint: PreferencesStore.getShowQuickSwitcherHint(),\n      should_animate_avatar: PreferencesStore.shouldAnimateAvatars()\n    };\n  },\n\n  _onChange () {\n    this.setState(this._getState());\n  },\n\n  _getEmptyState() {\n    var empty_state = null;\n\n    if (this.state.text && !this.state.total && this.state.filtered) {\n      empty_state = <QuickSwitcherEmptyState ref='empty_state'/>;\n    }\n\n    return empty_state;\n  },\n\n  _getHint() {\n    var hint = null;\n\n    if (this.state.show_hint && !this.props.hideHint) {\n      hint = <QuickSwitcherHint ref='qs_hint' with_results={this.state.total > 0}/>;\n    }\n\n    return hint;\n  },\n\n  _scrollTop() {\n    if (this.refs.scrollable){\n      this.refs.scrollable.scrollTo(0);\n    }\n  },\n\n  _scrollToSelected() {\n\n    if (!this.refs.scrollable || !this.state.rows.length){\n      return;\n    }\n\n    var container = ReactDOM.findDOMNode(this.refs.scrollable_wrap),\n        rowHeight = document.getElementsByClassName('hc-qs-item')[0].clientHeight,\n        start = Math.ceil(container.scrollTop / rowHeight),\n        end = Math.floor((container.clientHeight + container.scrollTop) / rowHeight);\n\n    if (this.state.selected_item < start || this.state.selected_item > end - 1){\n      let selected_item = container.querySelector('.hc-qs-item.selected');\n      if (!selected_item){\n        selected_item = container.querySelector('.hc-qs-item-container:last-child .hc-qs-item');\n      }\n      utils.scrollIntoViewIfNeeded(selected_item, container, false);\n    }\n  },\n\n  renderItem(index, key){\n\n    var item = this.state.rows[index],\n        rendered_item;\n\n    if (item.item_type === 'user') {\n      let mention_markup = `@${item.mention_match_markup}`;\n      rendered_item = <QuickSwitcherPerson key={'qs-item-' + item.jid}\n        name={item.name}\n        id={item.id}\n        name_markup={item.name_match_markup}\n        mention_name={item.mention_name}\n        mention_markup={mention_markup}\n        jid={item.jid}\n        photo_url={item.photo_url}\n        show={item.presence_show}\n        mobile={item.presence_mobile}\n        idx={index}\n        should_animate_avatar={this.state.should_animate_avatar}\n        selected={this.state.selected_item === index} />;\n    } else {\n      rendered_item = <QuickSwitcherRoom key={'qs-item-' + item.jid}\n        name={item.name}\n        name_markup={item.name_match_markup}\n        jid={item.jid}\n        privacy={item.privacy}\n        idx={index}\n        selected={this.state.selected_item === index} />;\n    }\n\n    return (\n      <div key={key} className=\"hc-qs-item-container\">\n        { rendered_item }\n      </div>\n    );\n  },\n\n  render() {\n\n    var scrollableWrapClasses = cx({\n          'hc-qs-list-wrap': true,\n          'with-hint': this.state.show_hint\n        }),\n        empty_state = this._getEmptyState(),\n        hint = this._getHint();\n\n    return (\n      <div className='hc-qs-content'>\n        <QuickSwitcherInput\n          text={this.state.text}\n          scrollTop={this._scrollTop}\n          canNavigate={this.state.rows.length > 0}\n          scrollToSelected={this._throttledScrollToSelected}\n          ref='input'/>\n        <div ref='scrollable_wrap' className={scrollableWrapClasses}>\n          { empty_state }\n          <ReactList\n            ref='scrollable'\n            itemRenderer={this.renderItem}\n            length={this.state.rows.length}\n            selected={this.state.selected_item}\n            filtered_time={this.state.filtered_time}\n            threshold={10}\n            type='simple'/>\n        </div>\n        { hint }\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_content.js\n **/","import QuickSwitcherActions from 'actions/quick_switcher_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport strings from 'strings/quick_switcher_strings';\nimport utils from 'helpers/utils';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: 'QuickSwitcherInput',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    scrollTop: React.PropTypes.func,\n    scrollToSelected: React.PropTypes.func,\n    text: React.PropTypes.string,\n    canNavigate: React.PropTypes.bool\n  },\n\n  componentDidMount () {\n    this.debouncedFilter = _.debounce(this._filter, 150);\n  },\n\n  componentWillUnmount () {\n    this.debouncedFilter.cancel();\n  },\n\n  _onInputChange (e) {\n    QuickSwitcherActions.setInputText({\n      text: e.target.value\n    });\n    this.debouncedFilter();\n  },\n\n  _filter () {\n    QuickSwitcherActions.filter();\n    this.props.scrollTop();\n  },\n\n  _onKeyDown (e) {\n\n    if (e.keyCode === utils.keyCode.UpArrow || e.keyCode === utils.keyCode.DownArrow){\n      e.preventDefault();\n      mousePosition.useLatest();\n\n      if (!this.props.canNavigate){\n        return;\n      }\n\n      if (e.keyCode === utils.keyCode.UpArrow) {\n        QuickSwitcherActions.selectPrev();\n        this.props.scrollToSelected();\n      }\n\n      if (e.keyCode === utils.keyCode.DownArrow) {\n        QuickSwitcherActions.selectNext();\n        this.props.scrollToSelected();\n      }\n    } else if (e.keyCode === utils.keyCode.Tab){\n      e.preventDefault();\n    } else if (e.keyCode === utils.keyCode.Enter) {\n      e.preventDefault();\n      DialogActions.closeDialog();\n      QuickSwitcherActions.selectItem();\n    }\n  },\n\n  render () {\n\n    /*\n     * HC-19280 Using an absolutely positioned label instead of an input placeholder here b/c IE10 & 11\n     * hide placeholders when the input is focused. Since the quick-switcher opens up focused,\n     * there's no visible instructions as to what this dialog is for\n     */\n    let labelClass = this.props.text.length ? 'hidden' : '';\n\n    return (\n      <div className='hc-qs-input-wrap'>\n        <form className='aui' autoComplete='off'>\n          <label ref='input_label' htmlFor='quickSwitcher' className={ labelClass }>{strings.input_placeholder}</label>\n          <input name='quickSwitcher'\n            id='quickSwitcher'\n            className='text long-field hc-qs-input'\n            type='text'\n            ref='input_field'\n            onChange={this._onInputChange}\n            onKeyDown={this._onKeyDown}\n            value={this.props.text} />\n        </form>\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_input.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  setInputText(data) {\n    AppDispatcher.dispatch('qs-input-value', data);\n  },\n\n  selectPrev() {\n    AppDispatcher.dispatch('qs-select-prev');\n  },\n\n  selectNext() {\n    AppDispatcher.dispatch('qs-select-next');\n  },\n\n  selectItem() {\n    AppDispatcher.dispatch('qs-select-item');\n  },\n\n  itemHovered(data) {\n    AppDispatcher.dispatch('qs-item-hover', {\n      index: data.index\n    });\n  },\n\n  reset() {\n    AppDispatcher.dispatch('qs-reset');\n  },\n\n  filter() {\n    AppDispatcher.dispatch('qs-filter');\n  },\n\n  hideHint() {\n    AppDispatcher.dispatch('qs-hide-hint');\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/quick_switcher_actions.js\n **/","export default {\n  input_placeholder: `Find rooms and people`,\n  empty_state: `Nothing matches your search`,\n  hint_text: `Quickly open this dialog with`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/quick_switcher_strings.js\n **/","import strings from 'strings/quick_switcher_strings';\n\nexport default React.createClass({\n\n  displayName: \"QuickSwitcherEmptyState\",\n\n  render() {\n    return (\n      <div className=\"hc-qs-list\">\n        <div className=\"hc-qs-item hc-qs-empty-state\" ref=\"text\">\n          {strings.empty_state}\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_empty_state.js\n **/","import QuickSwitcherActions from 'actions/quick_switcher_actions';\nimport KeyboardShortcutStrings from 'strings/keyboard_shortcut_strings';\nimport keyboardShortcuts from 'helpers/keyboard_shortcuts';\nimport strings from 'strings/quick_switcher_strings';\nimport utils from \"helpers/utils\";\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: 'QuickSwitcherHint',\n\n  componentWillMount() {\n    let keyCommand = keyboardShortcuts.getCommandByTitle(KeyboardShortcutStrings.new_chat);\n    if (keyCommand) {\n      this._keyCommand = keyCommand.join('+').toUpperCase();\n    }\n  },\n\n  getIcon() {\n    let icon;\n\n    if (utils.platform.isMac()) {\n      icon = (\n        <span className='hc-qs-hint-key mac-hint-key'>\n          {KeyboardShortcutStrings.command}\n        </span>\n      );\n    } else {\n      icon = (\n        <span className='hc-qs-hint-key'>\n          <span className='aui-icon aui-icon-small aui-iconfont-info' />\n        </span>\n      );\n    }\n    return icon;\n  },\n\n  _onClick() {\n    QuickSwitcherActions.hideHint();\n  },\n\n  render() {\n\n    let classes = cx({\n          'hc-qs-hint': true,\n          'hidden': !this._keyCommand,\n          'with-results': this.props.with_results\n        }),\n        hint_icon = this.getIcon();\n\n    return (\n      <div className={classes} ref='hint'>\n        {hint_icon}\n        <span className='hc-qs-hint-text'>\n          {`${strings.hint_text} ${this._keyCommand}`}\n        </span>\n        <span\n          onClick={this._onClick}\n          ref='close_hint'\n          className='aui-icon aui-icon-small aui-iconfont-remove-label hc-qs-hint-close'>\n        </span>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_hint.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AppStore from \"./application_store\";\nimport ClientPrefKeys from \"keys/client_preferences_keys\";\nimport PreferencesActions from 'actions/preferences_actions';\nimport Store from 'lib/core/store';\nimport { chatSearch } from 'helpers/chat_search';\nimport utils from 'helpers/utils';\n\nclass QuickSwitcherStore extends Store {\n\n  constructor() {\n    super();\n\n    this.local = this.getLocalDefaults();\n  }\n\n  getDefaults() {\n    return {\n      text: '',\n      list: [],\n      filtered: false,\n      filtered_time: null,\n      selected_item: 0\n    };\n  }\n\n  getLocalDefaults() {\n    return {\n      enabled: false,\n      all: [],\n      active: {},\n      rooms: [],\n      roster: []\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'qs-input-value': (data) => {\n        this.handleInputValueChange(data.text);\n      },\n      'qs-item-hover': (data) => {\n        this.set({\n          selected_item: data.index\n        });\n      },\n      'qs-select-item': () => {\n        this.selectItem();\n      },\n      'qs-select-prev': () => {\n        this.selectPrev();\n      },\n      'qs-select-next': () => {\n        this.selectNext();\n      },\n      'qs-filter': () => {\n        this.filterList(true);\n      },\n      'qs-reset': () => {\n        this.resetQuickSwitcher();\n      },\n      'qs-hide-hint': () => {\n        this.hideHint();\n      },\n      'before:show-modal-dialog': (data) => {\n        this.enableQuickSwitcher(data);\n      },\n      'before:hide-modal-dialog': () => {\n        this.disableQuickSwitcher();\n      },\n      'updated:roster': () => {\n        if (this.local.enabled) {\n          this.setupLocalData();\n          this.filterList();\n        }\n      }\n    });\n  }\n\n  enableQuickSwitcher(data) {\n    if (!this.local.enabled && _.get(data, \"dialog_type\") === \"quick-switcher-dialog\") {\n      this.local.enabled = true;\n      this.setupLocalData();\n    }\n  }\n\n  disableQuickSwitcher() {\n    if (this.local.enabled) {\n      this.clearLocalData();\n    }\n  }\n\n  setupLocalData() {\n    this.updateRooms(AppStore.get(\"allRooms\"));\n    this.updateActive(AppStore.get(\"activeRooms\"));\n    this.updateRoster(AppStore.get(\"roster\"));\n  }\n\n  clearLocalData() {\n    this.local = this.getLocalDefaults();\n  }\n\n  filterList(forceUpdate = false) {\n    var query = this.data.text;\n\n    if (query) {\n      let priorities = _.keysIn(this.local.active),\n          sorted_list = chatSearch(this.local.all, query, priorities);\n\n      if (forceUpdate || this.data.selected_item > sorted_list.length - 1){\n        this.data.selected_item = 0;\n      }\n\n      this.set({\n        list: sorted_list,\n        filtered_time: new Date().getTime(),\n        selected_item: this.data.selected_item,\n        filtered: true\n      });\n\n    } else {\n      this.set({\n        list: [],\n        selected_item: 0,\n        filtered_time: null,\n        filtered: false\n      });\n    }\n  }\n\n  handleInputValueChange(text) {\n    this.set({\n      text: text,\n      filtered: false\n    });\n  }\n\n  updateAll() {\n    this.local.all = _.map(this.local.all, (chat) => {\n      if (this.local.active[chat.jid]){\n        _.assign(chat, this.local.active[chat.jid]);\n      } else {\n        // for not active rooms\n        _.assign(chat, {\n            unreadCount: 0,\n            unreadMentionCount: 0,\n            hasMention: false\n        });\n      }\n      return chat;\n    });\n  }\n\n  updateActive(updated_rooms) {\n    this.local.active = _.mapValues(updated_rooms, (room) => {\n      return _.pick(room, 'unreadCount', 'unreadMentionCount', 'hasMention');\n    });\n    this.updateAll();\n  }\n\n  updateRooms(updated_rooms) {\n    var rooms = [];\n    _.forOwn(updated_rooms, function(room) {\n      rooms.push({\n        item_type: 'room',\n        name: room.name,\n        jid: room.jid,\n        privacy: room.privacy\n      });\n    });\n    this.local.rooms = rooms;\n    this.updateAndConcatAll();\n  }\n\n  removeGuests(roster) {\n    return _.reject(roster, utils.user.is_guest);\n  }\n\n  mapUserData(user) {\n    return {\n      item_type: 'user',\n      id: user.id,\n      name: user.display_name || user.name,\n      mention_name: user.mention_name,\n      jid: user.jid,\n      photo_url: user.photo_url,\n      presence_show: user.presence.show,\n      presence_mobile: user.presence.mobile\n    };\n  }\n\n  updateRoster(updated_roster) {\n    // The roster comes in as an object. Mapping the values of it to an array.\n    var roster = _.values(updated_roster);\n\n    this.local.roster = this.removeGuests(roster).map(this.mapUserData);\n    this.updateAndConcatAll();\n  }\n\n  updateAndConcatAll() {\n    this.local.all = [].concat(this.local.roster, this.local.rooms);\n    this.updateAll();\n  }\n\n  selectItem() {\n    var item = this.data.list[this.data.selected_item];\n\n    if (!item){ return; }\n\n    AppDispatcher.dispatch('set-route', {\n      jid: item.jid\n    });\n    AnalyticsDispatcher.dispatch('analytics-open-room', {\n      jid: item.jid,\n      source: 'switcher'\n    });\n  }\n\n  selectNext() {\n    var selected_item;\n    if (this.data.selected_item !== (this.data.list.length - 1)) {\n      selected_item = this.data.selected_item + 1;\n    }\n    this.set('selected_item', selected_item);\n  }\n\n  selectPrev() {\n    var selected_item;\n    if (this.data.selected_item !== 0) {\n      selected_item = this.data.selected_item - 1;\n    }\n    this.set('selected_item', selected_item);\n  }\n\n  resetQuickSwitcher() {\n    this.set({\n      text: '',\n      list: [],\n      selected_item: 0,\n      filtered: false\n    });\n  }\n\n  hideHint() {\n    PreferencesActions.savePreferences({\n      [ClientPrefKeys.SHOW_QUICK_SWITCHER_HINT]: false\n    });\n  }\n}\n\nexport default new QuickSwitcherStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/quick_switcher_store.js\n **/","import PersonAvatar from 'components/common/avatars/person_avatar';\nimport QuickSwitcherActions from 'actions/quick_switcher_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: 'QuickSwitcherPerson',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    'selected': React.PropTypes.bool,\n    'photo_url': React.PropTypes.string,\n    'name': React.PropTypes.string,\n    'name_markup': React.PropTypes.string,\n    'mention_name': React.PropTypes.string,\n    'mention_markup': React.PropTypes.string,\n    'show': React.PropTypes.string,\n    'mobile': React.PropTypes.string,\n    'idx': React.PropTypes.number,\n    'id': React.PropTypes.oneOfType([React.PropTypes.number, React.PropTypes.string]),\n    'should_animate_avatar': React.PropTypes.bool\n  },\n\n  _onEnter (evt) {\n    if (mousePosition.hasChanged(evt)) {\n      QuickSwitcherActions.itemHovered({\n        index: this.props.idx\n      });\n    }\n  },\n\n  _onClick (e) {\n    e.preventDefault();\n    DialogActions.closeDialog();\n    QuickSwitcherActions.selectItem();\n  },\n\n  render () {\n    let classes = cx({\n      'hc-qs-item': true,\n      'selected': this.props.selected\n    });\n\n    return (\n      <div className={classes} onClick={this._onClick} onMouseEnter={this._onEnter}>\n        <span className='hc-qs-aui-avatar'>\n          <PersonAvatar\n            avatar_url={this.props.photo_url}\n            size='medium'\n            uid={this.props.id}\n            presence={this.props.show}\n            mobile={this.props.mobile}\n            shouldAnimate={this.props.should_animate_avatar}\n            active='false'/>\n        </span>\n        <span className='hc-qs-name' dangerouslySetInnerHTML={{__html: this.props.name_markup || this.props.name }} />\n        <span className='hc-qs-mention-name' dangerouslySetInnerHTML={{__html: this.props.mention_markup || this.props.mention_name }} />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_person.js\n **/","import QuickSwitcherActions from \"actions/quick_switcher_actions\";\nimport DialogActions from \"actions/dialog_actions\";\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: \"QuickSwitcherRoom\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    \"selected\": React.PropTypes.bool,\n    \"name\": React.PropTypes.string,\n    \"name_markup\": React.PropTypes.string,\n    \"privacy\": React.PropTypes.string,\n    \"idx\": React.PropTypes.number\n  },\n\n  _onEnter (evt) {\n    if (mousePosition.hasChanged(evt)) {\n      QuickSwitcherActions.itemHovered({\n        index: this.props.idx\n      });\n    }\n  },\n\n  _onClick (e) {\n    e.preventDefault();\n    DialogActions.closeDialog();\n    QuickSwitcherActions.selectItem();\n  },\n\n  render() {\n\n    let classes = cx({\n          \"hc-qs-item\": true,\n          \"selected\": this.props.selected\n        });\n\n    return (\n      <div className={classes} onClick={this._onClick} onMouseEnter={this._onEnter}>\n        <span className={\"hc-qs-room-icon aui-icon hipchat-icon-medium icon-\" + (this.props.privacy || 'dot')}></span>\n        <span className=\"hc-qs-name\" dangerouslySetInnerHTML={{__html: this.props.name_markup || this.props.name }} />\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/quick_switcher/quick_switcher_room.js\n **/","import ModalDialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\nimport DialogActions from 'actions/dialog_actions';\nimport cookies from 'helpers/cookies.js';\nimport config from 'config/app_config';\nimport utils from \"helpers/utils\";\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"InviteTeammatesDialog\",\n\n  mixins: [ModalDialogVisibilityMixin],\n\n  componentDidMount() {\n    this._setClientCookie();\n    this._getIframe().on(\"load\", this._onIframeLoad);\n    this.spinTimer = _.delay(() => {\n      if (!this._getIframe().hasClass('loaded')) {\n        AJS.$(\"#invite-teammates-dialog >.aui-dialog2-content\").spin('large');\n      }\n    }, config.modal_transition_allowance);\n    $(window).on('beforeunload', this._removeClientCookie);\n  },\n\n  componentWillUnmount() {\n    this._removeClientCookie();\n    clearTimeout(this.spinTimer);\n    this._getIframe().off(\"load\", this._onIframeLoad);\n    $(window).off('beforeunload', this._removeClientCookie);\n  },\n\n  _setClientCookie: function () {\n    cookies.setItem(\"client\", \"web\");\n  },\n\n  _removeClientCookie: function () {\n    cookies.removeItem(\"client\", \"web\");\n  },\n\n  _onIframeLoad() {\n    AJS.$(\"#invite-teammates-dialog >.aui-dialog2-content\").spinStop();\n    this._getIframe().addClass(\"loaded\");\n    var $body = $(this._getIframeBody());\n    $body.find(\"#btn_copy_invite_link\").remove();\n    $body.find(\".external-link\").click((e) => {\n      var $target = $(e.target);\n      $target.attr(\"target\", \"_blank\");\n      $target.attr(\"href\", this._getExternalUrl($target.attr(\"href\")));\n    });\n    $body.find(\"a[href='#hcnative:close']\").click(this._close);\n    $body.on('keydown', this._onKeyDown);\n    $body.find(\"#btn_send_invites\").click((e) => {\n      if ($(e.target).attr('aria-disabled') !== 'true'){\n        let number = $(e.target).text().replace(/\\D/g,'');\n        if (this.state.dialogData && this.state.dialogData.type){\n          AnalyticsActions.inviteTeamSent(this.state.dialogData.type, number);\n        }\n      }\n    });\n  },\n\n  _getExternalUrl: function(href) {\n    var url;\n\n    var key = \"#hcnative:externalLinkClicked:\";\n\n    var keyIndex = href.indexOf(key);\n    if (keyIndex > -1) {\n      var uri = decodeURIComponent(href.substr(keyIndex + key.length));\n      try {\n        var data = JSON.parse(uri);\n        url = data.url;\n      } catch (e) {\n        url = null;\n      }\n    }\n\n    return url;\n  },\n\n  _getIframe() {\n    return $(ReactDOM.findDOMNode(this.refs.inviteUsersIframe));\n  },\n\n  _getIframeBody() {\n    return _.get(this._getIframe().get(0), 'contentWindow.document.body');\n  },\n\n  _close() {\n    DialogActions.closeDialog();\n  },\n\n  _onKeyDown: function (e) {\n    var key = (window.Event) ? e.which : e.keyCode;\n    if (key === utils.keyCode.Esc) {\n      this._close();\n    }\n  },\n\n  _dialogBody: function () {\n    return <iframe ref=\"inviteUsersIframe\" id=\"invite-users-frame\" src={`https://${this.props.web_server}/native/invite?default_text=${this.props.default_text || ''}`}></iframe>;\n  },\n\n  render: function () {\n    return (\n      <section role=\"dialog\" id=\"invite-teammates-dialog\" className=\"aui-layer aui-dialog2 aui-dialog2-medium\"\n        aria-hidden={!this.state.dialogVisible}>\n        <div className=\"aui-dialog2-content\">\n          {this._dialogBody()}\n        </div>\n      </section>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/invite_teammates_dialog/invite_teammates_dialog.js\n **/","module.exports = {\n  getItem: function (sKey) {\n    if (!sKey) { return null; }\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n  },\n  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n    if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n    var sExpires = \"\";\n    if (vEnd) {\n      switch (vEnd.constructor) {\n        case Number:\n          sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\n          break;\n        case String:\n          sExpires = \"; expires=\" + vEnd;\n          break;\n        case Date:\n          sExpires = \"; expires=\" + vEnd.toUTCString();\n          break;\n      }\n    }\n    document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n    return true;\n  },\n  removeItem: function (sKey, sPath, sDomain) {\n    if (!this.hasItem(sKey)) { return false; }\n    document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\n    return true;\n  },\n  hasItem: function (sKey) {\n    if (!sKey) { return false; }\n    return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n  },\n  keys: function () {\n    var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n    for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\n    return aKeys;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/cookies.js\n **/","import ModalDialog from \"components/common/modal_dialog/modal_dialog\";\nimport RoomsNavStore from \"stores/rooms_nav_store\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FlagActions from \"actions/flag_actions\";\nimport strings from 'strings/dialog_strings';\nimport RoomDropDownActions from \"actions/room_dropdown_actions\";\nimport DialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\n\nexport default React.createClass({\n\n  displayName: \"GuestAccessDialog\",\n\n  mixins: [DialogVisibilityMixin],\n\n  getInitialState: function () {\n    return this._getActiveChatState();\n  },\n\n  _getActiveChatState: function () {\n    return {\n      active_chat: RoomsNavStore.get(\"active_chat\"),\n      rooms: RoomsNavStore.get(\"rooms\")\n    };\n  },\n\n  _dialogBody: function () {\n    return (\n      <div>\n        <p><strong>{strings.really_disable_guest}</strong></p>\n        <p>{strings.confirm_disable_guest}</p>\n      </div>\n    );\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button onClick={this._onFooterButtonClicked} className=\"aui-button aui-button-primary\" aria-disabled={this.state.btnLoading} disabled={this.state.btnLoading}>{strings.ok}</button>\n    );\n  },\n\n  _onFooterButtonClicked: function(e) {\n    e.preventDefault();\n    this._disableGuestAccess();\n  },\n\n  _disableGuestAccess: function () {\n    DialogActions.startBtnLoading();\n\n    RoomDropDownActions.disableGuestAccess({\n      jid: this.state.active_chat\n    }, this._disableGuestCallback);\n  },\n\n  _disableGuestCallback: function (error) {\n    if (error) {\n      this._throwFlagError(error.message || strings.disable_guest_fail);\n    }\n    DialogActions.closeDialog();\n  },\n\n  _throwFlagError: function (errorMessage) {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: this._flagBody(errorMessage),\n      close: \"manual\"\n    });\n  },\n\n  _flagBody: function (errorMessage) {\n    return () => (\n      <div>\n        <p className=\"hc-message-body\">{errorMessage}</p>\n        <ul className=\"aui-nav-actions-list\">\n          <li><a onClick={this._flagActionClick} href=\"#\">{strings.try_again}</a></li>\n        </ul>\n      </div>\n    );\n  },\n\n  _flagActionClick: function (e) {\n    e.preventDefault();\n    var flag_index = $(e.target).closest(\".flag\").data('flag-index');\n    FlagActions.removeFlag(flag_index);\n    this._showDialog();\n  },\n\n  _showDialog: function () {\n    DialogActions.showDisableGuestAccessDialog();\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"disable-guest-dialog\"\n        title={strings.disable_guest}\n        dialogBody={this._dialogBody}\n        dialogFooterButton={this._dialogFooterButton}\n        btnLoading={this.state.btnLoading}\n        closeLinkText={strings.cancel} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/guest_access_dialog/guest_access_dialog.js\n **/","import ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport strings from 'strings/dialog_strings';\nimport RoomNotificationsForm from 'components/forms/room_notifications_form';\nimport ieSubmitMixin from 'components/mixins/ie_submit_mixin';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomNotificationsDialog\",\n\n  mixins: [ieSubmitMixin],\n\n  _dialogBody: function () {\n    return (\n      <RoomNotificationsForm jid={this.props.jid} room_name={this.props.room_name} />\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"room-notifications-dialog\"\n        title={strings.room_notifications}\n        size=\"small\"\n        dialogBody={this._dialogBody}\n        noCloseLink={true} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/room_notifications_dialog/room_notifications_dialog.js\n **/","import AuiFieldSet from 'components/common/aui/form/aui_form_fieldset';\nimport AuiRadio from 'components/common/aui/form/aui_radio';\nimport DialogActions from 'actions/dialog_actions';\nimport strings from 'strings/forms_strings';\nimport dialogStrings from 'strings/dialog_strings';\nimport PreferencesStore from 'stores/preferences_store';\nimport CurrentUserStore from 'stores/current_user_store';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomNotificationsForm\",\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  _getNotificationSettings() {\n    return _.get(PreferencesStore.getRoomNotificationOverrides(), this.props.jid, {});\n  },\n\n  _saveNotificationSettings(newSettings) {\n    // if they set it back to the global settings, let's remove the override\n    // otherwise let's save their overriden settings\n    if(newSettings.level === \"global\") {\n      PreferencesStore.removeRoomNotificationOverride(this.props.jid);\n    } else {\n      // save it to the server\n      PreferencesStore.overrideNotificationForRoom(this.props.jid, newSettings);\n    }\n  },\n\n  /**\n   * This function exists to help us understand how to properly keep the two sets of radios\n   * properly sync'd up.\n   */\n  _getSelection(event) {\n    var targetId = _.get(event, \"target.id\", \"notif-global\"),\n        retVal = {\n          is_overridden: true\n        };\n\n    switch(targetId) {\n      case \"notif-loud\":\n        retVal.level = \"loud\";\n        break;\n      case \"notif-normal\":\n        retVal.level = \"normal\";\n        break;\n      case \"notif-quiet\":\n        retVal.level = \"quiet\";\n        break;\n      case \"notif-custom\":\n        retVal.level = this.state.global_setting;\n        break;\n      case \"notif-global\":\n        retVal.level = \"global\";\n        retVal.is_overridden = false;\n        break;\n    }\n\n    return retVal;\n  },\n\n  _onChange(event) {\n    var inputInfo = this._getSelection(event);\n\n    // if they've actually changed the value, or if they've changed between global and custom, fire an analytics event\n    if(this.state.level !== inputInfo.level || this.state.is_overridden !== inputInfo.is_overridden) {\n      AnalyticsActions.roomNotificationLevelChanged(this.state.level, inputInfo.level);\n    }\n    var newVal = _.merge({}, this._getState(), {level: inputInfo.level, is_overridden: inputInfo.is_overridden});\n    this.setState(newVal);\n    this._saveNotificationSettings({level: inputInfo.level});\n  },\n\n  _getState() {\n    var global_setting = PreferencesStore.getGlobalNotificationSetting();\n    var settings = this._getNotificationSettings(),\n        notification_level = _.get(settings, \"level\", \"global\"),\n        is_overridden = notification_level !== \"global\";\n\n    return {\n      mention: CurrentUserStore.get('mention') || '',\n      global_setting: global_setting,\n      level: notification_level,\n      is_overridden: is_overridden\n    };\n  },\n\n  _showSettingsDialog() {\n    DialogActions.showSettingDialog({activeTab: dialogStrings.notifications});\n  },\n\n  _closeDialog() {\n    DialogActions.closeDialog();\n  },\n\n  _getDefaultLabelDecoration() {\n    var levelIcon = `icon-volume-${this.state.global_setting}`;\n    var levelLabel = strings.label[this.state.global_setting];\n    var classNames = `aui-icon hipchat-icon-small global ${levelIcon}`;\n\n    return (\n      <span>\n        <span className={classNames}>{levelLabel}</span>\n        <span className=\"global-level-label\">{levelLabel}</span>\n      </span>\n    );\n  },\n\n  render() {\n    var defaultLabelDecoration = this._getDefaultLabelDecoration();\n    return (\n      <div>\n        <div className=\"heading\">\n          <span className=\"prefix\">{strings.description.notif_header_prefix}</span>\n          <span className=\"room-name\" title={this.props.room_name}>{this.props.room_name}</span>\n          <div className=\"settings-info\">\n            {strings.description.notif_settings_info_prefix}\n            <a onClick={this._showSettingsDialog}>{strings.description.notif_settings_link}</a>\n            {strings.description.notif_settings_info_suffix}\n          </div>\n        </div>\n        <form id=\"room-notifications-form\" ref=\"form\" className=\"aui\" onChange={this._onChange}>\n          <AuiFieldSet ref=\"global\">\n            {defaultLabelDecoration}\n            <AuiRadio id=\"notif-global\"\n                      name=\"override\"\n                      className=\"notif-global-radio\"\n                      defaultChecked={this.state.level === \"global\"}\n                      checked={!this.state.is_overridden}\n                      value=\"global\"\n                      label={strings.label.default_text} />\n            <AuiRadio id=\"notif-custom\"\n                      name=\"override\"\n                      defaultChecked={this.state.is_overridden}\n                      checked={this.state.is_overridden}\n                      value=\"custom\"\n                      label={strings.label.custom} />\n          </AuiFieldSet>\n          <AuiFieldSet ref=\"override-opts\" className=\"override-opts\">\n            <AuiRadio id=\"notif-loud\"\n                      name=\"notification\"\n                      defaultChecked={this.state.level === \"loud\"}\n                      checked={this.state.is_overridden && this.state.level === \"loud\"}\n                      value=\"loud\" label={strings.label.loud}\n                      icon=\"volume-loud\"\n                      description={strings.description.notif_loud} />\n            <AuiRadio id=\"notif-normal\"\n                      name=\"notification\"\n                      defaultChecked={this.state.level === \"normal\"}\n                      checked={this.state.is_overridden && this.state.level === \"normal\"}\n                      value=\"normal\" label={strings.label.normal}\n                      icon=\"volume-normal\"\n                      description={strings.description.notif_normal(this.state.mention)} />\n            <AuiRadio id=\"notif-quiet\"\n                      name=\"notification\"\n                      defaultChecked={this.state.level === \"quiet\"}\n                      checked={this.state.is_overridden && this.state.level === \"quiet\"}\n                      value=\"quiet\" label={strings.label.quiet}\n                      icon=\"volume-quiet\"\n                      description={strings.description.notif_quiet(this.state.mention)} />\n          </AuiFieldSet>\n        </form>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/room_notifications_form.js\n **/","var ModalDialog = require(\"components/common/modal_dialog/modal_dialog\");\nvar KeyboardShortcutStrings = require(\"strings/keyboard_shortcut_strings\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"KeyboardShortcutsDialog\",\n\n  getDefaultProps: function() {\n    return {\n      shortcuts: {}\n    };\n  },\n\n  _getKeyItem: function (command, index) {\n    var keys = this._getKeyLayout(command.keys);\n    return (\n      <li className=\"hc-list-item\" key={index}>\n        <span className=\"hc-list-item-desc\">{command.title}</span>\n        {keys}\n      </li>\n    );\n  },\n\n  _getKeyLayout: function (keys) {\n    return (\n      <span className=\"hc-list-item-action\">\n        {\n          _.map(keys, (item, index) => {\n            return this._getKey(item, index);\n          })\n        }\n      </span>\n    );\n  },\n\n  _getKey: function (key, index) {\n    var keyClass = \"hc-key-\" + key.type,\n        name = key.name,\n        keyLayout;\n    if (index !== 0) {\n      keyLayout = (\n        <span key={index}>\n          <span className=\"hc-key-separator\">{KeyboardShortcutStrings.separator}</span>\n          <kbd className={keyClass}>{name}</kbd>\n        </span>\n      );\n    } else {\n      keyLayout = (\n        <kbd className={keyClass} key={index}>{name}</kbd>\n      );\n    }\n    return keyLayout;\n  },\n\n  _dialogBody: function() {\n    return (\n      <ul className=\"hc-list\">\n        {\n          _.map(this.props.shortcuts, (command, index) => {\n            return this._getKeyItem(command, index);\n          })\n        }\n      </ul>\n    );\n  },\n\n  render: function() {\n    var attrs = {\n          'dialogId': 'keyboard-shortcuts-dialog',\n          'title': 'Keyboard Shortcuts',\n          'dialogBody': this._dialogBody,\n          'size': 'medium'\n        };\n\n    return (\n      <ModalDialog {...attrs} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/keyboard_shortcuts_dialog/keyboard_shortcuts_dialog.js\n **/","import ModalDialogAlt from \"components/common/modal_dialog/modal_dialog_alternate\";\nimport appConfig from \"config/app_config\";\nimport ReleaseNotesStrings from \"strings/release_notes_strings\";\nimport DialogActions from \"actions/dialog_actions\";\nimport AppStore from \"stores/application_store\";\n\nfunction matchEndpoint(type, subtype) {\n  switch (type) {\n    case 'qt':\n      return matchEndpoint(subtype);\n\n    case 'windows':\n      return 'qtwindows';\n\n    case 'linux':\n      return 'qtlinux';\n\n    default:\n      return type;\n  }\n}\n\nexport default React.createClass({\n\n  displayName: \"ReleaseNotesDialog\",\n\n  getInitialState: function () {\n    return {\n      asset_base_uri: AppStore.get('asset_base_uri'),\n      client_version_id: AppStore.get('client_version_id'),\n      endpoint: matchEndpoint(AppStore.get('client_type'), AppStore.get('client_subtype'))\n    };\n  },\n\n  _onClick: function() {\n    DialogActions.closeDialog();\n  },\n\n  _dialogBody: function() {\n    return (\n      <div className=\"release-notes\">\n        <img src={this.state.asset_base_uri + appConfig.new_hotness_image_asset} />\n        <h2 className=\"release-notes-header\">{ReleaseNotesStrings.header}</h2>\n        <div className=\"inner-content\">\n          <iframe ref='iframe' src={`https://www.hipchat.com/release_notes/client_embed/${this.state.endpoint}?version_str=${this.state.client_version_id}`} />\n        </div>\n        <button className=\"aui-button aui-button-primary\" onClick={this._onClick} >{ReleaseNotesStrings.close}</button>\n      </div>\n    );\n  },\n\n  render: function() {\n    return (\n      <ModalDialogAlt dialogId=\"release-notes-dialog\"\n                      dialogBody={this._dialogBody}\n                      size=\"small\"/>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/release_notes_dialog/release_notes_dialog.js\n **/","export default {\n  header: `Release Notes`,\n  close: `Close`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/release_notes_strings.js\n **/","import ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport IntegrationFrame from 'components/common/integration/integration_frame';\nimport IntegrationsViewStore from 'stores/integrations_view_store';\nimport IntegrationDialogStore from 'stores/integration_dialog_store';\nimport IntegrationDialogActions from 'actions/integration_dialog_actions';\nimport PreferencesStore from 'stores/preferences_store';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport strings from 'strings/dialog_strings';\nimport Spinner from 'components/common/spinner/spinner';\nimport IntegrationActions from 'actions/integrations_view_actions';\nimport integration_strings from 'strings/integrations_strings';\n\nmodule.exports = React.createClass({\n\n  displayName: \"IntegrationDialog\",\n\n  propTypes: {\n    integration: React.PropTypes.shape({\n      full_key: React.PropTypes.string.isRequired\n    }).isRequired,\n    room_id: React.PropTypes.string.isRequired,\n    init_event: React.PropTypes.object\n  },\n\n  componentWillMount: function () {\n    this.filterChange = _.debounce(IntegrationDialogActions.filterChange, AppConfig.dialog.filter_debounce_wait);\n  },\n\n  componentDidMount: function () {\n    IntegrationDialogStore.on('change', this._onChange);\n    IntegrationsViewStore.onIntegrationViewStatusChange(this.props.room_id, this.props.integration.full_key, this._onChange);\n    PreferencesStore.on('change:theme', this._onChange);\n  },\n\n  componentWillUnmount: function () {\n    IntegrationDialogStore.off('change', this._onChange);\n    IntegrationsViewStore.offIntegrationViewStatusChange(this.props.room_id, this.props.integration.full_key, this._onChange);\n    PreferencesStore.off('change:theme', this._onChange);\n  },\n\n  getInitialState: function () {\n    return _.merge({\n      view: {\n        signed_url_loading: true\n      }\n    }, this._getState());\n  },\n\n  _onChange: function () {\n    this.setState(this._getState());\n  },\n\n  _getState: function () {\n    return {\n      dialog: IntegrationDialogStore.getAll(),\n      view: IntegrationsViewStore.getIntegrationViewStatus(this.props.room_id, this.props.integration.full_key) || {},\n      theme: PreferencesStore.get('theme')\n    };\n  },\n\n  _renderErrorFrame: function () {\n    if (!this.state.view.error) {\n      return null;\n    }\n\n    return <div className=\"hc-integrations-error\">\n      <div className=\"hc-integrations-error-image\"/>\n      <p>{integration_strings.integration_failed_to_load}</p>\n      <button onClick={this._retryLoadingPanel} className=\"aui-button aui-button-primary\">\n        {integration_strings.retry}\n      </button>\n    </div>;\n  },\n\n  _renderIntegrationFrame: function () {\n    if (!this._canRender()) {\n      return null;\n    }\n\n    let signed_url = utils.appendQueryParameter(this.state.view.signed_url, \"theme\", this.state.theme);\n\n    return (\n      <IntegrationFrame integration={this.state.dialog}\n                        signed_url={signed_url}\n                        room_id={this.props.room_id}\n                        init_event={this.props.init_event}/>\n    );\n  },\n\n  _dialogBody: function () {\n    let loading = false;\n    let containerStyle = \"hc-integration-view-dialog\";\n    if (!this.props.integration.internal) {\n      loading = this.state.view.signed_url_loading || (this.state.view.signed_url && this.state.view.frame_loading !== false);\n      containerStyle += \" hc-integration-view-dialog-loading\";\n    }\n\n    return (\n      <div className={containerStyle}>\n        <Spinner spin={loading}/>\n        {this._renderIntegrationFrame()}\n        {this._renderErrorFrame()}\n      </div>\n    );\n  },\n\n  _dialogFilterPlaceholder: function () {\n    let filter = this.state.dialog.options.filter;\n    return filter ? filter.placeholder : \"\";\n  },\n\n  _dialogFooterButton: function () {\n    let primaryAction = this.state.dialog.options.primaryAction;\n    if (primaryAction) {\n      return this._renderButton(primaryAction, \"aui-button-primary\");\n    }\n  },\n\n  _dialogFooterLinks: function () {\n    let secondaryActions = this.state.dialog.options.secondaryActions;\n    if (secondaryActions) {\n      return _.map(secondaryActions, (action, index) => {\n        let key = `${this.props.integration.full_key}:${index}`;\n        return this._renderButton(action, \"aui-button-link\", key);\n      });\n    }\n    return this._renderButton({enabled: true, name: strings.close}, \"aui-button-link\");\n  },\n\n  _renderButton: function (action, style, key) {\n    let disabled = !_.get(action, \"enabled\", true);\n    return (\n      <button aria-disabled={disabled} disabled={disabled} className={\"aui-button \" + style} key={key}\n              onClick={this._onButtonClick} data-action-key={action.key}>{action.name}</button>\n    );\n  },\n\n  _isWarning: function () {\n    return this.state.dialog.options.style === \"warning\";\n  },\n\n  _auiDialogSize: function () {\n    let size = this.state.dialog.options.size;\n    if (_.isString(size)) {\n      return size;\n    }\n    return \"medium\";\n  },\n\n  _customDialogWidth: function() {\n    return this._customDialogDimension('width', $(window).width());\n  },\n\n  _customDialogHeight: function() {\n    return this._customDialogDimension('height', $(window).height() - AppConfig.dialog.max_size_margin);\n  },\n\n  _customDialogDimension: function(dim, maxAllowed) {\n    let rawValue = _.get(this.state.dialog.options, ['size', dim]);\n    if (rawValue) {\n      let value = utils.strings.splitUnit(rawValue);\n      if (value) {\n        switch (value.unit) {\n          case '%': return `${Math.min(100, value.num)}%`;\n          case 'px': return `${Math.min(maxAllowed, value.num)}px`;\n          default: logger.error('[HC-Integrations]', `Unsupported unit: ${value.unit}`);\n        }\n      } else {\n        logger.error('[HC-Integrations]', `Unsupported  format: ${rawValue}`);\n      }\n    }\n  },\n\n  _onButtonClick: function (e) {\n    let actionKey = e.target.getAttribute(\"data-action-key\");\n    IntegrationDialogActions.buttonClick(this.state.dialog, actionKey);\n  },\n\n  _onFilterChange: function (e) {\n    this.filterChange(this.state.dialog, e.target.value);\n  },\n\n  _canRender: function() {\n    return _.isString(this.state.view.signed_url)\n      && _.isString(this.state.dialog.addon_key)\n      && _.isString(this.state.dialog.key);\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"integration-dialog\"\n                   size={this._auiDialogSize()}\n                   customWidth={this._customDialogWidth()}\n                   customHeight={this._customDialogHeight()}\n                   title={this.state.dialog.title}\n                   dialogBody={this._dialogBody}\n                   dialogFilter={!!this.state.dialog.options.filter}\n                   dialogFilterPlaceholder={this._dialogFilterPlaceholder()}\n                   dialogFilterCallback={this._onFilterChange}\n                   dialogFooterButton={this._dialogFooterButton}\n                   dialogFooterLinks={this._dialogFooterLinks}\n                   hint={this.state.dialog.options.hint}\n                   isWarning={this._isWarning()}\n                   noCloseLink={true}/>\n    );\n  },\n\n  _retryLoadingPanel() {\n    if (this.state.view.error) {\n      IntegrationActions.fetchSignedUrl(this.state.dialog, this.props.room_id, this.state.view.url_template_values);\n    }\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/integration_dialog/integration_dialog.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport SimpleXDM from 'simple-xdm/host';\nimport IntegrationApi from 'api/api_integration';\nimport IntegrationsViewAction from 'actions/integrations_view_actions';\nimport Utils from 'helpers/utils';\nimport logger from 'helpers/logger';\n\nmodule.exports = React.createClass({\n\n  displayName: \"IntegrationFrameView\",\n\n  propTypes: {\n    integration: React.PropTypes.shape({\n      addon_key: React.PropTypes.string.isRequired,\n      key: React.PropTypes.string.isRequired\n    }).isRequired,\n    signed_url: React.PropTypes.string.isRequired,\n    room_id: React.PropTypes.string.isRequired,\n    init_event: React.PropTypes.object\n  },\n\n  mixins: [PureRenderMixin],\n  getInitialState: function() {\n    IntegrationApi.registerModules();\n    var xdm = SimpleXDM.create(this.props.integration);\n    return {xdm: xdm};\n  },\n\n  componentWillUnmount: function() {\n    SimpleXDM.unregisterExtension({\n      addon_key: this.props.integration.addon_key,\n      key: this.props.integration.key\n    });\n  },\n\n  componentDidMount: function() {\n    this._dispatchInitEvent();\n  },\n\n  componentDidUpdate: function() {\n    this._dispatchInitEvent();\n  },\n\n  _dispatchInitEvent: function() {\n    if (this.props.init_event) {\n      logger.debug('[HC-Integrations]', `Dispatching event ${this.props.init_event.event} to ${this.props.integration.full_key}`, this.props.init_event.parameters);\n      SimpleXDM.dispatch(this.props.init_event.event, this.props.integration, this.props.init_event.parameters);\n    }\n  },\n\n  _onLoad: function() {\n    IntegrationsViewAction.iframeLoaded({\n      integration: this.props.integration,\n      room_id: this.props.room_id,\n      duration: Math.floor(Utils.timings.now() - this.startTimestamp)\n    });\n  },\n\n  render: function() {\n    this.startTimestamp = Utils.timings.now();\n    var xdm = this.state.xdm;\n    return (<iframe className=\"hc-addon-iframe\" id={xdm.id} name={xdm.name} src={this.props.signed_url}\n                    onLoad={this._onLoad}/>);\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/integration/integration_frame.js\n **/","import SimpleXDM from 'simple-xdm/host';\n\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport * as AuthModule from './modules/auth_module';\nimport * as ChatModule from './modules/chat_module';\nimport * as DialogModule from './modules/dialog_module';\nimport * as RoomModule from './modules/room_module';\nimport * as SidebarModule from './modules/sidebar_module';\nimport * as UserModule from './modules/user_module';\nimport * as FileModule from './modules/file_module';\n\nAppDispatcher.register(\"integration-iframe-event\", (event, target, data) => {\n  SimpleXDM.broadcast(event, target, data);\n});\n\nexport var modules = {\n  dialog: DialogModule,\n  sidebar: SidebarModule,\n  room: RoomModule,\n  chat: ChatModule,\n  auth: AuthModule,\n  user: UserModule,\n  file: FileModule\n};\n\nclass APIIntegration {\n  registerModules() {\n    _.each(modules, (module, key) => {\n      SimpleXDM.defineModule(key, module);\n    });\n  }\n\n}\n\nexport default new APIIntegration();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/api_integration.js\n **/","import TokenCache from 'helpers/integrations_token_cache';\nimport HCAPI from 'api/api';\nimport logger from 'helpers/logger';\n\nexport function withToken(callback) {\n  let extension = callback._context.extension;\n  let roomId = HCAPI.getActiveChat().id;\n  TokenCache.getToken(extension, roomId)\n    .then(jwt => {\n      callback(null, jwt.getToken());\n    })\n    .catch(err => {\n      logger.error('[HC-Integrations]', `Unable to create token for '${extension.full_key}' in room ${roomId}`, err);\n      callback({message: 'Unable to create token'});\n    });\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/auth_module.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport DAL from 'core/dal';\nimport JWT from 'helpers/jwt';\nimport logger from 'helpers/logger';\nimport {event_names} from 'keys/integrations_keys';\n\nconst MIN_CLEANUP_INTERVAL = 60000; // 1 minute\n\nclass TokenCache {\n\n  constructor() {\n    this.cache = {};\n    this._pruneCacheThrottled = _.throttle(this._pruneCache, MIN_CLEANUP_INTERVAL);\n    AppDispatcher.register(event_names.ON_INTEGRATIONS_UPDATE_SUMMARY, updateSummary => this._clear(updateSummary));\n  }\n\n  getToken(extension, roomId) {\n    this._pruneCacheThrottled();\n    return new Promise((resolve, reject) => {\n      let jwt = this._get(extension, roomId);\n      if (jwt && !jwt.expiresSoon()) {\n        resolve(jwt);\n      } else {\n        DAL.getSignedUrl({extension, room_id: roomId}, {}, (responseData, response) => {\n          if (responseData && !responseData.error && response.status < 400) {\n            try {\n              jwt = this._set(extension, roomId, responseData.jwt);\n              resolve(jwt);\n            } catch (e) {\n              logger.error('[HC-Integrations]', `Invalid token (${responseData.jwt}): ${e.message}`);\n              reject();\n            }\n          } else {\n            let message = `Error while fetching token (${response.status})`;\n            logger.error('[HC-Integrations]', message, responseData);\n            reject();\n          }\n        });\n      }\n    });\n  }\n\n  _get(extension, roomId) {\n    return _.get(this.cache, [roomId, extension.addon_key, extension.key]);\n  }\n\n  _set(extension, roomId, rawToken) {\n    let jwt = JWT.parse(rawToken);\n    _.set(this.cache, [roomId, extension.addon_key, extension.key], jwt);\n    return jwt;\n  }\n\n  _pruneCache() {\n    this.cache = _.mapValues(this.cache, addons => {\n      return _.mapValues(addons, extensions => {\n        return _.omitBy(extensions, jwt => jwt.isExpired());\n      });\n    });\n    this.cache = _.omitBy(this.cache, addons => _.isEmpty(addons));\n    logger.debug('[HC-Integrations]', 'Token cache pruned', this.cache);\n  }\n\n  _clear(updateSummary) {\n    _.forOwn(updateSummary, ([removed, updated], roomId) => {\n      let addonsCollection = _.flatten([removed, updated]);\n      let changedAddonKeys = _.map(addonsCollection, addon => addon.addon_key);\n      let roomIds = 'global' === roomId ? _.keys(this.cache) : [roomId];\n      _.each(roomIds, id => {\n        let addons = _.get(this.cache, [id], {});\n        _.set(this.cache, [id], _.omit(addons, changedAddonKeys));\n      });\n      logger.debug('[HC-Integrations]', `Token invalidated for ${changedAddonKeys}`, this.cache);\n    });\n  }\n\n}\n\nexport default new TokenCache();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/integrations_token_cache.js\n **/","const LEEWAY = 2 * 60; // 2 minutes\n\nfunction now() {\n  return Math.floor(Date.now() / 1000);\n}\n\nclass JWT {\n\n  static parse(token) {\n    let parts = token.split('.');\n    if (parts.length !== 3) {\n      throw new Error(`Invalid JWT format: ${token}`);\n    }\n    let jwt = JSON.parse(atob(parts[1]));\n    return new JWT(jwt, token);\n  }\n\n  constructor(jwt, token) {\n    this.jwt = jwt;\n    this.token = token;\n  }\n\n  isExpired() {\n    return now() > this.jwt.exp;\n  }\n\n  expiresSoon() {\n    return now() + LEEWAY > this.jwt.exp;\n  }\n\n  getToken() {\n    return this.token;\n  }\n}\n\nexport default JWT;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/jwt.js\n **/","export const event_names = Object.freeze({\n  REMOVE_DATA_FOR_ROOMS: 'integrations-remove-data-for-rooms',\n  ON_INTEGRATIONS_REMOVED: 'integrations-removed',\n  ON_INTEGRATIONS_UPDATED: 'integration-update',\n  ON_INTEGRATIONS_UPDATE_SUMMARY: 'integrations-update-summary'\n});\n\nexport const states = Object.freeze({\n  INIT: 'init',\n  STARTING: 'starting',\n  STARTED: 'started',\n  STOPPED: 'stopped',\n  DISABLED: 'disabled',\n  ERROR: 'error'\n});\n\nexport const glance_room_states = Object.freeze({\n  WAITING: 'waiting',\n  INIT: 'init',\n  LOADING: 'loading',\n  LOADED: 'loaded',\n  DIRTY: 'dirty'\n});\n\nexport const extension_types = Object.freeze({\n  GLANCE: 'glance',\n  DIALOG: 'dialog',\n  ACTION: 'action',\n  EXTERNAL_PAGE: 'externalPage',\n  WEB_PANEL: 'webPanel'\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/keys/integrations_keys.js\n **/","import IntegrationsActions from 'actions/integrations_actions';\nimport HCAPI from 'api/api';\n\nexport function focus() {\n  IntegrationsActions.focusChatText();\n}\n\nexport function appendMessage(text_value) {\n  let text = (typeof text_value === 'string') ? text_value : '';\n\n  HCAPI.appendMessage({\n    text: text\n  });\n}\n\nexport function addFileForUploadWithBase64(url, name) {\n  HCAPI.addFileForUploadWithBase64(url, name, 'paste');\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/chat_module.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport DialogActions from 'actions/dialog_actions';\nimport logger from 'helpers/logger';\nimport spi from 'spi';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport IntegrationsStore from 'stores/integrations_store';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport IntegrationsViewActions from 'actions/integrations_view_actions';\nimport {RECEIVE_PARAMETERS} from 'api/api_integration_events';\n\nmodule.exports = {\n\n  invokeAction(action, data = {}) {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: \"hipchat.client.integrations.action.invoke\",\n      properties: {\n        addon_key: action.addon_key,\n        action_key: action.full_key,\n        target_key: action.target.key\n      }\n    });\n\n    if (data.msg && data.msg.file_data && data.msg.file_data.is_authenticated && !data.msg.file_data.fetched_url) {\n      AppDispatcher.dispatch('API:fetch-signed-file', data.msg.file_data, (response) => {\n        data.msg.file_data.fetched_url = response.temp_url;\n        return this._initOpen(action, data);\n      });\n    } else {\n      return this._initOpen(action, data);\n    }\n  },\n\n  _initOpen(action, data) {\n    let msg = _.cloneDeep(data.msg);\n\n    if (msg && msg.file_data && msg.file_data.fetched_url) {\n      msg.file_data.url = msg.file_data.fetched_url;\n    }\n\n    let parameters = IntegrationHelper.extractIntegrationParametersFromMessage(msg);\n\n    return this.open(action.addon_key, action.target.key, {\n      event: action.key,\n      parameters: parameters,\n      urlTemplateValues: {\n        message: parameters\n      }\n    });\n  },\n\n  openDialog(addonKey, moduleKey, data = {}, source = \"\") {\n    return this.open(addonKey, moduleKey, data, ['dialog'], source);\n  },\n\n  openSidebarView(addonKey, moduleKey, data = {}, source = \"\") {\n    return this.open(addonKey, moduleKey, data, ['webPanel', 'glance'], source);\n  },\n\n  openExternalPage(addonKey, moduleKey, data = {}, source = \"\") {\n    return this.open(addonKey, moduleKey, data, ['externalPage'], source);\n  },\n\n  closeSidebarView(source = \"\") {\n    AppDispatcher.dispatch('show-sidebar-integration', {\n      activeIntegration: null\n    });\n\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: \"hipchat.client.integrations.action.close.view\",\n      properties: {\n        source: source\n      }\n    });\n  },\n\n  /**\n   * @param {string} addonKey The add-on key\n   * @param {string} moduleKey The module  key\n   * @param {Object} data An object with three optional properties:\n   *     {\n   *       \"options\": { <dialog options to customize a dialog target> },\n   *       \"urlTemplateValues\": { <key/value pairs for url template substitution> },\n   *       \"parameters\": { <arbitrary data to be passed to the add-on through an event> }\n   *     }\n   * @param {Array.<string>} expectedTypes null for any type, or an array of the allowed module types\n   * @param {string} source The 'source' property in the analytics events\n   * @returns {boolean} True if successful, false otherwise\n   */\n  open(addonKey, moduleKey, data = {}, expectedTypes = null, source = \"\") {\n\n    let targetKey = IntegrationHelper.to_full_key(addonKey, moduleKey);\n    var target = IntegrationsStore.getExtensionByKey(targetKey);\n\n    if (!target) {\n      target = IntegrationsStore.getInternalExtensionByKey(targetKey);\n    }\n\n    if (!target) {\n      logger.error('[HC-Integrations]', `Unknown action target: ${targetKey}`);\n      return false;\n    }\n\n    if (expectedTypes && !_.includes(expectedTypes, target.type)) {\n      logger.error('[HC-Integrations]', `The target ${targetKey} is not in allowed types. Expected: ${expectedTypes}`);\n      return false;\n    }\n\n    let activeChat = IntegrationsStore.get('active_chat');\n\n    switch (target.type) {\n      case 'webPanel':\n        this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.view\", target, source);\n        return this._openSidebarView(target, data, activeChat.id);\n      case 'glance':\n        if(_.isString(target.target)) {\n          this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.glance\", target, source);\n          return this._openGlance(target, data, activeChat.id);\n        }\n        logger.error('[HC-Integrations]', 'Cannot open a glance that does not have a target attribute', target.full_key);\n        this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.unsupported.type\", target, source);\n        return false;\n      case 'dialog':\n        this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.dialog\", target, source);\n        return this._openDialog(target, data, activeChat.id);\n      case 'externalPage':\n        this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.external.page\", target, source);\n        return this._openExternalPage(target, data, activeChat.id);\n      default:\n        logger.error('[HC-Integrations]', 'Unsupported target type', target.type);\n        this._dispatchAnalyticEvent(\"hipchat.client.integrations.action.open.unsupported.type\", target, source);\n        return false;\n    }\n  },\n\n  focusChatText() {\n    AppDispatcher.dispatch('application-focused');\n  },\n\n  _dispatchAnalyticEvent(name, target, source) {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: name,\n      properties: {\n        addon_key: target.addon_key,\n        full_key: target.full_key,\n        source: source\n      }\n    });\n  },\n\n  _openSidebarView(webPanel, data, room_id) {\n    IntegrationsViewActions.fetchSignedUrlConditionally(webPanel, room_id, data.urlTemplateValues);\n    this._showIntegrationView(webPanel.full_key, data.glance_key, data);\n    return true;\n  },\n\n  _openGlance(glance, data) {\n    let targetKey = _.isString(glance.target) ? glance.target : glance.target.key;\n\n    // Special treatment for internal Files and Links glances\n    var fullTargetKey = IntegrationHelper.to_full_key(glance.addon_key, targetKey);\n    if (IntegrationsStore.getInternalExtensionByKey(fullTargetKey)) {\n      return this._showIntegrationView(fullTargetKey, glance.full_key, data);\n    }\n\n    let targetData = _.extend({glance_key: glance.full_key}, data);\n    return this.open(glance.addon_key, targetKey, targetData, ['webPanel', 'dialog', 'externalPage']);\n  },\n\n  _openDialog(dialog, data, room_id) {\n    var customizedDialog = dialog;\n    if (data.options) {\n      customizedDialog = _.merge({}, dialog, {\n        title: data.options.title,\n        options: data.options.options\n      });\n    }\n\n    logger.info('[HC-Integrations]', 'Rendering dialog', customizedDialog);\n\n    let url_template_values = this._getUrlTemplateValues(data);\n    let init_event = this._createInitEvent(data);\n\n    IntegrationsViewActions.fetchSignedUrlConditionally(dialog, room_id, url_template_values);\n\n    DialogActions.showIntegrationDialog({\n      room_id: room_id,\n      integration: customizedDialog,\n      init_event: init_event\n    });\n\n    AnalyticsDispatcher.dispatch('analytics-show-dialog', {\n      key: dialog.full_key\n    });\n    return true;\n  },\n\n  _openExternalPage(externalPage, data, room_id) {\n    let promise = new Promise((resolve, reject) => {\n      IntegrationsViewActions.fetchSignedUrlWithResult(externalPage, room_id, data.urlTemplateValues,\n        (response_data, headers) => {\n          if (response_data && !response_data.error && headers.status < 400) {\n            resolve(response_data.location);\n          } else {\n            logger.error('[HC-Integrations]', `Error while fetching signed url (${headers.status})`, response_data);\n            reject();\n          }\n        }\n      );\n    });\n\n    spi.openExternalWindowWithPromise(promise);\n\n    AnalyticsDispatcher.dispatch('analytics-show-external-page', {\n      key: externalPage.full_key\n    });\n    return true;\n  },\n\n  _showIntegrationView(key, glance_key, data) {\n    let url_template_values = this._getUrlTemplateValues(data);\n    let init_event = this._createInitEvent(data);\n\n    AppDispatcher.dispatch('show-sidebar-integration', {\n      activeIntegration: {key, glance_key, url_template_values, init_event}\n    });\n\n    let addon_key = IntegrationHelper.split_full_key(key)[0];\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: \"hipchat.client.integrations.sidebar.show.view\",\n      properties: {\n        addon_key: addon_key,\n        full_key: key,\n        glance_key: glance_key\n      }\n    });\n    return true;\n  },\n\n  _createInitEvent(data) {\n    let initEvent = null;\n    if (_.has(data, 'parameters')) {\n      initEvent = {\n        event: data.event || RECEIVE_PARAMETERS,\n        parameters: data.parameters\n      };\n    }\n    return initEvent;\n  },\n\n  _getUrlTemplateValues(data) {\n    let urlTemplateValues = null;\n    if (_.has(data, 'urlTemplateValues')) {\n      urlTemplateValues = data.urlTemplateValues;\n    }\n    return urlTemplateValues;\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/integrations_actions.js\n **/","import Store from 'lib/core/store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport IntegrationsStorage from 'stores/integrations_storage';\nimport AppConfig from 'config/app_config';\nimport CurrentUserStore from 'stores/current_user_store';\nimport ConditionContext from 'helpers/conditions';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport PreferencesStore from './preferences_store';\nimport PreferencesActions from 'actions/preferences_actions';\nimport PermissionStore from 'stores/permissions_store';\nimport ClientPrefKeys from 'keys/client_preferences_keys';\nimport Utils from 'helpers/utils';\nimport IntegrationViewActions from 'actions/integrations_view_actions';\nimport logger from 'helpers/logger';\nimport {event_names, states} from 'keys/integrations_keys';\nimport version_info from '../../app/version-info.json';\n\nconst default_weight = 100;\nconst default_api_version = 1;\nconst current_api_version = version_info.connect_api_version;\nconst minimum_api_version = version_info.minimum_connect_api_version;\n\nfunction is_supported_version(version = default_api_version) {\n  return version >= minimum_api_version && version <= current_api_version;\n}\n\nclass IntegrationsStore extends Store {\n  /*\n   * this.data.integrations has the following format:\n   * {\n   *   global: {\n   *     \"<sha-1>\": {\n   *       addon_key: \"addon-key-1\",\n   *       name: \"Add-on 1\",\n   *       ui_extensions: [\n   *         {\n   *           key: \"xyz\",\n   *           location: \"hipchat.message.action\",\n   *           name: \"XYZ\",\n   *           url: \"...\",\n   *           weight: 100\n   *         },\n   *         ...\n   *       ]\n   *     },\n   *     \"<sha-1>\": {\n   *       addon_key: \"addon-key-2\",\n   *       ...\n   *     }\n   *   },\n   *   '<room-id>': {\n   *     \"<sha-1>\": {\n   *       ...\n   *     }\n   *     ...\n   *   },\n   *   ...\n   * }\n   */\n\n  constructor() {\n    super();\n    this.storage = new IntegrationsStorage();\n    this.states = states;\n  }\n\n  reset() {\n    super.reset();\n    this.storage.reset();\n  }\n\n  getDefaults() {\n    return {\n      integrations: {\n      },\n      active_rooms: {},\n      active_chat: null,\n      loading: true,\n      enabled: false,\n      error: null,\n      integration_timestamps: {},\n      addon_avatars: {},\n      pending_updates: {},\n      state: IntegrationsStore.states.INIT,\n      unsupported_integrations: [],\n      should_show_warning_icon: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'updated:config': (data) => {\n        var newEnabled = IntegrationHelper.isFeatureEnabled(data);\n\n        if (this.data.state !== IntegrationsStore.states.INIT) {\n          if (newEnabled === true && this.data.state === IntegrationsStore.states.DISABLED) {\n            this._setState(IntegrationsStore.states.STARTING);\n          } else if (newEnabled === false) {\n            this._setState(IntegrationsStore.states.DISABLED);\n          }\n        }\n\n        this.set(\"enabled\", newEnabled);\n      },\n      // turns an XMPP push into a REST request.\n      'integration-update': (data) => {\n        if(!this.data.enabled) {\n          return;\n        }\n        this._writeIntegrations(this._processIntegrationChanges(data, true));\n      },\n      'open-room': (room) => {\n        if(!this.data.enabled) {\n          return;\n        }\n        let activeChat = this.get('active_chat');\n        if (activeChat && activeChat.jid === room.jid) {\n          this._updateIntegrations([activeChat.id]);\n        }\n      },\n      'room-deleted': (room) => {\n        var updatedIntegrations = this.get('integrations');\n        var updatedTimeStamps = this.get('integration_timestamps');\n        var updatedPendingUpdates = this.get('pending_updates');\n        delete updatedIntegrations[room.id];\n        delete updatedTimeStamps[room.id];\n        delete updatedPendingUpdates[room.id];\n        this._writeIntegrations({\n          integrations: updatedIntegrations,\n          timestamps: updatedTimeStamps,\n          pending_updates: updatedPendingUpdates\n        });\n      },\n      'groupchat-invite-accepted': (room) => {\n        // open-room is called when the user is invited into a room but\n        // the active_chat variable is not set because dontSelectRoom is set to true\n        if(!this.data.enabled) {\n          return;\n        }\n\n        var newRoom = this.data.active_rooms[room.jid];\n        if (!_.isUndefined(newRoom)) {\n          this._updateIntegrations([newRoom.id]);\n        }\n      },\n      'app-state-ready': () => {\n        if (this.data.enabled) {\n          this._setState(IntegrationsStore.states.STARTING);\n        } else {\n          this._setState(IntegrationsStore.states.DISABLED);\n        }\n      },\n      'strophe-disconnected': () => {\n        if (this.data.enabled) {\n          this._setState(IntegrationsStore.states.STOPPED);\n        }\n      },\n      'strophe-connection-failed': () => {\n        if (this.data.enabled) {\n          this._setState(IntegrationsStore.states.STOPPED);\n        }\n      },\n      'strophe-disconnecting': () => {\n        if (this.data.enabled) {\n          this._setState(IntegrationsStore.states.STOPPED);\n        }\n      },\n      'DAL:cache-configured': () => {\n        if (this.data.enabled) {\n          this.storage.ready = true;\n          this.storage.getIntegrations().then((integrations) => {\n            this.data.integrations = integrations;\n          });\n        }\n      },\n      'strophe-reconnected': () => {\n        if (this.data.enabled) {\n          this._setState(IntegrationsStore.states.STARTING);\n        }\n      },\n      'updated:activeRooms': (rooms) => {\n        this._handleActiveRoomsUpdate(rooms);\n      },\n      'updated:active_chat': (jid) => {\n        this._handleSelectRoom(jid);\n\n        let activeChat = this.get('active_chat');\n\n        if (!activeChat) {\n          return;\n        }\n\n        let activeIntegration = this.getActiveIntegration(activeChat.type),\n            activeIntegrationKey = _.get(activeIntegration, \"key\", null),\n            isGroupchat = this._isGroupchat(activeChat.type),\n            internalExtensions = isGroupchat ? this.getInternalExtensions() : this.getInternalExtensionsOTO();\n\n        if (activeIntegrationKey) {\n          let isInternal = !_.isUndefined(_.find(internalExtensions, integration => integration.full_key === activeIntegrationKey));\n          let extension = this.getExtensionByKey(activeIntegrationKey);\n\n          if ( !isInternal && !extension) {\n            if (isGroupchat) {\n              PreferencesActions.savePreferences({\n                [ClientPrefKeys.ACTIVE_GROUPCHAT_INTEGRATION]: null\n              });\n            } else {\n              PreferencesActions.savePreferences({\n                [ClientPrefKeys.ACTIVE_CHAT_INTEGRATION]: null\n              });\n            }\n          } else if ( !isInternal && activeChat.id) {\n            IntegrationViewActions.fetchSignedUrlConditionally(extension, activeChat.id, {});\n          }\n        }\n\n        this._fetchPanelContentForInternalGlances(activeIntegration);\n      },\n      'refresh-integrations': () => {\n        this._updateIntegrations(['global', _.get(this.data, 'active_chat.id')]);\n      },\n      'show-sidebar-integration': (data) => {\n        let activeChat = this.get('active_chat');\n\n        if (this._isGroupchat(activeChat.type)) {\n          this._setActiveGroupchatIntegration(data);\n        } else {\n          this._setActiveChatIntegration(data);\n        }\n\n        if (data.activeIntegration) {\n          this._fetchPanelContentForInternalGlances(data.activeIntegration);\n        }\n      }\n    });\n  }\n\n  _syncIntegrations() {\n    let roomsToUpdate = _.values(this.data.active_rooms)\n      .filter(r => r.type === \"groupchat\")\n      .map(r => r.id);\n\n    this._updateIntegrations(['global'].concat(roomsToUpdate), (err) => {\n      if (this.data.state !== IntegrationsStore.states.DISABLED) {\n        if (err) {\n          this._setState(IntegrationsStore.states.ERROR);\n        } else {\n          this._setState(IntegrationsStore.states.STARTED);\n        }\n      }\n    });\n  }\n\n  _setActiveChatIntegration(data) {\n    if (data.activeIntegration) {\n      PreferencesActions.savePreferences({\n        [ClientPrefKeys.SHOW_CHAT_SIDEBAR]: true,\n        [ClientPrefKeys.CHAT_ACTIVE_PANEL]: 'integrations',\n        [ClientPrefKeys.ACTIVE_CHAT_INTEGRATION]: data.activeIntegration\n      });\n    } else {\n      PreferencesActions.savePreferences({\n        [ClientPrefKeys.ACTIVE_CHAT_INTEGRATION]: null\n      });\n    }\n  }\n\n  _setActiveGroupchatIntegration(data) {\n    if (data.activeIntegration) {\n      PreferencesActions.savePreferences({\n        [ClientPrefKeys.SHOW_GROUPCHAT_SIDEBAR]: true,\n        [ClientPrefKeys.GROUPCHAT_ACTIVE_PANEL]: 'integrations',\n        [ClientPrefKeys.ACTIVE_GROUPCHAT_INTEGRATION]: data.activeIntegration\n      });\n    } else {\n      PreferencesActions.savePreferences({\n        [ClientPrefKeys.ACTIVE_GROUPCHAT_INTEGRATION]: null\n      });\n    }\n  }\n\n  _fetchPanelContentForInternalGlances(activeIntegration) {\n    // TODO: At the moment the RosterStore handles all the events for fetching files and links. When we remove the 'dark feature'-flag for the\n    // integration panel we should also refactor the RosterStore so that we end up with an IntegrationStore, PeopleStore, FilesStore and\n    // LinksStore. But for now we'll need to dispatch this event from here.\n    AppDispatcher.dispatch('fetch-panel-content-for-internal-glances', { activeIntegration: activeIntegration });\n  }\n\n  _fetchIntegrations(integrations, room_ids, cb) {\n    let startTimestamp = Utils.timings.now();\n    AppDispatcher.dispatch('API:sync-integrations', {\n      integrations: integrations,\n      room_ids: room_ids\n    }, (resp, xhr) => {\n      let duration = Math.floor(Utils.timings.now() - startTimestamp);\n      if(!resp || resp.error) {\n        clearTimeout(this.loadingTimerId);\n        this.set({\n          error: resp.error,\n          loading: false\n        });\n        let errorMessage = _.get(resp, 'error.message', xhr.statusText);\n        AnalyticsDispatcher.dispatch('analytics-event', {\n          name: 'hipchat.client.integrations.sync.error',\n          properties: {\n            error: errorMessage,\n            duration: duration,\n            status: xhr.status\n          }\n        });\n\n        cb.call(this, _.get(resp,'error','Unknown error when synchronising with client'), null);\n        return false;\n      }\n\n      cb.call(this, null, resp);\n\n      AnalyticsDispatcher.dispatch('analytics-event', {\n        name: 'hipchat.client.integrations.sync.success',\n        properties: {\n          duration: duration\n        }\n      });\n    });\n  }\n\n  // removes extensions from a room, given a list of delete nodes\n  _removeIntegrations(integrationsInRoom, addon_keys) {\n    return _.filter(integrationsInRoom, (integration) => {\n      return !(_.includes(addon_keys, integration.addon_key));\n    });\n  }\n\n  // merge the integrations in a particular context (room or global)\n  _mergeIntegrations(integrationsInRoom, addons) {\n    return _.merge({}, _.keyBy(integrationsInRoom, 'version'), _.keyBy(addons, 'version'));\n  }\n\n  _processIntegrationChanges(data, push_update = false) {\n    let integrations = this.get('integrations');\n    let integration_timestamps = this.get('integration_timestamps');\n    let current_pending_updates = _.clone(this.get('pending_updates'));\n    let new_pending_updates = _.get(data, 'pendingUpdates', {});\n\n    let new_timestamp = Date.now();\n\n    // for each room or global, find add-ons to remove and update\n\n    let updateSummary = {};\n\n    _.each(data.changedIntegrations, (addons, roomId) => {\n      if (push_update) {\n        let keys = _.map(addons, addon => addon.addon_key);\n        _.remove(current_pending_updates[roomId], key => _.includes(keys, key));\n      } else {\n        current_pending_updates[roomId] = _.get(new_pending_updates, roomId, []);\n      }\n\n      let [to_remove, to_update] = _.partition(addons, (addon) => { return addon.is_deleted; });\n      if (!_.isEmpty(to_remove) || !_.isEmpty(to_update)) {\n        updateSummary[roomId] = [to_remove, to_update];\n      }\n\n      _.each(to_update, plugin => _.set(integration_timestamps, [roomId, plugin.addon_key], new_timestamp));\n\n      // remove all the updated add-ons by addon_key\n      integrations[roomId] = this._removeIntegrations(integrations[roomId], _.map(addons, 'addon_key'));\n      // merge the two together.\n      integrations[roomId] = this._mergeIntegrations(integrations[roomId], to_update);\n\n      if (!_.isEmpty(to_remove)) {\n        let rooms;\n        if (roomId === \"global\") {\n          rooms = _.reduce(this.data.active_rooms, (acc, room) => {\n            if (this._isGroupchat(room.type)) {\n              acc.push({id: room.id});\n            }\n\n            return acc;\n          }, []);\n        } else {\n          rooms = [{id: roomId}];\n        }\n\n        this._removeIntegrationIfActive(to_remove, rooms);\n        AppDispatcher.dispatch(event_names.ON_INTEGRATIONS_REMOVED, {integrations: to_remove, rooms});\n      }\n    });\n\n    AppDispatcher.dispatch(event_names.ON_INTEGRATIONS_UPDATE_SUMMARY, updateSummary);\n    return {integrations: integrations, timestamps: integration_timestamps, pending_updates: current_pending_updates};\n  }\n\n  // go get the integrations from the REST API and run the update functions\n  _updateIntegrations(room_ids, cb = _.noop) {\n    this.data.error = null;\n    clearTimeout(this.loadingTimerId);\n    this.loadingTimerId = _.delay(() => {\n      this.set('loading', true);\n    }, AppConfig.integrations.loading_indicator_delay_ms);\n    let integrations = this.get('integrations');\n    this._fetchIntegrations(integrations, room_ids, (error, data) => {\n      if (!error) {\n        this._writeIntegrations(this._processIntegrationChanges(data));\n      }\n      cb(error, data);\n    });\n  }\n\n  // write integrations to storage.\n  _writeIntegrations({integrations, timestamps, pending_updates}) {\n    clearTimeout(this.loadingTimerId);\n\n    this.set({\n      integrations: integrations,\n      pending_updates: pending_updates,\n      unsupported_integrations: this._getUnsupportedIntegrationsPerRoom(integrations),\n      loading: false,\n      integration_timestamps: timestamps,\n      addon_avatars: this._getAddonAvatars(integrations, this.data.active_chat)\n    });\n\n    this.setShouldShowIntegrationsWarningIcon();\n    this.storage.save(integrations);\n    AppDispatcher.dispatch('integrations-updated', integrations);\n  }\n\n  /**\n   * Get the names of unsupported integrations grouped by room\n   *\n   * @param integrations\n   * @returns {*}\n   * @private\n   */\n  _getUnsupportedIntegrationsPerRoom(integrations) {\n    let unsupported_integrations = {};\n    _.forEach(integrations, (room_integrations, room_name) => {\n      let disabledIntegrationKeys = _.reduce(room_integrations, (addon_keys, integration) => {\n        if (!is_supported_version(integration.client_api_version)) {\n          addon_keys.push(integration.addon_key);\n        }\n        return addon_keys;\n      }, []);\n\n      if (disabledIntegrationKeys.length) {\n        unsupported_integrations[room_name] = disabledIntegrationKeys;\n      }\n    });\n\n    return unsupported_integrations;\n  }\n\n  /**\n   * Get integrations for the current context (global + groupchat)\n   *\n   * @returns {Object.<string, object>} integrations\n   */\n  _getIntegrationsForRooms(room_ids, include_global = false){\n    let integrations = this.get('integrations');\n\n    if (include_global) {\n      room_ids = room_ids.concat('global');\n    }\n\n    return _.pick(integrations, room_ids);\n  }\n\n  /**\n   * Get integrations for the current context (global + room)\n   *\n   * @returns {Object.<string, object>} integrations\n   */\n  _getIntegrationsForContext(){\n    let activeChat = this.get('active_chat');\n    if (activeChat && activeChat.type === \"groupchat\") {\n      return this._getIntegrationsForRooms([activeChat.id], true);\n    }\n    return this._getIntegrationsForRooms([]);\n  }\n\n  /**\n   * Get extensions in a given location\n   *\n   * @param location\n   * @returns {Object[]} list of extensions\n   */\n  getExtensionsByLocation(location) {\n    return this.getExtensionsByLocationAndContext(location, {});\n  }\n\n  /**\n   * Get extensions in a given location with a given context. The custom context is typically a message\n   * or glance metadata. Example context:\n   *\n   * {\n   *   \"message\": {\n   *     \"body\": \"some message\",\n   *     ...\n   *   }\n   * }\n   *\n   * @param location {string} the location, e.g. \"hipchat.sidebar.right\"\n   * @param conditionContext {Object} can contain a 'message' context for conditions.\n   * @returns {Object[]} list of extensions\n   */\n  getExtensionsByLocationAndContext(location, conditionContext) {\n    let conditions = this._createConditionContext(conditionContext.message);\n    let by_rooms = this._getIntegrationsForContext();\n    return this._getExtensions(by_rooms, {}, {location: location}, conditions);\n  }\n\n  /**\n   * Get extensions of a given type\n   *\n   * @param type\n   * @returns {Object[]} list of extensions\n   */\n  getExtensionsByType(type) {\n    let by_rooms = this._getIntegrationsForContext();\n    return this._getExtensions(by_rooms, {}, {type: type});\n  }\n\n  getExtensionsByTypeAndRoom(type, room_id) {\n    let by_rooms = this._getIntegrationsForRooms([room_id], true);\n    return this._getExtensions(by_rooms, {}, {type: type});\n  }\n\n  getUnsupportedIntegrationsForRoom() {\n    let active_chat = this.get('active_chat');\n    if (!active_chat || !this._isGroupchat(active_chat.type)) {\n      return [];\n    }\n\n    let integrations = this.get('unsupported_integrations'),\n        room_ids = ['global', active_chat.id];\n\n    let integrationRooms = _.pick(integrations, room_ids);\n    let integrationValues = _.values(integrationRooms);\n    return _.flatten(integrationValues);\n  }\n\n  setShouldShowIntegrationsWarningIcon() {\n    let should_show_warning_icon = false;\n\n    if (this.getUnsupportedIntegrationsForRoom().length > 0) {\n      should_show_warning_icon = true;\n    }\n\n    if (_.get(this.get('pending_updates'), 'global', []).length > 0 && CurrentUserStore.get('is_admin')) {\n      should_show_warning_icon = true;\n    }\n\n    let active_chat_id = _.get(this.get('active_chat'), 'id');\n    if (_.get(this.get('pending_updates'), active_chat_id, []).length > 0 && PermissionStore.canUpdateRoomIntegrations()) {\n      should_show_warning_icon = true;\n    }\n\n    this.set({\n      'should_show_warning_icon': should_show_warning_icon\n    });\n  }\n\n  /**\n   * Get the extension from the rooms matching the given key\n   *\n   * @param full_extension_key format => \"${addon_key}:${module_key}\"\n   * @returns {Object|null} extension\n   */\n  getExtensionByKey(full_extension_key) {\n    if (_.isEmpty(full_extension_key)) {\n      return null;\n    }\n\n    let by_rooms = this._getIntegrationsForContext();\n    let [addon_key, key] = IntegrationHelper.split_full_key(full_extension_key);\n    var extensions = this._getExtensions(by_rooms, {addon_key}, {key});\n    return extensions.length > 0 ? extensions[0] : null;\n  }\n\n  /**\n   * Get the list of built-in extensions\n   *\n   * @returns {Object[]} list of extension\n   */\n  getInternalExtensions() {\n    return [AppConfig.people_glance, AppConfig.files_glance, AppConfig.links_glance];\n  }\n\n  /**\n   * Get the list of built-in extensions for OTO\n   *\n   * @returns {Object[]} list of extension\n   */\n  getInternalExtensionsOTO() {\n    return [AppConfig.files_glance, AppConfig.links_glance];\n  }\n\n  /**\n   * Get a built-in extension matching the given key\n   *\n   * @param full_extension_key format => \"${addon_key}:${module_key}\"\n   * @returns {Object|null} extension\n   */\n  getInternalExtensionByKey(full_extension_key) {\n    return _.find(this.getInternalExtensions(), ext => {\n      return ext.full_key === full_extension_key;\n    });\n  }\n\n  getScopesForAddon(addon_key) {\n    let integrationValues = _.mapValues(this._getIntegrationsForContext(), _.toArray);\n    let normalizedValues = _.flatten(_.toArray(integrationValues));\n    return _.get(_.find(normalizedValues, i => i.addon_key === addon_key), 'scopes', []);\n  }\n\n  /**\n   * Extract extensions from the provided integrations\n   *\n   * @param {Object} addon_filter property values to match for addon\n   * @param {Object} extension_filter property values to match for extension\n   * @param {Object} integrations_by_room\n   * @param {Object} conditions optional conditions to evaluate against each extension\n   * @returns {Object[]}\n   * @private\n   */\n  _getExtensions(integrations_by_room, addon_filter, extension_filter, conditions = null) {\n    let extension_list = [];\n\n    let addon_matches = _.matches(addon_filter);\n    let extension_matches = _.matches(extension_filter);\n\n    _.each(integrations_by_room, (addons, roomId) => {\n      _.each(addons, (addon) => {\n\n        if (!addon_matches(addon) || !is_supported_version(addon.client_api_version)) {\n          return;\n        }\n        _.each(addon.ui_extensions, (ui_extension) => {\n          if(extension_matches(ui_extension) && (!conditions || conditions.evaluate(ui_extension.conditions))){\n            extension_list.push(_.extend({\n              addon_key: addon.addon_key,\n              full_key: IntegrationHelper.to_full_key(addon.addon_key, ui_extension.key),\n              addon_version: addon.version,\n              addon_timestamp: this._getTimestamp(roomId, addon.addon_key)\n            }, ui_extension));\n          }\n        });\n      });\n    });\n\n    return this._sort_extensions(extension_list);\n  }\n\n  _sort_extensions(extension_list) {\n    let paired_extension_list = _.toPairs(_.groupBy(extension_list, (extension) => extension.addon_key)),\n      sorted_extension_list = _.sortBy(paired_extension_list, ([key,extension]) => key);\n    return _.flatten(_.map(sorted_extension_list, ([key,extensions]) => _.sortBy(extensions, extension => extension.weight ? -extension.weight : -default_weight)));\n  }\n\n  _createConditionContext(message) {\n    return new ConditionContext()\n      .withRoom(this.get('active_chat'))\n      .withUser(CurrentUserStore.getAll())\n      .withMessage(message);\n  }\n\n  _handleSelectRoom(jid) {\n    if (!jid) {\n      return;\n    }\n\n    let active_chat = this.data.active_rooms[jid];\n    if (_.isObject(active_chat)) {\n      this.set({\n        'active_chat': active_chat,\n        'addon_avatars': this._getAddonAvatars(this.data.integrations, active_chat)\n      });\n      this.setShouldShowIntegrationsWarningIcon();\n    }\n  }\n\n  _handleActiveRoomsUpdate(rooms) {\n    var deleted = _.difference(_.keys(this.data.active_rooms), _.keys(rooms));\n    if (deleted.length) {\n      var removedRooms = [];\n      for (var item in deleted) {\n        let jid = deleted[item],\n            deletedRoom = this.data.active_rooms[jid];\n        if (deletedRoom.type === \"groupchat\" && deletedRoom.id) {\n          removedRooms.push({id: deletedRoom.id});\n        }\n      }\n\n      if (removedRooms.length) {\n        AppDispatcher.dispatch(event_names.REMOVE_DATA_FOR_ROOMS, { rooms: removedRooms });\n      }\n\n      this.data.active_rooms = _.omit(this.data.active_rooms, deleted);\n    } else {\n      this.data.active_rooms = _.merge(this.data.active_rooms, rooms);\n    }\n  }\n\n  _getTimestamp(roomId, addonKey) {\n    // If we don't have a timestamp, then add one\n    let timestamp = _.get(this.data.integration_timestamps, [roomId, addonKey], null);\n\n    if (timestamp === null) {\n      timestamp = Date.now();\n      _.set(this.data.integration_timestamps, [roomId, addonKey], timestamp);\n    }\n\n    return timestamp;\n  }\n\n  _getAddonAvatars(integrations, active_chat) {\n    let globalIntegrations = _.get(integrations, \"global\", []);\n    let roomIntegrations = _.get(integrations, _.get(active_chat, \"id\", \"\"), []);\n    let globalIntegrationValues = _.values(globalIntegrations);\n    let roomIntegrationValues = _.values(roomIntegrations);\n\n    let integrationWithAvatars = _.filter([].concat(globalIntegrationValues, roomIntegrationValues), i => i.avatar);\n    let addonPairs = _.map(integrationWithAvatars, i => [i.addon_key, i.avatar]);\n    return _.fromPairs(addonPairs);\n  }\n\n  _isGroupchat(chatType) {\n    return chatType === 'groupchat';\n  }\n\n  getActiveIntegration(chatType) {\n    if(this._isGroupchat(chatType)) {\n      return PreferencesStore.getActiveGroupchatIntegration();\n    }\n\n    return PreferencesStore.getActiveChatIntegration();\n  }\n\n  _removeIntegrationIfActive(integrations, rooms) {\n    let activeChat = this.get('active_chat');\n    if (activeChat && _.find(rooms, {'id': activeChat.id})) {\n      let activeGroupChatIntegration = PreferencesStore.getActiveGroupchatIntegration();\n      if (activeGroupChatIntegration) {\n        let [addon_key] = IntegrationHelper.split_full_key(activeGroupChatIntegration.key);\n        if (_.find(integrations, {addon_key})) {\n          this._setActiveGroupchatIntegration({});\n        }\n      }\n    }\n  }\n\n  _setState(newState) {\n    if (this.data.state === newState) {\n      return;\n    }\n\n    logger.debug('[HC-Integrations]', `State transition from ${this.data.state} -> ${newState}`);\n    this.set('state', newState);\n\n    if (newState === IntegrationsStore.states.STARTING) {\n      this._syncIntegrations();\n    }\n  }\n\n  getUniqueIntegrationsForContext() {\n    let integrations = this._getIntegrationsForContext();\n\n    let all_integrations = _.map(integrations, (context_integrations, context) => {\n      return _.map(context_integrations, integration => ({\n        context: context,\n        addon_key: integration.addon_key,\n        name: integration.name,\n        icon: _.get(integration, 'icon.url')\n      }));\n    });\n\n    let flattened_integrations = _.flatten(_.map(all_integrations, _.values));\n    return _.uniqBy(flattened_integrations, i => i.addon_key);\n  }\n\n  getIntegrationStatusesForContext() {\n    let integrations = this.getUniqueIntegrationsForContext();\n    let unsupported_integrations = this.getUnsupportedIntegrationsForRoom();\n\n    let pending_updates = _.filter(integrations, i => {\n      let pending_update_keys = _.get(this.get('pending_updates'), i.context, []);\n      return _.includes(pending_update_keys, i.addon_key);\n    });\n\n\n    let [pending_global_updates, pending_room_updates] = _.partition(pending_updates, i => i.context === \"global\");\n    let [disabled, installed] = _.partition(integrations, i => _.includes(unsupported_integrations, i.addon_key));\n\n    return {\n      pending_global: pending_global_updates,\n      pending_room: pending_room_updates,\n      disabled: disabled,\n      installed: installed\n    };\n  }\n}\n\nIntegrationsStore.states = Object.freeze({\n  INIT: 'init',\n  STARTING: 'starting',\n  STARTED: 'started',\n  STOPPED: 'stopped',\n\n  DISABLED: 'disabled',\n  ERROR: 'error'\n});\n\nexport default new IntegrationsStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/integrations_store.js\n **/","import DAL from 'core/dal';\nimport AppConfig from 'config/app_config';\n\nclass IntegrationsStorage {\n\n  constructor() {\n    this.ready = false;\n  }\n\n  _getDefaults() {\n    return {\n      \"versions\": {}\n    };\n  }\n\n  /**\n   * Write integrations to storage\n   * @param integrations\n   * @returns compressed integrations\n   */\n  save(integrations) {\n    integrations = this._deflate(integrations);\n    integrations = this._bisect(integrations, 0, _.keys(integrations.versions).length, AppConfig.integrations.persistent_store_max_size_bytes);\n\n    this.integrations = integrations;\n    if (this.ready) {\n      DAL.Cache.set(DAL.Cache.Keys.INTEGRATIONS, this.integrations);\n    }\n    return integrations;\n  }\n\n  /**\n   * Get uncompressed integrations from storage\n   * @returns {Promise} uncompressed integrations\n   */\n  getIntegrations() {\n    if (this.ready) {\n      return DAL.Cache.get(DAL.Cache.Keys.INTEGRATIONS).then((integrations) => {\n        let data = integrations || this._getDefaults();\n        return this._inflateIntegrations(data);\n      });\n    }\n    return Promise.resolve(this._getDefaults());\n  }\n\n  reset() {\n    if (this.ready) {\n      DAL.Cache.unset(DAL.Cache.Keys.INTEGRATIONS);\n    }\n  }\n\n  /**\n   * remove integrations from rooms that are not in versions\n   */\n  _cleanRooms(integrations){\n    let room_integrations = _.clone(integrations);\n    delete room_integrations.versions;\n\n    let versions = _.keys(integrations.versions);\n    _.each(room_integrations, (integrations_in_room, room) => {\n      room_integrations[room] = _.intersection(versions, integrations_in_room);\n    });\n    room_integrations.versions = integrations.versions;\n    return room_integrations;\n  }\n\n  /**\n   * give a length of an object once it has been stored\n   */\n  _objectLength(obj) {\n    let str = JSON.stringify(obj);\n    // UTF-16 means x2.\n    return str.length * 2;\n  }\n\n  /**\n   * modify the integrations if there is insufficient space\n   *\n   * @param integrations\n   * @param min\n   * @param max\n   * @returns {Object} modifiedIntegrations\n   * @private\n   */\n  _bisect(integrations, min, max, max_bytes) {\n    let sliced_integrations = integrations;\n    let max_integrations;\n\n    let get_sliced_integrations = function(room_integrations, end) {\n      let versions = room_integrations.versions;\n\n      let keys_arr = _.keys(versions);\n      let version_keys = keys_arr.slice(0, end);\n      let new_integrations = _.clone(room_integrations, true);\n\n      //pick off unused keys\n      new_integrations.versions = _.pick(versions, version_keys);\n\n      // remove unused keys from rooms\n      return this._cleanRooms(new_integrations);\n    };\n\n    while(max > min + 1) {\n      let index = min + Math.floor((max - min) / 2);\n\n      sliced_integrations = get_sliced_integrations.call(this, integrations, index);\n      if (this._objectLength(sliced_integrations) > max_bytes) {\n        max = index;\n      } else {\n        min = index;\n      }\n    }\n    max_integrations = get_sliced_integrations.call(this, integrations, max);\n\n    return this._objectLength(max_integrations) <= max_bytes ? max_integrations : sliced_integrations;\n  }\n\n  _inflateIntegrations(integrations) {\n    let integrations_data = {},\n      versions = integrations.versions || {};\n\n    integrations = integrations || {};\n\n    _.each(integrations, (addons, room) => {\n      if (room === \"versions\") {\n        return;\n      }\n\n      integrations_data[room] = {};\n      _.each(addons, (addon) => {\n        var addon_version = versions[addon];\n        if (!_.isUndefined(addon_version)) {\n          integrations_data[room][addon_version.addon_key] = addon_version;\n        }\n      });\n    });\n\n    return integrations_data;\n  }\n\n  /**\n   * prepares integrations object\n   *\n   * @param {Object} integrations\n   * @returns {Object} storedIntegrations\n   * @private\n   */\n  _deflate(integrations) {\n    let storedIntegrations = {\n      versions: {}\n    };\n    _.each(integrations, (addons, room) => {\n      storedIntegrations[room] = [];\n      _.each(addons, (addon) => {\n        storedIntegrations[room].push(addon.version);\n        storedIntegrations.versions[addon.version] = addon;\n      });\n    });\n    return storedIntegrations;\n  }\n}\n\nmodule.exports = IntegrationsStorage;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/integrations_storage.js\n **/","/*global no_match*/\nimport logger from 'helpers/logger';\nimport utils from 'helpers/utils';\nimport link_utils from 'helpers/link_utils';\nimport traverse from 'traverse';\n\nconst Context = {\n\n  check: (context, ctx) => {\n    var subContext = context[ctx];\n    if (!subContext) {\n      logger.error(`Context {ctx} is not set`);\n      subContext = {};\n    }\n    return subContext;\n  },\n\n  ROOM: 'room',\n  USER: 'user',\n  MESSAGE: 'message',\n  GLANCE_DATA: 'glanceData'\n};\n\nclass MetaDataMatcher {\n\n  constructor(metadata) {\n    this.metadata = metadata;\n  }\n\n  /**\n   * Matches metadata of cards and glances\n   * @param metadataConditions the conditions declared on the ui extension. Example:\n   *  [\n   *    { 'attr': 'domain', 'eq': 'jira.atlassian.com'},\n   *    { 'attr': 'nested.something', 'gt': 2}\n   *  ]\n   * @returns {boolean} true if matched, false otherwise\n   */\n  match(metadataConditions) {\n    return _.every(metadataConditions, (cond) => {\n      if (!cond.attr) {\n        logger.error('Metadata conditions must specify an \"attr\" attribute');\n        return false;\n      }\n\n      let value = _.get(this.metadata, cond.attr);\n      if (typeof cond.eq !== 'undefined') {\n        return value === cond.eq;\n      }\n      else if (typeof cond.lt !== 'undefined') {\n        return _.lt(value, cond.lt);\n      }\n      else if (typeof cond.gt !== 'undefined') {\n        return _.gt(value, cond.gt);\n      }\n\n      logger.error(`Unknown metadata operator in condition: ${cond}`);\n      return false;\n    });\n  }\n}\n\nconst Evaluators = {\n\n  /**\n   * Check if the room in the context is a public room\n   * @param context the condition context, containing 'room'\n   * @returns {boolean}\n   */\n  'room_is_public': (context) => {\n    var privacy = Context.check(context, Context.ROOM).privacy;\n    return utils.jid.is_public_room(privacy);\n  },\n\n  /**\n   * Check if the user in the context is an administrator\n   * @param context the condition context, containing 'user'\n   * @returns {boolean}\n   */\n  'user_is_admin': (context) => {\n    return Context.check(context, Context.USER).is_admin;\n  },\n\n  /**\n   * Check if the user in the context is a guest user\n   * @param context the condition context, containing 'user'\n   * @returns {boolean}\n   */\n  'user_is_guest': (context) => {\n    return Context.check(context, Context.USER).is_guest;\n  },\n\n  /**\n   * Check if the user in the context is the owner of the the room in the context\n   * @param context the condition context, containing 'user' and 'room'\n   * @returns {boolean}\n   */\n  'user_is_room_owner': (context) => {\n    var room = Context.check(context, Context.ROOM);\n    var user = Context.check(context, Context.USER);\n\n    return room.owner === user.id;\n  },\n\n  /**\n   * Check if the message in the context matches a certain sub-condition.\n   * @param context the condition context, containing 'message'\n   * @param params: Currently supported params:\n   *\n   * Matches the message type:\n   * params: {\n   *   \"type\": \"notification\"\n   * }\n   *\n   * Matches the message body (regular expression):\n   * params: {\n   *   \"regex\": {\n   *     \"pattern\": \"<pattern>\",\n   *     \"flags\": \"i\"\n   *   }\n   * }\n   *\n   * Matches the message sender:\n   * params: {\n   *   \"sender\": \"Giphy\"\n   * }\n   *\n   * @returns {boolean}\n   */\n  'message_matches': (context, params) => {\n\n    var message = Context.check(context, Context.MESSAGE);\n\n    function matchType() {\n      var type = _.get(params, 'type');\n      if (type) {\n        return message.type === type;\n      }\n      return true;\n    }\n\n    function matchFileType() {\n      var type = _.get(params, 'file_type');\n      if (type) {\n        return _.get(message, 'file_data.file_type') === type.replace('image','img');\n      }\n      return true;\n    }\n\n    function matchRegExp() {\n      var regex = _.get(params, 'regex');\n      if (regex) {\n        if (regex.pattern) {\n          try {\n            let regularExpression = new RegExp(regex.pattern, regex.flags);\n            return regularExpression.test(message.body);\n          } catch (e) {\n            logger.error(e);\n            return false;\n          }\n        } else {\n          logger.error('Regular Expression condition must specify a \"pattern\" attribute');\n          return false;\n        }\n      }\n      return true;\n    }\n\n    function matchSender() {\n      var sender = _.get(params, 'sender');\n      if (sender) {\n        return message.sender === sender;\n      }\n      return true;\n    }\n\n    return matchType() && matchFileType() && matchRegExp() && matchSender();\n  },\n\n  /**\n   * Check if the message in the context contains a link\n   * @param context the condition context, containing 'message'\n   * @returns {boolean}\n   */\n  'message_contains_link': (context) => {\n    var message = Context.check(context, Context.MESSAGE);\n    return link_utils.contains_url(message.body);\n  },\n\n  /**\n   * Check if the message in the context was sent by the user in the context\n   * @param context the condition context, containing 'message' and 'user'\n   * @returns {boolean}\n   */\n  'message_sent_by_current_user': (context) => {\n    var message = Context.check(context, Context.MESSAGE);\n    var user = Context.check(context, Context.USER);\n    return message.sender_id === user.id;\n  },\n\n  /**\n   * Check if the message in the context is a card and matches certain sub-conditions.\n   * @param context the condition context, containing 'message'\n   * @param params: Currently supported params:\n   *\n   * Matches the card style:\n   * params: {\n   *   \"style\": \"application\"\n   * }\n   *\n   * Matches metadata (see MetaDataMatcher above)\n   * params: {\n   *   \"metadata\": [\n   *     { 'attr': 'canBeClosed', 'eq': true}\n   *   ]\n   * }\n   *\n   * @returns {boolean}\n   */\n  'card_matches': (context, params) => {\n\n    var message = Context.check(context, Context.MESSAGE);\n\n    function matchStyle() {\n      var style = _.get(params, 'style');\n      if (style) {\n        return message.card && message.card.style === style;\n      }\n      return true;\n    }\n\n    function matchMetadata() {\n      var metadataConditions = _.get(params, 'metadata');\n      if (_.isArray(metadataConditions)) {\n        if (message.metadata) {\n          let matcher = new MetaDataMatcher(message.metadata);\n          return matcher.match(metadataConditions);\n        }\n        return false;\n      }\n      return true;\n    }\n\n    return matchStyle() && matchMetadata();\n  },\n\n  /**\n   * Check if the glance data in the context matches sub-conditions\n   * @param context the condition context, containing 'glanceData'\n   * @param params: Currently supported params:\n   *\n   * Matches metadata (see MetaDataMatcher above)\n   * params: {\n   *   \"metadata\": [\n   *     { 'attr': 'isConfigured', 'eq': true}\n   *   ]\n   * }\n   *\n   * @returns {boolean}\n   */\n  'glance_matches': (context, params) => {\n\n\n    var glanceData = Context.check(context, Context.GLANCE_DATA);\n\n    function matchMetadata() {\n      var metadataConditions = _.get(params, 'metadata');\n      if (_.isArray(metadataConditions)) {\n        if (glanceData.metadata) {\n          let matcher = new MetaDataMatcher(glanceData.metadata);\n          return matcher.match(metadataConditions);\n        }\n        return false;\n      }\n      return true;\n    }\n\n    return matchMetadata();\n  }\n};\n\nclass ConditionContext {\n\n  static no_match() {\n    return false;\n  }\n\n  static getEvaluator(condition) {\n    var evaluator = Evaluators[condition];\n    if (!evaluator) {\n      logger.warn(`Unknown condition type: ${condition}`);\n      evaluator = ConditionContext.no_match;\n    }\n    return evaluator;\n  }\n\n  constructor() {\n    this.context = {};\n  }\n\n  withRoom(room) {\n    this.context[Context.ROOM] = room;\n    return this;\n  }\n\n  withUser(user) {\n    this.context[Context.USER] = user;\n    return this;\n  }\n\n  withMessage(message) {\n    this.context[Context.MESSAGE] = message;\n    return this;\n  }\n\n  withGlanceData(glanceData) {\n    this.context[Context.GLANCE_DATA] = glanceData;\n    return this;\n  }\n\n  /**\n   * Evaluates conditions based on the context passed in on construction.\n   *\n   * @param conditions\n   *\n   * \"conditions\": [\n   *   {\n   *     \"condition\": \"user_is_guest\"\n   *   },\n   *   {\n   *     \"condition\": \"feature_is_enabled\",\n   *     \"params\": {\n   *       \"feature\": \"web_client_video_chat\"\n   *     }\n   *   }\n   * ]\n   *\n   * See also: https://extranet.atlassian.com/display/HC/Spec%3A+Capabilities+document+changes+for+pluggable+clients\n   */\n  evaluate(conditions) {\n    try {\n      return _.isEmpty(conditions) || this._and(conditions);\n    } catch (e) {\n      logger.error(e);\n      return false;\n    }\n  }\n\n  canEvaluate(condition) {\n    let hasDynamicConditions = traverse(condition).reduce( (acc, obj ) => {\n      let result;\n      if (obj['condition'] === 'glance_matches') {\n        result = true;\n      } else {\n        result = acc;\n      }\n      return result;\n    }, false);\n\n    return !hasDynamicConditions || !_.isEmpty(this.context[Context.GLANCE_DATA]);\n  }\n\n\n  _evaluateCondition(condition) {\n    var conditionType = condition['condition'];\n\n    if (!conditionType) {\n      var compositeConditions = condition['conditions'] || [];\n      var compositeType = (condition['type'] || 'and').toLowerCase();\n      switch (compositeType) {\n        case 'and':\n          return this._and(compositeConditions);\n        case 'or':\n          return this._or(compositeConditions);\n        default:\n          logger.error(`Illegal operator: ${compositeType}`);\n          return no_match();\n      }\n    }\n\n    var evaluator = ConditionContext.getEvaluator(conditionType);\n    var result = evaluator(this.context, condition['params'] || {});\n    return condition.invert === true ? !result : result;\n  }\n\n  _and(conditions) {\n    return _.every(conditions, (condition) => {\n      return this._evaluateCondition(condition);\n    });\n  }\n\n  _or(conditions) {\n    return _.some(conditions, (condition) => {\n      return this._evaluateCondition(condition);\n    });\n  }\n}\n\nmodule.exports = ConditionContext;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/conditions.js\n **/","var traverse = module.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) node[key] = {};\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) keepGoing = false;\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) keepGoing = false;\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) keepGoing = false;\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f },\n            after : function (f) { modifiers.after = f },\n            pre : function (f) { modifiers.pre = f },\n            post : function (f) { modifiers.post = f },\n            stop : function () { alive = false },\n            block : function () { keepGoing = false }\n        };\n        \n        if (!alive) return state;\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node)\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) state.update(ret);\n        \n        if (modifiers.before) modifiers.before.call(state, state.node);\n        \n        if (!keepGoing) return state;\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) modifiers.pre.call(state, state.node[key], key);\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) modifiers.post.call(state, child);\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) modifiers.after.call(state, state.node);\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else return src;\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) res.push(key)\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) return xs.forEach(fn)\n    else for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/traverse/index.js\n ** module id = 418\n ** module chunks = 0\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AppConfig from 'config/app_config';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport logger from 'helpers/logger';\nimport Utils from 'helpers/utils';\nimport URITemplate from 'helpers/uri_template';\n\nmodule.exports = {\n\n  fetchSignedUrlConditionally: function(extension, room_id, urlTemplateValues) {\n    if (extension.authentication === 'none') {\n      let template = new URITemplate(extension.url);\n      let url = template.replaceVariables(urlTemplateValues);\n      AppDispatcher.dispatch('signed-extension-url-fetched', {\n        extension: extension,\n        room_id: room_id,\n        signed_url: Utils.addConnectApiVersionToUrl(url)\n      });\n    } else {\n      this.fetchSignedUrl(extension, room_id, urlTemplateValues);\n    }\n  },\n\n  fetchSignedUrl: function (extension, room_id, urlTemplateValues) {\n\n    AppDispatcher.dispatch('signed-extension-url-fetching', {\n      extension: extension,\n      room_id: room_id,\n      url_template_values: urlTemplateValues\n    });\n\n    this.fetchSignedUrlWithResult(extension, room_id, urlTemplateValues, (data, result) => {\n      if (!data || data.error || result.status >= 400) {\n        logger.error('[HC-Integrations]', `Could not get a signed URL for ${extension.full_key}.`);\n        AppDispatcher.dispatch('signed-extension-url-error', {\n          extension: extension,\n          room_id: room_id,\n          error: _.get(data, \"error\", \"Error fetching signed url\"),\n          status: result.status\n        });\n      } else {\n        let location = Utils.addConnectApiVersionToUrl(data.location);\n        AppDispatcher.dispatch('signed-extension-url-fetched', {\n          extension: extension,\n          room_id: room_id,\n          signed_url: location\n        });\n      }\n    });\n  },\n\n  fetchSignedUrlWithResult: function (extension, room_id, urlTemplateValues, callback) {\n    AppDispatcher.dispatch('API:get-signed-url', {\n        extension: extension,\n        room_id: room_id,\n        timeout: AppConfig.integrations.signed_url_timeout\n      },\n      urlTemplateValues || {},\n      callback\n    );\n  },\n\n  iframeLoaded: function (data) {\n    AppDispatcher.dispatch('integration-iframe-loaded', {\n      integration: data.integration,\n      room_id: data.room_id\n    });\n\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: \"hipchat.client.integrations.view.iframe.loaded\",\n      properties: {\n        room_id: data.room_id,\n        addon_key: data.integration.addon_key,\n        full_key: IntegrationHelper.to_full_key(data.integration.addon_key, data.integration.key),\n        duration: data.duration\n      }\n    });\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/integrations_view_actions.js\n **/","import IntegrationDialogActions from 'actions/integration_dialog_actions';\nimport IntegrationsActions from 'actions/integrations_actions';\nimport logger from 'helpers/logger';\n\nexport function open(data, callback) {\n  if (!data || !data.key) {\n    logger.error(\"[HC-Integrations]\", \"No key specified. Use open({key: 'dialog-key'}).\");\n    return;\n  }\n  IntegrationsActions.openDialog(callback._context.extension.addon_key, data.key, {\n    options: data.options,\n    parameters: data.parameters,\n    urlTemplateValues: data.urlTemplateValues\n  }, \"api\");\n}\n\nexport function update(data, callback) {\n  IntegrationDialogActions.update(data, callback._context.extension.addon_key);\n}\n\nexport function updatePrimaryAction(primaryAction, callback) {\n  IntegrationDialogActions.update({\n    options: {\n      primaryAction: primaryAction\n    }\n  }, callback._context.extension.addon_key);\n}\n\nexport function close(callback) {\n  IntegrationDialogActions.closeDialog(callback._context.extension.addon_key);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/dialog_module.js\n **/","var DialogActions = require('./dialog_actions'),\n    SimpleXDM = require('simple-xdm/host'),\n    AppDispatcher = require('dispatchers/app_dispatcher'),\n    IntegrationDialogStore = require('stores/integration_dialog_store'),\n    IntegrationEvents = require('api/api_integration_events');\n\nmodule.exports = {\n\n  update: function (dialog, origin) {\n    AppDispatcher.dispatch('update-integration-dialog', {dialog, origin});\n  },\n\n  closeDialog: function(origin) {\n    if (IntegrationDialogStore.isActiveDialogOwner(origin)) {\n      DialogActions.closeDialog();\n    }\n  },\n\n  _btnClickCallback: function (shouldSubmit) {\n    if (shouldSubmit !== false) {\n      DialogActions.closeDialog();\n    }\n  },\n\n  buttonClick: function (integration, actionKey) {\n\n    var dispatched = SimpleXDM.dispatch(IntegrationEvents.DIALOG_CLICK, {\n      addon_key: integration.addon_key,\n      key: integration.key\n    }, {action: actionKey}, this._btnClickCallback);\n\n    var filtered = [];\n    if (dispatched) {\n      filtered = dispatched.filter((extension) => {\n        if (!extension.registered_events) {\n          return false;\n        }\n        return extension.registered_events.indexOf(IntegrationEvents.DIALOG_CLICK) !== -1;\n      });\n    }\n\n    if (filtered.length === 0) {\n      DialogActions.closeDialog();\n    }\n  },\n\n  filterChange: function (integration, value) {\n    SimpleXDM.dispatch(IntegrationEvents.DIALOG_FILTER_CHANGED, {\n      addon_key: integration.addon_key,\n      key: integration.key\n    }, { value });\n  }\n\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/integration_dialog_actions.js\n **/","import Store from 'lib/core/store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport DialogActions from 'actions/dialog_actions';\nimport ModalDialogStore from 'stores/modal_dialog_store';\nimport IntegrationStore from 'stores/integrations_store';\nimport {event_names as integrations_event_names} from 'keys/integrations_keys';\n\nclass IntegrationDialogStore extends Store {\n\n  constructor() {\n    super();\n    this.local = {\n      active_chat: ''\n    };\n  }\n\n  getDefaults() {\n    return {\n      title: \"\",\n      options: {}\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'update-integration-dialog': data => {\n        let dialog = this.getAll();\n        if (!data.origin || dialog.addon_key === data.origin) {\n          let customizedDialog = _.merge({title: \"\", options: {}}, dialog, {\n            title: data.dialog.title,\n            options: data.dialog.options\n          });\n          this.set(customizedDialog);\n        }\n      },\n      'show-modal-dialog': data => {\n        if (data.dialog_type === \"integration-dialog\") {\n          this.set(_.merge({title: \"\", options: {}}, data.dialog_data.integration));\n        }\n      },\n      'hide-modal-dialog': () => {\n        this.reset();\n      },\n      'updated:active_chat': (jid) => {\n        if (!jid || (jid && jid === this.local.active_chat)) {\n          return;\n        }\n        this.local.active_chat = jid;\n        var current_dialog = ModalDialogStore.getCurrentModalDialog();\n        if (current_dialog === \"integration-dialog\") {\n          DialogActions.closeDialog();\n        }\n      }\n    });\n\n    AppDispatcher.register(integrations_event_names.ON_INTEGRATIONS_REMOVED, (data) => {\n      let active_chat = IntegrationStore.get('active_chat');\n      if (!active_chat || !_.find(data.rooms, {id: active_chat.id})) {\n        return;\n      }\n\n      var addon_check = _.find(data.integrations, { 'addon_key': this.get('addon_key'), 'is_deleted': true });\n      if(addon_check) {\n        DialogActions.closeDialog();\n      }\n    });\n  }\n\n  isActiveDialogOwner(addonKey) {\n    return (this.get('addon_key') === addonKey);\n  }\n}\n\nexport default new IntegrationDialogStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/integration_dialog_store.js\n **/","import DialogActions from \"actions/dialog_actions\";\nimport HCAPI from 'api/api';\nimport PathParamConverters from 'helpers/path_parameter_converters';\nimport RosterStore from 'stores/roster_store';\nimport scoped_api from './scoped_api';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\n\nlet idToUserConverters = [\n  PathParamConverters.get(\"idToUser\"),\n  PathParamConverters.get(\"jidToUser\"),\n  PathParamConverters.get(\"mentionNameToUser\")];\nlet idToRoomConverters = [\n  PathParamConverters.get(\"idToRoom\"),\n  PathParamConverters.get(\"jidToRoom\"),\n  PathParamConverters.get(\"nameToRoom\")];\n\nfunction renderUser(user) {\n  return {\n    mention_name: user.mention_name,\n    id: parseInt(user.id),\n    name: user.name,\n    presence: user.presence,\n    photo_url: user.photo_url,\n    is_admin: user.is_admin,\n    email: user.email\n  };\n}\n\nfunction renderRoom(room) {\n  return {\n    id: parseInt(room.id),\n    name: room.name,\n    privacy: room.privacy,\n    topic: room.topic\n  };\n}\n\nfunction convert(identifier, converters) {\n  return _.reduce(converters, function (accumulator, converter) {\n    if (_.isUndefined(accumulator) && converter.handle(identifier)) {\n      return converter.convert(identifier);\n    }\n    return accumulator;\n  }, undefined);\n}\n\nexport function create(room_name, room_topic, room_privacy) {\n  let room = (typeof room_name === 'string') ? room_name : '';\n  let topic = (typeof room_topic === 'string') ? room_topic : '';\n  let privacy = (typeof room_privacy === 'string') ? room_privacy : 'public';\n  HCAPI.createRoom({\n    room_name: room,\n    room_topic: topic,\n    privacy: privacy\n  });\n}\n\n\nexport function open({roomId, roomName, userId, userMentionName, message}) {\n\n  let jid;\n  let roomIdentifier = roomId || roomName;\n  let userIdentifier = userId || userMentionName;\n\n  if (!_.isUndefined(roomIdentifier)) {\n    let room = convert(roomIdentifier, idToRoomConverters);\n\n    jid = _.get(room, \"jid\");\n\n  } else if (!_.isUndefined(userIdentifier)) {\n    let user = convert(userIdentifier, idToUserConverters);\n\n    jid = _.get(user, \"jid\");\n  } else {\n    logger.warn(\"[HC-Integrations]\", \"'roomId', 'roomName', 'userId' or 'userMentionName' parameter must be specified.\");\n    return;\n  }\n\n  if (!_.isUndefined(jid)) {\n    HCAPI.openChat({\n      jid: jid\n    });\n  } else {\n    logger.warn(\"[HC-Integrations]\", \"Failed to open room, room or user was not found.\");\n  }\n\n  if(typeof message === 'string') {\n    HCAPI.appendMessage({\n      text: message\n    });\n  }\n}\n\nexport function invite(userIds) {\n  let users = [];\n  userIds = utils.toArray(userIds);\n  userIds.forEach((userid) => {\n    let user = convert(userid, idToUserConverters);\n    let jid = _.get(user, 'jid');\n    if (jid) {\n      users.push(jid);\n    }\n  });\n\n  DialogActions.showInviteUsersDialog({\n    invite_users: users\n  });\n}\n\nexport const getParticipants = scoped_api('view_room', () => {\n  return {\n    guests: _.map(RosterStore.getSortedRosterByPresenceAndName(['guests']), renderUser),\n    members: _.map(RosterStore.getSortedRosterByPresenceAndName(['members']), renderUser)\n  };\n});\n\nexport const getRoomDetails = scoped_api('view_room', () => {\n  let activeChat = HCAPI.getActiveChat();\n\n  return renderRoom(activeChat);\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/room_module.js\n **/","var AppStore = require('stores/application_store'),\n    Utils = require('helpers/utils');\n\nclass PathParameterConverterRegistry {\n\n  constructor() {\n    this.converters = {};\n  }\n\n  register(name, predicate, converter) {\n    this.converters[name] = {\n      handle: predicate,\n      convert: converter\n    };\n  }\n\n  get(name) {\n    return this.converters[name];\n  }\n}\n\nvar parameter = {\n  isNumber: function(param) {\n    return !isNaN(Number(param));\n  },\n\n  isHalfJid: function(param) {\n    return /\\d+_[^@]+/.test(param);\n  },\n\n  isMention: function(param) {\n    return param.indexOf('@') === 0;\n  },\n\n  isAnything: function() {\n    return true;\n  }\n};\n\nvar idToRoom = function(param) {\n  var paramAsString = param.toString();\n  return _.find(AppStore.get('allRooms'), (room) => {\n    return _.get(room, 'id', '').toString() === paramAsString;\n  });\n};\n\nvar jidToRoom = function(param) {\n  return AppStore.get('allRooms')[param];\n};\n\nvar halfJidToRoom = function(param) {\n  var conferenceServer = AppStore.get('conference_server');\n  var jid = `${param}@${conferenceServer}`;\n  return AppStore.get('allRooms')[jid];\n};\n\nvar nameToRoom = function(param) {\n  return _.find(AppStore.get('allRooms'), (room) => {\n    return room.name === param;\n  });\n};\n\nvar idToUser = function(param) {\n  var chatServer = AppStore.get('chat_server');\n  var groupId = AppStore.get('group_id');\n  var jid = `${groupId}_${param}@${chatServer}`;\n  return AppStore.get('roster')[jid];\n};\n\nvar halfJidToUser = function(param) {\n  var chatServer = AppStore.get('chat_server');\n  return AppStore.get('roster')[`${param}@${chatServer}`];\n};\n\nvar jidToUser = function(param) {\n  return AppStore.get('roster')[param];\n};\n\nvar mentionNameToUser = function(param) {\n  var mentionName = param.substring(1);\n  return _.find(AppStore.get('roster'), (user) => {\n    return user.mention_name === mentionName;\n  });\n};\n\nvar pathParameterConverterRegistry = new PathParameterConverterRegistry();\n\npathParameterConverterRegistry.register(\"idToUser\", parameter.isNumber, idToUser);\npathParameterConverterRegistry.register(\"jidToUser\", Utils.jid.is_private_chat, jidToUser);\npathParameterConverterRegistry.register(\"halfJidToUser\", parameter.isHalfJid, halfJidToUser);\npathParameterConverterRegistry.register(\"mentionNameToUser\", parameter.isMention, mentionNameToUser);\n\npathParameterConverterRegistry.register(\"idToRoom\", parameter.isNumber, idToRoom);\npathParameterConverterRegistry.register(\"jidToRoom\", Utils.jid.is_room, jidToRoom);\npathParameterConverterRegistry.register(\"halfJidToRoom\", parameter.isHalfJid, halfJidToRoom);\npathParameterConverterRegistry.register(\"nameToRoom\", parameter.isAnything, nameToRoom);\n\nmodule.exports = pathParameterConverterRegistry;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/path_parameter_converters.js\n **/","import IntegrationsStore from 'stores/integrations_store';\nimport logger from 'helpers/logger';\n\nexport default function scopedAPIMethod(scope, method) {\n  return function (callback) {\n    let call_context = _.last(arguments);\n    let addon_key = _.get(call_context, \"_context.extension.addon_key\");\n\n    if (addon_key) {\n      let scopes = IntegrationsStore.getScopesForAddon(addon_key);\n\n      if (_.includes(scopes, scope)) {\n        let error = null, returnValue = null;\n        try {\n          returnValue = method(_.slice(arguments, 0, arguments.length - 1));\n\n        } catch (ex) {\n          error = ex.message;\n          logger.error(\"[HC-Integrations]\", `Error executing API method - ${ex}.`);\n        }\n\n        call_context(error, returnValue);\n      } else {\n        let error = `Error executing API method - insufficient scopes, needed ${scope} have ${scopes}.`;\n        call_context(error);\n        logger.error(\"[HC-Integrations]\", error);\n      }\n    } else {\n      let error = `Error executing API method - could not find addon information for call.`;\n      call_context(error);\n      logger.error(\"[HC-Integrations]\", error);\n    }\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/scoped_api.js\n **/","import IntegrationsActions from 'actions/integrations_actions';\nimport logger from 'helpers/logger';\n\n\nexport function openView(data, callback) {\n  if (!data || !data.key) {\n    logger.error(\"[HC-Integrations]\", \"No key specified. Use open({key: 'sidebar-key'}).\");\n    return;\n  }\n  IntegrationsActions.openSidebarView(callback._context.extension.addon_key, data.key, {\n    options: data.options,\n    parameters: data.parameters,\n    urlTemplateValues: data.urlTemplateValues\n  }, \"api\");\n}\n\nexport function closeView() {\n  IntegrationsActions.closeSidebarView(\"api\");\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/sidebar_module.js\n **/","import scoped_api from './scoped_api';\nimport CurrentUserStore from 'stores/current_user_store';\nimport {open as open_room} from \"./room_module\";\n\nexport const getCurrentUser = scoped_api('view_room', () => {\n  let current_user = CurrentUserStore.getAll();\n  return {\n    mention_name: current_user.mention,\n    id: current_user.id,\n    name: current_user.user_name,\n    presence: {show: current_user.show},\n    photo_url: current_user.photo_large,\n    is_admin: current_user.is_admin,\n    is_guest: current_user.is_guest,\n    email: current_user.email,\n    title: current_user.title\n  };\n});\n\nexport function open({userId, userMentionName, message}) {\n  return open_room({userId, userMentionName, message});\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/user_module.js\n **/","import FileViewerActions from 'actions/file_viewer_actions';\n\nexport function openInFileViewer(file, filesList) {\n  let data = {\n    file: file,\n    filesList: filesList || []\n  };\n\n  FileViewerActions.openExternalFileInFileViewer(data);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/api/modules/file_module.js\n **/","/**\n * FileViewerActions\n */\n\nimport AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  openInFileViewer(data) {\n    AppDispatcher.dispatch('open-in-file-viewer', data);\n  },\n\n  openExternalFileInFileViewer(data) {\n    AppDispatcher.dispatch('open-external-file-in-file-viewer', data);\n  },\n\n  fileViewerClosed(){\n    AppDispatcher.dispatch('file-viewer-closed');\n  },\n\n  fetchSignedFile(data, successCb, rejectCb) {\n    AppDispatcher.dispatch('API:fetch-signed-file', data, successCb, rejectCb);\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/file_viewer_actions.js\n **/","var Store = require(\"lib/core/store\"),\n  AppDispatcher = require(\"dispatchers/app_dispatcher\"),\n  IntegrationHelper = require(\"helpers/integration_helper\");\n\nclass IntegrationsViewStore extends Store {\n\n  getDefaults() {\n    return {\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      \"signed-extension-url-fetching\": (data) => {\n        this.set(this.fullKey(data.room_id, data.extension.full_key), {\n          signed_url: null,\n          signed_url_loading: true,\n          url_template_values: data.url_template_values,\n          error: null,\n          is_error: false\n        });\n      },\n      \"signed-extension-url-fetched\": (data) => {\n        this.set(this.fullKey(data.room_id, data.extension.full_key), {\n          signed_url: data.signed_url,\n          signed_url_loading: false\n        });\n      },\n      \"signed-extension-url-error\": (data) => {\n        let fullKey = this.fullKey(data.room_id, data.extension.full_key);\n        let url_template_values = _.get(this.get(fullKey), \"url_template_values\", {});\n        this.set(fullKey, {\n          error: data.error,\n          is_error: true,\n          status: data.status,\n          signed_url: null,\n          signed_url_loading: false,\n          url_template_values: url_template_values\n        });\n      },\n      \"integration-iframe-loaded\": (data) => {\n        var integration_full_key = IntegrationHelper.to_full_key(data.integration.addon_key, data.integration.key);\n        var fullKey = this.fullKey(data.room_id, integration_full_key);\n        this.set(fullKey, _.extend({\n          frame_loading: false\n        }, this.get(fullKey)));\n      }\n    });\n  }\n\n  onIntegrationViewStatusChange(room_id, extension_full_key, callback) {\n    let key = this.fullKey(room_id, extension_full_key);\n    this.on(`change:${key}`, callback);\n  }\n\n  offIntegrationViewStatusChange(room_id, extension_full_key, callback) {\n    let key = this.fullKey(room_id, extension_full_key);\n    this.off(`change:${key}`, callback);\n  }\n\n  getIntegrationViewStatus(room_id, extension_full_key) {\n    let key = this.fullKey(room_id, extension_full_key);\n    return this.get(key);\n  }\n\n  fullKey(room_id, extension_full_key) {\n    return `${room_id}:${extension_full_key}`;\n  }\n\n}\n\nmodule.exports = new IntegrationsViewStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/integrations_view_store.js\n **/","export default {\n  fetch_error: `Couldn't load integrations`,\n  retry: `Try again`,\n  glance_fetch_error: `Can't load`,\n  glance_loading: `Loading...`,\n  empty_message_actions: `No actions available`,\n  empty_message_actions_title: `There are no actions available for this message.`,\n  configure_integrations: `Integrations`,\n  add_integrations: `Add integrations`,\n  configure_integration: `Configure integration`,\n  update_integration: `Update integration`,\n  disabled_integrations: `Disabled`,\n  update: `Update`,\n  the_following_integrations_require_the_latest_version_of_hipchat: `The following integrations require the latest version of HipChat.`,\n  active: `Active`,\n  pending_updates: `Pending Updates`,\n  pending_updates_contact_admin: `The following integrations require a room administrator to approve an update.`,\n  pending_global_updates: `Pending Global Updates`,\n  pending_global_updates_contact_admin: `The following integrations require a global administrator to approve an update.`,\n  install_integrations: `Install integrations`,\n  install_new_integrations: `Install new integrations`,\n  install_integrations_tooltip_title: `ADD AND CONFIGURE INTEGRATIONS`,\n  install_integrations_tooltip_content: `Just so you know, you can always add more integrations, or manage your existing ones here.`,\n  got_it: `Got it!`,\n  installed_count: function(count) {\n    return `${count} installed`;\n  },\n  pending_updates_count: function(count) {\n    return `${count} pending update${count > 1 ? 's' : ''}`;\n  },\n  integration_failed_to_load: `Unable to load`\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/integrations_strings.js\n **/","import ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport IntegrationsStore from 'stores/integrations_store';\nimport PermissionsStore from 'stores/permissions_store';\nimport CurrentUserStore from 'stores/current_user_store';\nimport ConfigStore from 'stores/configuration_store';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport EmptyState from './integrations_management_dialog_empty_state';\nimport strings from 'strings/integrations_strings';\nimport IntegrationsSection from \"./integrations_section\";\n\nconst BITBUCKET_ADDON_KEY = 'com.atlassian.bitbucket.hipbucket';\n\nlet integration_events = [\n  'change:integrations',\n  'change:unsupported_integrations',\n  'change:active_chat',\n  'change:pending_updates'\n];\n\nexport default React.createClass({\n\n  displayName: 'IntegrationsDialog',\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  componentDidMount() {\n    IntegrationsStore.on(integration_events, this._onChange);\n    CurrentUserStore.on('change:id', this._onChange);\n    ConfigStore.on('change:web_server', this._onChange);\n  },\n\n  componentWillUnmount() {\n    IntegrationsStore.off(integration_events, this._onChange);\n    CurrentUserStore.off('change:id', this._onChange);\n    ConfigStore.off('change:web_server', this._onChange);\n  },\n\n  _onChange() {\n    this.setState(this._getState());\n  },\n\n  _getState() {\n    let {pending_global, pending_room, disabled, installed} = IntegrationsStore.getIntegrationStatusesForContext();\n\n    return {\n      active_chat: IntegrationsStore.get('active_chat'),\n      pending_global: pending_global,\n      pending_room: pending_room,\n      disabled: disabled,\n      installed: installed,\n      integrations: IntegrationsStore.getUniqueIntegrationsForContext(),\n      web_server: ConfigStore.get('web_server'),\n      current_user_id: CurrentUserStore.get('id')\n    };\n  },\n\n  _getConfigButton(integration) {\n    let url = IntegrationHelper.getIntegrationsConfigUrl(this.state.web_server, this.state.active_chat.id, integration.addon_key);\n    return <a href={url} target=\"_blank\" className=\"hc-integration-configure\">\n      <span className=\"aui-icon aui-icon-small aui-iconfont-configure\" aria-label={strings.configure_integration}/>\n    </a>;\n  },\n\n  _getUpdateButton(integration) {\n    let global_context = integration.context === \"global\";\n    let chat_id = global_context ? -1 : this.state.active_chat.id;\n\n    let url = IntegrationHelper.getIntegrationsUpdateUrl(this.state.web_server, chat_id, integration.addon_key);\n    return <a href={url} target=\"_blank\" className=\"hc-integration-update\">\n      {strings.update}\n    </a>;\n  },\n\n  _getDisabledIntegrationsSection(integrations) {\n    return <IntegrationsSection title={strings.disabled_integrations}\n                                section=\"unsupported\"\n                                description={strings.the_following_integrations_require_the_latest_version_of_hipchat}\n                                integrations={integrations}\n                                showGlobalLozenge={false}/>;\n  },\n\n  _getInstalledIntegrationsSection(integrations) {\n    let actions = _.noop;\n\n    if (PermissionsStore.canUpdateRoomIntegrations()) {\n      actions = this._getConfigButton;\n    }\n\n    return <IntegrationsSection title={strings.active}\n                                status={strings.installed_count(integrations.length)}\n                                section=\"installed\"\n                                integrations={integrations}\n                                actions={actions}\n                                showGlobalLozenge={true}/>;\n  },\n\n  _getPendingRoomUpdatesSection(integrations) {\n    let actions = _.noop;\n\n    if (PermissionsStore.canUpdateRoomIntegrations()) {\n      actions = this._getUpdateButton;\n    }\n\n    return <IntegrationsSection title={strings.pending_updates}\n                                status={strings.pending_updates_count(integrations.length)}\n                                section=\"pending-room\"\n                                description={PermissionsStore.canUpdateRoomIntegrations() ? null : strings.pending_updates_contact_admin}\n                                integrations={integrations}\n                                actions={actions}\n                                showGlobalLozenge={false}/>;\n  },\n\n  _getPendingGlobalUpdatesSection(integrations) {\n    let actions = _.noop;\n\n    if (PermissionsStore.get('user_is_admin')) {\n      actions = this._getUpdateButton;\n    }\n\n    return <IntegrationsSection title={strings.pending_global_updates}\n                                status={strings.pending_updates_count(integrations.length)}\n                                section=\"pending-global\"\n                                description={PermissionsStore.get('user_is_admin') ? null : strings.pending_global_updates_contact_admin}\n                                integrations={integrations}\n                                actions={actions}\n                                showGlobalLozenge={false}/>;\n  },\n\n  _getInstallNewIntegrationsSection() {\n    if (!PermissionsStore.canManageRoomIntegrations()) {\n      return null;\n    }\n\n    let url = IntegrationHelper.getIntegrationsUrl(this.state.web_server, this.state.active_chat.id, this.state.current_user_id, IntegrationHelper.DIALOG_LINK_SOURCE_ID);\n\n    return (\n      <div className=\"hc-integration-section\">\n        <a href={url} target=\"_blank\" className=\"hc-install-link\">\n          <span className=\"aui-icon aui-icon-small aui-iconfont-add-small\" />\n          <span>{strings.install_new_integrations}</span>\n        </a>\n      </div>\n    );\n  },\n\n  _isBitbucketInstalledButNotConfigured(integrations) {\n    let is_bitbucket_configured = () => _.find(IntegrationsStore.getExtensionsByType('glance'), addon => addon.addon_key === BITBUCKET_ADDON_KEY);\n    let is_bitbucket_disabled = () => _.find(this.state.disabled, (addon) => addon.addon_key === BITBUCKET_ADDON_KEY);\n\n    return integrations.length === 1                        // Only one addon installed\n      && integrations[0].addon_key === BITBUCKET_ADDON_KEY  // Addon is bitbucket\n      && !is_bitbucket_disabled()                           // Addon isn't disabled\n      && !is_bitbucket_configured();                        // Addon isn't configured (no glance)\n  },\n\n  _shouldShowEmptyState() {\n    let integrations = this.state.integrations;\n\n    if (integrations.length === 0) {\n      return true;\n    }\n\n    return this._isBitbucketInstalledButNotConfigured(integrations);\n  },\n\n  _getDialogBody() {\n    if (this._shouldShowEmptyState()) {\n      let can_manage_integrations = PermissionsStore.canManageRoomIntegrations();\n      return (<EmptyState active_chat_id={this.state.active_chat.id}\n                          user_id={this.state.current_user_id}\n                          web_server={this.state.web_server}\n                          can_manage_integrations={can_manage_integrations} />);\n    }\n\n    return (\n      <div>\n        {this._getInstallNewIntegrationsSection()}\n        {this._getPendingRoomUpdatesSection(this.state.pending_room)}\n        {this._getPendingGlobalUpdatesSection(this.state.pending_global)}\n        {this._getDisabledIntegrationsSection(this.state.disabled)}\n        {this._getInstalledIntegrationsSection(this.state.installed)}\n      </div>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"integrations-management-dialog\"\n                   title=\"Integrations\"\n                   size=\"medium\"\n                   dialogBody={this._getDialogBody}\n                   showFooter={false}\n                   noCloseLink={true} />\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/integrations_dialog/integrations_management_dialog.js\n **/","import strings from 'strings/empty_state_strings';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport IntegrationHelper from 'helpers/integration_helper';\n\nconst PropTypes = React.PropTypes;\n\nexport default React.createClass({\n\n  displayName: 'IntegrationsDialogEmptyState',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    active_chat_id: PropTypes.string,\n    user_id: PropTypes.number,\n    web_server: PropTypes.string,\n    can_manage_integrations: PropTypes.bool\n  },\n\n  render() {\n    let url = this.props.can_manage_integrations ? IntegrationHelper.getIntegrationsUrl(this.props.web_server, this.props.active_chat_id, this.props.user_id) : IntegrationHelper.getIntegrationsBaseUrl(this.props.web_server);\n\n    return (\n      <div className=\"hc-integrations-empty-state\">\n        <div className=\"hc-integrations-es-img\"></div>\n        <p>\n          {strings.empty_integrations_text}\n        </p>\n        <p>\n          <a className=\"aui-button aui-button-primary\" href={url} target=\"_blank\">{strings.check_out_integrations}</a>\n        </p>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/integrations_dialog/integrations_management_dialog_empty_state.js\n **/","import common from 'strings/common_strings';\n\nexport default {\n  no_files: `No files shared yet`,\n  no_links: `No links shared yet`,\n  no_glance_integration: `No integration installed yet`,\n  share_a_file: `Share the first file`,\n  share_a_link: `Recently shared links will appear here.`,\n  check_out_integrations: `Check out ${common.app_name} integrations`,\n  empty_private_room: \"You're the only one here\",\n  invite_to_team: `${common.app_name} is awesome with teammates.`,\n  invite_to_team_action: `Invite your team to join`,\n  invite_to_room: `Rooms are more fun with teammates.`,\n  invite_to_room_action: `Ask them to join you`,\n  empty_lobby_title: `WELCOME TO ${common.app_name.toUpperCase()}`,\n  empty_lobby_message: `It looks like you're just starting out, so things are a little bare.`,\n  empty_search_lobby: `Sorry, nothing matches your search.`,\n  empty_integrations_text: `Connect your team with the tools they love. With over 100 integrations, transform HipChat from simple chat to your team's command center.`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/empty_state_strings.js\n **/","import Integration from \"./integration\";\n\nconst PropTypes = React.PropTypes;\n\nconst IntegrationsSection = React.createClass({\n  defaultProps: {\n    showGlobalLozenge: false,\n    actions: _.noop\n  },\n\n  propTypes: {\n    actions: PropTypes.func,\n    showGlobalLozenge: PropTypes.bool,\n    section: PropTypes.string.isRequired,\n    status: PropTypes.string,\n    integrations: PropTypes.arrayOf(PropTypes.object).isRequired\n  },\n\n  render() {\n    if (this.props.integrations.length === 0) {\n      return null;\n    }\n\n    let description = null, status = null;\n\n    if (this.props.description) {\n      description = <div className=\"hc-integration-section-description\">\n        <p>{this.props.description}</p>\n      </div>;\n    }\n\n    if (this.props.status) {\n      status = <span className=\"hc-integrations-installed-count\">{this.props.status}</span>;\n    }\n\n    let rendered_integrations = _.map(this.props.integrations, (integration, i) =>\n      <Integration key={i}\n                   integration={integration}\n                   actions={this.props.actions}\n                   showGlobalLozenge={this.props.showGlobalLozenge}/>);\n\n    return <div className={`hc-integration-section hc-integration-section-${this.props.section}`}>\n      <div className=\"hc-integration-section-title\">\n        <h5>{this.props.title}</h5>\n        {status}\n      </div>\n      {description}\n      <ul className=\"hc-integrations-list\">\n        {rendered_integrations}\n      </ul>\n    </div>;\n  }\n});\n\nexport default IntegrationsSection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/integrations_dialog/integrations_section.js\n **/","const PropTypes = React.PropTypes;\n\nconst Integration = React.createClass({\n  propTypes: {\n    actions: PropTypes.func.isRequired,\n    showGlobalLozenge: PropTypes.bool.isRequired,\n    integration: PropTypes.shape({\n      name: PropTypes.string,\n      icon: PropTypes.string\n    }).isRequired\n  },\n\n  render() {\n    let actions = null,\n      icon = <div className=\"hc-integration-icon hc-integration-icon-default\"></div>,\n      scope = null;\n\n    if (this.props.integration.icon) {\n      icon = <img src={this.props.integration.icon} className=\"hc-integration-icon\"/>;\n    }\n\n    if (this.props.integration.context === \"global\" && this.props.showGlobalLozenge) {\n      scope = <span className=\"aui-lozenge aui-lozenge-subtle\">Global</span>;\n    }\n\n    if (this.props.actions) {\n      actions = this.props.actions(this.props.integration);\n    }\n\n    return (\n      <li>\n        {icon}\n        <div className=\"hc-integration-name\">{this.props.integration.name}</div>\n        <span className=\"hc-integration-management-right\">\n          {scope}\n          {actions}\n        </span>\n      </li>\n    );\n  }\n});\n\nexport default Integration;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/integrations_dialog/integration.js\n **/","import ModalDialog from \"components/common/modal_dialog/modal_dialog\";\nimport EditMessageForm from \"components/forms/edit_message_form\";\nimport strings from 'strings/dialog_strings';\nimport ieSubmitMixin from 'components/mixins/ie_submit_mixin';\nimport DialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\n\nexport default React.createClass({\n\n  displayName: \"EditMessageDialog\",\n\n  mixins: [ieSubmitMixin, DialogVisibilityMixin],\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _getState: function () {\n    return {\n      dialogButtonInactive: true\n    };\n  },\n\n  _dialogBody: function () {\n    return (\n      <EditMessageForm message={this.props.message}\n        activateDialogButton={this._activateDialogButton}\n        deactivateDialogButton={this._deactivateDialogButton} />\n    );\n  },\n\n  _activateDialogButton: function(){\n    this.setState({\n      dialogButtonInactive: false\n    });\n  },\n\n  _deactivateDialogButton: function(){\n    this.setState({\n      dialogButtonInactive: true\n    });\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button form=\"edit-message-form\" className=\"aui-button aui-button-primary\" aria-disabled={this.state.dialogButtonInactive} type=\"submit\" onClick={this.ieSubmit}>{strings.save}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"edit-message-dialog\"\n                   title={strings.edit_message}\n                   dialogBody={this._dialogBody}\n                   dialogFooterButton={this._dialogFooterButton}\n                   closeLinkText=\"Cancel\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/edit_message_dialog/edit_message_dialog.js\n **/","import AuiTextAreaFieldGroup from \"components/common/aui/form/aui_textarea_fieldgroup\";\nimport DialogActions from \"actions/dialog_actions\";\nimport FormActions from \"actions/form_actions\";\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\n\nexport default React.createClass({\n\n  displayName: \"EditMessageForm\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  componentDidMount() {\n    this._focusInput();\n    this.shouldAutoFocus = true;\n  },\n\n  componentDidUpdate() {\n    if (this.props.dialogVisible && this.shouldAutoFocus) {\n      this._focusInput();\n      this.shouldAutoFocus = false;\n    }\n  },\n\n  componentWillUpdate(nextProps, nextState) {\n    if (nextState.body !== this.props.message.body) {\n      this.props.activateDialogButton();\n    } else {\n      this.props.deactivateDialogButton();\n    }\n  },\n\n  componentWillUnmount() {\n    if(this.delayedFocus) {\n      clearTimeout(this.delayedFocus);\n    }\n  },\n\n  getInitialState() {\n    let msg = this.props.message;\n    if (this.props.message.message_type === 'file' &&\n        this.props.message.body.indexOf('File uploaded') === 0 &&\n        this.props.message.rendered_body === '') {\n       msg = _.assign({}, this.props.message, { body: '' });\n    }\n    return msg;\n  },\n\n  _handleKeyDown(evt) {\n    if(evt.keyCode === utils.keyCode.Enter && !utils.keyCode.isModified(evt)) {\n      this._onSubmit(evt);\n    }\n  },\n\n  _onChange(evt) {\n    this.setState({\n      body: evt.target.value\n    });\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n    FormActions.editMessage({\n      jid: this.state.from,\n      message: this.state.body,\n      original_mid: this.state.mid,\n      ts: this.state.ts\n    });\n    this._closeDialog();\n  },\n\n  _closeDialog() {\n    DialogActions.closeDialog();\n  },\n\n  _focusInput() {\n    this.delayedFocus = _.delay(()=>{\n      let textArea = ReactDOM.findDOMNode(this).querySelector('#message-to-edit');\n      textArea.focus();\n      textArea.setSelectionRange(this.state.body.length,this.state.body.length);\n    }, AppConfig.modal_transition_allowance);\n  },\n\n  render() {\n    return (\n      <form id=\"edit-message-form\" ref=\"form\" className=\"aui\" onSubmit={this._onSubmit}>\n        <AuiTextAreaFieldGroup\n          id=\"message-to-edit\"\n          label={this.state.sender}\n          rows=\"5\"\n          cols=\"400\"\n          maxLength={AppConfig.max_message_text_length}\n          value={this.state.body}\n          onKeyDown={this._handleKeyDown}\n          onChange={this._onChange}>\n        </AuiTextAreaFieldGroup>\n        <span className=\"edit-display-time\">{this.state.display_time}</span>\n      </form>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/edit_message_form.js\n **/","import ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport DeleteMessageForm from 'components/forms/delete_message_form';\nimport strings from 'strings/dialog_strings';\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: 'DeleteMessageDialog',\n\n  _dialogBody: function () {\n    return (\n      <DeleteMessageForm message={this.props.message} />\n    );\n  },\n\n  _dialogFooterButtons: function () {\n    let btnClasses = cx({\n      'aui-button': true\n    });\n\n    return (\n      <button form=\"delete-message-form\" className={btnClasses} type=\"submit\">{strings.delete}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"delete-message-dialog\"\n                   isWarning=\"true\"\n                   title={strings.delete_message}\n                   dialogBody={this._dialogBody}\n                   dialogFooterButton={this._dialogFooterButtons}\n                   closeLinkText={strings.cancel}\n                   hint={strings.edit_message_hint} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/delete_message_dialog/delete_message_dialog.js\n **/","import FormActions from 'actions/form_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport Message from 'components/chat_window/message_types/message';\n\nexport default React.createClass({\n\n  displayName: 'DeleteMessageForm',\n\n  _onSubmit(evt) {\n    evt.preventDefault();\n    FormActions.deleteMessage(this.props.message);\n    DialogActions.closeDialog();\n  },\n\n  _renderMessage() {\n    let msg = this.props.message;\n    return (\n      <Message key={'msg-' + msg.mid} ref={'msg_' + msg.mid} msg={msg} />\n    );\n  },\n\n  render() {\n    let renderedMessage = this._renderMessage();\n    return (\n      <form id='delete-message-form'\n            ref='delete_message_form'\n            className='aui'\n            onSubmit={this._onSubmit}>\n        {renderedMessage}\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/forms/delete_message_form.js\n **/","import utils from 'helpers/utils';\nimport emoticons from 'helpers/emoticons';\nimport Expando from 'components/chat_window/expando';\nimport MentionEmoticonTooltipMixin from 'components/mixins/mention_emoticon_tooltip_mixin';\nimport ScrollingMediaObserver from 'components/mixins/scrolling_media_observer_mixin';\nimport strings from 'strings/chat_panel_strings';\nimport Quote from 'components/chat_window/message_types/quote';\nimport Code from 'components/chat_window/message_types/code';\nimport Monospace from 'components/chat_window/message_types/monospace';\n\nlet PureRenderMixin = React.addons.PureRenderMixin;\n\nfunction getHtmlMsg(mid, body) {\n  return <div data-mid={mid} dangerouslySetInnerHTML={{__html: body}} />;\n}\n\nfunction getCommonMsg(mid, body, rendered_body) {\n  if (utils.messageShouldBeTruncated(body)) {\n    return (\n      <Expando mid={mid}>\n        <div className=\"msg-wrap\"\n             data-copyable={`{\"format\": \"plain-message\", \"mid\": \"${mid}\"}`}\n             dangerouslySetInnerHTML={{__html: rendered_body }} />\n      </Expando>\n    );\n  }\n\n  return <div className=\"msg-line\"\n              data-mid={mid}\n              data-copyable={`{\"format\": \"plain-message\", \"mid\": \"${mid}\"}`}\n              dangerouslySetInnerHTML={{__html: rendered_body}} />;\n}\n\nfunction getDeletedMsg(mid) {\n  return (\n    <div className=\"msg-line deleted\" data-mid={mid}>\n      <div className=\"hc-msg-deleted-icon\"></div>\n      {strings.message_deleted}\n    </div>\n  );\n}\n\nfunction getRenderedMessage(msg) {\n  if (msg.is_deleted) {\n    return getDeletedMsg(msg.mid);\n  }\n\n  switch (msg.format) {\n    case 'code':\n      return <Code mid={msg.mid} body={msg.rendered_body}/>;\n    case 'monospace':\n      return <Monospace mid={msg.mid} body={msg.rendered_body}/>;\n    case 'quotation':\n      return <Quote mid={msg.mid} body={msg.body}/>;\n    case 'html':\n      return getHtmlMsg(msg.mid, msg.xhtml_im_body);\n    default:\n      return getCommonMsg(msg.mid, msg.body, msg.rendered_body);\n  }\n}\n\nexport default React.createClass({\n\n  displayName: \"MessageMessageType\",\n\n  // Message instance changes only when message changes, so\n  // we can use PureRenderMixin here\n  mixins: [PureRenderMixin, MentionEmoticonTooltipMixin, ScrollingMediaObserver],\n\n  propTypes: {\n    msg: React.PropTypes.shape({\n      body: React.PropTypes.string.isRequired,\n      rendered_body: React.PropTypes.string.isRequired,\n      format: React.PropTypes.string.isRequired,\n      mid: React.PropTypes.string.isRequired,\n      status: React.PropTypes.string.isRequired\n    })\n  },\n\n  componentDidMount() {\n    emoticons._replaceSpecials(ReactDOM.findDOMNode(this));\n  },\n\n  render() {\n    var msg = this.props.msg,\n        renderedMessage = getRenderedMessage(msg);\n\n    return renderedMessage;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/message.js\n **/","var ChatPanelStrings = require('strings/chat_panel_strings');\nvar cx = require('classnames');\nimport ChatWindowActions from 'actions/chat_window_actions';\n\nmodule.exports = React.createClass({\n\n  displayName: \"Expando\",\n\n  getInitialState: function(){\n    return {\n      truncated: true,\n      height: 0\n    };\n  },\n\n  componentDidMount: function(){\n    var height = $(ReactDOM.findDOMNode(this.refs.expando)).height();\n    this.setState({\n      height: height,\n      truncated: height > 120 ? true : false\n    });\n  },\n\n  componentDidUpdate: function() {\n    ChatWindowActions.preserveScrollValue({animation: false});\n  },\n\n  render: function () {\n    var contentClasses = cx({\n      \"msg-line\": true,\n      \"truncatable\": true,\n      \"truncated\": this.state.truncated,\n      \"expanded\": !this.state.truncated\n    });\n    var toggleClasses = cx({\n      \"truncatable\": true,\n      \"truncated\": this.state.truncated,\n      \"expanded\": !this.state.truncated,\n      \"hidden\": this.state.height <= 120\n    });\n    return (\n      <div className={contentClasses + ' ' + this.props.className} data-mid={this.props.mid}>\n        <div className=\"truncate-wrap\">\n          <div ref=\"expando\" className=\"msg-wrap\">\n            {this.props.children}\n          </div>\n        </div>\n        <div className={toggleClasses}>\n          <a name=\"truncate\" onClick={this._toggleTruncatedText}>{(this.state.truncated ? ChatPanelStrings.show_more : ChatPanelStrings.show_less)}</a>\n        </div>\n      </div>\n    );\n  },\n\n  _toggleTruncatedText: function (e) {\n    e.preventDefault();\n    this.setState({\n      truncated: !this.state.truncated\n    });\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/expando.js\n **/","export default {\n\n  _tooltipElements(){\n    return ReactDOM.findDOMNode(this).querySelectorAll('.hc-mention-user, .remoticon');\n  },\n\n  // Put me in componentDidMount\n  _createTooltips() {\n    AJS.$(this._tooltipElements()).tooltip({\n      title() {\n        let link = this.querySelector('a');\n        return link && link.getAttribute('data-title') || this.getAttribute('data-title') || this.alt || \"\";\n      }\n    });\n  },\n\n  // Put me in componentWillUnmount\n  _destroyTooltips() {\n    AJS.$(this._tooltipElements()).tooltip('destroy');\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/mention_emoticon_tooltip_mixin.js\n **/","import AppConfig from 'config/app_config';\nimport ChatWindowActions from 'actions/chat_window_actions';\n\nexport default {\n\n  getInitialState(){\n    return {\n      failed: false\n    };\n  },\n\n  componentDidMount: function () {\n    ChatWindowActions.preserveScrollValue({animation: true});\n    this._observeMediaTags();\n  },\n\n  componentDidUpdate: function () {\n    ChatWindowActions.preserveScrollValue({animation: false});\n  },\n\n  componentWillUnmount: function () {\n    this._cleanupMediaTagObservers();\n  },\n\n  _getIdForMediaTag(mediaTag){\n    let id = mediaTag.getAttribute('data-reactid') || mediaTag.getAttribute('id');\n    if (!id){\n      let fakeId = `hc-fake-react-id-${_.uniqueId()}`;\n      mediaTag.id = fakeId;\n      id = fakeId;\n    }\n    return id;\n  },\n\n  _observeMediaTag: function (mediaTag) {\n    var id = this._getIdForMediaTag(mediaTag);\n    var readyEvent = this._getReadyEvent(mediaTag);\n    if (!this.props.msg.media_loaded){\n      mediaTag.style.display = 'none';\n      this._media_timeouts[id] = setTimeout(() => {\n        this._onMediaTagFailed({target: mediaTag});\n      }, AppConfig.message_image_loading_timeout);\n      if (this._isImageTag(mediaTag)){\n        this._media_size_intervals[id] = setInterval(() => {\n          if (mediaTag.naturalHeight && mediaTag.naturalWidth){\n            clearInterval(this._media_size_intervals[id]);\n            delete this._media_size_intervals[id];\n            this._onMediaSizeKnown(mediaTag);\n          }\n        }, AppConfig.message_image_size_check_interval);\n      }\n      mediaTag.addEventListener(readyEvent, this._onMediaTagReady);\n      mediaTag.addEventListener('error', this._onMediaTagFailed);\n    } else {\n      mediaTag.addEventListener(readyEvent, this._onMediaTagReady);\n    }\n  },\n\n  _onMediaSizeKnown(mediaTag){\n\n    let $mediaTag = $(mediaTag),\n      $chatRow = $mediaTag.parents('.hc-chat-row'),\n      chatRowHeight = $chatRow.outerHeight();\n\n    mediaTag.style.display = '';\n\n    ChatWindowActions.updateScrollPosition({\n      heightDiff: $chatRow.outerHeight() - chatRowHeight,\n      offsetTop: $chatRow[0] && $chatRow[0].offsetTop\n    });\n\n    ChatWindowActions.messageMediaSizeFound({\n      jid: this.props.msg.room,\n      mid: this.props.msg.mid,\n      src: mediaTag.src,\n      size: {\n        width: $mediaTag.width(),\n        height: $mediaTag.height()\n      }\n    });\n  },\n\n  _getMedia(){\n    var node = ReactDOM.findDOMNode(this);\n    var imgs = _.toArray(node.querySelectorAll('img'));\n    imgs = imgs.filter(function (img) {\n      // if no height or width attr and unknown actual height, then it may\n      // affect layout when loaded and needs to be observed\n      return (!img.height && img.naturalHeight === 0) ||\n        (!img.width && img.naturalWidth === 0);\n    });\n    var videos = _.toArray(node.querySelectorAll('video'));\n    return imgs.concat(videos);\n  },\n\n  _observeMediaTags: function () {\n    this._media = this._getMedia();\n    this._media_timeouts = {};\n    this._media_size_intervals = {};\n    this._media_count = this._media.length;\n    this._media.forEach(this._observeMediaTag);\n  },\n\n  _cleanupMediaTagObserver: function (mediaTag) {\n    if (mediaTag) {\n      var id = this._getIdForMediaTag(mediaTag);\n      var readyEvent = this._getReadyEvent(mediaTag);\n      mediaTag.removeEventListener(readyEvent, this._onMediaTagReady);\n      mediaTag.removeEventListener('error', this._onMediaTagFailed);\n      if (this._media_timeouts[id]) {\n        clearTimeout(this._media_timeouts[id]);\n        delete this._media_timeouts[id];\n      }\n      if (this._media_size_intervals[id]) {\n        clearInterval(this._media_size_intervals[id]);\n        delete this._media_size_intervals[id];\n      }\n      this._media = _.without(this._media, mediaTag);\n    }\n  },\n\n  _getReadyEvent: function (mediaTag) {\n    return this._isImageTag(mediaTag) ? 'load' : 'loadedmetadata';\n  },\n\n  _isImageTag(mediaTag){\n    return mediaTag.tagName.toLowerCase() !== 'video';\n  },\n\n  _cleanupMediaTagObservers: function () {\n    if (this._media) {\n      this._media.forEach(this._cleanupMediaTagObserver);\n      delete this._media;\n    }\n  },\n\n  _onMediaTagReady: function (evt) {\n    this._onMediaTagResolved(evt, true);\n  },\n\n  _onMediaTagFailed: function (evt) {\n    this._onMediaTagResolved(evt, false);\n  },\n\n  _onMediaTagResolved: function (evt, ready) {\n    var mediaTag = evt.target;\n    this._cleanupMediaTagObserver(mediaTag);\n    if (!this.props.msg.media_loaded){\n      if (!ready){\n        mediaTag.style.display = '';\n        this.setState({\n          failed: true\n        });\n      } else {\n        this._media_count--;\n        if (mediaTag.style.display !== ''){\n          this._onMediaSizeKnown(mediaTag);\n        }\n      }\n      if (!_.size(this._media)) {\n        if (!this._media_count){\n          ChatWindowActions.messageMediaLoaded({\n            jid: this.props.msg.room,\n            mid: this.props.msg.mid\n          });\n        }\n      }\n    }\n    ChatWindowActions.preserveScrollValue({animation: false});\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/mixins/scrolling_media_observer_mixin.js\n **/","import Expando from 'components/chat_window/expando';\n\nexport default React.createClass({\n  displayName: 'QuoteMessageType',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    mid: React.PropTypes.string.isRequired,\n    body: React.PropTypes.string.isRequired\n  },\n\n  render() {\n    return (\n      <Expando mid={this.props.mid}>\n        <blockquote data-copyable={`{\"format\": \"quotation\", \"mid\": \"${this.props.mid}\"}`}>{this.props.body}</blockquote>\n      </Expando>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/quote.js\n **/","/*global prettyPrintOne*/\nimport utils from 'helpers/utils';\nimport Expando from 'components/chat_window/expando';\n\nexport default React.createClass({\n  displayName: 'CodeMessageType',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    mid: React.PropTypes.string.isRequired,\n    body: React.PropTypes.string.isRequired\n  },\n\n  render() {\n    let { mid, body } = this.props,\n        linenums = utils.getNumberOfLines(body) > 1,\n        html = prettyPrintOne(`<pre class=\"prettyprint ${linenums ? 'linenums' : ''}\">${_.escape(body)}</pre>`, undefined, linenums),\n        content;\n\n    if (utils.messageShouldBeTruncated(body)) {\n      content =\n        <Expando className=\"code\" mid={mid} >\n          <div className=\"msg-line\"\n               data-mid={mid}\n               data-copyable={`{\"format\": \"code\", \"mid\": \"${mid}\"}`}>\n            <div className=\"pre-wrap\" dangerouslySetInnerHTML={{__html: html}} />\n          </div>\n        </Expando>;\n    } else {\n      content =\n        <div className=\"msg-line code\"\n             data-mid={mid}\n             data-copyable={`{\"format\": \"code\", \"mid\": \"${mid}\"}`}>\n          <div className=\"pre-wrap\" dangerouslySetInnerHTML={{__html: html}} />\n        </div>;\n    }\n\n    return content;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/code.js\n **/","import utils from 'helpers/utils';\nimport Expando from 'components/chat_window/expando';\n\nexport default React.createClass({\n  displayName: 'MonospaceMessageType',\n\n  mixins: [React.addons.PureRenderMixin],\n\n  propTypes: {\n    mid: React.PropTypes.string.isRequired,\n    body: React.PropTypes.string.isRequired\n  },\n\n  render() {\n    let { mid, body } = this.props,\n        html = `<pre class=\"prettyprint\">${_.escape(body)}</pre>`,\n        content;\n\n    if (utils.messageShouldBeTruncated(body)) {\n      content =\n        <Expando className=\"monospace\" mid={mid} >\n          <div className=\"msg-line\"\n               data-mid={mid}\n               data-copyable={`{\"format\": \"monospace\", \"mid\": \"${mid}\"}`}>\n            <div className=\"pre-wrap\" dangerouslySetInnerHTML={{__html: html}} />\n          </div>\n        </Expando>;\n    } else {\n      content =\n        <div className=\"msg-line monospace\"\n             data-mid={mid}\n             data-copyable={`{\"format\": \"monospace\", \"mid\": \"${mid}\"}`}>\n          <div className=\"pre-wrap\" dangerouslySetInnerHTML={{__html: html}} />\n        </div>;\n    }\n\n    return content;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/monospace.js\n **/","import DialogActions from \"actions/dialog_actions\";\nimport ModalDialog from \"components/common/modal_dialog/modal_dialog\";\nimport strings from 'strings/dialog_strings';\nimport ieSubmitMixin from 'components/mixins/ie_submit_mixin';\nimport DialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: \"NotEditableDialog\",\n\n  mixins: [ieSubmitMixin, DialogVisibilityMixin],\n\n  _dialogBody: function () {\n    const hourInMillis = 1000 * 60 * 60;\n    const thresholdInHours = Math.round(AppConfig.edit_message_threshold / hourInMillis);\n    return <p>{strings.not_editable_body(thresholdInHours)}</p>;\n  },\n\n  _dialogFooterButton: function () {\n    return (\n      <button form=\"not-editable-message-form\" className=\"aui-button aui-button-primary\" type=\"submit\" onClick={DialogActions.closeDialog}>{strings.OK}</button>\n    );\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"not-editable-dialog\"\n                   title={strings.not_editable(this.props.action)}\n                   dialogBody={this._dialogBody}\n                   dialogFooterButton={this._dialogFooterButton}\n                   noCloseLink={true} />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/edit_message_dialog/not_editable_dialog.js\n **/","import ModalDialog from 'components/common/modal_dialog/modal_dialog';\nimport strings from 'strings/dialog_strings';\nimport DialogVisibilityMixin from 'components/mixins/modal_dialog_visibility_mixin';\nimport WelcomeStore from 'stores/welcome_store';\nimport utils from 'helpers/utils';\nimport WelcomePeopleItem from 'components/dialogs/welcome_dialog/welcome_people_item';\nimport WelcomeRoomsItem from 'components/dialogs/welcome_dialog/welcome_rooms_item';\nimport WelcomeActions from 'actions/welcome_actions';\nimport Spinner from 'components/common/spinner/spinner';\nimport Tooltip from 'components/tooltip/tooltip';\nimport ChatInputStore from 'stores/chat_input_store';\n\nexport default React.createClass({\n\n  displayName: \"WelcomeDialog\",\n\n  mixins: [DialogVisibilityMixin],\n\n  componentDidMount: function () {\n    WelcomeStore.on(['change'], this._onStoreChange);\n    WelcomeActions.dialogRendered();\n  },\n\n  componentWillUnmount: function () {\n    WelcomeStore.off(['change'], this._onStoreChange);\n  },\n\n  componentDidUpdate: function(prevProps, prevState){\n    if (this.state.new_forced_caret_position) {\n      utils.setCaretPosition(ReactDOM.findDOMNode(this).querySelector(\".textarea\"), this.state.new_forced_caret_position);\n      WelcomeActions.resetNewForcedCaretPosition();\n    }\n  },\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _getState: function () {\n    return WelcomeStore.getAll();\n  },\n\n  _onStoreChange: function () {\n    this.setState(this._getState());\n  },\n\n  _getStarIcon: function () {\n    return <span className=\"aui-icon aui-icon-small aui-iconfont-star\"></span>;\n  },\n\n  _getInfoIcon: function () {\n    return <span className=\"aui-icon aui-icon-small aui-iconfont-info\"></span>;\n  },\n\n  _dialogTitle: function () {\n    let title = '';\n\n    switch (this.state.current_step) {\n      case 'welcome':\n        title = strings.welcome_to_hipchat;\n        break;\n      case 'people':\n        title = strings.choose_people_to_chat;\n        break;\n      case 'rooms':\n        title = strings.join_some_rooms;\n        break;\n      case 'message':\n        title = strings.introduce_yourself;\n        break;\n    }\n\n    return (\n      <div className={this.state.current_step === 'welcome' ? 'hc-welcome-dialog-title-center' : null}>\n        {title}\n      </div>\n    );\n  },\n\n  _dialogBody: function () {\n    let content = null;\n\n    switch (this.state.current_step) {\n      case 'welcome':\n        content = this._getWelcomeStep();\n        break;\n      case 'people':\n        content = this._getPeopleStep();\n        break;\n      case 'rooms':\n        content = this._getRoomsStep();\n        break;\n      case 'message':\n        content = this._getMessageStep();\n        break;\n    }\n\n    return (\n      <div className='hc-welcome-dialog-content'>\n        {content}\n      </div>\n    );\n  },\n\n  _dialogFooterButton: function () {\n    let buttons = [],\n        spinner = this._getSpinner();\n\n    switch (this.state.current_step) {\n      case 'welcome':\n        if (this._isFirstPeopleItemExist()) {\n          buttons = [\n            this._getStartButton(),\n            this._getSkipDialogButton()\n          ];\n        } else {\n          buttons = spinner;\n        }\n        break;\n      case 'people':\n        buttons = [\n          this._getNextButton(),\n          this._getSkipThisStepButton()\n        ];\n        break;\n      case 'rooms':\n        buttons = [\n          this._getNextButton(),\n          this._getSkipThisStepButton()\n        ];\n        break;\n      case 'message':\n        buttons = [\n          this._getFinishButton(),\n          this._getSkipThisStepButton()\n        ];\n        break;\n    }\n\n    return (\n      <div className=\"hc-welcome-footer-buttons\">\n        {buttons}\n      </div>\n    );\n  },\n\n  _getWelcomeStep: function () {\n    return (\n      <div>\n        <div className=\"hc-welcome-welcome-img\"></div>\n        <div className=\"hc-welcome-welcome-text\">\n          <p>{strings.we_ll_help_you}</p>\n          <p>{strings.this_won_t_take_long}</p>\n        </div>\n      </div>\n    );\n  },\n\n  _getPeopleStep: function () {\n    let peopleArr = _.toArray(this.state.people);\n\n    return (\n      <div>\n        <p>{strings.lets_put_together_a_list_of_people}</p>\n        <h6>{strings.suggestions}</h6>\n        <ReactList\n          itemRenderer={this._renderPeopleItem}\n          length={peopleArr.length}\n          selected={this.state.selected_people.length}\n          people={peopleArr}\n          threshold={0}\n          pageSize={20}\n          type='simple' />\n      </div>\n    );\n  },\n\n  _getRoomsStep: function () {\n    let roomsArr = _.toArray(this.state.rooms),\n        selectedPeopleLength = this.state.selected_people.length,\n        starPhrase = selectedPeopleLength === 1 ? strings.got_that_person_down : strings.got_those_people_down(selectedPeopleLength),\n        starTip = selectedPeopleLength ? <p>{this._getStarIcon()} {starPhrase}</p> : null;\n\n    return (\n      <div>\n        {starTip}\n        <p>{strings.weve_got_a_few_sugg_on_rooms}</p>\n        <h6>{strings.suggestions}</h6>\n        <ReactList\n          itemRenderer={this._renderRoomsItem}\n          length={roomsArr.length}\n          selected={this.state.selected_rooms.length}\n          rooms={roomsArr}\n          threshold={0}\n          pageSize={20}\n          type='simple' />\n      </div>\n    );\n  },\n\n  _getMessageStep: function () {\n    let selectedRoomsLength = this.state.selected_rooms.length,\n        starPhrase = selectedRoomsLength === 1 ? strings.that_is_a_good_roome_choice : strings.those_are_some_good_roome_choices,\n        starTip = selectedRoomsLength ? <p>{this._getStarIcon()} {starPhrase}</p> : null,\n        infoTip = <p>{this._getInfoIcon()} {strings.use_here_in_tour_message}</p>,\n        lengthError = this.state.is_welcome_message_too_long ? <p className=\"error\">{strings.welcome_message_err(this.state.max_length_of_welcome_message)}</p> : null;\n\n    return (\n      <div>\n        {starTip}\n        <p>{strings.you_are_all_set}</p>\n        {infoTip}\n        <h6>{strings.message}</h6>\n        <div className=\"hc-welcome-message\">\n          <textarea\n            rows=\"2\"\n            className=\"textarea\"\n            onChange={this._onValueChange}\n            value={this.state.welcome_message} />\n          <div className={\"hc-welcome-smiley-icon\" + (selectedRoomsLength ? \" star-toggled\" : \"\")} onClick={this._onSmileyClick}>\n            <span className=\"aui-icon hipchat-icon-small icon-emoticon\">Emoticons</span>\n            <Tooltip type=\"smiley_selector\"/>\n          </div>\n        </div>\n        {lengthError}\n      </div>\n    );\n  },\n\n  _onSmileyClick: function (evt) {\n    var className = evt.currentTarget.className;\n    if (!~className.indexOf(' selected')) {\n      evt.currentTarget.className += ' selected';\n    } else {\n      evt.currentTarget.className = className.replace(' selected', '');\n    }\n    WelcomeActions.toggleTooltip({\n      type: 'smiley_selector',\n      data: {\n        smileys: this.state.smileys\n      }\n    });\n  },\n\n  _renderPeopleItem: function (index, key){\n    let item = _.toArray(this.state.people)[index];\n    if (item.jid) {\n      return <WelcomePeopleItem\n                key={item.jid}\n                jid={item.jid}\n                name={item.name}\n                title={item.title}\n                user_id={item.id}\n                item_index={index}\n                is_selected={this.state.selected_people.indexOf(item.jid) !== -1}\n                is_first_selection={this.state.is_first_selection}\n                photo_url={item.photo_small}\n                presence_show={item.presence.show}/>;\n    }\n  },\n\n  _renderRoomsItem: function (index, key){\n    let item = _.toArray(this.state.rooms)[index];\n    if (item.jid) {\n      return <WelcomeRoomsItem\n                key={item.jid}\n                jid={item.jid}\n                name={item.name}\n                topic={item.topic}\n                privacy={item.privacy}\n                type={utils.room.detect_chat_type(item.jid)}\n                is_selected={this.state.selected_rooms.indexOf(item.jid) !== -1}\n                avatar_url={item.avatar_url}\n                all_participants = {item.participants_fetched}\n                roster={this.state.roster}\n                current_user_jid={this.state.current_user_jid}\n                max_amount_of_people_icons={this.state.max_amount_of_people_icons}/>;\n    }\n  },\n\n  _onValueChange: function (evt) {\n    let maxLength = this.state.max_length_of_welcome_message;\n\n    if (evt.target.value.length < maxLength) {\n      WelcomeActions.changeWelcomeMessage(evt.target.value);\n      if (this.state.is_welcome_message_too_long) {\n        WelcomeActions.setIsWelcomeMessageTooLong(false);\n      }\n    } else {\n      WelcomeActions.changeWelcomeMessage(evt.target.value.slice(0, maxLength));\n      WelcomeActions.setIsWelcomeMessageTooLong(true);\n    }\n  },\n\n  _getStartButton: function () {\n    return (\n      <button key=\"start_button\" className=\"aui-button aui-button-primary\" onClick={this._nextStep}>{strings.start_button}</button>\n    );\n  },\n\n  _getSkipDialogButton: function () {\n    return (\n      <button key=\"skip_button\" className=\"aui-button aui-button-link\" onClick={this._skipDialog}>{strings.skip_dialog_button}</button>\n    );\n  },\n\n  _getNextButton: function () {\n    let nothingIsSelected = null;\n\n    switch (this.state.current_step) {\n      case 'people':\n        nothingIsSelected = (this.state.selected_people.length === 0);\n        break;\n      case 'rooms':\n        nothingIsSelected = (this.state.selected_rooms.length === 0);\n        break;\n    }\n\n    return (\n      <button key=\"next_button\" className=\"aui-button aui-button-primary\" disabled={nothingIsSelected} onClick={this._nextStep}>{strings.next_button}</button>\n    );\n  },\n\n  _getSkipThisStepButton: function () {\n    return (\n      <button key=\"skip_button\" className=\"aui-button aui-button-link\" onClick={this._skipThisStep}>{strings.skip_this_step_button}</button>\n    );\n  },\n\n  _getFinishButton: function () {\n    let nothingIsSelected = ((this.state.selected_people.length + this.state.selected_rooms.length) === 0),\n        welcomeMessageIsEmpty = (this.state.welcome_message.trim() === '');\n\n    return (\n      <button key=\"finish_button\" className=\"aui-button aui-button-primary\" disabled={nothingIsSelected || welcomeMessageIsEmpty} onClick={this._createChats}>{strings.finish_and_send_button}</button>\n    );\n  },\n\n  _getSpinner: function () {\n    return (\n      <Spinner spin={true} size={\"small\"} spinner_class=\"hc-loading-spinner\"/>\n    );\n  },\n\n  _skipDialog: function () {\n    WelcomeActions.skipDialog();\n  },\n\n  _nextStep: function () {\n    let currentStepIndex = this.state.steps.indexOf(this.state.current_step),\n        nextStepIndex = currentStepIndex + 1;\n\n    WelcomeActions.nextStep(this.state.steps[nextStepIndex]);\n  },\n\n  _skipThisStep: function () {\n    let currentStep = this.state.current_step,\n        currentStepIndex = this.state.steps.indexOf(currentStep),\n        nextStepIndex = currentStepIndex + 1;\n\n    switch (currentStep) {\n      case 'people':\n        WelcomeActions.clearPeopleSelection();\n        WelcomeActions.skipThisStep(this.state.steps[nextStepIndex]);\n        break;\n      case 'rooms':\n        WelcomeActions.clearRoomsSelection();\n        WelcomeActions.skipThisStep(this.state.steps[nextStepIndex]);\n        break;\n      case 'message':\n        this._createChats(false);\n        break;\n    }\n  },\n\n  _createChats: function (sendMessage = true) {\n    let welcomeMessage = utils.strings.stripHiddenCharacters(this.state.welcome_message.trim());\n\n    this.state.selected_people.forEach((jid) => {\n      WelcomeActions.createChats({\n        jid: this.state.people[jid].jid,\n        name: this.state.people[jid].name,\n        type: this.state.people[jid].type\n      });\n      if (sendMessage) {\n        WelcomeActions.sendMessage({\n          text: welcomeMessage,\n          jid: this.state.people[jid].jid,\n          id: ChatInputStore.get('message_id'),\n          active_chat_id: this.state.people[jid].id,\n          chat_type: this.state.people[jid].type\n        });\n      }\n    });\n\n    this.state.selected_rooms.forEach((jid) => {\n      WelcomeActions.createChats({\n        jid: this.state.rooms[jid].jid,\n        name: this.state.rooms[jid].name,\n        type: this.state.rooms[jid].type\n      });\n      if (sendMessage) {\n        WelcomeActions.sendMessage({\n          text: welcomeMessage,\n          jid: this.state.rooms[jid].jid,\n          id: ChatInputStore.get('message_id'),\n          active_chat_id: this.state.rooms[jid].id,\n          chat_type: this.state.rooms[jid].type\n        });\n      }\n    });\n\n    WelcomeActions.closeDialog();\n  },\n\n  _isFirstPeopleItemExist: function() {\n    let peopleArr = _.toArray(this.state.people);\n\n    return peopleArr[0] && peopleArr[0].jid ? true : false;\n  },\n\n  render: function () {\n    return (\n      <ModalDialog dialogId=\"welcome-dialog\"\n                   title={this._dialogTitle()}\n                   dialogBody={this._dialogBody}\n                   dialogFooterButton={this._dialogFooterButton}\n                   noCloseLink />\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/welcome_dialog/welcome_dialog.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport Store from 'lib/core/store';\nimport AppConfig from 'config/app_config';\nimport strings from 'strings/dialog_strings';\nimport DAL from 'core/dal';\nimport AppStore from 'stores/application_store';\n\nclass WelcomeStore extends Store {\n\n  constructor() {\n    super();\n    this.local = {\n      welcome_init: false\n    };\n  }\n\n  getDefaults() {\n    return {\n      steps: [\n        'welcome',\n        'people',\n        'rooms',\n        'message'\n      ],\n      current_step: 'welcome',\n      people: {},\n      rooms: {},\n      selected_people: [],\n      selected_rooms: [],\n      welcome_message: strings.welcome_messages(),\n      is_first_selection: true,\n      current_user_jid: '',\n      max_length_of_welcome_message: AppConfig.welcome_dialog.max_length_of_welcome_message,\n      max_amount_of_people_icons: AppConfig.welcome_dialog.max_amount_of_people_icons,\n      is_welcome_message_too_long: false,\n      roster: {},\n      smileys: {},\n      new_forced_caret_position: 0\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'hc-init': (data) => {\n        this.set({\n          current_user_jid: data.jid\n        });\n      },\n      'welcome-init': () => {\n        this.local.welcome_init = true;\n        this._handleRoster();\n        this._handleAllRooms();\n      }\n    });\n\n    AppDispatcher.register({\n      'updated:roster': (roster) => {\n        if (this.local.welcome_init) {\n          this._handleRoster(roster);\n        }\n      },\n      'updated:allRooms': (allRooms) => {\n        if (this.local.welcome_init) {\n          this._handleAllRooms(allRooms);\n        }\n      },\n      'updated:smileys': (data) => {\n        let smileys = _.keyBy(_.keyBy(data, 'file'), 'shortcut');\n        this.set({ smileys });\n      },\n      'welcome-select-people': (jid) => {\n        this._selectPeople(jid);\n      },\n      'welcome-unselect-people': (jid) => {\n        this._unselectPeople(jid);\n      },\n      'welcome-select-rooms': (jid) => {\n        this._selectRooms(jid);\n      },\n      'welcome-unselect-rooms': (jid) => {\n        this._unselectRooms(jid);\n      },\n      'welcome-change-message': (welcome_message) => {\n        this._changeWelcomeMessage(welcome_message);\n      },\n      'smiley-chosen': (data) => {\n        this.handleSmileyChosen(data);\n      },\n      'reset-new-forced-caret-position': () => {\n        this.set('new_forced_caret_position', 0);\n      },\n      'welcome-is-message-too-long': (data) => {\n        this.set('is_welcome_message_too_long', data);\n      },\n      'welcome-change-current-step': (data) => {\n        this.set('current_step', data);\n      },\n      'welcome-clear-people-selection': () => {\n        this.set('selected_people', []);\n      },\n      'welcome-clear-rooms-selection': () => {\n        this.set('selected_rooms', []);\n      }\n    });\n  }\n\n  _handleRoster(roster = {}) {\n    let people = this.data.people,\n        currentUserJid = this.data.current_user_jid,\n        maxDisplayedPeople = AppConfig.welcome_dialog.max_displayed_people;\n\n    if (_.isEmpty(roster)){\n      roster = AppStore.get('roster');\n    }\n\n    if (_.size(people) < maxDisplayedPeople && currentUserJid !== '') {\n\n      _.each(roster, (value, key) => {\n        if (_.size(people) < maxDisplayedPeople && currentUserJid !== key && !people[key]) {\n          people[key] = {};\n\n          AppDispatcher.dispatch('request-profile', key, (response) => {\n            people[key] = response.query;\n            people[key].jid = roster[key].jid;\n            people[key].id = roster[key].id;\n            people[key].presence = roster[key].presence;\n            this.set({\n              people: people\n            });\n          });\n        }\n      });\n    }\n    this.set({\n      roster: roster\n    });\n  }\n\n  _handleAllRooms(allRooms = {}) {\n    let rooms = this.data.rooms,\n        maxDisplayedRooms = AppConfig.welcome_dialog.max_displayed_rooms;\n\n    if (_.isEmpty(allRooms)){\n      allRooms = AppStore.get('allRooms');\n    }\n\n    if (_.size(rooms) < maxDisplayedRooms) {\n\n      _.each(allRooms, (value, key) => {\n        if (_.size(rooms) < maxDisplayedRooms && allRooms[key].privacy === 'public' && !rooms[key]) {\n          rooms[key] = {};\n\n          AppDispatcher.dispatch('fetch-room', key, (nul, room) => {\n            if (room) {\n              rooms[key].jid = room.jid;\n              rooms[key].name = room.name;\n              rooms[key].topic = room.topic;\n              rooms[key].privacy = room.privacy;\n              rooms[key].avatar_url = room.avatar_url;\n              this.set({\n                rooms: rooms\n              });\n            }\n          });\n\n          DAL.fetchParticipants(allRooms[key].id)\n            .then((response) => {\n              rooms[key].participants_fetched = [];\n              _.each(response.participants, (value1, key1) => {\n                rooms[key].participants_fetched.push(value1.xmpp_jid);\n              });\n              this.set({\n                rooms: rooms\n              });\n            });\n        }\n      });\n    }\n  }\n\n  handleSmileyChosen(data) {\n    var welcome_message = this.data.welcome_message + data.shortcut + ' ';\n    this.set({\n      welcome_message: welcome_message,\n      new_forced_caret_position: welcome_message.length\n    });\n  }\n\n  _selectPeople(jid) {\n    let selectedPeople = this.get('selected_people');\n\n    if (selectedPeople.indexOf(jid) === -1) {\n      selectedPeople.push(jid);\n      this.set({\n        selected_people: selectedPeople\n      });\n    }\n\n    if (this.data.is_first_selection === true) {\n      this.set({\n        is_first_selection: false\n      });\n    }\n  }\n\n  _unselectPeople(jid) {\n    let selectedPeople = this.get('selected_people');\n\n    if (selectedPeople.indexOf(jid) !== -1) {\n      this.set({\n        selected_people: selectedPeople.filter((value) => value !== jid)\n      });\n    }\n  }\n\n  _selectRooms(jid) {\n    let selectedRooms = this.get('selected_rooms');\n\n    if (selectedRooms.indexOf(jid) === -1) {\n      selectedRooms.push(jid);\n      this.set({\n        selected_rooms: selectedRooms\n      });\n    }\n  }\n\n  _unselectRooms(jid) {\n    let selectedRooms = this.get('selected_rooms');\n\n    if (selectedRooms.indexOf(jid) !== -1) {\n      this.set({\n        selected_rooms: selectedRooms.filter((value) => value !== jid)\n      });\n    }\n  }\n\n  _changeWelcomeMessage(message) {\n    this.set({\n      welcome_message: message\n    });\n  }\n}\n\nexport default new WelcomeStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/welcome_store.js\n **/","import PersonAvatar from 'components/common/avatars/person_avatar';\nimport WelcomeActions from 'actions/welcome_actions';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'WelcomePeopleItem',\n\n  mixins: [PureRenderMixin],\n\n  componentDidMount: function () {\n    if (this.props.item_index === 0 && this.props.is_first_selection) {\n      this.selectItem(this.props.jid);\n    }\n  },\n\n  getDefaultProps: function() {\n    return {\n      key: '',\n      jid: '',\n      name: '',\n      title: '',\n      user_id: null,\n      item_index: 0,\n      is_selected: false,\n      photo_url: '',\n      presence_show: ''\n    };\n  },\n\n  propTypes: {\n    key: React.PropTypes.string.isRequired,\n    jid: React.PropTypes.string.isRequired,\n    name: React.PropTypes.string.isRequired,\n    title: React.PropTypes.string,\n    user_id: React.PropTypes.oneOfType([\n      React.PropTypes.number,\n      React.PropTypes.string\n    ]).isRequired,\n    item_index: React.PropTypes.number.isRequired,\n    is_selected: React.PropTypes.bool.isRequired,\n    photo_url: React.PropTypes.string.isRequired,\n    presence_show: React.PropTypes.string.isRequired\n  },\n\n  _onClick: function () {\n    let jid = this.props.jid;\n\n    if (this.props.is_selected) {\n      this.unselectItem(jid);\n    } else {\n      this.selectItem(jid);\n    }\n  },\n\n  selectItem: function (jid) {\n    WelcomeActions.selectPeopleItem(jid);\n  },\n\n  unselectItem: function (jid) {\n    WelcomeActions.unselectPeopleItem(jid);\n  },\n\n  _getIcon: function () {\n    return <PersonAvatar\n              avatar_url={this.props.photo_url}\n              presence={this.props.presence_show}\n              size='medium'\n              uid={this.props.user_id}\n              active={true} />;\n  },\n\n  render: function() {\n\n    let classes = cx({\n          'hc-welcome-person-item': true,\n          'selected': this.props.is_selected\n        }),\n        icon = this._getIcon(),\n        name = this.props.name,\n        job_title = this.props.title;\n\n    return (\n      <div className={classes} onClick={this._onClick} >\n        <div className='hc-welcome-person-icon'>\n          {icon}\n        </div>\n        <div className='hc-welcome-person-info hc-welcome-person-info-ellipsis'>\n          <span className='hc-welcome-person-name'>\n            {name}\n          </span>\n          <br/>\n          <span className='hc-welcome-person-job-title'>\n            {job_title}\n          </span>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/welcome_dialog/welcome_people_item.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport WelcomeStore from 'stores/welcome_store';\n\nexport default {\n\n  dialogRendered: function() {\n    AppDispatcher.dispatch('welcome-init');\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.welcome.dialog.render'\n    });\n  },\n\n  selectPeopleItem: function(jid) {\n    AppDispatcher.dispatch('welcome-select-people', jid);\n  },\n\n  unselectPeopleItem: function(jid) {\n    AppDispatcher.dispatch('welcome-unselect-people', jid);\n  },\n\n  selectRoomsItem: function(jid) {\n    AppDispatcher.dispatch('welcome-select-rooms', jid);\n  },\n\n  unselectRoomsItem: function(jid) {\n    AppDispatcher.dispatch('welcome-unselect-rooms', jid);\n  },\n\n  changeWelcomeMessage: function(welcome_message) {\n    AppDispatcher.dispatch('welcome-change-message', welcome_message);\n  },\n\n  createChats: function(data) {\n    let welcomeMessage = WelcomeStore.get('welcome_message');\n\n    data.source = \"welcome_dialog\";\n    AnalyticsDispatcher.dispatch('analytics-open-room', data);\n\n    switch (true) {\n      case (welcomeMessage === ''):\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.message.skip',\n          properties: {\n            step: 'message',\n            message: welcomeMessage\n          }\n        });\n        break;\n      case (welcomeMessage !== ''):\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.message.finish',\n          properties: {\n            step: 'message',\n            message: welcomeMessage\n          }\n        });\n        break;\n    }\n\n    AppDispatcher.dispatch('set-multiple-routes', data);\n  },\n\n  closeDialog: function() {\n    AppDispatcher.dispatch('hide-modal-dialog');\n  },\n\n  skipDialog: function() {\n    AppDispatcher.dispatch('hide-modal-dialog');\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: 'hipchat.client.welcome.dialog.welcome.skip',\n      properties: {\n        step: 'welcome'\n      }\n    });\n  },\n\n  resetNewForcedCaretPosition: function() {\n    AppDispatcher.dispatch('reset-new-forced-caret-position');\n  },\n\n  toggleTooltip(data) {\n    AppDispatcher.dispatch('toggle-tooltip', data);\n  },\n\n  setIsWelcomeMessageTooLong(data) {\n    AppDispatcher.dispatch('welcome-is-message-too-long', data);\n  },\n\n  nextStep(data) {\n    let currentStep = WelcomeStore.get('current_step');\n\n    switch (currentStep) {\n      case 'welcome':\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.welcome.start',\n          properties: {\n            step: currentStep\n          }\n        });\n        break;\n      case 'people':\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.people.next',\n          properties: {\n            step: currentStep,\n            selected: WelcomeStore.get('selected_people').length\n          }\n        });\n        break;\n      case 'rooms':\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.rooms.next',\n          properties: {\n            step: currentStep,\n            selected: WelcomeStore.get('selected_rooms').length\n          }\n        });\n        break;\n    }\n\n    AppDispatcher.dispatch('welcome-change-current-step', data);\n  },\n\n  skipThisStep(data) {\n    let currentStep = WelcomeStore.get('current_step');\n\n    switch (currentStep) {\n      case 'people':\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.people.skip',\n          properties: {\n            step: currentStep\n          }\n        });\n        break;\n      case 'rooms':\n        AnalyticsDispatcher.dispatch(\"analytics-event\", {\n          name: 'hipchat.client.welcome.dialog.rooms.skip',\n          properties: {\n            step: currentStep,\n          }\n        });\n        break;\n    }\n\n    AppDispatcher.dispatch('welcome-change-current-step', data);\n  },\n\n  sendMessage(data) {\n    AppDispatcher.dispatch('send-message', data);\n    AnalyticsDispatcher.dispatch('analytics-send-message', data);\n  },\n\n  clearPeopleSelection() {\n    AppDispatcher.dispatch('welcome-clear-people-selection');\n  },\n\n  clearRoomsSelection() {\n    AppDispatcher.dispatch('welcome-clear-rooms-selection');\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/welcome_actions.js\n **/","import PersonAvatar from 'components/common/avatars/person_avatar';\nimport WelcomeActions from 'actions/welcome_actions';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'WelcomeRoomsItem',\n\n  mixins: [PureRenderMixin],\n\n  getDefaultProps: function() {\n    return {\n      key: '',\n      jid: '',\n      name: '',\n      topic: '',\n      privacy: '',\n      type: '',\n      is_selected: false,\n      avatar_url: '',\n      all_participants: [],\n      roster: {},\n      current_user_jid: '',\n      presence_show: '',\n      max_amount_of_people_icons: null\n    };\n  },\n\n  propTypes: {\n    key: React.PropTypes.string.isRequired,\n    jid: React.PropTypes.string.isRequired,\n    name: React.PropTypes.string.isRequired,\n    topic: React.PropTypes.string,\n    privacy: React.PropTypes.string.isRequired,\n    type: React.PropTypes.string.isRequired,\n    is_selected: React.PropTypes.bool.isRequired,\n    avatar_url: React.PropTypes.string.isRequired,\n    all_participants: React.PropTypes.array.isRequired,\n    roster: React.PropTypes.object.isRequired,\n    current_user_jid: React.PropTypes.string.isRequired,\n    presence_show: React.PropTypes.string.isRequired,\n    max_amount_of_people_icons: React.PropTypes.number.isRequired,\n  },\n\n  _onClick: function () {\n    let jid = this.props.jid;\n\n    if (this.props.is_selected) {\n      this.unselectItem(jid);\n    } else {\n      this.selectItem(jid);\n    }\n  },\n\n  selectItem: function (jid) {\n    WelcomeActions.selectRoomsItem(jid);\n  },\n\n  unselectItem: function (jid) {\n    WelcomeActions.unselectRoomsItem(jid);\n  },\n\n  _getIcon: function () {\n    let icon;\n\n    if (this.props.type === 'groupchat' && this.props.avatar_url === '') {\n      icon = <span className={'aui-icon hipchat-icon-small icon-' + this.props.privacy}></span>;\n    } else {\n      icon = <PersonAvatar\n                avatar_url={this.props.avatar_url}\n                show_presence={false}\n                size='medium' />;\n    }\n\n    return icon;\n  },\n\n  _getParticipantsIcon: function () {\n    let icons = [],\n        participants = this.props.all_participants;\n\n    if (participants.indexOf(this.props.current_user_jid) > -1) {\n      participants.splice(participants.indexOf(this.props.current_user_jid), 1);\n    }\n\n    participants.forEach((participantJid) => {\n      if (icons.length < this.props.max_amount_of_people_icons && participantJid in this.props.roster) {\n\n        icons.push(<PersonAvatar\n                      key={this.props.roster[participantJid].jid}\n                      avatar_url={this.props.roster[participantJid].photo_url}\n                      show_presence={false}\n                      size='small' />);\n      }\n    });\n\n    return icons;\n  },\n\n  render: function() {\n\n    let classes = cx({\n          'hc-welcome-room-item': true,\n          'selected': this.props.is_selected\n        }),\n        name = this.props.name,\n        icon = this._getIcon(),\n        participants_icons = this.props.all_participants ? this._getParticipantsIcon() : [],\n        topic = this.props.topic;\n\n    return (\n      <div className={classes} onClick={this._onClick} >\n        <div className='hc-welcome-room-icon'>\n          {icon}\n        </div>\n        <div className='hc-welcome-room-info hc-welcome-room-info-ellipsis'>\n          <span className='hc-welcome-room-name'>\n            {name}\n          </span>\n          <br/>\n          <span className='hc-welcome-room-topic'>\n            {topic}\n          </span>\n        </div>\n        <div className='hc-welcome-room-participants'>\n          {participants_icons}\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/dialogs/welcome_dialog/welcome_rooms_item.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport SmileySelector from './tooltip_types/smiley_selector';\nimport UploadPreview from './tooltip_types/upload_preview';\n\nexport default React.createClass({\n\n  displayName: 'Tooltip',\n\n  propTypes: {\n    type: React.PropTypes.oneOf(['upload_preview', 'smiley_selector']).isRequired\n  },\n\n  componentDidMount() {\n    AppDispatcher.register({\n      'toggle-tooltip': this._onToggle,\n      'close-tooltip': this._onClose,\n      'open-tooltip': this._onOpen\n    });\n    this.toggle = _.bind((e) => {\n      if (!ReactDOM.findDOMNode(this).parentNode.contains(e.target)){\n        this._onToggle({type: this.props.type});\n      }\n    });\n    this.outside_click_dismiss = this.props.type === 'smiley_selector';\n  },\n\n  componentWillUnmount() {\n    var elem = ReactDOM.findDOMNode(this);\n    document.removeEventListener('click', this.toggle);\n    AppDispatcher.unregister({\n      'toggle-tooltip': this._onToggle,\n      'close-tooltip': this._onClose,\n      'open-tooltip': this._onOpen\n    });\n    [].map.call(elem.querySelectorAll('.file-preview'), (element) => {\n      return element;\n    }).forEach((preview) => {\n      preview.removeEventListener('load', this._positionTooltip);\n    });\n  },\n\n  componentDidUpdate() {\n    if (this.state.is_visible) {\n      this._positionTooltip();\n    }\n  },\n\n  getInitialState() {\n    return {\n      is_visible: false\n    };\n  },\n\n  _getToolTip(type) {\n    var tooltip_types = {\n      smiley_selector: SmileySelector,\n      upload_preview: UploadPreview\n    };\n\n    return tooltip_types[type];\n  },\n\n  render() {\n\n    var ToolTip = this._getToolTip(this.props.type);\n\n    return (\n      <div className={'hc-tooltip ' + (this.state.is_visible ? '' : 'hidden')} >\n        <div className=\"hc-tooltip-content\" >\n          <ToolTip data={this.state.data} />\n        </div>\n        <div className=\"aui-inline-dialog-arrow arrow aui-css-arrow\"></div>\n      </div>\n    );\n  },\n\n  _onClose(args) {\n    if (!this.isMounted()) {\n      return;\n    }\n    if (args.type === this.props.type) {\n      if (this.outside_click_dismiss) {\n        document.removeEventListener('click', this.toggle);\n      }\n      this.setState({\n        is_visible: false\n      });\n    }\n    this._resetArrow();\n  },\n\n  _onOpen(args) {\n    if (args.type === this.props.type) {\n      if (this.outside_click_dismiss) {\n        document.addEventListener('click', this.toggle);\n      }\n      this.setState({\n        is_visible: true,\n        data: args.data\n      });\n    }\n  },\n\n  _onToggle(args) {\n    if (this.state.is_visible) {\n      this._onClose(args);\n    } else {\n      this._onOpen(args);\n    }\n  },\n\n  _resetArrow() {\n    ReactDOM.findDOMNode(this).querySelector('.arrow').classList.remove('right');\n  },\n\n  _positionTooltip() {\n    var elem = ReactDOM.findDOMNode(this),\n        parent = elem.parentElement,\n        bottom = parent.offsetHeight + 8,\n        left = Math.floor(-elem.offsetWidth / 2 + parent.offsetWidth / 2);\n    elem.style.bottom = bottom + 'px';\n    elem.style.left = left + 'px';\n\n    if (elem.getBoundingClientRect().right > window.innerWidth) {\n      // Tooltip extends beyond right side of window\n      elem.style.left = (elem.offsetLeft - 8) - (elem.getBoundingClientRect().right - window.innerWidth) + 'px';\n      elem.querySelector('.arrow').classList.add('right');\n    }\n\n    [].map.call(elem.querySelectorAll('.file-preview'), (element) => {\n      return element;\n    }).forEach((preview) => {\n      preview.addEventListener('load', this._positionTooltip);\n    });\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/tooltip/tooltip.js\n **/","var TooltipActions = require('actions/tooltip_actions'),\n    TooltipStrings = require('strings/tooltip_strings'),\n    emoticons = require('helpers/emoticons');\n\nmodule.exports = React.createClass({\n\n  displayName: \"TooltipTypeSmileySelector\",\n\n  getDefaultProps: function() {\n    return {\n      data: {\n        smileys: {},\n        user_is_admin: false\n      }\n    };\n  },\n\n  render: function () {\n    var custom_link;\n    if (this.props.data.user_is_admin) {\n      custom_link = <div className=\"smiley-custom-link\"><a target=\"_blank\" href={`https://${this.props.data.web_server}/admin/emoticons`} onClick={this._onCustomClick}>{TooltipStrings.custom_emoticon_link}</a></div>;\n    }\n\n    return (\n      <div className=\"smileys-selection\">\n        {_.map(this.props.data.smileys, (smiley) => {\n          return <span key={smiley.shortcut} onClick={this._onSmileyClick} data-shortcut={smiley.shortcut} dangerouslySetInnerHTML={{__html: emoticons.render(smiley.shortcut === '>:-(' ? _.escape(smiley.shortcut) : smiley.shortcut)}} />;\n        })}\n        <div className=\"clear\"></div>\n        <div className={this.props.data.user_is_admin ? \"more-emoticons-link-admin\" : \"more-emoticons-link\"}>\n          <a target=\"_blank\" href={`https://${this.props.data.web_server}/emoticons`} onClick={this._onMoreClick}>{TooltipStrings.emoticon_more_link}</a>\n        </div>\n        {custom_link}\n      </div>\n    );\n  },\n\n  _onSmileyClick: function (e) {\n    TooltipActions.smileyChosen({shortcut: e.currentTarget.getAttribute('data-shortcut')});\n  },\n\n  _onMoreClick: function () {\n    TooltipActions.moreEmoticonsChosen();\n  },\n\n  _onCustomClick: function () {\n    TooltipActions.customEmoticonsChosen();\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/tooltip/tooltip_types/smiley_selector.js\n **/","export default {\n  emoticon_more_link: `More…`,\n  custom_emoticon_link: `Custom`,\n  admin: `Room Admin`,\n  status: `Status:`,\n  message: `Message:`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/tooltip_strings.js\n **/","module.exports = React.createClass({\n\n  displayName: \"TooltipTypeUploadPreview\",\n\n  getDefaultProps: function() {\n    return {\n      data: {\n        file: {\n          src: '',\n          file_type: ''\n        }\n      }\n    };\n  },\n\n  render: function () {\n    var previewMarkup = {\n      image: <img className=\"file-preview\" src={this.props.data.file.src_processed} />,\n      text: <iframe className=\"file-preview\" src={this.props.data.file.src} />,\n      video: <video className=\"file-preview\" src={this.props.data.file.src} autoPlay muted/>,\n      audio: <audio className=\"file-preview\" src={this.props.data.file.src} controls/>\n    };\n\n    return previewMarkup[this.props.data.file.file_type] || <div></div>;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/tooltip/tooltip_types/upload_preview.js\n **/","var ModalDialogVisibilityMixin = require(\"components/mixins/modal_dialog_visibility_mixin\");\nvar DialogActions = require(\"actions/dialog_actions\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"ModalDialogBackdrop\",\n\n  mixins: [ModalDialogVisibilityMixin],\n\n  componentDidMount: function() {\n    document.querySelector(\"body\").addEventListener('keydown', this._onKeydown);\n  },\n\n  componentWillUnmount: function() {\n    document.querySelector(\"body\").removeEventListener('keydown', this._onKeydown);\n  },\n\n  getDefaultProps: function() {\n    return {\n      btnLoading: false,\n      bgDismiss: true\n    };\n  },\n\n  _onKeydown: function (e) {\n    var intKey = (window.Event) ? e.which : e.keyCode;\n    if (intKey === 27 && !this.props.btnLoading) {\n      this.close();\n    }\n  },\n\n  _onClick: function () {\n    if (!this.props.btnLoading && this.props.bgDismiss) {\n      this.close();\n    }\n  },\n\n  close: function() {\n    DialogActions.closeDialog();\n  },\n\n  render: function() {\n    return (\n      <div className=\"aui-blanket\"\n            aria-hidden={!this.state.dialogVisible}\n            tabIndex=\"0\"\n            onClick={this._onClick}>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/modal_dialog/modal_backdrop.js\n **/","import InlineDialogStore from \"stores/inline_dialog_store\";\nimport UserStatusMessageForm from \"components/app_header/user_status_message_form\";\nimport ConnectionStatusMessage from 'components/app_header/connection_status_message';\nimport GuestAccessInformation from 'components/chat_header/guest_access_information';\nimport AddIntegrationsDiscover from 'components/tooltip/tooltip_types/add_integrations_discover';\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"InlineDialogContainer\",\n\n  componentDidMount: function() {\n    InlineDialogStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    InlineDialogStore.off('change', this._onChange);\n  },\n\n  getInitialState: function() {\n    return InlineDialogStore.getAll();\n  },\n\n  _onChange: function() {\n    this.setState(InlineDialogStore.getAll());\n  },\n\n  _getDialog: function() {\n    var currentDialogId = this.state.activeDialog;\n    var currentDialog = false;\n\n    if (currentDialogId) {\n      switch (currentDialogId) {\n\n        case \"user-status-message-inline-dialog\":\n          currentDialog = <UserStatusMessageForm {...this.state.dialogData} />;\n          break;\n\n        case \"connection-status-message-inline-dialog\":\n          currentDialog = <ConnectionStatusMessage {...this.state.dialogData} />;\n          break;\n\n        case \"guest-access-information-inline-dialog\":\n          currentDialog = <GuestAccessInformation {...this.state.dialogData} />;\n          break;\n\n        case \"add-integrations-help-dialog\":\n          currentDialog = <AddIntegrationsDiscover {...this.state.dialogData} />;\n          break;\n      }\n    }\n\n    return currentDialog;\n  },\n\n  _isDialogInvisible: function(dialogId) {\n    return this.state.activeDialog !== dialogId;\n  },\n\n  render: function() {\n\n    var classes = cx({\n      'banner-shown': this.state.bannerShown\n    });\n\n    var dialog = this._getDialog();\n\n    return (\n      <div className={classes}>\n        {dialog}\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/inline_dialog/inline_dialog_container.js\n **/","import InlineDialog from 'components/common/inline_dialog/inline_dialog';\nimport PresenceIcon from 'components/common/icon/presence-icon';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: 'UserStatusMessageForm',\n\n  getInitialState: function() {\n    return {\n      text: this.props.status,\n      is_status_updated: false\n    };\n  },\n\n  getDefaultProps: function() {\n    return {\n      visible: false\n    };\n  },\n\n  componentDidMount: function() {\n    AppDispatcher.register('position-app-header-dialogs', this._positionDialog);\n    this._positionDialog();\n    this._focusAndSelect();\n  },\n\n  componentDidUpdate: function () {\n    this._positionDialog();\n  },\n\n  componentWillUnmount: function () {\n    AppDispatcher.unregister('position-app-header-dialogs', this._positionDialog);\n\n    if (!this.state.is_status_updated) {\n      CurrentUserActions.changeStatus({\n        show: this.props.show,\n        status: '',\n        type: 'status'\n      });\n    }\n  },\n\n  _positionDialog: function () {\n    var anchor = this.props.anchor,\n      node = ReactDOM.findDOMNode(this),\n      top;\n\n    if (anchor) {\n      _.delay(function() {\n        top = anchor.getBoundingClientRect().bottom + 5;\n        $(node).css({\n          top: top + \"px\",\n          display: 'block'\n        });\n      }, AppConfig.notification_banner_slide);\n    }\n  },\n\n  _focusAndSelect: function() {\n    var input = this.refs.input;\n\n    // Using `_.delay` here as this component is set to 'display:none' initially,\n    // so wait until after it is revealed in `_positionDialog`.\n    _.delay(() => {\n      input.focus();\n      input.select();\n    }, AppConfig.notification_banner_slide);\n  },\n\n  _onSubmit: function(e) {\n    e.preventDefault();\n    this.setState({is_status_updated: true}, () => {\n      CurrentUserActions.changeStatus({\n        show: this.props.show,\n        status: this.state.text,\n        type: 'status'\n      });\n      InlineDialogActions.hideInlineDialog();\n    });\n  },\n\n  render: function() {\n    return (\n      <InlineDialog dialogId=\"userStatusMessage\">\n        <form id=\"userStatusForm\" className=\"aui aui-group\" onSubmit={this._onSubmit}>\n          <div className=\"aui-item status-icon\">\n            <PresenceIcon presence={this.props.show} uid={this.props.current_user_id}/>\n          </div>\n          <div className=\"aui-item status-message\">\n            <input\n              type=\"text\"\n              className=\"text\"\n              placeholder=\"Set your status\"\n              maxLength={AppConfig.max_presence_text_length}\n              name=\"status-message\"\n              value={this.state.text}\n              ref=\"input\"\n              onChange={this._onChange}/>\n          </div>\n          <div className=\"aui-item\">\n            <button className=\"aui-button aui-button-small\" type=\"submit\">OK</button>\n          </div>\n        </form>\n      </InlineDialog>\n    );\n  },\n\n  _onChange: function(e) {\n    this.setState({text: e.target.value});\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/user_status_message_form.js\n **/","var cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"InlineDialog\",\n\n  propTypes: {\n    onShow: React.PropTypes.func\n  },\n\n  componentDidMount: function() {\n    if (!this.props.invisible) {\n      this.props.onShow();\n    }\n  },\n\n  componentDidUpdate: function(prevProps) {\n    if (prevProps.invisible === this.props.invisible) {\n      return;\n    }\n\n    if (this.props.invisible) {\n      this.props.onHide();\n    } else {\n      this.props.onShow();\n    }\n  },\n\n  componentWillUnmount: function() {\n    if (!this.props.invisible) {\n      this.props.onHide();\n    }\n  },\n\n  getDefaultProps: function() {\n    return {\n      invisible: false,\n      dialogId: \"dialog\",\n      dialog_callout: false,\n      onShow: _.noop,\n      onHide: _.noop,\n      onMouseOver: _.noop,\n      arrowLocation: \"top\"\n    };\n  },\n\n  render: function() {\n    var classes = cx({\n      \"aui-inline-dialog\": true,\n      \"dialog-callout\": this.props.dialog_callout\n    });\n\n    var arrowClasses = cx(\"aui-inline-dialog-arrow arrow aui-css-arrow\", {\n      \"aui-bottom-arrow\": this.props.arrowLocation === 'bottom'\n    });\n\n    var dialogClasses = cx(\"aui-inline-dialog-contents\", {\n      \"hc-tooltip-helper\": this.props.tooltip_helper\n    });\n\n    return (\n      <div className={classes} aria-hidden={this.props.invisible ? \"true\" : \"false\"} id={this.props.dialogId} onMouseOver={this.props.onMouseOver}>\n        <div className={dialogClasses}>\n          {this.props.children}\n          <div className={arrowClasses}></div>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/inline_dialog/inline_dialog.js\n **/","import AppConfig from 'config/app_config';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport InlineDialog from 'components/common/inline_dialog/inline_dialog';\nimport strings from 'strings/connection_notification_strings';\nimport ConnectionStatusStore from 'stores/connection_status_store';\nimport ConfigStore from 'stores/configuration_store';\nimport ConnectionStates from 'lib/enum/connection';\nimport NetworkStates from 'lib/enum/network';\n\nexport default React.createClass({\n\n  displayName: 'ConnectionStatusMessage',\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  componentDidMount() {\n    ConfigStore.on([\"change:feature_flags\"], this._onChange);\n    ConnectionStatusStore.on([\"change:connection_status\",\"change:reconnectingIn\"], this._onChange);\n    AppDispatcher.register('position-app-header-dialogs', this._positionDialog);\n    this._positionDialog();\n  },\n\n  componentWillUnmount() {\n    ConfigStore.off([\"change:feature_flags\"], this._onChange);\n    ConnectionStatusStore.off([\"change:connection_status\",\"change:reconnectingIn\"], this._onChange);\n    AppDispatcher.unregister('position-app-header-dialogs', this._positionDialog);\n  },\n\n  render() {\n    let content = this._getContent();\n    return (\n      <InlineDialog dialogId=\"connectionStatusMessage\">\n        {content}\n      </InlineDialog>\n    );\n  },\n\n  _getContent() {\n    switch (this.props.status) {\n\n      case ConnectionStates.RECONNECT_DELAY:\n        return (\n          <div>\n            <p>{ strings.check_network }</p>\n          </div>\n        );\n\n      case ConnectionStates.DISCONNECTED:\n        return (\n          <div>\n            {this.state.isBTF ? false : <p dangerouslySetInnerHTML={{__html: strings.unable_to_connect_hipchat(AppConfig.status_page_url)}} />}\n          </div>\n        );\n\n      case NetworkStates.OFFLINE:\n        return (\n          <div>\n            <p>{ strings.offline_status }</p>\n          </div>\n        );\n\n      default:\n        return <span />;\n    }\n  },\n\n  _onChange () {\n    this.setState(this._getState());\n  },\n\n  _getState () {\n    let reconnectSeconds = Math.round(ConnectionStatusStore.get('reconnectingIn') / 1000);\n    return {\n      isBTF: _.get(ConfigStore.get('feature_flags'), 'btf', false),\n      reconnectSeconds\n    };\n  },\n\n  _positionDialog () {\n    var anchor = this.props.anchor,\n        node = ReactDOM.findDOMNode(this),\n        top,\n        left;\n\n    if (anchor) {\n      _.delay(function() {\n        top = anchor.getBoundingClientRect().bottom + 5;\n        left = anchor.getBoundingClientRect().right - $(node).width();\n        $(node).css({\n          top: top + \"px\",\n          left: left + \"px\"\n        });\n      }, AppConfig.notification_banner_slide);\n    }\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_header/connection_status_message.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\nimport InlineDialog from 'components/common/inline_dialog/inline_dialog';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport strings from 'strings/guest_access_information_strings';\n\nexport default React.createClass({\n\n  displayName: \"GuestAccessInformation\",\n  debouncedMouseOut: null,\n\n  getDefaultProps: function() {\n    return {\n      visible: false\n    };\n  },\n\n  componentDidMount: function() {\n    AppDispatcher.register('position-app-header-dialogs', this._positionDialog);\n    this._positionDialog();\n\n    this.debouncedMouseOut = _.debounce( e => this._onMouseOut(e), AppConfig.guest_access_information.mouseout_delay);\n    document.addEventListener('mouseout', this.debouncedMouseOut);\n\n    _.delay(() => {\n      this._focusAndSelectInput();\n    }, AppConfig.guest_access_information.focus_and_select_delay);\n  },\n\n  componentDidUpdate: function () {\n    this._positionDialog();\n  },\n\n  componentWillUnmount: function () {\n    AppDispatcher.unregister('position-app-header-dialogs', this._positionDialog);\n\n    document.removeEventListener('mouseout', this.debouncedMouseOut);\n    this.debouncedMouseOut.cancel();\n    this.debouncedMouseOut = null;\n  },\n\n  _positionDialog: function () {\n    let anchor = this.props.anchor,\n        node = ReactDOM.findDOMNode(this),\n        rect,\n        top,\n        left;\n\n    if (anchor) {\n      _.delay(() => {\n        rect = anchor.getBoundingClientRect();\n        top = rect.bottom + 5;\n        left = rect.left + rect.width / 2;\n        $(node).css({\n          top: `${top}px`,\n          left: `${left}px`,\n          display: 'block'\n        });\n      }, AppConfig.notification_banner_slide);\n    }\n  },\n\n  _onMouseOut() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  _onMouseOver() {\n    this.debouncedMouseOut.cancel();\n  },\n\n  _focusAndSelectInput() {\n    if (this.isMounted()){\n      let input = ReactDOM.findDOMNode(this.refs.input);\n      input.focus();\n      input.setSelectionRange(0, input.value.length);\n    }\n  },\n\n  render: function() {\n    let description = strings.share_this_link_to_invite;\n\n    return (\n      <InlineDialog dialogId=\"guestAccessInformation\" onMouseOver={this._onMouseOver}>\n        <form className=\"aui aui-group\">\n          <div className=\"aui-item guest-access-url\">\n            <input type=\"text\" className=\"text\" value={this.props.guest_url} ref=\"input\" readOnly />\n            <div className=\"description\">{description}</div>\n          </div>\n        </form>\n      </InlineDialog>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/guest_access_information.js\n **/","export default {\n  share_this_link_to_invite: `Share this link to invite a guest`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/guest_access_information_strings.js\n **/","import strings from 'strings/integrations_strings';\nimport InlineDialog from 'components/common/inline_dialog/inline_dialog';\nimport AppConfig from 'config/app_config';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default React.createClass({\n\n  displayName: \"AddIntegrationsDiscoverTooltip\",\n\n  componentDidMount: function() {\n    $(window).on('resize', this._positionDialog);\n    this._positionDialog();\n    AppDispatcher.register('set-right-sidebar-visible-width-is-changing', this._closeDialog);\n  },\n\n  componentDidUpdate: function () {\n    this._positionDialog();\n  },\n\n  componentWillUnmount: function () {\n    $(window).off('resize', this._positionDialog);\n    AppDispatcher.unregister('set-right-sidebar-visible-width-is-changing', this._closeDialog);\n  },\n\n  _positionDialog: function () {\n    let anchor = this.props.anchor,\n      node = ReactDOM.findDOMNode(this),\n      rect,\n      bottom,\n      left;\n\n    if (anchor) {\n      _.delay(() => {\n        rect = anchor.getBoundingClientRect();\n        bottom = 45;\n        left = rect.left - rect.width / 2;\n        $(node).css({\n          bottom: `${bottom}px`,\n          left: `${left}px`,\n          display: 'block'\n        });\n      }, AppConfig.notification_banner_slide);\n    }\n  },\n\n  _closeDialog: function() {\n    InlineDialogActions.hideInlineDialog();\n  },\n\n  render: function () {\n    return <InlineDialog dialogId=\"add-integrations-discover-tooltip\" tooltip_helper=\"hc-tooltip-helper\" arrowLocation=\"bottom\">\n      <div className=\"add-integrations-tooltip\">\n        <div className=\"add-integrations-tooltip-title\">{strings.install_integrations_tooltip_title}</div>\n        <p className=\"add-integration-tooltip-content\">{strings.install_integrations_tooltip_content}</p>\n        <p>\n          <a className=\"add-integration-tooltip-close\" onClick={this._closeDialog}>{strings.got_it}</a>\n        </p>\n      </div>\n    </InlineDialog>;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/tooltip/tooltip_types/add_integrations_discover.js\n **/","import FlagsStore from 'stores/flags_store';\nimport Flag from './flag';\nimport VideoPopupBlockedFlag from './video_popup_blocked_flag';\nimport IncomingCallFlag from './incoming_call_flag';\n\nexport default React.createClass({\n\n  displayName: 'FlagsContainer',\n\n  componentDidMount() {\n    FlagsStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount() {\n    FlagsStore.off('change', this._onChange);\n  },\n\n  getInitialState() {\n    return FlagsStore.getAll();\n  },\n\n  _onChange() {\n    this.setState(FlagsStore.getAll());\n  },\n\n  _getFlag(data, index) {\n    let flag;\n    switch(data.type) {\n      case 'video':\n        flag = <IncomingCallFlag\n          ref='incoming_call_flag'\n          flag_index={index}\n          sender={data.sender}\n          photo={data.photo}\n          message={data.message}\n          service={data.service}\n          key={index} />;\n        break;\n      case 'video_popup_blocked':\n        flag = <VideoPopupBlockedFlag\n          title={data.title}\n          body={data.body}\n          close={data.close}\n          promise={data.promise}\n          key={index} />;\n        break;\n      default:\n        flag = <Flag\n          flag_index={index}\n          title={data.title}\n          type={data.type}\n          body={data.body}\n          delay={data.delay}\n          close={data.close}\n          key={index} />;\n        break;\n    }\n    return flag;\n  },\n\n  render() {\n    return (\n      <div className='hc-flags-container'>\n        {\n          _.map(this.state.flags, (flag) => {\n            return this._getFlag(flag, _.uniqueId());\n          })\n        }\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/flags/flags_container.js\n **/","var Store = require(\"lib/core/store\");\nvar dispatcher = require(\"dispatchers/app_dispatcher\");\n\nclass FlagsStore extends Store {\n\n  constructor() {\n\n    super();\n\n    this.data = {\n      flags: []\n    };\n\n    this.flag_defaults = {\n      type: \"info\",\n      body: null,\n      close: \"manual\",\n      title: \"\"\n    };\n\n    this.register_listeners();\n  }\n\n  register_listeners() {\n    dispatcher.register({\n      'show-flag': (flag_data) => {\n        this.add_flag(flag_data);\n      },\n      'remove-flag': (flag_index) => {\n        this.remove_flag(flag_index);\n      }\n    });\n  }\n\n  add_flag(flag_data) {\n    this.data.flags.unshift(_.defaults(flag_data, this.flag_defaults));\n    this.set('flags', this.data.flags);\n  }\n\n  remove_flag(flag_index) {\n    let idx = _.findIndex(this.data.flags, {id: flag_index});\n    if (idx) {\n      flag_index = idx;\n    }\n    this.data.flags.splice(flag_index, 1);\n    this.set('flags', this.data.flags);\n  }\n\n}\n\nmodule.exports = new FlagsStore();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/flags_store.js\n **/","import FlagActions from 'actions/flag_actions';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: 'Flag',\n\n  propTypes: {\n    type: React.PropTypes.oneOf(['info', 'success', 'warning', 'error']).isRequired,\n    close: React.PropTypes.oneOf(['manual', 'auto', 'never']).isRequired\n  },\n\n  _isCloseable() {\n    return (this.props.close !== 'never');\n  },\n\n  _getCloseButton() {\n    return this._isCloseable() ? <span onClick={this.close} className='aui-icon hipchat-icon-small icon-close' role='button' tabIndex='0'></span> : undefined;\n  },\n\n  close() {\n    var flag_index = this.props.flag_index;\n    if (this.isMounted()){\n      $(ReactDOM.findDOMNode(this)).attr('aria-hidden', true);\n    }\n    _.delay(function () {\n      // Wait for animation to complete before removing flag\n      FlagActions.removeFlag(flag_index);\n    }, AppConfig.flag_close_animation_time);\n  },\n\n  render() {\n    var closeable = this._isCloseable() ? 'closeable' : '';\n    var classes = 'hc-message hc-message-' + this.props.type + ' ' + this.props.type + ' ' + closeable;\n    var closeBtn = this._getCloseButton();\n    if (this.props.close === 'auto') {\n      _.delay(this.close, this.props.delay || 2000);\n    }\n\n    return (\n      <div className='hc-flag' data-flag-index={this.props.flag_index} aria-hidden='false'>\n        <div className={classes}>\n          <p className='title'><strong>{this.props.title}</strong></p>\n          {typeof this.props.body === 'function' ? this.props.body() : this.props.body}\n          {closeBtn}\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/flags/flag.js\n **/","import FlagActions from 'actions/flag_actions';\nimport AppConfig from 'config/app_config';\nimport strings from 'strings/dialog_strings';\n\nexport default React.createClass({\n\n  displayName: 'Flag',\n\n  propTypes: {\n    close: React.PropTypes.oneOf(['manual', 'auto', 'never']).isRequired,\n    promise: React.PropTypes.func.isRequired\n  },\n\n  _getCloseButton() {\n    return <span onClick={this.close} className='aui-icon hipchat-icon-small icon-close' role='button' tabIndex='0'></span>;\n  },\n\n  close() {\n    var flag_index = this.props.flag_index;\n    if (this.isMounted()){\n      $(ReactDOM.findDOMNode(this)).attr('aria-hidden', true);\n    }\n    _.delay(function () {\n      // Wait for animation to complete before removing flag\n      FlagActions.removeFlag(flag_index);\n    }, AppConfig.flag_close_animation_time);\n  },\n\n  _executePromise() {\n    this.props.promise().then(video_window => {\n      if (video_window) {\n        this.close();\n      }\n    });\n  },\n\n  render() {\n    var classes = `hc-message hc-message-${this.props.type} hc-message-info closeable`;\n    var closeBtn = this._getCloseButton();\n    if (this.props.close === 'auto') {\n      _.delay(this.close, 2000);\n    }\n\n    return (\n      <div className='hc-flag' data-flag-index={this.props.flag_index} aria-hidden='false'>\n        <div className={classes}>\n          {typeof this.props.body === 'function' ? this.props.body() : this.props.body}\n          {closeBtn}\n          <br />\n          <a onClick={this._executePromise} >{strings.try_again}</a>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/flags/video_popup_blocked_flag.js\n **/","import AppConfig from 'config/app_config';\nimport VideoCallStrings from 'strings/video_call_strings';\nimport IncomingCallActions from 'actions/incoming_call_actions';\nimport PersonAvatar from 'components/common/avatars/person_avatar';\n\nexport default React.createClass({\n\n  displayName: 'IncomingCallFlag',\n\n  componentDidMount() {\n    this.closing = false;\n    this.missed_call_timeout = setTimeout(() => {\n      this._close();\n    }, AppConfig.missed_video_call_timeout - AppConfig.flag_close_animation_time);\n  },\n\n  componentWillUnmount() {\n    clearTimeout(this.missed_call_timeout);\n    this.missed_call_timeout = null;\n  },\n\n  _onAnswer() {\n    if (this.closing) {\n      return;\n    }\n    IncomingCallActions.answerCall(this.props.message, this.props.service);\n    this._close();\n   },\n\n  _onIgnore() {\n    if (this.closing) {\n      return;\n    }\n    IncomingCallActions.declineCall(this.props.message, this.props.service);\n    this._close();\n  },\n\n  _close() {\n    this.closing = true;\n    clearTimeout(this.missed_call_timeout);\n    if (this.isMounted()){\n      ReactDOM.findDOMNode(this).setAttribute('aria-hidden', true);\n    }\n  },\n\n  render() {\n    return (\n      <div className='hc-flag' data-flag-index={this.props.flag_index} aria-hidden='false'>\n        <div className='hc-message hc-message-video info'>\n          <h6>Incoming call</h6>\n          <div className='sender-container'>\n            <PersonAvatar avatar_url={this.props.photo} size='large' show_presence={false}/>\n            <h3 className='sender'>{this.props.sender}</h3>\n          </div>\n          <button\n            ref='answer'\n            className='aui-button aui-button-primary'\n            onClick={this._onAnswer}>\n              {VideoCallStrings.answer}\n          </button>\n          <button\n            ref='ignore'\n            className='aui-button'\n            onClick={this._onIgnore}>\n              {VideoCallStrings.ignore}\n          </button>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/flags/incoming_call_flag.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\n\nexport default {\n\n  answerCall: function(data, service) {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: 'hipchat.client.user.oto.video.answer',\n      properties: {\n        service: service\n      }\n    });\n    AppDispatcher.dispatch(`${service}.answer-audio-video-call`, data);\n  },\n\n  declineCall: function(data, service) {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: 'hipchat.client.user.oto.video.decline',\n      properties: {\n        service: service\n      }\n    });\n    AppDispatcher.dispatch(`${service}.decline-audio-video-call`, data);\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/incoming_call_actions.js\n **/","import GeneralErrorsStore from 'stores/general_errors_store';\nimport LayoutStore from 'stores/layout_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport LeftSidebar from 'components/left_sidebar/sidebar';\nimport MainCol from 'components/main_column/main_col';\nimport appConfig from 'config/app_config';\nimport LayoutActions from 'actions/layout_actions';\n\nexport default React.createClass({\n\n  displayName: \"MainBodyLayout\",\n\n  getInitialState: function() {\n    return this.getState();\n  },\n\n  getState: function() {\n    return {\n      errors: GeneralErrorsStore.get('errors'),\n      ready: LayoutStore.get('ready'),\n      leftColumnWidth: PreferencesStore.get('leftColumnWidth'),\n      leftColumnVisible: PreferencesStore.get('showNavigationSidebar')\n    };\n  },\n\n  componentDidMount: function() {\n    GeneralErrorsStore.on('change:errors', this._onChange);\n    LayoutStore.on('change:ready', this._onChange);\n    PreferencesStore.on(['change:leftColumnWidth', 'change:showNavigationSidebar'], this._onChange);\n    this._resizeColumns(this.state.leftColumnWidth);\n  },\n\n  componentDidUpdate: function() {\n    if (this.state.leftColumnVisible) {\n      this._resizeColumns(this.state.leftColumnWidth);\n    }\n  },\n\n  componentWillUnmount: function() {\n    GeneralErrorsStore.off('change:errors', this._onChange);\n    LayoutStore.off('change:ready', this._onChange);\n    PreferencesStore.off(['change:leftColumnWidth', 'change:showNavigationSidebar'], this._onChange);\n  },\n\n  _onChange: function () {\n    this.setState(this.getState());\n  },\n\n  _getSidebar: function () {\n    var retVal = null;\n    if (this.state.leftColumnVisible) {\n      retVal = (\n        <div className=\"hc-left-sidebar-col\" ref=\"left_column\">\n          <LeftSidebar />\n          <div className=\"resize-handle\" onMouseDown={this._onResizeStart}></div>\n        </div>\n      );\n    }\n    return retVal;\n  },\n\n  render: function () {\n    var body,\n      sidebar = this._getSidebar();\n    body = (\n      <div className=\"hc-layout\">\n        {sidebar}\n        <MainCol ref=\"main_column\" is_guest={this.props.is_guest}/>\n      </div>\n    );\n\n    return body;\n  },\n\n  _resizeColumns: function(width) {\n    if (this.state.ready && !this.state.errors.length) {\n      $('.hc-unread-scroller').width(width);\n      this.refs.left_column.style.width = `${width}px`;\n    }\n  },\n\n  _onResizeStart: function(e) {\n    e.preventDefault();\n    this.beginX = e.pageX;\n    this.beginWidth = this.state.leftColumnWidth;\n    document.addEventListener('mouseup', this._onResizeEnd);\n    document.addEventListener('mousemove', this._onHandleDrag);\n  },\n\n  _onHandleDrag(e) {\n    var diff = e.pageX - this.beginX;\n    if (this.beginWidth + diff >= appConfig.column_width_limits['left'].min && this.beginWidth + diff <= appConfig.column_width_limits['left'].max) {\n      var width = Math.floor(this.beginWidth) + Math.floor(diff);\n      this._resizeColumns(width);\n      this.setState({\n        leftColumnWidth: width\n      });\n    }\n  },\n\n  _onResizeEnd: function(e) {\n    e.preventDefault();\n    document.removeEventListener('mouseup', this._onResizeEnd);\n    document.removeEventListener('mousemove', this._onHandleDrag);\n    LayoutActions.saveLeftColumnWidth(this.state.leftColumnWidth);\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/layout/main_body_layout.js\n **/","var Store = require('lib/core/store'),\n    AppDispatcher = require(\"dispatchers/app_dispatcher\");\n\nclass GeneralErrorsStore extends Store {\n\n  getDefaults() {\n    return {\n      errors: [],\n      web_server: ''\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      \"general-error\": (error) => {\n        var errors = this.data.errors;\n        errors.push(error);\n        this.set('errors', errors);\n      },\n      'updated:web_server': (server) => {\n        this.data.web_server = server;\n      }\n    });\n  }\n}\n\nmodule.exports = new GeneralErrorsStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/general_errors_store.js\n **/","import Store from \"lib/core/store\";\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\n\nclass LayoutStore extends Store {\n\n  getDefaults() {\n    return {\n      ready: false,\n      active_chat: null,\n      search_opened: false,\n      rightSidebarVisibleWidthIsChanging: false\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'app-state-ready': () => {\n        this.set(\"ready\", true);\n      },\n      'updated:active_chat': (data) => {\n        this.set(\"active_chat\", data);\n      },\n      'set-right-sidebar-visible-width-is-changing': (changing) => {\n        this.set(\"rightSidebarVisibleWidthIsChanging\", changing);\n      },\n      'search-history': () => {\n        this.set('search_opened', true);\n      },\n      'remove-search-nav-item': () => {\n        this.set('search_opened', false);\n      }\n    });\n  }\n}\n\nmodule.exports = new LayoutStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/layout_store.js\n **/","var RoomsNav = require(\"./rooms_nav\"),\n    PermissionsStore = require('stores/permissions_store'),\n    UnreadScroller = require('./unread_scroller');\n\nfunction getState() {\n  return {\n    can_create_room: PermissionsStore.canCreateRoom(),\n    can_invite_users: PermissionsStore.canInviteUsersToGroup()\n  };\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"LeftSideBar\",\n\n  getInitialState: function(){\n    return getState();\n  },\n\n  componentDidMount: function(){\n    PermissionsStore.on('change', this._onChange);\n  },\n\n  componentWillUnmount: function(){\n    PermissionsStore.off('change', this._onChange);\n  },\n\n  _onChange: function(){\n    this.setState(getState());\n  },\n\n  render: function () {\n    return (\n      <UnreadScroller>\n        <RoomsNav can_create_room={this.state.can_create_room} can_invite_users={this.state.can_invite_users} />\n      </UnreadScroller>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/sidebar.js\n **/","import LobbyNavItem from './lobby_nav_item';\nimport SearchNavItem from './search_nav_item';\nimport RoomsNavPeopleList from './rooms_nav_people_list';\nimport RoomsNavRoomList from './rooms_nav_room_list';\nimport RoomsNavStore from 'stores/rooms_nav_store';\nimport RoomNavActions from 'actions/room_nav_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport utils from 'helpers/utils';\n\nfunction getState() {\n  var rooms = RoomsNavStore.get('rooms');\n  return {\n    rooms: rooms[\"rooms\"],\n    people: rooms[\"people\"],\n    room_order: RoomsNavStore.get('room_order'),\n    active_chat: RoomsNavStore.get('active_chat'),\n    feature_flags: RoomsNavStore.get('feature_flags'),\n    group_name: RoomsNavStore.get('group_name'),\n    group_avatar_url: RoomsNavStore.get('group_avatar_url'),\n    group_avatar_bg: RoomsNavStore.get('group_avatar_bg'),\n    search_nav_item_visible: RoomsNavStore.get('search_nav_item_visible'),\n    drag_target: RoomsNavStore.get('drag_target'),\n    drag_over_target: RoomsNavStore.get('drag_over_target'),\n    drag_over_clientY: RoomsNavStore.get('drag_over_clientY'),\n    dragging: RoomsNavStore.get('dragging'),\n    ui_available: RoomsNavStore.get('ui_available')\n  };\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomsNav\",\n\n  getInitialState: function() {\n    return getState();\n  },\n\n  componentDidMount: function() {\n    RoomsNavStore.on('change', this._onChange);\n    this.placeholder = document.createElement(\"li\");\n    this.placeholder.className = \"hc-sortable-placeholder\";\n    this.launchToActiveChatCalled = false;\n  },\n\n  componentWillMount: function() {\n    AppDispatcher.register(\"after:restore-room-order\", this._scrollToActiveChat);\n  },\n\n  componentWillUnmount: function() {\n    RoomsNavStore.off('change', this._onChange);\n    this.placeholder = null;\n    AppDispatcher.unregister(\"after:restore-room-order\", this._scrollToActiveChat);\n  },\n\n  componentDidUpdate: function(prevProps, prevState) {\n    if (this.state.ui_available && !this.launchToActiveChatCalled) {\n      // This should only fire once after the preloader has been removed\n      this._handleLaunchToActiveChatList();\n    }\n    if (prevState.active_chat !== this.state.active_chat && !utils.jid.is_search(this.state.active_chat)) {\n      this._scrollToActiveChat();\n    }\n    if (this.state.dragging && this.state.drag_over_target && this.state.drag_over_clientY) {\n      this._dragOver();\n    } else if (!this.state.dragging && this.state.drag_target) {\n      this._dragEnd();\n    }\n  },\n\n  _onChange: function() {\n    this.setState(getState());\n  },\n\n  _getChatCount: function () {\n    return this.state.rooms.length + this.state.people.length;\n  },\n\n  _handleLaunchToActiveChatList: function () {\n    AnalyticsActions.handleLaunchToActiveChatList({\n      size: this._getChatCount()\n    });\n    this.launchToActiveChatCalled = true;\n  },\n\n  _scrollToActiveChat: function () {\n    var element = $(ReactDOM.findDOMNode(this)).find(\"[data-jid='\" + this.state.active_chat + \"']\"),\n      container = ReactDOM.findDOMNode(this).parentNode;\n\n    if (element && element.length) {\n      utils.scrollIntoViewIfNeeded(element[0], container);\n    }\n  },\n\n  _dragOver: function () {\n    var $tabTarget = $(this.state.drag_over_target).closest(\".hc-tab\"),\n        $container = $tabTarget.closest(\".hc-sortable\"),\n        clientY = this.state.drag_over_clientY,\n        relY,\n        tabHeight = $tabTarget.height(),\n        height = tabHeight / 2;\n\n    if (this._allowDrop($container) && $tabTarget.length && ($tabTarget.hasClass('hc-room') || $tabTarget.hasClass('hc-person'))) {\n      relY = clientY - $tabTarget.offset().top;\n      if (relY > height) {\n        $tabTarget.after(this.placeholder);\n      } else if(relY < height) {\n        $tabTarget.before(this.placeholder);\n      }\n    }\n  },\n\n  _dragEnd: function () {\n    var jid_order = _.cloneDeep(this.state.room_order),\n        $placeholder = $(\".hc-sortable\").find(\".hc-sortable-placeholder\"),\n        end = _.indexOf(jid_order, $(this.state.drag_target).data('jid')),\n        start = Number($placeholder.index() - 1);\n\n    if (this.state.drag_target && this.state.drag_target.classList.contains(\"hc-person\")) {\n      start = start + ReactDOM.findDOMNode(this).querySelectorAll(\".hc-room\").length;\n    }\n    $placeholder.remove();\n    if (end < start) {\n      start--;\n    }\n    jid_order.splice(start, 0, jid_order.splice(end, 1)[0]);\n    RoomNavActions.update_room_order(jid_order);\n  },\n\n  _allowDrop: function ($container) {\n    // Prevent dropping rooms in people list & vice versa\n    return (this.state.drag_target &&\n      ((this.state.drag_target.classList.contains(\"hc-room\") && $container.hasClass(\"hc-rooms\")) ||\n      (this.state.drag_target.classList.contains(\"hc-person\") && $container.hasClass(\"hc-people\"))));\n  },\n\n  _getLobbyItem: function () {\n    var lobby_is_active = (!this.state.active_chat || utils.jid.is_lobby(this.state.active_chat));\n\n    return <LobbyNavItem ref=\"lobby\"\n                         active={lobby_is_active}\n                         group_avatar_url={this.state.group_avatar_url}\n                         group_avatar_bg={this.state.group_avatar_bg}\n                         group_name={this.state.group_name} />;\n  },\n\n  _getSearchItem: function () {\n    return <SearchNavItem ref=\"search\" active={utils.jid.is_search(this.state.active_chat)} />;\n  },\n\n  render: function() {\n    var searchNavItem = (this.state.search_nav_item_visible) ? this._getSearchItem() : false,\n        lobbyNavItem = this._getLobbyItem();\n\n    return (\n      <div className=\"aui-navgroup-inner\">\n        {lobbyNavItem}\n        {searchNavItem}\n        <RoomsNavRoomList rooms={this.state.rooms} active_chat={this.state.active_chat} can_create_room={this.props.can_create_room} />\n        <RoomsNavPeopleList people={this.state.people} active_chat={this.state.active_chat} can_invite_users={this.props.can_invite_users} />\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/rooms_nav.js\n **/","import AnalyticsActions from 'actions/analytics_actions';\nimport PersonAvatar from 'components/common/avatars/person_avatar';\nimport RoomsNavActions from 'actions/room_nav_actions';\nimport CommonStrings from 'strings/common_strings';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'LobbyNavItem',\n\n  mixins: [PureRenderMixin],\n\n  _onClick: function() {\n    RoomsNavActions.select('lobby');\n    AnalyticsActions.lobbyRoomNavItemClicked();\n  },\n\n  _getLobbyIcon: function () {\n    var icon;\n\n    if (_.isString(this.props.group_name)) {\n      icon = <PersonAvatar\n        text={this.props.group_name.charAt(0)}\n        avatar_url={this.props.group_avatar_url}\n        avatar_bg_color={this.props.group_avatar_bg}\n        size='xsmall'\n        show_presence={false} />;\n\n    } else {\n      icon = <span className='aui-icon hipchat-icon-small icon-lobby'></span>;\n    }\n\n    return icon;\n  },\n\n  _getLobbyText: function () {\n    var text = CommonStrings.lobby;\n    if (_.isString(this.props.group_name)) {\n      text = this.props.group_name;\n    }\n    return (\n      <span className='aui-nav-item-label'>{text}</span>\n    );\n  },\n\n  _getLobbyContent: function () {\n    var lobbyText = this._getLobbyText(),\n        lobbyIcon = this._getLobbyIcon();\n\n    return (\n      <a ref='link' className='aui-nav-item' onClick={this._onClick}>\n        {lobbyIcon}\n        {lobbyText}\n      </a>\n    );\n  },\n\n  render: function() {\n    var classes = cx({\n          'hc-tab': true,\n          'aui-nav-selected': this.props.active\n        }),\n        lobbyContent = this._getLobbyContent();\n\n    return (\n      <ul className='aui-nav hc-sidebar-nav hc-lobby' data-skate-ignore>\n        <li className={classes} data-jid='lobby'>\n          {lobbyContent}\n        </li>\n      </ul>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/lobby_nav_item.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport RoomNavActions from \"actions/room_nav_actions\";\nimport CommonStrings from \"strings/common_strings\";\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"SearchNavItem\",\n\n  mixins: [PureRenderMixin],\n\n  _closeSearch: function () {\n    RoomNavActions.closeSearchResults();\n  },\n\n  _showSearch: function () {\n    RoomNavActions.openSearchResults();\n  },\n\n  render: function() {\n    var classes = cx({\n      'hc-tab': true,\n      'aui-nav-selected': this.props.active\n    });\n\n    return (\n      <ul className=\"aui-nav hc-sidebar-nav hc-search-results\" data-skate-ignore>\n        <li className={classes} data-jid=\"search\">\n          <a className=\"aui-nav-item aui-nav-selected\" onClick={this._showSearch}>\n            <span className=\"aui-icon hipchat-icon-small icon-search\"></span>\n            <span className=\"aui-nav-item-label\">{CommonStrings.search_results}</span>\n          </a>\n          <a className=\"hc-tab-close\" onClick={this._closeSearch}>\n            <span className=\"aui-icon hipchat-icon-xsmall hc-close-icon icon-close\"/>\n          </a>\n        </li>\n      </ul>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/search_nav_item.js\n **/","var InviteUsersNavItem = require('./invite_users_nav_item');\nvar RoomsNavItemPerson = require('./rooms_nav_item_person');\nvar RoomNavActions = require(\"actions/room_nav_actions\");\nvar CommonStrings = require(\"strings/common_strings\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomsNavPeopleList\",\n\n  _onDragOver: function (e) {\n    RoomNavActions.dragOver({\n      event: e\n    });\n  },\n\n  _getInviteUsers: function () {\n    return <InviteUsersNavItem />;\n  },\n\n  _getPeopleList: function () {\n    var peopleList = _.map(this.props.people, (room) => {\n      return <RoomsNavItemPerson key={\"RoomsNavPersonItem\" + room.jid + room.type}\n                                  unreadCount={room.unreadCount}\n                                  isUpdating={room.isUpdatingUnreadCount}\n                                  active={this.props.active_chat === room.jid}\n                                  name={room.name}\n                                  jid={room.jid}\n                                  type={room.type}\n                                  uid={room.id}\n                                  presence={room.presence.show}\n                                  status={room.presence.status}\n                                  mobile={room.mobile} />;\n    });\n    return peopleList;\n  },\n\n  _getPeopleContent: function (inviteUsersLink) {\n    var peopleList = (this.props.people && this.props.people.length) ? this._getPeopleList() : false;\n\n    return (\n      <ul ref=\"people_list\" className=\"aui-nav hc-sidebar-nav hc-sortable hc-people\" onDragOver={this._onDragOver} data-skate-ignore>\n        <li className=\"aui-nav-heading\"><strong>{CommonStrings.people}</strong></li>\n        {peopleList}\n        {inviteUsersLink}\n      </ul>\n    );\n  },\n\n  render: function() {\n    var inviteUsersLink = (this.props.can_invite_users) ? this._getInviteUsers() : false,\n        peopleContent = (this.props.people && this.props.people.length || inviteUsersLink) ? this._getPeopleContent(inviteUsersLink) : false;\n\n    return (\n      <div key=\"RoomsNavPeople\">\n        {peopleContent}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/rooms_nav_people_list.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport CommonStrings from 'strings/common_strings';\nimport AnalyticsKeys from 'keys/analytics_keys';\n\nexport default React.createClass({\n\n  displayName: \"InviteUsersNavItem\",\n\n  mixins: [PureRenderMixin],\n\n  _onClick: function () {\n    DialogActions.showInviteTeammatesDialog({type: AnalyticsKeys.LEFT});\n    AnalyticsActions.inviteTeamClickedEvent(\"left.navigation\");\n  },\n\n  render: function() {\n    return (\n      <li className=\"hc-tab hc-add-item-link hc-invite-users-link\">\n        <a ref=\"link\" className=\"aui-nav-item aui-inline-dialog-trigger\" onClick={this._onClick}>\n          <span className=\"aui-icon aui-icon-small aui-iconfont-add-small\"></span>\n          <span className=\"room-name\">{CommonStrings.buttons.invite_team}</span>\n        </a>\n      </li>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/invite_users_nav_item.js\n **/","import PresenceIcon from \"components/common/icon/presence-icon\";\nimport UnreadBadge from './unread_badge';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport RooomsNavItemMixin from './mixins/rooms_nav_item_mixin';\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"RoomsNavItemPerson\",\n\n  mixins: [PureRenderMixin, RooomsNavItemMixin],\n\n  _getUnreadBadge: function () {\n    return <UnreadBadge unreadCount={this.props.unreadCount} hasMention={true} isUpdating={this.props.isUpdating} />;\n  },\n\n  render: function() {\n    var hasBadge = (this.props.unreadCount > 0 && !this.props.active),\n        unreadBadge = (hasBadge) ? this._getUnreadBadge() : false,\n        classes = cx({\n          'hc-tab': true,\n          'aui-nav-selected': this.props.active,\n          'hc-has-badge': hasBadge,\n          'hc-person': true\n        });\n\n    return (\n      <li ref=\"nav_item\" draggable=\"true\" className={classes} onDragStart={this._onDragStart} onDragEnd={this._onDragEnd} data-jid={this.props.jid}>\n        <a ref=\"link\" className=\"aui-nav-item\" onClick={this._onSelectTab} aria-label={this.props.name} data-tipsify-ignore>\n          <PresenceIcon active={true}\n                        presence={this.props.presence}\n                        mobile={this.props.mobile}\n                        uid={this.props.uid}/>\n          <span className=\"room-name\">{this.props.name}</span>\n          {unreadBadge}\n        </a>\n        <a ref=\"close_link\" className=\"hc-tab-close\" onClick={this._onCloseTab}>\n          <span className=\"aui-icon hipchat-icon-xsmall hc-close-icon icon-close\"/>\n        </a>\n      </li>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/rooms_nav_item_person.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport cx from 'classnames';\nimport app_config from 'config/app_config';\n\nconst MAX_UNREADS = app_config.max_unread_count;\n\nexport default React.createClass({\n\n  displayName: \"UnreadBadge\",\n\n  mixins: [PureRenderMixin],\n\n  render: function() {\n    var count = this.props.unreadCount > MAX_UNREADS ? `${MAX_UNREADS}+` : this.props.unreadCount,\n        classes = cx({\n          'aui-badge': (this.props.unreadCount > 0),\n          'hc-badge': true,\n          'hc-mention': (this.props.hasMention) ? true : false,\n          'hc-updating': (this.props.isUpdating) ? true : false\n        });\n    return <span className={classes}>{count}</span>;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/unread_badge.js\n **/","import RoomNavActions from \"actions/room_nav_actions\";\nimport utils from 'helpers/utils';\n\nexport default {\n\n  _onDragStart: function (e) {\n    e.dataTransfer.effectAllowed = 'move';\n    try {\n      e.dataTransfer.setData('application/x-moz-node', e.currentTarget); // Required for Mozilla, breaks IE\n    } catch (err) {\n      e.dataTransfer.setData('text', 'IE node placeholder'); // IE only accepts 'text' or 'URL' as draggable types (but IE doesn't even care)\n    }\n    RoomNavActions.dragStart({\n      target: e.currentTarget\n    });\n  },\n\n  _onDragEnd: function () {\n    RoomNavActions.dragEnd();\n  },\n\n  _onSelectTab: function (e) {\n    if (e.nativeEvent.which === utils.mouseButton.middle){\n      this._onCloseTab(e);\n    } else if (!this.props.active) {\n      RoomNavActions.select(this.props.jid, this.props.type);\n    }\n  },\n\n  _onCloseTab: function () {\n    RoomNavActions.close(this.props.jid, this.props.type);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/mixins/rooms_nav_item_mixin.js\n **/","var CreateRoomNavItem = require('./create_room_nav_item');\nvar RoomsNavItemRoom = require('./rooms_nav_item_room');\nvar RoomNavActions = require(\"actions/room_nav_actions\");\nvar CommonStrings = require(\"strings/common_strings\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"RoomsNavRoomList\",\n\n  _onDragOver: function (e) {\n    RoomNavActions.dragOver({\n      event: e\n    });\n  },\n\n  _getCreateRoomLink: function () {\n    return <CreateRoomNavItem />;\n  },\n\n  _getRoomList: function () {\n    return _.map(this.props.rooms, (room) => {\n      return <RoomsNavItemRoom key={\"RoomsNavRoomItem\" + room.jid + room.type}\n                                unreadCount={room.unreadCount}\n                                hasMention={room.hasMention}\n                                isUpdating={room.isUpdatingUnreadCount}\n                                active={this.props.active_chat === room.jid}\n                                name={room.name}\n                                jid={room.jid}\n                                type={room.type}\n                                privacy={room.privacy} />;\n    });\n  },\n\n  _getRoomsContent: function (createRoomLink) {\n    var roomList = (this.props.rooms && this.props.rooms.length) ? this._getRoomList() : false;\n\n    return (\n      <ul ref=\"room_list\" className=\"aui-nav hc-sidebar-nav hc-sortable hc-rooms\" onDragOver={this._onDragOver} data-skate-ignore>\n        <li className=\"aui-nav-heading\"><strong>{CommonStrings.rooms}</strong></li>\n        {roomList}\n        {createRoomLink}\n      </ul>\n    );\n  },\n\n  render: function() {\n    var createRoomLink = (this.props.can_create_room) ? this._getCreateRoomLink() : false,\n        roomsContent = (this.props.rooms && this.props.rooms.length || createRoomLink) ? this._getRoomsContent(createRoomLink) : false;\n\n    return (\n      <div key=\"RoomsNavRooms\">\n        {roomsContent}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/rooms_nav_room_list.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport CommonStrings from 'strings/common_strings';\n\nexport default React.createClass({\n\n  displayName: \"CreateRoomNavItem\",\n\n  mixins: [PureRenderMixin],\n\n  _onClick: function () {\n    DialogActions.showCreateRoomDialog();\n    AnalyticsActions.createRoomClickedEvent(\"left.navigation\");\n  },\n\n  render: function() {\n    return (\n      <li className=\"hc-tab hc-add-item-link\">\n        <a ref=\"link\" className=\"aui-nav-item hc-create-room-link\" onClick={this._onClick}>\n          <span className=\"aui-icon aui-icon-small aui-iconfont-add-small\"></span>\n          <span className=\"room-name\">{CommonStrings.buttons.create_room}</span>\n        </a>\n      </li>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/create_room_nav_item.js\n **/","import UnreadBadge from './unread_badge';\nimport Icon from \"components/common/icon/icon\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport RooomsNavItemMixin from './mixins/rooms_nav_item_mixin';\nimport cx from 'classnames';\n\nexport default React.createClass({\n\n  displayName: \"RoomsNavItemRoom\",\n\n  mixins: [PureRenderMixin, RooomsNavItemMixin],\n\n  _getUnreadBadge: function () {\n    return <UnreadBadge unreadCount={this.props.unreadCount} hasMention={this.props.hasMention} isUpdating={this.props.isUpdating} />;\n  },\n\n  render: function() {\n    var hasBadge = (this.props.unreadCount > 0 && !this.props.active),\n        unreadBadge = (hasBadge) ? this._getUnreadBadge() : false,\n        classes = cx({\n          'hc-tab': true,\n          'aui-nav-selected': this.props.active,\n          'hc-has-badge': hasBadge,\n          'hc-room': true\n        });\n\n    return (\n      <li ref=\"nav_item\" draggable=\"true\" className={classes} onDragStart={this._onDragStart} onDragEnd={this._onDragEnd} data-jid={this.props.jid}>\n        <a ref=\"link\" className=\"aui-nav-item\" onClick={this._onSelectTab} aria-label={this.props.name} data-tipsify-ignore>\n          {this.props.privacy ? <span className={\"aui-icon hipchat-icon-small icon-\" + this.props.privacy}></span> :\n            <Icon classes={{\"aui-icon\": true, \"hipchat-icon-small\": true}} iconName=\"dot\" />}\n          <span className=\"room-name\">{this.props.name}</span>\n          {unreadBadge}\n        </a>\n        <a ref=\"close_link\" className=\"hc-tab-close\" onClick={this._onCloseTab}>\n          <span className=\"aui-icon hipchat-icon-xsmall hc-close-icon icon-close\"/>\n        </a>\n      </li>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/rooms_nav_item_room.js\n **/","import RoomNavStore from 'stores/rooms_nav_store';\nimport utils from 'helpers/utils';\nimport SidebarStrings from 'strings/sidebar_strings';\nimport RoomsNavActions from 'actions/room_nav_actions';\nimport cx from 'classnames';\n\n//This constant describes vertical area size, where scroll starts while object dragging to box edge\nconst DRAG_SCROLL_THRESHOLD = 20;\n\n//This constant is a scroll value for scroll while dragging.\nconst DRAG_SCROLL_VALUE = 12;\n\nfunction isBelow(el, boundary) {\n  // offsetHeight coefficient controls what percentage of the nav item must be visible\n  // for the unread scroller to be considered \"below\" it\n  return (el.offsetTop + el.offsetHeight * 0.5) > boundary;\n}\n\nfunction isAbove(el, boundary) {\n  // offsetHeight coefficient controls what percentage of the nav item must be visible\n  // for the unread scroller to be considered \"above\" it\n  return (el.offsetTop + el.offsetHeight * 0.5) < boundary;\n}\n\nexport default React.createClass({\n\n  displayName: 'UnreadScroller',\n\n  getInitialState() {\n    return {\n      hideTop: true,\n      hideBottom: true,\n      topMention: false,\n      bottomMention: false\n    };\n  },\n\n  componentWillMount() {\n    this._throttledOnChange = _.throttle(this._onChange, 100, {\n      trailing: true,\n      leading: true\n    });\n    this._tabsAbove = [];\n    this._tabsBelow = [];\n    RoomNavStore.on('change', this._throttledOnChange);\n  },\n\n  componentWillUnmount() {\n    this._throttledOnChange.cancel();\n    RoomNavStore.off('change', this._throttledOnChange);\n  },\n\n  render() {\n    var topClass = cx({\n      'hidden': this.state.hideTop,\n      'has-mention': this.state.topMention\n    });\n    var bottomClass = cx({\n      'hidden': this.state.hideBottom,\n      'has-mention': this.state.bottomMention\n    });\n    let autoScrollWhileDragBugPresent = utils.browser.is.firefox() || utils.browser.is.safari() || utils.browser.is.ie();\n    autoScrollWhileDragBugPresent = autoScrollWhileDragBugPresent || utils.browser.family() === \"unknown\";\n    let dragOverHandler = autoScrollWhileDragBugPresent ? this._dragOver : null;\n    return (\n      <nav className=\"aui-navgroup aui-navgroup-vertical hc-sidebar hc-sidebar-scroll\" ref=\"target\" onScroll={this._throttledOnChange} onDragOver={ dragOverHandler }>\n        <div className={'hc-unread-scroller hc-unread-scroller-top ' + topClass}>\n          <a href=\"#\" onClick={this._scrollUpToUnread}><span className=\"aui-icon aui-icon-small aui-iconfont-arrows-up\">{SidebarStrings.scroll_up_to_unread}</span></a>\n        </div>\n\n        {this.props.children}\n\n        <div className={'hc-unread-scroller hc-unread-scroller-bottom ' + bottomClass}>\n          <a href=\"#\" onClick={this._scrollDownToUnread}><span className=\"aui-icon aui-icon-small aui-iconfont-arrows-down\">{SidebarStrings.scroll_down_to_unread}</span></a>\n        </div>\n      </nav>\n    );\n  },\n\n  _onChange() {\n    this.setState(this._getState());\n  },\n\n  _getState() {\n    var node = ReactDOM.findDOMNode(this.refs.target);\n    var tabs = $('.hc-badge').closest('.hc-tab');\n    this._tabsAbove = tabs.filter((idx,el) => {\n      return isAbove(el, node.scrollTop);\n    });\n    this._tabsBelow = tabs.filter((idx,el) => {\n      return isBelow(el, node.scrollTop + node.offsetHeight);\n    });\n    return {\n      hideTop: !this._tabsAbove.length,\n      hideBottom: !this._tabsBelow.length,\n      topMention: $(this._tabsAbove).find('.hc-mention').length,\n      bottomMention: $(this._tabsBelow).find('.hc-mention').length\n    };\n  },\n\n  _dragOver: function (evt) {\n    let isScrollTopNeed = evt.currentTarget.scrollTop > 0;\n    let isScrollBottomNeed = evt.currentTarget.scrollHeight - evt.currentTarget.scrollTop - evt.currentTarget.clientHeight > 0;\n    let crect = evt.currentTarget.getBoundingClientRect();\n    let clientY = evt.clientY - crect.top;\n    if (isScrollTopNeed && clientY <= DRAG_SCROLL_THRESHOLD) {\n      evt.currentTarget.scrollTop -= DRAG_SCROLL_VALUE;\n    }\n    if (isScrollBottomNeed && (evt.currentTarget.clientHeight - clientY) <= DRAG_SCROLL_THRESHOLD) {\n      evt.currentTarget.scrollTop += DRAG_SCROLL_VALUE;\n    }\n  },\n\n\n  _scrollUpToUnread(evt) {\n    evt.preventDefault();\n    this.setState(this._getState());\n    if (this._tabsAbove.length > 0) {\n      let tab = this._tabsAbove.get(this._tabsAbove.length - 1),\n          jid = $(tab).data('jid'),\n          type = utils.jid.is_private_chat(jid) ? 'chat' : 'groupchat';\n      utils.scrollIntoViewIfNeeded(tab, ReactDOM.findDOMNode(this.refs.target));\n      RoomsNavActions.select(jid, type);\n    }\n  },\n\n  _scrollDownToUnread(evt) {\n    evt.preventDefault();\n    this.setState(this._getState());\n    if (this._tabsBelow.length > 0) {\n      let tab = this._tabsBelow.get(0),\n          jid = $(tab).data('jid'),\n          type = utils.jid.is_private_chat(jid) ? 'chat' : 'groupchat';\n      utils.scrollIntoViewIfNeeded(tab, ReactDOM.findDOMNode(this.refs.target));\n      RoomsNavActions.select(jid, type);\n    }\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/left_sidebar/unread_scroller.js\n **/","export default {\n  scroll_up_to_unread: `Scroll up to unread`,\n  scroll_down_to_unread: `Scroll down to unread`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/sidebar_strings.js\n **/","import Lobby from 'components/lobby/lobby';\nimport SearchResults from 'components/search/search_results';\nimport RightSidebar from \"components/right_sidebar/sidebar\";\nimport ChatHeader from 'components/chat_header/chat_header';\nimport ChatPanel from 'components/chat_window/chat_panel';\nimport ChatInputBox from 'components/chat_input/chat_input_box';\nimport ResizeOverlay from 'components/common/overlays/resize-overlay';\nimport utils from 'helpers/utils';\nimport LayoutStore from 'stores/layout_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport LayoutActions from 'actions/layout_actions';\nimport appConfig from 'config/app_config';\nimport cx from 'classnames';\n\nfunction getState(){\n  var active_chat = LayoutStore.get(\"active_chat\");\n  return {\n    active_chat: active_chat,\n    chat_type: utils.room.detect_chat_type(active_chat),\n    rightChatSidebarVisibility: PreferencesStore.shouldShowChatSidebar(),\n    rightGroupChatSidebarVisibility: PreferencesStore.shouldShowGroupChatSidebar(),\n    rightColumnWidth: PreferencesStore.getRightColumnWidth(),\n    search_opened: LayoutStore.get('search_opened'),\n    is_resizing: false\n  };\n}\n\nexport default React.createClass({\n\n  displayName: \"MainColumn\",\n\n  shouldComponentUpdate: function(nextProps, nextState) {\n    return !_.isEqual(nextState, this.state);\n  },\n\n  getInitialState: getState,\n\n  componentDidMount: function(){\n    PreferencesStore.on(['change:showChatSidebar', 'change:showGroupChatSidebar', 'change:rightColumnWidth'], this._onChange);\n    LayoutStore.on(['change:active_chat', 'change:search_opened'], this._onChange);\n    if (utils.jid.is_chat(this.state.active_chat)) {\n      this._resizeColumns(this.state.rightColumnWidth);\n    }\n  },\n\n  componentDidUpdate: function() {\n    if (utils.jid.is_chat(this.state.active_chat)) {\n      this._resizeColumns(this.state.rightColumnWidth);\n    }\n  },\n\n  componentWillUnmount: function(){\n    PreferencesStore.off(['change:showChatSidebar', 'change:showGroupChatSidebar', 'change:rightColumnWidth'], this._onChange);\n    LayoutStore.off(['change:active_chat', 'change:search_opened'], this._onChange);\n  },\n\n  _getRightSidebar: function () {\n    return (\n      <div className=\"hc-right-sidebar-col\">\n        <RightSidebar is_guest={this.props.is_guest} />\n        <ResizeOverlay show_overlay={this.state.is_resizing} />\n        <div className=\"resize-handle\" onMouseDown={this._onResizeStart}></div>\n      </div>\n    );\n  },\n\n  render: function () {\n    var panel,\n        chatClasses = cx({\n          'hc-rooms-container': true,\n          'hidden': !utils.jid.is_chat(this.state.active_chat)\n        }),\n        search_active = utils.jid.is_search(this.state.active_chat) && !this.props.is_guest,\n        rightSidebar = (this._showRightSidebar()) ? this._getRightSidebar() : false;\n\n    if (utils.jid.is_lobby(this.state.active_chat) && !this.props.is_guest) {\n      panel = <Lobby />;\n    } else {\n      panel = (\n        <div className={chatClasses} data-skate-ignore>\n          <div className=\"hc-chat-panel-header-container\">\n            <ChatHeader is_guest={this.props.is_guest} />\n          </div>\n          <div className=\"hc-chat-panel-container\">\n            <div className=\"hc-chat-panel-left-column\">\n              <ChatPanel is_guest={this.props.is_guest} />\n              <ChatInputBox is_guest={this.props.is_guest} />\n            </div>\n            <div className=\"hc-chat-panel-right-column\" ref=\"right_column\">\n              {rightSidebar}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"hc-main-col\">\n        {this.state.search_opened ? <SearchResults visible={search_active} /> : false }\n        {search_active ? false : panel}\n      </div>\n    );\n  },\n\n  _showRightSidebar: function () {\n    if (this.state.chat_type === \"chat\") {\n      return PreferencesStore.shouldShowChatSidebar();\n    } else if (this.state.chat_type === \"groupchat\") {\n      return PreferencesStore.shouldShowGroupChatSidebar();\n    }\n  },\n\n  _onChange: function(){\n    this.setState(getState());\n  },\n\n  _resizeColumns: function(width) {\n    width = (this._showRightSidebar()) ? `${width}px` : '0px';\n    this.refs.right_column.style.width = width;\n  },\n\n  _onResizeStart: function(e) {\n    e.preventDefault();\n    this.beginX = e.pageX;\n    this.beginWidth = this.state.rightColumnWidth;\n    document.addEventListener('mouseup', this._onResizeEnd);\n    document.addEventListener('mousemove', this._onHandleDrag);\n    LayoutActions.setRightColumnWidthIsChanging(true);\n\n    this.setState({\n      is_resizing: true\n    });\n  },\n\n  _onHandleDrag(e) {\n    var diff = e.pageX - this.beginX;\n    if (this.beginWidth - diff >= 0 && this.beginWidth - diff <= appConfig.column_width_limits['right'].max) {\n      var width = this.beginWidth - diff;\n      this._resizeColumns(width);\n      this.setState({\n        rightColumnWidth: width\n      });\n    }\n  },\n\n  _onResizeEnd: function(e) {\n    e.preventDefault();\n    document.removeEventListener('mouseup', this._onResizeEnd);\n    document.removeEventListener('mousemove', this._onHandleDrag);\n\n    // if you've resized the right sidebar beyond the width limit then hide it\n    if (ReactDOM.findDOMNode(this.refs.right_column).offsetWidth <= appConfig.column_width_limits['right'].min) {\n      var visibility = false;\n      if (this.state.chat_type === \"chat\") {\n        LayoutActions.setRightChatSidebarVisibility(visibility);\n      } else if (this.state.chat_type === \"groupchat\") {\n        LayoutActions.setRightGroupChatSidebarVisibility(visibility);\n      }\n      LayoutActions.saveRightColumnWidth(this.beginWidth);\n    } else {\n      LayoutActions.saveRightColumnWidth(this.state.rightColumnWidth);\n    }\n    LayoutActions.setRightColumnWidthIsChanging(false);\n\n    this.setState({\n      is_resizing: false\n    });\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/main_column/main_col.js\n **/","import LobbyStore from 'stores/lobby_store';\nimport ConfigStore from 'stores/configuration_store';\nimport PermissionsStore from 'stores/permissions_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport LobbyActions from 'actions/lobby_actions';\nimport EmptyState from './empty_state';\nimport EmptySearchState from './empty_search_state';\nimport strings from 'strings/common_strings';\nimport utils from 'helpers/utils';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport DialogActions from 'actions/dialog_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport cx from 'classnames';\nimport LobbyItem from './lobby_item';\nimport LobbyMessage from './lobby_message';\nimport AnalyticsKeys from 'keys/analytics_keys';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: \"Lobby\",\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  componentDidMount: function () {\n    this.debouncedFilter = _.debounce(this._debouncableFilter, 200);\n    ConfigStore.on('change', this._onChange);\n    LobbyStore.on('change', this._onChange);\n    PermissionsStore.on('change', this._onChange);\n    AppDispatcher.register('new-active-chat', this._roomSelected);\n    LobbyActions.lobbyMounted();\n    LobbyActions.resetSelectedItem();\n    this._focusInput();\n    this.throttledSetScrollPosition = _.throttle(this._setScrollPosition, 100, {leading: false, trailing: true});\n  },\n\n  componentWillUnmount: function () {\n    ConfigStore.off('change', this._onChange);\n    LobbyStore.off('change', this._onChange);\n    PermissionsStore.off('change', this._onChange);\n    AppDispatcher.unregister('new-active-chat', this._roomSelected);\n    this.throttledSetScrollPosition.cancel();\n  },\n\n  _onKeyDown: function(evt){\n\n    if (this.state.dialog_visible) {\n      return;\n    }\n\n    if (evt.keyCode === utils.keyCode.UpArrow || evt.keyCode === utils.keyCode.DownArrow){\n\n      evt.preventDefault();\n      mousePosition.useLatest();\n\n      if (!this.state.rows.length){\n        return;\n      }\n\n      if (evt.keyCode === utils.keyCode.UpArrow && this.state.selected_item > 0){\n        LobbyActions.selectedPrevItem();\n      }\n\n      if (evt.keyCode === utils.keyCode.DownArrow && this.state.selected_item < this.state.rows.length - 1){\n        LobbyActions.selectedNextItem();\n      }\n\n      this.throttledSetScrollPosition();\n\n    } else if (evt.keyCode === utils.keyCode.Enter) {\n\n      this._openChat(evt);\n\n    } else if (evt.keyCode === utils.keyCode.Esc) {\n\n      this._clearInput();\n    }\n  },\n\n  _setScrollPosition: function(){\n\n    var container = ReactDOM.findDOMNode(this.refs.scrollable),\n        rowHeight = document.getElementsByClassName('hc-lobby-list-item')[0].offsetHeight;\n\n    var start = Math.ceil(container.scrollTop / rowHeight);\n    var end = Math.floor((container.offsetHeight + container.scrollTop) / rowHeight);\n\n    if (this.state.selected_item < start || this.state.selected_item > end - 1){\n        let selected_item = container.querySelector('.hc-lobby-list-item.selected');\n        if (!selected_item){\n          selected_item = container.querySelector('.hc-lobby-list-item:last-child');\n        }\n        utils.scrollIntoViewIfNeeded(selected_item, container, false);\n    }\n  },\n\n  renderItem(index, key){\n    let item = this.state.rows[index];\n    return <LobbyItem\n              key={item.jid}\n              jid={item.jid}\n              name={item.name}\n              user_id={item.id}\n              mention_name={item.mention_name}\n              privacy={item.privacy}\n              type={utils.room.detect_chat_type(item.jid)}\n              name_match_markup={item.name_match_markup}\n              mention_match_markup={item.mention_match_markup}\n              item_index={index}\n              selected={this.state.selected_item === index}\n              photo_url={item.photo_url}\n              should_animate_avatar={this.state.should_animate_avatar}\n              presence_show={item.presence ? item.presence.show : 'unknown'} />;\n  },\n\n  render: function () {\n\n    var container_class = cx({\n      'filtered-lobby-content': !(this.state.filter.scope === 'all' && this.state.filter.query === ''),\n      'hc-lobby-panel': true,\n      'hc-lobby-panel-content': true\n    });\n\n    var content;\n\n    if (_.isEmpty(this.state.rows)){\n\n      content = this.state.input_text ? <EmptySearchState inviteAction={this._inviteYourTeam}\n                                                          userIsAdmin={this.state.userIsAdmin}\n                                                          inviteUrl={this.state.inviteUrl}\n                                                          inputText={this.state.input_text}\n                                                          webServer={this.state.webServer}/>\n                                      : <EmptyState />;\n    } else {\n\n      content = <ReactList\n                  itemRenderer={this.renderItem}\n                  length={this.state.rows.length}\n                  selected={this.state.selected_item}\n                  filtered_time={this.state.filtered_time}\n                  threshold={10}\n                  pageSize={20}\n                  type='simple' />;\n    }\n\n    return (\n      <div className=\"hc-rooms-container\" tabIndex=\"1\" onKeyDown={this._onKeyDown}>\n        <header className=\"aui-page-header lobby-header\">\n            <div className=\"aui-page-header-inner\">\n                <div className=\"aui-page-header-main hc-lobby-search-content\">\n                  <form className=\"aui hc-filter-form\" onSubmit={this._onSubmit}>\n                    <label className=\"assistive\" htmlFor=\"rosterfilter\">{strings.filter}</label>\n                    <input ref=\"lobbySearchInput\" type=\"text\" placeholder={strings.filter} className=\"text hc-filter long-field mousetrap\" onChange={this._onInputChange} value={this.state.input_text}/>\n                  </form>\n                </div>\n                <div className=\"aui-page-header-actions\">\n                    <div className=\"aui-buttons\">\n                        <button className={\"aui-button aui-button-light \" + (this.state.filter.scope === \"all\" ? \"active\" : \"\")} onClick={this._onFilter.bind(null,'all')}>{strings.all}</button>\n                        <button className={\"aui-button aui-button-light \" + (this.state.filter.scope === \"rooms\" ? \"active\" : \"\")} onClick={this._onFilter.bind(null,'rooms')}>{strings.rooms}</button>\n                        <button className={\"aui-button aui-button-light \" + (this.state.filter.scope === \"people\" ? \"active\" : \"\")} onClick={this._onFilter.bind(null,'people')}>{strings.people}</button>\n                    </div>\n                    { this._getCreateRoomButton() }\n                    { this._getInviteTeamButton() }\n                </div>\n            </div>\n        </header>\n        <div className={container_class} ref=\"scrollable\">\n          {content}\n        </div>\n        {this._getLobbyMessage()}\n      </div>\n    );\n  },\n\n  _getLobbyMessage(){\n    if (!this.state.isBTF && this.state.lobbyMessageEnabled){\n      return <LobbyMessage webServer={this.state.webServer} theme={this.state.theme} />;\n    }\n  },\n\n  _canCreateRoom(){\n    return this.state.can_create_room;\n  },\n\n  _canInviteTeam(){\n    return this.state.userIsAdmin || this.state.inviteUrl;\n  },\n\n  _getCreateRoomButton(){\n    return this._canCreateRoom() ? (\n      <div className=\"aui-buttons\">\n         <button onClick={this._onCreateRoom} className=\"aui-button aui-button-light\" id=\"create-room-button\">{strings.buttons.create_room}</button>\n       </div>\n    ) : null;\n  },\n\n  _getInviteTeamButton(){\n    return this._canInviteTeam() ? (\n      <div className=\"aui-buttons\">\n       <button ref=\"invite_team_button\" onClick={this._inviteYourTeam} className=\"aui-button aui-button-light aui-inline-dialog-trigger\" id=\"invite-team-button\">{strings.buttons.invite_team}</button>\n     </div>\n    ) : null;\n  },\n\n  _getState: function () {\n    return {\n      rows: LobbyStore.get('filtered'),\n      filter: LobbyStore.get('filter'),\n      filtered_time: LobbyStore.get('filtered_time'),\n      userIsAdmin: LobbyStore.get('user_is_admin'),\n      inviteUrl: LobbyStore.get('invite_url'),\n      webServer: LobbyStore.get('web_server'),\n      isBTF: _.get(ConfigStore.get('feature_flags'), 'btf', false),\n      lobbyMessageEnabled: _.get(ConfigStore.get('feature_flags'), 'web_client_lobby_message_enabled', false),\n      input_text: LobbyStore.get('input_text'),\n      selected_item: LobbyStore.get('selected_item'),\n      dialog_visible: LobbyStore.get('dialog_visible'),\n      theme: LobbyStore.get('theme'),\n      can_create_room: PermissionsStore.canCreateRoom(),\n      should_animate_avatar: PreferencesStore.shouldAnimateAvatars()\n    };\n  },\n\n  _openChat(e) {\n    var key = _.keys(this.state.rows)[this.state.selected_item];\n    if (key) {\n      e.preventDefault();\n      var data = _.cloneDeep(this.state.rows[key]);\n      data.query = this.state.filter.query;\n      LobbyActions.openChat(data);\n      LobbyActions.resetFilter();\n    }\n  },\n\n  _clearInput(){\n    if (this.state.input_text){\n      this._setInputText(\"\");\n    }\n  },\n\n  _debouncableFilter: function(){\n    LobbyActions.applyFilter({\n      query: this.state.input_text,\n      scope: this.state.filter.scope\n    });\n  },\n\n  _onInputChange: function(evt) {\n    this._setInputText(evt.target.value);\n  },\n\n  _setInputText(text){\n    LobbyActions.setInputText(text);\n    this.debouncedFilter();\n    ReactDOM.findDOMNode(this.refs.scrollable).scrollTop = 0;\n  },\n\n  _onChange: function () {\n    this.setState(this._getState());\n  },\n\n  _onFilter: function (scope) {\n    LobbyActions.applyFilter({\n      query: this.state.input_text,\n      scope: scope\n    });\n    LobbyActions.resetSelectedItem();\n    ReactDOM.findDOMNode(this.refs.scrollable).scrollTop = 0;\n  },\n\n  _onCreateRoom: function (e) {\n    e.preventDefault();\n    LobbyActions.showCreateRoomDialog();\n  },\n\n  _onSubmit: function (e) {\n    e.preventDefault();\n  },\n\n  _roomSelected: function (data) {\n    if (utils.jid.is_lobby(data.jid)) {\n      this._focusInput();\n    }\n  },\n\n  _focusInput: function () {\n    if (this.refs.lobbySearchInput !== document.activeElement) {\n      try {\n        this.refs.lobbySearchInput.select();\n      } catch (e) {\n        this.refs.lobbySearchInput.focus();\n      }\n    }\n\n  },\n\n  _inviteYourTeam: function(evt) {\n    evt.preventDefault();\n    DialogActions.showInviteTeammatesDialog({type: AnalyticsKeys.LOBBY, default_text: this.state.input_text});\n    AnalyticsActions.inviteTeamClickedEvent(\"lobby\");\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/lobby/lobby.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppStore from 'stores/application_store';\nimport AppConfig from 'config/app_config';\nimport Store from 'lib/core/store';\nimport { chatSearch } from 'helpers/chat_search';\nimport utils from 'helpers/utils';\n\nclass LobbyStore extends Store {\n\n  constructor() {\n    super();\n    this.local = {\n      all: [],\n      active: [],\n      forceUpdate: false\n    };\n  }\n\n  getDefaults() {\n    return {\n      is_active: false,\n      filtered: [],\n      input_text: '',\n      filter: {\n        scope: \"all\",\n        query: \"\"\n      },\n      user_is_admin: false,\n      invite_url: false,\n      web_server: AppConfig.default_web_server,\n      selected_item: 0,\n      dialog_visible: false,\n      filtered_time: false,\n      theme: 'light'\n    };\n  }\n\n  registerListeners() {\n\n    AppDispatcher.registerOnce({\n      'hc-init': (data) => {\n        this.handleConfig(data);\n      }\n    });\n\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.handleConfig(config);\n      },\n      'updated:roster': () => {\n        this.populateAll();\n      },\n      'updated:active_chat': (jid) => {\n        this.handleNewActiveChat(jid);\n      },\n      'updated:allRooms': () => {\n        this.handleAllRoomsUpdate();\n      },\n      'updated:activeRooms': (rooms) => {\n        this.handleActiveRoomsUpdate(rooms);\n      },\n      'updated:preferences': (prefs) => {\n        if (prefs.theme !== this.data.theme) {\n          this.set('theme', prefs.theme);\n        }\n      },\n      'room-deleted': (room) => {\n        this.handleRoomDeleted(room.jid);\n      },\n      'filter-lobby': (filter) => {\n        this.handleFilter(true, filter);\n      },\n      'set-lobby-filter-text': (data) => {\n        this.set('input_text', data.text);\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'lobby-reset-selected-item': () => {\n        this.set('selected_item', 0);\n      },\n      'lobby-item-hover': (data) => {\n        this.set({\n          selected_item: data.index\n        });\n      },\n      'lobby-select-next-item': () => {\n        this._selectNextItem();\n      },\n      'lobby-select-prev-item': () => {\n        this._selectPrevItem();\n      },\n      'show-modal-dialog': () => {\n        this.set('dialog_visible', true);\n      },\n      'hide-modal-dialog': () => {\n        this.set('dialog_visible', false);\n      }\n    });\n  }\n\n  handleConfig(config) {\n    this.set({\n      user_is_admin: _.get(config, \"is_admin\", false),\n      invite_url: _.get(config, \"invite_url\", false)\n    });\n  }\n\n  handleNewActiveChat(jid) {\n    this.data.is_active = utils.jid.is_lobby(jid);\n    if (this.data.is_active) {\n      this.populateAll();\n      this.handleFilter();\n    } else {\n      this.clearAll();\n    }\n  }\n\n  handleAllRoomsUpdate() {\n    if (this.data.is_active) {\n      this.populateAll();\n      this.handleFilter();\n    }\n  }\n\n  handleActiveRoomsUpdate(rooms) {\n    let updated = _.keys(rooms);\n    let forceUpdate = !_.isEqual(this.local.active, updated);\n    this.local.active = updated;\n    if (this.data.is_active) {\n      this.handleFilter(forceUpdate);\n    }\n  }\n\n  clearAll() {\n    this.local.all = [];\n  }\n\n  populateAll() {\n\n    if (!this.data.is_active) {\n      return;\n    }\n\n    let roster = this.removeGuests(AppStore.get(\"roster\")),\n        rooms = _.toArray(AppStore.get(\"allRooms\")),\n        all = rooms.concat(roster),\n        updated = this.removeArchivedAndEmpty(all);\n\n    this.local.forceUpdate = !_.isEqual(this.local.all, updated);\n    this.local.all = updated;\n  }\n\n  handleFilter(update = false, filter = {}) {\n    var chats_have_changed = update || this.local.forceUpdate,\n        chats = (!chats_have_changed && this.data.filtered) ? this.data.filtered : this.local.all,\n        scope = filter.scope || this.data.filter.scope,\n        is_scoped = scope === 'rooms' || scope === 'people',\n        query = _.isString(filter.query) ? filter.query : this.data.filter.query;\n\n    if (is_scoped && (chats_have_changed || filter.scope)) {\n      chats = _.filter(chats, function (item) {\n        if (scope === 'rooms') {\n          return utils.jid.is_room(item.jid);\n        }\n        if (scope === 'people') {\n          return utils.jid.is_private_chat(item.jid);\n        }\n        return false;\n      });\n    }\n\n    if (chats_have_changed || _.isString(filter.query)) {\n      chats = chatSearch(chats, query, this.local.active);\n    }\n\n    this.local.forceUpdate = false;\n\n    this.set({\n      filtered: chats,\n      filter: {\n        scope: scope || 'all',\n        query: query || ''\n      },\n      selected_item: chats_have_changed ? 0 : this.data.selected_item,\n      filtered_time: (new Date).getTime()\n    });\n  }\n\n  removeGuests(roster) {\n    return _.reject(roster, utils.user.is_guest);\n  }\n\n  removeArchivedAndEmpty(items){\n    return _.reject(items, (item) => {\n      return !item || item.name === '' || utils.room.is_archived(item);\n    });\n  }\n\n  handleRoomDeleted(jid) {\n    if (this.data.is_active) {\n      this.local.all = _.reject(this.data.all, {jid: jid});\n      this.local.forceUpdate = true;\n      this.handleFilter();\n    }\n  }\n\n  _selectNextItem(){\n    this.set('selected_item', this.data.selected_item + 1);\n  }\n\n  _selectPrevItem(){\n    this.set('selected_item', this.data.selected_item - 1);\n  }\n\n}\n\nmodule.exports = new LobbyStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/lobby_store.js\n **/","import EmptyStrings from 'strings/empty_state_strings';\n\nexport default React.createClass({\n\n  displayName: \"LobbyEmptyState\",\n\n  shouldComponentUpdate(){\n    return false;\n  },\n\n  render(){\n    return (\n      <div className=\"empty empty-lobby\">\n        <div className=\"empty-state\">\n          <div className=\"empty-lobby-state-img\"></div>\n          <div className=\"empty-state-msg\">\n            <p className=\"empty-header\">\n              {EmptyStrings.empty_lobby_title}\n            </p>\n            <p className=\"empty-msg\">\n              {EmptyStrings.empty_lobby_message}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/lobby/empty_state.js\n **/","import CommonStrings from 'strings/common_strings';\nimport EmptyStrings from 'strings/empty_state_strings';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"LobbyEmptySearchState\",\n\n  mixin: [PureRenderMixin],\n\n  getDefaultProps: function() {\n    return {\n      inputText: \"\"\n    };\n  },\n\n  componentDidMount: function () {\n    AnalyticsActions.lobbyNoResults(this.props.inputText);\n  },\n\n  _inviteLink: function(){\n\n    if (this.props.userIsAdmin || this.props.inviteUrl){\n\n      var link = <a target=\"_blank\" className=\"aui-inline-dialog-trigger\" onClick={this.props.inviteAction} >{CommonStrings.buttons.invite_team_in_lobby}</a>;\n\n      if (!this.props.inviteUrl) {\n        link = <a target=\"_blank\" className=\"aui-inline-dialog-trigger\" href={`https://${this.props.webServer}/admin`}>{CommonStrings.buttons.invite_team_in_lobby}</a>;\n      }\n\n      return <p className=\"empty-msg\">{link}</p>;\n    }\n  },\n\n  render: function(){\n    return (\n      <div className=\"empty empty-lobby empty-search-lobby\">\n        <div className=\"empty-state\">\n          <div className=\"empty-search-lobby-state-img\"></div>\n          <div className=\"empty-state-msg\">\n            <p className=\"empty-header\">\n              {EmptyStrings.empty_search_lobby}\n            </p>\n            {this._inviteLink()}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/lobby/empty_search_state.js\n **/","import PersonAvatar from 'components/common/avatars/person_avatar';\nimport LobbyActions from 'actions/lobby_actions';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: 'LobbyItem',\n\n  mixins: [PureRenderMixin],\n\n  _onMouseEnter: function (evt) {\n    if (mousePosition.hasChanged(evt)) {\n      LobbyActions.itemHovered({\n        index: this.props.item_index\n      });\n    }\n  },\n\n  _onOpenChat: function () {\n    LobbyActions.openChat({\n      jid: this.props.jid,\n      name: this.props.name,\n      type: this.props.type\n    });\n  },\n\n  _getIcon: function () {\n    let icon;\n\n    if (this.props.type === 'groupchat') {\n      icon = <span className={'aui-icon hipchat-icon-small icon-' + this.props.privacy}></span>;\n    } else {\n      icon = <PersonAvatar avatar_url={this.props.photo_url}\n                        presence={this.props.presence_show}\n                        size='small'\n                        uid={this.props.user_id}\n                        shouldAnimate={this.props.should_animate_avatar}\n                        active={true} />;\n    }\n\n    return icon;\n  },\n\n  _getMention: function () {\n    let mention = this.props.mention_match_markup || this.props.mention_name,\n        mention_markup = {__html: `@${mention}` };\n\n    return <span className='hc-lobby-list-mention-name' dangerouslySetInnerHTML={mention_markup} />;\n  },\n\n  render: function() {\n    let classes = cx({\n          'hc-lobby-list-item': true,\n          'selected': this.props.selected\n        }),\n        icon = this._getIcon(),\n        mention = this.props.mention_name ? this._getMention() : null;\n\n    return (\n      <div className={classes} onClick={this._onOpenChat} onMouseEnter={this._onMouseEnter}>\n        <div className='hc-lobby-list-icon'>\n          {icon}\n        </div>\n        <div className='hc-lobby-list-names'>\n          <span className={`hc-lobby-list-name ${this.props.type}`} dangerouslySetInnerHTML={{__html: this.props.name_match_markup || _.escape(this.props.name) }} />\n          {mention}\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/lobby/lobby_item.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport logger from 'helpers/logger';\n\nexport default React.createClass({\n\n  displayName: \"LobbyMessage\",\n\n  mixin: [PureRenderMixin],\n\n  propTypes: {\n    webServer: React.PropTypes.string.isRequired,\n    theme: React.PropTypes.string\n  },\n\n  getDefaultProps() {\n    return {\n      webServer: '',\n      theme: 'light'\n    };\n  },\n\n  componentDidMount() {\n    let $iframe = this._getIframe();\n    $iframe.hide();\n    $iframe.on('load', this._onIframeLoad);\n  },\n\n  componentWillUnmount(){\n    this._getIframe().off('load', this._onIframeLoad);\n  },\n\n  _getIframe(){\n    return $(ReactDOM.findDOMNode(this.refs.blog_info));\n  },\n\n  _getIframeBody() {\n    return _.get(this._getIframe().get(0), 'contentWindow.document.body');\n  },\n\n  _onIframeLoad(){\n\n    logger.type('blog-info-iframe').log('Iframe was loaded');\n\n    let $iframe = this._getIframe(),\n        contentCheck = $iframe.contents().has(\"#blog-info\").length;\n\n      if (contentCheck){\n\n        let $body = $(this._getIframeBody()),\n            hasContent = $body.children().length;\n\n        if (hasContent){\n          $iframe.show();\n          let height = $iframe.contents().find(\"html\").outerHeight();\n          $iframe.height(height);\n          $body.find(\"a\").on(\"click\", this._handleIframeClick);\n          logger.type('blog-info-iframe').log('Iframe is shown with height:', height);\n        } else {\n          logger.type('blog-info-iframe').log('Iframe is hidden because content is not found');\n        }\n      } else {\n        logger.type('blog-info-iframe').log('Iframe is hidden because error occurred');\n      }\n  },\n\n  _handleIframeClick(e){\n\n    let $target = $(e.currentTarget),\n        href = $target.attr('href'),\n        analyticsEvent = $target.attr('analytics');\n\n    e.preventDefault();\n\n    if (href){\n      window.open(href, '_blank');\n      logger.type('blog-info-iframe').log('Link opened: ', href);\n    }\n\n    if (analyticsEvent){\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: analyticsEvent\n      });\n    }\n  },\n\n  render() {\n    return <iframe ref=\"blog_info\" id=\"blog-info-iframe\" src={`https://${this.props.webServer}/blog_info?theme=${this.props.theme}`}></iframe>;\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/lobby/lobby_message.js\n **/","import SearchStore from 'stores/search_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport ConfigStore from 'stores/configuration_store';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport cx from 'classnames';\nimport AppConfig from 'config/app_config';\nimport SearchActions from 'actions/search_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nconst cssVersion = (new Date()).getTime();\n\nexport default React.createClass({\n\n  displayName: \"SearchResults\",\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  _getState: function () {\n    return {\n      apiv1_token: ConfigStore.get(\"apiv1_token\"),\n      text: SearchStore.get(\"text\"),\n      jid: SearchStore.get(\"jid\"),\n      web_server: SearchStore.get(\"web_server\"),\n      active_chat: SearchStore.get('active_chat'),\n      theme: PreferencesStore.getTheme()\n    };\n  },\n\n  componentDidMount: function () {\n    SearchStore.on(['change:text', 'change:jid', 'change:web_server', 'change:active_chat'], this._onChange);\n    ConfigStore.on(['change:apiv1_token'], this._onChange);\n    PreferencesStore.on(['change:theme'], this._onChange);\n    this.previousSearchURL = this._getSearchUrl();\n    this._bindIframeLoad();\n  },\n\n  componentWillUnmount: function () {\n    SearchStore.off(['change:text', 'change:jid', 'change:web_server', 'change:active_chat'], this._onChange);\n    ConfigStore.off(['change:apiv1_token'], this._onChange);\n    PreferencesStore.off(['change:theme'], this._onChange);\n    this._unbindIframeLoad();\n  },\n\n  componentWillUpdate: function (nextProps, nextState) {\n    if (nextState.active_chat !== this.state.active_chat &&\n      utils.jid.is_search(this.state.active_chat) &&\n      !utils.jid.is_search(nextState.active_chat)){\n      $(this._getIframeBody()).find(\"#select2-drop-mask\").click();\n    }\n  },\n\n  componentDidUpdate: function (prevProps, prevState) {\n    if (prevState.text !== this.state.text ||\n        prevState.jid !== this.state.jid){\n      this._hideIframe();\n    }\n\n    if (prevState.apiv1_token !== this.state.apiv1_token){\n      // this delay is to ensure the native app has time to update the cookie\n      _.delay(() => {\n        $(this._getIframe()).attr('src', this.previousSearchURL);\n        $(this._getIframe()).show();\n      }, 1000);\n    }\n\n    if (prevState.theme !== this.state.theme) {\n      this._unbindIframeLoad();\n      this._bindIframeLoad();\n      this._reloadIframe();\n    }\n  },\n\n  _onChange: function () {\n    this.setState(this._getState());\n  },\n\n  _bindIframeLoad: function () {\n    this._getIframe().on(\"load\", this._onIframeLoad);\n  },\n\n  _unbindIframeLoad: function () {\n    this._getIframe().off(\"load\", this._onIframeLoad);\n  },\n\n  _reloadIframe: function () {\n    let location = _.get(this._getIframe().get(0), 'contentWindow.location');\n    if (location && typeof location.reload === 'function'){\n      location.reload(true);\n    }\n  },\n\n  _getIframe: function () {\n    return $(ReactDOM.findDOMNode(this.refs.search_results));\n  },\n\n  _getIframeHead: function () {\n    return _.get(this._getIframe().get(0), 'contentWindow.document.head');\n  },\n\n  _getIframeBody: function () {\n    return _.get(this._getIframe().get(0), 'contentWindow.document.body');\n  },\n\n  _onIframeLoad: function () {\n    let $body = $(this._getIframeBody()),\n        $iframe = this._getIframe();\n\n    // If our API V1 token is invalid the server redirects to the sign in page. Users shouldn't see this.\n    if (AppConfig.login_page_redirect_regex.test(_.get($iframe.get(0), 'contentWindow.location.pathname', ''))) {\n      return this._handleLoginRedirect();\n    }\n\n    this.previousSearchURL = _.get($iframe.get(0), 'contentWindow.location.href');\n\n    if (!$body.hasClass(\"embedded-search-page\")) {\n      $body.addClass(\"embedded-search-page\");\n    }\n\n    $body.find(\"form\").on(\"submit\", this._hideIframe);\n    $body.find(\"a\").on(\"click\", this._handleIframeClick);\n    $body.find(\"form [type=text]\").on(\"keydown\", (e) => {\n      if (e.keyCode === utils.keyCode.Esc){\n        $body.find(\"form [type=text]\").val(\"\");\n      } else if (e.keyCode === utils.keyCode.Enter){\n        AnalyticsActions.searchInputSubmitted($body.find(\"#chat-select\").val());\n      }\n    });\n\n    if (this.state.theme !== \"light\") {\n      let $head = $(this._getIframeHead()),\n          themeStyles = this._getThemeStyles();\n      $head.append(themeStyles);\n    }\n\n    $iframe.show();\n  },\n\n  _handleIframeClick: function (e) {\n    let $target = $(e.currentTarget),\n        href = $target.attr('href');\n    if ($target.attr(\"target\") !== \"_blank\" && !$target.parent().hasClass(\"file-meta\")\n        && $target.parents('.hc-chat-row').length\n        && !$target.parents('.hc-chat-time').length) {\n\n      // hide/show links\n      if (href.indexOf('javascript') === 0) {\n        e.preventDefault();\n      } else if (href) {\n        logger.type('search-results').log('Target contains external link, it will be opened in new window: ', href);\n        e.preventDefault();\n        window.open(href, '_blank');\n      } else {\n        this._hideIframe();\n      }\n    } else {\n      if (!href){\n        logger.type('search-results').log('Link is empty and it skipped.');\n        e.preventDefault();\n      }\n    }\n  },\n\n  _hideIframe: function () {\n    $(this._getIframe()).hide();\n  },\n\n  /**\n   * In the rare occurance that your API v1 token becomes invalid and user attempts to search\n   * we request a new token and reload the search page.\n   */\n  _handleLoginRedirect: function() {\n    this._hideIframe();\n    SearchActions.updateAPIV1Token();\n  },\n\n  _getThemeStyles: function () {\n    var url = `https://${this.state.web_server}/wc/${this.state.theme}.css?v=${cssVersion}`;\n    return `<link rel='stylesheet' href='${url}' type='text/css'>`;\n  },\n\n  _getSearchUrl: function () {\n    if (this.state.jid) {\n      var jid = this.state.jid,\n        url = `https://${this.state.web_server}/embedded/search?adg=true&q=${this.state.text}`;\n\n      if (utils.jid.is_chat(jid) && utils.jid.is_private_chat(jid)) {\n        url += '&t=uid-' + utils.jid.user_id(jid);\n      } else if (utils.jid.is_chat(jid) && utils.jid.is_room(jid)) {\n        url += '&r=' + utils.jid.room_name(jid);\n      }\n\n      return encodeURI(url);\n    }\n  },\n\n  render: function () {\n    var containerClasses = cx({\n          \"hc-rooms-container\": true,\n          \"hc-rooms-container-hidden\": !this.props.visible\n        }),\n        iframeStyles = {\n          display: (this.state.theme !== \"light\") ? 'none' : \"block\"\n        };\n\n    return (\n      <div className={containerClasses} >\n        <iframe ref=\"search_results\" id=\"search-container\" src={this._getSearchUrl()} style={iframeStyles} />\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/search/search_results.js\n **/","var AppDispatcher = require('dispatchers/app_dispatcher');\nvar AppActions = require('actions/app_actions');\nvar Store = require(\"lib/core/store\");\nvar utils = require('helpers/utils');\nvar AppConfig = require('config/app_config');\n\nclass SearchStore extends Store {\n\n  getDefaults() {\n    return {\n      jid: \"\",\n      text: \"\",\n      web_server: AppConfig.default_web_server,\n      url: \"\",\n      active_chat: \"\"\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      'search-history': (search) => {\n        this.handleSearch(search);\n      },\n      'search-history-externally': (search) => {\n        this.handleSearchExternally(search);\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'updated:active_chat': (active_chat) => {\n        this.set(\"active_chat\", active_chat);\n      }\n    });\n  }\n\n  handleSearch(search) {\n    this.set({\n      'jid': search.jid,\n      'text': search.text\n    });\n  }\n\n  handleSearchExternally(search) {\n    var jid = search.jid,\n      url = `https://${this.data.web_server}/search?q=${search.text}`;\n\n    if (jid && utils.jid.is_chat(jid) && utils.jid.is_private_chat(jid)) {\n      url += '&t=uid-' + utils.jid.user_id(jid);\n    } else if (jid && utils.jid.is_chat(jid) && utils.jid.is_room(jid)) {\n      url += '&r=' + utils.jid.room_name(jid);\n    }\n    url = encodeURI(url);\n    AppActions.openExternalWindow(url, '_blank');\n    this.set({\n      'url': url,\n      'jid': search.jid,\n      'text': search.text\n    });\n  }\n\n}\n\nmodule.exports = new SearchStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/search_store.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\n/**\n * SearchActions\n */\nexport default {\n\n  updateAPIV1Token() {\n    AppDispatcher.dispatch('apiv1-token-update-requested');\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/search_actions.js\n **/","import Roster from './roster';\nimport Files from './files';\nimport Spinner from 'components/common/spinner/spinner';\nimport Links from './links';\nimport Integrations from './integrations/integrations';\nimport RosterStore from 'stores/roster_store';\nimport PreferencesStore from \"stores/preferences_store\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nfunction getPanelState() {\n  let integrationsEnabled = RosterStore.get('web_client_integrations_enabled');\n    return {\n    groupchat_active_panel: PreferencesStore.getGroupChatActivePanel(),\n    chat_active_panel: PreferencesStore.getChatActivePanel(),\n    chat_type: RosterStore.get('chat_type'),\n    loading: RosterStore.get('loading') && !integrationsEnabled,\n    initialized: RosterStore.get('initialized'),\n    web_client_integrations: integrationsEnabled,\n    guest_url: RosterStore.get('guest_url'),\n    active_chat: RosterStore.get('active_chat')\n  };\n}\n\nexport default React.createClass({\n\n  displayName: \"RightSideBar\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function(){\n    return getPanelState();\n  },\n\n  componentDidMount: function() {\n    RosterStore.on('change', this._onChange);\n    PreferencesStore.on(['change'], this._onChange);\n  },\n\n  componentWillUnmount: function(){\n    RosterStore.off('change', this._onChange);\n    PreferencesStore.off(['change'], this._onChange);\n  },\n\n  _getActivePanel: function () {\n    var panel;\n    if (this.state.chat_type === \"chat\") {\n      switch(this.state.chat_active_panel) {\n        case \"files\":\n          panel = this._filesPanel();\n          break;\n        case \"links\":\n          panel = this._linksPanel();\n          break;\n        case \"integrations\":\n          if (this.state.web_client_integrations) {\n            panel = this._integrationsPanel();\n          }\n          break;\n      }\n    } else if (this.state.chat_type === \"groupchat\") {\n      switch(this.state.groupchat_active_panel) {\n        case \"roster\":\n          panel = this._rosterPanel();\n          break;\n        case \"files\":\n          panel = this._filesPanel();\n          break;\n        case \"links\":\n          panel = this._linksPanel();\n          break;\n        case \"integrations\":\n          if (this.state.web_client_integrations) {\n            panel = this._integrationsPanel();\n          }\n          break;\n      }\n    }\n    return panel;\n  },\n\n  _rosterPanel: function () {\n    return (\n      <Roster is_guest={this.props.is_guest}/>\n    );\n  },\n\n  _filesPanel: function () {\n    return (\n      <Files is_guest={this.props.is_guest}/>\n    );\n  },\n\n  _linksPanel: function () {\n    return (\n      <Links is_guest={this.props.is_guest} />\n    );\n  },\n\n  _integrationsPanel: function () {\n    return (\n      <Integrations/>\n    );\n  },\n\n  _onChange: function() {\n    this.setState(getPanelState());\n  },\n\n  _shouldHidePanelWhenLoading(){\n    return this.state.chat_active_panel !== \"files\" &&\n           this.state.chat_active_panel !== \"links\";\n  },\n\n  render: function(){\n    var panel = (this.state.loading && this._shouldHidePanelWhenLoading()) ? \"\" : this._getActivePanel();\n    return (\n      <div className=\"hc-roster-container\">\n        <Spinner spin={this.state.loading && this.state.initialized} zIndex={1} />\n        {panel}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/sidebar.js\n **/","import PersonHelper from 'helpers/person_helper';\nimport PersonAvatar from 'components/common/avatars/person_avatar';\nimport RosterEmptyState from './roster_empty_state';\nimport strings from 'strings/roster_panel_strings';\nimport utils from 'helpers/utils';\nimport RosterStore from 'stores/roster_store';\nimport PermissionsStore from 'stores/permissions_store';\nimport ConfigStore from 'stores/configuration_store';\nimport RightPanelActions from 'actions/right_panel_actions';\nimport DialogActions from 'actions/dialog_actions';\nimport SidebarActions from 'actions/sidebar_actions';\nimport cx from 'classnames';\nimport RoomSize from 'lib/enum/room_size';\nimport {roster_panel} from 'config/app_config';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RightSideBarRoster\",\n\n  propTypes: {\n    is_guest: React.PropTypes.bool.isRequired\n  },\n\n  getInitialState: function() {\n    return _.assign(this._getState(), {\n      selectedPerson: false\n    });\n  },\n\n  componentDidMount: function() {\n    var size = 0;\n\n    var members = _.get(this.state, \"participants.members\");\n    if (members){\n      size = members.length;\n    }\n\n    RosterStore.on(['change'], this._onChange);\n\n    var id = RosterStore.get('active_chat');\n    RightPanelActions.rosterMounted({id: id, size: size});\n  },\n\n  componentWillUnmount: function() {\n    RosterStore.off(['change'], this._onChange);\n  },\n\n  _getState: function() {\n    return {\n      can_view_guest_access: PermissionsStore.canViewGuestAccess(),\n      should_animate_gif_avatars: !ConfigStore.get('feature_flags').web_client_freeze_gifs,\n      active_chat_privacy: RosterStore.get('active_chat_privacy'),\n      admins: RosterStore.get('admins'),\n      owner: RosterStore.get('owner'),\n      participants: RosterStore.get('participants'),\n      users: RosterStore.get('users'),\n      current_user: RosterStore.get(\"current_user\"),\n      user_is_admin: RosterStore.get('user_is_admin'),\n      guest_url: RosterStore.get('guest_url'),\n      invite_url: RosterStore.get('invite_url'),\n      active_chat: RosterStore.get('active_chat'),\n      size: RosterStore.get('size'),\n      roster: RosterStore.getRoster()\n    };\n  },\n\n  _onChange: function() {\n    var newState = _.assign(this._getState(), {\n      selectedPerson: this.state.selectedPerson\n    });\n\n    if (this.isMounted()){\n      this.setState(newState);\n    }\n  },\n\n  _onClick: function(jid) {\n    this.setState({\n      selectedPerson: jid\n    });\n  },\n\n  _onDoubleClick: function (jid, name) {\n    if (_.find(this.state.participants.members, { jid }) && !this.props.is_guest) {\n      SidebarActions.openChat({ jid, name });\n    }\n  },\n\n  _showEmptyState: function () {\n    var current_user_jid = this.state.current_user.user_jid,\n        members = this.state.participants['members'],\n        guests = this.state.participants['guests'],\n        result;\n\n    if (members.length === 1 && !guests.length) {\n      result = _.find(members, {jid: current_user_jid});\n    } else if (guests.length === 1 && !members.length) {\n      result = _.find(guests, {jid: current_user_jid});\n    }\n    return (result) ? true : false;\n  },\n\n  _isAdmin: function (user) {\n    return utils.user.is_admin(this.state.admins, false, user);\n  },\n\n  _isOwner: function (user) {\n    var id = _.get(user, 'user_id') || _.get(user, 'id');\n    return Number(id) === Number(this.state.owner);\n  },\n\n  _hasMembersAndGuests: function () {\n    return _.size(this.state.participants['members']) && _.size(this.state.participants['guests']);\n  },\n\n  _getTooltip(user) {\n    return PersonHelper.get_user_tooltip({\n      name: user.name,\n      mention_name: user.mention_name,\n      is_admin: this._isAdmin(user),\n      is_owner: this._isOwner(user),\n      presence: user.presence\n    });\n  },\n\n  _renderItem: function(index, key) {\n    let item = this.state.roster[index],\n        style = {\n          'height': `${roster_panel.group_title_item_height}px`\n        };\n\n    if (item.group_title) {\n      return (\n        <li key={key} className=\"aui-nav-heading\" style={style}>\n          <div className=\"uppercase\">{strings[item.group_title]}</div>\n        </li>\n      );\n    } else if (item.letter) {\n      return (\n        <li key={key} className=\"aui-nav-heading\" style={style}>\n          <div className=\"uppercase\">{item.letter}</div>\n        </li>\n      );\n    }\n\n    return this._getPerson(item, key);\n  },\n\n  _getPerson(user, key) {\n    var presence = _.get(user, 'presence', {}),\n        tooltip = this._getTooltip(user),\n        linkClasses = cx({\n          'hc-roster-link': true,\n          'hc-roster-admin': this._isAdmin(user)\n        }),\n        rosterItemClasses = cx({\n          'hc-roster-item': true,\n          'aui-nav-selected': (this.state.selectedPerson === user.jid)\n        }),\n        style = {\n          height: 'auto'\n        },\n        id = user.id || utils.jid.user_id(user.jid);\n\n    if (this.state.size !== RoomSize.SMALL) {\n      style.height = `${roster_panel.person_item_height}px`;\n    }\n\n    return (\n      <li key={`user-${id}`}\n          className={rosterItemClasses}\n          data-status={presence.show}\n          onClick={this._onClick.bind(this, user.jid)}\n          onDoubleClick={this._onDoubleClick.bind(this, user.jid, user.name)}\n          style={style}>\n        <div className=\"aui-nav-item\">\n          <PersonAvatar avatar_url={user.photo_url}\n                        name={user.name}\n                        presence={presence.show}\n                        size={this._getAvatarSize()}\n                        shouldAnimate={this.state.should_animate_gif_avatars}\n                        uid={user.id}/>\n          <a className={linkClasses} aria-label={tooltip}>{user.name}</a>\n        </div>\n      </li>\n    );\n  },\n\n  _getItemSize: function(index) {\n    let item = this.state.roster[index];\n\n    if (item.group_title || item.letter) {\n      return roster_panel.group_title_item_height;\n    }\n    return roster_panel.person_item_height;\n  },\n\n  _getAvatarSize() {\n    if (this.state.size === RoomSize.SMALL) {\n      return 'small';\n    }\n    return 'xsmall';\n  },\n\n  _onClickQuickSwitcher() {\n    DialogActions.showQuickSwitcherDialog();\n  },\n\n  _getXLargeState() {\n    return <div className=\"hc-roster-xlarge-msg\">\n      {strings.xlarge_message} <a onClick={this._onClickQuickSwitcher}>{strings.quick_switcher}</a>.\n    </div>;\n  },\n\n  _getEmptyState() {\n    return (<RosterEmptyState room_privacy={this.state.active_chat_privacy}\n                               isAdmin={this._isAdmin(this.state.users[this.state.current_user.user_jid])}\n                               invite_url={this.state.invite_url}\n                               user_is_admin={this.state.user_is_admin}/>);\n  },\n\n  _getList() {\n    if (this.state.size === RoomSize.XLARGE) {\n      return null;\n    } else if (this.state.size === RoomSize.LARGE) {\n      return this._getDynamicList();\n    }\n    return this._getStaticList();\n  },\n\n  _getStaticList() {\n    return _.map(this.state.roster, (user, u) => {\n      return this._renderItem(u, u);\n    });\n  },\n\n  _getDynamicList() {\n    return (<ReactList\n      itemRenderer={this._renderItem}\n      itemSizeGetter={this._getItemSize}\n      items={this.state.roster}\n      length={this.state.roster.length}\n      selected={this.state.selectedPerson}\n      threshold={200}\n      useTranslate3d={false}\n      type='variable' />);\n  },\n\n  render: function() {\n    let guestAccessEnabled = this.state.guest_url && !this.props.is_guest && this.state.can_view_guest_access,\n        emptyState = this._showEmptyState() ? this._getEmptyState() : null,\n        xLargeState = this.state.size === RoomSize.XLARGE ? this._getXLargeState() : null,\n        guest_url_message;\n\n    var rosterWrapClasses = cx({\n      'roster-wrap': true,\n      'guest-access-enabled': guestAccessEnabled\n    });\n\n    var rosterClasses = cx({\n      'hc-roster': true,\n      'hc-sidebar-scroll': true\n    });\n\n    var listClasses = cx({\n      'aui-nav': true,\n      'aui-navgroup-vertical': true,\n      'roster-list': true\n    });\n\n    var list = this._getList();\n\n    if (guestAccessEnabled) {\n      let guest_url_string = this.state.guest_url.split('://').pop();\n      guest_url_message = (\n        <div className=\"guest-access\">\n          <strong>{strings.guest_access_enabled}</strong>\n          <br />\n          <a href={this.state.guest_url} target=\"_blank\">{guest_url_string}</a>\n        </div>\n      );\n    }\n\n    return (\n      <div className={rosterWrapClasses}>\n        <div className={rosterClasses}>\n          {xLargeState}\n          <ul className={listClasses} data-skate-ignore>\n            {list}\n          </ul>\n          {emptyState}\n        </div>\n        {guest_url_message}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/roster.js\n **/","import strings from 'strings/tooltip_strings';\nimport utils from 'helpers/utils';\nimport Presence from 'lib/enum/presence';\n\nexport default {\n\n  get_user_tooltip_flat: function (user_name, user_mention_name, user_is_admin, user_presence_show, user_presence_status, user_presence_idle_time) {\n    var title = `${user_name}\\n` +\n      `@${user_mention_name}\\n` +\n      `${strings.status} ${utils.user.get_user_status(user_presence_show)}`;\n\n    if (user_presence_show === Presence.IDLE && user_presence_idle_time) {\n      title += ` - ${user_presence_idle_time}`;\n    }\n    if (user_is_admin) {\n      title += '\\n' + strings.admin;\n    }\n    if (user_presence_status) {\n      title += `\\n` + this._splitToLines(`${strings.message} ${user_presence_status}`);\n    }\n    return title;\n  },\n\n  _splitToLines(str, maxLength = 50) {\n     let sumLength = 0;\n    if (str.length <= maxLength) {\n      return str;\n    }\n    return str.split(' ').reduce((acc, part, index, arr) => {\n      sumLength += part.length;\n      if (index === arr.length - 1) {\n        acc.push(part);\n      } else if (sumLength > maxLength) {\n        acc.push(part + '\\n');\n        sumLength = 0;\n      } else {\n        acc.push(part + ' ');\n        sumLength = part.match('\\n') ? 0 : sumLength;\n      }\n\n      return acc;\n    }, []).join('');\n  },\n\n  get_user_tooltip: function (user) {\n    let presence = user.presence || {};\n    return this.get_user_tooltip_flat(user.name, user.mention_name, user.is_admin, presence.show, presence.status, presence.idleTime);\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/person_helper.js\n **/","import strings from 'strings/empty_state_strings';\nimport DialogActions from \"actions/dialog_actions\";\nimport AnalyticsActions from \"actions/analytics_actions\";\nimport AnalyticsKeys from 'keys/analytics_keys';\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarRosterEmptyState\",\n\n  _openInviteUsers: function(e) {\n    e.preventDefault();\n    DialogActions.showInviteUsersDialog({type: AnalyticsKeys.RIGHT_SIDEBAR});\n    AnalyticsActions.inviteUserToRoomClickedEvent(\"roster\");\n    AnalyticsActions.inviteToRoomRightSidebarClicked();\n  },\n\n  _openInviteTeam: function(e) {\n    e.preventDefault();\n    DialogActions.showInviteTeammatesDialog();\n    AnalyticsActions.inviteTeamClickedEvent(\"roster\");\n  },\n\n  _getInviteMessage: function () {\n    var message;\n    if (this.props.room_privacy === \"private\" && !this.props.isAdmin) {\n      message = (\n        <div>\n          <div className=\"hc-tab-es-title\">{strings.empty_private_room}</div>\n        </div>\n      );\n    } else {\n      var inviteAction,\n          inviteMessage,\n          inviteActionMessage;\n\n      if (_.size(this.props.users) === 1 && (this.props.user_is_admin || this.props.invite_url)) {\n        inviteAction = this._openInviteTeam;\n        inviteMessage = strings.invite_to_team;\n        inviteActionMessage = strings.invite_to_team_action;\n      } else {\n        inviteAction = this._openInviteUsers;\n        inviteMessage = strings.invite_to_room;\n        inviteActionMessage = strings.invite_to_room_action;\n      }\n\n      message = (\n        <div>\n          <div className=\"hc-tab-es-title\">{inviteMessage}</div>\n          <div className=\"hc-tab-es-msg\">\n            <a className=\"hc-tab-es-invite aui-inline-dialog-trigger\" onClick={inviteAction}>{inviteActionMessage}</a>\n          </div>\n        </div>\n      );\n    }\n    return message;\n  },\n\n  render: function(){\n    var inviteMessage = this._getInviteMessage();\n    return (\n      <div className=\"hc-tab-es\">\n        <div className=\"hc-tab-es-img roster\"></div>\n        {inviteMessage}\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/roster_empty_state.js\n **/","import app_config from 'config/app_config';\n\nexport default {\n  members: `members`,\n  guests: `guests`,\n  guest_access_enabled: `Room publicly available`,\n  xlarge_message: `This room has ${app_config.roster_panel.breakpoints.large} or more members. That’s too many to show. Looking for specific people? Try `,\n  quick_switcher: `searching for them`\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/roster_panel_strings.js\n **/","import AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  filesMounted: function(data) {\n    AnalyticsDispatcher.dispatch('analytics-files-mount', data);\n  },\n\n  rosterMounted: function(data) {\n    AnalyticsDispatcher.dispatch('analytics-roster-mount', data);\n  },\n\n  fetchFilesHistory(){\n    AppDispatcher.dispatch('fetch-files-history');\n  },\n\n  fetchLinksHistory(){\n    AppDispatcher.dispatch('fetch-links-history');\n  },\n\n  setPanelScrollTopPosition(data){\n    AppDispatcher.dispatch('set-right-sidebar-panel-scrolltop', data);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/right_panel_actions.js\n **/","var AppDispatcher = require('dispatchers/app_dispatcher');\nvar AnalyticsDispatcher = require('dispatchers/analytics_dispatcher');\n\nvar SidebarActions = {\n  openChat: function(data) {\n    AppDispatcher.dispatch('set-route', {jid: data.jid});\n    data.source = \"sidebar\";\n    AnalyticsDispatcher.dispatch('analytics-open-room', data);\n  }\n};\n\nmodule.exports = SidebarActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/sidebar_actions.js\n **/","import File from './file';\nimport EmptyState from './files_empty_state';\nimport RightPanelActions from 'actions/right_panel_actions';\nimport RosterStore from 'stores/roster_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport cx from 'classnames';\nimport logger from 'helpers/logger';\nimport SidebarListSpinner from './sidebar_list_spinner';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'RightSideBarFiles',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    is_guest: React.PropTypes.bool\n  },\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  componentDidMount() {\n    RosterStore.on([\n      'change:files',\n      'change:rooms',\n      'change:panels_scroll_top',\n      'change:active_chat'\n    ], this._onChange);\n    PreferencesStore.on(['change:' + PreferencesKeys.USE_24_HR_FORMAT], this._onChange);\n    RightPanelActions.filesMounted({id: _.uniqueId(), size: this.state.size});\n    this.debouncedSetScrollPosition = _.debounce(this._setScrollPosition, 200, {leading: false, trailing: true});\n  },\n\n  componentWillUnmount() {\n    RosterStore.off([\n      'change:files',\n      'change:rooms',\n      'change:panels_scroll_top',\n      'change:active_chat'\n    ], this._onChange);\n    PreferencesStore.off(['change:' + PreferencesKeys.USE_24_HR_FORMAT], this._onChange);\n    this.debouncedSetScrollPosition.cancel();\n  },\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.room !== this.state.room){\n      if (this.state.files_fetched && this.state.size > 0) {\n        let index = this._getInitialIndex();\n        this.refs.list.scrollTo(index);\n        logger.type('files-panel').log('Scrolled to index: ', index);\n      }\n    }\n  },\n\n  _getState() {\n    var {\n      active_chat: room,\n      files,\n      can_share_files,\n      panels_scroll_top,\n      rooms\n    } = RosterStore.getAll();\n\n    let scroll_top = _.get(panels_scroll_top[room], `files`, 0),\n        files_fetched = _.get(rooms[room], `files_fetched`, false),\n        files_fetching = _.get(rooms[room], `files_fetching`, false),\n        all_files_fetched = _.get(rooms[room], `all_files_fetched`, false),\n        size = files.length;\n\n    return {\n      room,\n      scroll_top,\n      files_fetched,\n      files_fetching,\n      all_files_fetched,\n      files,\n      size,\n      can_share_files,\n      use24hrTime: PreferencesStore.shouldUse24HrTime()\n    };\n  },\n\n  _onChange() {\n    this.setState(this._getState());\n  },\n\n  _getRowHeight() {\n    return 42;\n  },\n\n  _getInitialIndex(scroll_top) {\n    var rowHeight = this._getRowHeight();\n    return Math.floor((scroll_top || this.state.scroll_top) / rowHeight);\n  },\n\n  _getFile(index, key) {\n    var file = this.state.files[index];\n    if (!file){\n      return <SidebarListSpinner key={key} height={this._getRowHeight()} />;\n    }\n    return <File key={key}\n                 file={file}\n                 use_24hr_time={this.state.use24hrTime}/>;\n  },\n\n  _filesBody() {\n    return (\n      <ul className=\"aui-nav aui-navgroup-vertical\" data-skate-ignore>\n        <ReactList\n          ref=\"list\"\n          itemRenderer={this._getFile}\n          length={this._getListSize()}\n          use_24hr_time={this.state.use24hrTime}\n          initialIndex={this._getInitialIndex()}\n          threshold={0}\n          pageSize={50}\n          itemSizeGetter={this._getRowHeight}\n          type='variable' />\n      </ul>\n    );\n  },\n\n  _getListSize() {\n    var size = this.state.size;\n    if (this.state.files_fetching){\n      size++;\n    }\n    return size;\n  },\n\n  _setScrollPosition() {\n    var node = this.refs.scrollbox;\n\n    if (!node){\n      return;\n    }\n\n    RightPanelActions.setPanelScrollTopPosition({\n      room: this.state.room,\n      type: 'files',\n      scroll_top: node.scrollTop\n    });\n\n    let index = this._getInitialIndex(node.scrollTop);\n    logger.type('files-panel').log('Scrolled to index:', index);\n  },\n\n  _onScroll() {\n    this.debouncedSetScrollPosition();\n\n    if (this.state.all_files_fetched || this.state.files_fetching){\n      return;\n    }\n\n    let node = this.refs.scrollbox;\n\n    if (node.scrollHeight - node.offsetHeight < node.scrollTop + node.offsetHeight){\n      RightPanelActions.fetchFilesHistory();\n    }\n  },\n\n  render() {\n    if (!this.props.is_guest && !this.state.files_fetched){\n      return null;\n    }\n\n    let fileClasses = cx({\n          'hc-files': true,\n          'hc-sidebar-scroll': true\n        }),\n        files_display = _.isEmpty(this.state.files) ? <EmptyState can_share_files={this.state.can_share_files} /> : this._filesBody();\n\n    return (\n      <div className={fileClasses} ref=\"scrollbox\" onScroll={this._onScroll}>\n        {files_display}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/files.js\n **/","import utils from \"helpers/utils\";\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport AppActions from 'actions/app_actions';\nimport fileHelper from 'helpers/file_helper';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarFile\",\n\n  propTypes: {\n    file: React.PropTypes.object.isRequired,\n    use_24hr_time: React.PropTypes.bool.isRequired\n  },\n\n  mixins: [PureRenderMixin],\n\n  render: function () {\n\n    var time = utils.format_time(this.props.file.date, this.props.use_24hr_time);\n    return (\n      <li className=\"hc-roster-item\">\n        <div className=\"aui-nav-item\" title={this.props.file.file_name}>\n          <a className=\"hc-file-link\" target=\"_blank\" rel=\"noreferrer\"\n              href={this.props.file.url}\n              onClick={this._onClick} >\n            <span className={\"hc-file-icon \" + this.props.file.icon_class}></span>\n            <span className=\"hc-file-name\">{this.props.file.file_name}</span>\n          </a>\n          <span className=\"hc-roster-user-name\">{this.props.file.user_name}</span>\n          <span className=\"hc-roster-date\">{time}</span>\n        </div>\n      </li>\n    );\n  },\n\n  _onClick: function (evt) {\n    if (fileHelper.shouldOpenFileViewer(evt)) {\n      evt.preventDefault();\n      if (evt.metaKey) {\n        AppActions.openExternalWindow(this.props.file.url, '_blank');\n      } else {\n        FileViewerActions.openInFileViewer(this.props.file);\n      }\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/file.js\n **/","import strings from 'strings/empty_state_strings';\nimport FileUploaderActions from 'actions/file_uploader_actions';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RightSideBarEmptyFileState\",\n\n  _openFilePicker: function(evt) {\n    evt.preventDefault();\n    FileUploaderActions.openFilePicker();\n  },\n\n  _getShareFileLink(){\n    let link;\n    if (this.props.can_share_files){\n      link = <a href=\"#\" onClick={this._openFilePicker}>{strings.share_a_file}</a>;\n    }\n    return link;\n  },\n\n  render: function(){\n    return (\n      <div className=\"hc-tab-es\">\n        <div className=\"hc-tab-es-img files\"></div>\n        <div className=\"hc-tab-es-title\">{strings.no_files}</div>\n        <div className=\"hc-tab-es-msg\">\n          {this._getShareFileLink()}\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/files_empty_state.js\n **/","import Spinner from 'components/common/spinner/spinner';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'SidebarListSpinner',\n\n  mixins: [PureRenderMixin],\n\n  render() {\n    return <li className=\"hc-roster-item hc-spinner-item\" style={{height: this.props.height}}>\n              <Spinner key={this.props.key} size=\"small\" spin={true} zIndex={1} />\n           </li>;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/sidebar_list_spinner.js\n **/","import Link from './link';\nimport EmptyState from './links_empty_state';\nimport RosterStore from 'stores/roster_store';\nimport RightPanelActions from 'actions/right_panel_actions';\nimport VideoActions from 'actions/video_actions';\nimport PreferencesStore from 'stores/preferences_store';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport video_utils from 'helpers/video_utils';\nimport cx from 'classnames';\nimport logger from 'helpers/logger';\nimport SidebarListSpinner from './sidebar_list_spinner';\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarLinks\",\n\n  propTypes: {\n    is_guest: React.PropTypes.bool\n  },\n\n  getInitialState: function() {\n    return this._getState();\n  },\n\n  componentDidMount: function() {\n    RosterStore.on([\n      'change:links',\n      'change:rooms',\n      'change:panels_scroll_top',\n      'change:active_chat'\n    ], this._onChange);\n    PreferencesStore.on(['change:' + PreferencesKeys.USE_24_HR_FORMAT], this._onChange);\n    this.throttledSetScrollPosition = _.throttle(this._setScrollPosition, 200, {leading: false, trailing: true});\n  },\n\n  componentWillUnmount: function() {\n    RosterStore.off([\n      'change:links',\n      'change:rooms',\n      'change:panels_scroll_top',\n      'change:active_chat'\n    ], this._onChange);\n    PreferencesStore.off(['change:' + PreferencesKeys.USE_24_HR_FORMAT], this._onChange);\n    this.throttledSetScrollPosition.cancel();\n  },\n\n  componentDidUpdate(prevProps, prevState){\n     if (prevState.room !== this.state.room){\n       if (this.state.links_fetched && this.state.size > 0) {\n         let index = this._getInitialIndex();\n         this.refs.list.scrollTo(index);\n         logger.type('links-panel').log('Scrolled to index: ', index);\n       }\n     }\n  },\n\n  onScrollStop(){\n\n    let node = this.refs.scrollbox;\n\n    RightPanelActions.setPanelScrollTopPosition({\n      room: this.state.room,\n      type: 'links',\n      scroll_top: node.scrollTop\n    });\n\n    if (!this.state.all_links_fetched && node.scrollHeight <= node.scrollTop + node.offsetHeight){\n      RightPanelActions.fetchLinksHistory();\n    }\n\n    let index = this._getInitialIndex(node.scrollTop);\n    logger.type('links-panel').log('Scroll is stopped on index:', index);\n  },\n\n  _getState: function() {\n\n    let {\n      active_chat: room,\n      links,\n      panels_scroll_top,\n      rooms\n    } = RosterStore.getAll();\n\n\n    let scroll_top = _.get(panels_scroll_top[room], `links`, 0),\n        links_fetched = _.get(rooms[room], `links_fetched`, false),\n        links_fetching = _.get(rooms[room], `links_fetching`, false),\n        all_links_fetched = _.get(rooms[room], `all_links_fetched`, false),\n        room_id = _.get(rooms[room], 'id'),\n        size = links.length;\n\n    return {\n      room,\n      room_id,\n      scroll_top,\n      links_fetched,\n      all_links_fetched,\n      links_fetching,\n      links,\n      size,\n      use24hrTime: PreferencesStore.shouldUse24HrTime()\n    };\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n  },\n\n  _onClick(evt) {\n    let isLink = _.get(evt, 'target.tagName', '').toLowerCase() === 'a';\n    let url = _.get(evt, 'target.href', null);\n    let jid = this.state.room;\n    let room_id = this.state.room_id;\n\n    if (!this.props.is_guest && isLink && !!url && video_utils.isVideoLink(url)) {\n      evt.preventDefault();\n      VideoActions.joinRoomVideoCall({ url, jid, room_id });\n    }\n  },\n\n  _getLink: function (index, key) {\n\n    let link = this.state.links[index];\n    if (!link){\n      return <SidebarListSpinner key={key} height={this._getRowHeight()} />;\n    }\n\n    return <Link key={key}\n                 name={link.user_name}\n                 url={link.url}\n                 date={link.date}\n                 use_24hr_time={this.state.use24hrTime}\n                 display_url={link.display_url}/>;\n  },\n\n  _getRowHeight(){\n    return 42;\n  },\n\n  _getInitialIndex(scroll_top){\n    let rowHeight = this._getRowHeight();\n    return Math.floor((scroll_top || this.state.scroll_top) / rowHeight);\n  },\n\n  _linksBody() {\n    return (\n      <ul className=\"aui-nav aui-navgroup-vertical\" data-skate-ignore>\n        <ReactList\n            ref=\"list\"\n            itemRenderer={this._getLink}\n            length={this._getListSize()}\n            initialIndex={this._getInitialIndex()}\n            use_24hr_time={this.state.use24hrTime}\n            threshold={0}\n            pageSize={50}\n            type='variable' />\n      </ul>\n    );\n  },\n\n  _getListSize(){\n    let size = this.state.size;\n    if (this.state.links_fetching){\n      size++;\n    }\n    return size;\n  },\n\n  _setScrollPosition(){\n\n    let node = this.refs.scrollbox;\n\n    if (!node){\n      return;\n    }\n\n    RightPanelActions.setPanelScrollTopPosition({\n      room: this.state.room,\n      type: 'links',\n      scroll_top: node.scrollTop\n    });\n\n    let index = this._getInitialIndex(node.scrollTop);\n    logger.type('links-panel').log('Scrolled to index:', index);\n  },\n\n  _onScroll(){\n\n    this.throttledSetScrollPosition();\n\n    if (this.state.all_links_fetched || this.state.links_fetching){\n      return;\n    }\n\n    let node = this.refs.scrollbox;\n\n    if (node.scrollHeight - node.offsetHeight < node.scrollTop + node.offsetHeight){\n      RightPanelActions.fetchLinksHistory();\n    }\n  },\n\n  render(){\n\n    if (!this.props.is_guest && !this.state.links_fetched){\n      return null;\n    }\n\n    var linkClasses = cx({\n          'hc-links': true,\n          'hc-sidebar-scroll': true,\n          'hc-bg-striped': !_.isEmpty(this.state.links)\n        }),\n        links_display = _.isEmpty(this.state.links) ? <EmptyState /> : this._linksBody();\n\n    return (\n      <div className={linkClasses} ref=\"scrollbox\" onClick={this._onClick} onScroll={this._onScroll}>\n        {links_display}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/links.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\nimport utils from \"helpers/utils\";\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarLink\",\n\n  propTypes: {\n    url: React.PropTypes.string.isRequired,\n    display_url: React.PropTypes.string.isRequired,\n    name: React.PropTypes.string.isRequired,\n    date: React.PropTypes.instanceOf(Date).isRequired,\n    use_24hr_time: React.PropTypes.bool.isRequired\n  },\n\n  mixins: [PureRenderMixin],\n\n  render: function(){\n\n    var time = utils.format_time(this.props.date, this.props.use_24hr_time);\n\n    return (\n      <li className=\"hc-roster-item\" >\n        <div className=\"aui-nav-item\" title={this.props.url}>\n          <a className=\"hc-link\" target=\"_blank\" rel=\"noopener noreferrer\" href={this.props.url}>{this.props.display_url}</a>\n          <span className=\"hc-roster-user-name\">{this.props.name}</span>\n          <span className=\"hc-roster-date\">{time}</span>\n        </div>\n      </li>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/link.js\n **/","var strings = require('strings/empty_state_strings');\n\nmodule.exports = React.createClass({\n\n  displayName: \"RightSideBarLinksEmptyState\",\n\n  render: function(){\n    return (\n      <div className=\"hc-tab-es\">\n        <div className=\"hc-tab-es-img links\"></div>\n        <div className=\"hc-tab-es-title\">{strings.no_links}</div>\n        <div className=\"hc-tab-es-msg\">{strings.share_a_link}</div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/links_empty_state.js\n **/","import IntegrationsStore from 'stores/integrations_store';\nimport PermissionsStore from 'stores/permissions_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport PreferencesKeys from 'keys/preferences_keys';\nimport GlancesMetadataStore from 'stores/glances_metadata_store';\nimport GlanceActions from 'actions/glance_actions';\nimport Glance from './glance';\nimport AddIntegrationsGlance from './add_integrations_glance';\nimport IntegrationView from './integration_view';\nimport IntegrationsActions from 'actions/integrations_actions';\nimport ClientPreferencesKeys from 'keys/client_preferences_keys';\nimport IntegrationsConfigureButton from './integrations_configure_button';\nimport Spinner from 'components/common/spinner/spinner';\nimport cx from 'classnames';\nimport logger from 'helpers/logger';\nimport RosterStore from 'stores/roster_store';\nimport People from '../roster';\nimport RosterMini from '../roster_mini';\nimport Files from '../files';\nimport Links from '../links';\nimport AppConfig from 'config/app_config';\nimport ApplicationStore from 'stores/application_store';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport ConfigStore from \"stores/configuration_store\";\n\nvar internalModules = {\n    people: function() { return <People is_guest={ApplicationStore.get(\"current_user\").is_guest}/>; },\n    files: function() { return <Files/>; },\n    links: function() { return <Links/>; }\n};\n\nconst GLANCE_VISIBLE_THRESHOLD = 3;\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarIntegrations\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function() {\n    return this._getState();\n  },\n\n  componentDidMount: function() {\n    IntegrationsStore.on(['change:integrations', 'change:active_chat', 'change:loading', 'change:error'], this._onChange);\n    PreferencesStore.on([`change:${ClientPreferencesKeys.ACTIVE_CHAT_INTEGRATION}`, `change:${ClientPreferencesKeys.ACTIVE_GROUPCHAT_INTEGRATION}`], this._onChange);\n    GlancesMetadataStore.on(['change:dynamic_glances', 'change:visible_glances'], this._onChange);\n    RosterStore.on('change:loading', this._onChange);\n    IntegrationsStore.on(['change:state'], this._onConnectionChange);\n    PreferencesStore.on([`change:${PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE}`], this._onChange);\n  },\n\n  componentWillMount: function() {\n    this._fetchGlanceData();\n  },\n\n  componentWillUnmount: function() {\n    IntegrationsStore.off(['change:integrations', 'change:active_chat', 'change:loading', 'change:error'], this._onChange);\n    PreferencesStore.off([`change:${ClientPreferencesKeys.ACTIVE_CHAT_INTEGRATION}`, `change:${ClientPreferencesKeys.ACTIVE_GROUPCHAT_INTEGRATION}`], this._onChange);\n    GlancesMetadataStore.off(['change:dynamic_glances', 'change:visible_glances'], this._onChange);\n    RosterStore.off('change:loading', this._onChange);\n    IntegrationsStore.off(['change:state'], this._onConnectionChange);\n    PreferencesStore.off([`change:${PreferencesKeys.IGNORE_ADD_INTEGRATIONS_GLANCE}`], this._onChange);\n  },\n\n  _fetchGlanceData: function() {\n    let current_glances = GlancesMetadataStore.get('dynamic_glances');\n    let active_chat = IntegrationsStore.get('active_chat');\n\n    if(active_chat && _.has(active_chat, \"id\")) { // Active chat can be null. For example if you're in the lobby and hit refresh.\n      current_glances.forEach(g => {\n          let room_glance = IntegrationsStore.getExtensionByKey(g.full_key);\n          let isInRoom = !_.isEmpty(room_glance);\n          if(isInRoom && GlancesMetadataStore.shouldFetch(active_chat.id, g.full_key)) {\n            GlanceActions.fetchGlanceMetadata(active_chat.id, g);\n          }\n        }\n      );\n    }\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n    this._fetchGlanceData();\n  },\n\n  _onConnectionChange: function(newValue) {\n\n    if(newValue === IntegrationsStore.states.STARTED) {\n        this._onChange();\n    }\n  },\n\n  _getState: function() {\n    var activeChat = IntegrationsStore.get('active_chat');\n    var glances = GlancesMetadataStore.get('visible_glances');\n    var dynamic_glances = GlancesMetadataStore.get('dynamic_glances');\n    var feature_flags = ConfigStore.get('feature_flags');\n\n    var chatType = RosterStore.get('chat_type');\n    var isGroupChat = (chatType === 'groupchat') && activeChat && activeChat.id;\n\n    return {\n      roomId: isGroupChat ? activeChat.id : undefined,\n      glances: isGroupChat ? glances : [],\n      dynamic_glances: isGroupChat ? dynamic_glances : [],\n      internal_glances: this._getInternalGlances(chatType),\n      active_integration: IntegrationsStore.getActiveIntegration(chatType),\n      loading: IntegrationsStore.get('loading'),\n      error: IntegrationsStore.get('error'),\n      chat_type: chatType,\n      loading_internal: RosterStore.get('loading'),\n      show_integrations_glance: this._setShowAddIntegrationsGlance(activeChat, glances.length, feature_flags)\n    };\n  },\n\n  _renderSummaryView(glance) {\n    if (glance.full_key === AppConfig.people_glance.full_key) {\n        return (<RosterMini max_items_to_render={AppConfig.people_glance.max_items_to_render_collapsed}/>);\n    }\n    return false;\n  },\n\n  _getGlanceBody: function(glance) {\n    if (!glance) {\n      return false;\n    }\n\n    var key = `${glance.full_key}`;\n    return (\n      <li key={key}>\n        <Glance glance={glance} room_id={this.state.roomId}>\n          {this._renderSummaryView(glance)}\n        </Glance>\n      </li>\n    );\n  },\n\n  _getRenderedGlances: function() {\n    let glances = _.union(this.state.internal_glances, this.state.glances);\n    return _.map(glances, this._getGlanceBody);\n  },\n\n  _glancesBody: function(renderedGlances) {\n    var addIntegrationsGlance;\n    if (this.state.show_integrations_glance) {\n      addIntegrationsGlance = (\n        <li>\n          <AddIntegrationsGlance room_id={this.state.roomId}/>\n        </li>\n      );\n    }\n\n      return (\n      <ul className=\"aui-nav aui-navgroup-vertical hc-glances\" data-skate-ignore>\n        {renderedGlances}\n        {addIntegrationsGlance}\n      </ul>\n    );\n  },\n\n\n  _setShowAddIntegrationsGlance: function (activeRoomObject, numberOfGlances, featureFlags) {\n    if (!activeRoomObject) {\n      return;\n    }\n\n    var shouldShowIntegrationsGlance = false;\n    if (activeRoomObject.type === 'groupchat') {\n      var ignoredRooms = PreferencesStore.getIgnoreAddIntegrationGlanceRooms();\n\n      if (activeRoomObject.id && !_.includes(ignoredRooms, parseInt(activeRoomObject.id))) {\n        if (this._shouldShowIntegrationsDiscoveryGlance(numberOfGlances, featureFlags)) {\n          shouldShowIntegrationsGlance = true;\n        }\n      }\n    }\n    return shouldShowIntegrationsGlance;\n  },\n\n  _shouldShowIntegrationsDiscoveryGlance: function(numberOfGlances, featureFlags) {\n    return _.get(featureFlags, \"web_client_enable_integration_discovery_glance\")\n      && PermissionsStore.canManageRoomIntegrations()\n      && numberOfGlances < GLANCE_VISIBLE_THRESHOLD;\n  },\n\n  _getIntegrationsConfigureButton: function() {\n    if (this.state.chat_type === 'chat' || !PermissionsStore.canManageRoomIntegrations()) {\n      return null;\n    }\n    return (<IntegrationsConfigureButton room_id={this.state.roomId} />);\n  },\n\n  _renderGlanceList: function() {\n    var rendered_glances = this._getRenderedGlances(),\n        glances_display = !_.isEmpty(rendered_glances) ? this._glancesBody(rendered_glances) : null,\n        classNames = cx({\n          'hc-integrations-wrap': true,\n          'hc-can-manage-integrations': PermissionsStore.canManageRoomIntegrations()\n        });\n\n    return (\n      <div className={classNames}>\n        {glances_display}\n      </div>\n    );\n  },\n\n  _hideIntegrationView: function() {\n    IntegrationsActions.closeSidebarView(\"sidebar\");\n  },\n\n  _renderIntegrationView: function(integration, activeIntegrationKey) {\n\n    if (_.isNull(integration) || _.isUndefined(integration)) {\n      logger.warn('[HC-Integrations]', `Unknown integration view ${activeIntegrationKey}.`);\n      return null;\n    }\n\n    if (integration.internal) {\n      return this._renderInternalIntegrationView(integration);\n    }\n\n    var key = `${this.state.roomId}:${integration.full_key}`;\n    var glance = IntegrationsStore.getExtensionByKey(_.get(this.state.active_integration, \"glance_key\"));\n\n    return (\n      <IntegrationView integration={integration}\n                       room_id={this.state.roomId}\n                       url_template_values={this.state.active_integration.url_template_values}\n                       init_event={this.state.active_integration.init_event}\n                       hideIntegrationView={this._hideIntegrationView}\n                       glance={glance}\n                       key={key}/>\n    );\n  },\n\n  _renderInternalIntegrationView: function(integration) {\n\n    var internalModule = internalModules[integration.key];\n\n    return (\n      <IntegrationView integration={integration}\n                       room_id={this.state.roomId}\n                       hideIntegrationView={this._hideIntegrationView}\n                       key={integration.key}\n                       glance={integration}\n                       loading={this.state.loading_internal}>\n        { internalModule() }\n      </IntegrationView>);\n  },\n\n  /**\n   * HipChat provides default integrations such as files, links and people\n   *\n   * All of our internal integration are marked with internal : true\n   * The key is mapped to the internalModules array in integrations.js\n   */\n  _getInternalGlances(chatType) {\n    let type = chatType || this.state.chat_type;\n    if (_.isEqual(this.props.internal, \"false\")) {\n      return [];\n    }\n\n    if(type === 'chat') {\n      return IntegrationsStore.getInternalExtensionsOTO();\n    }\n\n    return IntegrationsStore.getInternalExtensions();\n  },\n\n  _getIntegration: function (activeIntegrationKey) {\n    var extension = IntegrationsStore.getExtensionByKey(activeIntegrationKey);\n    return extension || _.find(this._getInternalGlances(), integration => integration.full_key === activeIntegrationKey);\n  },\n\n  render: function() {\n\n    var integrationClasses,\n        integrations_display,\n        activeIntegrationKey = _.get(this.state.active_integration, \"key\", null),\n        integration = this._getIntegration(activeIntegrationKey),\n        activeIntegrationExists = !_.isUndefined(integration) && !_.isNull(integration),\n        hasActiveIntegration = !(_.isNull(activeIntegrationKey) || !activeIntegrationExists),\n        configureButton = hasActiveIntegration ? null : this._getIntegrationsConfigureButton();\n\n    if (!hasActiveIntegration) {\n      integrations_display = this._renderGlanceList();\n      integrationClasses = cx({'hc-integrations': true});\n    } else {\n      integrations_display = this._renderIntegrationView(integration, activeIntegrationKey);\n      integrationClasses = cx({'hc-integrations': true, 'glance-selected': true});\n    }\n\n    return (\n      <div className={integrationClasses}>\n        <Spinner spin={this.state.loading} zIndex={1} />\n        {integrations_display}\n        {configureButton}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/integrations.js\n **/","import CurrentUserStore from 'stores/current_user_store';\nimport Store from \"lib/core/store\";\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport HtmlSanitizer from 'helpers/html_sanitizer';\nimport IntegrationsHelper from 'helpers/integration_helper';\nimport IntegrationsStore from 'stores/integrations_store';\nimport ConditionContext from 'helpers/conditions';\nimport GlanceHelper from 'helpers/glance_helper';\nimport logger from 'helpers/logger';\nimport {GLANCE_UPDATE} from \"api/api_integration_events\";\n\nimport {\n  event_names as integrations_event_names,\n  states as integration_states,\n  glance_room_states,\n  extension_types\n} from 'keys/integrations_keys';\n\nlet glanceHtmlSanitizer = new HtmlSanitizer([\n  \"b\", \"strong\", \"em\", \"i\"\n]);\n\n\nclass GlancesMetadataStore extends Store {\n\n  constructor() {\n    super();\n  }\n\n  getDefaults() {\n    return {\n      active_rooms: {},\n      visible_glances: [],\n      dynamic_glances: [],\n      room_state: {},\n      integrations_state: integration_states.INIT,\n      active_chat: \"\"\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.register({\n      \"fetch-glance-metadata\": (room_id, glance, reload_errors = false) => {\n        this._fetchGlanceMetadata(room_id, glance, reload_errors);\n      },\n      \"glance-metadata-loading\": (room_id, glance_key, data) => {\n        this._setGlanceLoading(room_id, glance_key);\n        this._updateGlances();\n      },\n      \"glance-metadata-fetched\": (room_id, glance_key, data) => {\n        let sanitizedData = this._sanitizeMetadata(data);\n        this._setRoomMetadata(room_id, glance_key, sanitizedData);\n        this._updateGlances();\n      },\n      \"glances-finished-loading-for-room\": (room_id, success) => {\n        this._finishLoadingForRoom(room_id, success);\n      },\n      \"glance-metadata-pushed\": (push_data) => {\n        _.each(push_data, (data) => {\n          let glance_key = IntegrationsHelper.to_full_key(data.addon_key, data.key);\n          let sanitizedContent = this._sanitizeMetadata(data.content);\n\n          AppDispatcher.dispatch(\"integration-iframe-event\",\n            GLANCE_UPDATE, {\n              addon_key: data.addon_key\n            }, {\n              addon_key: data.addon_key,\n              module_key: data.key,\n              metadata: _.get(data, \"content.metadata\", {})\n          });\n\n          if (data.room_id) {\n            this._setRoomMetadata(data.room_id, glance_key, sanitizedContent);\n          } else {\n            this._setGlobalMetadata(glance_key, sanitizedContent);\n          }\n        });\n        this._updateGlances();\n      },\n      \"integrations-updated\": (integrations) => {\n        this._updateGlances();\n      },\n      \"updated:activeRooms\": (rooms) => {\n        this._handleActiveRoomsUpdate(rooms);\n      },\n      \"after:updated:active_chat\": (jid) => {\n        // We're listening to after:updated:active_chat instead of updated:active_chat so we're sure that\n        // integrations_store is aware of the current room\n        // TODO: change update glance and integrationstore to take an active room parameter when needed\n        this._handleActiveChatUpdate(jid);\n      }\n    });\n\n    AppDispatcher.register(integrations_event_names.REMOVE_DATA_FOR_ROOMS, (data) => {\n      this._cleanMetadataForRooms(data.rooms);\n    });\n\n    AppDispatcher.register(integrations_event_names.ON_INTEGRATIONS_REMOVED, (data) => {\n      _.each(data.integrations, (integration) => {\n        this._handleUninstalledIntegration(integration, data.rooms);\n      });\n    });\n\n    IntegrationsStore.on('change:state', (state, old_state) => {\n      this.set('integrations_state', state);\n\n      if (state === integration_states.STARTED || state === integration_states.ERROR) {\n        this._handleActiveChatUpdate(this.data.active_chat);\n      } else if (state === integration_states.STOPPED) {\n        this.setDirty();\n      }\n    });\n  }\n\n  onGlanceMetadataChange(room_id, glance_key, callback) {\n    let key = this.fullKey(room_id, glance_key);\n    this.on(`change:${key}`, callback);\n  }\n\n  offGlanceMetadataChange(room_id, glance_key, callback) {\n    let key = this.fullKey(room_id, glance_key);\n    this.off(`change:${key}`, callback);\n  }\n\n  getValidCachedMetadata(room_id, glance_key) {\n    var cachedMetadata = this.get(this.fullKey(room_id, glance_key));\n    if (!_.isUndefined(cachedMetadata) && _.isEmpty(cachedMetadata.error)) {\n      return cachedMetadata;\n    }\n    return undefined;\n  }\n\n  getCachedMetadata(room_id, glance_key) {\n    let cachedMetadata = this.get(this.fullKey(room_id, glance_key));\n    if(_.isUndefined(cachedMetadata)) {\n      return {};\n    }\n\n    if (!cachedMetadata.error){\n      cachedMetadata.error = null;\n    }\n\n    return cachedMetadata;\n  }\n\n\n  fullKey(room_id, glance_key) {\n    return `${room_id}:${glance_key}`;\n  }\n\n  setDirty() {\n    this.set('room_state', _.mapValues(this.data.room_state, _.constant(glance_room_states.DIRTY)));\n  }\n\n  shouldFetch(room_id, glance_key) {\n    let cachedMetadata = this.getCachedMetadata(room_id, glance_key);\n    return _.isEmpty(cachedMetadata) || (cachedMetadata.dirty === true && !cachedMetadata.loading);\n  }\n\n  _setGlanceLoading(room_id, glance_key) {\n    let fullKey = this.fullKey(room_id, glance_key);\n    let cachedMetadata = this.getCachedMetadata(room_id, glance_key);\n    if(_.isUndefined((cachedMetadata))) {\n      cachedMetadata = {};\n    }\n    cachedMetadata.error = null;\n    cachedMetadata.loading = true;\n    this.set(fullKey, cachedMetadata);\n  }\n\n  _updateGlances() {\n    let allGlances = IntegrationsStore.getExtensionsByType(extension_types.GLANCE);\n    let visibleGlances = allGlances.filter(g => this._shouldDisplayGlance(g));\n    let dynamicGlances = allGlances.filter(g => !_.isUndefined(g.query_url));\n    this.set({\n      visible_glances: visibleGlances,\n      dynamic_glances: dynamicGlances\n    });\n  }\n\n  _shouldDisplayGlance(glance) {\n\n    let active_chat = IntegrationsStore.get('active_chat');\n    if(_.isEmpty(active_chat)) {\n      return false;\n    }\n\n    let glance_data = this.getCachedMetadata(active_chat.id, glance.full_key);\n\n    if(_.isEmpty(glance.conditions) || !_.isEmpty(glance_data.error)) {\n      return true;\n    }\n\n    let current_user = CurrentUserStore.getAll();\n    let context = new ConditionContext()\n      .withRoom(active_chat)\n      .withUser(current_user);\n\n    if(context.canEvaluate(glance.conditions)) {\n      return context.evaluate(glance.conditions);\n    }\n\n    //If glance is loading, and has conditions, we might want to display it later\n    if(_.isUndefined(glance_data) || glance_data.loading) {\n      return false;\n    }\n\n    return context.withGlanceData(glance_data).evaluate(glance.conditions);\n  }\n\n  _setRoomMetadata(room_id, glance_key, data) {\n    this.set(this.fullKey(room_id, glance_key), _.merge({loading: false, dirty: false},\n      data));\n  }\n\n\n  _setGlobalMetadata(glance_key, data) {\n    _.each(this._getAllActiveRoomIds(), (room_id) => {\n      this._setRoomMetadata(room_id, glance_key, data);\n    });\n  }\n\n  _sanitizeMetadata(data) {\n    data.label = this._sanitizeMetadataContent(data.label);\n    data.status = this._sanitizeMetadataContent(data.status);\n\n    return data;\n  }\n\n  _sanitizeMetadataContent(content) {\n    if (!_.isObject(content)) {\n      return {};\n    }\n\n    switch (content.type) {\n      case \"html\":\n        content.type = \"safe_html\";\n        content.value = glanceHtmlSanitizer.sanitize(content.value);\n        break;\n      default:\n        break;\n    }\n\n    return content;\n  }\n\n  _handleActiveRoomsUpdate(rooms) {\n    let jids_to_room_ids = {};\n    for (var item in rooms) {\n      if (rooms[item].type === \"groupchat\" && rooms[item].id) {\n        jids_to_room_ids[item] = rooms[item].id;\n      }\n    }\n\n    this.set({\n      \"active_rooms\": jids_to_room_ids\n    });\n  }\n\n  _getMetadataKeysMatching(prefix) {\n    return _.filter(_.keys(this.data), (key) => _.startsWith(key, prefix));\n  }\n\n  _clearMetadataForContext(rooms, prefix) {\n    let metadataKeys = _.map(rooms, (room) => {\n        let prefixedRoom = prefix(room);\n        return this._getMetadataKeysMatching(prefixedRoom);\n    });\n\n    let flattenKeys = _.flatten(metadataKeys);\n    flattenKeys.forEach(key => this.unset(key));\n  }\n\n  _cleanMetadataForRooms(rooms) {\n    this._clearMetadataForContext(rooms, room => `${room.id}:` );\n    let ids = _.map(rooms, \"id\");\n    this.set(\"room_state\", _.pickBy(this.data.room_state, (v,id) => {\n      if (_.includes(ids, id)) {\n        logger.debug('[HC-Integrations]', `glances:${id} state transition from ${(_.get(this.data.room_state, id, glance_room_states.INIT))} -> unloaded`);\n        return false;\n      }\n    }));\n  }\n\n  _handleUninstalledIntegration(integration, rooms) {\n    this._clearMetadataForContext(rooms, room => `${room.id}:${integration.addon_key}:` );\n  }\n\n  _handleActiveChatUpdate(jid) {\n    let activeRoom = this.data.active_rooms[jid];\n\n    if (activeRoom) {\n      var state = this._getRoomState(activeRoom);\n\n      if (state === glance_room_states.INIT || state === glance_room_states.DIRTY) {\n        this._setRoomState(activeRoom, glance_room_states.LOADING);\n      }\n    }\n    this.set('active_chat', jid);\n    this._updateGlances();\n  }\n\n  _getAllActiveRoomIds() {\n    return _.values(this.data.active_rooms);\n  }\n\n  _getRoomState(id) {\n    if (this.data.integrations_state === integration_states.STARTED || this.data.integrations_state === integration_states.ERROR) {\n      return _.get(this.data.room_state, id, glance_room_states.INIT);\n    }\n    return glance_room_states.WAITING;\n  }\n\n  _setRoomState(id, state) {\n    var current_state = _.get(this.data.room_state, id, glance_room_states.INIT);\n\n    if (current_state !== state) {\n      if (state === glance_room_states.LOADING) {\n        //Fetch glance metadata\n\n        GlanceHelper.fetchGlanceMetadataForRoom(id);\n      }\n\n      let updated_states = _.clone(this.data.room_state);\n      updated_states[id] = state;\n      logger.debug('[HC-Integrations]', `glances:${id} state transition from ${current_state} -> ${state}`);\n      this.set({room_state: updated_states});\n    }\n  }\n\n  _fetchGlanceMetadata(room_id, glance, reload_errors) {\n    var metadata = this.get(this.fullKey(room_id, glance.full_key));\n    let shouldReload = _.get(metadata, 'dirty', false);\n    if (_.isUndefined(metadata) && glance_room_states.LOADED === this._getRoomState(room_id)) {\n      logger.debug('[HC-Integrations]', `Fetching single glance as no metadata exists and room was already loaded - glances:${room_id}:${glance.full_key}`);\n      shouldReload = true;\n    }\n\n    if (_.get(metadata, 'error', false) && reload_errors) {\n      logger.debug('[HC-Integrations]', `Fetching single glance as currently in error state and reload was triggered - glances:${room_id}:${glance.full_key}`);\n      shouldReload = true;\n    }\n\n    if (shouldReload) {\n      this._setGlanceLoading(room_id, glance.full_key);\n      GlanceHelper.fetchGlanceRemoteMetadata(room_id, glance);\n    }\n  }\n\n  _finishLoadingForRoom(room_id, success) {\n    if (!success) {\n      // Mark as failed\n      IntegrationsStore.getExtensionsByTypeAndRoom(extension_types.GLANCE, room_id)\n        .forEach(e => {\n          if (e.query_url) {\n            this.set(this.fullKey(room_id, e.full_key), {\n              loading: false,\n              error: \"Failed to load glance\"\n            });\n          }\n        });\n\n        this._updateGlances();\n    }\n\n    this._setRoomState(room_id, glance_room_states.LOADED);\n  }\n}\n\nexport default new GlancesMetadataStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/glances_metadata_store.js\n **/","var sanitizer = require('sanitizer');\n\nclass HtmlSanitizer {\n  constructor(tagWhitelist, attributeWhitelist) {\n    let whitelistSet = new Set(tagWhitelist);\n    let attributeWhitelistSet = new Set(attributeWhitelist);\n    let basicPolicy = sanitizer.makeTagPolicy();\n\n    this.customPolicy = function(tagName, attribs) {\n\n      let filteredAttributes = [];\n      for (var i = 0; i < attribs.length; i += 2) {\n        var attribName = attribs[i];\n        var value = attribs[i + 1];\n\n        if (attributeWhitelistSet.has(attribName)) {\n          filteredAttributes.push(attribName, value);\n        }\n      }\n\n      if (whitelistSet.has(tagName)) {\n        return basicPolicy(tagName, filteredAttributes);\n      }\n    };\n  }\n\n  sanitize(input) {\n    return sanitizer.sanitizeWithPolicy(input, this.customPolicy);\n  }\n}\n\nmodule.exports = HtmlSanitizer;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/html_sanitizer.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/set\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/set.js\n ** module id = 516\n ** module chunks = 0\n **/","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nmodule.exports = require('../modules/$.core').Set;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/set.js\n ** module id = 517\n ** module chunks = 0\n **/","'use strict';\nvar strong = require('./$.collection-strong');\n\n// 23.2 Set Objects\nrequire('./$.collection')('Set', function(get){\n  return function Set(){ return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value){\n    return strong.def(this, value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.set.js\n ** module id = 518\n ** module chunks = 0\n **/","'use strict';\nvar $            = require('./$')\n  , hide         = require('./$.hide')\n  , redefineAll  = require('./$.redefine-all')\n  , ctx          = require('./$.ctx')\n  , strictNew    = require('./$.strict-new')\n  , defined      = require('./$.defined')\n  , forOf        = require('./$.for-of')\n  , $iterDefine  = require('./$.iter-define')\n  , step         = require('./$.iter-step')\n  , ID           = require('./$.uid')('id')\n  , $has         = require('./$.has')\n  , isObject     = require('./$.is-object')\n  , setSpecies   = require('./$.set-species')\n  , DESCRIPTORS  = require('./$.descriptors')\n  , isExtensible = Object.isExtensible || isObject\n  , SIZE         = DESCRIPTORS ? '_s' : 'size'\n  , id           = 0;\n\nvar fastKey = function(it, create){\n  // return primitive with prefix\n  if(!isObject(it))return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if(!$has(it, ID)){\n    // can't set id to frozen object\n    if(!isExtensible(it))return 'F';\n    // not necessary to add id\n    if(!create)return 'E';\n    // add missing object id\n    hide(it, ID, ++id);\n  // return object id with prefix\n  } return 'O' + it[ID];\n};\n\nvar getEntry = function(that, key){\n  // fast case\n  var index = fastKey(key), entry;\n  if(index !== 'F')return that._i[index];\n  // frozen object case\n  for(entry = that._f; entry; entry = entry.n){\n    if(entry.k == key)return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function(wrapper, NAME, IS_MAP, ADDER){\n    var C = wrapper(function(that, iterable){\n      strictNew(that, C, NAME);\n      that._i = $.create(null); // index\n      that._f = undefined;      // first entry\n      that._l = undefined;      // last entry\n      that[SIZE] = 0;           // size\n      if(iterable != undefined)forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear(){\n        for(var that = this, data = that._i, entry = that._f; entry; entry = entry.n){\n          entry.r = true;\n          if(entry.p)entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function(key){\n        var that  = this\n          , entry = getEntry(that, key);\n        if(entry){\n          var next = entry.n\n            , prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if(prev)prev.n = next;\n          if(next)next.p = prev;\n          if(that._f == entry)that._f = next;\n          if(that._l == entry)that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /*, that = undefined */){\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3)\n          , entry;\n        while(entry = entry ? entry.n : this._f){\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while(entry && entry.r)entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key){\n        return !!getEntry(this, key);\n      }\n    });\n    if(DESCRIPTORS)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return defined(this[SIZE]);\n      }\n    });\n    return C;\n  },\n  def: function(that, key, value){\n    var entry = getEntry(that, key)\n      , prev, index;\n    // change existing entry\n    if(entry){\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if(!that._f)that._f = entry;\n      if(prev)prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if(index !== 'F')that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function(C, NAME, IS_MAP){\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function(iterated, kind){\n      this._t = iterated;  // target\n      this._k = kind;      // kind\n      this._l = undefined; // previous\n    }, function(){\n      var that  = this\n        , kind  = that._k\n        , entry = that._l;\n      // revert to the last existing entry\n      while(entry && entry.r)entry = entry.p;\n      // get next entry\n      if(!that._t || !(that._l = entry = entry ? entry.n : that._t._f)){\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if(kind == 'keys'  )return step(0, entry.k);\n      if(kind == 'values')return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values' , !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.collection-strong.js\n ** module id = 519\n ** module chunks = 0\n **/","'use strict';\nvar $              = require('./$')\n  , global         = require('./$.global')\n  , $export        = require('./$.export')\n  , fails          = require('./$.fails')\n  , hide           = require('./$.hide')\n  , redefineAll    = require('./$.redefine-all')\n  , forOf          = require('./$.for-of')\n  , strictNew      = require('./$.strict-new')\n  , isObject       = require('./$.is-object')\n  , setToStringTag = require('./$.set-to-string-tag')\n  , DESCRIPTORS    = require('./$.descriptors');\n\nmodule.exports = function(NAME, wrapper, methods, common, IS_MAP, IS_WEAK){\n  var Base  = global[NAME]\n    , C     = Base\n    , ADDER = IS_MAP ? 'set' : 'add'\n    , proto = C && C.prototype\n    , O     = {};\n  if(!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function(){\n    new C().entries().next();\n  }))){\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n  } else {\n    C = wrapper(function(target, iterable){\n      strictNew(target, C, NAME);\n      target._c = new Base;\n      if(iterable != undefined)forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    $.each.call('add,clear,delete,forEach,get,has,set,keys,values,entries'.split(','),function(KEY){\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if(KEY in proto && !(IS_WEAK && KEY == 'clear'))hide(C.prototype, KEY, function(a, b){\n        if(!IS_ADDER && IS_WEAK && !isObject(a))return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    if('size' in proto)$.setDesc(C.prototype, 'size', {\n      get: function(){\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if(!IS_WEAK)common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.collection.js\n ** module id = 520\n ** module chunks = 0\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export  = require('./$.export');\n\n$export($export.P, 'Set', {toJSON: require('./$.collection-to-json')('Set')});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es7.set.to-json.js\n ** module id = 521\n ** module chunks = 0\n **/","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar forOf   = require('./$.for-of')\n  , classof = require('./$.classof');\nmodule.exports = function(NAME){\n  return function toJSON(){\n    if(classof(this) != NAME)throw TypeError(NAME + \"#toJSON isn't generic\");\n    var arr = [];\n    forOf(this, false, arr.push, arr);\n    return arr;\n  };\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/$.collection-to-json.js\n ** module id = 522\n ** module chunks = 0\n **/","var html4 = require(\"./lib/html4.js\");\nvar URI = require(\"./lib/uri.js\");\n\n// Copyright (C) 2006 Google Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * An HTML sanitizer that can satisfy a variety of security policies.\n *\n * <p>\n * The HTML sanitizer is built around a SAX parser and HTML element and\n * attributes schemas.\n *\n * If the cssparser is loaded, inline styles are sanitized using the\n * css property and value schemas.  Else they are remove during\n * sanitization.\n *\n * If it exists, uses parseCssDeclarations, sanitizeCssProperty,  cssSchema\n *\n * @author mikesamuel@gmail.com\n * @author jasvir@gmail.com\n * \\@requires html4, URI\n * \\@overrides window\n * \\@provides html, html_sanitize\n */\n\n// The Turkish i seems to be a non-issue, but abort in case it is.\nif ('I'.toLowerCase() !== 'i') { throw 'I/i problem'; }\n\n/**\n * \\@namespace\n */\nvar html = (function(html4) {\n\n    // For closure compiler\n    var parseCssDeclarations, sanitizeCssProperty, cssSchema;\n    if ('undefined' !== typeof window) {\n        parseCssDeclarations = window['parseCssDeclarations'];\n        sanitizeCssProperty = window['sanitizeCssProperty'];\n        cssSchema = window['cssSchema'];\n    }\n\n    // The keys of this object must be 'quoted' or JSCompiler will mangle them!\n    // This is a partial list -- lookupEntity() uses the host browser's parser\n    // (when available) to implement full entity lookup.\n    // Note that entities are in general case-sensitive; the uppercase ones are\n    // explicitly defined by HTML5 (presumably as compatibility).\n    var ENTITIES = {\n        'lt': '<',\n        'LT': '<',\n        'gt': '>',\n        'GT': '>',\n        'amp': '&',\n        'AMP': '&',\n        'quot': '\"',\n        'apos': '\\'',\n        'nbsp': '\\u00a0'\n    };\n\n    // Patterns for types of entity/character reference names.\n    var decimalEscapeRe = /^#(\\d+)$/;\n    var hexEscapeRe = /^#x([0-9A-Fa-f]+)$/;\n    // contains every entity per http://www.w3.org/TR/2011/WD-html5-20110113/named-character-references.html\n    var safeEntityNameRe = /^[A-Za-z][A-za-z0-9]+$/;\n    // Used as a hook to invoke the browser's entity parsing. <textarea> is used\n    // because its content is parsed for entities but not tags.\n    // TODO(kpreid): This retrieval is a kludge and leads to silent loss of\n    // functionality if the document isn't available.\n    var entityLookupElement =\n        ('undefined' !== typeof window && window['document'])\n            ? window['document'].createElement('textarea') : null;\n    /**\n     * Decodes an HTML entity.\n     *\n     * {\\@updoc\n     * $ lookupEntity('lt')\n     * # '<'\n     * $ lookupEntity('GT')\n     * # '>'\n     * $ lookupEntity('amp')\n     * # '&'\n     * $ lookupEntity('nbsp')\n     * # '\\xA0'\n     * $ lookupEntity('apos')\n     * # \"'\"\n     * $ lookupEntity('quot')\n     * # '\"'\n     * $ lookupEntity('#xa')\n     * # '\\n'\n     * $ lookupEntity('#10')\n     * # '\\n'\n     * $ lookupEntity('#x0a')\n     * # '\\n'\n     * $ lookupEntity('#010')\n     * # '\\n'\n     * $ lookupEntity('#x00A')\n     * # '\\n'\n     * $ lookupEntity('Pi')      // Known failure\n     * # '\\u03A0'\n     * $ lookupEntity('pi')      // Known failure\n     * # '\\u03C0'\n     * }\n     *\n     * @param {string} name the content between the '&' and the ';'.\n     * @return {string} a single unicode code-point as a string.\n     */\n    function lookupEntity(name) {\n        // TODO: entity lookup as specified by HTML5 actually depends on the\n        // presence of the \";\".\n        if (ENTITIES.hasOwnProperty(name)) { return ENTITIES[name]; }\n        var m = name.match(decimalEscapeRe);\n        if (m) {\n            return String.fromCharCode(parseInt(m[1], 10));\n        } else if (!!(m = name.match(hexEscapeRe))) {\n            return String.fromCharCode(parseInt(m[1], 16));\n        } else if (entityLookupElement && safeEntityNameRe.test(name)) {\n            entityLookupElement.innerHTML = '&' + name + ';';\n            var text = entityLookupElement.textContent;\n            ENTITIES[name] = text;\n            return text;\n        } else {\n            return '&' + name + ';';\n        }\n    }\n\n    function decodeOneEntity(_, name) {\n        return lookupEntity(name);\n    }\n\n    var nulRe = /\\0/g;\n    function stripNULs(s) {\n        return s.replace(nulRe, '');\n    }\n\n    var ENTITY_RE_1 = /&(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/g;\n    var ENTITY_RE_2 = /^(#[0-9]+|#[xX][0-9A-Fa-f]+|\\w+);/;\n    /**\n     * The plain text of a chunk of HTML CDATA which possibly containing.\n     *\n     * {\\@updoc\n     * $ unescapeEntities('')\n     * # ''\n     * $ unescapeEntities('hello World!')\n     * # 'hello World!'\n     * $ unescapeEntities('1 &lt; 2 &amp;&AMP; 4 &gt; 3&#10;')\n     * # '1 < 2 && 4 > 3\\n'\n     * $ unescapeEntities('&lt;&lt <- unfinished entity&gt;')\n     * # '<&lt <- unfinished entity>'\n     * $ unescapeEntities('/foo?bar=baz&copy=true')  // & often unescaped in URLS\n     * # '/foo?bar=baz&copy=true'\n     * $ unescapeEntities('pi=&pi;&#x3c0;, Pi=&Pi;\\u03A0') // FIXME: known failure\n     * # 'pi=\\u03C0\\u03c0, Pi=\\u03A0\\u03A0'\n     * }\n     *\n     * @param {string} s a chunk of HTML CDATA.  It must not start or end inside\n     *     an HTML entity.\n     */\n    function unescapeEntities(s) {\n\tif(s) {\n\t    return s.replace(ENTITY_RE_1, decodeOneEntity);\n\t}\n\telse {\n\t    return s;\n\t}\n    }\n\n    var ampRe = /&/g;\n    var looseAmpRe = /&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi;\n    var ltRe = /[<]/g;\n    var gtRe = />/g;\n    var quotRe = /\\\"/g;\n\n    /**\n     * Escapes HTML special characters in attribute values.\n     *\n     * {\\@updoc\n     * $ escapeAttrib('')\n     * # ''\n     * $ escapeAttrib('\"<<&==&>>\"')  // Do not just escape the first occurrence.\n     * # '&#34;&lt;&lt;&amp;&#61;&#61;&amp;&gt;&gt;&#34;'\n     * $ escapeAttrib('Hello <World>!')\n     * # 'Hello &lt;World&gt;!'\n     * }\n     */\n    function escapeAttrib(s) {\n\tif(s) {\n\t    return ('' + s).replace(ampRe, '&amp;').replace(ltRe, '&lt;')\n            .replace(gtRe, '&gt;').replace(quotRe, '&#34;');\n\t}\n\telse {\n\t    return s;\n\t}\n        \n    }\n\n    /**\n     * Escape entities in RCDATA that can be escaped without changing the meaning.\n     * {\\@updoc\n     * $ normalizeRCData('1 < 2 &&amp; 3 > 4 &amp;& 5 &lt; 7&8')\n     * # '1 &lt; 2 &amp;&amp; 3 &gt; 4 &amp;&amp; 5 &lt; 7&amp;8'\n     * }\n     */\n    function normalizeRCData(rcdata) {\n\tif(rcdata) {\n\t    return rcdata\n                .replace(looseAmpRe, '&amp;$1')\n                .replace(ltRe, '&lt;')\n                .replace(gtRe, '&gt;');\n\t}\n\telse {\n\t    return rcdata;\n\t}\n    }\n\n    // TODO(felix8a): validate sanitizer regexs against the HTML5 grammar at\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/syntax.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tokenization.html\n    // http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html\n\n    // We initially split input so that potentially meaningful characters\n    // like '<' and '>' are separate tokens, using a fast dumb process that\n    // ignores quoting.  Then we walk that token stream, and when we see a\n    // '<' that's the start of a tag, we use ATTR_RE to extract tag\n    // attributes from the next token.  That token will never have a '>'\n    // character.  However, it might have an unbalanced quote character, and\n    // when we see that, we combine additional tokens to balance the quote.\n\n    var ATTR_RE = new RegExp(\n        '^\\\\s*' +\n            '([-.:\\\\w]+)' +             // 1 = Attribute name\n            '(?:' + (\n            '\\\\s*(=)\\\\s*' +           // 2 = Is there a value?\n                '(' + (                   // 3 = Attribute value\n                // TODO(felix8a): maybe use backref to match quotes\n                '(\\\")[^\\\"]*(\\\"|$)' +    // 4, 5 = Double-quoted string\n                    '|' +\n                    '(\\')[^\\']*(\\'|$)' +    // 6, 7 = Single-quoted string\n                    '|' +\n                    // Positive lookahead to prevent interpretation of\n                    // <foo a= b=c> as <foo a='b=c'>\n                    // TODO(felix8a): might be able to drop this case\n                    '(?=[a-z][-\\\\w]*\\\\s*=)' +\n                    '|' +\n                    // Unquoted value that isn't an attribute name\n                    // (since we didn't match the positive lookahead above)\n                    '[^\\\"\\'\\\\s]*' ) +\n                ')' ) +\n            ')?',\n        'i');\n\n    // false on IE<=8, true on most other browsers\n    var splitWillCapture = ('a,b'.split(/(,)/).length === 3);\n\n    // bitmask for tags with special parsing, like <script> and <textarea>\n    var EFLAGS_TEXT = html4.eflags['CDATA'] | html4.eflags['RCDATA'];\n\n    /**\n     * Given a SAX-like event handler, produce a function that feeds those\n     * events and a parameter to the event handler.\n     *\n     * The event handler has the form:{@code\n     * {\n   *   // Name is an upper-case HTML tag name.  Attribs is an array of\n   *   // alternating upper-case attribute names, and attribute values.  The\n   *   // attribs array is reused by the parser.  Param is the value passed to\n   *   // the saxParser.\n   *   startTag: function (name, attribs, param) { ... },\n   *   endTag:   function (name, param) { ... },\n   *   pcdata:   function (text, param) { ... },\n   *   rcdata:   function (text, param) { ... },\n   *   cdata:    function (text, param) { ... },\n   *   startDoc: function (param) { ... },\n   *   endDoc:   function (param) { ... }\n   * }}\n     *\n     * @param {Object} handler a record containing event handlers.\n     * @return {function(string, Object)} A function that takes a chunk of HTML\n     *     and a parameter.  The parameter is passed on to the handler methods.\n     */\n    function makeSaxParser(handler) {\n        // Accept quoted or unquoted keys (Closure compat)\n        var hcopy = {\n            cdata: handler.cdata || handler['cdata'],\n            comment: handler.comment || handler['comment'],\n            endDoc: handler.endDoc || handler['endDoc'],\n            endTag: handler.endTag || handler['endTag'],\n            pcdata: handler.pcdata || handler['pcdata'],\n            rcdata: handler.rcdata || handler['rcdata'],\n            startDoc: handler.startDoc || handler['startDoc'],\n            startTag: handler.startTag || handler['startTag']\n        };\n        return function(htmlText, param) {\n            return parse(htmlText, hcopy, param);\n        };\n    }\n\n    // Parsing strategy is to split input into parts that might be lexically\n    // meaningful (every \">\" becomes a separate part), and then recombine\n    // parts if we discover they're in a different context.\n\n    // TODO(felix8a): Significant performance regressions from -legacy,\n    // tested on\n    //    Chrome 18.0\n    //    Firefox 11.0\n    //    IE 6, 7, 8, 9\n    //    Opera 11.61\n    //    Safari 5.1.3\n    // Many of these are unusual patterns that are linearly slower and still\n    // pretty fast (eg 1ms to 5ms), so not necessarily worth fixing.\n\n    // TODO(felix8a): \"<script> && && && ... <\\/script>\" is slower on all\n    // browsers.  The hotspot is htmlSplit.\n\n    // TODO(felix8a): \"<p title='>>>>...'><\\/p>\" is slower on all browsers.\n    // This is partly htmlSplit, but the hotspot is parseTagAndAttrs.\n\n    // TODO(felix8a): \"<a><\\/a><a><\\/a>...\" is slower on IE9.\n    // \"<a>1<\\/a><a>1<\\/a>...\" is faster, \"<a><\\/a>2<a><\\/a>2...\" is faster.\n\n    // TODO(felix8a): \"<p<p<p...\" is slower on IE[6-8]\n\n    var continuationMarker = {};\n    function parse(htmlText, handler, param) {\n        var m, p, tagName;\n        var parts = htmlSplit(htmlText);\n        var state = {\n            noMoreGT: false,\n            noMoreEndComments: false\n        };\n        parseCPS(handler, parts, 0, state, param);\n    }\n\n    function continuationMaker(h, parts, initial, state, param) {\n        return function () {\n            parseCPS(h, parts, initial, state, param);\n        };\n    }\n\n    function parseCPS(h, parts, initial, state, param) {\n        try {\n            if (h.startDoc && initial == 0) { h.startDoc(param); }\n            var m, p, tagName;\n            for (var pos = initial, end = parts.length; pos < end;) {\n                var current = parts[pos++];\n                var next = parts[pos];\n                switch (current) {\n                    case '&':\n                        if (ENTITY_RE_2.test(next)) {\n                            if (h.pcdata) {\n                                h.pcdata('&' + next, param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                            pos++;\n                        } else {\n                            if (h.pcdata) { h.pcdata(\"&amp;\", param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\/':\n                        if ((m = /^([-\\w:]+)[^\\'\\\"]*/.exec(next))) {\n                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n                                // fast case, no attribute parsing needed\n                                pos += 2;\n                                tagName = m[1].toLowerCase();\n                                if (h.endTag) {\n                                    h.endTag(tagName, param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                            } else {\n                                // slow case, need to parse attributes\n                                // TODO(felix8a): do we really care about misparsing this?\n                                pos = parseEndTag(\n                                    parts, pos, h, param, continuationMarker, state);\n                            }\n                        } else {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;/', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<':\n                        if (m = /^([-\\w:]+)\\s*\\/?/.exec(next)) {\n                            if (m[0].length === next.length && parts[pos + 1] === '>') {\n                                // fast case, no attribute parsing needed\n                                pos += 2;\n                                tagName = m[1].toLowerCase();\n                                if (h.startTag) {\n                                    h.startTag(tagName, [], param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                                // tags like <script> and <textarea> have special parsing\n                                var eflags = html4.ELEMENTS[tagName];\n                                if (eflags & EFLAGS_TEXT) {\n                                    var tag = { name: tagName, next: pos, eflags: eflags };\n                                    pos = parseText(\n                                        parts, tag, h, param, continuationMarker, state);\n                                }\n                            } else {\n                                // slow case, need to parse attributes\n                                pos = parseStartTag(\n                                    parts, pos, h, param, continuationMarker, state);\n                            }\n                        } else {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\!--':\n                        // The pathological case is n copies of '<\\!--' without '-->', and\n                        // repeated failure to find '-->' is quadratic.  We avoid that by\n                        // remembering when search for '-->' fails.\n                        if (!state.noMoreEndComments) {\n                            // A comment <\\!--x--> is split into three tokens:\n                            //   '<\\!--', 'x--', '>'\n                            // We want to find the next '>' token that has a preceding '--'.\n                            // pos is at the 'x--'.\n                            for (p = pos + 1; p < end; p++) {\n                                if (parts[p] === '>' && /--$/.test(parts[p - 1])) { break; }\n                            }\n                            if (p < end) {\n                                if (h.comment) {\n                                    var comment = parts.slice(pos, p).join('');\n                                    h.comment(\n                                        comment.substr(0, comment.length - 2), param,\n                                        continuationMarker,\n                                        continuationMaker(h, parts, p + 1, state, param));\n                                }\n                                pos = p + 1;\n                            } else {\n                                state.noMoreEndComments = true;\n                            }\n                        }\n                        if (state.noMoreEndComments) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;!--', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '<\\!':\n                        if (!/^\\w/.test(next)) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;!', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        } else {\n                            // similar to noMoreEndComment logic\n                            if (!state.noMoreGT) {\n                                for (p = pos + 1; p < end; p++) {\n                                    if (parts[p] === '>') { break; }\n                                }\n                                if (p < end) {\n                                    pos = p + 1;\n                                } else {\n                                    state.noMoreGT = true;\n                                }\n                            }\n                            if (state.noMoreGT) {\n                                if (h.pcdata) {\n                                    h.pcdata('&lt;!', param, continuationMarker,\n                                        continuationMaker(h, parts, pos, state, param));\n                                }\n                            }\n                        }\n                        break;\n                    case '<?':\n                        // similar to noMoreEndComment logic\n                        if (!state.noMoreGT) {\n                            for (p = pos + 1; p < end; p++) {\n                                if (parts[p] === '>') { break; }\n                            }\n                            if (p < end) {\n                                pos = p + 1;\n                            } else {\n                                state.noMoreGT = true;\n                            }\n                        }\n                        if (state.noMoreGT) {\n                            if (h.pcdata) {\n                                h.pcdata('&lt;?', param, continuationMarker,\n                                    continuationMaker(h, parts, pos, state, param));\n                            }\n                        }\n                        break;\n                    case '>':\n                        if (h.pcdata) {\n                            h.pcdata(\"&gt;\", param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                        }\n                        break;\n                    case '':\n                        break;\n                    default:\n                        if (h.pcdata) {\n                            h.pcdata(current, param, continuationMarker,\n                                continuationMaker(h, parts, pos, state, param));\n                        }\n                        break;\n                }\n            }\n            if (h.endDoc) { h.endDoc(param); }\n        } catch (e) {\n            if (e !== continuationMarker) { throw e; }\n        }\n    }\n\n    // Split str into parts for the html parser.\n    function htmlSplit(str) {\n        // can't hoist this out of the function because of the re.exec loop.\n        var re = /(<\\/|<\\!--|<[!?]|[&<>])/g;\n        str += '';\n        if (splitWillCapture) {\n            return str.split(re);\n        } else {\n            var parts = [];\n            var lastPos = 0;\n            var m;\n            while ((m = re.exec(str)) !== null) {\n                parts.push(str.substring(lastPos, m.index));\n                parts.push(m[0]);\n                lastPos = m.index + m[0].length;\n            }\n            parts.push(str.substring(lastPos));\n            return parts;\n        }\n    }\n\n    function parseEndTag(parts, pos, h, param, continuationMarker, state) {\n        var tag = parseTagAndAttrs(parts, pos);\n        // drop unclosed tags\n        if (!tag) { return parts.length; }\n        if (h.endTag) {\n            h.endTag(tag.name, param, continuationMarker,\n                continuationMaker(h, parts, pos, state, param));\n        }\n        return tag.next;\n    }\n\n    function parseStartTag(parts, pos, h, param, continuationMarker, state) {\n        var tag = parseTagAndAttrs(parts, pos);\n        // drop unclosed tags\n        if (!tag) { return parts.length; }\n        if (h.startTag) {\n            h.startTag(tag.name, tag.attrs, param, continuationMarker,\n                continuationMaker(h, parts, tag.next, state, param));\n        }\n        // tags like <script> and <textarea> have special parsing\n        if (tag.eflags & EFLAGS_TEXT) {\n            return parseText(parts, tag, h, param, continuationMarker, state);\n        } else {\n            return tag.next;\n        }\n    }\n\n    var endTagRe = {};\n\n    // Tags like <script> and <textarea> are flagged as CDATA or RCDATA,\n    // which means everything is text until we see the correct closing tag.\n    function parseText(parts, tag, h, param, continuationMarker, state) {\n        var end = parts.length;\n        if (!endTagRe.hasOwnProperty(tag.name)) {\n            endTagRe[tag.name] = new RegExp('^' + tag.name + '(?:[\\\\s\\\\/]|$)', 'i');\n        }\n        var re = endTagRe[tag.name];\n        var first = tag.next;\n        var p = tag.next + 1;\n        for (; p < end; p++) {\n            if (parts[p - 1] === '<\\/' && re.test(parts[p])) { break; }\n        }\n        if (p < end) { p -= 1; }\n        var buf = parts.slice(first, p).join('');\n        if (tag.eflags & html4.eflags['CDATA']) {\n            if (h.cdata) {\n                h.cdata(buf, param, continuationMarker,\n                    continuationMaker(h, parts, p, state, param));\n            }\n        } else if (tag.eflags & html4.eflags['RCDATA']) {\n            if (h.rcdata) {\n                h.rcdata(normalizeRCData(buf), param, continuationMarker,\n                    continuationMaker(h, parts, p, state, param));\n            }\n        } else {\n            throw new Error('bug');\n        }\n        return p;\n    }\n\n    // at this point, parts[pos-1] is either \"<\" or \"<\\/\".\n    function parseTagAndAttrs(parts, pos) {\n        var m = /^([-\\w:]+)/.exec(parts[pos]);\n        var tag = {};\n        tag.name = m[1].toLowerCase();\n        tag.eflags = html4.ELEMENTS[tag.name];\n        var buf = parts[pos].substr(m[0].length);\n        // Find the next '>'.  We optimistically assume this '>' is not in a\n        // quoted context, and further down we fix things up if it turns out to\n        // be quoted.\n        var p = pos + 1;\n        var end = parts.length;\n        for (; p < end; p++) {\n            if (parts[p] === '>') { break; }\n            buf += parts[p];\n        }\n        if (end <= p) { return void 0; }\n        var attrs = [];\n        while (buf !== '') {\n            m = ATTR_RE.exec(buf);\n            if (!m) {\n                // No attribute found: skip garbage\n                buf = buf.replace(/^[\\s\\S][^a-z\\s]*/, '');\n\n            } else if ((m[4] && !m[5]) || (m[6] && !m[7])) {\n                // Unterminated quote: slurp to the next unquoted '>'\n                var quote = m[4] || m[6];\n                var sawQuote = false;\n                var abuf = [buf, parts[p++]];\n                for (; p < end; p++) {\n                    if (sawQuote) {\n                        if (parts[p] === '>') { break; }\n                    } else if (0 <= parts[p].indexOf(quote)) {\n                        sawQuote = true;\n                    }\n                    abuf.push(parts[p]);\n                }\n                // Slurp failed: lose the garbage\n                if (end <= p) { break; }\n                // Otherwise retry attribute parsing\n                buf = abuf.join('');\n                continue;\n\n            } else {\n                // We have an attribute\n                var aName = m[1].toLowerCase();\n                var aValue = m[2] ? decodeValue(m[3]) : '';\n                attrs.push(aName, aValue);\n                buf = buf.substr(m[0].length);\n            }\n        }\n        tag.attrs = attrs;\n        tag.next = p + 1;\n        return tag;\n    }\n\n    function decodeValue(v) {\n        var q = v.charCodeAt(0);\n        if (q === 0x22 || q === 0x27) { // \" or '\n            v = v.substr(1, v.length - 2);\n        }\n        return unescapeEntities(stripNULs(v));\n    }\n\n    /**\n     * Returns a function that strips unsafe tags and attributes from html.\n     * @param {function(string, Array.<string>): ?Array.<string>} tagPolicy\n     *     A function that takes (tagName, attribs[]), where tagName is a key in\n     *     html4.ELEMENTS and attribs is an array of alternating attribute names\n     *     and values.  It should return a record (as follows), or null to delete\n     *     the element.  It's okay for tagPolicy to modify the attribs array,\n     *     but the same array is reused, so it should not be held between calls.\n     *     Record keys:\n     *        attribs: (required) Sanitized attributes array.\n     *        tagName: Replacement tag name.\n     * @return {function(string, Array)} A function that sanitizes a string of\n     *     HTML and appends result strings to the second argument, an array.\n     */\n    function makeHtmlSanitizer(tagPolicy) {\n        var stack;\n        var ignoring;\n        var emit = function (text, out) {\n            if (!ignoring) { out.push(text); }\n        };\n        return makeSaxParser({\n            'startDoc': function(_) {\n                stack = [];\n                ignoring = false;\n            },\n            'startTag': function(tagNameOrig, attribs, out) {\n                if (ignoring) { return; }\n                if (!html4.ELEMENTS.hasOwnProperty(tagNameOrig)) { return; }\n                var eflagsOrig = html4.ELEMENTS[tagNameOrig];\n                if (eflagsOrig & html4.eflags['FOLDABLE']) {\n                    return;\n                }\n\n                var decision = tagPolicy(tagNameOrig, attribs);\n                if (!decision) {\n                    ignoring = !(eflagsOrig & html4.eflags['EMPTY']);\n                    return;\n                } else if (typeof decision !== 'object') {\n                    throw new Error('tagPolicy did not return object (old API?)');\n                }\n                if ('attribs' in decision) {\n                    attribs = decision['attribs'];\n                } else {\n                    throw new Error('tagPolicy gave no attribs');\n                }\n                var eflagsRep;\n                var tagNameRep;\n                if ('tagName' in decision) {\n                    tagNameRep = decision['tagName'];\n                    eflagsRep = html4.ELEMENTS[tagNameRep];\n                } else {\n                    tagNameRep = tagNameOrig;\n                    eflagsRep = eflagsOrig;\n                }\n                // TODO(mikesamuel): relying on tagPolicy not to insert unsafe\n                // attribute names.\n\n                // If this is an optional-end-tag element and either this element or its\n                // previous like sibling was rewritten, then insert a close tag to\n                // preserve structure.\n                if (eflagsOrig & html4.eflags['OPTIONAL_ENDTAG']) {\n                    var onStack = stack[stack.length - 1];\n                    if (onStack && onStack.orig === tagNameOrig &&\n                        (onStack.rep !== tagNameRep || tagNameOrig !== tagNameRep)) {\n                        out.push('<\\/', onStack.rep, '>');\n                    }\n                }\n\n                if (!(eflagsOrig & html4.eflags['EMPTY'])) {\n                    stack.push({orig: tagNameOrig, rep: tagNameRep});\n                }\n\n                out.push('<', tagNameRep);\n                for (var i = 0, n = attribs.length; i < n; i += 2) {\n                    var attribName = attribs[i],\n                        value = attribs[i + 1];\n                    if (value !== null && value !== void 0) {\n                        out.push(' ', attribName, '=\"', escapeAttrib(value), '\"');\n                    }\n                }\n                out.push('>');\n\n                if ((eflagsOrig & html4.eflags['EMPTY'])\n                    && !(eflagsRep & html4.eflags['EMPTY'])) {\n                    // replacement is non-empty, synthesize end tag\n                    out.push('<\\/', tagNameRep, '>');\n                }\n            },\n            'endTag': function(tagName, out) {\n                if (ignoring) {\n                    ignoring = false;\n                    return;\n                }\n                if (!html4.ELEMENTS.hasOwnProperty(tagName)) { return; }\n                var eflags = html4.ELEMENTS[tagName];\n                if (!(eflags & (html4.eflags['EMPTY'] | html4.eflags['FOLDABLE']))) {\n                    var index;\n                    if (eflags & html4.eflags['OPTIONAL_ENDTAG']) {\n                        for (index = stack.length; --index >= 0;) {\n                            var stackElOrigTag = stack[index].orig;\n                            if (stackElOrigTag === tagName) { break; }\n                            if (!(html4.ELEMENTS[stackElOrigTag] &\n                                html4.eflags['OPTIONAL_ENDTAG'])) {\n                                // Don't pop non optional end tags looking for a match.\n                                return;\n                            }\n                        }\n                    } else {\n                        for (index = stack.length; --index >= 0;) {\n                            if (stack[index].orig === tagName) { break; }\n                        }\n                    }\n                    if (index < 0) { return; }  // Not opened.\n                    for (var i = stack.length; --i > index;) {\n                        var stackElRepTag = stack[i].rep;\n                        if (!(html4.ELEMENTS[stackElRepTag] &\n                            html4.eflags['OPTIONAL_ENDTAG'])) {\n                            out.push('<\\/', stackElRepTag, '>');\n                        }\n                    }\n                    if (index < stack.length) {\n                        tagName = stack[index].rep;\n                    }\n                    stack.length = index;\n                    out.push('<\\/', tagName, '>');\n                }\n            },\n            'pcdata': emit,\n            'rcdata': emit,\n            'cdata': emit,\n            'endDoc': function(out) {\n                for (; stack.length; stack.length--) {\n                    out.push('<\\/', stack[stack.length - 1].rep, '>');\n                }\n            }\n        });\n    }\n\n    var ALLOWED_URI_SCHEMES = /^(?:https?|mailto)$/i;\n\n    function safeUri(uri, effect, ltype, hints, naiveUriRewriter) {\n        if (!naiveUriRewriter) { return null; }\n        try {\n            var parsed = URI.parse('' + uri);\n            if (parsed) {\n                if (!parsed.hasScheme() ||\n                    ALLOWED_URI_SCHEMES.test(parsed.getScheme())) {\n                    var safe = naiveUriRewriter(parsed, effect, ltype, hints);\n                    return safe ? safe.toString() : null;\n                }\n            }\n        } catch (e) {\n            return null;\n        }\n        return null;\n    }\n\n    function log(logger, tagName, attribName, oldValue, newValue) {\n        if (!attribName) {\n            logger(tagName + \" removed\", {\n                change: \"removed\",\n                tagName: tagName\n            });\n        }\n        if (oldValue !== newValue) {\n            var changed = \"changed\";\n            if (oldValue && !newValue) {\n                changed = \"removed\";\n            } else if (!oldValue && newValue)  {\n                changed = \"added\";\n            }\n            logger(tagName + \".\" + attribName + \" \" + changed, {\n                change: changed,\n                tagName: tagName,\n                attribName: attribName,\n                oldValue: oldValue,\n                newValue: newValue\n            });\n        }\n    }\n\n    function lookupAttribute(map, tagName, attribName) {\n        var attribKey;\n        attribKey = tagName + '::' + attribName;\n        if (map.hasOwnProperty(attribKey)) {\n            return map[attribKey];\n        }\n        attribKey = '*::' + attribName;\n        if (map.hasOwnProperty(attribKey)) {\n            return map[attribKey];\n        }\n        return void 0;\n    }\n    function getAttributeType(tagName, attribName) {\n        return lookupAttribute(html4.ATTRIBS, tagName, attribName);\n    }\n    function getLoaderType(tagName, attribName) {\n        return lookupAttribute(html4.LOADERTYPES, tagName, attribName);\n    }\n    function getUriEffect(tagName, attribName) {\n        return lookupAttribute(html4.URIEFFECTS, tagName, attribName);\n    }\n\n    /**\n     * Sanitizes attributes on an HTML tag.\n     * @param {string} tagName An HTML tag name in lowercase.\n     * @param {Array.<?string>} attribs An array of alternating names and values.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes; it can return a new string value, or null to\n     *     delete the attribute.  If unspecified, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes; it can return a new string value, or null to delete\n     *     the attribute.  If unspecified, these attributes are kept unchanged.\n     * @return {Array.<?string>} The sanitized attributes as a list of alternating\n     *     names and values, where a null value means to omit the attribute.\n     */\n    function sanitizeAttribs(tagName, attribs,\n        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        // TODO(felix8a): it's obnoxious that domado duplicates much of this\n        // TODO(felix8a): maybe consistently enforce constraints like target=\n        for (var i = 0; i < attribs.length; i += 2) {\n            var attribName = attribs[i];\n            var value = attribs[i + 1];\n            var oldValue = value;\n            var atype = null, attribKey;\n            if ((attribKey = tagName + '::' + attribName,\n                html4.ATTRIBS.hasOwnProperty(attribKey)) ||\n                (attribKey = '*::' + attribName,\n                    html4.ATTRIBS.hasOwnProperty(attribKey))) {\n                atype = html4.ATTRIBS[attribKey];\n            }\n            if (atype !== null) {\n                switch (atype) {\n                    case html4.atype['NONE']: break;\n                    case html4.atype['SCRIPT']:\n                        value = null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['STYLE']:\n                        if ('undefined' === typeof parseCssDeclarations) {\n                            value = null;\n                            if (opt_logger) {\n                                log(opt_logger, tagName, attribName, oldValue, value);\n                            }\n                            break;\n                        }\n                        var sanitizedDeclarations = [];\n                        parseCssDeclarations(\n                            value,\n                            {\n                                'declaration': function (property, tokens) {\n                                    var normProp = property.toLowerCase();\n                                    sanitizeCssProperty(\n                                        normProp, tokens,\n                                        opt_naiveUriRewriter\n                                            ? function (url) {\n                                            return safeUri(\n                                                url, html4.ueffects.SAME_DOCUMENT,\n                                                html4.ltypes.SANDBOXED,\n                                                {\n                                                    \"TYPE\": \"CSS\",\n                                                    \"CSS_PROP\": normProp\n                                                }, opt_naiveUriRewriter);\n                                        }\n                                            : null);\n                                    if (tokens.length) {\n                                        sanitizedDeclarations.push(\n                                            normProp + ': ' + tokens.join(' '));\n                                    }\n                                }\n                            });\n                        value = sanitizedDeclarations.length > 0 ?\n                            sanitizedDeclarations.join(' ; ') : null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['ID']:\n                    case html4.atype['IDREF']:\n                    case html4.atype['IDREFS']:\n                    case html4.atype['GLOBAL_NAME']:\n                    case html4.atype['LOCAL_NAME']:\n                    case html4.atype['CLASSES']:\n                        value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['URI']:\n                        value = safeUri(value,\n                            getUriEffect(tagName, attribName),\n                            getLoaderType(tagName, attribName),\n                            {\n                                \"TYPE\": \"MARKUP\",\n                                \"XML_ATTR\": attribName,\n                                \"XML_TAG\": tagName\n                            }, opt_naiveUriRewriter);\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    case html4.atype['URI_FRAGMENT']:\n                        if (value && '#' === value.charAt(0)) {\n                            value = value.substring(1);  // remove the leading '#'\n                            value = opt_nmTokenPolicy ? opt_nmTokenPolicy(value) : value;\n                            if (value !== null && value !== void 0) {\n                                value = '#' + value;  // restore the leading '#'\n                            }\n                        } else {\n                            value = null;\n                        }\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                    default:\n                        value = null;\n                        if (opt_logger) {\n                            log(opt_logger, tagName, attribName, oldValue, value);\n                        }\n                        break;\n                }\n            } else {\n                value = null;\n                if (opt_logger) {\n                    log(opt_logger, tagName, attribName, oldValue, value);\n                }\n            }\n            attribs[i + 1] = value;\n        }\n        return attribs;\n    }\n\n    /**\n     * Creates a tag policy that omits all tags marked UNSAFE in html4-defs.js\n     * and applies the default attribute sanitizer with the supplied policy for\n     * URI attributes and NMTOKEN attributes.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes.  If not given, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes.  If not given, such attributes are left unchanged.\n     * @return {function(string, Array.<?string>)} A tagPolicy suitable for\n     *     passing to html.sanitize.\n     */\n    function makeTagPolicy(\n        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        return function(tagName, attribs) {\n            if (!(html4.ELEMENTS[tagName] & html4.eflags['UNSAFE'])) {\n                return {\n                    'attribs': sanitizeAttribs(tagName, attribs,\n                        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger)\n                };\n            } else {\n                if (opt_logger) {\n                    log(opt_logger, tagName, undefined, undefined, undefined);\n                }\n            }\n        };\n    }\n\n    /**\n     * Sanitizes HTML tags and attributes according to a given policy.\n     * @param {string} inputHtml The HTML to sanitize.\n     * @param {function(string, Array.<?string>)} tagPolicy A function that\n     *     decides which tags to accept and sanitizes their attributes (see\n     *     makeHtmlSanitizer above for details).\n     * @return {string} The sanitized HTML.\n     */\n    function sanitizeWithPolicy(inputHtml, tagPolicy) {\n        var outputArray = [];\n        makeHtmlSanitizer(tagPolicy)(inputHtml, outputArray);\n        return outputArray.join('');\n    }\n\n    /**\n     * Strips unsafe tags and attributes from HTML.\n     * @param {string} inputHtml The HTML to sanitize.\n     * @param {?function(?string): ?string} opt_naiveUriRewriter A transform to\n     *     apply to URI attributes.  If not given, URI attributes are deleted.\n     * @param {function(?string): ?string} opt_nmTokenPolicy A transform to apply\n     *     to attributes containing HTML names, element IDs, and space-separated\n     *     lists of classes.  If not given, such attributes are left unchanged.\n     */\n    function sanitize(inputHtml,\n        opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n        var tagPolicy = makeTagPolicy(\n            opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n        return sanitizeWithPolicy(inputHtml, tagPolicy);\n    }\n\n    // Export both quoted and unquoted names for Closure linkage.\n    var html = {};\n    html.escapeAttrib = html['escapeAttrib'] = escapeAttrib;\n    html.makeHtmlSanitizer = html['makeHtmlSanitizer'] = makeHtmlSanitizer;\n    html.makeSaxParser = html['makeSaxParser'] = makeSaxParser;\n    html.makeTagPolicy = html['makeTagPolicy'] = makeTagPolicy;\n    html.normalizeRCData = html['normalizeRCData'] = normalizeRCData;\n    html.sanitize = html['sanitize'] = sanitize;\n    html.sanitizeAttribs = html['sanitizeAttribs'] = sanitizeAttribs;\n    html.sanitizeWithPolicy = html['sanitizeWithPolicy'] = sanitizeWithPolicy;\n    html.unescapeEntities = html['unescapeEntities'] = unescapeEntities;\n    return html;\n})(html4);\n\nvar html_sanitize = html['sanitize'];\n\n// Exports for Closure compiler.  Note this file is also cajoled\n// for domado and run in an environment without 'window'\nif (typeof window !== 'undefined') {\n    window['html'] = html;\n    window['html_sanitize'] = html_sanitize;\n}\n\nvar Sanitizer = {};\n\n// Ensure backwards compatibility\nSanitizer.escapeAttrib = html.escapeAttrib;\nSanitizer.makeHtmlSanitizer = html.makeHtmlSanitizer;\nSanitizer.makeSaxParser = html.makeSaxParser;\nSanitizer.makeTagPolicy = html.makeTagPolicy;\nSanitizer.normalizeRCData = html.normalizeRCData\nSanitizer.sanitizeAttribs = html.sanitizeAttribs\nSanitizer.sanitizeWithPolicy = html.sanitizeWithPolicy\nSanitizer.unescapeEntities = html.unescapeEntities\nSanitizer.escape = html.escapeAttrib;\n\n// https://github.com/theSmaw/Caja-HTML-Sanitizer/issues/8\nSanitizer.sanitize = function(inputHtml, opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger) {\n    if (typeof(inputHtml) === \"string\") {\n        inputHtml = inputHtml.replace(/<([a-zA-Z]+)([^>]*)\\/>/g, '<$1$2></$1>');\n    }\n    \n    if (inputHtml) {\n        return html.sanitize(inputHtml, opt_naiveUriRewriter, opt_nmTokenPolicy, opt_logger);\n    }\n    else {\n        return inputHtml;\n    }\n    \n}\n\n// the browser, add 'Sanitizer' as a global object via a string identifier,\n// for Closure Compiler \"advanced\" mode.\nif (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n        exports = module.exports = Sanitizer;\n    }\n    exports.Sanitizer = Sanitizer;\n} else {\n    this.Sanitizer = Sanitizer;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sanitizer/sanitizer.js\n ** module id = 523\n ** module chunks = 0\n **/","/* Copyright Google Inc.\n * Licensed under the Apache Licence Version 2.0\n * Autogenerated at Fri Aug 13 11:26:55 PDT 2010\n * @provides html4\n */\nvar html4 = {};\nhtml4 .atype = {\n    'NONE': 0,\n    'URI': 1,\n    'URI_FRAGMENT': 11,\n    'SCRIPT': 2,\n    'STYLE': 3,\n    'ID': 4,\n    'IDREF': 5,\n    'IDREFS': 6,\n    'GLOBAL_NAME': 7,\n    'LOCAL_NAME': 8,\n    'CLASSES': 9,\n    'FRAME_TARGET': 10\n};\nhtml4 .ATTRIBS = {\n    '*::class': 9,\n    '*::dir': 0,\n    '*::id': 4,\n    '*::lang': 0,\n    '*::onclick': 2,\n    '*::ondblclick': 2,\n    '*::onkeydown': 2,\n    '*::onkeypress': 2,\n    '*::onkeyup': 2,\n    '*::onload': 2,\n    '*::onmousedown': 2,\n    '*::onmousemove': 2,\n    '*::onmouseout': 2,\n    '*::onmouseover': 2,\n    '*::onmouseup': 2,\n    '*::style': 3,\n    '*::title': 0,\n    'a::accesskey': 0,\n    'a::coords': 0,\n    'a::href': 1,\n    'a::hreflang': 0,\n    'a::name': 7,\n    'a::onblur': 2,\n    'a::onfocus': 2,\n    'a::rel': 0,\n    'a::rev': 0,\n    'a::shape': 0,\n    'a::tabindex': 0,\n    'a::target': 10,\n    'a::type': 0,\n    'area::accesskey': 0,\n    'area::alt': 0,\n    'area::coords': 0,\n    'area::href': 1,\n    'area::nohref': 0,\n    'area::onblur': 2,\n    'area::onfocus': 2,\n    'area::shape': 0,\n    'area::tabindex': 0,\n    'area::target': 10,\n    'bdo::dir': 0,\n    'blockquote::cite': 1,\n    'br::clear': 0,\n    'button::accesskey': 0,\n    'button::disabled': 0,\n    'button::name': 8,\n    'button::onblur': 2,\n    'button::onfocus': 2,\n    'button::tabindex': 0,\n    'button::type': 0,\n    'button::value': 0,\n    'caption::align': 0,\n    'col::align': 0,\n    'col::char': 0,\n    'col::charoff': 0,\n    'col::span': 0,\n    'col::valign': 0,\n    'col::width': 0,\n    'colgroup::align': 0,\n    'colgroup::char': 0,\n    'colgroup::charoff': 0,\n    'colgroup::span': 0,\n    'colgroup::valign': 0,\n    'colgroup::width': 0,\n    'del::cite': 1,\n    'del::datetime': 0,\n    'dir::compact': 0,\n    'div::align': 0,\n    'dl::compact': 0,\n    'font::color': 0,\n    'font::face': 0,\n    'font::size': 0,\n    'form::accept': 0,\n    'form::action': 1,\n    'form::autocomplete': 0,\n    'form::enctype': 0,\n    'form::method': 0,\n    'form::name': 7,\n    'form::onreset': 2,\n    'form::onsubmit': 2,\n    'form::target': 10,\n    'h1::align': 0,\n    'h2::align': 0,\n    'h3::align': 0,\n    'h4::align': 0,\n    'h5::align': 0,\n    'h6::align': 0,\n    'hr::align': 0,\n    'hr::noshade': 0,\n    'hr::size': 0,\n    'hr::width': 0,\n    'iframe::align': 0,\n    'iframe::frameborder': 0,\n    'iframe::height': 0,\n    'iframe::marginheight': 0,\n    'iframe::marginwidth': 0,\n    'iframe::width': 0,\n    'img::align': 0,\n    'img::alt': 0,\n    'img::border': 0,\n    'img::height': 0,\n    'img::hspace': 0,\n    'img::ismap': 0,\n    'img::name': 7,\n    'img::src': 1,\n    'img::usemap': 11,\n    'img::vspace': 0,\n    'img::width': 0,\n    'input::accept': 0,\n    'input::accesskey': 0,\n    'input::align': 0,\n    'input::alt': 0,\n    'input::autocomplete': 0,\n    'input::checked': 0,\n    'input::disabled': 0,\n    'input::ismap': 0,\n    'input::maxlength': 0,\n    'input::name': 8,\n    'input::onblur': 2,\n    'input::onchange': 2,\n    'input::onfocus': 2,\n    'input::onselect': 2,\n    'input::readonly': 0,\n    'input::size': 0,\n    'input::src': 1,\n    'input::tabindex': 0,\n    'input::type': 0,\n    'input::usemap': 11,\n    'input::value': 0,\n    'ins::cite': 1,\n    'ins::datetime': 0,\n    'label::accesskey': 0,\n    'label::for': 5,\n    'label::onblur': 2,\n    'label::onfocus': 2,\n    'legend::accesskey': 0,\n    'legend::align': 0,\n    'li::type': 0,\n    'li::value': 0,\n    'map::name': 7,\n    'menu::compact': 0,\n    'ol::compact': 0,\n    'ol::start': 0,\n    'ol::type': 0,\n    'optgroup::disabled': 0,\n    'optgroup::label': 0,\n    'option::disabled': 0,\n    'option::label': 0,\n    'option::selected': 0,\n    'option::value': 0,\n    'p::align': 0,\n    'pre::width': 0,\n    'q::cite': 1,\n    'select::disabled': 0,\n    'select::multiple': 0,\n    'select::name': 8,\n    'select::onblur': 2,\n    'select::onchange': 2,\n    'select::onfocus': 2,\n    'select::size': 0,\n    'select::tabindex': 0,\n    'table::align': 0,\n    'table::bgcolor': 0,\n    'table::border': 0,\n    'table::cellpadding': 0,\n    'table::cellspacing': 0,\n    'table::frame': 0,\n    'table::rules': 0,\n    'table::summary': 0,\n    'table::width': 0,\n    'tbody::align': 0,\n    'tbody::char': 0,\n    'tbody::charoff': 0,\n    'tbody::valign': 0,\n    'td::abbr': 0,\n    'td::align': 0,\n    'td::axis': 0,\n    'td::bgcolor': 0,\n    'td::char': 0,\n    'td::charoff': 0,\n    'td::colspan': 0,\n    'td::headers': 6,\n    'td::height': 0,\n    'td::nowrap': 0,\n    'td::rowspan': 0,\n    'td::scope': 0,\n    'td::valign': 0,\n    'td::width': 0,\n    'textarea::accesskey': 0,\n    'textarea::cols': 0,\n    'textarea::disabled': 0,\n    'textarea::name': 8,\n    'textarea::onblur': 2,\n    'textarea::onchange': 2,\n    'textarea::onfocus': 2,\n    'textarea::onselect': 2,\n    'textarea::readonly': 0,\n    'textarea::rows': 0,\n    'textarea::tabindex': 0,\n    'tfoot::align': 0,\n    'tfoot::char': 0,\n    'tfoot::charoff': 0,\n    'tfoot::valign': 0,\n    'th::abbr': 0,\n    'th::align': 0,\n    'th::axis': 0,\n    'th::bgcolor': 0,\n    'th::char': 0,\n    'th::charoff': 0,\n    'th::colspan': 0,\n    'th::headers': 6,\n    'th::height': 0,\n    'th::nowrap': 0,\n    'th::rowspan': 0,\n    'th::scope': 0,\n    'th::valign': 0,\n    'th::width': 0,\n    'thead::align': 0,\n    'thead::char': 0,\n    'thead::charoff': 0,\n    'thead::valign': 0,\n    'tr::align': 0,\n    'tr::bgcolor': 0,\n    'tr::char': 0,\n    'tr::charoff': 0,\n    'tr::valign': 0,\n    'ul::compact': 0,\n    'ul::type': 0\n};\nhtml4 .eflags = {\n    'OPTIONAL_ENDTAG': 1,\n    'EMPTY': 2,\n    'CDATA': 4,\n    'RCDATA': 8,\n    'UNSAFE': 16,\n    'FOLDABLE': 32,\n    'SCRIPT': 64,\n    'STYLE': 128\n};\nhtml4 .ELEMENTS = {\n    'a': 0,\n    'abbr': 0,\n    'acronym': 0,\n    'address': 0,\n    'applet': 16,\n    'area': 2,\n    'b': 0,\n    'base': 18,\n    'basefont': 18,\n    'bdo': 0,\n    'big': 0,\n    'blockquote': 0,\n    'body': 49,\n    'br': 2,\n    'button': 0,\n    'caption': 0,\n    'center': 0,\n    'cite': 0,\n    'code': 0,\n    'col': 2,\n    'colgroup': 1,\n    'dd': 1,\n    'del': 0,\n    'dfn': 0,\n    'dir': 0,\n    'div': 0,\n    'dl': 0,\n    'dt': 1,\n    'em': 0,\n    'fieldset': 0,\n    'font': 0,\n    'form': 0,\n    'frame': 18,\n    'frameset': 16,\n    'h1': 0,\n    'h2': 0,\n    'h3': 0,\n    'h4': 0,\n    'h5': 0,\n    'h6': 0,\n    'head': 49,\n    'hr': 2,\n    'html': 49,\n    'i': 0,\n    'iframe': 4,\n    'img': 2,\n    'input': 2,\n    'ins': 0,\n    'isindex': 18,\n    'kbd': 0,\n    'label': 0,\n    'legend': 0,\n    'li': 1,\n    'link': 18,\n    'map': 0,\n    'menu': 0,\n    'meta': 18,\n    'noframes': 20,\n    'noscript': 20,\n    'object': 16,\n    'ol': 0,\n    'optgroup': 0,\n    'option': 1,\n    'p': 1,\n    'param': 18,\n    'pre': 0,\n    'q': 0,\n    's': 0,\n    'samp': 0,\n    'script': 84,\n    'select': 0,\n    'small': 0,\n    'span': 0,\n    'strike': 0,\n    'strong': 0,\n    'style': 148,\n    'sub': 0,\n    'sup': 0,\n    'table': 0,\n    'tbody': 1,\n    'td': 1,\n    'textarea': 8,\n    'tfoot': 1,\n    'th': 1,\n    'thead': 1,\n    'title': 24,\n    'tr': 1,\n    'tt': 0,\n    'u': 0,\n    'ul': 0,\n    'var': 0\n};\n\nhtml4 .URIEFFECTS = {\n\n};\nhtml4 .LOADERTYPES = {}\n\nif (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n        exports = module.exports = html4;\n    }\n    exports.URI = html4;\n} else {\n\n    // Exports for closure compiler.\n    if (typeof window !== 'undefined') {\n        window['html4'] = html4;\n    }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/sanitizer/lib/html4.js\n ** module id = 524\n ** module chunks = 0\n **/","import GlanceActions from \"actions/glance_actions\";\nimport Utils from \"helpers/utils\";\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AppConfig from \"config/app_config\";\nimport {Validator as JSONValidator} from 'jsonschema';\nimport glanceMetadataJsonSchema from 'schemas/glance_metadata.json';\nimport logger from 'helpers/logger';\nimport IntegrationHelper from \"helpers/integration_helper\";\n\nlet jsonValidator = new JSONValidator();\n\nclass GlanceHelper {\n  fetchGlanceMetadataForRoom(room_id) {\n\n    let startTimestamp = Utils.timings.now();\n\n    AppDispatcher.dispatch('API:fetch-all-glances-for-room', {\n      room_id: room_id,\n      timeout: AppConfig.integrations.glance_remote_metadata_timeout\n    }, (fetch_result) => {\n      fetch_result.then((glances) => {\n        glances.forEach(({promise, key}) => {\n          GlanceActions.glanceMetadataLoading(room_id, key);\n          promise.then(({path, data, result}) => {\n            let glance = this._createGlanceFromKey(key, path);\n            this._processGlanceReturnedData(room_id, glance, data, result, startTimestamp);\n          });\n        });\n        GlanceActions.roomFinishedLoading(room_id, true);\n      }).catch((err) => {\n        logger.warn('[HC-Integrations]', `Failed to fetch signed url for room ${room_id} ${err}`);\n        GlanceActions.roomFinishedLoading(room_id, false);\n      });\n    });\n  }\n\n\n  fetchGlanceRemoteMetadata(room_id, glance) {\n    let startTimestamp = Utils.timings.now();\n    AppDispatcher.dispatch('API:request-with-signed-url', {\n      extension: glance,\n      attribute: 'query_url',\n      room_id: room_id,\n      timeout: AppConfig.integrations.glance_remote_metadata_timeout\n    }, {}, (data, result) => {\n      this._processGlanceReturnedData(room_id, glance, data, result, startTimestamp);\n    });\n  }\n\n  _processGlanceReturnedData(room_id, glance, data, result, startTimestamp) {\n    let duration = Math.floor(Utils.timings.now() - startTimestamp);\n    if (!data || data.error || result.status >= 400) {\n\n      GlanceActions.glanceMetadataError(room_id, glance, \"Could not load data for this glance.\", duration);\n\n    } else {\n      if (!this._validateMetadataFromRemote(data, glance)) {\n        GlanceActions.glanceMetadataError(room_id, glance, \"Could not validate data for this glance.\", duration);\n        return;\n      }\n\n      GlanceActions.glanceMetadataFetched(room_id, glance, data, duration);\n    }\n  }\n\n  _validateMetadataFromRemote(data, glance) {\n    var result = jsonValidator.validate(data, glanceMetadataJsonSchema);\n    if (result.errors.length > 0) {\n      logger.warn('[HC-Integrations]', `Invalid schema from ${glance.query_url} for Glance ${glance.full_key}: ${result}`);\n      return false;\n    }\n\n    return true;\n  }\n\n  _createGlanceFromKey(key, path) {\n    return {full_key: key, query_url: path, addon_key: IntegrationHelper.split_full_key(key)[0]};\n  }\n\n}\n\nexport default new GlanceHelper();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/glance_helper.js\n **/","var AppDispatcher = require('dispatchers/app_dispatcher'),\n  AnalyticsDispatcher = require('dispatchers/analytics_dispatcher'),\n  logger = require('helpers/logger');\n\n\nexport default {\n\n  fetchGlanceMetadata: function (room_id, glance, reload_errors = false) {\n    AppDispatcher.dispatch('fetch-glance-metadata', room_id, glance, reload_errors);\n  },\n\n  glanceMetadataLoading: function (room_id, glance_key) {\n    AppDispatcher.dispatch('glance-metadata-loading', room_id, glance_key);\n  },\n\n  glanceMetadataFetched: function (room_id, glance, data, duration) {\n    AppDispatcher.dispatch(\"glance-metadata-fetched\", room_id, glance.full_key, data);\n\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.integrations.glance.fetch.success\",\n      properties: {\n        room_id: room_id,\n        addon_key: glance.addon_key,\n        glance_full_key: glance.full_key,\n        duration: duration\n      }\n    });\n  },\n\n  glanceMetadataError(room_id, glance, error, duration) {\n    logger.warn('[HC-Integrations]', error);\n\n    AppDispatcher.dispatch('glance-metadata-fetched', room_id, glance.full_key, {\n      error: error\n    });\n\n    AnalyticsDispatcher.dispatch(\"analytics-event\", {\n      name: \"hipchat.client.integrations.glance.fetch.error\",\n      properties: {\n        room_id: room_id,\n        addon_key: glance.addon_key,\n        glance_full_key: glance.full_key,\n        error: error,\n        duration: duration\n      }\n    });\n  },\n\n  roomFinishedLoading: function (room_id, success) {\n    AppDispatcher.dispatch('glances-finished-loading-for-room', room_id, success);\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/glance_actions.js\n **/","'use strict';\n\nvar Validator = module.exports.Validator = require('./validator');\n\nmodule.exports.ValidatorResult = require('./helpers').ValidatorResult;\nmodule.exports.ValidationError = require('./helpers').ValidationError;\nmodule.exports.SchemaError = require('./helpers').SchemaError;\n\nmodule.exports.validate = function (instance, schema, options) {\n  var v = new Validator();\n  return v.validate(instance, schema, options);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jsonschema/lib/index.js\n ** module id = 527\n ** module chunks = 0\n **/","'use strict';\n\nvar urilib = require('url');\n\nvar attribute = require('./attribute');\nvar helpers = require('./helpers');\nvar ValidatorResult = helpers.ValidatorResult;\nvar SchemaError = helpers.SchemaError;\nvar SchemaContext = helpers.SchemaContext;\n\n/**\n * Creates a new Validator object\n * @name Validator\n * @constructor\n */\nvar Validator = function Validator () {\n  // Allow a validator instance to override global custom formats or to have their\n  // own custom formats.\n  this.customFormats = Object.create(Validator.prototype.customFormats);\n  this.schemas = {};\n  this.unresolvedRefs = [];\n\n  // Use Object.create to make this extensible without Validator instances stepping on each other's toes.\n  this.types = Object.create(types);\n  this.attributes = Object.create(attribute.validators);\n};\n\n// Allow formats to be registered globally.\nValidator.prototype.customFormats = {};\n\n// Hint at the presence of a property\nValidator.prototype.schemas = null;\nValidator.prototype.types = null;\nValidator.prototype.attributes = null;\nValidator.prototype.unresolvedRefs = null;\n\n/**\n * Adds a schema with a certain urn to the Validator instance.\n * @param schema\n * @param urn\n * @return {Object}\n */\nValidator.prototype.addSchema = function addSchema (schema, uri) {\n  if (!schema) {\n    return null;\n  }\n  var ourUri = uri || schema.id;\n  this.addSubSchema(ourUri, schema);\n  if (ourUri) {\n    this.schemas[ourUri] = schema;\n  }\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchema = function addSubSchema(baseuri, schema) {\n  if(!schema || typeof schema!='object') return;\n  // Mark all referenced schemas so we can tell later which schemas are referred to, but never defined\n  if(schema.$ref){\n    var resolvedUri = urilib.resolve(baseuri, schema.$ref);\n    // Only mark unknown schemas as unresolved\n    if (this.schemas[resolvedUri] === undefined) {\n      this.schemas[resolvedUri] = null;\n      this.unresolvedRefs.push(resolvedUri);\n    }\n    return;\n  }\n  var ourUri = schema.id && urilib.resolve(baseuri, schema.id);\n  var ourBase = ourUri || baseuri;\n  if (ourUri) {\n    if(this.schemas[ourUri]){\n      if(!helpers.deepCompareStrict(this.schemas[ourUri], schema)){\n        throw new Error('Schema <'+schema+'> already exists with different definition');\n      }\n      return this.schemas[ourUri];\n    }\n    this.schemas[ourUri] = schema;\n    var documentUri = ourUri.replace(/^([^#]*)#$/, '$1');\n    this.schemas[documentUri] = schema;\n  }\n  this.addSubSchemaArray(ourBase, ((schema.items instanceof Array)?schema.items:[schema.items]));\n  this.addSubSchemaArray(ourBase, ((schema.extends instanceof Array)?schema.extends:[schema.extends]));\n  this.addSubSchema(ourBase, schema.additionalItems);\n  this.addSubSchemaObject(ourBase, schema.properties);\n  this.addSubSchema(ourBase, schema.additionalProperties);\n  this.addSubSchemaObject(ourBase, schema.definitions);\n  this.addSubSchemaObject(ourBase, schema.patternProperties);\n  this.addSubSchemaObject(ourBase, schema.dependencies);\n  this.addSubSchemaArray(ourBase, schema.disallow);\n  this.addSubSchemaArray(ourBase, schema.allOf);\n  this.addSubSchemaArray(ourBase, schema.anyOf);\n  this.addSubSchemaArray(ourBase, schema.oneOf);\n  this.addSubSchema(ourBase, schema.not);\n  return this.schemas[ourUri];\n};\n\nValidator.prototype.addSubSchemaArray = function addSubSchemaArray(baseuri, schemas) {\n  if(!(schemas instanceof Array)) return;\n  for(var i=0; i<schemas.length; i++){\n    this.addSubSchema(baseuri, schemas[i]);\n  }\n};\n\nValidator.prototype.addSubSchemaObject = function addSubSchemaArray(baseuri, schemas) {\n  if(!schemas || typeof schemas!='object') return;\n  for(var p in schemas){\n    this.addSubSchema(baseuri, schemas[p]);\n  }\n};\n\n\n\n/**\n * Sets all the schemas of the Validator instance.\n * @param schemas\n */\nValidator.prototype.setSchemas = function setSchemas (schemas) {\n  this.schemas = schemas;\n};\n\n/**\n * Returns the schema of a certain urn\n * @param urn\n */\nValidator.prototype.getSchema = function getSchema (urn) {\n  return this.schemas[urn];\n};\n\n/**\n * Validates instance against the provided schema\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {Array}\n */\nValidator.prototype.validate = function validate (instance, schema, options, ctx) {\n  if (!options) {\n    options = {};\n  }\n  var propertyName = options.propertyName || 'instance';\n  // This will work so long as the function at uri.resolve() will resolve a relative URI to a relative URI\n  var base = urilib.resolve(options.base||'/', schema.id||'');\n  if(!ctx){\n    ctx = new SchemaContext(schema, options, propertyName, base, Object.create(this.schemas));\n    if (!ctx.schemas[base]) {\n      ctx.schemas[base] = schema;\n    }\n  }\n  if (schema) {\n    var result = this.validateSchema(instance, schema, options, ctx);\n    if (!result) {\n      throw new Error('Result undefined');\n    }\n    return result;\n  }\n  throw new SchemaError('no schema specified', schema);\n};\n\n/**\n * Validates an instance against the schema (the actual work horse)\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @private\n * @return {ValidatorResult}\n */\nValidator.prototype.validateSchema = function validateSchema (instance, schema, options, ctx) {\n  var self = this;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema) {\n    throw new Error(\"schema is undefined\");\n  }\n\n  /**\n  * @param Object schema\n  * @return mixed schema uri or false\n  */\n  function shouldResolve(schema) {\n    var ref = (typeof schema === 'string') ? schema : schema.$ref;\n    if (typeof ref=='string') return ref;\n    return false;\n  }\n  /**\n  * @param Object schema\n  * @param SchemaContext ctx\n  * @returns Object schema or resolved schema\n  */\n  function resolve(schema, ctx) {\n    var ref;\n    if(ref = shouldResolve(schema)) {\n      return self.resolve(schema, ref, ctx).subschema;\n    }\n    return schema;\n  }\n\n  if (schema['extends']) {\n    if (schema['extends'] instanceof Array) {\n      schema['extends'].forEach(function (s) {\n        schema = helpers.deepMerge(schema, resolve(s, ctx));\n      });\n    } else {\n      schema = helpers.deepMerge(schema, resolve(schema['extends'], ctx));\n    }\n  }\n\n  var switchSchema;\n  if (switchSchema = shouldResolve(schema)) {\n    var resolved = this.resolve(schema, switchSchema, ctx);\n    var subctx = new SchemaContext(resolved.subschema, options, ctx.propertyPath, resolved.switchSchema, ctx.schemas);\n    return this.validateSchema(instance, resolved.subschema, options, subctx);\n  }\n\n  var skipAttributes = options && options.skipAttributes || [];\n  // Validate each schema attribute against the instance\n  for (var key in schema) {\n    if (!attribute.ignoreProperties[key] && skipAttributes.indexOf(key) < 0) {\n      var validatorErr = null;\n      var validator = self.attributes[key];\n      if (validator) {\n        validatorErr = validator.call(self, instance, schema, options, ctx);\n      } else if (options.allowUnknownAttributes === false) {\n        // This represents an error with the schema itself, not an invalid instance\n        throw new SchemaError(\"Unsupported attribute: \" + key, schema);\n      }\n      if (validatorErr) {\n        result.importErrors(validatorErr);\n      }\n    }\n  }\n\n  if (typeof options.rewrite == 'function') {\n    var value = options.rewrite.call(this, instance, schema, options, ctx);\n    result.instance = value;\n  }\n  return result;\n};\n\n/**\n* @private\n* @param Object schema\n* @param Object switchSchema\n* @param SchemaContext ctx\n* @return Object resolved schemas {subschema:String, switchSchema: String}\n* @thorws SchemaError\n*/\nValidator.prototype.resolve = function resolve (schema, switchSchema, ctx) {\n  switchSchema = ctx.resolve(switchSchema);\n  // First see if the schema exists under the provided URI\n  if (ctx.schemas[switchSchema]) {\n    return {subschema: ctx.schemas[switchSchema], switchSchema: switchSchema};\n  }\n  // Else try walking the property pointer\n  var parsed = urilib.parse(switchSchema);\n  var fragment = parsed && parsed.hash;\n  var document = fragment && fragment.length && switchSchema.substr(0, switchSchema.length - fragment.length);\n  if (!document || !ctx.schemas[document]) {\n    throw new SchemaError(\"no such schema <\" + switchSchema + \">\", schema);\n  }\n  var subschema = helpers.objectGetPath(ctx.schemas[document], fragment.substr(1));\n  if(subschema===undefined){\n    throw new SchemaError(\"no such schema \" + fragment + \" located in <\" + document + \">\", schema);\n  }\n  return {subschema: subschema, switchSchema: switchSchema};\n};\n\n/**\n * Tests whether the instance if of a certain type.\n * @private\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @param type\n * @return {boolean}\n */\nValidator.prototype.testType = function validateType (instance, schema, options, ctx, type) {\n  if (typeof this.types[type] == 'function') {\n    return this.types[type].call(this, instance);\n  }\n  if (type && typeof type == 'object') {\n    var res = this.validateSchema(instance, type, options, ctx);\n    return res === undefined || !(res && res.errors.length);\n  }\n  // Undefined or properties not on the list are acceptable, same as not being defined\n  return true;\n};\n\nvar types = Validator.prototype.types = {};\ntypes.string = function testString (instance) {\n  return typeof instance == 'string';\n};\ntypes.number = function testNumber (instance) {\n  // isFinite returns false for NaN, Infinity, and -Infinity\n  return typeof instance == 'number' && isFinite(instance);\n};\ntypes.integer = function testInteger (instance) {\n  return (typeof instance == 'number') && instance % 1 === 0;\n};\ntypes.boolean = function testBoolean (instance) {\n  return typeof instance == 'boolean';\n};\ntypes.array = function testArray (instance) {\n  return instance instanceof Array;\n};\ntypes['null'] = function testNull (instance) {\n  return instance === null;\n};\ntypes.date = function testDate (instance) {\n  return instance instanceof Date;\n};\ntypes.any = function testAny (instance) {\n  return true;\n};\ntypes.object = function testObject (instance) {\n  // TODO: fix this - see #15\n  return instance && (typeof instance) === 'object' && !(instance instanceof Array) && !(instance instanceof Date);\n};\n\nmodule.exports = Validator;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jsonschema/lib/validator.js\n ** module id = 528\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar punycode = require('punycode');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a puny coded representation of \"domain\".\n      // It only converts the part of the domain name that\n      // has non ASCII characters. I.e. it dosent matter if\n      // you call it with a domain that already is in ASCII.\n      var domainArray = this.hostname.split('.');\n      var newOut = [];\n      for (var i = 0; i < domainArray.length; ++i) {\n        var s = domainArray[i];\n        newOut.push(s.match(/[^A-Za-z0-9_-]/) ?\n            'xn--' + punycode.encode(s) : s);\n      }\n      this.hostname = newOut.join('.');\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  Object.keys(this).forEach(function(k) {\n    result[k] = this[k];\n  }, this);\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    Object.keys(relative).forEach(function(k) {\n      if (k !== 'protocol')\n        result[k] = relative[k];\n    });\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      Object.keys(relative).forEach(function(k) {\n        result[k] = relative[k];\n      });\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especialy happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!isNull(result.pathname) || !isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host) && (last === '.' || last === '..') ||\n      last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last == '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especialy happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!isNull(result.pathname) || !isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\nfunction isString(arg) {\n  return typeof arg === \"string\";\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isNull(arg) {\n  return arg === null;\n}\nfunction isNullOrUndefined(arg) {\n  return  arg == null;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url/url.js\n ** module id = 529\n ** module chunks = 0\n **/","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/url/~/punycode/punycode.js\n ** module id = 530\n ** module chunks = 0\n **/","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/index.js\n ** module id = 531\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/decode.js\n ** module id = 532\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/encode.js\n ** module id = 533\n ** module chunks = 0\n **/","'use strict';\n\nvar helpers = require('./helpers');\n\n/** @type ValidatorResult */\nvar ValidatorResult = helpers.ValidatorResult;\n/** @type SchemaError */\nvar SchemaError = helpers.SchemaError;\n\nvar attribute = {};\n\nattribute.ignoreProperties = {\n  // informative properties\n  'id': true,\n  'default': true,\n  'description': true,\n  'title': true,\n  // arguments to other properties\n  'exclusiveMinimum': true,\n  'exclusiveMaximum': true,\n  'additionalItems': true,\n  // special-handled properties\n  '$schema': true,\n  '$ref': true,\n  'extends': true\n};\n\n/**\n * @name validators\n */\nvar validators = attribute.validators = {};\n\n/**\n * Validates whether the instance if of a certain type\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.type = function validateType (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var types = (schema.type instanceof Array) ? schema.type : [schema.type];\n  if (!types.some(this.testType.bind(this, instance, schema, options, ctx))) {\n    var list = types.map(function (v) {\n      return v.id && ('<' + v.id + '>') || (v+'');\n    });\n    result.addError({\n      name: 'type',\n      argument: list,\n      message: \"is not of a type(s) \" + list,\n    });\n  }\n  return result;\n};\n\nfunction testSchema(instance, options, ctx, schema){\n  return this.validateSchema(instance, schema, options, ctx).valid;\n}\n\n/**\n * Validates whether the instance matches some of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {ValidatorResult|null}\n */\nvalidators.anyOf = function validateAnyOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(schema.anyOf instanceof Array)){\n    throw new SchemaError(\"anyOf must be an array\");\n  }\n  if (!schema.anyOf.some(testSchema.bind(this, instance, options, ctx))) {\n    var list = schema.anyOf.map(function (v, i) {\n      return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n    });\n    result.addError({\n      name: 'anyOf',\n      argument: list,\n      message: \"is not any of \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance matches every given schema\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.allOf = function validateAllOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!(schema.allOf instanceof Array)){\n    throw new SchemaError(\"allOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var self = this;\n  schema.allOf.forEach(function(v, i){\n    var valid = self.validateSchema(instance, v, options, ctx);\n    if(!valid.valid){\n      var msg = (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n      result.addError({\n        name: 'allOf',\n        argument: { id: msg, length: valid.errors.length, valid: valid },\n        message: 'does not match allOf schema ' + msg + ' with ' + valid.errors.length + ' error[s]:',\n      });\n      result.importErrors(valid);\n    }\n  });\n  return result;\n};\n\n/**\n * Validates whether the instance matches exactly one of the given schemas\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null}\n */\nvalidators.oneOf = function validateOneOf (instance, schema, options, ctx) {\n  // Ignore undefined instances\n  if (instance === undefined) {\n    return null;\n  }\n  if (!(schema.oneOf instanceof Array)){\n    throw new SchemaError(\"oneOf must be an array\");\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var count = schema.oneOf.filter(testSchema.bind(this, instance, options, ctx)).length;\n  var list = schema.oneOf.map(function (v, i) {\n    return (v.id && ('<' + v.id + '>')) || (v.title && JSON.stringify(v.title)) || (v['$ref'] && ('<' + v['$ref'] + '>')) || '[subschema '+i+']';\n  });\n  if (count!==1) {\n    result.addError({\n      name: 'oneOf',\n      argument: list,\n      message: \"is not exactly one from \" + list.join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates properties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.properties = function validateProperties (instance, schema, options, ctx) {\n  if(instance === undefined || !(instance instanceof Object)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var properties = schema.properties || {};\n  for (var property in properties) {\n    var prop = (instance || undefined) && instance[property];\n    var res = this.validateSchema(prop, properties[property], options, ctx.makeChild(properties[property], property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n  return result;\n};\n\n/**\n * Test a specific property within in instance against the additionalProperties schema attribute\n * This ignores properties with definitions in the properties schema attribute, but no other attributes.\n * If too many more types of property-existance tests pop up they may need their own class of tests (like `type` has)\n * @private\n * @return {boolean}\n */\nfunction testAdditionalProperty (instance, schema, options, ctx, property, result) {\n  if (schema.properties && schema.properties[property] !== undefined) {\n    return;\n  }\n  if (schema.additionalProperties === false) {\n    result.addError({\n      name: 'additionalProperties',\n      argument: property,\n      message: \"additionalProperty \" + JSON.stringify(property) + \" exists in instance when not allowed\",\n    });\n  } else {\n    var additionalProperties = schema.additionalProperties || {};\n    var res = this.validateSchema(instance[property], additionalProperties, options, ctx.makeChild(additionalProperties, property));\n    if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n    result.importErrors(res);\n  }\n}\n\n/**\n * Validates patternProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.patternProperties = function validatePatternProperties (instance, schema, options, ctx) {\n  if(instance === undefined) return;\n  if(!this.types.object(instance)) return;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var patternProperties = schema.patternProperties || {};\n\n  for (var property in instance) {\n    var test = true;\n    for (var pattern in patternProperties) {\n      var expr = new RegExp(pattern);\n      if (!expr.test(property)) {\n        continue;\n      }\n      test = false;\n      var res = this.validateSchema(instance[property], patternProperties[pattern], options, ctx.makeChild(patternProperties[pattern], property));\n      if(res.instance !== result.instance[property]) result.instance[property] = res.instance;\n      result.importErrors(res);\n    }\n    if (test) {\n      testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Validates additionalProperties\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.additionalProperties = function validateAdditionalProperties (instance, schema, options, ctx) {\n  if(instance === undefined) return;\n  if(!this.types.object(instance)) return;\n  // if patternProperties is defined then we'll test when that one is called instead\n  if (schema.patternProperties) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in instance) {\n    testAdditionalProperty.call(this, instance, schema, options, ctx, property, result);\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minProperties = function validateMinProperties (instance, schema, options, ctx) {\n  if (!instance || typeof instance !== 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length >= schema.minProperties)) {\n    result.addError({\n      name: 'minProperties',\n      argument: schema.minProperties,\n      message: \"does not meet minimum property length of \" + schema.minProperties,\n    })\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxProperties = function validateMaxProperties (instance, schema, options, ctx) {\n  if (!instance || typeof instance !== 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var keys = Object.keys(instance);\n  if (!(keys.length <= schema.maxProperties)) {\n    result.addError({\n      name: 'maxProperties',\n      argument: schema.maxProperties,\n      message: \"does not meet maximum property length of \" + schema.maxProperties,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates items when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.items = function validateItems (instance, schema, options, ctx) {\n  if (!(instance instanceof Array)) {\n    return null;\n  }\n  var self = this;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined || !schema.items) {\n    return result;\n  }\n  instance.every(function (value, i) {\n    var items = (schema.items instanceof Array) ? (schema.items[i] || schema.additionalItems) : schema.items;\n    if (items === undefined) {\n      return true;\n    }\n    if (items === false) {\n      result.addError({\n        name: 'items',\n        message: \"additionalItems not permitted\",\n      });\n      return false;\n    }\n    var res = self.validateSchema(value, items, options, ctx.makeChild(items, i));\n    if(res.instance !== result.instance[i]) result.instance[i] = res.instance;\n    result.importErrors(res);\n    return true;\n  });\n  return result;\n};\n\n/**\n * Validates minimum and exclusiveMinimum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minimum = function validateMinimum (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid = true;\n  if (schema.exclusiveMinimum && schema.exclusiveMinimum === true) {\n    valid = instance > schema.minimum;\n  } else {\n    valid = instance >= schema.minimum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'minimum',\n      argument: schema.minimum,\n      message: \"must have a minimum value of \" + schema.minimum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates maximum and exclusiveMaximum when the type of the instance value is a number.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maximum = function validateMaximum (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var valid;\n  if (schema.exclusiveMaximum && schema.exclusiveMaximum === true) {\n    valid = instance < schema.maximum;\n  } else {\n    valid = instance <= schema.maximum;\n  }\n  if (!valid) {\n    result.addError({\n      name: 'maximum',\n      argument: schema.maximum,\n      message: \"must have a maximum value of \" + schema.maximum,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * Of course, this is susceptible to floating point error since it compares the floating points\n * and not the JSON byte sequences to arbitrary precision.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.divisibleBy = function validateDivisibleBy (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n\n  if (schema.divisibleBy == 0) {\n    throw new SchemaError(\"divisibleBy cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance / schema.divisibleBy % 1) {\n    result.addError({\n      name: 'divisibleBy',\n      argument: schema.divisibleBy,\n      message: \"is not divisible by (multiple of) \" + JSON.stringify(schema.divisibleBy),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates divisibleBy when the type of the instance value is a number.\n * Of course, this is susceptible to floating point error since it compares the floating points\n * and not the JSON byte sequences to arbitrary precision.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.multipleOf = function validateMultipleOf (instance, schema, options, ctx) {\n  if (typeof instance !== 'number') {\n    return null;\n  }\n\n  if (schema.multipleOf == 0) {\n    throw new SchemaError(\"multipleOf cannot be zero\");\n  }\n\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance / schema.multipleOf % 1) {\n    result.addError({\n      name: 'multipleOf',\n      argument:  schema.multipleOf,\n      message: \"is not a multiple of (divisible by) \" + JSON.stringify(schema.multipleOf),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is present.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.required = function validateRequired (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (instance === undefined && schema.required === true) {\n    result.addError({\n      name: 'required',\n      message: \"is required\"\n    });\n  } else if (instance && typeof instance==='object' && Array.isArray(schema.required)) {\n    schema.required.forEach(function(n){\n      if(instance[n]===undefined){\n        result.addError({\n          name: 'required',\n          argument: n,\n          message: \"requires property \" + JSON.stringify(n),\n        });\n      }\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value matches the regular expression, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.pattern = function validatePattern (instance, schema, options, ctx) {\n  if (typeof instance !== 'string') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.match(schema.pattern)) {\n    result.addError({\n      name: 'pattern',\n      argument: schema.pattern,\n      message: \"does not match pattern \" + JSON.stringify(schema.pattern),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is of a certain defined format or a custom\n * format.\n * The following formats are supported for string types:\n *   - date-time\n *   - date\n *   - time\n *   - ip-address\n *   - ipv6\n *   - uri\n *   - color\n *   - host-name\n *   - alpha\n *   - alpha-numeric\n *   - utc-millisec\n * @param instance\n * @param schema\n * @param [options]\n * @param [ctx]\n * @return {String|null}\n */\nvalidators.format = function validateFormat (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!result.disableFormat && !helpers.isFormat(instance, schema.format, this)) {\n    result.addError({\n      name: 'format',\n      argument: schema.format,\n      message: \"does not conform to the \" + JSON.stringify(schema.format) + \" format\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at least of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minLength = function validateMinLength (instance, schema, options, ctx) {\n  if (!(typeof instance === 'string')) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minLength)) {\n    result.addError({\n      name: 'minLength',\n      argument: schema.minLength,\n      message: \"does not meet minimum length of \" + schema.minLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is at most of a certain length, when the instance value is a string.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxLength = function validateMaxLength (instance, schema, options, ctx) {\n  if (!(typeof instance === 'string')) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxLength)) {\n    result.addError({\n      name: 'maxLength',\n      argument: schema.maxLength,\n      message: \"does not meet maximum length of \" + schema.maxLength,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains at least a minimum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.minItems = function validateMinItems (instance, schema, options, ctx) {\n  if (!(instance instanceof Array)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length >= schema.minItems)) {\n    result.addError({\n      name: 'minItems',\n      argument: schema.minItems,\n      message: \"does not meet minimum length of \" + schema.minItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether instance contains no more than a maximum number of items, when the instance is an Array.\n * @param instance\n * @param schema\n * @return {String|null}\n */\nvalidators.maxItems = function validateMaxItems (instance, schema, options, ctx) {\n  if (!(instance instanceof Array)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance.length <= schema.maxItems)) {\n    result.addError({\n      name: 'maxItems',\n      argument: schema.maxItems,\n      message: \"does not meet maximum length of \" + schema.maxItems,\n    });\n  }\n  return result;\n};\n\n/**\n * Validates that every item in an instance array is unique, when instance is an array\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {String|null|ValidatorResult}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!(instance instanceof Array)) {\n    return result;\n  }\n  function testArrays (v, i, a) {\n    for (var j = i + 1; j < a.length; j++) if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n    return true;\n  }\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Deep compares arrays for duplicates\n * @param v\n * @param i\n * @param a\n * @private\n * @return {boolean}\n */\nfunction testArrays (v, i, a) {\n  var j, len = a.length;\n  for (j = i + 1, len; j < len; j++) {\n    if (helpers.deepCompareStrict(v, a[j])) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Validates whether there are no duplicates, when the instance is an Array.\n * @param instance\n * @return {String|null}\n */\nvalidators.uniqueItems = function validateUniqueItems (instance, schema, options, ctx) {\n  if (!(instance instanceof Array)) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!instance.every(testArrays)) {\n    result.addError({\n      name: 'uniqueItems',\n      message: \"contains duplicate item\",\n    });\n  }\n  return result;\n};\n\n/**\n * Validate for the presence of dependency properties, if the instance is an object.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.dependencies = function validateDependencies (instance, schema, options, ctx) {\n  if (!instance || typeof instance != 'object') {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  for (var property in schema.dependencies) {\n    if (instance[property] === undefined) {\n      continue;\n    }\n    var dep = schema.dependencies[property];\n    var childContext = ctx.makeChild(dep, property);\n    if (typeof dep == 'string') {\n      dep = [dep];\n    }\n    if (dep instanceof Array) {\n      dep.forEach(function (prop) {\n        if (instance[prop] === undefined) {\n          result.addError({\n            // FIXME there's two different \"dependencies\" errors here with slightly different outputs\n            // Can we make these the same? Or should we create different error types?\n            name: 'dependencies',\n            argument: childContext.propertyPath,\n            message: \"property \" + prop + \" not found, required by \" + childContext.propertyPath,\n          });\n        }\n      });\n    } else {\n      var res = this.validateSchema(instance, dep, options, childContext);\n      if(result.instance !== res.instance) result.instance = res.instance;\n      if (res && res.errors.length) {\n        result.addError({\n          name: 'dependencies',\n          argument: childContext.propertyPath,\n          message: \"does not meet dependency required by \" + childContext.propertyPath,\n        });\n        result.importErrors(res);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance value is one of the enumerated values.\n *\n * @param instance\n * @param schema\n * @return {ValidatorResult|null}\n */\nvalidators['enum'] = function validateEnum (instance, schema, options, ctx) {\n  if (!(schema['enum'] instanceof Array)) {\n    throw new SchemaError(\"enum expects an array\", schema);\n  }\n  if (instance === undefined) {\n    return null;\n  }\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  if (!schema['enum'].some(helpers.deepCompareStrict.bind(null, instance))) {\n    result.addError({\n      name: 'enum',\n      argument: schema['enum'],\n      message: \"is not one of enum values: \" + schema['enum'].join(','),\n    });\n  }\n  return result;\n};\n\n/**\n * Validates whether the instance if of a prohibited type.\n * @param instance\n * @param schema\n * @param options\n * @param ctx\n * @return {null|ValidatorResult}\n */\nvalidators.not = validators.disallow = function validateNot (instance, schema, options, ctx) {\n  var self = this;\n  if(instance===undefined) return null;\n  var result = new ValidatorResult(instance, schema, options, ctx);\n  var notTypes = schema.not || schema.disallow;\n  if(!notTypes) return null;\n  if(!(notTypes instanceof Array)) notTypes=[notTypes];\n  notTypes.forEach(function (type) {\n    if (self.testType(instance, schema, options, ctx, type)) {\n      var schemaId = type && type.id && ('<' + type.id + '>') || type;\n      result.addError({\n        name: 'not',\n        argument: schemaId,\n        message: \"is of prohibited type \" + schemaId,\n      });\n    }\n  });\n  return result;\n};\n\nmodule.exports = attribute;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jsonschema/lib/attribute.js\n ** module id = 534\n ** module chunks = 0\n **/","'use strict';\n\nvar uri = require('url');\n\nvar ValidationError = exports.ValidationError = function ValidationError (message, instance, schema, propertyPath, name, argument) {\n  if (propertyPath) {\n    this.property = propertyPath;\n  }\n  if (message) {\n    this.message = message;\n  }\n  if (schema) {\n    if (schema.id) {\n      this.schema = schema.id;\n    } else {\n      this.schema = schema;\n    }\n  }\n  if (instance) {\n    this.instance = instance;\n  }\n  this.name = name;\n  this.argument = argument;\n  this.stack = this.toString();\n};\n\nValidationError.prototype.toString = function toString() {\n  return this.property + ' ' + this.message;\n};\n\nvar ValidatorResult = exports.ValidatorResult = function ValidatorResult(instance, schema, options, ctx) {\n  this.instance = instance;\n  this.schema = schema;\n  this.propertyPath = ctx.propertyPath;\n  this.errors = [];\n  this.throwError = options && options.throwError;\n  this.disableFormat = options && options.disableFormat === true;\n};\n\nValidatorResult.prototype.addError = function addError(detail) {\n  var err;\n  if (typeof detail == 'string') {\n    err = new ValidationError(detail, this.instance, this.schema, this.propertyPath);\n  } else {\n    if (!detail) throw new Error('Missing error detail');\n    if (!detail.message) throw new Error('Missing error message');\n    if (!detail.name) throw new Error('Missing validator type');\n    err = new ValidationError(detail.message, this.instance, this.schema, this.propertyPath, detail.name, detail.argument);\n  }\n\n  if (this.throwError) {\n    throw err;\n  }\n  this.errors.push(err);\n  return err;\n};\n\nValidatorResult.prototype.importErrors = function importErrors(res) {\n  if (typeof res == 'string' || (res && res.validatorType)) {\n    this.addError(res);\n  } else if (res && res.errors) {\n    var errs = this.errors;\n    res.errors.forEach(function (v) {\n      errs.push(v);\n    });\n  }\n};\n\nValidatorResult.prototype.toString = function toString(res) {\n  return this.errors.map(function(v,i){ return i+': '+v.toString()+'\\n'; }).join('');\n};\n\nObject.defineProperty(ValidatorResult.prototype, \"valid\", { get: function() {\n  return !this.errors.length;\n} });\n\n/**\n * Describes a problem with a Schema which prevents validation of an instance\n * @name SchemaError\n * @constructor\n */\nvar SchemaError = exports.SchemaError = function SchemaError (msg, schema) {\n  this.message = msg;\n  this.schema = schema;\n  Error.call(this, msg);\n  Error.captureStackTrace(this, SchemaError);\n};\nSchemaError.prototype = Object.create(Error.prototype,\n  { constructor: {value: SchemaError, enumerable: false}\n  , name: {value: 'SchemaError', enumerable: false}\n  });\n\nvar SchemaContext = exports.SchemaContext = function SchemaContext (schema, options, propertyPath, base, schemas) {\n  this.schema = schema;\n  this.options = options;\n  this.propertyPath = propertyPath;\n  this.base = base;\n  this.schemas = schemas;\n};\n\nSchemaContext.prototype.resolve = function resolve (target) {\n  return uri.resolve(this.base, target);\n};\n\nSchemaContext.prototype.makeChild = function makeChild(schema, propertyName){\n  var propertyPath = (propertyName===undefined) ? this.propertyPath : this.propertyPath+makeSuffix(propertyName);\n  var base = uri.resolve(this.base, schema.id||'');\n  var ctx = new SchemaContext(schema, this.options, propertyPath, base, Object.create(this.schemas));\n  if(schema.id && !ctx.schemas[base]){\n    ctx.schemas[base] = schema;\n  }\n  return ctx;\n}\n\nvar FORMAT_REGEXPS = exports.FORMAT_REGEXPS = {\n  'date-time': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\\.\\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,\n  'date': /^\\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,\n  'time': /^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,\n\n  'email': /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/,\n  'ip-address': /^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,\n  'ipv6': /^\\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(%.+)?\\s*$/,\n  'uri': /^[a-zA-Z][a-zA-Z0-9+-.]*:[^\\s]*$/,\n\n  'color': /^(#?([0-9A-Fa-f]{3}){1,2}\\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\\(\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*,\\s*\\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\\b\\s*\\))|(rgb\\(\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*,\\s*(\\d?\\d%|100%)+\\s*\\)))$/,\n\n  // hostname regex from: http://stackoverflow.com/a/1420225/5628\n  'hostname': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n  'host-name': /^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\\.?$/,\n\n  'alpha': /^[a-zA-Z]+$/,\n  'alphanumeric': /^[a-zA-Z0-9]+$/,\n  'utc-millisec': function (input) {\n    return (typeof input === 'string') && parseFloat(input) === parseInt(input, 10) && !isNaN(input);\n  },\n  'regex': function (input) {\n    var result = true;\n    try {\n      new RegExp(input);\n    } catch (e) {\n      result = false;\n    }\n    return result;\n  },\n  'style': /\\s*(.+?):\\s*([^;]+);?/g,\n  'phone': /^\\+(?:[0-9] ?){6,14}[0-9]$/\n};\n\nFORMAT_REGEXPS.regexp = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.pattern = FORMAT_REGEXPS.regex;\nFORMAT_REGEXPS.ipv4 = FORMAT_REGEXPS['ip-address'];\n\nexports.isFormat = function isFormat (input, format, validator) {\n  if (typeof input === 'string' && FORMAT_REGEXPS[format] !== undefined) {\n    if (FORMAT_REGEXPS[format] instanceof RegExp) {\n      return FORMAT_REGEXPS[format].test(input);\n    }\n    if (typeof FORMAT_REGEXPS[format] === 'function') {\n      return FORMAT_REGEXPS[format](input);\n    }\n  } else if (validator && validator.customFormats &&\n      typeof validator.customFormats[format] === 'function') {\n    return validator.customFormats[format](input);\n  }\n  return true;\n};\n\nvar makeSuffix = exports.makeSuffix = function makeSuffix (key) {\n  key = key.toString();\n  // This function could be capable of outputting valid a ECMAScript string, but the\n  // resulting code for testing which form to use would be tens of thousands of characters long\n  // That means this will use the name form for some illegal forms\n  if (!key.match(/[.\\s\\[\\]]/) && !key.match(/^[\\d]/)) {\n    return '.' + key;\n  }\n  if (key.match(/^\\d+$/)) {\n    return '[' + key + ']';\n  }\n  return '[' + JSON.stringify(key) + ']';\n};\n\nexports.deepCompareStrict = function deepCompareStrict (a, b) {\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (a instanceof Array) {\n    if (!(b instanceof Array)) {\n      return false;\n    }\n    if (a.length !== b.length) {\n      return false;\n    }\n    return a.every(function (v, i) {\n      return deepCompareStrict(a[i], b[i]);\n    });\n  }\n  if (typeof a === 'object') {\n    if (!a || !b) {\n      return a === b;\n    }\n    var aKeys = Object.keys(a);\n    var bKeys = Object.keys(b);\n    if (aKeys.length !== bKeys.length) {\n      return false;\n    }\n    return aKeys.every(function (v) {\n      return deepCompareStrict(a[v], b[v]);\n    });\n  }\n  return a === b;\n};\n\nmodule.exports.deepMerge = function deepMerge (target, src) {\n  var array = Array.isArray(src);\n  var dst = array && [] || {};\n\n  if (array) {\n    target = target || [];\n    dst = dst.concat(target);\n    src.forEach(function (e, i) {\n      if (typeof e === 'object') {\n        dst[i] = deepMerge(target[i], e)\n      } else {\n        if (target.indexOf(e) === -1) {\n          dst.push(e)\n        }\n      }\n    });\n  } else {\n    if (target && typeof target === 'object') {\n      Object.keys(target).forEach(function (key) {\n        dst[key] = target[key];\n      });\n    }\n    Object.keys(src).forEach(function (key) {\n      if (typeof src[key] !== 'object' || !src[key]) {\n        dst[key] = src[key];\n      }\n      else {\n        if (!target[key]) {\n          dst[key] = src[key];\n        } else {\n          dst[key] = deepMerge(target[key], src[key])\n        }\n      }\n    });\n  }\n\n  return dst;\n};\n\n/**\n * Validates instance against the provided schema\n * Implements URI+JSON Pointer encoding, e.g. \"%7e\"=\"~0\"=>\"~\", \"~1\"=\"%2f\"=>\"/\"\n * @param o\n * @param s The path to walk o along\n * @return any\n */\nexports.objectGetPath = function objectGetPath(o, s) {\n  var parts = s.split('/').slice(1);\n  var k;\n  while (typeof (k=parts.shift()) == 'string') {\n    var n = decodeURIComponent(k.replace(/~0/,'~').replace(/~1/g,'/'));\n    if (!(n in o)) return;\n    o = o[n];\n  }\n  return o;\n};\n\n/**\n * Accept an Array of property names and return a JSON Pointer URI fragment\n * @param Array a\n * @return {String}\n */\nexports.encodePath = function encodePointer(a){\n\t// ~ must be encoded explicitly because hacks\n\t// the slash is encoded by encodeURIComponent\n\treturn a.map(function(v){ return '/'+encodeURIComponent(v).replace(/~/g,'%7E'); }).join('');\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jsonschema/lib/helpers.js\n ** module id = 535\n ** module chunks = 0\n **/","module.exports = {\n\t\"additionalProperties\": true,\n\t\"required\": [\n\t\t\"label\"\n\t],\n\t\"type\": \"object\",\n\t\"properties\": {\n\t\t\"status\": {\n\t\t\t\"type\": [\n\t\t\t\t{\n\t\t\t\t\t\"description\": \"A lozenge with a label text. See https://docs.atlassian.com/aui/latest/docs/lozenges.html\",\n\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\"value\"\n\t\t\t\t\t],\n\t\t\t\t\t\"additionalProperties\": true,\n\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\"type\": {\n\t\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\t\"lozenge\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"value\": {\n\t\t\t\t\t\t\t\"additionalProperties\": true,\n\t\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\t\t\"label\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\t\"type\": {\n\t\t\t\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\t\t\t\"default\",\n\t\t\t\t\t\t\t\t\t\t\"success\",\n\t\t\t\t\t\t\t\t\t\t\"error\",\n\t\t\t\t\t\t\t\t\t\t\"current\",\n\t\t\t\t\t\t\t\t\t\t\"new\",\n\t\t\t\t\t\t\t\t\t\t\"moved\"\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"label\": {\n\t\t\t\t\t\t\t\t\t\"minLength\": 1,\n\t\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\t\"maxLength\": 20\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"description\": \"The icon for the glance\",\n\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\"type\",\n\t\t\t\t\t\t\"value\"\n\t\t\t\t\t],\n\t\t\t\t\t\"additionalProperties\": true,\n\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\"type\": {\n\t\t\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\t\t\"icon\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"value\": {\n\t\t\t\t\t\t\t\"additionalProperties\": true,\n\t\t\t\t\t\t\t\"required\": [\n\t\t\t\t\t\t\t\t\"url\",\n\t\t\t\t\t\t\t\t\"url@2x\"\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\"type\": \"object\",\n\t\t\t\t\t\t\t\"properties\": {\n\t\t\t\t\t\t\t\t\"url\": {\n\t\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\t\"description\": \"An URL to the icon\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\"url@2x\": {\n\t\t\t\t\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\t\t\t\t\"description\": \"An URL to the high resolution icon\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t\"metadata\": {\n\t\t\t\"additionalProperties\": true,\n\t\t\t\"type\": \"object\",\n\t\t\t\"description\": \"Glance metadata for conditions\"\n\t\t},\n\t\t\"label\": {\n\t\t\t\"description\": \"Free form html label\",\n\t\t\t\"required\": [\n\t\t\t\t\"type\",\n\t\t\t\t\"value\"\n\t\t\t],\n\t\t\t\"additionalProperties\": true,\n\t\t\t\"type\": \"object\",\n\t\t\t\"properties\": {\n\t\t\t\t\"type\": {\n\t\t\t\t\t\"enum\": [\n\t\t\t\t\t\t\"html\"\n\t\t\t\t\t],\n\t\t\t\t\t\"type\": \"string\"\n\t\t\t\t},\n\t\t\t\t\"value\": {\n\t\t\t\t\t\"minLength\": 1,\n\t\t\t\t\t\"type\": \"string\",\n\t\t\t\t\t\"maxLength\": 1000\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/js/app/schemas/glance_metadata.json\n ** module id = 536\n ** module chunks = 0\n **/","import IntegrationsActions from 'actions/integrations_actions';\nimport GlanceActions from 'actions/glance_actions';\nimport GlancesMetadataStore from 'stores/glances_metadata_store';\nimport Spinner from 'components/common/spinner/spinner';\nimport Icon from './icon';\nimport cx from 'classnames';\nimport strings from 'strings/integrations_strings';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarGlance\",\n\n  propTypes: {\n    glance: React.PropTypes.shape({\n      name: React.PropTypes.string.isRequired,\n      full_key: React.PropTypes.string.isRequired,\n      addon_key: React.PropTypes.string.isRequired,\n      key: React.PropTypes.string.isRequired,\n      icon: React.PropTypes.object,\n      query_url: React.PropTypes.string,\n      target: React.PropTypes.oneOfType([\n        React.PropTypes.string,\n        React.PropTypes.object\n      ]),\n      dynamic: React.PropTypes.bool,\n      internal: React.PropTypes.bool\n    }).isRequired,\n    room_id: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.number\n    ])\n  },\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function() {\n    return {\n      loading: this._isDynamic(),\n      error: null,\n      label: {\n        value: this.props.glance.name\n      },\n      room_id: null,\n      condition: null,\n      status: {\n      }\n    };\n  },\n\n  componentWillMount: function() {\n    let cachedData = GlancesMetadataStore.getCachedMetadata(this.props.room_id, this.props.glance.full_key);\n    if (!_.isEmpty(cachedData) && !cachedData.loading) {\n      this.setState(cachedData);\n    }\n  },\n\n  componentDidMount: function() {\n    if (this._isDynamic()) {\n      GlancesMetadataStore.onGlanceMetadataChange(this.props.room_id, this.props.glance.full_key, this._onChange);\n    }\n  },\n\n  componentWillUpdate(){\n    if (this._isDynamic()) {\n      GlancesMetadataStore.offGlanceMetadataChange(this.props.room_id, this.props.glance.full_key, this._onChange);\n    }\n  },\n\n  componentDidUpdate(){\n    if (this._isDynamic()) {\n      GlancesMetadataStore.onGlanceMetadataChange(this.props.room_id, this.props.glance.full_key, this._onChange);\n    }\n    if (this.isMounted()) {\n      this._onChange();\n    }\n  },\n\n  componentWillUnmount: function() {\n    if (this._isDynamic()) {\n      GlancesMetadataStore.offGlanceMetadataChange(this.props.room_id, this.props.glance.full_key, this._onChange);\n    }\n  },\n\n  _fetchMetadata: function() {\n      GlanceActions.fetchGlanceMetadata(this.props.room_id, this.props.glance, true);\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n  },\n\n  _getState: function() {\n    return GlancesMetadataStore.getCachedMetadata(this.props.room_id, this.props.glance.full_key) || this.getInitialState();\n  },\n\n  _onClick: function() {\n    IntegrationsActions.open(this.props.glance.addon_key, this.props.glance.key, {}, null, \"glance\");\n  },\n\n  _renderErrorGlance: function() {\n    let classes = cx({\n      \"hc-glance\": true,\n      \"error\": true\n    });\n\n    return (\n      <div className={classes}\n          ref={`${this.props.glance.full_key}_link`}>\n        <div className=\"aui-nav-item\" aria-label={this.props.glance.name} data-tipsify-ignore>\n          {this._renderIcon()}\n          <div className=\"hc-glance-content\">\n            <div className=\"hc-glance-label\">{this.props.glance.name}</div>\n            <div className=\"hc-glance-status\" onClick={this._fetchMetadata}>\n              {strings.glance_fetch_error}\n              <button className=\"aui-button aui-button-link\">{strings.retry}</button>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    );\n  },\n\n\n  _isDynamic: function() {\n    return !_.isEmpty(this.props.glance.query_url);\n  },\n\n  _renderLabel: function() {\n    if (this.state.loading) {\n      return <span className=\"hc-glance-label\">{strings.glance_loading}</span>;\n    }\n\n    let labelHtml;\n    if (this.state.label.type === \"safe_html\") {\n      labelHtml = <span className=\"hc-glance-label\" dangerouslySetInnerHTML={{__html: this.state.label.value}}></span>;\n    } else {\n      labelHtml = <span className=\"hc-glance-label\">{this.props.glance.name}</span>;\n    }\n\n    return labelHtml;\n  },\n\n  _renderLozenge: function(lozenge) {\n    let classNames = \"aui-lozenge aui-lozenge-\" + lozenge.type;\n\n    return <span className={classNames} >{lozenge.label}</span>;\n  },\n\n  _renderStatusElement: function() {\n    switch(this.state.status.type) {\n      case \"lozenge\":\n        var lozenge = this.state.status.value;\n        return this._renderLozenge(lozenge);\n      case \"icon\":\n        return <Icon icon={this.state.status.value} />;\n      case \"text\":\n        return <span className={\"hc-glance-status-text\"}>{this.state.status.value}</span>;\n      default:\n        return null;\n    }\n  },\n\n  _renderStatus: function() {\n    return (\n      <span className=\"hc-glance-status\">\n          {this._renderStatusElement()}\n      </span>\n    );\n  },\n\n  _renderChildren: function() {\n    return (\n      <div className=\"hc-glance-children\">\n          {this.props.children}\n      </div>\n    );\n  },\n\n  _renderIcon: function() {\n    return this.props.glance.icon ? <Icon icon={this.props.glance.icon}/> : null;\n  },\n\n  render: function() {\n\n    if (!_.isNull(this.state.error)) {\n      return this._renderErrorGlance();\n    }\n\n    let classes = cx({\n      \"hc-glance\": true,\n      \"loading\": this.state.loading,\n      \"clickable\": !_.isUndefined(this.props.glance.target)\n    });\n\n    return (\n      <div className={classes}\n           ref={`${this.props.glance.full_key}_link`}\n           onClick={this.props.glance.target ? this._onClick : null}>\n        <div className=\"aui-nav-item\" aria-label={this.props.glance.name} data-tipsify-ignore>\n          <div className=\"hc-glance-content\">\n            {this._renderIcon()}\n            {this._renderLabel()}\n            {this._renderStatus()}\n\n            <div className=\"hc-spinner-container\">\n              <Spinner size=\"small\" spin={this.state.loading} zIndex={1} />\n            </div>\n          </div>\n        </div>\n        {this._renderChildren()}\n      </div>\n    );\n\n\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/glance.js\n **/","/*global HC*/\nimport AppStore from 'stores/application_store';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nvar mixedValidator = function(props, propName, componentName) {\n  if( _.isUndefined(props.aui_icon) && _.isUndefined(props[propName])){\n    return new Error(propName + \" parameter is mandatory in IntegrationIcon\");\n  }\n};\n\nexport default React.createClass({\n\n  displayName: \"IntegrationIcon\",\n\n  propTypes: {\n    icon: React.PropTypes.shape({\n      \"url\": mixedValidator,\n      \"url@2x\": mixedValidator,\n      \"aui_icon\": React.PropTypes.string\n    }).isRequired\n  },\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function() {\n    return {\n      error: false\n    };\n  },\n\n  componentDidMount: function() {\n    $(ReactDOM.findDOMNode(this)).on('error', this._onError);\n  },\n\n  componentWillUnmount: function() {\n    $(ReactDOM.findDOMNode(this)).off('error', this._onError);\n  },\n\n  _onError: function() {\n    this.setState({error: true});\n  },\n\n  render: function() {\n\n    if (_.get(this.props.icon, \"aui_icon\")) {\n      var auiClasses = cx(\"aui-icon\", this.props.icon.aui_icon);\n      return (<span className={auiClasses}></span>);\n    }\n\n    let icon;\n    if (this.state.error) {\n      icon = AppStore.get('asset_base_uri') + `assets/svgs/fail_avatar.svg`;\n    } else {\n      icon = HC.resolution > 1 ? _.get(this.props.icon, \"url@2x\") : _.get(this.props.icon, \"url\");\n    }\n\n    return (\n      <img className=\"aui-icon\" src={icon}/>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/icon.js\n **/","import AnalyticsActions from 'actions/analytics_actions';\nimport PreferencesActions from 'actions/preferences_actions';\nimport cx from 'classnames';\nimport API from 'api/api';\nimport strings from 'strings/integrations_strings';\nimport InlineDialogActions from 'actions/inline_dialog_actions';\n\nexport default React.createClass({\n\n  displayName: 'AddIntegrationsGlance',\n\n  _dismissAction(event) {\n    event.stopPropagation();\n    AnalyticsActions.roomIntegrationsGlanceDismissed();\n    PreferencesActions.addRoomToIntegrationDiscoveryIgnoreList(this.props.room_id);\n\n    InlineDialogActions.showAddIntegrationsHelperDialog({\n      anchor: document.getElementById('hc-integrations-link')\n    });\n  },\n\n  _openIntegrationsPage() {\n    AnalyticsActions.roomIntegrationsGlanceClicked();\n    API.openIntegrationsWindow();\n  },\n\n  render: function() {\n    let classes = cx({\n      \"hc-integration-advertisement\": true,\n      \"hc-glance\": true,\n      \"clickable\": true\n    });\n\n    return (\n      <div className={classes}>\n        <div className=\"aui-nav-item\" onClick={this._openIntegrationsPage}>\n          <div className=\"hc-glance-content\">\n            <span className=\"aui-icon aui-icon-small aui-iconfont-add\"/>\n            <div className=\"hc-glance-label\">{strings.add_integrations}\n              <a data-aui-trigger onClick={this._dismissAction}\n                    className=\"hc-discovery-glance-close aui-icon aui-icon-small aui-iconfont-remove\"/>\n            </div>\n            <div className=\"hc-glance-status\"/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/add_integrations_glance.js\n **/","import IntegrationFrame from 'components/common/integration/integration_frame';\nimport Glance from 'components/right_sidebar/integrations/glance';\nimport IntegrationsViewStore from 'stores/integrations_view_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport Spinner from 'components/common/spinner/spinner';\nimport Utils from 'helpers/utils';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport IntegrationActions from 'actions/integrations_view_actions';\nimport strings from 'strings/integrations_strings';\nimport AppConfig from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: \"RightSideBarIntegrationView\",\n\n  propTypes: {\n    hideIntegrationView: React.PropTypes.func.isRequired,\n    integration: React.PropTypes.shape({\n      full_key: React.PropTypes.string.isRequired,\n      addon_key: React.PropTypes.string.isRequired,\n      key: React.PropTypes.string.isRequired,\n      name: React.PropTypes.string.isRequired\n    }).isRequired,\n    room_id: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.number\n    ]),\n    glance: React.PropTypes.shape({\n      name: React.PropTypes.string.isRequired,\n      full_key: React.PropTypes.string.isRequired,\n      addon_key: React.PropTypes.string.isRequired,\n      key: React.PropTypes.string.isRequired,\n      icon: React.PropTypes.object.isRequired,\n      query_url: React.PropTypes.string,\n      target: React.PropTypes.oneOfType([\n        React.PropTypes.string,\n        React.PropTypes.object\n      ])\n    }),\n    url_template_values: React.PropTypes.object,\n    init_event: React.PropTypes.object,\n    loading: React.PropTypes.bool\n  },\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function () {\n    let theme = PreferencesStore.get('theme');\n    return _.extend({\n      signed_url_loading: true,\n      frame_loading: true,\n      theme: theme\n    }, this._getState());\n  },\n\n  componentDidMount: function() {\n    IntegrationsViewStore.onIntegrationViewStatusChange(this.props.room_id, this.props.integration.full_key, this._onChange);\n    PreferencesStore.on('change:theme', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    IntegrationsViewStore.offIntegrationViewStatusChange(this.props.room_id, this.props.integration.full_key, this._onChange);\n    PreferencesStore.off('change:theme', this._onChange);\n  },\n\n  _renderStaticHeader() {\n    // We use the view as a static glance (name+icon if available)\n    return <Glance glance={this.props.integration} room_id={this.props.room_id} />;\n  },\n\n  render: function () {\n\n    let header;\n    if (_.isObject(this.props.glance)) {\n      header = (\n        <Glance glance={this.props.glance} room_id={this.props.room_id} />\n      );\n    } else {\n      header = this._renderStaticHeader();\n    }\n\n    return (\n      <div className=\"hc-integration-view-sidebar\">\n        <div className=\"hc-integration-sidebar-header\">\n          <div className=\"hc-integration-view-name\">\n            {header}\n            <span ref=\"close_button\"\n                  onClick={this.props.hideIntegrationView}\n                  className=\"aui-icon aui-icon-small aui-iconfont-close-dialog close\"></span>\n          </div>\n        </div>\n\n        <Spinner spin={this._loading()} zIndex={1} delay={this._spinnerDelay()}/>\n        {this._content()}\n\n      </div>\n    );\n  },\n\n  _loading() {\n    if (this.props.integration.internal) {\n      return this.props.loading;\n    }\n    return this.state.signed_url_loading || (this.state.signed_url && this.state.frame_loading);\n  },\n\n  _content() {\n    if (this.state.is_error) {\n      return <div className=\"hc-integrations-error\">\n        <div className=\"hc-integrations-error-image\"/>\n        <p>{strings.integration_failed_to_load}</p>\n        <button onClick={this._retryLoadingPanel} className=\"aui-button aui-button-primary\">\n          {strings.retry}\n        </button>\n      </div>;\n    }\n\n    if (!this.props.integration.internal && this.state.signed_url) {\n      return this._renderIntegrationFrame();\n    }\n\n    if (this.props.integration.internal){\n      return this.props.children;\n    }\n\n    return null;\n  },\n\n  _renderIntegrationFrame: function () {\n    let signed_url = Utils.appendQueryParameter(this.state.signed_url, \"theme\", this.state.theme);\n\n    return (\n      <IntegrationFrame integration={this.props.integration}\n                        signed_url={signed_url}\n                        room_id={this.props.room_id}\n                        init_event={this.props.init_event}/>\n    );\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n  },\n\n  _getState: function() {\n    let theme = PreferencesStore.get('theme');\n    let integrationViewStatus = IntegrationsViewStore.getIntegrationViewStatus(this.props.room_id, this.props.integration.full_key) || {};\n    integrationViewStatus.theme = theme;\n    return integrationViewStatus;\n  },\n\n  _retryLoadingPanel() {\n    if (this.state.is_error) {\n      IntegrationActions.fetchSignedUrl(this.props.integration, this.props.room_id, this.state.url_template_values);\n    }\n  },\n\n  _spinnerDelay: function() {\n    let isLoadingPossiblyCachedContents = this.state.signed_url && this.state.frame_loading\n      && this.props.integration.authentication === 'none';\n    return isLoadingPossiblyCachedContents ? AppConfig.integrations.spinner_delay : 0;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/integration_view.js\n **/","import AppStore from 'stores/application_store';\nimport strings from 'strings/integrations_strings';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport DialogActions from 'actions/dialog_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport ChatHeaderStore from 'stores/chat_header_store';\n\nexport default React.createClass({\n\n  displayName: 'IntegrationsConfigureButton',\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  componentDidMount: function() {\n    AppStore.on(['change:web_server', 'change:current_user'], this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    AppStore.off(['change:web_server', 'change:current_user'], this._onChange);\n  },\n\n  _getState: function () {\n    var current_user = AppStore.get(\"current_user\");\n\n    return {\n      user_id: current_user.user_id,\n      web_server: AppStore.get(\"web_server\")\n    };\n  },\n\n  _onChange: function() {\n    this.setState(this._getState());\n  },\n\n  _onIntegrationsClick: function() {\n    var chat = ChatHeaderStore.get('chat');\n    DialogActions.showIntegrationsManagementDialog({\n      jid: chat.jid,\n      room_name: chat.name\n    });\n    AnalyticsActions.roomIntegrationsLinkClicked();\n  },\n\n  render() {\n    return (\n      <div className=\"hc-integration-sidebar-footer hc-integrations-configure-button\">\n        <div>\n          <a id=\"hc-integrations-link\" onClick={this._onIntegrationsClick} target=\"_blank\" className=\"aui-nav-item\">\n            <span className=\"aui-icon aui-icon-small aui-iconfont-configure \"/>\n            <span>{strings.configure_integrations}</span>\n          </a>\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/integrations/integrations_configure_button.js\n **/","import utils from \"helpers/utils\";\nimport LayoutStore from 'stores/layout_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport RosterStore from 'stores/roster_store';\nimport ConfigStore from 'stores/configuration_store';\nimport RosterMiniExpander from './roster_mini_expander';\nimport RosterMiniItem from './roster_mini_item';\nimport cx from 'classnames';\n\nmodule.exports = React.createClass({\n\n  displayName: \"RightSideBarRosterMini\",\n\n  propTypes: {\n    max_items_to_render: React.PropTypes.number,\n    force_update: React.PropTypes.bool\n  },\n\n  getDefaultProps: function () {\n    return {\n      max_items_to_render: 32,\n      force_update: false\n    };\n  },\n\n  getInitialState: function () {\n    return _.assign(this._getState(), {\n      hide_expander: false,\n      capacity: 0\n    });\n  },\n\n  _getContainerWidth: function () {\n    var container = this.refs.roster_mini_container;\n    if (!container) {\n      return 0;\n    }\n    return container.offsetWidth;\n  },\n\n  _getItemWidth: function () {\n    var domNode = this.refs.roster_mini_container;\n    if (!domNode || domNode.childNodes.length < 1) {\n      return 0;\n    }\n    return domNode.childNodes[0].offsetWidth;\n  },\n\n  _getCapacity: function () {\n    var container_width = this._getContainerWidth();\n    if (container_width === 0) {\n      return undefined;\n    }\n    var item_width = this._getItemWidth();\n    if (item_width === 0) {\n      return undefined;\n    }\n    var numbers_in_each_row = Math.max(1, Math.floor(container_width / item_width));\n    return numbers_in_each_row * 2;\n  },\n\n  _getNumberOfPeopleToShow: function () {\n    if (!this.state.capacity) {\n      return 0;\n    }\n    var number_of_positions = (this.props.max_items_to_render < this.state.capacity) ?\n      this.props.max_items_to_render : this.state.capacity;\n    return Math.max(0, (this.state.total_number_of_people <= number_of_positions) ?\n      this.state.total_number_of_people : number_of_positions - 1);\n  },\n\n  _shouldTheListBeTrimmed: function () {\n    // We need to cut the list short if we are showing less than we have space for.\n    if (!this.state.capacity) {\n      return false;\n    }\n    return this.props.max_items_to_render < this.state.capacity &&\n      this.props.max_items_to_render < this.state.total_number_of_people;\n  },\n\n  _isRightSideBarWidthChanging: function () {\n    return LayoutStore.get('rightSidebarVisibleWidthIsChanging');\n  },\n\n  _reOrderExpander: function () {\n    var capacity = this._getCapacity();\n    var is_changing = this._isRightSideBarWidthChanging();\n    this.setState(_.assign(this._getState(), {\n      hide_expander: is_changing,\n      capacity: capacity\n    }));\n  },\n\n  componentDidMount: function () {\n    RosterStore.on(['change:participants', 'change:admins'], this._onChange);\n    PreferencesStore.on(['change:rightColumnWidth'], this._reOrderExpander);\n    LayoutStore.on(['change:rightSidebarVisibleWidthIsChanging'], this._reOrderExpander);\n    this._reOrderExpander();\n  },\n\n  componentDidUpdate: function () {\n    this._reOrderExpander();\n  },\n\n  componentWillUnmount: function () {\n    RosterStore.off(['change:participants', 'change:admins'], this._onChange);\n    PreferencesStore.off(['change:rightColumnWidth'], this._reOrderExpander);\n    LayoutStore.off(['change:rightSidebarVisibleWidthIsChanging'], this._reOrderExpander);\n  },\n\n  shouldComponentUpdate: function (nextProps, nextState) {\n    return this.props.force_update ||\n      nextProps.max_items_to_render !== this.props.max_items_to_render || !_.isEqual(nextState.admins, this.state.admins) || !_.isEqual(nextState.all_people_to_show, this.state.all_people_to_show) ||\n      nextState.total_number_of_people !== this.state.total_number_of_people ||\n      nextState.hide_expander !== this.state.hide_expander ||\n      nextState.capacity !== this.state.capacity;\n  },\n\n  _getState: function () {\n    return {\n      admins: RosterStore.get('admins'),\n      should_animate_gif_avatars: !ConfigStore.get('feature_flags').web_client_freeze_gifs,\n      all_people_to_show: this.getAllPeopleFromStore(),\n      total_number_of_people: this.getNumberOfPeopleFromStore()\n    };\n  },\n\n  _onChange: function () {\n    this.setState(this._getState());\n  },\n\n  _isAdmin: function (user) {\n    return utils.user.is_admin(this.state.admins, false, user);\n  },\n\n  _copyUser: function (user) {\n    return {\n      id: user.id,\n      user_id: user.user_id,\n      jid: user.jid,\n      presence: {\n        show: user.presence ? user.presence.show : undefined,\n        status: user.presence ? user.presence.status : undefined\n      },\n      name: user.name,\n      mention_name: user.mention_name,\n      photo_url: user.photo_url,\n      subscription: user.subscription\n    };\n  },\n\n  getAllPeopleFromStore: function () {\n    return RosterStore.getSortedRosterByPresenceAndName(['members', 'guests']).slice(0, this.props.max_items_to_render).map(this._copyUser);\n  },\n\n  getNumberOfPeopleFromStore: function () {\n    return RosterStore.getRosterCount(['members', 'guests']).total;\n  },\n\n  render: function () {\n    var rosterWrapClasses = cx({\n      'roster-wrap': true\n    });\n\n    var rosterClasses = cx({\n      'hc-roster-mini': true,\n      'hc-sidebar-noscroll': true\n    });\n\n    var number_of_people_visible = this._getNumberOfPeopleToShow();\n    var trim_the_list = this._shouldTheListBeTrimmed();\n    var index = 0;\n    return (\n      <div className={rosterWrapClasses}>\n        <div className={rosterClasses}>\n          <div ref=\"roster_mini_container\" className=\"roster-mini-flex-list roster_mini_container\" data-skate-ignore>\n            {\n              _.map(this.state.all_people_to_show, (user) => {\n                // We need to cut the list short if we are showing less than we have space for.\n                if (trim_the_list && index >= number_of_people_visible) {\n                  return false;\n                }\n                var order = (index < number_of_people_visible) ? \"show\" : \"overflow\";\n                index++;\n                return <RosterMiniItem size=\"small\"\n                                       order={order}\n                                       key={index}\n                                       user_is_admin={this._isAdmin(user)}\n                                       user_name={user.name}\n                                       user_mention_name={user.mention_name}\n                                       user_presence_show={user.presence.show}\n                                       user_presence_status={user.presence.status}\n                                       user_photo_url={user.photo_url}\n                                       user_jid={user.jid}\n                                       user_id={user.id}\n                                       shouldAnimate={this.state.should_animate_gif_avatars}/>;\n              })\n              }\n            <RosterMiniExpander size=\"small\" total_number_of_people={this.state.total_number_of_people}\n              number_of_people_visible={number_of_people_visible} hide={this.state.hide_expander} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/roster_mini.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'RosterMiniExpander',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    size: React.PropTypes.string,\n    hide: React.PropTypes.bool,\n    total_number_of_people: React.PropTypes.number,\n    number_of_people_visible: React.PropTypes.number\n  },\n\n  getDefaultProps: function () {\n    return {\n      size: 'small',\n      hide: false,\n      total_number_of_people: 0,\n      number_of_people_visible: 0\n    };\n  },\n\n  _getNumberToShow: function() {\n    var number_to_show = Math.max(0, this.props.total_number_of_people - this.props.number_of_people_visible);\n    return number_to_show > 99 ? '99+' : number_to_show.toString();\n  },\n\n  render: function () {\n    if (this.props.hide) {\n      return false;\n    }\n    if (this.props.number_of_people_visible === 0 ||\n      this.props.total_number_of_people === 0) {\n      return false;\n    }\n    if (this.props.number_of_people_visible >= this.props.total_number_of_people) {\n      return false;\n    }\n\n    var classes = `aui-avatar aui-avatar-project aui-avatar-${this.props.size}`;\n    return (\n      <div className=\"hc-roster-mini-expander\" data-order=\"expander\">\n        <span className={classes}>\n          <span className='aui-avatar-inner'>\n            <div className='hc-default-avatar'>\n            { this._getNumberToShow() }\n            </div>\n          </span>\n        </span>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/roster_mini_expander.js\n **/","import PersonAvatar from '../common/avatars/person_avatar';\nimport PersonHelper from 'helpers/person_helper';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: 'RosterMiniItem',\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    size: React.PropTypes.string,\n    order: React.PropTypes.string,\n    user_is_admin: React.PropTypes.bool,\n    user_name: React.PropTypes.string.isRequired,\n    user_mention_name: React.PropTypes.string.isRequired,\n    user_presence_show: React.PropTypes.string,\n    user_presence_status: React.PropTypes.string,\n    user_photo_url: React.PropTypes.string,\n    user_jid: React.PropTypes.string,\n    user_id: React.PropTypes.oneOfType([React.PropTypes.number, React.PropTypes.string]),\n    shouldAnimate: React.PropTypes.bool\n  },\n\n  getDefaultProps: function () {\n    return {\n      size: 'small',\n      order: 'show',\n      user_is_admin: false,\n      user_presence_show: 'unknown',\n      user_presence_status: ''\n    };\n  },\n\n  _getTooltip() {\n    return PersonHelper.get_user_tooltip_flat(this.props.user_name, this.props.user_mention_name, this.props.user_is_admin, this.props.user_presence_show, this.props.user_presence_status);\n  },\n\n  _getAvatar() {\n    return <PersonAvatar avatar_url={this.props.user_photo_url}\n                        presence={this.props.user_presence_show}\n                        name={this.props.user_name}\n                        size={this.props.size}\n                        shouldAnimate={this.props.shouldAnimate}\n                        uid={this.props.user_id}/>;\n  },\n\n  render: function () {\n    var avatar = this._getAvatar(),\n        tooltip = this._getTooltip();\n    return (\n      <div ref=\"person\" key={'user-' + this.props.user_id} className=\"hc-roster-mini-item\" data-order={this.props.order}\n        data-status={this.props.user_presence_show} data-name={this.props.user_name} aria-label={tooltip}>\n        {avatar}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/right_sidebar/roster_mini_item.js\n **/","import ChatHeaderStore from 'stores/chat_header_store';\nimport GroupChatHeader from './groupchat_header';\nimport OTOHeader from './oto_header';\nimport PreferencesStore from \"stores/preferences_store\";\nimport PermissionsStore from \"stores/permissions_store\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport IntegrationsStore from 'stores/integrations_store';\n\nlet integration_events = [\n  'change:should_show_warning_icon'\n];\n\nfunction getState() {\n  var chat = ChatHeaderStore.get('chat'),\n      presence = chat.presence || {};\n\n  return {\n    type: ChatHeaderStore.get('type'),\n    initialized: ChatHeaderStore.get('initialized'),\n    path_prefix: ChatHeaderStore.get('path_prefix'),\n    name: chat.name,\n    jid: ChatHeaderStore.get('active_chat'),\n    room_id: chat.id,\n    privacy: chat.privacy,\n    topic: chat.topic,\n    guest_url: chat.guest_url,\n    is_archived: chat.is_archived,\n    title: chat.title,\n    photo_large: chat.photo_large,\n    loading_profile: chat.loading_profile,\n    presence_status: presence.status,\n    presence_show: presence.show,\n    mention_name: chat.mention_name,\n    time: chat.time,\n    email: chat.email,\n    active_chat: ChatHeaderStore.get('active_chat'),\n    do_emoticons: PreferencesStore.shouldReplaceTextEmoticons(),\n    should_animate_avatar: PreferencesStore.shouldAnimateAvatars(),\n    groupchat_active_panel: PreferencesStore.getGroupChatActivePanel(),\n    groupchat_show_sidebar: PreferencesStore.shouldShowGroupChatSidebar(),\n    chat_active_panel: PreferencesStore.getChatActivePanel(),\n    chat_show_sidebar: PreferencesStore.shouldShowChatSidebar(),\n    topic_editing: ChatHeaderStore.get('topic_editing'),\n    topic_input_value: chat.topic,\n    can_create_room: PermissionsStore.canCreateRoom(),\n    can_manage_room_integrations: PermissionsStore.canManageRoomIntegrations(),\n    can_view_guest_access: PermissionsStore.canViewGuestAccess(),\n    can_toggle_guest_access: PermissionsStore.canToggleGuestAccess(),\n    video_enabled: ChatHeaderStore.get('video_enabled'),\n    user_is_admin: PermissionsStore.get('user_is_room_admin'),\n    per_room_notifications_enabled: ChatHeaderStore.get('per_room_notifications_enabled'),\n    web_client_integrations_enabled: ChatHeaderStore.get('web_client_integrations_enabled'),\n    web_client_addlive_video_enabled: ChatHeaderStore.get('web_client_addlive_video_enabled'),\n    web_client_enso_video_enabled: ChatHeaderStore.get('web_client_enso_video_enabled'),\n    web_client_enso_room_video_enabled: ChatHeaderStore.get('web_client_enso_room_video_enabled'),\n    show_integrations_warning_icon: IntegrationsStore.get('should_show_warning_icon')\n  };\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"ChatHeader\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function () {\n    return getState();\n  },\n\n  componentDidMount: function() {\n    ChatHeaderStore.on('change', this._onChange);\n    PreferencesStore.on('change', this._onChange);\n    PermissionsStore.on('change', this._onChange);\n    IntegrationsStore.on(integration_events, this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    ChatHeaderStore.off('change', this._onChange);\n    PreferencesStore.off('change', this._onChange);\n    PermissionsStore.off('change', this._onChange);\n    IntegrationsStore.off(integration_events, this._onChange);\n  },\n\n  _onChange: function(){\n    this.setState(getState());\n  },\n\n  _getHeader: function () {\n    if (this.state.type === 'chat') {\n      return <OTOHeader photo_large={this.state.photo_large}\n                        jid={this.state.jid}\n                        id={this.state.room_id}\n                        active_panel={this.state.chat_active_panel}\n                        show_sidebar={this.state.chat_show_sidebar}\n                        name={this.state.name}\n                        mention_name={this.state.mention_name}\n                        loading_profile={this.state.loading_profile}\n                        presence_status={this.state.presence_status}\n                        presence_show={this.state.presence_show}\n                        time={this.state.time}\n                        email={this.state.email}\n                        title={this.state.title}\n                        video_enabled={this.state.video_enabled}\n                        should_animate_avatar={this.state.should_animate_avatar}\n                        web_client_enso_video_enabled={this.state.web_client_enso_video_enabled}\n                        web_client_addlive_video_enabled={this.state.web_client_addlive_video_enabled}\n                        web_client_integrations_enabled={this.state.web_client_integrations_enabled}/>;\n      } else if (this.state.type === 'groupchat') {\n        return <GroupChatHeader name={this.state.name}\n                                jid={this.state.jid}\n                                path_prefix={this.state.path_prefix}\n                                room_id={this.state.room_id}\n                                privacy={this.state.privacy}\n                                type={this.state.type}\n                                guest_url={this.state.guest_url}\n                                is_archived={this.state.is_archived}\n                                topic={this.state.topic}\n                                initialized={this.state.initialized}\n                                topic_editing={this.state.topic_editing}\n                                topic_input_value={this.state.topic_input_value}\n                                active_panel={this.state.groupchat_active_panel}\n                                show_sidebar={this.state.groupchat_show_sidebar}\n                                do_emoticons={this.state.do_emoticons}\n                                is_guest={this.props.is_guest}\n                                can_create_room={this.state.can_create_room}\n                                can_view_guest_access={this.state.can_view_guest_access}\n                                can_toggle_guest_access={this.state.can_toggle_guest_access}\n                                can_manage_room_integrations={this.state.can_manage_room_integrations}\n                                per_room_notifications_enabled={this.state.per_room_notifications_enabled}\n                                user_is_admin={this.state.user_is_admin}\n                                video_enabled={this.state.video_enabled}\n                                web_client_enso_video_enabled={this.state.web_client_enso_video_enabled}\n                                web_client_enso_room_video_enabled={this.state.web_client_enso_room_video_enabled}\n                                web_client_integrations_enabled={this.state.web_client_integrations_enabled}\n                                show_integrations_warning_icon={this.state.show_integrations_warning_icon}/>;\n    }\n    return <div></div>;\n  },\n\n  render: function () {\n    var header = this._getHeader();\n\n    return (\n      <header className=\"aui-page-header room-header\">\n        {header}\n      </header>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/chat_header.js\n **/","import TopicInput from \"./topic_input\";\nimport GroupChatHeaderButtons from \"./groupchat_header_buttons\";\nimport utils from \"helpers/utils\";\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport VideoActions from 'actions/video_actions';\nimport strings from 'strings/chat_header_strings';\nimport cx from 'classnames';\nimport emoticons from 'helpers/emoticons';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport GroupChatHeaderActions from 'actions/groupchat_header_actions';\nimport Spinner from 'components/common/spinner/spinner';\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"GroupChatHeader\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    do_emoticons: React.PropTypes.bool\n  },\n\n  componentDidUpdate: function() {\n    emoticons._replaceSpecials(ReactDOM.findDOMNode(this));\n  },\n\n  _getTopic: function () {\n    var topic;\n\n    if (this.props.topic_editing) {\n      topic = this._getTopicInput();\n    } else {\n      topic = this._getTopicText();\n    }\n    return topic;\n  },\n\n  _getTopicInput: function () {\n    return <TopicInput topic_input_value={this.props.topic_input_value}/>;\n  },\n\n  _getTopicText: function () {\n    var topic,\n        escapedTopic,\n        defaultTopicText = (this.props.is_guest) ? \"\" : strings.default_topic;\n\n    // Topic is still loading, show spinner\n    if (this.props.topic === null) {\n      topic = <div className='topic-spinner'>\n                <Spinner size='small'\n                         spin={true}\n                         left='0'\n                         top='0'/>\n              </div>;\n    // Topic is loaded, but empty\n    } else if (this.props.topic === '') {\n      topic = <i className=\"hc-page-header-topic\"\n                 onDoubleClick={this._onTopicDoubleClick}>\n                  {defaultTopicText}\n              </i>;\n    // Topic is loaded, not empty\n    } else {\n      escapedTopic = utils.escapeAndLinkify(this.props.topic, {\n        escape_whitespace: true,\n        do_word_breaks: false,\n        do_emoticons: this.props.do_emoticons && this.props.initialized\n      });\n      topic = <div className=\"hc-page-header-topic\"\n                   title={this.props.topic}\n                   onClick={this._onClick}\n                   onDoubleClick={this._onTopicDoubleClick}\n                   onCopy = {this._onCopy}\n                   dangerouslySetInnerHTML={{__html: '<span>' + escapedTopic + '</span>'}}/>;\n    }\n\n    return topic;\n  },\n\n  _onCopy: function () {\n    if (utils.link.identify_invite_link(window.getSelection().toString())) {\n      AnalyticsActions.userInviteURLCopied();\n    }\n  },\n\n  _onClick(evt) {\n    let isLink = _.get(evt, 'target.tagName', '').toLowerCase() === 'a';\n    let url = _.get(evt, 'target.href', null);\n    let jid = this.props.jid;\n    let room_id = this.props.room_id;\n\n    if (!this.props.is_guest && isLink && !!url && utils.video.isVideoLink(url)) {\n      evt.preventDefault();\n      VideoActions.joinRoomVideoCall({ url, jid, room_id });\n    }\n  },\n\n  _onTopicDoubleClick: function() {\n    if (!this.props.is_guest) {\n      ChatHeaderActions.editTopicInChatHeader();\n    }\n  },\n\n  _getGroupChatButtons() {\n    return <GroupChatHeaderButtons {...this.props} />;\n  },\n\n  _getGuestAccessLozenge() {\n    if (!this.props.guest_url) {\n      return null;\n    }\n\n    return (\n      <span id=\"guest_access\" className=\"guest-access-lozenge aui-lozenge aui-lozenge-complete aui-lozenge-subtle\" onMouseOver={this._showGuestAccessInformation}>{strings.guest_access_on}</span>\n    );\n  },\n\n  _showGuestAccessInformation() {\n    GroupChatHeaderActions.showGuestAccessInformation({\n      anchor: document.getElementById('guest_access'),\n      guest_url: this.props.guest_url\n    });\n  },\n\n  render: function () {\n    var headerClasses = cx({\n          'aui-page-header-main': true,\n          'hc-page-header-main': true,\n          'hc-integrations-enabled': this.props.web_client_integrations_enabled\n        }),\n        iconClasses = cx({\n          'aui-icon': true,\n          'hipchat-icon-huge': true,\n          'icon-private': (this.props.privacy === \"private\"),\n          'icon-public': (this.props.privacy === \"public\"),\n          'icon-dot': (!this.props.privacy)\n        }),\n        topic = this._getTopic(),\n        groupChatButtons = this._getGroupChatButtons(),\n        guestAccess = this._getGuestAccessLozenge();\n\n    return (\n      <div className=\"aui-page-header-inner hc-groupchat\">\n        <div className=\"page-header-icon\">\n          <span className={iconClasses}></span>\n        </div>\n        <div className={headerClasses}>\n          <div className=\"hc-groupchat-header\">\n            <h3>{this.props.name}</h3>{guestAccess}<br />\n          </div>\n          {topic}\n        </div>\n        {groupChatButtons}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/groupchat_header.js\n **/","import ChatHeaderActions from 'actions/chat_header_actions';\nimport AppConfig from 'config/app_config';\nimport cx from \"classnames\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport link_utils from \"helpers/link_utils\";\nimport AnalyticsActions from 'actions/analytics_actions';\n\nexport default React.createClass({\n\n  displayName: \"TopicInput\",\n\n  mixins: [PureRenderMixin],\n\n  componentDidMount: function() {\n    ReactDOM.findDOMNode(this.refs.topicInput).select();\n    document.addEventListener(\"click\", this._onBlur);\n  },\n\n  componentWillUnmount: function() {\n    document.removeEventListener(\"click\", this._onBlur);\n  },\n\n  getInitialState: function() {\n    return {\n      topic_editing_value: null\n    };\n  },\n\n  _handleTopicSubmit: function(e) {\n    e.preventDefault();\n    if (this.state.topic_editing_value !== null) { // Only set topic if changes were made\n      this._setTopic();\n    }\n    this._dismissTopicEdit();\n  },\n\n  _onKeydown: function(evt) {\n    if (evt.keyCode === 27) {\n      this._dismissTopicEdit();\n    }\n  },\n\n  _onKeyPressCancel: function(e) {\n    if (e.keyCode === 13) {\n      this._dismissTopicEdit();\n    }\n  },\n\n  _onBlur: function(e) {\n    var $target = $(e.target);\n\n    if (!$target.is(\".change-topic-action > a\")) {\n      this._dismissTopicEdit();\n    }\n  },\n\n  _preventBubbling: function(evt) {\n    evt.nativeEvent.stopImmediatePropagation();\n  },\n\n  _setTopic: function() {\n    ChatHeaderActions.changeTopic(this.state.topic_editing_value);\n    this.state.topic_editing_value = null;\n  },\n\n  _dismissTopicEdit: function() {\n    this.topic_editing_value = null;\n    ChatHeaderActions.dismissTopicEdit();\n  },\n\n  _onValueChange: function(evt) {\n    this.setState({\n      topic_editing_value: evt.target.value\n    });\n  },\n\n  _onCopy: function () {\n    if (link_utils.identify_invite_link(window.getSelection().toString())) {\n      AnalyticsActions.userInviteURLCopied();\n    }\n  },\n\n  render: function() {\n    var inputValue = (this.state.topic_editing_value !== null) ? this.state.topic_editing_value : this.props.topic_input_value,\n        inputClasses = cx({\n          'text': true,\n          'topic-edit-input': true,\n          'mousetrap': true\n        });\n\n    return (\n      <form ref=\"topicForm\" className=\"aui\" onSubmit={this._handleTopicSubmit} onKeyDown={this._onKeydown} onClick={this._preventBubbling}>\n        <input type=\"text\"\n               ref=\"topicInput\"\n               id=\"topic-input\"\n               maxLength={AppConfig.max_topic_text_length}\n               className={inputClasses}\n               value={inputValue}\n               onCopy={this._onCopy}\n               onChange={this._onValueChange}/>\n        <button id=\"topic-submit-btn\" type=\"submit\" className=\"aui-button\">\n          <span className=\"aui-icon aui-icon-small aui-iconfont-success\">Success </span>\n        </button>\n        <button id=\"topic-cancel-btn\" type=\"button\" className=\"aui-button\" onKeyDown={this._onKeyPressCancel} onClick={this._dismissTopicEdit}>\n          <span className=\"aui-icon hipchat-icon-xsmall hc-close-icon icon-close\">Close </span>\n        </button>\n      </form>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/topic_input.js\n **/","import strings from 'strings/chat_header_strings';\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport ChatHeaderStrings from 'strings/chat_header_strings';\nimport GroupChatRoomDropDown from './groupchat_room_dropdown';\nimport NotificationIcon from './notification_icon';\nimport AUIDropdown from 'components/common/aui/dropdown2/aui_dropdown2';\nimport AUIDropdownTrigger from 'components/common/aui/dropdown2/aui_dropdown2_trigger';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport utils from 'helpers/utils';\nimport cx from 'classnames';\n\nconst PropTypes = React.PropTypes;\n\nexport default React.createClass({\n\n  displayName: \"GroupChatHeaderButtons\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    jid: PropTypes.string,\n    name: PropTypes.string,\n    guest_url: PropTypes.string,\n    room_id: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number\n    ]),\n    privacy: PropTypes.string,\n    type: PropTypes.string,\n    active_panel: PropTypes.string,\n    is_guest: PropTypes.bool,\n    show_sidebar: PropTypes.bool,\n    user_is_admin: PropTypes.bool,\n    per_room_notifications_enabled: PropTypes.bool,\n    can_create_room: PropTypes.bool,\n    can_view_guest_access: PropTypes.bool,\n    can_toggle_guest_access: PropTypes.bool,\n    can_manage_room_integrations: PropTypes.bool,\n    web_client_integrations_enabled: PropTypes.bool,\n    web_client_enso_video_enabled: PropTypes.bool,\n    web_client_enso_room_video_enabled: PropTypes.bool,\n    show_integrations_warning_icon: React.PropTypes.bool\n  },\n\n  _startEnsoRoomVideo: function () {\n    ChatHeaderActions.startEnsoRoomVideo({\n      jid: this.props.jid,\n      room_id: this.props.room_id,\n      name: this.props.name\n    });\n  },\n\n  _selectPanel: function(type) {\n    this._clearButtonFocus();\n    ChatHeaderActions.handlePanelSelect({\n      type: type,\n      room: this.props.jid\n    });\n  },\n\n  _clearButtonFocus: function () {\n    var buttons = ReactDOM.findDOMNode(this).querySelectorAll(\".aui-button\");\n    for (var i = 0; i < buttons.length; i++) {\n      buttons[i].blur();\n    }\n  },\n\n  _getDropDown() {\n    return (\n      <AUIDropdown className=\"aui-dropdown2-in-header\" dropdownID=\"room-actions-drop-down\">\n        <GroupChatRoomDropDown {...this.props } />\n      </AUIDropdown>\n    );\n  },\n\n  _getActionsButton: function () {\n    let classNames = cx({\n      'aui-button': true,\n      'aui-button-light': true,\n      'notification-badge': this.props.show_integrations_warning_icon\n    });\n\n    return (\n      <AUIDropdownTrigger\n        id=\"room-actions-btn\"\n        dropdownID=\"room-actions-drop-down\"\n        className={classNames}\n        arrowless={true}\n        aria-label={strings.room_actions}>\n          <span className=\"aui-icon aui-icon-small aui-iconfont-more\">{strings.room_actions}</span>\n      </AUIDropdownTrigger>\n    );\n  },\n\n  _getNotificationIcon: function () {\n    return (this.props.per_room_notifications_enabled && !this.props.is_guest) ? <NotificationIcon jid={this.props.jid} room_name={this.props.name} /> : null;\n  },\n\n  _getVideoButton: function () {\n    let is_archived = utils.room.is_archived(this.props);\n\n    if (!this.props.web_client_enso_video_enabled || !this.props.web_client_enso_room_video_enabled || this.props.is_guest) {\n      return null;\n    }\n\n    return <button\n      ref='video_btn'\n      className='hc-video-call-btn-link aui-button aui-button-light'\n      title={ChatHeaderStrings.video_call}\n      onClick={this._startEnsoRoomVideo}\n      disabled={is_archived}\n      data-no-focus>\n        <span className='aui-icon hipchat-icon-small icon-camera-no-slash'>{ChatHeaderStrings.video_call}</span>\n    </button>;\n  },\n\n  _getButtonTitle: function(ref, tooltip) {\n    if(this.props.show_sidebar && this.props.active_panel === ref) {\n      return strings[`hide_${tooltip}`];\n    }\n\n    return strings[`show_${tooltip}`];\n  },\n\n  _renderButton: function(tooltip, ref, icons) {\n    var active = (this.props.active_panel === ref && this.props.show_sidebar) ? 'active' : '';\n    var title = this._getButtonTitle(ref, tooltip);\n    return (\n      <button ref={`${ref}_btn`} className={`hc-${ref}-btn-link aui-button aui-button-light ${active}`}\n              onClick={this._selectPanel.bind(null, ref)}\n              aria-label={title}>\n        <span className={\"aui-icon \" + icons}>{strings[ref]}</span>\n      </button>\n    );\n  },\n\n  _getWebClientIntegrationsButtons: function(){\n    var notificationIcon = this._getNotificationIcon(),\n        videoButton = this.props.video_enabled ? this._getVideoButton() : null,\n        sidePanelButton = this._renderButton(\"sidebar\", \"integrations\", \"hipchat-icon-small icon-integrations\"),\n        actionsButton = (this.props.is_guest) ? false : this._getActionsButton();\n\n    return (\n      <div>\n        {notificationIcon}\n        <div className=\"aui-buttons\">\n          {videoButton}\n        </div>\n        <div className=\"aui-buttons\">\n          {sidePanelButton}\n          {actionsButton}\n          </div>\n      </div>\n    );\n  },\n\n  _getButtons: function(){\n    var notificationIcon = this._getNotificationIcon(),\n        videoButton = this._getVideoButton(),\n        rosterButton = this._renderButton(\"roster\", \"roster\", \"aui-icon-small aui-iconfont-user\"),\n        filesButton = this._renderButton(\"files\", \"files\", \"hipchat-icon-small icon-file\"),\n        linksButton = this._renderButton(\"links\", \"links\", \"hipchat-icon-small icon-link\"),\n        actionsButton = (this.props.is_guest) ? false : this._getActionsButton();\n\n    return (\n      <div>\n        {notificationIcon}\n        <div className=\"aui-buttons\">\n          {videoButton}\n        </div>\n        <div className=\"aui-buttons\">\n          {rosterButton}\n          {filesButton}\n          {linksButton}\n        </div>\n        <div className=\"aui-buttons\">\n          {actionsButton}\n        </div>\n      </div>\n    );\n\n  },\n\n  render: function () {\n    var classNames = cx({\n      'aui-page-header-actions': true,\n      'hc-chat-header-actions': true,\n      'hc-integrations-chat-header-actions': this.props.web_client_integrations_enabled\n    });\n\n    var dropDown = (this.props.is_guest) ? false : this._getDropDown(),\n        buttons = this.props.web_client_integrations_enabled ? this._getWebClientIntegrationsButtons() : this._getButtons();\n\n    return (\n      <div className={classNames} ref=\"actions\">\n        {buttons}\n        {dropDown}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/groupchat_header_buttons.js\n **/","import DialogActions from 'actions/dialog_actions';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport strings from 'strings/chat_header_strings';\nimport RoomDropDownActions from 'actions/room_dropdown_actions';\nimport utils from 'helpers/utils';\nimport ConfigStore from 'stores/configuration_store';\nimport DropdownInteractiveLink from 'components/common/aui/dropdown2/aui_dropdown2_interactive_link';\nimport AUISection from 'components/common/aui/dropdown2/aui_section';\nimport AnalyticsKeys from 'keys/analytics_keys';\nimport FlagActions from \"actions/flag_actions\";\nimport { enable_guest_fail as enableGuestFailString } from 'strings/dialog_strings';\n\nexport default React.createClass({\n\n  displayName: 'RoomDropDown',\n\n  propTypes: {\n    jid: React.PropTypes.string,\n    name: React.PropTypes.string,\n    guest_url: React.PropTypes.string,\n    room_id: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.number\n    ]),\n    privacy: React.PropTypes.string,\n    is_archived: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.bool\n    ]),\n    user_is_admin: React.PropTypes.bool,\n    per_room_notifications_enabled: React.PropTypes.bool,\n    can_view_guest_access: React.PropTypes.bool,\n    can_toggle_guest_access: React.PropTypes.bool,\n    can_manage_room_integrations: React.PropTypes.bool,\n    show_integrations_warning_icon: React.PropTypes.bool\n  },\n\n  getInitialState() {\n    return this._getState();\n  },\n\n  _getState() {\n    return {\n      user_id: ConfigStore.get('user_id'),\n      web_server: ConfigStore.get('web_server')\n    };\n  },\n\n  componentDidMount() {\n    ConfigStore.on(['change:user_id', 'change:web_server'], this._onChange);\n  },\n\n  componentWillUnmount() {\n    ConfigStore.off(['change:user_id', 'change:web_server'], this._onChange);\n  },\n\n  _onChange(){\n    this.setState(this._getState());\n  },\n\n  // Event Listeners\n\n  _onRoomNotificationsClick() {\n    DialogActions.showRoomNotificationsDialog({\n      jid: this.props.jid,\n      room_name: this.props.name\n    });\n    AnalyticsActions.roomNotificationDropdownClicked();\n  },\n\n  _onArchiveRoomClick() {\n    DialogActions.showArchiveRoomDialog({archive: true});\n  },\n\n  _onUnarchiveRoomClick() {\n    DialogActions.showArchiveRoomDialog({archive: false});\n  },\n\n  _onInviteUserClick() {\n    DialogActions.showInviteUsersDialog({type: AnalyticsKeys.ROOM_MENU});\n    AnalyticsActions.roomMenuInviteClicked();\n  },\n\n  _onRemoveUserClick() {\n    DialogActions.showRemoveUsersDialog();\n  },\n\n  _onChangeTopicClick() {\n    RoomDropDownActions.editTopic();\n  },\n\n  _onChangePrivacyClick() {\n    DialogActions.showRoomPrivacyDialog({\n      jid: this.props.jid,\n      name: this.props.name,\n      privacy: this.props.privacy\n    });\n  },\n\n  _onRenameRoomClick() {\n    DialogActions.showRenameRoomDialog({\n      jid: this.props.jid,\n      name: this.props.name\n    });\n  },\n\n  _onDeleteRoomClick() {\n    DialogActions.showDeleteRoomDialog({\n      jid: this.props.jid,\n      room_id: this.props.room_id,\n      name: this.props.name\n    });\n  },\n\n  _onEnableGuestClick() {\n    RoomDropDownActions.enableGuestAccess({jid: this.props.jid}, this._enableGuestCallback);\n  },\n\n  _enableGuestCallback: function (error) {\n    if (error) {\n      this._throwFlagError(error.message || enableGuestFailString);\n    }\n  },\n\n  _throwFlagError: function (errorMessage) {\n    FlagActions.showFlag({\n      type: \"error\",\n      body: errorMessage,\n      close: \"auto\"\n    });\n  },\n\n  _onDisableGuestClick: function () {\n    DialogActions.showDisableGuestAccessDialog();\n  },\n\n  // Permission / State Validators\n\n  _allowInviteUser() {\n    return ((this.props.privacy === 'public' || this.props.privacy === 'private' && this.props.user_is_admin) && this._isNotArchived());\n  },\n\n  _allowRemoveUser() {\n    return (this.props.privacy === 'private' && this.props.user_is_admin && this._isNotArchived());\n  },\n\n  _allowAdminOnUnarchived() {\n    return this.props.user_is_admin && this._isNotArchived();\n  },\n\n  _allowConfigureIntegrations() {\n    return this.props.can_manage_room_integrations && this._isNotArchived();\n  },\n\n  _isArchived() {\n    return utils.room.is_archived({\n      is_archived: this.props.is_archived\n    });\n  },\n\n  _isNotArchived() {\n    return !this._isArchived();\n  },\n\n  _archiveEnabled() {\n    return this.props.user_is_admin && this._isNotArchived();\n  },\n\n  _unarchiveEnabled() {\n    return this.props.user_is_admin && this._isArchived();\n  },\n\n  // Renderers\n\n  render() {\n    let inviteUserLink = this._renderLink(strings.invite_users, this._allowInviteUser, this._onInviteUserClick),\n      removeUserLink = this._renderLink(strings.remove_users, this._allowRemoveUser, this._onRemoveUserClick),\n      archiveRoomLink = this._renderLink(strings.archive, this._archiveEnabled, this._onArchiveRoomClick),\n      unarchiveRoomLink = this._renderLink(strings.unarchive, this._unarchiveEnabled, this._onUnarchiveRoomClick),\n      changeTopicLink = this._renderLink(strings.change_topic, this._isNotArchived, this._onChangeTopicClick),\n      changePrivacyLink = this._renderLink(strings.change_privacy, this._allowAdminOnUnarchived, this._onChangePrivacyClick),\n      deleteRoomLink = this._renderLink(strings.delete, this._allowAdminOnUnarchived, this._onDeleteRoomClick),\n      renameRoomLink = this._renderLink(strings.rename, this._allowAdminOnUnarchived, this._onRenameRoomClick),\n      roomNotificationsItem = (this.props.per_room_notifications_enabled) ? this._getRoomNotificationsItem() : false,\n      integrationsItem = this._getIntegrationsItem(),\n      canViewGuestAccess = this.props.can_view_guest_access,\n      canToggleGuestAccess = this.props.can_toggle_guest_access;\n\n    return (\n      <div role=\"application\" className=\"groupchat-room-dropdown\">\n        <AUISection>\n          <ul role=\"list\">\n            { roomNotificationsItem }\n            { integrationsItem }\n          </ul>\n        </AUISection>\n        <AUISection>\n          <ul role=\"list\">\n            <li className=\"invite-user-action\" role=\"listitem\">{ inviteUserLink }</li>\n            <li className=\"remove-user-action\" role=\"listitem\">{ removeUserLink }</li>\n          </ul>\n        </AUISection>\n        <AUISection>\n          <ul role=\"list\">\n            <li className=\"enable-guest-action\" role=\"listitem\">\n              <DropdownInteractiveLink\n                type=\"radio\"\n                interactive={ false }\n                checked={ !!this.props.guest_url && canViewGuestAccess }\n                disabled={ !(canToggleGuestAccess && !this.props.guest_url) }\n                onCheck={ this._onEnableGuestClick }>\n                  { strings.enable_guest }\n              </DropdownInteractiveLink>\n            </li>\n            <li className=\"disable-guest-action\" role=\"listitem\">\n              <DropdownInteractiveLink\n                type=\"radio\"\n                interactive={ false }\n                checked={ !this.props.guest_url && canViewGuestAccess }\n                disabled={ !(canToggleGuestAccess && this.props.guest_url) }\n                onCheck={ this._onDisableGuestClick }>\n                  { strings.disable_guest }\n              </DropdownInteractiveLink>\n            </li>\n          </ul>\n        </AUISection>\n        <AUISection>\n          <ul role=\"list\">\n            <li className=\"archive-room-action\" role=\"listitem\">{ archiveRoomLink }</li>\n            <li className=\"unarchive-room-action\" role=\"listitem\">{ unarchiveRoomLink }</li>\n            <li className=\"change-topic-action\" role=\"listitem\">{ changeTopicLink }</li>\n            <li className=\"change-privacy-action\" role=\"listitem\">{ changePrivacyLink }</li>\n            <li className=\"delete-room-action\" role=\"listitem\">{ deleteRoomLink }</li>\n            <li className=\"rename-room-action\" role=\"listitem\">{ renameRoomLink }</li>\n          </ul>\n        </AUISection>\n      </div>\n    );\n  },\n\n  /**\n   * Render an anchor link\n   * @param {string} text. the content of the link. also used as the title attr\n   * @param {function} validator. function to call to see if the link should be active.\n   *   determines whether the link has a disabled class and aria-disabled attr\n   * @param {function} callback. method to call when the link is clicked if it is not disabled\n   */\n  _renderLink (text, validator, callback) {\n    let isAvailable = validator();\n    let handler = () => {\n      if (validator()) {\n        callback();\n      }\n    };\n\n    return (\n      <a title={text}\n         className={ isAvailable ? '' : 'disabled' }\n         aria-disabled={ isAvailable ? 'false' : 'true' }\n         onClick={ handler }>\n        { text }\n      </a>\n    );\n  },\n\n  _getRoomNotificationsItem() {\n    return (\n      <li className=\"room-notifications\" role=\"listitem\">\n        <a title={strings.room_notifications} onClick={this._onRoomNotificationsClick}>{strings.room_notifications}</a>\n      </li>\n    );\n  },\n\n  _onIntegrationsClick() {\n    DialogActions.showIntegrationsManagementDialog({\n      jid: this.props.jid,\n      room_name: this.props.name\n    });\n    AnalyticsActions.roomIntegrationsDropdownClicked(this.props.show_integrations_warning_icon);\n  },\n\n  _getIntegrationsWarningIcon() {\n    return (<span className=\"hc-integration-warning-icon aui-icon aui-icon-small aui-iconfont-warning\" />);\n  },\n\n  _getIntegrationsItem() {\n    let warningIcon = this.props.show_integrations_warning_icon ? this._getIntegrationsWarningIcon() : null;\n\n    return (\n      <li className=\"integrations-user-action\" role=\"listitem\">\n        <a title={strings.integrations} onClick={this._onIntegrationsClick}>\n          {strings.integrations}\n          {warningIcon}\n        </a>\n      </li>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/groupchat_room_dropdown.js\n **/","import cx from 'classnames';\n\n/**\n * https://docs.atlassian.com/aui/latest/docs/dropdown2.html\n *\n * Interactive links are dropdown links with radio buttons or checkboxes\n * next to them. Clicking them do not close the dropdown they are in.\n * You can override this by setting the interactive property to false.\n *\n * <div className=\"aui-dropdown2\">\n *   <div className=\"aui-dropdown2-section\">\n *     <ul>\n *       <AUIDropdown2InteractiveLink type=\"radio\">Clicking me won't close the dropdown</AUIDropdown2InteractiveLink>\n *       <AUIDropdown2InteractiveLink type=\"radio\">Me neither</AUIDropdown2InteractiveLink>\n *     </ul>\n *     <ul>\n *       <AUIDropdown2InteractiveLink type=\"radio\" interactive=\"false\">Clicking me will close the dropdown</AUIDropdown2InteractiveLink>\n *     </ul>\n *     <ul>\n *       <AUIDropdown2InteractiveLink type=\"checkbox\" disabled=\"true\">I'm disabled</AUIDropdown2InteractiveLink>\n *       <AUIDropdown2InteractiveLink type=\"checkbox\" checked=\"true\">I'm checked</AUIDropdown2InteractiveLink>\n *     </ul>\n *   </div>\n * </div>\n */\nexport default React.createClass({\n\n  displayName: 'AUIDropdown2InteractiveLink',\n\n  propTypes: {\n    type: React.PropTypes.oneOf([ 'checkbox', 'radio' ]).isRequired,\n    interactive: React.PropTypes.bool,\n    checked: React.PropTypes.bool,\n    disabled: React.PropTypes.bool,\n    onCheck: React.PropTypes.func,\n    onUncheck: React.PropTypes.func\n  },\n\n  getDefaultProps() {\n    return {\n      interactive: true,\n      checked: false,\n      disabled: false,\n      onCheck: _.noop,\n      onUncheck: _.noop\n    };\n  },\n\n  componentDidMount() {\n    AJS.$(this.refs.link).on({\n      'aui-dropdown2-item-check': this._onCheck,\n      'aui-dropdown2-item-uncheck': this._onUncheck\n    });\n  },\n\n  componentWillUnmount() {\n    AJS.$(this.refs.link).off();\n  },\n\n  _onCheck() {\n    if (!this.props.disabled) {\n      this.props.onCheck();\n    }\n  },\n\n  _onUncheck() {\n    if (!this.props.disabled) {\n      this.props.onUncheck();\n    }\n  },\n\n  render() {\n    let attrs = {\n      'ref': 'link',\n      'id': this.props.id || _.uniqueId(),\n      'aria-disabled': this.props.disabled,\n      'className': cx({\n        [this.props.className]: !!this.props.className,\n        'aui-dropdown2-radio': this.props.type === 'radio',\n        'aui-dropdown2-checkbox': this.props.type === 'checkbox',\n        'interactive': this.props.interactive,\n        'aui-dropdown2-checked': this.props.checked,\n        'checked': this.props.checked,\n        'disabled': this.props.disabled\n      })\n    };\n\n    return <a {...attrs}>{ this.props.children }</a>;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/aui/dropdown2/aui_dropdown2_interactive_link.js\n **/","var PreferencesStore = require('stores/preferences_store');\nvar PrefKeys = require('keys/preferences_keys');\nvar strings = require('strings/room_notification_icon');\nvar DialogActions = require(\"actions/dialog_actions\");\nvar AnalyticsActions = require('actions/analytics_actions');\nvar ApplicationStore = require('stores/application_store');\n\nmodule.exports = React.createClass({\n\n  displayName: \"NotificationIcon\",\n\n  getInitialState: function() {\n    return this._getState();\n  },\n\n  componentDidMount: function(){\n    PreferencesStore.on([`change:${PrefKeys.ROOM_NOTIFICATION_OVERRIDES}`], this._onChange);\n    PreferencesStore.on([`change:${PrefKeys.GLOBAL_NOTIFICATION_SETTING}`], this._onChange);\n    ApplicationStore.on(['change:active_chat'], this._onChange);\n    this._createTooltip();\n  },\n\n  componentWillUnmount: function(){\n    PreferencesStore.off([`change:${PrefKeys.ROOM_NOTIFICATION_OVERRIDES}`], this._onChange);\n    PreferencesStore.off([`change:${PrefKeys.GLOBAL_NOTIFICATION_SETTING}`], this._onChange);\n    ApplicationStore.off(['change:active_chat'], this._onChange);\n    this._destroyTooltip();\n  },\n\n  componentDidUpdate: function () {\n    this._destroyTooltip();\n    this._createTooltip();\n  },\n\n  _onChange: function(){\n    if (this.isMounted()){\n      this.setState(this._getState());\n    }\n  },\n\n  _getState: function () {\n    var jid = ApplicationStore.get('active_chat'),\n        overrides = _.get(PreferencesStore.getRoomNotificationOverrides(), jid),\n        level = _.get(overrides, `level`, PreferencesStore.getGlobalNotificationSetting());\n    return { level };\n  },\n\n  _launchRoomNotificationsDialog: function() {\n    DialogActions.showRoomNotificationsDialog({\n      jid: ApplicationStore.get('active_chat'),\n      room_name: this.props.room_name\n    });\n    AnalyticsActions.roomNotificationIconClicked();\n  },\n\n  _getIcon: function () {\n    var levelIcon = `icon-volume-${this.state.level}`;\n    var classNames = `aui-icon hipchat-icon-small ${levelIcon}`;\n    var title = `${strings.level_prefix}${strings.level[this.state.level]}`;\n    return (\n      <div ref=\"notif_icon\" className=\"hc-room-notif-icon\" onClick={this._launchRoomNotificationsDialog}>\n        <span className={classNames} aria-label={title} ref=\"icon\" />\n      </div>\n    );\n  },\n\n  _createTooltip() {\n    AJS.$(ReactDOM.findDOMNode(this.refs.icon)).tooltip({offset: 10});\n  },\n\n  _destroyTooltip() {\n    AJS.$(ReactDOM.findDOMNode(this.refs.icon)).tooltip('destroy');\n  },\n\n  render: function() {\n    return this._getIcon();\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/notification_icon.js\n **/","import common from 'strings/common_strings';\n\nexport default {\n  level_prefix: `Room notifications: `,\n  level: {\n    loud: common.loud,\n    normal: common.normal,\n    quiet: common.quiet\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/room_notification_icon.js\n **/","import InlineDialogActions from 'actions/inline_dialog_actions';\n\nexport default {\n  showGuestAccessInformation: function(data) {\n    InlineDialogActions.showGuestAccessInformation(data);\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/groupchat_header_actions.js\n **/","import OTOHeaderButtons from \"./oto_header_buttons\";\nimport PersonAvatar from \"components/common/avatars/person_avatar\";\nimport PresenceIcon from \"components/common/icon/presence-icon\";\nimport strings from \"strings/chat_header_strings\";\nimport utils from \"helpers/utils\";\nimport cx from \"classnames\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nmodule.exports = React.createClass({\n\n  displayName: \"OTOHeader\",\n\n  mixins: [PureRenderMixin],\n\n  _getTitle: function () {\n    var title;\n    if (this.props.title) {\n      title = <span className=\"hc-oto-title\">{this.props.title}</span>;\n    }\n    return title;\n  },\n\n  _getStatus: function () {\n    var status;\n    if (this.props.loading_profile) {\n      status = strings.loading;\n    } else {\n      status = this.props.presence_status || utils.user.chat_header_status(this.props.presence_show);\n    }\n    return status;\n  },\n\n  _getHeaderButtons: function () {\n    return <OTOHeaderButtons jid={this.props.jid}\n                              name={this.props.name}\n                              active_panel={this.props.active_panel}\n                              show_sidebar={this.props.show_sidebar}\n                              video_enabled={this.props.video_enabled}\n                              web_client_enso_video_enabled={this.props.web_client_enso_video_enabled}\n                              web_client_addlive_video_enabled={this.props.web_client_addlive_video_enabled}\n                              web_client_integrations_enabled={this.props.web_client_integrations_enabled}/>;\n  },\n\n  render: function() {\n    var hiddenClasses = cx({\n          'hidden': this.props.loading_profile\n        }),\n        mentionClasses = cx({\n          'hidden': this.props.loading_profile,\n          'mention-name': true\n        }),\n        title = this._getTitle(),\n        headerButtons = this._getHeaderButtons(),\n        status = this._getStatus();\n\n    return (\n      <div className=\"aui-page-header-inner hc-priv-chat\" key={'oto-header-' + this.props.jid}>\n        <PersonAvatar avatar_url={this.props.photo_large}\n                   size=\"large\"\n                   shouldAnimate={this.props.should_animate_avatar}\n                   show_presence={false}/>\n        <div className=\"aui-page-header-main hc-page-header-main\">\n          <h3>{this.props.name}</h3>&nbsp;<span className={mentionClasses}>{'(@' + this.props.mention_name + ')'}</span>\n          <p>\n            <PresenceIcon presence={this.props.presence_show} uid={this.props.id}/>\n            <span className=\"hc-oto-status\">{status}</span>\n            <span className={hiddenClasses}>\n              <span className=\"hc-oto-time\">{this.props.time}</span>\n              {title}\n              <a href={\"mailto:\" + this.props.email}>{this.props.email}</a>\n            </span>\n          </p>\n        </div>\n        {headerButtons}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/oto_header.js\n **/","import strings from 'strings/chat_header_strings';\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport VideoButtons from './video_buttons';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"OTOHeaderButtons\",\n\n  mixins: [PureRenderMixin],\n\n  _selectPanel: function(type) {\n    this._clearButtonFocus();\n    ChatHeaderActions.handlePanelSelect({\n      type: type,\n      room: this.props.jid\n    });\n  },\n\n  _clearButtonFocus: function () {\n    var buttons = ReactDOM.findDOMNode(this).querySelectorAll(\".aui-button\");\n    for (var i = 0; i < buttons.length; i++) {\n      buttons[i].blur();\n    }\n  },\n\n  _getVideoButton: function () {\n    return (\n      <VideoButtons\n        jid={this.props.jid}\n        name={this.props.name}\n        web_client_enso_video_enabled={this.props.web_client_enso_video_enabled}\n        web_client_addlive_video_enabled={this.props.web_client_addlive_video_enabled} />\n    );\n  },\n\n  _getButtonTitle: function(ref, tooltip) {\n    if(this.props.show_sidebar && this.props.active_panel === ref) {\n      return strings[`hide_${tooltip}`];\n    }\n\n    return strings[`show_${tooltip}`];\n  },\n\n  _renderButton: function(tooltip, ref, icons) {\n    var active = (this.props.active_panel === ref && this.props.show_sidebar) ? 'active' : '',\n        title = this._getButtonTitle(ref, tooltip);\n    return (\n      <button\n        ref={`${ref}_btn`}\n        className={`hc-${ref}-btn-link aui-button aui-button-light ${active}`}\n        onClick={this._selectPanel.bind(null, ref)}\n        aria-label={title}>\n          <span className={\"aui-icon \" + icons}>{strings[ref]}</span>\n      </button>\n    );\n  },\n\n  render: function () {\n    var videoButton = this.props.video_enabled ? this._getVideoButton() : null,\n        filesButton = !this.props.web_client_integrations_enabled ? this._renderButton(\"files\", \"files\", \"hipchat-icon-small icon-file\") : null,\n        linksButton = !this.props.web_client_integrations_enabled ? this._renderButton(\"links\", \"links\", \"hipchat-icon-small icon-link\") : null,\n        sidePanelButton = this.props.web_client_integrations_enabled ? this._renderButton(\"sidebar\", \"integrations\", \"hipchat-icon-small icon-integrations\") : null;\n\n    return (\n      <div className=\"aui-page-header-actions hc-chat-header-actions\" ref=\"actions\">\n        {videoButton}\n        <div className=\"aui-buttons\">\n          {filesButton}\n          {linksButton}\n          {sidePanelButton}\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/oto_header_buttons.js\n **/","import strings from 'strings/chat_header_strings';\nimport ChatHeaderActions from 'actions/chat_header_actions';\nimport cx from 'classnames';\nimport AUIDropdown from 'components/common/aui/dropdown2/aui_dropdown2';\nimport AUIDropdownTrigger from 'components/common/aui/dropdown2/aui_dropdown2_trigger';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport VideoServiceKeys from 'keys/video_service_keys';\nexport default React.createClass({\n\n  displayName: \"OTOHeaderVideoButtons\",\n\n  mixins: [PureRenderMixin],\n\n  _startAddliveVideoCall: function () {\n    ChatHeaderActions.startCall({\n      jid: this.props.jid,\n      name: this.props.name,\n      service: 'addlive',\n      audio_only: false\n    });\n  },\n\n  _startEnsoVideoCall: function () {\n    ChatHeaderActions.startCall({\n      jid: this.props.jid,\n      name: this.props.name,\n      service: 'enso',\n      audio_only: false\n    });\n  },\n\n  _getVideoSelectButton: function () {\n    return (\n      <AUIDropdownTrigger className=\"hc-video-call-btn-link aui-button aui-button-light\"\n                          dropdownID=\"video-chat-service-menu\"\n                          title={strings.video_call}\n                          data-no-focus=\"true\">\n        <span className=\"aui-icon hipchat-icon-small icon-camera-no-slash\">\n          {strings.video_call}\n        </span>\n      </AUIDropdownTrigger>\n    );\n  },\n\n  _getStandardVideoButton: function (service) {\n    return (\n      <button ref=\"video_btn\"\n              className=\"hc-video-call-btn-link aui-button aui-button-light\"\n              onClick={\n                service === VideoServiceKeys.ENSO\n                ? this._startEnsoVideoCall\n                : this._startAddliveVideoCall\n              }\n              title={strings.video_call}\n              data-no-focus=\"true\">\n        <span className=\"aui-icon hipchat-icon-small icon-camera-no-slash\">\n          {strings.video_call}\n        </span>\n      </button>\n    );\n  },\n\n  _getVideoChatButton: function () {\n    let video_service_enabled = [\n      this.props.web_client_addlive_video_enabled,\n      this.props.web_client_enso_video_enabled\n    ];\n\n    let button;\n\n    switch(video_service_enabled.indexOf(false)) {\n      case -1:\n        button = this._getVideoSelectButton();\n        break;\n      case 0:\n        button = this._getStandardVideoButton(VideoServiceKeys.ENSO);\n        break;\n      case 1:\n        button = this._getStandardVideoButton(VideoServiceKeys.ADDLIVE);\n        break;\n    }\n\n    return button;\n  },\n\n  _getVideoChatExpandMenu: function () {\n      return (\n        <AUIDropdown dropdownID=\"video-chat-service-menu\">\n          <div className=\"aui-dropdown2-section\">\n            <ul>\n              <li>\n                <a ref=\"menu_enso_video_btn\"\n                   className=\"hc-enso-service\"\n                   target=\"_blank\"\n                   onClick={this._startEnsoVideoCall}>\n                  {strings.enso_video}\n                  <span className=\"aui-lozenge aui-lozenge-current hc-video-service-lozenge\">\n                    Beta\n                  </span>\n                </a>\n              </li>\n              <li>\n                <a ref=\"menu_video_btn\"\n                   className=\"hc-video-service\"\n                   target=\"_blank\"\n                   onClick={this._startAddliveVideoCall}>\n                  {strings.hipchat_video}\n                </a>\n              </li>\n            </ul>\n          </div>\n        </AUIDropdown>\n      );\n  },\n\n  render: function () {\n    let provide_select_menu = this.props.web_client_enso_video_enabled && this.props.web_client_addlive_video_enabled;\n    let menu;\n\n    if (provide_select_menu) {\n      menu = this._getVideoChatExpandMenu();\n    }\n    var classes = cx({\n      'aui-buttons': true,\n      'hc-video-btn-expands': provide_select_menu\n    });\n    return (\n      <div className={classes}>\n        <div>\n          {this._getVideoChatButton()}\n        </div>\n        {menu}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_header/video_buttons.js\n **/","import MessageList from \"./message_list\";\nimport ChatWindowStore from \"stores/chat_window_store\";\nimport IntegrationsStore from \"stores/integrations_store\";\nimport utils from \"helpers/utils\";\nimport WindowActions from \"actions/chat_window_actions\";\n\nfunction getChatsState() {\n  return ChatWindowStore.getAll();\n}\n\nfunction getAddonAvatars() {\n  return {addon_avatars: IntegrationsStore.get('addon_avatars')};\n}\n\nfunction getInitialChatsState() {\n  return _.extend(getAddonAvatars(), getChatsState());\n}\n\nlet PureRenderMixin = React.addons.PureRenderMixin;\n\nmodule.exports = React.createClass({\n\n  displayName: \"ChatPanel\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function() {\n    return getInitialChatsState();\n  },\n\n  componentDidMount: function() {\n    ChatWindowStore.on(['change'], this._onChatStateChange);\n    var size = 0;\n    var members = this.state.chats && _.get(this.state, `chats[\"${this.state.active_chat}\"].participants.members`);\n    if (members) {\n      size = members.length;\n    }\n    WindowActions.chatPanelMounted({id: this.state.active_chat, size: size});\n    IntegrationsStore.on(\"change:addon_avatars\", this._onAddonAvatarsChanged);\n  },\n\n  componentWillUnmount: function() {\n    ChatWindowStore.off(['change'], this._onChatStateChange);\n    IntegrationsStore.off('change:addon_avatars', this._onAddonAvatarsChanged);\n  },\n\n  render: function(){\n    var styles = {\n          zoom: this.state.zoom_level\n        },\n        chat;\n\n    if (this.state.active_chat && utils.jid.is_chat(this.state.active_chat) && this.state.chats[this.state.active_chat]) {\n      chat = <MessageList key={this.state.active_chat}\n                          chat={this.state.chats[this.state.active_chat]}\n                          is_guest={this.props.is_guest}\n                          initialized={this.state.initialized}\n                          web_server={this.state.web_server}\n                          token={this.state.oauth2_token}\n                          addon_avatars={this.state.addon_avatars}/>;\n    }\n    return (\n      <div className=\"hc-chat-panel\" style={styles}>\n         {chat}\n      </div>\n    );\n  },\n\n  _onChatStateChange: function(){\n    this.setState(getChatsState());\n  },\n\n  _onAddonAvatarsChanged() {\n    this.setState(getAddonAvatars());\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/chat_panel.js\n **/","import EmptyState from 'components/chat_window/empty_state';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport appConfig from 'config/app_config';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport PreferencesStore from \"stores/preferences_store\";\nimport IntegrationsStore from \"stores/integrations_store\";\nimport ClientPreferencesKeys from \"keys/client_preferences_keys\";\nimport PreferencesKeys from \"keys/preferences_keys\";\nimport cx from 'classnames';\nimport scrollEvents from 'helpers/scroll_events';\nimport Spinner from 'components/common/spinner/spinner';\nimport HistorySpinner from 'components/chat_window/history_spinner';\nimport ChatWindowMessages from 'components/chat_window/messages';\nimport utils from 'helpers/utils';\nimport logger from 'helpers/logger';\n\nscrollEvents();\n\nvar PREFS_CHANGE_KEYS = [\n  `change:${ClientPreferencesKeys.HIDE_GIFS_BY_DEFAULT}`,\n  `change:${ClientPreferencesKeys.HIDE_ATTACHED_CARDS_BY_DEFAULT}`,\n  `change:${ClientPreferencesKeys.SHOW_UNREAD_DIVIDER}`,\n  `change:${PreferencesKeys.CHAT_VIEW}`,\n  `change:${PreferencesKeys.THEME}`,\n  `change:${PreferencesKeys.HIDE_PRESENCE_MESSAGES}`,\n  `change:${PreferencesKeys.USE_24_HR_FORMAT}`,\n  `change:${PreferencesKeys.NAME_DISPLAY}`,\n  `change:${ClientPreferencesKeys.ANIMATED_AVATARS}`\n];\n\nexport default React.createClass({\n\n  displayName: \"ChatWindowMessageList\",\n\n  getInitialState() {\n    return {\n      initialized: false,\n      use24hrTime: PreferencesStore.shouldUse24HrTime(),\n      shouldHideGifs: PreferencesStore.shouldHideGifsByDefault(),\n      shouldHideAttachedCards: PreferencesStore.shouldHideAttachedCardsByDefault(),\n      should_animate_avatar: PreferencesStore.shouldAnimateAvatars(),\n      show_join_leave_messages: !PreferencesStore.getHidePresenceMessages(),\n      chat_view: PreferencesStore.getChatView(),\n      theme: PreferencesStore.getTheme(),\n      showUnreadDivider: PreferencesStore.shouldShowUnreadMessageDivider(),\n      nameDisplay: PreferencesStore.getNameDisplay(),\n      has_scrolled_initial: false\n    };\n  },\n\n  componentWillMount() {\n    this._createDebounced();\n  },\n\n  componentDidUpdate() {\n    if (!this.is_scrolling\n      && !this.props.chat.scroll_frozen\n      && !this._isHistoryEmpty()\n      && !this.will_freeze\n      && this.state.has_scrolled_initial) {\n      this._setScroll();\n    }\n    else if (this.props.chat.scroll_frozen\n      || this.props.chat.ancient_history_is_empty\n      || this.will_freeze) {\n      this.debouncedUnfreezeAbove();\n    }\n  },\n\n  componentDidMount() {\n    this.props.chat.isScrolledToBottom = false;\n    this.should_interrupt_autoscroll = false;\n    this.scroll_is_bound = false;\n    this.is_animating = false;\n    this.will_freeze = false;\n    this.is_scrolling = false;\n    this.scrollbox = ReactDOM.findDOMNode(this.refs.scrollbox);\n    this.$scrollbox = $(this.scrollbox);\n    this._throttledShouldSetScroll = _.throttle(this._shouldSetScroll, 100);\n\n    AppDispatcher.register('add-chat-state-message', this._changeChatStateMessage);\n    AppDispatcher.register('remove-chat-state-message', this._changeChatStateMessage);\n    AppDispatcher.register('preserve-scroll-value', this._throttledShouldSetScroll);\n    AppDispatcher.register('update-scroll-position', this._updateScrollPosition);\n    AppDispatcher.register('select-panel', this.debouncedResize);\n    AppDispatcher.register('left-column-width-updated', this.debouncedResize);\n    AppDispatcher.register('right-column-width-updated', this.debouncedResize);\n    AppDispatcher.register('scroll-down-on-zoom', this._onZoom); // for Mac App\n    PreferencesStore.on(PREFS_CHANGE_KEYS, this._prefsChanged);\n    this._handleScrollPosition();\n    this._handleFrozenScroll();\n    _.forEach(['click', 'mousewheel', 'DOMMouseScroll'], (event) => {\n      this.scrollbox.addEventListener(event, this.debouncedOnUserAction);\n    });\n\n    $(window).on('resize', this.debouncedResize);\n    $(document).on('keydown', this.debouncedKeyDown);\n  },\n\n  componentWillUnmount() {\n    ChatWindowActions.setScrollValue({\n      scrollTop: ReactDOM.findDOMNode(this).scrollTop,\n      should_scroll_to_bottom: this.props.chat.should_scroll_to_bottom,\n      isScrolledToBottom: this._isScrolledToBottom(),\n      jid: this.props.chat.jid\n    });\n    AppDispatcher.unregister('add-chat-state-message', this._changeChatStateMessage);\n    AppDispatcher.unregister('remove-chat-state-message', this._changeChatStateMessage);\n    AppDispatcher.unregister('preserve-scroll-value', this._throttledShouldSetScroll);\n    AppDispatcher.unregister('update-scroll-position', this._updateScrollPosition);\n    AppDispatcher.unregister('select-panel', this.debouncedResize);\n    AppDispatcher.unregister('left-column-width-updated', this.debouncedResize);\n    AppDispatcher.unregister('right-column-width-updated', this.debouncedResize);\n    AppDispatcher.unregister('scroll-down-on-zoom', this._onZoom);\n    PreferencesStore.off(PREFS_CHANGE_KEYS, this._prefsChanged);\n    ChatWindowActions.chatStoppedScroll(this.props.chat.jid);\n    _.forEach(['click', 'mousewheel', 'DOMMouseScroll'], (event) => {\n      this.scrollbox.removeEventListener(event, this.debouncedOnUserAction);\n    });\n    $(window).off('resize', this.debouncedResize);\n    $(document).off('keydown', this.debouncedKeyDown);\n    if (this.imageLoad) {\n      clearTimeout(this.imageLoad);\n    }\n    this.debouncedUnfreezeAbove.cancel();\n    this.debouncedUnfreezeBelow.cancel();\n    this.debouncedFreezeAbove.cancel();\n    this.debouncedFreezeBelow.cancel();\n    this.debouncedResize.cancel();\n    this.debouncedOnUserAction.cancel();\n    this.throttledSetScrollPosition.cancel();\n    this._unbindScroll();\n    clearTimeout(this.imageLoadTimeout);\n  },\n\n  _onKeyDown(e){\n    if (this.is_scrolling ||\n      this.props.chat.scroll_frozen){\n      return;\n    }\n\n    let node = this.scrollbox,\n        delta;\n\n    if (e.keyCode === utils.keyCode.PageUp && node.scrollTop > 0){\n      delta = -node.offsetHeight;\n    }\n\n    if (e.keyCode === utils.keyCode.PageDown && node.scrollHeight > node.scrollTop + node.offsetHeight){\n      delta = node.offsetHeight;\n    }\n    // Home and End buttons should be Mac specific features\n    if (utils.platform.isMac()){\n      if (e.keyCode === utils.keyCode.Home && node.scrollTop > 0){\n        delta = -node.scrollTop;\n      }\n\n      if (e.keyCode === utils.keyCode.End && node.scrollHeight > node.scrollTop + node.offsetHeight){\n        delta = node.scrollHeight - node.offsetHeight - node.scrollTop;\n      }\n    }\n\n    if (delta){\n      this._animationPromise(delta);\n    }\n  },\n\n  _animationPromise(delta){\n    logger.type('animate-scroll-position').log('delta:', delta);\n    let node = this.scrollbox;\n\n    return new Promise((resolve) => {\n      this._unbindScroll();\n      let duration = appConfig.chat_scroll_duration,\n        originalScollTop = node.scrollTop,\n        start,\n        incrementValue;\n\n      this.interruptAutoscroll();\n      this.is_animating = true;\n\n      let step = (timestamp) => {\n        if (!start) {\n          start = timestamp;\n        }\n        let progress = Math.floor(timestamp - start);\n        if (progress <= duration) {\n          incrementValue = (Math.cos((Math.PI * progress) / duration - Math.PI) + 1);\n          node.scrollTop = originalScollTop + delta / 2 * incrementValue;\n          requestAnimationFrame(step);\n        } else {\n          this.should_interrupt_autoscroll = false;\n          this.is_animating = false;\n          resolve();\n        }\n      };\n      requestAnimationFrame(step);\n    }).then(() => {\n      this._checkScrollForHistoryFetch();\n      this._checkScrollForScrolledToBottom();\n      this._setScrollPosition();\n      _.debounce(this._bindScroll, 300, {leading: false, trailing: true});\n    });\n  },\n\n  _handleFrozenScroll(){\n    if (this.props.chat.scroll_frozen &&\n      this.props.chat.oldest_mid_before_fetch &&\n      !this.props.chat.scrollTop){\n\n      this.props.chat.scroll_frozen = false;\n      this.state.has_scrolled_initial = true;\n\n      let row = $(`[data-mid=${this.props.chat.oldest_mid_before_fetch}]`).parents('.hc-chat-row')[0];\n      if (row){\n        let node = ReactDOM.findDOMNode(this),\n          scrollWrap = $(node).find('.scroll-wrap')[0];\n        this.props.chat.scrollTop = row.getBoundingClientRect().top - scrollWrap.getBoundingClientRect().top - appConfig.frozen_scroll_offset;\n        logger.type('message-list').log('Scroll to oldest element before fetch. mid:', this.props.chat.oldest_mid_before_fetch, this.props.chat.scrollTop);\n      }\n    }\n  },\n\n  _prefsChanged() {\n    this.setState({\n      shouldHideGifs: PreferencesStore.shouldHideGifsByDefault(),\n      shouldHideAttachedCards: PreferencesStore.shouldHideAttachedCardsByDefault(),\n      chat_view: PreferencesStore.getChatView(),\n      show_join_leave_messages: !PreferencesStore.getHidePresenceMessages(),\n      should_animate_avatar: PreferencesStore.shouldAnimateAvatars(),\n      use24hrTime: PreferencesStore.shouldUse24HrTime(),\n      nameDisplay: PreferencesStore.getNameDisplay()\n    });\n  },\n\n  _handleScrollPosition() {\n    if (this.isMounted()) {\n      if (!this.is_scrolling && !this.is_animating) {\n        if (this.props.chat.should_scroll_to_bottom) {\n          this._scrollToWithoutTrigger();\n        } else {\n          this._setScroll();\n          this._bindScroll();\n        }\n      }\n    }\n  },\n\n  _onResize() {\n    if (!this.is_scrolling && !this.is_animating) {\n      if (!this._isScrolledToBottom()) {\n        this._scrollToWithoutTrigger();\n      } else {\n        this._setScroll();\n        this._bindScroll();\n      }\n    } else {\n      this._onZoom();\n    }\n  },\n\n  _onZoom() {\n    this.is_scrolling = false;\n    this._scrollToWithoutTrigger();\n  },\n\n  _getFirstName(){\n    if (this.props.chat.name){\n      return this.props.chat.name.split(' ')[0];\n    }\n  },\n\n  render() {\n    let composingMessageClasses = cx({\n          'hidden': !this.props.chat.is_composing,\n          'hc-composing-message': true,\n          'hc-classic-neue': (this.state.chat_view === \"classic_neue\")\n        }),\n        showSpinner = _.isEmpty(this.props.chat.messages) && this.props.chat.fetching_ancient,\n        historySpinner = this.props.chat.ancient_history_is_empty ? false : this._getHistorySpinner(),\n        showEmptyState = (this.props.chat.has_no_message_history ||\n            (!_.isEmpty(this.props.chat.messages) &&\n            _.every(this.props.chat.messages, 'is_presence_message') && !this.state.show_join_leave_messages)) && !this.props.chat.has_been_cleared,\n        panel;\n\n    if (showSpinner) {\n      panel = <div className=\"spinwrap\">\n                <Spinner spin={true} spinner_class=\"hc-loading-spinner medium-spinner\"/>\n              </div>;\n    } else if (showEmptyState) {\n      panel = <EmptyState jid={this.props.chat.jid}\n                          type={this.props.chat.type}\n                          chatName={this.props.chat.name}\n                          firstName={this._getFirstName()}\n                          web_server={this.props.web_server} />;\n    } else {\n      panel = <div className=\"scroll-wrap\">\n                  { historySpinner }\n\n                <ChatWindowMessages\n                    messages={this.props.chat.messages}\n                    show_join_leave_messages={this.state.show_join_leave_messages}\n                    should_animate_avatar={this.state.should_animate_avatar}\n                    shouldHideGifs={this.state.shouldHideGifs}\n                    shouldHideAttachedCards={this.state.shouldHideAttachedCards}\n                    use24hrTime={this.state.use24hrTime}\n                    showUnreadDivider={this.state.showUnreadDivider}\n                    nameDisplay={this.state.nameDisplay}\n                    chat_view={this.state.chat_view}\n                    chat_type={this.props.chat.type}\n                    chat_id={this.props.chat.id}\n                    is_guest={this.props.is_guest}\n                    integrationsEnabled={IntegrationsStore.get(\"enabled\")}\n                    addon_avatars={this.props.addon_avatars} />\n                <div className={composingMessageClasses} ref=\"composing_msg\">\n                  {this.props.chat.name + ' is typing...'}\n                </div>\n              </div>;\n    }\n\n    return (\n      <div className=\"hc-chat-scrollbox message-list\" ref=\"scrollbox\" >\n        {panel}\n      </div>\n    );\n  },\n\n  _getHistorySpinner(){\n    return (\n      <div style={{display: 'none'}} ref=\"historySpinnerWrapper\">\n        <HistorySpinner />\n      </div>\n    );\n  },\n\n  _checkScrollForHistoryFetch() {\n    if (!this.props.chat.ancient_history_is_empty && ReactDOM.findDOMNode(this).scrollTop <= 0 && !this.props.is_guest && !this.props.chat.has_been_cleared) {\n      this.fetchHistory();\n      return true;\n    }\n  },\n\n  _checkScrollForScrolledToBottom() {\n    this.props.chat.should_scroll_to_bottom = this._isScrolledToBottom();\n  },\n\n  _isScrolledToBottom() {\n    var node = ReactDOM.findDOMNode(this);\n    var scrollPosition = node.scrollTop + node.offsetHeight;\n    return node.scrollHeight > scrollPosition - appConfig.scroll_to_bottom_offset &&\n           node.scrollHeight < scrollPosition + appConfig.scroll_to_bottom_offset;\n  },\n\n  _updateScrollPosition(data){\n    if (!this.props.chat.should_scroll_to_bottom && this.props.chat.scrollTop > data.offsetTop){\n      this.$scrollbox.data('skipScrollStartEvent', true);\n      this.props.chat.scrollTop += data.heightDiff;\n    }\n  },\n\n  _setScrollPosition() {\n    if (!this.props.chat.message_action_active) {\n      this._checkScrollForScrolledToBottom();\n    }\n\n    var node = ReactDOM.findDOMNode(this),\n        scrollVal = this.props.chat.should_scroll_to_bottom ? node.scrollHeight : node.scrollTop;\n    if (!this.is_animating && !this.props.chat.scroll_frozen && this.state.has_scrolled_initial) {\n      ChatWindowActions.setScrollValue({\n        scrollTop: scrollVal,\n        isScrolledToBottom: this._isScrolledToBottom(),\n        oldestVisibleMessageMid: this._getOldestVisibleMessageMid(),\n        should_scroll_to_bottom: this.props.chat.should_scroll_to_bottom,\n        jid: this.props.chat.jid\n      });\n    }\n  },\n\n  _getOldestVisibleMessageMid() {\n    return $(\".msg-line:visible:first\").data(\"mid\");\n  },\n\n  _maintainScrollPosition(action, position, should_scroll_to_bottom) {\n    if (!this.isMounted()) {\n      return;\n    } else if (should_scroll_to_bottom && action === 'unfreeze') {\n      this._unbindScroll();\n      $(ReactDOM.findDOMNode(this)).find('.scroll-wrap').css({\n            position: 'relative',\n            bottom: '',\n            top: ''\n          }).parent('.message-list')\n            .css({\n              overflowY: 'auto'\n            });\n      this._scrollToWithoutTrigger();\n      this.props.chat.scroll_frozen = false;\n      return;\n    }\n    var node = ReactDOM.findDOMNode(this);\n    this._unbindScroll();\n    var top,\n        scrollWrap = $(node).find('.scroll-wrap')[0],\n        bottom = scrollWrap.getBoundingClientRect().bottom - node.getBoundingClientRect().bottom;\n    switch (action) {\n      case 'freeze':\n        if (!this.props.chat.scroll_frozen) {\n          this.$scrollbox.off('scrollstart');\n          this.$scrollbox.off('scrollstop');\n          this.props.chat.scroll_frozen = true;\n          top = node.getBoundingClientRect().top - scrollWrap.getBoundingClientRect().top;\n          switch (position) {\n            case 'above':\n              node.scrollTop = 0;\n              $(scrollWrap).css({\n                position: 'absolute',\n                top: '',\n                bottom: -bottom\n              }).parent('.message-list')\n                .css({\n                  overflowY: 'hidden'\n                });\n              break;\n            case 'below':\n              node.scrollTop = 0;\n              $(scrollWrap).css({\n                position: 'absolute',\n                top: -top,\n                bottom: ''\n              }).parent('.message-list')\n                .css({\n                  overflowY: 'hidden'\n                });\n              break;\n          }\n        }\n        break;\n      case 'unfreeze':\n        if (this.props.chat.scroll_frozen && !this.props.chat.fetching_ancient) {\n          $(ReactDOM.findDOMNode(this.refs.historySpinnerWrapper)).hide();\n          this.props.chat.scroll_frozen = false;\n          top = scrollWrap.getBoundingClientRect().top - node.getBoundingClientRect().top;\n          $(scrollWrap).css({\n            position: 'relative',\n            bottom: '',\n            top: ''\n          }).parent('.message-list')\n            .css({\n              overflowY: 'auto'\n            });\n          this._checkScrollForScrolledToBottom();\n          this._scrollToWithoutTrigger(-top);\n          this.props.chat.scrollTop = -top;\n          this._bindScroll();\n        }\n        break;\n    }\n  },\n\n  _createDebounced(){\n    function unfreezeAbove() {\n      this._maintainScrollPosition('unfreeze', 'above', this.props.chat.should_scroll_to_bottom);\n    }\n    function unfreezeBelow() {\n      this._maintainScrollPosition('unfreeze', 'below', this.props.chat.should_scroll_to_bottom);\n    }\n    function freezeAbove() {\n      this._maintainScrollPosition('freeze', 'above', this.props.chat.should_scroll_to_bottom);\n    }\n    function freezeBelow() {\n      this._maintainScrollPosition('freeze', 'below', this.props.chat.should_scroll_to_bottom);\n    }\n    this.debouncedBindScroll = _.debounce(this._bindScroll, 300, {'leading': false, 'trailing': true});\n    this.debouncedUnfreezeAbove = _.debounce(unfreezeAbove, 600, {'leading': false, 'trailing': true});\n    this.debouncedUnfreezeBelow = _.debounce(unfreezeBelow, 600, {'leading': false, 'trailing': true});\n    this.debouncedFreezeAbove = _.debounce(freezeAbove, 500, {'leading': true, 'trailing': false});\n    this.debouncedFreezeBelow = _.debounce(freezeBelow, 500, {'leading': true, 'trailing': false});\n    this.debouncedResize = _.debounce(this._onResize, 200, {leading: false, trailing: true});\n    this.debouncedKeyDown = _.debounce(this._onKeyDown, 20, {leading: true, trailing: false});\n    this.throttledSetScrollPosition = _.throttle(this._setScrollPosition, 50, {leading: false, trailing: true});\n    this.debouncedOnUserAction = _.throttle(this._onUserAction, 200, {leading: true, trailing: true});\n    this.initialized = true;\n  },\n\n  _shouldSetScroll(opts = {}) {\n    if (this.isMounted()\n      && !this.is_scrolling\n      && !this.props.chat.scroll_frozen\n      && !this._isHistoryEmpty()\n      && !this.will_freeze\n      && this.props.chat.should_scroll_to_bottom\n      && !this._isScrolledToBottom()) {\n      this._setScroll(opts);\n    }\n  },\n\n  _isHistoryEmpty(){\n    return this.props.chat.ancient_history_is_empty && this.props.chat.messages.length === 0;\n  },\n\n  _setScroll(opts = {}) {\n    var node = ReactDOM.findDOMNode(this);\n    if (!this.is_scrolling) {\n      if (!this.props.chat.scroll_frozen && !this.is_animating && !this.props.chat.message_action_active) {\n        if (this.props.chat.should_scroll_to_bottom) {\n          if (this.state.has_scrolled_initial && opts.animation) {\n            this._animateScroll();\n          }\n          else {\n            this._scrollToWithoutTrigger();\n            if (!this.state.has_scrolled_initial) {\n              this.state.has_scrolled_initial = true;\n              this._setScrollPosition();\n            }\n          }\n        } else {\n          this._bindScroll();\n          if (!this.state.has_scrolled_initial) {\n            this.state.has_scrolled_initial = true;\n          }\n          node.scrollTop = this.props.chat.scrollTop;\n          this._setScrollPosition();\n        }\n      }\n    }\n  },\n\n  _animateScroll(val) {\n    var node = ReactDOM.findDOMNode(this);\n    if (val || (this.scrollbox.scrollHeight - node.offsetHeight - node.scrollTop) > 2) {\n      var promise = new Promise((resolve) => {\n        this._unbindScroll();\n        var duration = appConfig.chat_scroll_duration,\n            scrollTo = (val || this.scrollbox.scrollHeight) - node.offsetHeight;\n        this.interruptAutoscroll();\n        var originalScollTop = node.scrollTop,\n            delta = scrollTo - originalScollTop,\n            count = 0,\n            start,\n            incrementValue;\n        this.is_animating = true;\n        var step = (timestamp) => {\n          if (!start) {\n            start = timestamp;\n          }\n          var progress = timestamp - start;\n          if (progress < duration && !this.should_interrupt_autoscroll) {\n            count = count + 1;\n            //Ease-in-out trig function here\n            incrementValue = (Math.cos((Math.PI * progress) / duration - Math.PI) + 1);\n            node.scrollTop = originalScollTop + delta / 2 * incrementValue;\n            requestAnimationFrame(step);\n          } else {\n            if (!this.should_interrupt_autoscroll && this.props.chat.should_scroll_to_bottom) {\n              this._scrollToWithoutTrigger();\n            }\n            this.should_interrupt_autoscroll = false;\n            node.scrollTop = node.scrollHeight;\n            this.props.chat.should_scroll_to_bottom = true;\n            this.is_animating = false;\n            resolve();\n          }\n        };\n        requestAnimationFrame(step);\n\n      });\n      promise.then(() => {\n        _.debounce(this._bindScroll, 300, {leading: false, trailing: true});\n      });\n    }\n  },\n\n  _changeChatStateMessage(data) {\n    if (this.props.chat.should_scroll_to_bottom && this.props.chat.jid === data.jid && this.props.chat.is_composing) {\n      var composing_height = ReactDOM.findDOMNode(this).getBoundingClientRect().bottom - ReactDOM.findDOMNode(this.refs.composing_msg).getBoundingClientRect().top;\n      if (composing_height) {\n        this._animateScroll(ReactDOM.findDOMNode(this).scrollHeight - composing_height);\n      }\n    }\n  },\n\n  _scrollToWithoutTrigger(val) {\n    if (!this.is_scrolling) {\n      this._unbindScroll();\n      try {\n        let node = ReactDOM.findDOMNode(this);\n        node.scrollTop = val || node.scrollHeight;\n        this.props.chat.scrollTop = node.scrollTop;\n\n        if(!val) {\n          this.props.chat.should_scroll_to_bottom = true;\n          this.props.chat.isScrolledToBottom = true;\n        }\n\n        this.$scrollbox.bind('scroll.resolver', () => {\n          this.$scrollbox.unbind('scroll.resolver');\n        });\n      } finally {\n        this.debouncedBindScroll();\n      }\n    }\n  },\n\n  interruptAutoscroll() {\n    if (this.is_animating) {\n      this.should_interrupt_autoscroll = true;\n    }\n  },\n\n  _onUserAction() {\n    this.should_interrupt_autoscroll = true;\n    this._bindScroll();\n  },\n\n  fetchHistory() {\n    if (!this.props.chat.ancient_history_is_empty) {\n      this._unbindScroll();\n      var spinWrap = ReactDOM.findDOMNode(this.refs.historySpinnerWrapper);\n      this.props.chat.should_scroll_to_bottom = false;\n      this.props.chat.scrollTop = 0;\n      this.should_interrupt_autoscroll = true;\n      this.will_freeze = true;\n      ChatWindowActions.requestAncientHistory({\n        jid: this.props.chat.jid\n      });\n      $(spinWrap).slideDown(200, () => {\n        if (!this.props.chat.ancient_history_is_empty) {\n          this.will_freeze = false;\n          this.debouncedFreezeAbove();\n        }\n      });\n    }\n  },\n\n  _chatIsScrolling() {\n    ChatWindowActions.chatStartedScroll(this.props.chat.jid);\n    this.is_scrolling = true;\n  },\n\n  _scrollStop() {\n    logger.type('message-list').log('Scroll stop');\n    this.should_interrupt_autoscroll = false;\n    this.is_animating = false;\n    this.is_scrolling = false;\n    ChatWindowActions.chatStoppedScroll(this.props.chat.jid);\n    this._checkScrollForHistoryFetch();\n    this._checkScrollForScrolledToBottom();\n    this._setScrollPosition();\n  },\n\n  _unbindScroll() {\n    this.$scrollbox.unbind('scroll.resolver');\n    if (this.scroll_is_bound) {\n      this.$scrollbox.off();\n      this.is_scrolling = false;\n      this.scroll_is_bound = false;\n    }\n  },\n\n  _bindScroll() {\n    if (!this.scroll_is_bound) {\n      logger.type('message-list').log('Bind scroll');\n      this.$scrollbox.on('scrollstart', this._chatIsScrolling);\n      this.$scrollbox.on('scrollstop', this._scrollStop);\n      this.$scrollbox.on('scroll', this.throttledSetScrollPosition);\n      this.scroll_is_bound = true;\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_list.js\n **/","import PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n\n  displayName: \"ChatWindowEmptyState\",\n\n  propTypes: {\n    chatName: React.PropTypes.string,\n    firstName: React.PropTypes.string,\n    type: React.PropTypes.string,\n    jid: React.PropTypes.string,\n    web_server: React.PropTypes.string\n  },\n\n  mixins: [PureRenderMixin],\n\n  getDefaultProps: function () {\n    return {\n      chatName: \"\",\n      firstName: \"\",\n      jid: \"\",\n      web_server: \"\",\n      type: \"\"\n    };\n  },\n\n  _getEmptyState: function () {\n    var emptyState;\n    if (this.props.type === \"chat\") {\n      emptyState = this._getOTOEmptyState();\n    } else {\n      emptyState = this._getGroupChatEmptyState();\n    }\n    return emptyState;\n  },\n\n  _getGroupChatEmptyState: function () {\n    return (\n      <div ref=\"empty_state\" className=\"empty-state groupchat\">\n        <div className=\"empty-state-img\"></div>\n        <div className=\"empty-state-msg\">\n          <p className=\"empty-header\">\n          Welcome to the {this.props.chatName} room!\n          </p>\n          <p className=\"empty-msg\">\n            This window is kinda empty, huh? It fills up fast when you\n            <br/>\n            start chatting with your friends. Happy chatting!\n          </p>\n        </div>\n      </div>\n    );\n  },\n\n  _getOTOEmptyState: function () {\n    return (\n      <div ref=\"empty_state\" className=\"empty-state chat\">\n        <div className=\"empty-state-img\"></div>\n        <div className=\"empty-state-msg\">\n          <p className=\"empty-header\">\n          Say Hello to {this.props.chatName}!\n          </p>\n          <p className=\"empty-msg\">\n            You haven't talked to {this.props.firstName} before. Why not break the ice with\n            <br/>\n            an emoticon? (fonzie) <img src={`https://${this.props.web_server}/wc/assets/img/embedded/fonzie@3x.png`} width=\"34\" height=\"25\"/>\n          </p>\n        </div>\n      </div>\n    );\n  },\n\n  render: function() {\n    return (\n      <div className=\"empty\">\n        {this._getEmptyState()}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/empty_state.js\n **/","module.exports = function() {\n  var dispatch = $.event.dispatch || $.event.handle;\n\n\n  var special = $.event.special,\n      uid1 = 'D' + (+new Date()),\n      uid2 = 'D' + (+new Date() + 1);\n\n  special.scrollstart = {\n\n    setup: function (data) {\n\n      var _data = $.extend({\n        latency: special.scrollstop.latency\n      }, data);\n\n      let handler = function (evt, ...args) {\n        var _self = this;\n        evt.type = 'scrollstart';\n        dispatch.apply(_self, [evt, ...args]);\n      }.bind(this);\n\n      let debouncedHandler = _.debounce(handler, _data.latency, {leading: true, trailing: false});\n\n      $(this).on('scroll', (evt) => {\n        if (!$(this).data('skipScrollStartEvent')){\n          debouncedHandler(evt);\n        } else {\n          $(this).data('skipScrollStartEvent', false);\n        }\n      }).data(uid1, debouncedHandler);\n    },\n\n    teardown: function () {\n      $(this).data(uid1).cancel();\n      $(this).off('scroll', $(this).data(uid1));\n      $(this).removeData(uid1);\n    }\n  };\n\n  special.scrollstop = {\n\n    latency: 250,\n\n    setup: function (data) {\n\n      var _data = $.extend({\n        latency: special.scrollstop.latency\n      }, data);\n\n      var handler = _.debounce(function (evt) {\n        var _self = this,\n            _args = arguments;\n        evt.type = 'scrollstop';\n        dispatch.apply(_self, _args);\n        $(this).data('skipScrollStartEvent', false);\n      }.bind(this), _data.latency, {leading: false, trailing: true});\n\n      $(this).on('scroll', handler).data(uid2, handler);\n    },\n\n    teardown: function () {\n      $(this).data(uid2).cancel();\n      $(this).off('scroll', $(this).data(uid2));\n      $(this).removeData(uid2);\n    }\n  };\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/scroll_events.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport Spinner from 'components/common/spinner/spinner';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nexport default React.createClass({\n  displayName: \"HistorySpinner\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState() {\n    return {\n      history_loading: false\n    };\n  },\n\n  componentDidMount(){\n\n    AppDispatcher.register({\n      'requesting-ancient-history': this._requestingAncientHistory,\n      'ancient-history-fetched': this._ancientHistoryFetched\n    });\n  },\n\n  componentWillUnmount(){\n    AppDispatcher.unregister({\n      'requesting-ancient-history': this._requestingAncientHistory,\n      'ancient-history-fetched': this._ancientHistoryFetched\n    });\n  },\n\n  _requestingAncientHistory(){\n    this.setState({\n      history_loading: true\n    });\n  },\n\n  _ancientHistoryFetched(){\n    this.setState({\n      history_loading: false\n    });\n  },\n\n  render() {\n    return (\n      <Spinner spin={this.state.history_loading}\n               spinner_class=\"hc-chat-spinner medium-spinner\" />\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/history_spinner.js\n **/","import utils from 'helpers/utils';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport CardHelper from 'helpers/card_helper';\nimport ConfigStore from \"stores/configuration_store\";\nimport MessageGroup from 'components/chat_window/message_group';\n\nconst PureRenderMixin = React.addons.PureRenderMixin;\n\nconst nonGroupingTypes = [\n  'notification',\n  'twitter_user',\n  'twitter_status',\n  'info'\n];\n\n/**\n * Checks to see if two messages have the same sender by checking sender_id or\n * sender. sender_id could be null in old btf servers\n *\n * @param {Object} message1\n * @param {Object} message2\n * @returns boolean\n */\nexport function doSendersMatch(message1, message2) {\n  if (message1.sender_id || message2.sender_id) {\n    return message1.sender_id === message2.sender_id;\n  }\n  return message1.sender === message2.sender;\n}\n\n/**\n * Determines if the current message should be grouped with the previous message\n *\n * @param {Object} the first message object in the group\n * @param {Object} the previous message object\n * @param {Object} the current message object\n *\n * @returns Boolean\n */\nexport function shouldGroupMessage(firstInGroup, previousMsg, message) {\n  return doSendersMatch(firstInGroup, message)\n      && message.time - previousMsg.time <= 300\n      && firstInGroup.color === message.color\n      && !previousMsg.last_read_message\n      && !~nonGroupingTypes.indexOf(message.type)\n      && !~nonGroupingTypes.indexOf(firstInGroup.type)\n      && message.status !== 'failed'\n      && previousMsg.status !== 'failed'\n      && (message.type !== 'image' ||\n          message.type === 'image' &&\n          firstInGroup.type === 'image' &&\n          utils.getRealMid(firstInGroup.mid) === utils.getRealMid(message.mid));\n}\n\n/**\n * Determines if the current message should be attached to the previous message\n *\n * @param {Boolean} whether card attachment is enabled\n * @param {Object} the previous message object\n * @param {Object} the current message object\n *\n * @returns Boolean\n */\nexport function shouldAttachMessage(attachEnabled, previousMsg, message) {\n  var previousMidToAttach = utils.getAttachToMid(previousMsg) || previousMsg.mid,\n      msgMidToAttachTo = utils.getAttachToMid(message);\n\n  return attachEnabled\n      && CardHelper.isValidCard(message.card)\n      && previousMidToAttach === msgMidToAttachTo;\n}\n\n/*\n * Split single message array into array of message groups grouped by date.\n *\n * @param {Object[]} messages array of messages\n *\n * @returns {{date: string, messages: Object[]}[]} array of message groups\n */\nexport function groupByDate(messages) {\n  var result = [],\n      lastDate = null,\n      group = null;\n\n  messages.forEach(function (message) {\n    let currentDate = utils.format_time_for_separator(message.sortTime || message.time);\n\n    if (lastDate === null || lastDate !== currentDate) {\n      lastDate = currentDate;\n      group = {\n        date: currentDate,\n        messages: [message]\n      };\n      result.push(group);\n    } else {\n      group.messages.push(message);\n    }\n  });\n\n  return result;\n}\n\n/*\n * Split single message array into array of message groups.\n *\n * @param {Object[]} messages array of messages\n * @param feature_flags the configured feature flags\n *\n * @returns {{key: string, messages: Object[]}[]} array of message groups\n */\nexport function groupNearbyMessages(messages, attach_enabled = false) {\n  var result = [],\n      firstInGroupMsg = null,\n      group = null;\n\n  messages.forEach(function (msg, i) {\n    if (firstInGroupMsg === null || !(shouldGroupMessage(firstInGroupMsg, messages[i - 1], msg) || shouldAttachMessage(attach_enabled, messages[i - 1], msg) )) {\n      firstInGroupMsg = msg;\n      group = {\n        key: 'msg-group-' + msg.mid,\n        messages: [msg]\n      };\n      result.push(group);\n    } else {\n      group.messages.push(msg);\n    }\n  });\n\n  return result;\n}\n\n/**\n * Determines if any of the messages in the group are the last read message\n * used for styling the message group\n *\n * @param {Object} a message group object with an array of message objects\n *\n * @returns Boolean\n */\nexport function groupContainsLastRead (group) {\n  return !!~_.findLastIndex(group.messages, { last_read_message: true });\n}\n\nexport default React.createClass({\n  displayName: 'ChatWindowMessages',\n\n  // messages are immutable\n  // addons_avatars is also immutable object (we create new instance each time)\n  // other props are primitives\n  // so we can use PureRenderMixin here\n  mixins: [PureRenderMixin],\n\n  renderMessageGroup(group) {\n    let props = this.props;\n    let lastReadGroup = groupContainsLastRead(group);\n    let attachedCardsToggleEnabled = _.get(this.feature_flags, 'web_client_attach_to_collapsable_enabled');\n    return (\n      <MessageGroup\n        group={group}\n        key={group.key}\n        shouldHideGifs={props.shouldHideGifs}\n        shouldHideAttachedCards={props.shouldHideAttachedCards}\n        should_animate_avatar={props.should_animate_avatar}\n        attachedCardsToggleEnabled={attachedCardsToggleEnabled}\n        use24hrTime={props.use24hrTime}\n        shouldShowLastViewed={props.showUnreadDivider}\n        lastReadGroup={lastReadGroup}\n        nameDisplay={props.nameDisplay}\n        chat_view={props.chat_view}\n        chat_type={props.chat_type}\n        chat_id={props.chat_id}\n        is_guest={props.is_guest}\n        integrationsEnabled={props.integrationsEnabled}\n        addon_avatars={props.addon_avatars}\n        honest_messages_enabled={this.feature_flags.web_client_honest_messages}\n        message_editing_enabled={this.feature_flags.web_client_message_editing} />\n    );\n  },\n\n  componentWillMount() {\n    this.feature_flags = ConfigStore.get('feature_flags');\n    AppDispatcher.register('updated:config', this._updateConfig);\n  },\n\n  componentWillUnmount() {\n    AppDispatcher.unregister('updated:config', this._updateConfig);\n  },\n\n  renderDateMessages({date, messages}) {\n    let attach_enabled = _.get(this.feature_flags, 'web_client_attach_to_rendering_enabled') && CardHelper.cardsEnabled(this.feature_flags);\n    let groupedMessages = groupNearbyMessages(messages, attach_enabled);\n\n    return (\n      <div className='date-block' key={date.replace(/\\s/g, '')}>\n        <div className='date-divider' data-copyable={`{\"format\": \"date-divider\"}`}>\n          <span>{date}</span>\n        </div>\n        {groupedMessages.map(this.renderMessageGroup)}\n      </div>\n    );\n  },\n\n  render() {\n    let messages = this.props.messages;\n\n    if (!this.props.show_join_leave_messages) {\n      messages = messages.filter(msg => !msg.is_presence_message);\n    }\n\n    return (\n      <div className=\"hc-messages\">\n        {groupByDate(messages).map(this.renderDateMessages)}\n      </div>\n    );\n  },\n\n  _updateConfig(config) {\n    this.feature_flags = _.get(config, 'feature_flags');\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/messages.js\n **/","var logger = require('helpers/logger');\n\nvar validTypes = new Set(['link', 'media', 'file', 'image', 'application']);\n\nvar CardHelper = {\n\n  cardsEnabled: function(feature_flags) {\n    return feature_flags && feature_flags.web_client_cards_enabled;\n  },\n\n  isValidStyle: function(card) {\n    return card && validTypes.has(card.style);\n  },\n\n  isLink: function (card) {\n    return card && card.style === 'link';\n  },\n\n  isMedia: function (card) {\n    return card && card.style === 'media';\n  },\n\n  isFile: function (card) {\n    return card && card.style === 'file';\n  },\n\n  isImage: function (card) {\n    return card && card.style === 'image';\n  },\n\n  isApplication: function (card) {\n    return card && card.style === 'application';\n  },\n\n  isValidCard: function(card) {\n\n    if(!card) {\n      return false;\n    }\n\n    if (!CardHelper.isValidStyle(card)) {\n      return false;\n    }\n\n    if (card.id === undefined) {\n      logger.warn('Card does not have an id');\n      return false;\n    }\n\n    if (CardHelper.isLink(card)) {\n\n      if (card.title === undefined) {\n        logger.warn('Link Card needs a title');\n        return false;\n      }\n\n      if (card.description === undefined) {\n        logger.warn('Link Cards needs a description');\n        return false;\n      }\n    }\n\n    if (CardHelper.isImage(card)) {\n      if (card.url === undefined) {\n        logger.warn('Image Card does not have a url');\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n};\n\nmodule.exports = CardHelper;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/card_helper.js\n **/","import AnalyticsActions from 'actions/analytics_actions';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport ChatPanelStrings from 'strings/chat_panel_strings';\nimport cx from 'classnames';\nimport CardHelper from 'helpers/card_helper';\nimport utils, {dom} from 'helpers/utils';\nimport logger from 'helpers/logger';\nimport Message from './message_types/message';\nimport NotificationMessage from './message_types/notification';\nimport InfoMessage from './message_types/info';\nimport FileMessage from './message_types/file';\nimport FileError from './message_types/file_error';\nimport LinkMessage from './message_types/link';\nimport ImageMessage from './message_types/image';\nimport VideoMessage from './message_types/video';\nimport UserStateMessage from './message_types/user_state';\nimport TwitterStatusMessage from './message_types/twitter_status';\nimport TwitterUserMessage from './message_types/twitter_user';\nimport ActionableMessage from './message_actions/wrapper';\nimport AttachedCardsToggle from \"./attached_cards_toggle\";\nimport MessageWrapper from './message_wrapper';\nimport PersonAvatar from 'components/common/avatars/person_avatar';\nimport AppConfig from 'config/app_config';\n\nconst message_types = {\n  message: Message,\n  notification: NotificationMessage,\n  info: InfoMessage,\n  file: FileMessage,\n  file_error: FileError,\n  link: LinkMessage,\n  image: ImageMessage,\n  video: VideoMessage,\n  user_state: UserStateMessage,\n  twitter_status: TwitterStatusMessage,\n  twitter_user: TwitterUserMessage\n};\n\nconst actionable_message_types = [\n  Message,\n  NotificationMessage,\n  FileError,\n  FileMessage,\n  ImageMessage\n];\n\nconst editable_message_types = [\n  Message,\n  FileMessage,\n  FileError\n];\n\nlet CSSTransitionGroup = React.addons.CSSTransitionGroup;\n\nexport default React.createClass({\n\n  displayName: 'ChatWindowMessageGroup',\n\n  // group is immutable\n  // addons_avatars is immutable object\n  // others are primitives\n  // so we can use DeepEqualRenderMixin\n  mixins: [DeepEqualRenderMixin],\n\n  getMsg() {\n    return this.props.group.messages[0];\n  },\n\n  /**\n   * Returns true if the message type requires full messaging to user of time or status\n   * @param {object} msg\n   */\n  doesNeedFullMessaging(msg) {\n    return !_.includes(['image', 'user_state', 'twitter_status', 'twitter_user', 'info'], msg.type);\n  },\n\n  getSeparator(withSeparator) {\n    return withSeparator ? <span className='separator'>&middot;</span> : false;\n  },\n\n  /**\n   * Returns the time (if applicable for this message type) wrapped in proper spans & classes\n   * and formatted to either 12 or 24 hr time based on current preference passed via props\n   * @param {boolean} withSeparator\n   */\n  _getTimeDisplay(mid, withSeparator) {\n    var msg = this.getMsg(),\n        timeDisplay;\n\n    if (this.doesNeedFullMessaging(msg)) {\n      timeDisplay = (\n        <span className='hc-chat-status-time'>\n          {this.getSeparator(withSeparator)}\n          <span className='hc-chat-time'>{ utils.format_time(msg.date, this.props.use24hrTime) }</span>\n        </span>\n      );\n    }\n\n    return timeDisplay;\n  },\n\n  _getEditedIndicator(withSeparator) {\n    if (this.doesNeedFullMessaging(this.getMsg()) && _.some(this.props.group.messages, 'replace')) {\n      return (\n        <span className='hc-chat-status-edited'>\n          {this.getSeparator(withSeparator)}\n          <span className='hc-chat-edited'>{ChatPanelStrings.edited}</span>\n        </span>\n      );\n    }\n  },\n\n  /**\n   * Returns messaging to indicate that a group of messages are unconfirmed\n   * @param {boolean} withSeparator\n   */\n  _getUnconfirmedMessaging(mid, withSeparator) {\n    var msg = this.getMsg(),\n        unconfirmedMessaging;\n\n    if (this.doesNeedFullMessaging(msg)) {\n      unconfirmedMessaging = (\n        <span className='hc-chat-status-unconfirmed'>\n          {this.getSeparator(withSeparator)}\n          <span ref='unconfirmed_messaging' className='unconfirmed-messaging'>{ChatPanelStrings.unconfirmed_message_group}</span>\n        </span>\n      );\n    }\n\n    return unconfirmedMessaging;\n  },\n\n  /**\n   * Returns messaging to indicate that a message has failed\n   * @param {boolean} withSeparator\n   */\n  _getFailedMessaging(mid, withSeparator) {\n    var msg = this.getMsg(),\n        failedMessaging;\n\n    if (this.doesNeedFullMessaging(msg)) {\n      failedMessaging = (\n        <span className='hc-chat-status-failed'>\n          {this.getSeparator(withSeparator)}\n          <span ref='failed_messaging' className='failed-messaging'>{ChatPanelStrings.failed_message}</span>\n          <span ref='failed_message_actions' className='failed-message-actions'>\n            <a onClick={this.onFailedMessageRetryClick}>{ChatPanelStrings.failed_message_retry}</a>\n            <a onClick={this.onFailedMessageCancelClick}>{ChatPanelStrings.failed_message_cancel}</a>\n          </span>\n        </span>\n      );\n    }\n\n    return failedMessaging;\n  },\n\n  onFailedMessageRetryClick() {\n    ChatWindowActions.onFailedRetry(this.getMsg());\n    AnalyticsActions.failedMessageRetried();\n  },\n\n  onFailedMessageCancelClick() {\n    ChatWindowActions.onFailedCancel(this.getMsg());\n    AnalyticsActions.failedMessageCanceled();\n  },\n\n  /**\n   * Get the appropriate sender text string. For Image/Emote messages -- defaults are applied\n   * Pass in either 'name' or 'mentions' to return\n   * @param {string} nameDisplay - either 'names' or 'mentions'\n   */\n  _getSenderText(nameDisplay) {\n    let sender_text;\n    let msg = this.getMsg();\n    if (msg.type === 'image') {\n      sender_text = 'Image';\n    } else if (msg.isEmote) {\n      sender_text = '';\n    } else if (nameDisplay === 'mentions' && msg.sender_mention) {\n      sender_text = `@${msg.sender_mention}`;\n    } else {\n      sender_text = msg.sender;\n    }\n    return sender_text;\n  },\n\n  _getAvatarUrl() {\n    var msg = this.getMsg(),\n        sender = _.get(msg, 'notification_sender');\n\n    if (_.get(sender, 'type', '') === 'addon') {\n      return _.get(this.props.addon_avatars, [sender.id, 'url']);\n    }\n\n    return msg.sender_avatar;\n  },\n\n  /**\n   * Get the avatar markup\n   */\n  _getAvatarDisplay(avatarClickable) {\n    let msg = this.getMsg();\n    let avatar_url = this._getAvatarUrl();\n    let hasAvatar = avatar_url && msg.type !== 'info';\n    let avatarClickHandler = avatarClickable ? this.onSenderClicked : _.noop;\n\n    if (hasAvatar) {\n      return (\n        <PersonAvatar name={msg.sender}\n                      size=\"medium\"\n                      avatar_url={avatar_url}\n                      show_presence={false}\n                      shouldAnimate={this.props.should_animate_avatar}\n                      onClick={avatarClickHandler}/>\n      );\n    }\n\n    let sender = _.get(msg, 'notification_sender');\n    if (!this._isAddon(sender) && this._isAvatarRequired(msg)) {\n      return this._getAvatarWithInitials(msg.sender);\n    }\n\n    return false;\n  },\n\n  _isAddon(sender) {\n    return _.get(sender, 'type', '') === 'addon';\n  },\n\n  /**\n   * Defines if the avatar is required\n   * @param msg\n   * @private\n   * @returns {Boolean}\n   */\n  _isAvatarRequired(msg) {\n    return msg.type === 'message';\n  },\n\n  /**\n   * Returns avatar with initials\n   */\n  _getAvatarWithInitials(sender) {\n    let bgColor = AppConfig.default_guest_avatar_bg;\n\n    return (\n      <PersonAvatar name={sender}\n                    size=\"medium\"\n                    avatar_bg_color={bgColor}\n                    show_presence={false}/>\n    );\n  },\n\n  /**\n   * Get the sender name\n   */\n  _getSenderName(params) {\n    let msg = this.getMsg();\n    let hasSenderName = msg.type !== 'info';\n    if (hasSenderName) {\n      return (\n        <span ref='sender_text' className='sender-name' onClick={this.onSenderClicked} aria-label={params.tooltip}>\n          { params.sender }\n        </span>\n      );\n    }\n  },\n\n  /**\n   * Generates all the common values for the message group display, then branches based\n   * on which chatView is currently applied\n   */\n  render() {\n    var msg = this.getMsg(),\n      sender = this._getSenderText(this.props.nameDisplay),\n      tooltip = this._getSenderText((this.props.nameDisplay === 'mentions') ? 'name' : 'mentions'),\n      isUnconfirmedGroup = this.isUnconfirmedGroup(),\n      isFailedGroup = this.isFailedGroup(),\n      rowClasses = cx({\n        'hc-chat-row': true,\n        [`hc-msg-${msg.color} hc-msg-${msg.type}`]: !isFailedGroup,\n        'hc-classic-neue': this.isClassicNeueView(),\n        'hc-chat-row-unconfirmed': isUnconfirmedGroup,\n        'hc-chat-row-failed': isFailedGroup,\n        'unread-line-row': this.props.lastReadGroup\n      }),\n      chatClasses = cx({\n        'hc-chat-msg': true,\n        'image-link': msg.type === 'image'\n      });\n\n    if (this.isClassicNeueView()) {\n      return this._renderClassicNeueView({\n        rowClasses, chatClasses, sender, tooltip, isFailedGroup, isUnconfirmedGroup\n      });\n    }\n\n    return this._renderStandardView({\n      rowClasses, chatClasses, sender, tooltip, isFailedGroup, isUnconfirmedGroup\n    });\n  },\n\n  isClassicNeueView() {\n    // guest user forced to use standard view because DAL:guest-fetched-room-participants call don't return sender_avatar\n    return this.props.chat_view === 'classic_neue' && !this.props.is_guest;\n  },\n\n  isUnconfirmedGroup() {\n    // A group of all unconfirmed messages renders differently than a group of messages with a mix of statuses\n    return _.every(this.props.group.messages, {status: 'unconfirmed'}) && this.props.honest_messages_enabled;\n  },\n\n  isFailedGroup() {\n    // Failed messages should always be in their own group, so here we only check the first message\n    return this.getMsg().status === 'failed';\n  },\n\n  /**\n   * Renders the standard view for the chat messages -- that includes the\n   * sender to the left and time to the right, with the messages stacked in between\n   */\n  _renderStandardView(params) {\n    var msg = this.getMsg(),\n        senderClasses = cx({\n          'hc-chat-from': true,\n          'invisible': msg.type === 'user_state'\n        }),\n        failedGroupMessaging;\n\n    if (params.isFailedGroup) {\n      failedGroupMessaging = this._getFailedMessaging(msg.mid, false);\n    }\n\n    return (\n      <div className={params.rowClasses} ref=\"message_group_root\" onClick={this._onMessageClicked}>\n        <div className={senderClasses}>\n          <span onClick={this.onSenderClicked} ref='sender_text' className='sender-name' aria-label={params.tooltip}>\n            { params.sender }\n          </span>\n        </div>\n        <div className={params.chatClasses}>\n          { this._renderMessages() }\n          { failedGroupMessaging }\n        </div>\n      </div>\n    );\n  },\n\n  /**\n   * Renders the 'classic_neue' view for the chat messages -- that includes\n   * the avatar on the left with the sender/time/status above the messages\n   */\n  _renderClassicNeueView(params) {\n    var msg = this.getMsg(),\n        fromAddon = _.get(msg, 'notification_sender.type', 'user') === 'addon',\n        avatar = this._getAvatarUrl(),\n        hasAvatar = (avatar && msg.type !== 'info'),\n        avatarClickable = hasAvatar && !fromAddon,\n        avatarClasses = cx({\n          'hc-chat-from': true,\n          'no-action': !avatarClickable,\n          'invisible': msg.type === 'user_state'\n        }),\n        timeDisplay, failedGroupMessaging, unconfirmedGroupMessaging, editedIndicator;\n\n    if (params.isFailedGroup) {\n      failedGroupMessaging = this._getFailedMessaging(msg.mid, true);\n    } else if (params.isUnconfirmedGroup) {\n      unconfirmedGroupMessaging = this._getUnconfirmedMessaging(msg.mid, true);\n    } else {\n      timeDisplay = this._getTimeDisplay(msg.mid, true);\n      editedIndicator = this._getEditedIndicator(true);\n    }\n\n    return (\n      <div className={params.rowClasses} ref=\"message_group_root\" onClick={this._onMessageClicked}>\n        <div className={avatarClasses}>\n          { this._getAvatarDisplay(avatarClickable) }\n        </div>\n        <div className={params.chatClasses}>\n          { this._getSenderName(params) }\n          <CSSTransitionGroup transitionName=\"message-confirm-state\" transitionAppear={false} transitionEnterTimeout={150} transitionLeaveTimeout={150}>\n            { unconfirmedGroupMessaging }\n            { failedGroupMessaging }\n            { timeDisplay }\n            { editedIndicator }\n          </CSSTransitionGroup>\n          { this._renderMessages() }\n        </div>\n      </div>\n    );\n  },\n\n  /**\n   * Renders the blue line that denotes unread messages\n   */\n  _renderBlueLine() {\n    if (!this.props.shouldShowLastViewed) {\n      return;\n    }\n\n    return (\n      <div className=\"unread-line\" key={'unread-line-' + _.uniqueId()}>\n        <hr />\n      </div>\n    );\n  },\n\n  /**\n   * Renders all the messages in the group\n   */\n  _renderMessages() {\n    var integrationsEnabled = this.props.integrationsEnabled;\n    var uniqueMesssages = _.uniq(this.props.group.messages);\n    var attachedCardsToggleEnabled = this.props.attachedCardsToggleEnabled;\n    var attachedTo = _.uniq(uniqueMesssages.reduce((current, message) => {\n      if (CardHelper.isValidCard(message.card)) {\n        let attachToMid = utils.getAttachToMid(message);\n        if (attachToMid) {\n          current.push(attachToMid);\n        }\n      }\n      return current;\n    }, []));\n\n    var collapsed = null;\n    var messageMarkup = [];\n\n    uniqueMesssages.forEach((message, index, arr) => {\n      try {\n        let MessageType = message_types[message.type];\n        if (!MessageType) {\n          return undefined;\n        }\n\n        let msg = <MessageType\n                    key={'msg-' + message.mid}\n                    ref={'msg_' + message.mid}\n                    msg={message}\n                    use24hrTime={this.props.use24hrTime}\n                    shouldHideAttachedCards={this.props.shouldHideAttachedCards}\n                    shouldHideGifs={this.props.shouldHideGifs}/>;\n\n        if (attachedCardsToggleEnabled && attachedTo.indexOf(message.mid) >= 0) {\n          if (utils.isAttachedCardsCollapsed(message, this.props.shouldHideAttachedCards)) {\n            collapsed = message.mid;\n          } else {\n            collapsed = null;\n          }\n\n          var toggle = <AttachedCardsToggle key={message.mid}\n                                            mid={message.mid}\n                                            collapsed={!!collapsed}/>;\n          msg = [toggle, msg];\n        } else {\n          msg = [msg];\n        }\n\n        let time = this._getTimeDisplay(message.mid, false);\n        let editedIndicator = this._getEditedIndicator(false);\n        // For standard view, show the time or unconfirmed status only for the top message\n        if (index === 0 && !this.isClassicNeueView()) {\n          if (this.isUnconfirmedGroup()) {\n            let unconfirmedGroupMessaging = this._getUnconfirmedMessaging(message.mid, false);\n            msg.unshift(unconfirmedGroupMessaging);\n          } else if (time && !this.isFailedGroup()) {\n            if (editedIndicator) {\n              msg.unshift(editedIndicator);\n            }\n            msg.unshift(time);\n          }\n        }\n\n        if (collapsed && CardHelper.isValidCard(message.card)) {\n          let attachToMid = utils.getAttachToMid(message);\n          if (collapsed === attachToMid) {\n            return undefined;\n          }\n        }\n\n        let innerMessage,\n            isEditableType = _.includes(editable_message_types, MessageType),\n            isActionableType = _.includes(actionable_message_types, MessageType);\n        if (isActionableType && integrationsEnabled && this.props.chat_type === 'groupchat' ||\n            isActionableType && this.props.message_editing_enabled && this.props.chat_type === 'chat') {\n          innerMessage = (\n            <ActionableMessage key={'actionable-message-' + message.mid}\n                               msg={message}\n                               is_editable={isEditableType && message.sender_is_current_user && message.body !== ''}\n                               chat_type={this.props.chat_type}\n                               message_editing_enabled={this.props.message_editing_enabled}>\n              {msg}\n            </ActionableMessage>\n          );\n        } else {\n          innerMessage = msg;\n        }\n\n        messageMarkup.push(<MessageWrapper key={'msg-wrapper-' + message.mid}\n                               messageStatus={message.status}\n                               innerMessage={innerMessage}\n                               is_guest={this.props.is_guest}\n                               chat_id={this.props.chat_id}\n                               honest_messages_enabled={this.props.honest_messages_enabled}\n                               msg={message} />);\n\n        if (message.last_read_message) {\n          messageMarkup.push(this._renderBlueLine());\n        }\n\n      } catch (e) {\n        logger.warn(message);\n      }\n    });\n\n    return messageMarkup;\n  },\n\n  onSenderClicked(e) {\n    e.preventDefault();\n    let msg = this.getMsg();\n    let mentionName = msg.sender_mention;\n    if (mentionName) {\n      ChatWindowActions.senderClick({mention: '@' + mentionName});\n    } else {\n      logger.warn('Sender mention does not exists', msg);\n    }\n  },\n\n  _onMessageClicked(evt) {\n    if (evt.target) {\n      let target = dom.findParentMatching(evt.target, dom.matchers.tag(\"a\"), ReactDOM.findDOMNode(this.refs.message_group_root));\n\n      if (target) {\n        if (!_.get(window, 'HC.isEmbeddedComponent')) {\n\n          if (!target.hasAttribute(\"rel\")) {\n            target.setAttribute('rel', \"noreferrer\");\n          }\n\n          target.setAttribute('target', '_blank');\n        }\n      }\n    }\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_group.js\n **/","import Card from 'components/chat_window/message_types/card';\nimport MentionEmoticonTooltipMixin from 'components/mixins/mention_emoticon_tooltip_mixin';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport ScrollingMediaObserver from 'components/mixins/scrolling_media_observer_mixin';\nimport {dom} from 'helpers/utils';\nimport integration_link_helpers from 'helpers/integration_link_helper';\nimport Quote from 'components/chat_window/message_types/quote';\nimport Code from 'components/chat_window/message_types/code';\nimport Monospace from 'components/chat_window/message_types/monospace';\n\nexport default React.createClass({\n\n  displayName: \"NotificationMessageType\",\n\n  mixins: [MentionEmoticonTooltipMixin, DeepEqualRenderMixin, ScrollingMediaObserver],\n\n  componentDidMount: function() {\n    this._createTooltips();\n  },\n\n  componentWillUnmount: function() {\n    this._destroyTooltips();\n  },\n\n  render: function () {\n    let cardData = this.getCard(),\n        notification = this.renderNotification();\n\n    return cardData ? this.renderCard(cardData, notification) : notification;\n  },\n\n  getCard: function () {\n    return _.get(this.props, \"msg.card\");\n  },\n\n  renderCard: function(cardData, fallback) {\n    return <Card {...cardData}\n                 fallback={fallback}\n                 _setScroll={this.props._setScroll}\n                 onClick={this.onLinkClick}/>;\n  },\n\n  renderNotification: function() {\n    let notification,\n        content,\n        msg = this.props.msg;\n\n    if (msg.format === 'html') {\n      notification = msg.xhtml_im_body;\n    } else {\n      notification = msg.rendered_body;\n    }\n\n    if (msg.format === 'quotation') {\n      content =\n        <div className=\"notification msg-line\" data-mid={msg.mid} onClick={this.onLinkClick}>\n          <Quote mid={msg.mid} body={notification}/>\n        </div>;\n    } else if (msg.format === 'code') {\n      content =\n        <div className=\"notification msg-line\" data-mid={msg.mid} onClick={this.onLinkClick}>\n          <Code mid={msg.mid} body={notification}/>\n        </div>;\n    } else if (msg.format === 'monospace') {\n      content =\n        <div className=\"notification msg-line\" data-mid={msg.mid} onClick={this.onLinkClick}>\n          <Monospace mid={msg.mid} body={notification}/>\n        </div>;\n    } else {\n      content = <div className=\"notification msg-line\"\n                     data-mid={msg.mid}\n                     data-copyable={`{\"format\": \"notification\", \"mid\": \"${msg.mid}\"}`}\n                     dangerouslySetInnerHTML={{__html: notification}} onClick={this.onLinkClick}/>;\n    }\n\n    return content;\n  },\n\n  onLinkClick: function(event) {\n    if (event.target) {\n\n      let targetLink = dom.findParentMatching(event.target, dom.matchers.tag(\"a\"), ReactDOM.findDOMNode(this));\n\n      if (targetLink) {\n        let target = targetLink.getAttribute(\"data-target\");\n        let targetOptions = targetLink.getAttribute(\"data-target-options\");\n        let href = targetLink.getAttribute(\"href\");\n\n        if (integration_link_helpers.handleNotificationLink(target, targetOptions, href, this.props.msg)) {\n          event.stopPropagation();\n          event.preventDefault();\n        }\n      }\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/notification.js\n **/","/*global CardDrawer*/\nimport logger from 'helpers/logger';\nimport AppConfig from 'config/app_config';\nimport ConfigStore from 'stores/configuration_store';\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport fileHelper from 'helpers/file_helper';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport CardHelper from 'helpers/card_helper';\n\nvar urlAndUrl2xObject = React.PropTypes.oneOfType([\n  React.PropTypes.string,\n  React.PropTypes.shape({\n    url: React.PropTypes.string.isRequired,\n    'url@2x': React.PropTypes.string\n  })\n]);\n\nexport default React.createClass({\n\n  displayName: \"Card\",\n\n  propTypes: {\n    id: React.PropTypes.string.isRequired,\n    title: React.PropTypes.string.isRequired,\n    description: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.object]),\n    style: React.PropTypes.oneOf(['file', 'link', 'image', 'application', 'media']),\n    icon: urlAndUrl2xObject,\n    format: React.PropTypes.oneOf(['medium', 'compact']),\n    thumbnail: React.PropTypes.shape({\n      url: React.PropTypes.string.isRequired,\n      'url@2x': React.PropTypes.string,\n      width: React.PropTypes.number,\n      height: React.PropTypes.number\n    }),\n    attributes: React.PropTypes.arrayOf(React.PropTypes.shape({\n      label: React.PropTypes.string,\n      value: React.PropTypes.shape({\n        icon: urlAndUrl2xObject,\n        label: React.PropTypes.string.isRequired\n      })\n    })),\n    fallback: React.PropTypes.element,\n    show_always: React.PropTypes.bool\n  },\n\n  options: {\n    \"type\": \"link\",\n    \"format\": \"compact\",\n    \"responsive\": false\n  },\n\n  /**\n   * Cards are immutable and there are not going to change their state in their entire existence\n   * That is why we pass false to guarantee performance with React.\n   * @returns {boolean}\n   */\n  shouldComponentUpdate: function () {\n    return false;\n  },\n\n  getDefaultProps: function() {\n    return {\n      onClick: _.noop\n    };\n  },\n\n  getInitialState: function () {\n    return this._getState();\n  },\n\n  componentDidMount: function () {\n    var node = ReactDOM.findDOMNode(this);\n    this.thumbnailLink = node.querySelector(\".atlascard .thumbnail > a\");\n    this.title = node.querySelector(\".atlascard .title > a\");\n    this.activity = node.querySelector(\".atlascard .activity-expander\");\n\n    if (this.thumbnailLink) {\n      this.thumbnailLink.addEventListener('click', this._onClick);\n    }\n\n    if (this.title) {\n      this.title.addEventListener('click', this._onClick);\n    }\n\n    if (this.activity) {\n      this.activity.addEventListener('click', this._onActivityExpanded);\n    }\n  },\n\n  componentWillUnmount: function () {\n    if (this.thumbnailLink) {\n      this.thumbnailLink.removeEventListener('click', this._onClick);\n    }\n\n    if (this.title) {\n      this.title.removeEventListener('click', this._onClick);\n    }\n\n    if (this.activity) {\n      this.activity.removeEventListener('click', this._onActivityExpanded);\n    }\n  },\n\n  render: function () {\n\n    if (!this.cardsEnabled() || !this.isValid()) {\n      return this.fallback();\n    }\n\n    var cardData = _.clone(this.props);\n    cardData.fallback = {}; // We don't want to pass the fallback if it exists\n    cardData.date = 0; // If we don't set this IE11 & Edge go boom\n    var options = _.clone(this.options);\n\n    try {\n\n      this.processCard(options, cardData);\n      var cardDrawer = new CardDrawer(cardData, options);\n      return <div data-mid={this.props.mid}\n                  onClick={this.props.onClick}\n                  dangerouslySetInnerHTML={{__html: cardDrawer.render()}} />;\n\n    } catch (err) {\n      this._logError(err, this.props);\n      return this.fallback();\n    }\n  },\n\n  _onClick: function (evt) {\n    var urlLink = {url: this.props.url};\n\n    if (fileHelper.shouldOpenFileViewer(evt) && fileHelper.fileViewerSupports(urlLink)) {\n      evt.preventDefault();\n      FileViewerActions.openInFileViewer(urlLink);\n    }\n  },\n\n  /**\n   * We want that if activity cards are the last message and you\n   * expanded to be able to expand and don't have to scroll to see it.\n   * If the activity is in the top of the chat, we don't need to scroll anything\n   * @param evt the event\n   * @private\n   */\n  _onActivityExpanded: function (evt) {\n    var node = $(ReactDOM.findDOMNode(this));\n    var shouldScroll = node.offset().top > $(window).height() / 2;\n    if (shouldScroll) {\n      ChatWindowActions.preserveScrollValue({animation: false});\n    }\n  },\n\n  _getState: function () {\n    return {\n      feature_flags: ConfigStore.get(\"feature_flags\")\n    };\n  },\n\n  processCard: function (options, cardData) {\n\n    if (this.isImage() || this.isFile()) {\n\n      options.format = \"narrow\";\n      cardData.title = cardData.title || this.props.url.match(\"[^/]*$\");\n\n    } else if (this.isLink() || this.isMedia()) {\n\n      options.format = _.get(cardData, 'format', \"compact\");\n      cardData.site = this._getHostname(this.props.url);\n\n    } else if (this.isApplication()) {\n\n      options.format = _.get(cardData, 'format', \"compact\");\n      options.type = cardData.type = \"application\";\n    }\n\n    if (this.state.feature_flags.web_client_cards_feedback_enabled) {\n      options.feedback = {\n        url: this._feedbackUrl(cardData),\n        label: 'Feedback',\n        tooltip: 'Let the HipChat team know what you think about cards.'\n      };\n    }\n  },\n\n  /**\n   * Will check the required fields for each type to be rendered\n   */\n  isValid: function () {\n    return CardHelper.isValidCard(this.props);\n  },\n\n  fallback: function () {\n    return this.props.fallback ? this.props.fallback : <div/>;\n  },\n\n  /**\n   * If the card has a show_always it will render despite any feature flag.\n   * This happens with links that already rolled out\n   * @returns true if enabled, false if not\n   */\n  cardsEnabled: function () {\n    return this.props.show_always\n      || CardHelper.cardsEnabled(this.state.feature_flags);\n  },\n\n  isValidStyle: function () {\n    return CardHelper.isValidStyle(this.props);\n  },\n\n  isLink: function () {\n    return CardHelper.isLink(this.props);\n  },\n\n  isMedia: function () {\n    return CardHelper.isMedia(this.props);\n  },\n\n  isFile: function () {\n    return CardHelper.isFile(this.props);\n  },\n\n  isImage: function () {\n    return CardHelper.isImage(this.props);\n  },\n\n  isApplication: function () {\n    return CardHelper.isApplication(this.props);\n  },\n\n  _getHostname: function (url) {\n    var link = document.createElement('a');\n    link.href = url;\n    return link.hostname;\n  },\n\n  _feedbackUrl: function (cardData) {\n    return AppConfig.cards.feedback_url + encodeURIComponent(JSON.stringify(cardData));\n  },\n\n  _logError: function (error, data) {\n    logger.error(error);\n    logger.error(data);\n    this.valid = false;\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/card.js\n **/","import AnalyticsActions from 'actions/analytics_actions';\nimport ConfigStore from 'stores/configuration_store';\nimport DialogActions from 'actions/dialog_actions';\nimport IntegrationHelper from 'helpers/integration_helper';\nimport IntegrationsActions from 'actions/integrations_actions';\nimport logger from 'helpers/logger';\nimport RouteActions from 'actions/route_actions.js';\nimport URI from 'helpers/uri';\n\nfunction parseOptions(options) {\n  if (_.isString(options) && !_.isEmpty(options)) {\n    try {\n      options = JSON.parse(options);\n    } catch (error) {\n      logger.error('[ChatPanel:routeLinkAction]', 'target options are not valid JSON', error.message);\n      options = {};\n    }\n  }\n  return options || {};\n}\n\nfunction handleTarget(message, target, targetOptions) {\n  let targetModule = IntegrationHelper.split_full_key(target);\n  let data = targetOptions;\n  if (message) {\n    let parameters = IntegrationHelper.extractIntegrationParametersFromMessage(message);\n    data = _.extend({urlTemplateValues: {message: parameters}, parameters: parameters}, targetOptions);\n  }\n\n  let sender = message.notification_sender;\n  if (sender && sender.type === \"addon\") {\n    if (targetModule.length === 2) {\n      if (sender.id === targetModule[0]) {\n        IntegrationsActions.open(targetModule[0], targetModule[1], data, null, \"link\");\n      } else {\n        logger.error('[HC-Integrations]', `Unable to invoke action for '${targetModule[0]}' from plugin '${sender.id}'`);\n      }\n    } else if (targetModule.length === 1) {\n      IntegrationsActions.open(sender.id, targetModule[0], data, null, \"link\");\n    }\n    else {\n      logger.error('[HC-Integrations]', `Unknown link target from notification: '${target}'`);\n    }\n  } else {\n    logger.error('[HC-Integrations]', `Unable to invoke action link - message not sent from addon: '${target}'`);\n  }\n}\n\nexport default {\n\n  handleNotificationLink: function (dataTarget, dataTargetOptions, href, message) {\n\n    let targetUrl = URI.parse(href);\n    let targetOptions = parseOptions(dataTargetOptions);\n    let isLegacyConnectDialog = (dataTarget === 'dialog');\n\n    if (targetUrl && isLegacyConnectDialog) {\n\n      AnalyticsActions.connectDialogLinkClickedEvent(targetUrl.getDomain());\n\n      DialogActions.showAddonDialog({\n        addon_key: targetUrl.getDomain(),\n        module_key: 'module-key',\n        addon_url: href,\n        addon_options: targetOptions\n      });\n\n      return true;\n    }\n\n    if (targetUrl && targetUrl.isHipchatNative(ConfigStore.get('base_url'))) {\n\n      if (targetUrl.containsRoom()) {\n        RouteActions.selectRoom(targetUrl.getRoom(), true);\n      } else if (targetUrl.containsUser()) {\n        RouteActions.selectOTO(targetUrl.getUser(), true);\n      } else {\n        logger.error('[HC-Integrations], `malformed native link`');\n      }\n\n      let target = targetUrl.getParameterValue('target');\n      if (target || dataTarget) {\n        handleTarget(message, target || dataTarget, targetOptions);\n      }\n      return true;\n    }\n\n    if (dataTarget) {\n      handleTarget(message, dataTarget, targetOptions);\n      return true;\n    }\n\n    return false;\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/integration_link_helper.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppStore from 'stores/application_store';\nimport PathParamConverters from 'helpers/path_parameter_converters';\nimport FlagActions from 'actions/flag_actions';\nimport strings from 'strings/common_strings';\n\nvar idToUserConverters = [\n  PathParamConverters.get(\"idToUser\"),\n  PathParamConverters.get(\"jidToUser\"),\n  PathParamConverters.get(\"halfJidToUser\"),\n  PathParamConverters.get(\"mentionNameToUser\")];\nvar idToRoomConverters = [\n  PathParamConverters.get(\"idToRoom\"),\n  PathParamConverters.get(\"jidToRoom\"),\n  PathParamConverters.get(\"halfJidToRoom\"),\n  PathParamConverters.get(\"nameToRoom\")];\n\n\nexport default {\n\n  selectRoom(room_id, set_route = false) {\n    var room = _.reduce(idToRoomConverters, function(accumulator, idToRoomConverter) {\n      if (_.isUndefined(accumulator) && idToRoomConverter.handle(room_id)) {\n        return idToRoomConverter.convert(room_id);\n      }\n\n      return accumulator;\n    }, room);\n\n    if (!_.isUndefined(room)) {\n\n      let activeChatJid = _.get(AppStore.data, 'active_chat');\n\n      if (set_route) {\n        AppDispatcher.dispatch('set-route', {jid: room.jid});\n      }\n\n      if (!_.get(AppStore.data, `activeRooms[\"${room.jid}\"]`)) {\n        AppDispatcher.dispatch('open-room', {jid: room.jid});\n      }\n\n      if (activeChatJid !== room.jid) {\n        AppDispatcher.dispatch('new-active-chat', {jid: room.jid});\n      }\n    } else {\n      FlagActions.showFlag({\n        type: \"warning\",\n        body: strings.room_not_found,\n        close: \"auto\",\n        title: \"\",\n        delay: 5000\n      });\n    }\n  },\n\n  selectOTO(user_id, set_route = false) {\n    var user = _.reduce(idToUserConverters, function (accumulator, idToUserConverter) {\n      if (_.isUndefined(accumulator) && idToUserConverter.handle(user_id)) {\n        return idToUserConverter.convert(user_id);\n      }\n\n      return accumulator;\n    }, user);\n\n    if (!_.isUndefined(user)) {\n\n      let activeChatJid = _.get(AppStore.data, 'active_chat');\n\n      if (set_route) {\n        AppDispatcher.dispatch('set-route', {jid: user.jid});\n      }\n\n      if (!_.get(AppStore.data, `activeRooms[\"${user.jid}\"]`)) {\n        AppDispatcher.dispatch('open-room', {jid: user.jid});\n      }\n\n      if (activeChatJid !== user.jid) {\n        AppDispatcher.dispatch('new-active-chat', {jid: user.jid});\n      }\n    } else {\n      FlagActions.showFlag({\n        type: \"warning\",\n        body: strings.user_not_found,\n        close: \"auto\",\n        title: \"\",\n        delay: 3000\n      });\n    }\n  }\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/route_actions.js\n **/","import emoticons from 'helpers/emoticons';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"InfoMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  componentDidMount: function() {\n    emoticons._replaceSpecials(ReactDOM.findDOMNode(this));\n  },\n\n  render: function () {\n    return <div className=\"info msg-line\"\n                data-copyable={`{\"format\": \"info\"}`}\n                data-mid={this.props.msg.mid}\n                data-presence-message={this.props.msg.is_presence_message}\n                dangerouslySetInnerHTML={{__html: this.props.msg.rendered_body}} />;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/info.js\n **/","import utils from \"helpers/utils\";\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport fileHelper from 'helpers/file_helper';\nimport strings from 'strings/chat_panel_strings';\nimport cx from 'classnames';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport AppActions from 'actions/app_actions';\nimport MentionEmoticonTooltipMixin from 'components/mixins/mention_emoticon_tooltip_mixin';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport ScrollingMediaObserver from 'components/mixins/scrolling_media_observer_mixin';\nimport FileThumbnail from 'components/common/file_viewer/file_thumbnail';\n\nexport default React.createClass({\n\n  displayName: \"FileMessageType\",\n\n  mixins: [DeepEqualRenderMixin, MentionEmoticonTooltipMixin, ScrollingMediaObserver],\n\n  getInitialState() {\n    return {\n      userExpanded: null\n    };\n  },\n\n  componentWillMount() {\n    let msg = this.props.msg;\n\n    this._initRenderStrategies();\n\n    if (this._renderStrategies[msg.file_data.file_type]) {\n      this.renderStrategy = this._renderStrategies[msg.file_data.file_type];\n    } else {\n      this.renderStrategy = this._renderStrategies.file;\n    }\n  },\n\n  _isUserExpanded() {\n    return !this.props.msg.is_collapsed;\n  },\n\n  _shouldBeExpanded() {\n    if (this.props.shouldHideAttachedCards) {\n      return false;\n    }\n    if (this.props.shouldHideGifs) {\n      return this.props.msg.file_data.file_ext !== 'gif';\n    }\n    return true;\n  },\n\n  _isExpanded() {\n    if (this.state.userExpanded === null) {\n      return (this._shouldBeExpanded() ? this._isUserExpanded() : false);\n    }\n    return this.state.userExpanded;\n  },\n\n  _getDescription() {\n    if (this.props.msg.rendered_body) {\n      return (<span className=\"description\" dangerouslySetInnerHTML={{ __html: this.props.msg.rendered_body }}></span>);\n    }\n    return '';\n  },\n\n  render() {\n    return this.renderStrategy();\n  },\n\n  _initRenderStrategies() {\n    this._renderStrategies = {\n      img: this._renderImgMessage,\n      video: this._renderVideoMessage,\n      file: this._renderFileMessage\n    };\n  },\n\n  _renderImgMessage() {\n    let msg = this.props.msg;\n    let fileName = msg.file_data.file_name;\n\n    let isExpanded = this._isExpanded(),\n      toggleClasses = cx({\n        'toggle-image': true,\n        'collapse': isExpanded,\n        'expand': !isExpanded\n      }),\n      fileMetaClasses = cx({\n        'file-meta': true,\n        'with-preview': true,\n        'compact': !isExpanded\n      });\n    return (\n      <div data-mid={msg.mid}\n           className=\"msg-line\"\n           data-copyable={`{\"format\": \"file\", \"mid\": \"${msg.mid}\"}`}>\n        <div className=\"toggle-wrap\" onClick={this._toggleImage}>\n          <span className={toggleClasses}></span>\n        </div>\n        { this._renderThumbnail() }\n        <div className={fileMetaClasses}>\n          <a href={msg.file_data.url} onClick={this._onClick}>{fileName}</a>\n          <span className=\"file-size\">{msg.file_data.file_size}</span>\n        </div>\n        { this._getDescription() }\n      </div>\n    );\n  },\n\n  _renderThumbnail() {\n    if (this._isExpanded()) {\n      return (\n        <FileThumbnail\n          file={this.props.msg.file_data}\n          onClick={this._onClick}/>\n      );\n    }\n\n    return (\n      <div className=\"file-preview-wrapper info\">\n        <i>{strings.image_hidden}</i>\n      </div>\n    );\n  },\n\n  _renderVideoMessage() {\n    let msg = this.props.msg;\n    let fileName = msg.file_data.file_name;\n\n    return (\n      <div data-mid={msg.mid}\n           className=\"msg-line\"\n           data-copyable={`{\"format\": \"file\", \"mid\": \"${msg.mid}\"}`}>\n        <div className=\"file-preview-wrapper video-wrap\">\n          <span className=\"file-video-default-poster\" onClick={this._onClick}></span>\n        </div>\n        <div className=\"file-meta with-preview\">\n          <a href={msg.file_data.url} onClick={this._onClick}>{fileName}</a>\n          <span className=\"file-size\">{msg.file_data.file_size}</span>\n        </div>\n        {this._getDescription()}\n      </div>\n    );\n  },\n\n  _renderFileMessage() {\n    let msg = this.props.msg;\n    let fileName = msg.file_data.file_name;\n    let fileIcons = cx({\n        'aui-icon': true,\n        'hipchat-icon-small': true,\n        'hc-file-icon': true\n    });\n    fileIcons = fileIcons + \" \" + utils.file.get_icon_class(fileName);\n\n    return (\n      <div data-mid={msg.mid}\n           className=\"msg-line\"\n           data-copyable={`{\"format\": \"file\", \"mid\": \"${msg.mid}\"}`}>\n        <div className=\"file-meta\">\n          <span className={fileIcons}></span>\n          <a href={msg.file_data.url} onClick={this._onClick}>{fileName}</a>\n          <span className=\"file-size\">{msg.file_data.file_size}</span>\n        </div>\n        {this._getDescription()}\n      </div>\n    );\n  },\n\n  _toggleImage() {\n    var isExpanded = this._isExpanded();\n    this.setState({\n      userExpanded: !isExpanded\n    });\n    ChatWindowActions.toggleImage({\n      jid: this.props.msg.room,\n      mid: this.props.msg.mid\n    });\n  },\n\n  _videoTypeSupported(ext) {\n    var video = document.createElement( \"video\" );\n    if (video.canPlayType) {\n      return {\n        mp4: (video.canPlayType('video/mp4; codecs=\"mp4v.20.8\"') || video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') || video.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"')),\n        m4v: (video.canPlayType('video/mp4; codecs=\"mp4v.20.8\"') || video.canPlayType('video/mp4; codecs=\"avc1.42E01E\"') || video.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"')),\n        ogv: video.canPlayType('video/ogg; codecs=\"theora\"'),\n        webm: video.canPlayType('video/webm; codecs=\"vp8, vorbis\"')\n      }[ext];\n    }\n    return false;\n  },\n\n  _onClick(evt) {\n    if (fileHelper.shouldOpenFileViewer(evt)) {\n      evt.preventDefault();\n      if (evt.metaKey) {\n        let url = this.props.msg.file_data.url;\n        AppActions.openExternalWindow(url, '_blank');\n      } else {\n        FileViewerActions.openInFileViewer(this.props.msg.file_data);\n      }\n    }\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/file.js\n **/","import fileHelper from 'helpers/file_helper';\nimport AppConfig from 'config/app_config';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport FileError from 'components/chat_window/message_types/file_error';\nimport utils from 'helpers/utils';\n\nexport default React.createClass({\n\n  displayName: 'FileThumbnail',\n\n  propTypes: {\n    file: React.PropTypes.object.isRequired,\n    onClick: React.PropTypes.func.isRequired\n  },\n\n  getInitialState() {\n    return {\n      thumbIsLoading: false,\n      thumbIsLoaded: false,\n      imageIsMounted: false,\n      error: null\n    };\n  },\n\n  componentWillMount() {\n    AppDispatcher.register({\n      'thumbnail-is-loading': this._thumbnailIsLoading,\n      'thumbnail-loaded-success': this._thumbnailLoadedSuccess,\n      'thumbnail-loaded-error': this._thumbnailLoadedError\n    });\n\n    if (this.props.file.file_type === 'img') {\n      this.tryFetchThumbnail(this.props.file);\n    }\n  },\n\n  componentDidMount() {\n    if (this.props.file.file_type === 'img') {\n      this._appendThumbnail();\n    }\n  },\n\n  componentDidUpdate() {\n    if (this.props.file.file_type === 'img' && !this.state.imageIsMounted) {\n      this._appendThumbnail();\n    }\n  },\n\n  componentWillUnmount() {\n    AppDispatcher.unregister({\n      'thumbnail-is-loading': this._thumbnailIsLoading,\n      'thumbnail-loaded-success': this._thumbnailLoadedSuccess,\n      'thumbnail-loaded-error': this._thumbnailLoadedError\n    });\n  },\n\n  _thumbnailIsLoading(instance) {\n    if (instance === this) {\n      this.setState({ thumbIsLoading: true });\n    }\n  },\n\n  _thumbnailLoadedSuccess (instance) {\n    if (instance === this) {\n      this.setState({\n        thumbIsLoaded: true,\n        thumbIsLoading: false,\n        error: null\n      });\n    }\n  },\n\n  _thumbnailLoadedError (data) {\n    if (data.instance === this) {\n      this.setState({\n        thumbIsLoaded: true,\n        thumbIsLoading: false,\n        error: data.error,\n        imageIsMounted: false\n      });\n    }\n  },\n\n  _appendThumbnail() {\n    let node = ReactDOM.findDOMNode(this.refs.preview_thumbnail_container);\n    if(node !== null) {\n      node.appendChild(this.props.file.preview_thumbnail);\n      this.setState({ imageIsMounted: true });\n    }\n  },\n\n  render() {\n    if(this.state.error) {\n      return (\n        <FileError code={this.state.error.code}\n                   isLoading={this.state.thumbIsLoading}\n                   onClick={this.tryFetchThumbnail}></FileError>);\n    }\n\n    return (\n      <div className=\"file-preview-wrapper\" onClick={this.props.onClick}>\n        <a href={this.props.file.url}\n           target=\"_blank\"\n           title={fileHelper.basename(this.props.file.name)}\n           onClick={this._onClick}\n           ref=\"preview_thumbnail_container\">\n        </a>\n      </div>);\n  },\n\n  tryFetchThumbnail() {\n    this.loadThumbnail().then(() => {\n      ChatWindowActions.thumbnailLoadedSuccess(this);\n    }, error => {\n      error = error || null;\n\n      ChatWindowActions.thumbnailLoadedError({ error, instance: this });\n    });\n  },\n\n  loadThumbnail() {\n    let file = this.props.file;\n    let loadThumb = new Promise((resolve, reject) => {\n      let timeout = AppConfig.message_image_loading_timeout;\n\n      if (file.preview_thumbnail._isLoaded){\n        return Promise.resolve(true);\n      }\n\n      if (file.is_authenticated) {\n        ChatWindowActions.fetchSignedThumbnail(file, data => {\n          utils.image.changeSrc(file.preview_thumbnail, data.temp_url, timeout).then(resolve, reject);\n        }, err => {\n          if (err.status) {\n            let error = {\n              code: err.status\n            };\n            reject(error);\n          }\n        });\n      } else {\n        utils.image.changeSrc(file.preview_thumbnail, file.thumb_url, timeout).then(resolve, reject);\n      }\n\n      ChatWindowActions.thumbnailIsLoading(this);\n    });\n\n    return loadThumb;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/file_viewer/file_thumbnail.js\n **/","import FileErrorStrings from 'strings/file_error_strings';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport Spinner from 'components/common/spinner/spinner';\nimport cx from 'classnames';\n\nexport default React.createClass({\n  displayName: \"FileErrorMessageType\",\n\n  mixins: [PureRenderMixin],\n\n  propTypes: {\n    code: React.PropTypes.number.isRequired,\n    title: React.PropTypes.string,\n    isLoading: React.PropTypes.bool,\n    description: React.PropTypes.string,\n    onClick: React.PropTypes.func\n  },\n\n  render() {\n    let stringObject = FileErrorStrings[this.props.code] || FileErrorStrings.default_error;\n    let title = this.props.title || stringObject.title;\n    let description = this.props.description || stringObject.description;\n    let classNames = cx({\n      'file-error-message': true\n    });\n\n    return (\n      <div className={classNames}>\n        <h3>{ title }</h3>\n        <div>{ description }</div>\n        <div>{ this.props.onClick ? this.renderTryAgainButton() : '' }</div>\n      </div>);\n  },\n\n  renderTryAgainButton() {\n    if (this.props.isLoading) {\n      return (\n        <div className=\"file-error-spinner\">\n          <Spinner size=\"small\" spin={!!this.props.isLoading}></Spinner>\n        </div>);\n    }\n    return (<a onClick={this.props.onClick}>Try again</a>);\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/file_error.js\n **/","export default {\n  401: {\n    title: 'Not authenticated',\n    description: 'We couldn\\'t authenticate your account. If this keeps happening, try logging in again.'\n  },\n  403: {\n    title: 'Not authorized',\n    description: 'You don\\'t have permission to view this file.'\n  },\n  404: {\n    title: 'File not found',\n    description: 'We couldn\\'t find the file.'\n  },\n  default_error: {\n    title: 'We couldn\\'t load the file',\n    description: 'There\\'s a problem loading the file from the server.'\n  }\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/file_error_strings.js\n **/","import DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport Card from './card';\n\nexport default React.createClass({\n\n  displayName: \"LinkMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  render: function () {\n\n    var data = _.clone(this.props.msg.link_details);\n    data.icon = data.favicon_url || (data.icon && data.icon.url);\n    data.description = data.desc || data.description;\n    data.url = data.id = data.full_url || data.url;\n    data.title = data.header_text || data.title;\n    data.style = 'link';\n\n    return <Card {...data} show_always=\"true\"/>;\n  },\n\n  _getHostname: function(url) {\n    var link = document.createElement('a');\n    link.href = url;\n    return link.hostname;\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/link.js\n **/","import utils from \"helpers/utils\";\nimport strings from 'strings/chat_panel_strings';\nimport Image from './image/image';\nimport GifV from './image/gifv';\nimport cx from 'classnames';\nimport fileHelper from 'helpers/file_helper';\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"ImageMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  getInitialState: function () {\n    return {\n      userExpanded: null,\n      timeout: false\n    };\n  },\n\n  _isGifV: function() {\n    return this.props.msg.type === 'image' && !!_.get(this.props.msg, 'link_details.mp4');\n  },\n\n  _isUserExpanded: function() {\n    return !this.props.msg.is_collapsed;\n  },\n\n  _shouldBeExpanded: function() {\n    var extension = utils.file.get_extension(this.props.msg.link_details.image);\n    if (this.props.shouldHideAttachedCards) {\n      return false;\n    }\n    if (this.props.shouldHideGifs) {\n      return !/^gif/.test(extension);\n    }\n    return true;\n  },\n\n  _isExpanded: function() {\n    if (this.state.userExpanded === null) {\n      return (this._shouldBeExpanded() ? this._isUserExpanded() : false);\n    }\n    return this.state.userExpanded;\n  },\n\n  _getCollapsedImage: function() {\n    return (\n      <div className=\"info\">\n        <i>{strings.image_hidden}</i>\n      </div>\n    );\n  },\n\n  _getExpandedImage: function() {\n    var props = {\n        ref: \"image\",\n        msg: this.props.msg\n      },\n      content;\n\n    if (this._isGifV()) {\n      content = (\n        <GifV {...props}/>\n      );\n    } else {\n      content = (\n        <Image {...props}/>\n      );\n    }\n\n    return (\n      <div className=\"image-preview-wrapper\">\n        {content}\n      </div>\n    );\n  },\n\n  _onClick: function(evt) {\n    if (fileHelper.shouldOpenFileViewer(evt)) {\n      evt.preventDefault();\n      FileViewerActions.openInFileViewer(this.props.msg.link_details);\n    }\n  },\n\n  _toggleImage: function () {\n    var isExpanded = this._isExpanded();\n    this.setState({\n      userExpanded: !isExpanded\n    });\n    ChatWindowActions.toggleImage({\n      jid: this.props.msg.room,\n      mid: this.props.msg.mid\n    });\n  },\n\n  render: function () {\n    var isExpanded = this._isExpanded(),\n      toggleClasses = cx({\n        'toggle-image': true,\n        'collapse': isExpanded,\n        'expand': !isExpanded\n      }),\n      content;\n\n    if (isExpanded) {\n      content = this._getExpandedImage();\n    } else {\n      content = this._getCollapsedImage();\n    }\n\n    return (\n      <div className=\"msg-line\" data-mid={this.props.msg.mid}>\n        <div className=\"toggle-wrap\" onClick={this._toggleImage}>\n          <span className={toggleClasses}></span>\n        </div>\n        {content}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/image.js\n **/","import FileViewerActions from 'actions/file_viewer_actions';\nimport fileHelper from 'helpers/file_helper';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport ScrollingMediaObserver from 'components/mixins/scrolling_media_observer_mixin';\n\nexport default React.createClass({\n\n  displayName: 'ImageComponentType',\n\n  mixins: [DeepEqualRenderMixin, ScrollingMediaObserver],\n\n  componentDidMount: function() {\n    this._setImageSrc();\n\n    if (this.props.msg.media_loaded){\n        let img = ReactDOM.findDOMNode(this.refs.image);\n        let size = _.get(this.props.msg, `media_sizes`, {})[this.props.msg.link_details.image];\n        if (size && size.width && size.height){\n          img.width = size.width;\n\n          img.height = size.height;\n        }\n      }\n  },\n\n  componentDidUpdate(){\n    if (!this.state.failed){\n      this._setImageSrc();\n    }\n  },\n\n  _setImageSrc(){\n    let img = ReactDOM.findDOMNode(this.refs.image);\n    let src = this.props.msg.link_details.image;\n\n    if(img.src !== src) {\n      img.src = this.props.msg.link_details.image;\n    }\n  },\n\n  _onClick: function(evt) {\n    if (fileHelper.shouldOpenFileViewer(evt)) {\n      evt.preventDefault();\n      FileViewerActions.openInFileViewer(this.props.msg.link_details);\n    }\n  },\n\n  render: function() {\n    return (\n      <a href={this.props.msg.link_details.url}\n         target=\"_blank\"\n         title={fileHelper.basename(this.props.msg.link_details.url)}\n         onClick={this._onClick}>\n         <img ref=\"image\" src=\"\"/>\n      </a>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/image/image.js\n **/","import DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\nimport ScrollingMediaObserver from 'components/mixins/scrolling_media_observer_mixin';\nimport Image from 'components/chat_window/message_types/image/image';\n\nexport default React.createClass({\n\n  mixins: [DeepEqualRenderMixin, ScrollingMediaObserver],\n\n  componentDidMount: function() {\n    var video = ReactDOM.findDOMNode(this.refs.video),\n        mp4 = ReactDOM.findDOMNode(this.refs.mp4),\n        webm = ReactDOM.findDOMNode(this.refs.webm),\n        mp4Url = this.props.msg.link_details.mp4,\n        webmUrl = this._getWebM();\n\n    if (video){\n      if (!this._canPlayMp4()) {\n        video.src = webmUrl;\n      } else {\n        video.src = mp4Url;\n      }\n      mp4.src = mp4Url;\n      webm.src = webmUrl;\n\n      if (this.props.msg.media_loaded){\n        let src = this._canPlayMp4() ? mp4Url : webmUrl;\n        let size = _.get(this.props.msg, `media_sizes`, {})[src];\n\n        if (size && size.width && size.height){\n          video.width = size.width;\n          video.height = size.height;\n        } else {\n          this.setState({\n            failed: true\n          });\n        }\n      }\n    }\n  },\n\n  getVideo(){\n    return (\n      <a href={this.props.msg.link_details.url}\n         target=\"_blank\"\n         title={this.props.msg.link_details.name || this.props.msg.link_details.url}>\n        <video ref=\"video\"\n               mute=\"true\"\n               loop=\"true\"\n               src=\"\"\n               autoPlay=\"true\">\n          <source ref=\"mp4\" src=\"\"/>\n          <source ref=\"webm\" src=\"\"/>\n        </video>\n      </a>\n    );\n  },\n\n  getFailedState(){\n    return <Image {...this.props}/>;\n  },\n\n  render: function() {\n    return (this.state.failed) ? this.getFailedState() : this.getVideo();\n  },\n\n  // (sadpanda).\n  // The .mp4 version doesn't play in the Windows Chromium app. We can't just fall\n  // back to the .gif version, because Imgur reserves the right to delete them if\n  // they are over 20 Mb. Platform will be giving us the .webm info soon (see\n  // https://jira.atlassian.com/browse/HC-23799). When that lands, remove this.\n  _getWebM() {\n    return this.props.msg.link_details.webm || this.props.msg.link_details.mp4.replace(/\\.mp4/, '.webm');\n  },\n\n  _canPlayMp4() {\n    var video = ReactDOM.findDOMNode(this.refs.video);\n    return video.canPlayType && video.canPlayType('video/mp4');\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/image/gifv.js\n **/","import utils from 'helpers/utils';\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport fileHelper from 'helpers/file_helper';\nimport Card from './card';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"VideoMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  render: function () {\n    return (<Card id={this.props.msg.mid} url={this.props.msg.link_details.url}\n                  style='link' thumbnail={ {url: this.props.msg.link_details.thumb}}\n                  icon='/wc/assets/img/youtube-favicon-32.png'\n                  title={this.props.msg.link_details.title}\n                  description=''\n                  fallback={this.getFallbackMessage()} mid={this.props.msg.mid}/>);\n  },\n\n  /**\n   * This message is going to be deprecated when cards are fully functional\n   * @returns {XML}\n   * @deprecated\n   */\n  getFallbackMessage: function () {\n    return (\n      <div className=\"msg-line\" data-mid={this.props.msg.mid}>\n        <div data-mid={this.props.msg.mid} className=\"video-wrap\">\n          <a href={this.props.msg.link_details.url} className=\"file-video-default-poster\" onClick={this._onClick}>\n            <img src={this.props.msg.link_details.thumb}/>\n          </a>\n          <p className=\"linkTitle\">\n            <a href={this.props.msg.link_details.url} target=\"_blank\">\n              {this.props.msg.link_details.title}\n            </a>\n          </p>\n          <p className=\"linkDesc\">{utils.formatNumber(this.props.msg.link_details.views)} views\n            <br />\n            {this.props.msg.link_details.author}\n          </p>\n        </div>\n      </div>\n    );\n  },\n\n  _onClick: function(evt){\n    if (fileHelper.shouldOpenFileViewer(evt)) {\n      evt.preventDefault();\n      FileViewerActions.openInFileViewer(this.props.msg.link_details);\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/video.js\n **/","import DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"UserStateMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  render: function () {\n    return <div className=\"state info msg-line\" data-mid={this.props.msg.mid}>{this.props.msg.body}</div>;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/user_state.js\n **/","/*global twttr, HC*/\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport appConfig from 'config/app_config';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"TwitterStatusMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  componentWillMount: function () {\n    this.onTwitterEmbedRendered = function (evt) {\n      AppDispatcher.dispatch('twitter-card-rendered', {element: evt.target});\n      twttr.events.unbind('rendered', this.onTwitterEmbedRendered);\n    };\n    this._isEmbedded = (window.HC && HC.isEmbeddedComponent) ? true : false;\n    if (!this._isEmbedded && appConfig.render_twitter_cards) {\n      this._debouncedTwttrLoad = _.debounce(twttr.widgets.load, 100, {leading: true, trailing: false});\n      twttr.events.bind('rendered', this.onTwitterEmbedRendered);\n    }\n  },\n\n  componentDidMount: function(){\n    if (!this._isEmbedded && appConfig.render_twitter_cards) {\n      this._debouncedTwttrLoad();\n    }\n  },\n\n  componentWillUnmount: function(){\n    if (!this._isEmbedded && appConfig.render_twitter_cards) {\n      twttr.events.unbind('rendered', this.onTwitterEmbedRendered);\n    }\n  },\n\n  render: function () {\n    var tweet;\n    if (this._isEmbedded || !appConfig.render_twitter_cards) {\n      tweet = <div data-mid={this.props.msg.mid} className=\"link-wrap\" dangerouslySetInnerHTML={{\n        __html: (\n        '<a class=\"linkImage\" name=\"link\" target=\"_blank\" href=\"http://twitter.com/' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '\" >' +\n        '<img class=\"twitterAvatar\" height=\"48\" width=\"48\" src=\"' + (this.props.msg.link_details.profile_image_url || this.props.msg.link_details.profileImageUrl) + '\" />' +\n        '</a><p class=\"tweet\">' + this.props.msg.body + '</p>' +\n        '<p class=\"linkDesc tweet\">– ' + this.props.msg.link_details.name + ' (<a target=\"_blank\" href=\"http://twitter.com/' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '\" >@' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '</a>) via ' + this.props.msg.link_details.source + '</p>'\n        )\n      }} />;\n    } else {\n      tweet = <blockquote className=\"twitter-tweet hidden\">\n        <p>{this.props.msg.body}</p>\n        <a href={this.props.msg.link_details.url}>{this.props.msg.link_details.url}</a>\n      </blockquote>;\n    }\n    return <div className=\"msg-line\" data-mid={this.props.msg.mid}>\n      {tweet}\n    </div>;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/twitter_status.js\n **/","import utils from 'helpers/utils';\nimport DeepEqualRenderMixin from 'components/mixins/deep_equal_render_mixin';\n\nexport default React.createClass({\n\n  displayName: \"TwitterUserMessageType\",\n\n  mixins: [DeepEqualRenderMixin],\n\n  render: function () {\n    return <div className=\"msg-line\" data-mid={this.props.msg.mid}>\n      <div data-mid={this.props.msg.mid} className=\"link-wrap\" dangerouslySetInnerHTML={{\n        __html: (\n        '<a class=\"linkImage\" name=\"link\" target=\"_blank\" href=\"http://twitter.com/' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '\" >' +\n        '<img class=\"twitterAvatar\" height=\"48\" width=\"48\" src=\"' + (this.props.msg.link_details.profile_image_url || this.props.msg.link_details.profileImageUrl) + '\" />' +\n        '</a><p class=\"linkDesc tweet\">' + this.props.msg.link_details.name + ' (<a target=\"_blank\" href=\"http://twitter.com/' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '\" >@' + (this.props.msg.link_details.screen_name || this.props.msg.link_details.screenName) + '</a>)</p>' +\n        '<p class=\"followers\">' + utils.formatNumber(this.props.msg.link_details.followers) + ' followers</p>'\n        )\n      }} />\n    </div>;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_types/twitter_user.js\n **/","import cx from 'classnames';\nimport ChatWindowActions from 'actions/chat_window_actions';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport IntegrationsStore from 'stores/integrations_store';\nimport strings from 'strings/integrations_strings';\nimport DropDown from 'components/common/actions_dropdown/actions_dropdown';\nimport DropDownAction from 'components/common/actions_dropdown/integration_dropdown_action';\nimport IntegrationsHelper from 'helpers/integration_helper';\nimport EditMessage from './edit_message';\nimport DeleteMessage from './delete_message';\n\nexport default React.createClass({\n\n  displayName: \"ActionableMessageWrapper\",\n\n  propTypes: {\n    msg: React.PropTypes.shape({\n      mid: React.PropTypes.string,\n      room: React.PropTypes.string\n    }),\n    onActive: React.PropTypes.func,\n    onInactive: React.PropTypes.func\n  },\n\n  getInitialState() {\n    return {\n      \"active\": false\n    };\n  },\n\n  componentWillUnmount() {\n    AppDispatcher.unregister('chat-is-scrolling', this._dismiss);\n  },\n\n  _onShow() {\n    ChatWindowActions.displayMessageAction({jid: this.props.msg.room});\n    AppDispatcher.registerOnce('chat-is-scrolling', this._dismiss);\n    this.setState({\"active\": true});\n  },\n\n  _onDismiss() {\n    ChatWindowActions.hideMessageAction({jid: this.props.msg.room});\n    AppDispatcher.unregister('chat-is-scrolling', this._dismiss);\n    this.setState({\"active\": false});\n  },\n\n  render() {\n    let classes = cx({\n      \"actionable-msg-container\": true,\n      \"msg-line\": true,\n      \"hc-message-actions-active\": this.state.active\n    });\n\n    let dropdown = <DropDown icon=\"aui-iconfont-more\"\n                             dropdown_id={\"message-actions-\" + this.props.msg.mid}\n                             lazy_options={this._renderOptions}\n                             location_horizontal=\"left\"\n                             onShow={this._onShow}\n                             onHide={this._onDismiss}/>;\n\n    return <div className={classes} key={this.props.msg.mid}>\n      {dropdown}\n      {this.props.children}\n    </div>;\n  },\n\n  _renderOptions() {\n    let extensions = IntegrationsStore.getExtensionsByLocationAndContext(\"hipchat.message.action\", {message: this.props.msg});\n\n    let options = [], editControls;\n\n    if (extensions.length > 0) {\n      options = _.map(extensions, action => <DropDownAction action={action}\n                                                          msg={this.props.msg}\n                                                          key={IntegrationsHelper.to_full_key(action.addon_key + \":\" + action.key)}/>);\n    } else if (!this.props.is_editable || !this.props.message_editing_enabled) {\n      options = [<li key={this.props.msg.mid}>\n        <a className=\"disabled\" title={strings.empty_message_actions_title}>{strings.empty_message_actions}</a>\n      </li>];\n    }\n\n    if (this.props.message_editing_enabled && this.props.is_editable) {\n      editControls = <div className=\"aui-dropdown2-section\">\n          <ul>\n            <EditMessage msg={this.props.msg} />\n            <DeleteMessage msg={this.props.msg} />\n          </ul>\n        </div>;\n    }\n\n    let optionsSection;\n    if (this.props.message_editing_enabled && editControls && options.length > 0) {\n      optionsSection = <div className=\"aui-dropdown2-section\">\n        <ul className=\"aui-list-truncate\">\n          {options}\n        </ul>\n      </div>;\n    } else {\n      optionsSection = <ul className=\"aui-list-truncate\">\n        {options}\n      </ul>;\n    }\n\n    return <div>\n      {editControls}\n      {optionsSection}\n    </div>;\n  },\n\n  _dismiss() {\n    ChatWindowActions.dismissActionsDropDown();\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_actions/wrapper.js\n **/","var AppDispatcher = require('dispatchers/app_dispatcher');\n\nmodule.exports = React.createClass({\n\n  displayName: \"ActionsDropDown\",\n\n  propTypes: {\n    dropdown_id: React.PropTypes.string,\n    lazy_options: React.PropTypes.func,\n    onShow: React.PropTypes.func,\n    onHide: React.PropTypes.func,\n    default_option: React.PropTypes.oneOf([\"first\",\"last\"])\n  },\n\n  getDefaultProps() {\n    return {\n      onShow: _.noop,\n      onHide: _.noop,\n      onItemSelect: _.noop,\n      button_class: \"aui-button aui-button-subtle aui-dropdown2-trigger-arrowless\",\n      default_option: \"first\"\n    };\n  },\n\n  shouldComponentUpdate() {\n    // We don't want this component to update after its initial render, as it's DOM is mutated by the\n    //  drop down component\n    return false;\n  },\n\n  componentDidMount() {\n    // Listen to show / hide events as these let us update the application state\n    this._getContainer().on(\"aui-dropdown2-hide\", this._onDismiss);\n    this._getContainer().on(\"aui-dropdown2-show\", this._onShow);\n  },\n\n  componentWillUnmount() {\n    this._getContainer().off();\n    $(window).off(\"resize\", this._dismiss);\n    AppDispatcher.unregister(\"dismiss-active-actions-dropdown\", this._dismiss);\n  },\n\n  render(){\n    return (\n      <div className=\"hc-dropdown\">\n        {this._renderTrigger()}\n        {this._renderContainer()}\n      </div>\n    );\n  },\n\n  _onShow() {\n    let trigger = this._getTrigger();\n    let container = this._getContainer();\n\n    // Manually render menu items if we are using deferred rendering\n    //  as DOM has already been modified by AUI DropDown\n    if (this.props.lazy_options) {\n      ReactDOM.render(\n        this._renderOptions(),\n        container[0]);\n    }\n\n    //If too close to bottom, float above '...' menu. This case is handled better in AUI\n    //   5.8, so we should remove this when that becomes available TODO: HC-19161\n    if (($('body').height() < container.position().top + container.height()) || this.props.location === \"above\") {\n      container.css(\"top\", container.position().top - container.outerHeight() - trigger.outerHeight() + \"px\");\n      container.addClass(\"hc-dropdown-above\");\n      trigger.addClass(\"hc-dropdown-above\");\n    }\n\n    if (this.props.location_horizontal === \"left\") {\n      container.css(\"left\", trigger.offset().left + trigger.outerWidth() - container.outerWidth());\n    }\n\n    // If the user scrolls, we want to dismiss the popup for now\n    AppDispatcher.registerOnce(\"dismiss-active-actions-dropdown\", this._dismiss);\n    $(window).one(\"resize\", this._dismiss);\n\n    if (this.props.default_option === \"last\") {\n      container.one(\"aui-dropdown2-item-selected\", () => {\n        container.find(\".active.aui-dropdown2-active\").removeClass(\"active aui-dropdown2-active\");\n        container.find(\"a\").last().addClass(\"active aui-dropdown2-active\");\n      });\n    }\n\n    this.props.onShow();\n  },\n\n  _onDismiss() {\n    var container = this._getContainer();\n    let trigger = this._getTrigger();\n\n    container.removeAttr('style');\n    container.removeClass(\"hc-dropdown-above\");\n    trigger.removeClass(\"hc-dropdown-above\");\n\n    // Unregister the is scrolling listener in case it wasn't the bit that triggered this dismiss\n    $(window).off(\"resize\", this._dismiss);\n    AppDispatcher.unregister(\"dismiss-active-actions-dropdown\", this._dismiss);\n\n    // Remove all menu items\n    if (this.props.lazy_options) {\n      ReactDOM.unmountComponentAtNode(container[0]);\n    }\n\n    this.props.onHide();\n  },\n\n  _renderContainer() {\n    var options;\n    if (!this.props.lazy_options) {\n      options = this._renderOptions();\n    }\n\n    return (\n      <div className=\"aui-style-default aui-dropdown2 hc-dropdown-container\" id={this.props.dropdown_id} aria-hidden=\"true\">\n        {options}\n      </div>\n    );\n  },\n\n  _renderTrigger() {\n    return (\n      <button className={\"hc-dropdown-trigger aui-dropdown2-trigger \" + this.props.button_class}\n                     aria-owns={this.props.dropdown_id}\n                     aria-haspopup=\"true\"\n                     data-container={this.props.container}\n                     id={this.props.dropdown_id + \"-trigger\"}\n                     data-no-focus>\n        <span className={\"aui-icon aui-icon-small \" + this.props.icon}></span>\n      </button>\n    );\n  },\n\n  _renderOptions() {\n    var options = this.props.children;\n\n    if (this.props.lazy_options) {\n      options = this.props.lazy_options();\n    }\n\n    return (\n      <div className=\"aui-dropdown2-section\">\n        {options}\n      </div>\n    );\n  },\n\n  _getContainer() {\n    // TODO: HC-20466 - use $ instead of AJS.$ when we consolidate jquery instances\n    return AJS.$(\"#\" + this.props.dropdown_id);\n  },\n\n  _getTrigger() {\n    // TODO: HC-20466 - use $ instead of AJS.$ when we consolidate jquery instances\n    return AJS.$(\"#\" + this.props.dropdown_id + \"-trigger\");\n  },\n\n  _dismiss() {\n    this._getTrigger().trigger(\"aui-button-invoke\");\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/actions_dropdown/actions_dropdown.js\n **/","var IntegrationsActions = require('actions/integrations_actions');\n\nmodule.exports = React.createClass({\n\n  displayName: \"ActionsDropDownItem\",\n\n  propTypes: {\n    msg: React.PropTypes.shape({\n      mid: React.PropTypes.string,\n      room: React.PropTypes.string\n    }),\n    action: React.PropTypes.shape({\n      addon_key: React.PropTypes.string,\n      full_key: React.PropTypes.string,\n      key: React.PropTypes.string,\n      target: React.PropTypes.shape({\n        key: React.PropTypes.string\n      })\n    }),\n    action_type: React.PropTypes.string\n  },\n\n  componentDidMount: function () {\n    // Manually attach event listener, as event is triggered from AUI\n    ReactDOM.findDOMNode(this.refs.element).addEventListener(\"click\", this._onClick);\n  },\n\n  componentWillUnmount: function () {\n    ReactDOM.findDOMNode(this.refs.element).removeEventListener(\"click\", this._onClick);\n  },\n\n  render() {\n    let action = this.props.action;\n\n    return <li key={action.full_key}>\n      <a ref=\"element\"\n         data-addon_key={action.addon_key}\n         data-action_key={action.key}>\n        {action.name}\n      </a>\n    </li>;\n  },\n\n  _onClick() {\n    IntegrationsActions.invokeAction(this.props.action, {msg: this.props.msg});\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/actions_dropdown/integration_dropdown_action.js\n **/","import strings from 'strings/chat_input_strings';\nimport MessageActions from 'actions/message_actions';\n\nexport default React.createClass({\n\n  displayName: \"EditMessage\",\n\n  propTypes: {\n    msg: React.PropTypes.shape({\n      mid: React.PropTypes.string,\n      room: React.PropTypes.string,\n      body: React.PropTypes.string\n    })\n  },\n\n  render() {\n    return <a title={strings.edit_message} onClick={this._onClick}>\n             {strings.edit_message}\n           </a>;\n  },\n\n  _onClick() {\n    MessageActions.initiateMessageEdit(this.props.msg);\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_actions/edit_message.js\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\nexport default {\n\n  initiateMessageEdit: function(msg) {\n    AppDispatcher.dispatch('initiate-edit-message', msg);\n  },\n\n  initiateMessageDelete: function(msg) {\n    AppDispatcher.dispatch('initiate-delete-message', msg);\n  }\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/message_actions.js\n **/","import strings from 'strings/chat_input_strings';\nimport MessageActions from 'actions/message_actions';\n\nexport default React.createClass({\n\n  displayName: \"DeleteMessage\",\n\n  propTypes: {\n    msg: React.PropTypes.shape({\n      mid: React.PropTypes.string,\n      room: React.PropTypes.string,\n      body: React.PropTypes.string\n    })\n  },\n\n  render() {\n    return <a title={strings.delete_message} onClick={this._onClick}>\n             {strings.delete_message}\n           </a>;\n  },\n\n  _onClick() {\n    MessageActions.initiateMessageDelete(this.props.msg);\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_actions/delete_message.js\n **/","import cx from 'classnames';\nimport ChatWindowActions from 'actions/chat_window_actions';\n\nexport default React.createClass({\n\n  displayName: \"AttachedCardsToggle\",\n\n  propTypes: {\n    mid: React.PropTypes.string,\n    collapsed: React.PropTypes.bool\n  },\n\n  _onToggle() {\n    ChatWindowActions.toggleAttachedCards(this.props.mid);\n  },\n\n  render() {\n    let collapsed = this.props.collapsed;\n    let classes = cx({\n      \"toggle-attached\": true,\n      \"expand\": collapsed,\n      \"collapse\": !collapsed\n    });\n    let toggleText = collapsed ? \"Show card\" : \"Hide card\";\n\n    return <div className=\"toggle-attached-container\" title={toggleText} onClick={this._onToggle}>\n      <span className={classes}>{toggleText}</span>\n    </div>;\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/attached_cards_toggle.js\n **/","import video_utils from 'helpers/video_utils';\nimport VideoActions from 'actions/video_actions';\n\nexport default React.createClass({\n\n  displayName: \"ChatWindowMessageWrapper\",\n\n  _onClick(evt) {\n    let isLink = _.get(evt, 'target.tagName', '').toLowerCase() === 'a';\n    let url = _.get(evt, 'target.href', null);\n    let jid = this.props.msg.room;\n    let room_id = this.props.chat_id;\n\n    if (!this.props.is_guest && isLink && !!url && video_utils.isVideoLink(url)) {\n      evt.preventDefault();\n      VideoActions.joinRoomVideoCall({ url, jid, room_id });\n    }\n  },\n\n  render() {\n    let msgRef,\n        msgClasses;\n\n    if (this.props.messageStatus === 'failed') {\n      msgRef = 'failed_message';\n      msgClasses = 'msg-status msg-failed';\n    } else if (this.props.messageStatus === 'flaky') {\n      msgRef = 'flaky_message';\n      msgClasses = 'msg-status msg-fail-container msg-flaky hc-msg-loading';\n    } else if (this.props.messageStatus === 'unconfirmed') {\n      msgRef = 'unconfirmed_message';\n      if (this.props.honest_messages_enabled) {\n        msgClasses = 'msg-status msg-unconfirmed';\n      } else {\n        msgClasses = 'msg-status msg-confirmed';\n      }\n    } else {\n      msgRef = 'confirmed_message';\n      if (this.props.msg.type === 'file') {\n        msgClasses = 'msg-status msg-confirmed hc-msg-file';\n      } else {\n        msgClasses = 'msg-status msg-confirmed';\n      }\n    }\n\n    return (\n      <div ref={msgRef} onClick={this._onClick} className={msgClasses}>\n        {this.props.innerMessage}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_window/message_wrapper.js\n **/","/*global HC*/\nimport utils from 'helpers/utils';\nimport moment from'moment';\nimport DAL from 'core/dal';\nimport Store from 'lib/core/store';\nimport PreferencesStore from \"./preferences_store\";\nimport AppDispatcher from \"dispatchers/app_dispatcher\";\nimport AnalyticsDispatcher from \"dispatchers/analytics_dispatcher\";\nimport appConfig from'config/app_config';\nimport logger from 'helpers/logger';\nimport NetworkStatusHelper from 'helpers/network_status_helper';\nimport { smileys as allSmileys } from 'helpers/emoticons';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport { uiAvailablePromise } from 'helpers/analytics';\n\nfunction deepFreeze(o) {\n  if (!Object.isFrozen(o)) {\n    Object.freeze(o);\n  }\n\n  if (_.isArray(o)) {\n    o.forEach(deepFreeze);\n  } else if (_.isObject(o)) {\n    _.forOwn(o, deepFreeze);\n  }\n\n  return o;\n}\n\nconst NoMessages = deepFreeze([]);\n\n/*\n * Create message clone with updated fields.\n *\n * @param {Object} msg source message\n * @param {Object|Function} patch object with new message fields or function which returns such object.\n * @returns {Object} cloned message with updated fields.\n */\nfunction patchMsg(msg, patch) {\n  if (_.isFunction(patch)) {\n    patch = patch(msg);\n  }\n  return _.defaultsDeep({}, patch, msg);\n}\n\nfunction sortingIdentity(msg) {\n  return [ msg.sortTime || msg.time, msg.time ];\n}\n\nfunction insertSortedMsg(messages, msg) {\n  let pos = _.sortedLastIndexBy(messages, msg, sortingIdentity);\n  messages.splice(pos, 0, msg);\n}\n\nfunction patchMsgByMid(chat, mid, patch) {\n  let pos = _.findIndex(chat.messages, {mid});\n  if (pos === -1) {\n    return undefined;\n  }\n\n  let original = chat.messages[pos];\n  let patched = patchMsg(original, patch);\n\n  let messages = _.clone(chat.messages);\n\n  if (original.time === patched.time) {\n    // replace old msg\n    messages.splice(pos, 1, patched);\n  } else {\n    // remove old msg\n    messages.splice(pos, 1);\n    // insert new one\n    insertSortedMsg(messages, patched);\n  }\n\n  deepFreeze(messages);\n\n  chat.messages = messages;\n\n  return patched;\n}\n\nconst emoticonsRegExp = /\\([a-z0-9]*\\)/gi;\n\nexport function hasEmoticons(str) {\n  emoticonsRegExp.lastIndex = 0;\n  return (emoticonsRegExp.test(str) ||\n    !!_.findKey(allSmileys, smiley => {\n      smiley.regex.lastIndex = 0;\n      return smiley.regex.test(str);\n    }));\n}\n\nexport function sortMessages(messages) {\n  return _.sortBy(messages, sortingIdentity);\n}\n\nfunction isIgnoredMessage (msg) {\n  return msg.is_presence_message || msg.is_missed_call_message || _.includes(['unconfirmed', 'failed', 'flaky'], msg.status);\n}\n\nexport function withoutManufacturedMessages(messages) {\n  return _.reject(messages, isIgnoredMessage);\n}\n\nexport function getMessageCountToPreserveInBg(chat, messages) {\n  let unreadMessagesCount = chat.unreadCount || 0;\n\n  if (chat.isScrolledToBottom) {\n    return appConfig.chat_room_trim_buffer + unreadMessagesCount;\n  }\n\n  let visibleMsgsCount = messages.length - _.findLastIndex(messages, {mid: chat.oldestVisibleMessageMid});\n  return appConfig.chat_room_trim_buffer + unreadMessagesCount + visibleMsgsCount;\n}\n\nexport function getMessageCountToPreserve(chat, messages) {\n  if (chat.isScrolledToBottom && messages.length > appConfig.chat_room_trim_buffer) {\n    return messages.length - 1;\n  }\n\n  return messages.length;\n}\n\nexport function addSortTime(msg, lookupMessageByMid, attach_reordering_enabled = false) {\n  if (!attach_reordering_enabled) {\n    // not enabled\n    return;\n  }\n\n  if(msg.sortTime) {\n    // previously done\n    return;\n  }\n\n  let attachTo = utils.getAttachToMid(msg);\n  if(!attachTo) {\n    return;\n  }\n\n  let parent = lookupMessageByMid(attachTo);\n  if(parent) {\n    msg.sortTime = parent.time;\n\n    // Original times are in seconds\n    var deltaMins = (msg.time - parent.time) / 60;\n    if(deltaMins > appConfig.notification_attach_to_reorder_limit_mins) {\n      // Outside the allowed send window, don't reorder the notification\n      msg.sortTime = msg.time;\n    }\n  }\n}\n\nexport function addNewMessages(messages, newMessages, attach_reordering_enabled = false) {\n  if (!newMessages.length) {\n    return messages;\n  }\n\n  let result = _.clone(messages);\n\n  let newMessagesByMid = null;\n  let messagesByMid = null;\n\n  /**\n   * Finds a message by it's mid in newMessages, or if not found messages.\n   *\n   * Will lazily initialise the mapping from mid to message to avoid doing it if not required.\n   *\n   * @param mid\n   * @return the found message, if not undefined\n   */\n  function lookupMessageByMid(mid) {\n    let msg;\n\n    if(!newMessagesByMid) {\n      newMessagesByMid = _.keyBy(newMessages, 'mid');\n    }\n\n    msg = newMessagesByMid[mid];\n\n    if(!msg) {\n      if(!messagesByMid) {\n        messagesByMid = _.keyBy(messages, 'mid');\n      }\n\n      msg = messagesByMid[mid];\n    }\n\n    return msg;\n  }\n\n  // insert new messages using binary search\n  newMessages.forEach(function (msg) {\n    addSortTime(msg, lookupMessageByMid, attach_reordering_enabled);\n\n    // check if there is already message with such mid\n    let pos = _.findIndex(result, {mid: msg.mid});\n    if (pos > -1) { // if yes then replace it with new instance\n      result.splice(pos, 1, msg);\n    } else { // if no then just add new message\n      insertSortedMsg(result, msg);\n    }\n  });\n\n  return result;\n}\n\nclass ChatWindowStore extends Store {\n  constructor() {\n\n    super();\n\n    this.local = {\n      should_queue_changes: {},\n      queued_messages: {},\n      echoed_chats: {},\n      replacement_messages: {},\n      flaky_network_failed_timestamp: false,\n      flaky_network_recoverable_timestamp: false,\n      failed_messages: [],\n      messages_timers: {},\n      history_timers: {}\n    };\n  }\n\n  getNowTimestamp(){\n    var now = Date.now() / 1000;\n    return utils.format_time_for_history(now);\n  }\n\n  getChatDefaults(){\n     return {\n       name: '',\n       jid: '',\n       messages: [],\n       oldest_timestamp: '',\n       newest_timestamp: this.getNowTimestamp(),\n       oldest_mid: '',\n       newest_mid: '',\n       scrollTop: '',\n       isScrolledToBottom: true,\n       active: false,\n       fully_initialized: false,\n       fetching_recent: false,\n       fetching_ancient: false,\n       ancient_history_is_empty: false,\n       has_no_message_history: false,\n       should_scroll_to_bottom: true,\n       ancient_msgs: {},\n       recent_msgs: {},\n       is_composing: false,\n       last_active: false,\n       has_been_cleared: false\n     };\n  }\n\n  getDefaults() {\n    return {\n      current_user: {},\n      chats: {},\n      active_chat: false,\n      active_chat_changed_token: null,\n      mentionRegex: null,\n      emoticons: {},\n      preferences: {},\n      initialized: false,\n      replace_text_emoticons: PreferencesStore.shouldReplaceTextEmoticons(),\n      chat_show_sidebar: PreferencesStore.shouldShowChatSidebar(),\n      groupchat_show_sidebar: PreferencesStore.shouldShowGroupChatSidebar(),\n      zoom_level: 1,\n      web_server: ''\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'hc-init': () => {\n        this.set('active_chat', PreferencesStore.getChatToFocus());\n      },\n      'initialize-chat-window-store': (data) => {\n        this.set(data);\n      }\n    });\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.set({\n          attach_reordering_enabled: _.get(config, 'feature_flags.web_client_attach_to_message_reorder_enabled'),\n          honest_messages_enabled: _.get(config, 'feature_flags.web_client_honest_messages')\n        });\n      },\n      'updated:emoticons': (emoticons) => {\n        this.updateEmoticons(emoticons);\n      },\n      'updated:web_server': (server) => {\n        this.data.web_server = server;\n      },\n      'updated:current_user': (user) => {\n        this.data.current_user.user_jid = user.user_jid;\n        this.data.current_user.is_guest = user.is_guest;\n      },\n      'updated:mentionRegex': (regex) => {\n        this.data.mentionRegex = regex;\n      },\n      'updated:activeRooms': (rooms) => {\n        this.updateRooms(rooms);\n      },\n      'updated:newMessages': (messages) => {\n        this.updateChatMessages(messages);\n      },\n      'updated:preferences': (newPreferences) => {\n        this._onPreferencesUpdated(newPreferences);\n      },\n      'before:updated:active_chat': (jid) => {\n        let chat = this.data.chats[this.data.active_chat];\n        if (!chat) {\n          return;\n        }\n        if (jid !== this.data.active_chat) {\n          // if switching rooms, clear indicated last read\n          chat.last_read_indicated = null;\n        }\n        if (this.data.chats[this.data.active_chat].fully_initialized) {\n          this.flushQueue(this.data.active_chat);\n          this.updateMessageBounds(chat);\n          chat.last_active = new Date();\n        }\n      },\n      'updated:active_chat': (jid) => {\n        if (utils.jid.is_chat(jid) && this.data.chats[jid] && this.data.initialized) {\n          this.handleRoomSelect(jid);\n        } else {\n          this.set('active_chat', jid);\n        }\n        AppDispatcher.dispatch('close-file-viewer');\n      },\n      'send-message': (data) => {\n        this.data.chats[data.jid].should_scroll_to_bottom = true;\n        if (!this.data.chats[data.jid].fetching_ancient) {\n          this.flushQueue(data.jid);\n        }\n      },\n      'upload-file': (data) => {\n        this.data.chats[data.jid].should_scroll_to_bottom = true;\n      },\n      'toggle-image': (data) => {\n        this.toggleImage(data.jid, data.mid);\n      },\n      'retry-failed-message': (msg) => {\n        this.resendMessage(msg);\n      },\n      'cancel-failed-message': (msg) => {\n        this.removeFailedMessage(msg);\n      },\n      'clear-messages': (data) => {\n        let chat = this.data.chats[data.jid];\n        if (chat) {\n          chat.messages = NoMessages;\n          chat.has_been_cleared = true;\n          this.updateChats(data.jid);\n        }\n      },\n      'app-state-ready': () => {\n        if (this.data.current_user.is_guest) {\n          this.data.chats[this.data.active_chat].fully_initialized = true;\n        }\n        this.set('initialized', true);\n        if (utils.jid.is_chat(this.data.active_chat)) {\n          this.handleRoomSelect(this.data.active_chat);\n        }\n      },\n      'readstate-received': () => {\n        if (utils.jid.is_chat(this.data.active_chat) && this.data.chats[this.data.active_chat]) {\n          this.handleRoomSelect(this.data.active_chat);\n        }\n      },\n      'initial-join-presence-sent': (data) => {\n        if (this.data.chats[data.jid] && data.with_history) {\n          this.initialJoinWithHistory(data.jid);\n          this.handleRoomSelect(data.jid);\n        }\n      },\n      'set-scroll-value': (data) => {\n        _.assign(this.data.chats[data.jid], {\n          scrollTop: data.scrollTop,\n          isScrolledToBottom: data.isScrolledToBottom,\n          should_scroll_to_bottom: data.should_scroll_to_bottom\n        });\n      },\n      'message-media-loaded': (data) => {\n         if (!this.data.chats[data.jid]){\n           logger.type('message-media-loaded').error('Room is not found', data.jid);\n           return;\n         }\n         let msg = patchMsgByMid(this.data.chats[data.jid], data.mid, {\n           media_loaded: true\n         });\n        if (msg) {\n            this.updateChats(msg.room);\n         }\n      },\n      'message-media-size-found': (data) => {\n        if (!this.data.chats[data.jid]){\n          logger.type('message-media-size-found').error('Room is not found', data.jid);\n          return;\n        }\n        let msg = patchMsgByMid(this.data.chats[data.jid], data.mid, {\n          media_sizes: {\n            [data.src]: data.size\n          }\n        });\n        if (msg) {\n          this.updateChats(msg.room);\n        }\n      },\n      'display-message-action': (data) => {\n        var chat = _.get(this.data.chats, data.jid, {});\n        var should_scroll_to_bottom = chat.should_scroll_to_bottom;\n        var message_action_active = chat.message_action_active || false;\n        var next_state = {should_scroll_to_bottom: should_scroll_to_bottom, message_action_active: message_action_active};\n\n        var states = _.get(chat, \"message_action_previous_state\", []);\n        states.push(next_state);\n\n        _.assign(this.data.chats[data.jid], {\n          should_scroll_to_bottom: false,\n          isScrolledToBottom: false,\n          message_action_active: true,\n          message_action_previous_state: states\n        });\n      },\n      'hide-message-action': (data) => {\n        var chat = _.get(this.data.chats, data.jid, {});\n        var previous_states = _.get(chat, \"message_action_previous_state\", [{\n          should_scroll_to_bottom: chat.should_scroll_to_bottom,\n          message_action_active: false\n        }]);\n\n        var previous_state = previous_states.pop();\n        var should_scroll_to_bottom = previous_state.should_scroll_to_bottom;\n        var message_action_active = previous_state.message_action_active;\n\n        _.assign(this.data.chats[data.jid], {\n          should_scroll_to_bottom: should_scroll_to_bottom,\n          message_action_active: message_action_active,\n          message_action_previous_state: previous_states\n        });\n\n        // Force chat to bottom if was previously at bottom of screen\n        this.updateChats(data.jid);\n      },\n      'chat-is-scrolling': (data) => {\n        this.local.should_queue_changes[data.jid] = data.scrolling;\n        if (!data.scrolling) {\n          this.flushQueue(data.jid);\n        }\n      },\n      'requesting-ancient-history': (data) => {\n        if (!this.data.current_user.is_guest) {\n          this.fetchXMPPHistory(data.jid);\n        }\n      },\n      'network-down': () => {\n        this.local.flaky_network_failed_timestamp = utils.now() + DAL.Connection.getSessionRecoveryTime();\n        this.local.flaky_network_recoverable_timestamp = utils.now() + appConfig.flaky_network_message_timeout;\n      },\n      'network-up': () => {\n        this.local.flaky_network_failed_timestamp = false;\n        this.local.flaky_network_recoverable_timestamp = false;\n      },\n      'strophe-reconnected': () => {\n        //after strophe reconnects, we need to defer this until after the config is updated due to the startup iq coming in\n        AppDispatcher.registerOnce('after:updated:config', () => {\n          AppDispatcher.dispatch('hide-join-messages');\n          this.local.flaky_network_failed_timestamp = false;\n          this.local.flaky_network_recoverable_timestamp = false;\n          if (!this.data.current_user.is_guest) {\n            _.forEach(_.filter(this.data.chats, 'fully_initialized'), (room) => {\n              this.fetchAPIHistory(room.jid);\n            });\n\n            _.forEach(this.data.chats, (room) => {\n              if (room.fetching_ancient) {\n                this.fetchXMPPHistory(room.jid, true);\n              }\n            });\n\n            if (utils.jid.is_chat(this.data.active_chat) && this.data.chats[this.data.active_chat] && !this.data.chats[this.data.active_chat].fully_initialized) {\n              this.fetchXMPPHistory(this.data.active_chat, true);\n            }\n          }\n        });\n      },\n      'show-empty-state': (data) => {\n        this.data.chats[data.jid].ancient_history_is_empty = true;\n        this.updateChats(data.jid);\n      },\n      'status-message-received': (data) => {\n        this.handleUserStateMessage(data);\n      },\n      'replacement-message-received': (data) => {\n        if (this.local.replacement_messages[data.jid]) {\n          this.local.replacement_messages[data.jid].push(data);\n        } else {\n          this.local.replacement_messages[data.jid] = [data];\n        }\n      },\n      'set-chat-panel-zoom': (data) => {\n        this.set({\n          zoom_level: data.zoom\n        });\n      },\n      'toggle-attached-cards': (anchor_mid) => {\n        this.toggleAttachedCards(anchor_mid);\n      },\n      'before:API:fetched-recent-history': (data) => {\n        let chat = this.data.chats[data.jid];\n        if (chat) {\n          // Blow away all messages if the fetched messages begin with a mid that we haven't received yet\n          if (data.mid && _.map(data.results, 'id').indexOf(data.mid) === -1) {\n            this.removeChatMessages(data.jid);\n          }\n        }\n      },\n      'API:fetched-recent-history': (data) => {\n        this.handleRecentHistoryFetched(data);\n      },\n      'get-last-message-sent-by-current-user': (data) => {\n        data.cb(this.getLastSentMessageByCurrentUser(data.jid));\n      },\n      'get-public-url-from-thumbnail': (url, jid, cb) => {\n        this.getPublicUrlFromThumbnail(url, jid, cb);\n      }\n    });\n  }\n\n  updateEmoticons(emoticons) {\n    this.data.emoticons = emoticons;\n  }\n\n  getPublicUrlFromThumbnail(url, jid, cb) {\n    let file = null;\n    let fileUrl = null;\n    let activeChat = this.get('chats')[jid];\n    let messages = activeChat && activeChat.messages || [];\n\n    for (let message of messages) {\n      if(message.file_data && message.file_data.preview_thumbnail) {\n        if(message.file_data.preview_thumbnail.src === url) {\n          file = message.file_data;\n          break;\n        }\n      }\n    }\n\n    if(file && file.is_authenticated) {\n      fileUrl = file.url;\n    }\n\n    cb(fileUrl);\n  }\n\n  updateRooms(rooms) {\n    var hasChanged,\n        jids = _.keys(rooms),\n        deleted = _.difference(_.keys(this.data.chats), jids);\n\n    if (deleted.length) {\n      this.data.chats = _.omit(this.data.chats, deleted);\n      hasChanged = true;\n\n    } else {\n      _.forEach(jids, (jid) => {\n        if (this.data.chats[jid]) {\n          // Update Room Name\n          if (this.data.chats[jid].name !== rooms[jid].name) {\n            this.data.chats[jid].name = rooms[jid].name;\n            hasChanged = true;\n          }\n\n          _.assign(this.data.chats[jid], rooms[jid]);\n\n        } else {\n          this.data.chats[jid] = _.assign({}, this.getChatDefaults(), {\n            name: rooms[jid].name,\n            jid: jid,\n            active: jid === this.data.active_chat,\n            last_active: new Date()\n          });\n          this.data.chats[jid].messages = NoMessages;\n          hasChanged = true;\n        }\n      });\n    }\n\n    if (hasChanged) {\n      this.set({\n        chats: this.data.chats,\n        active_chat_changed_token: {}\n      });\n    }\n  }\n\n  handleRoomSelect(jid) {\n    var chat = this.data.chats[jid];\n    if ((!chat.fully_initialized || chat.newest_mid === \"\")\n      && !chat.has_no_message_history\n      && !this.data.current_user.is_guest) {\n      this.fetchXMPPHistory(jid);\n    }\n    this.updateMessageBounds(chat);\n\n    let messages = chat.messages;\n\n    // only update last read if user is switching chats\n    if (jid !== this.data.active_chat) {\n      chat.messages = this.updateLastReadForMessages(chat);\n      this.data.active_chat = jid;\n    }\n\n    // if messages array changed then freeze it again\n    if (messages !== chat.messages) {\n      deepFreeze(chat.messages);\n    }\n\n    if (!chat.has_been_cleared) {\n      this.checkIfEmpty(jid);\n    }\n\n    this.updateAncientHistoryMarker(jid);\n    this.updateChats(jid);\n  }\n\n  updateLastReadForMessages(chat) {\n    let messages = [];\n\n    // only set last_read_indicated if last_read_message and most_recent_message are not the same\n    if (_.get(chat, 'last_read_message.mid') !== _.get(chat, 'most_recent_message.mid')) {\n      chat.last_read_indicated = _.clone(chat.last_read_message);\n    }\n\n    chat.messages.forEach((currentMsg, index, arr) => {\n      let currentMsgTime = Number(currentMsg.ts) || Number(currentMsg.time);\n      let nextMsg = arr[index + 1];\n      let nextMsgTime = null;\n      let lastReadIndicatedTime = _.get(chat, 'last_read_indicated.timestamp');\n      if (nextMsg) {\n        nextMsgTime = Number(nextMsg.ts) || Number(nextMsg.time);\n      }\n      // clear previous last_read_message on message\n      if (_.get(currentMsg, 'last_read_message')) {\n        currentMsg = patchMsg(currentMsg, { last_read_message: false });\n      }\n      if (lastReadIndicatedTime >= currentMsgTime &&\n          nextMsg &&\n          lastReadIndicatedTime < nextMsgTime) {\n        // if there is an attached message update the last_read_indicated so it will appear after it\n        if (_.get(nextMsg, 'attach-to.id') === currentMsg.mid) {\n          chat.last_read_indicated = {\n            mid: nextMsg.mid,\n            timestamp: nextMsg.ts\n          };\n        } else {\n          return messages.push(patchMsg(currentMsg, { last_read_message: true }));\n        }\n      }\n      return messages.push(currentMsg);\n    });\n\n    return messages;\n  }\n\n  updateMessageBounds(chat) {\n    if (_.isEmpty(chat.messages)) {\n      this.resetMessageBounds(chat);\n      return;\n    }\n\n    let messages = withoutManufacturedMessages(chat.messages);\n\n    if (!messages.length) {\n      return;\n    }\n\n    let first = _.head(messages),\n        last = _.last(messages);\n\n    _.assign(chat, {\n      newest_timestamp: utils.format_time_for_history(last.time),\n      newest_mid: last.mid.split('-link')[0],\n      oldest_timestamp: utils.format_time_for_history(first.time),\n      oldest_mid: first.mid.split('-link')[0]\n    });\n  }\n\n  resetMessageBounds(chat) {\n    _.assign(chat, {\n      oldest_timestamp: '',\n      newest_timestamp: this.getNowTimestamp(),\n      oldest_mid: '',\n      newest_mid: ''\n    });\n  }\n\n  trimMessages(chat) {\n    var messages = withoutManufacturedMessages(chat.messages),\n        numMessagesToPreserve,\n        numMessagesToDelete;\n\n    if (this.chatIsBackgrounded(chat.jid)) {\n      numMessagesToPreserve = getMessageCountToPreserveInBg(chat, messages);\n    } else {\n      numMessagesToPreserve = getMessageCountToPreserve(chat, messages);\n    }\n    numMessagesToDelete = messages.length - numMessagesToPreserve;\n\n    if (numMessagesToDelete > 0) {\n      let messagesToDelete = _.take(messages, numMessagesToDelete);\n      return _.without(chat.messages, ...messagesToDelete);\n    }\n\n    return chat.messages;\n  }\n\n  chatIsBackgrounded(jid) {\n    var chat = this.getChat(jid);\n    var idleMinutesAgo = moment().subtract(appConfig.chat_room_idle_timeout_minutes, 'minutes');\n    return chat && chat.jid !== this.data.active_chat && chat.last_active !== false && moment(chat.last_active).isBefore(idleMinutesAgo);\n  }\n\n  getChat(jid) {\n    return this.data.chats[jid];\n  }\n\n  updateChatMessages(chats) {\n    var chat;\n    _.forEach(chats, (messages, jid) => {\n      chat = this.data.chats[jid];\n      if (chat) {\n        var chat_is_backgrounded_and_empty = (jid !== this.data.active_chat && _.isEmpty(chat.messages)),\n\n        // If the messages array is only join/leave messages, this is false\n        contains_real_messages = _.reject(messages, 'is_presence_message').length;\n\n        if ((chat.fetching_ancient || chat_is_backgrounded_and_empty) && !chat.fetching_recent) {\n          _.merge(chat.ancient_msgs, messages);\n          if (chat_is_backgrounded_and_empty\n              && !HC.isEmbeddedComponent\n              && !this.data.current_user.is_guest\n              && contains_real_messages) {\n            this.fetchXMPPHistory(jid);\n          }\n        }\n        if (!(chat_is_backgrounded_and_empty && !contains_real_messages)) {\n          this.addMessages(jid, _.keyBy(messages, 'mid'));\n        }\n      }\n    });\n  }\n\n  _onPreferencesUpdated() {\n    let prefsObj = {\n      preferences: PreferencesStore.getAll()\n    };\n\n    //onShouldReplaceTextEmoticonsUpdated\n    if (this.get('replace_text_emoticons') !== PreferencesStore.shouldReplaceTextEmoticons()){\n      prefsObj['replace_text_emoticons'] = PreferencesStore.shouldReplaceTextEmoticons();\n      prefsObj['chats'] = this._getFormattedChats();\n    }\n\n    //onOtherPreferencesUpdated\n    prefsObj['chat_show_sidebar'] = PreferencesStore.shouldShowChatSidebar();\n    prefsObj['groupchat_show_sidebar'] = PreferencesStore.shouldShowGroupChatSidebar();\n\n    this.set(prefsObj);\n  }\n\n  _getFormattedChats() {\n    let chats = _.clone(this.get('chats')),\n      messages,\n      formattedMessages,\n      formatter = function (result, message) {\n        let patchedMsg = message;\n\n        if (hasEmoticons(message.body)) {\n          patchedMsg = patchMsg(message, {\n            rendered_body: utils.escapeAndLinkify(message.body, {\n              do_emoticons: PreferencesStore.shouldReplaceTextEmoticons()\n            })\n          });\n        }\n        result.push(patchedMsg);\n\n        return result;\n      };\n\n    _.forOwn(chats, function (chat, chatId) {\n      messages = chat.messages;\n      formattedMessages = messages ? messages.reduce(formatter, []) : [];\n      chat.messages = formattedMessages;\n      chats[chatId] = chat;\n    });\n\n    return chats;\n  }\n\n  removeChatMessages(jid) {\n    var chat = this.data.chats[jid];\n\n    if (chat) {\n      chat.messages = NoMessages;\n      chat.hasMessages = false;\n      this.resetMessageBounds(chat);\n      this.updateChats(jid);\n    }\n  }\n\n  scheduleConfirmationFailed(chat, message) {\n    if (!chat || !_.includes(['unconfirmed', 'failed'], message.status)) {\n      return;\n    }\n\n    let timers = this.local.messages_timers[chat.jid] || {};\n    this.local.messages_timers[chat.jid] = timers;\n    let msgTimers = timers[message.mid] || {};\n    timers[message.mid] = msgTimers;\n\n    if (!msgTimers.failed_timer) {\n      let delay = this.local.flaky_network_failed_timestamp ? this.local.flaky_network_failed_timestamp - utils.now() : appConfig.default_message_confirmation_timeout;\n\n      if (!NetworkStatusHelper.isOnline() || !DAL.isConnected()) {\n        // cause message to immediately fail if we are not connected/online\n        delay = 0;\n      }\n\n      msgTimers.failed_timer = setTimeout(() => {\n        let msg = patchMsgByMid(chat, message.mid, {status: 'failed'});\n        if (msg) {\n          this.cancelMessageTimers(chat.jid, message.mid);\n          this.local.failed_messages.push(msg);\n          this.updateChats(msg.room);\n        }\n      }, delay);\n    }\n    if (!msgTimers.flaky_timer && !this.data.honest_messages_enabled) {\n      let delay = this.local.flaky_network_recoverable_timestamp ? this.local.flaky_network_recoverable_timestamp - utils.now() : appConfig.flaky_network_message_timeout;\n      msgTimers.flaky_timer = setTimeout(() => {\n        let msg = patchMsgByMid(chat, message.mid, {status: 'flaky'});\n        if (msg) {\n          this.cancelMessageTimers(chat.jid, message.mid, 'flaky_timer');\n          this.updateChats(msg.room);\n        }\n      }, delay);\n    }\n  }\n\n  cancelMessageTimers(jid, mid, timer_name) {\n    let timers = this.local.messages_timers[jid];\n    if (!timers) {\n      return;\n    }\n\n    let msgTimers = timers[mid];\n    if (!msgTimers) {\n      return;\n    }\n\n    if (timer_name) {\n      clearTimeout(msgTimers[timer_name]);\n      msgTimers[timer_name] = undefined;\n    } else {\n      clearTimeout(msgTimers.failed_timer);\n      clearTimeout(msgTimers.flaky_timer);\n      delete timers[mid];\n    }\n  }\n\n  removeFailedMessage(msg) {\n    let chat = _.get(this.data, ['chats', msg.room]);\n    if (!chat) {\n      return;\n    }\n    let shouldUpdate = this.maybeRemoveMsg(chat, msg.mid);\n    _.remove(this.local.failed_messages, {mid: msg.mid});\n\n    if (shouldUpdate) {\n      this.updateChats(msg.room);\n    }\n  }\n\n  resendMessage(msg) {\n    AppDispatcher.dispatch('resend-message', {\n      text: msg.original_body || msg.body,\n      jid: msg.room,\n      id: msg.mid\n    });\n\n    let chat = this.data.chats[msg.room];\n    if (!chat) {\n      return;\n    }\n\n    //When reattempting a send on a failed message, we want to put it to the bottom of the chat\n    let newTime = _.last(chat.messages).time + 1;\n\n    patchMsgByMid(chat, msg.mid, {status: 'unconfirmed', time: newTime});\n    this.scheduleConfirmationFailed(chat, msg);\n\n    this.updateChats(msg.room);\n  }\n\n  addMessages(jid, messages) {\n    let chat = this.data.chats[jid];\n    if (!chat || _.isEmpty(messages)) {\n      return;\n    }\n\n    chat.has_no_message_history = false;\n    chat.has_been_cleared = false;\n    if (this.local.should_queue_changes[jid]) {\n      let queued_messages = this.local.queued_messages[jid] || {};\n      this.local.queued_messages[jid] = _.merge(queued_messages, messages);\n      return;\n    }\n\n    _.forEach(messages, this.scheduleConfirmationFailed.bind(this, chat));\n\n    let currentMessages = chat.messages;\n\n    let echoedMessages = this.filterMessages(jid, messages);\n    if (echoedMessages.length) {\n      chat.messages = _.without(chat.messages, ...echoedMessages);\n    }\n\n    let newMessages = _.values(messages);\n\n    this.removeOldPresenceMessages(chat, newMessages);\n\n    chat.messages = addNewMessages(chat.messages, newMessages, this.data.attach_reordering_enabled);\n\n    if (this.chatIsBackgrounded(jid)) {\n      chat.messages = this.trimMessages(chat);\n    }\n\n    chat.messages = this.replaceMessageContent(jid);\n\n    let newest_mid = chat.newest_mid;\n\n    this.updateMessageBounds(chat);\n\n    if (jid !== this.get('active_chat') && newest_mid !== chat.newest_mid) {\n      chat.should_scroll_to_bottom = true;\n    }\n\n    if (!this.chatIsBackgrounded(jid) && chat.fetching_ancient) {\n      chat.messages = this.updateLastReadForMessages(chat);\n    }\n\n    // if messages array changed then freeze it again\n    if (currentMessages !== chat.messages) {\n      deepFreeze(chat.messages);\n    }\n\n    if (chat.fully_initialized) {\n      chat.hasMessages = true;\n      chat.fetching_recent = false;\n      chat.fetching_ancient = false;\n      this.updateChats(jid);\n    }\n  }\n\n  flushQueue(jid) {\n    this.local.should_queue_changes[jid] = false;\n    this.addMessages(jid, this.local.queued_messages[jid]);\n    this.local.queued_messages[jid] = {};\n  }\n\n  updateChats(jid) {\n    if (this.data.chats[jid]) {\n      var updates = {\n        chats: this.data.chats,\n        active_chat: this.data.active_chat\n      };\n\n      if (jid === this.data.active_chat) {\n        // active_chat_changed_token is used as a proxy (checking reference equality) to know if active_chat data changed\n        // and avoid re-rendering chat_panel if it didn't\n        updates[\"active_chat_changed_token\"] = {};\n      }\n      this.set(updates);\n    }\n  }\n\n  handleUserStateMessage(data) {\n    var jid = utils.jid.bare_jid(data.message.from),\n        chat = this.data.chats[jid],\n        user = utils.jid.bare_jid(_.get(data, 'message.delay.from_jid')) || utils.jid.bare_jid(_.get(data, 'message.from'));\n    if (chat && user) {\n      switch (data.type) {\n      case 'active':\n        if (user !== this.data.current_user.user_jid) {\n          this.removeChatStateMessage(jid);\n          clearTimeout(this.local.composing_timeout);\n        }\n        break;\n      case 'composing':\n        if (user !== this.data.current_user.user_jid) {\n          var last_received = _.findLast(chat.messages, {mid: chat.newest_mid});\n          if (!last_received || data.message.ts - last_received.ts > 1) { //don't show composing message if it's been received less than a second from the last message\n            this.addChatStateMessage(jid);\n            clearTimeout(this.local.composing_timeout);\n            this.local.composing_timeout = setTimeout((user_jid) => {\n              this.removeChatStateMessage(user_jid);\n            }, appConfig.composing_message_linger_timeout, jid);\n          }\n        }\n        break;\n      default:\n        break;\n      }\n      this.updateChats(jid);\n    }\n  }\n\n  fetchAPIHistory(jid) {\n    if (this.data.chats[jid] && !this.data.current_user.is_guest) {\n      this.data.chats[jid].fetching = true;\n      AppDispatcher.dispatch('API:fetch-recent-history', {\n        params: {\n          'not-before': this.data.chats[jid].newest_mid || '',\n          'max-results': appConfig.message_retrieval_chunk_size\n        },\n        path: {\n          'identifier': /@chat/.test(jid) ? utils.jid.user_id(jid) : this.data.chats[jid].id,\n          'type': /@chat/.test(jid) ? 'user' : 'room'\n        },\n        jid: jid\n      });\n    }\n  }\n\n  initialJoinWithHistory(jid) {\n    if (!this.data.current_user.is_guest) {\n      this.data.chats[jid].fetching_ancient = true;\n      this.local.should_queue_changes[jid] = true;\n    }\n  }\n\n  fetchXMPPHistoryCallback(data) {\n\n    let { from: jid, id, error } = data;\n\n    if (!error) {\n      this.handleAncientHistoryLoaded({ jid, id });\n      delete this.local.history_timers[jid];\n    } else {\n\n      logger.type('fetch-history').error(jid, data.error);\n\n      if (!this.local.history_timers[jid]){\n        this.local.history_timers[jid] = {\n          timer: null,\n          attempts: 0\n        };\n      }\n\n      if (this.local.history_timers[jid].attempts === appConfig.chat_history_fetching_attempts){\n        logger.type('fetch-history').info(\"We are reaching max attempts for fetching history:\", jid);\n        return;\n      }\n\n      this.local.history_timers[jid].timer = setTimeout(() => {\n        let chat = this.data.chats[jid];\n        if (chat && !chat.fully_initialized){\n          this.fetchXMPPHistory(jid, true);\n        }\n      }, appConfig.chat_history_fetching_attempt_timeout);\n\n      this.local.history_timers[jid].attempts++;\n    }\n  }\n\n  fetchXMPPHistory(jid, force_update) {\n    if (this.data.current_user.is_guest) {\n      return false;\n    }\n\n    AnalyticsDispatcher.dispatch('analytics-request-history', { jid });\n\n    if (!this.data.chats[jid].fetching_ancient || force_update) {\n      let oldest = this.data.chats[jid].oldest_timestamp || null,\n          cb = this.fetchXMPPHistoryCallback.bind(this);\n\n      this.data.chats[jid].oldest_mid_before_fetch = _.get(this.data.chats[jid], 'messages[0].mid', '');\n      this.data.chats[jid].fetching_ancient = true;\n      this.local.should_queue_changes[jid] = true;\n\n      AppDispatcher.dispatch('request-ancient-history', { jid, oldest }, cb);\n    }\n  }\n\n  handleRecentHistoryFetched(data) {\n    var chat = this.data.chats[data.jid];\n    if (utils.jid.is_chat(data.jid) && chat){\n      chat.populated_recent = true;\n      this.checkIfEmpty(data.jid);\n    }\n    this.updateAncientHistoryMarker(data.jid);\n  }\n\n  handleAncientHistoryLoaded(data) {\n    var chat = this.data.chats[data.jid];\n    if (chat) {\n      var queueSize = 0;\n      this.flushQueue(data.jid);\n      if (_.isEmpty(chat.ancient_msgs)) {\n        chat.ancient_history_is_empty = true;\n      } else {\n        queueSize = Object.keys(chat.ancient_msgs).length;\n        chat.ancient_msgs = {};\n      }\n      chat.fetching_ancient = false;\n      if (!chat.fully_initialized) {\n        chat.fully_initialized = true;\n        AppDispatcher.dispatch('chat-fully-initialized', {jid: data.jid});\n      }\n      this.checkIfEmpty(data.jid);\n      this.updateChats(data.jid);\n      AppDispatcher.dispatch('ancient-history-fetched', {});\n\n      this.sendHistoryLoadedAnalytics({\n        jid: data.jid,\n        size: queueSize,\n        id: _.get(this.data.chats, [data.jid, \"id\"])\n      });\n\n    }\n  }\n\n  sendHistoryLoadedAnalytics(data) {\n    AnalyticsDispatcher.dispatch('analytics-history-loaded', data);\n\n    // executing this action from with the then() of the uiAvailablePromise handles the corner case that the\n    // chat has completed loading before the UI is available for interaction.\n    uiAvailablePromise.then(() => { AnalyticsActions.handleLaunchToChatComplete(data); });\n  }\n\n  updateAncientHistoryMarker(jid) {\n    var chat = this.data.chats[jid];\n    if (chat && chat.messages.length >= appConfig.message_retrieval_chunk_size) {\n      chat.ancient_history_is_empty = false;\n    }\n  }\n\n  checkIfEmpty(jid) {\n    var chat = this.data.chats[jid];\n    if (chat\n        && !chat.fetching_ancient\n        && !chat.fetching_recent\n        && _.isEmpty(chat.messages)\n        && (!this.local.queued_messages[jid] || _.isEmpty(this.local.queued_messages[jid]))) {\n      chat.has_no_message_history = true;\n      if (!chat.fully_initialized) {\n        chat.fully_initialized = true;\n      }\n    }\n  }\n\n  filterMessages(jid, messages) {\n    let chat = this.data.chats[jid];\n    let echoedMessages = [];\n    _.forEach(messages, (msg) => {\n      let echoedMsg = _.find(chat.messages, {mid: msg.id});\n      if (echoedMsg) { // message is echo of previously sent message\n        this._markEchoedMessage(jid, msg);\n        echoedMessages.push(echoedMsg);\n      } else if (appConfig.slash_replacement_regex.test(msg.body) && msg.id && !msg.is_history_message) {\n        let replacements = this.local.replacement_messages[jid];\n        let replacementIndex = _.findIndex(replacements, {mid: msg.mid});\n        replacements.splice(replacementIndex, 1); // delete echoed replacement message\n        delete messages[msg.mid];\n      } else if (messages[msg.id]) { // echo exists in current messages set\n        this._markEchoedMessage(jid, msg);\n        delete messages[msg.id];\n      } else if (this._wasMessagesAlreadyEchoed(jid, msg)) { // echo has already been received\n        this._markEchoedMessage(jid, msg);\n        delete messages[msg.mid];\n      } else if (jid === utils.jid.bare_jid(msg.from)) {\n        chat.is_composing = false;\n        clearTimeout(this.local.composing_timeout);\n      }\n    });\n\n    return echoedMessages;\n  }\n\n  _wasMessagesAlreadyEchoed(jid, msg) {\n    return this.local.echoed_chats[jid] && this.local.echoed_chats[jid].messages[msg.id];\n  }\n\n  _markEchoedMessage(jid, msg) {\n    this.cancelMessageTimers(jid, msg.id);\n    msg.is_echo = true;\n\n    let falseFailedMsg = _.findIndex(this.local.failed_messages, {mid: msg.id});\n\n    if (falseFailedMsg !== -1) {\n      this.local.failed_messages.splice(falseFailedMsg, 1);\n    }\n\n    if (!this.local.echoed_chats[jid]) {\n      this.local.echoed_chats[jid] = {messages: {}};\n    }\n    this.local.echoed_chats[jid].messages[msg.id] = msg;\n  }\n\n  addChatStateMessage(jid) {\n    if (!this.data.chats[jid].is_composing){\n      if (jid === this.data.active_chat) {\n        this.smoothChangeChatStateMessage(jid, true);\n      }\n      this.data.chats[jid].is_composing = true;\n    }\n  }\n\n  removeChatStateMessage(jid) {\n    if (this.data.chats[jid].is_composing){\n      if (jid === this.data.active_chat) {\n        this.smoothChangeChatStateMessage(jid, false);\n      } else {\n        this.data.chats[jid].is_composing = false;\n      }\n    }\n  }\n\n  smoothChangeChatStateMessage(jid, isComposing) {\n    this.local.should_queue_changes[jid] = true;\n    let action = isComposing ? 'add' : 'remove';\n    let promise = new Promise((res) => {\n      setTimeout(() => {\n        res(jid);\n      }, appConfig.chat_scroll_duration);\n      AppDispatcher.dispatch(`${action}-chat-state-message`, {jid: jid});\n    });\n\n    promise.then((chat_jid) => {\n      this.data.chats[chat_jid].is_composing = isComposing;\n      this.flushQueue(chat_jid);\n      this.updateChats(chat_jid);\n    });\n  }\n\n  replaceMessageContent(jid) {\n    let replacements = this.local.replacement_messages[jid];\n\n    let messages = this.data.chats[jid].messages;\n\n    if (_.isEmpty(replacements)) {\n      return messages;\n    }\n\n    messages = _.clone(messages);\n\n    replacements.forEach(function (replacementMsg) {\n      // remove replacement messages from message array\n      let pos = _.findLastIndex(messages, {mid: replacementMsg.mid});\n      if (pos > -1) {\n        messages.splice(pos, 1);\n      }\n\n      // replacements for ninja edit\n      pos = _.findLastIndex(messages, function (entry) {\n        return entry.time <= replacementMsg.time && String(entry.sender_id) === String(replacementMsg.sender_id);\n      });\n      if (pos > -1 && !replacementMsg.edited_message) {\n        let oldMsg = messages[pos];\n\n        let newBody;\n\n        // If the message is an emote, re-apply the emote replacement (as we don't\n        // persist the replacement on the message directly).\n        if (oldMsg.isEmote) {\n          let emote = oldMsg.body.slice(0, 3);\n          let emoteMessage = oldMsg.body.slice(3);\n          newBody = emoteMessage.replace(replacementMsg.text_to_replace, replacementMsg.replacement_text);\n          newBody = utils.replaceEmoteMessage(emote + newBody, oldMsg.sender);\n        } else {\n          newBody = oldMsg.body.replace(replacementMsg.text_to_replace, replacementMsg.replacement_text);\n        }\n\n        let newMsg = patchMsg(oldMsg, {body: newBody});\n        utils.formatMessageBody(newMsg);\n        messages.splice(pos, 1, newMsg);\n      }\n\n      // replacements for new message edit\n      pos = _.findIndex(messages, {mid: _.get(replacementMsg,'replace.id')});\n      if ( (pos > -1 && replacementMsg.edited_message) || (pos > -1 && replacementMsg.is_deleted) ) {\n        let patchObj = {\n          body: replacementMsg.edited_message,\n          replace: replacementMsg.replace,\n          is_deleted: replacementMsg.is_deleted\n        };\n        if (_.get(messages[pos],'file_data.desc', false)) {\n          patchObj['file_data'] = {\n            desc: replacementMsg.edited_message,\n            is_deleted: replacementMsg.is_deleted\n          };\n        }\n        let newMsg = patchMsg(messages[pos], patchObj);\n        utils.formatMessageBody(newMsg);\n        messages.splice(pos, 1, newMsg);\n      }\n    });\n\n    this.local.replacement_messages[jid].length = 0;\n\n    return _.sortBy(messages, \"time\");\n  }\n\n  toggleImage(jid, mid) {\n    let chat = this.data.chats[jid],\n        origMsg;\n\n    if (chat && chat.messages) {\n      origMsg = _.find(chat.messages, (msg) => {\n        return msg.mid === mid;\n      });\n\n      if (origMsg) {\n        let collapsed = !!origMsg.is_collapsed;\n        patchMsgByMid(chat, mid, {is_collapsed: !collapsed});\n        this.updateChats(jid);\n      }\n    }\n  }\n\n  toggleAttachedCards(anchor_mid) {\n    let chat = this.data.chats[this.data.active_chat],\n      origMsg;\n\n    if (chat && chat.messages) {\n      origMsg = _.find(chat.messages, (msg) => {\n        return msg.mid === anchor_mid;\n      });\n\n      if (origMsg) {\n        let collapsedDefault = PreferencesStore.shouldHideAttachedCardsByDefault();\n        let collapsed = utils.isAttachedCardsCollapsed(origMsg, collapsedDefault);\n        patchMsgByMid(chat, anchor_mid, {is_attached_cards_collapsed: !collapsed});\n        this.updateChats(this.data.active_chat);\n      }\n    }\n    this.updateChats(this.data.active_chat);\n  }\n\n  getLastSentMessageByCurrentUser(jid) {\n    let editableTypes = {\n      'message': true,\n      'file': true\n    };\n    let lastMessages = _.filter(this.data.chats[jid].messages, (msg) => {\n      let current_user_id = utils.jid.user_id(this.data.current_user.user_jid);\n      return msg.sender_id === current_user_id && editableTypes[msg.type];\n    });\n    return _.last(_.sortBy(lastMessages, \"time\"));\n  }\n\n  removeOldPresenceMessages(chat, new_messages) {\n    if (!_.isObject(chat) || !_.isArray(new_messages)) {\n      return true;\n    }\n\n    let user_jids = new_messages.reduce(function (prev, curr) {\n      if (curr.is_presence_message && curr.user_jid) {\n        prev.push(curr.user_jid);\n      }\n      return prev;\n    }, []);\n\n    if (user_jids.length && _.isArray(chat.messages)) {\n      let old_presence_messages = chat.messages.filter((message) => message.is_presence_message && _.includes(user_jids, message.user_jid));\n\n      old_presence_messages.forEach((msg) => this.maybeRemoveMsg(chat, msg.mid));\n    }\n  }\n\n  maybeRemoveMsg(chat, mid) {\n    var pos = _.findIndex(chat.messages, {mid});\n    if (pos === -1) {\n      return false;\n    }\n\n    let messages = _.clone(chat.messages);\n    messages.splice(pos, 1);\n    deepFreeze(messages);\n\n    chat.messages = messages;\n\n    return true;\n  }\n\n}\n\nexport default new ChatWindowStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/chat_window_store.js\n **/","module.exports = { \"default\": require(\"core-js/library/fn/object/is-frozen\"), __esModule: true };\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/babel-runtime/core-js/object/is-frozen.js\n ** module id = 591\n ** module chunks = 0\n **/","require('../../modules/es6.object.is-frozen');\nmodule.exports = require('../../modules/$.core').Object.isFrozen;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/fn/object/is-frozen.js\n ** module id = 592\n ** module chunks = 0\n **/","// 19.1.2.12 Object.isFrozen(O)\nvar isObject = require('./$.is-object');\n\nrequire('./$.object-sap')('isFrozen', function($isFrozen){\n  return function isFrozen(it){\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  };\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/core-js/library/modules/es6.object.is-frozen.js\n ** module id = 593\n ** module chunks = 0\n **/","import AppDispatcher from 'dispatchers/app_dispatcher';\n\n// Wrap the first change of AppStore::ui_available as a Promise,\n// so that components that mount after the value is set can\n// still hook into the event\nconst uiAvailablePromise = new Promise((resolve, reject) => {\n  AppDispatcher.registerOnce('updated:ui_available', resolve);\n});\n\nexport { uiAvailablePromise };\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/analytics.js\n **/","import ChatInput from \"./chat_input\";\nimport RosterStore from \"stores/roster_store\";\nimport PreferencesStore from \"stores/preferences_store\";\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\n\nmodule.exports = React.createClass({\n\n  displayName: \"ChatInputBox\",\n\n  mixins: [PureRenderMixin],\n\n  getInitialState: function() {\n    return this.getInputBoxState();\n  },\n\n  componentDidMount: function(){\n    RosterStore.on(['change:chat_type'], this._onChange);\n    PreferencesStore.on(['change:showChatSidebar', 'change:showGroupChatSidebar'], this._onChange);\n  },\n\n  componentWillUnmount: function(){\n    RosterStore.off(['change:chat_type'], this._onChange);\n    PreferencesStore.off(['change:showChatSidebar', 'change:showGroupChatSidebar'], this._onChange);\n  },\n\n  getInputBoxState: function () {\n    return {\n      chat_type: RosterStore.get(\"chat_type\"),\n      chat_sidebar_visible: PreferencesStore.shouldShowChatSidebar(),\n      groupchat_sidebar_visible: PreferencesStore.shouldShowGroupChatSidebar()\n    };\n  },\n\n  _onChange: function(){\n    this.setState(this.getInputBoxState());\n  },\n\n  _sidebarVisible: function () {\n    return this.state[this.state.chat_type + '_sidebar_visible'];\n  },\n\n  render: function() {\n    var chatBoxClasses = cx({\n          'hc-chat-box': true,\n          'sidebar-hidden': !this._sidebarVisible()\n        });\n\n    return (\n      <div className={chatBoxClasses}>\n        <ChatInput is_guest={this.props.is_guest} chat_type={this.state.chat_type} />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/chat_input_box.js\n **/","import ChatInputStore from 'stores/chat_input_store';\nimport FlagActions from 'actions/flag_actions';\nimport ChatInputActions from 'actions/chat_input_actions';\nimport FileUploaderActions from 'actions/file_uploader_actions';\nimport AutoCompleteActions from 'actions/autocomplete_actions';\nimport MessageActions from 'actions/message_actions';\nimport MentionAutoComplete from './mention_autocomplete';\nimport EmoticonAutoComplete from './emoticon_auto_complete';\nimport SlashCommandAutoComplete from './slash_command_auto_complete';\nimport Tooltip from 'components/tooltip/tooltip';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport utils from 'helpers/utils';\nimport FormsStrings from 'strings/forms_strings';\nimport VideoServiceKeys from 'keys/video_service_keys';\nimport CurrentUserActions from 'actions/current_user_actions';\nimport AppConfig from 'config/app_config';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport AnalyticsActions from 'actions/analytics_actions';\nimport ChatActionsButton from './actions/chat_action_button';\nimport Presence from 'lib/enum/presence';\nimport cx from 'classnames';\nimport { uiAvailablePromise } from 'helpers/analytics';\nimport * as slashCommandHelper from 'helpers/slash_command_helper';\nimport mousePosition from 'helpers/mouse_position';\n\nvar getInputState = function () {\n  return ChatInputStore.getAll();\n};\n\nlet lastPosn = 0;\n\nlet sentActiveMessageDelay = AppConfig.sent_active_message_delay;\nlet sentComposingMessageTimeout;\n\nlet composingIntervalTimer = AppConfig.sent_composing_message_interval;\nlet sentComposingMessageInterval;\n\nfunction getSelection() {\n  var hasText = false;\n  if (typeof window.getSelection !== \"undefined\") {\n    hasText = window.getSelection().toString();\n  } else if (typeof document.selection !== \"undefined\" && document.selection.type === \"Text\") {\n    hasText = document.selection.createRange().text;\n  }\n\n  return hasText;\n}\n\nfunction onDocClick(evt){\n  let correspondingUseElement = evt.target.correspondingUseElement || evt.target;\n\n  if (evt.target !== document && !$(correspondingUseElement).is('.hc-ac-name, #hc-message-input')) {\n    AutoCompleteActions.dismissMentionAutoComplete();\n    AutoCompleteActions.dismissEmoticonAutoComplete();\n  }\n}\n\nconst ProgressBarSelector = '#upload-progress-bar';\n\nexport default React.createClass({\n\n  displayName: \"ChatInput\",\n\n  getInitialState: function () {\n    return getInputState();\n  },\n\n  componentDidMount: function () {\n    var textArea = ReactDOM.findDOMNode(this.refs.message);\n    this._setTextAreaLayout(textArea);\n    document.addEventListener('click', this._focusIfAllowed);\n    ChatInputStore.on('change', this._onChange);\n    this._debouncedOnCaretUpdate = _.debounce(this._onCaretUpdate, 20, {leading: true, trailing: true});\n    this._debouncedWindowResize = _.debounce(() => $(window).trigger('resize'), 100, { leading: true, trailing: false});\n    this._debouncedShouldSendChatStateMessage = _.debounce(this._shouldSendChatStateMessage,\n      200,\n      {leading: true, trailing: false}\n    );\n    AppDispatcher.register(\"application-focused\", this._focusIfAllowed);\n    AppDispatcher.register(\"new-active-chat\", this._focusIfAllowed);\n    AppDispatcher.register(\"hide-modal-dialog\", this._focusIfAllowed);\n    AppDispatcher.register(\"hide-inline-dialog\", this._focusIfAllowed);\n    this._focus();\n    this._moveCaretToEnd();\n    $(document).on('click', onDocClick);\n    AJS.$(document).on('aui-dropdown2-show', this._blur);\n    AJS.$(document).on('aui-dropdown2-hide', this._focusIfAllowed);\n    uiAvailablePromise.then(this._sendLaunchToChat);\n    if (this.state.text) {\n      this._autoSize();\n    }\n    this._setUploadProgress(this.state.upload_progress, null);\n    if (this.state.file\n      && this.state.attachment_expanded\n      && this.state.file.file_obj\n      && !this.state.file_error\n      && !this.state.uploading) {\n      ChatInputActions.openTooltip({\n        type: 'upload_preview',\n        data: {\n          file: this.state.file.file_obj\n        }\n      });\n    }\n  },\n\n  componentWillUnmount: function () {\n    this._debouncedOnCaretUpdate.cancel();\n    this._debouncedWindowResize.cancel();\n    this._debouncedShouldSendChatStateMessage.cancel();\n    document.removeEventListener('click', this._focusIfAllowed);\n    ChatInputStore.off('change', this._onChange);\n    AppDispatcher.unregister(\"application-focused\", this._focusIfAllowed);\n    AppDispatcher.unregister(\"new-active-chat\", this._focusIfAllowed);\n    AppDispatcher.unregister(\"hide-modal-dialog\", this._focusIfAllowed);\n    AppDispatcher.unregister(\"hide-inline-dialog\", this._focusIfAllowed);\n    $(document).off('click', onDocClick);\n    AJS.$(document).off('aui-dropdown2-show', this._blur);\n    AJS.$(document).off('aui-dropdown2-hide', this._focusIfAllowed);\n    AutoCompleteActions.dismissMentionAutoComplete();\n    AutoCompleteActions.dismissEmoticonAutoComplete();\n    ChatInputActions.closeTooltip({type: 'upload_preview'});\n  },\n\n  componentWillUpdate: function(nextProps, nextState){\n    if (this.state.active_chat !== nextState.active_chat) {\n      if (!nextState.attachment_expanded || !nextState.file.file_obj) {\n        ChatInputActions.closeTooltip({type: 'upload_preview'});\n      }\n      AnalyticsDispatcher.dispatch('analytics-active-chat-changed', {jid: nextState.active_chat});\n    } else if (!this.state.text && nextState.text) {\n      AnalyticsDispatcher.dispatch('analytics-set-message-value', nextState.text);\n    }\n  },\n\n  componentDidUpdate: function(prevProps, prevState){\n    this._autoSize();\n    if (this.state.active_chat_id !== prevState.active_chat_id) {\n      this._moveCaretToEnd();\n    } else if (this.state.new_forced_caret_position) {\n      utils.setCaretPosition(ReactDOM.findDOMNode(this.refs.message), this.state.new_forced_caret_position);\n      ChatInputActions.resetNewForcedCaretPosition();\n    }\n    if (prevState.file && this.state.file && prevState.file.file_obj && !this.state.file.file_obj) {\n      ChatInputActions.closeTooltip({type: 'upload_preview'});\n    }\n    this._setUploadProgress(this.state.upload_progress, prevState.upload_progress);\n  },\n\n  _setUploadProgress(current, prev){\n    if (document.querySelector(ProgressBarSelector)) {\n      if (current !== null){\n        AJS.progressBars.update(ProgressBarSelector, current);\n      } else if (current === null && prev !== null) {\n        AJS.progressBars.setIndeterminate(ProgressBarSelector);\n      }\n    }\n  },\n\n  _setTextAreaLayout: function(textArea) {\n    let computedStyle = window.getComputedStyle(textArea, null);\n\n    this._textAreaLayout['maxHeight'] = parseInt(computedStyle.maxHeight, 10) || 210;\n    this._textAreaLayout['scrollHeight'] = textArea.clientHeight;\n  },\n\n  _textAreaLayout: {\n    maxHeight: 0,\n    scrollHeight: 0\n  },\n\n  _sendLaunchToChat: function() {\n    let activeChat = ChatInputStore.get('active_chat'),\n        isRoom = utils.jid.is_room(activeChat),\n        // 0 if room, 1 if OTO. We can assume we're not in the lobby or search\n        // because we don't render the chat input there\n        size = isRoom ? 0 : 1;\n\n    AnalyticsActions.handleLaunchToChat({ size });\n  },\n\n  _autoSize: function () {\n    var textArea = ReactDOM.findDOMNode(this.refs.message);\n\n    if (this._textAreaLayout['scrollHeight'] !== textArea.scrollHeight) {\n      var chatInput = ReactDOM.findDOMNode(this);\n\n      // Changes of textArea height also affect message list height (and it's scroll position).\n      // So to avoid redundant scroll jumps we should preserve height of the chatInput during textArea height changes.\n      chatInput.style.height = chatInput.clientHeight + 'px';\n\n      textArea.style.height = 0;\n      textArea.style.height = textArea.scrollHeight + 'px';\n\n      chatInput.style.height = '';\n\n      if (textArea.scrollHeight >= this._textAreaLayout['maxHeight']) {\n        if (textArea.style.overflowY !== 'visible') {\n          textArea.style.overflowY = \"visible\";\n          $(ReactDOM.findDOMNode(this)).find(\".hc-text-input\").addClass('hc-textarea-has-scroll');\n        }\n      } else {\n        if (textArea.style.overflowY !== 'hidden') {\n          textArea.style.overflowY = \"hidden\";\n          $(ReactDOM.findDOMNode(this)).find(\".hc-text-input\").removeClass('hc-textarea-has-scroll');\n        }\n      }\n      this._textAreaLayout['scrollHeight'] = textArea.scrollHeight;\n      this._debouncedWindowResize();\n    }\n  },\n\n  _getAutoComplete: function () {\n    var autoComplete;\n\n    if (this.state.active_autocomplete === \"mention\" && this.state.mention_list.length) {\n      autoComplete = (\n        <MentionAutoComplete\n          ref=\"mentionAC\"\n          mention_text={this.state.mention_text}\n          mention_list={this.state.mention_list}\n          mention_results_count={this.state.mention_results_count}\n          mention_selected_item={this.state.mention_selected_item}\n          should_animate_avatar={this.state.should_animate_avatar}\n          textarea_ref={this.refs.message} />\n      );\n    } else if (this.state.active_autocomplete === \"emoticon\" && this.state.emoticon_list.length) {\n      autoComplete = (\n        <EmoticonAutoComplete\n          ref=\"emoticonAC\"\n          emoticon_text={this.state.emoticon_text}\n          emoticon_list={this.state.emoticon_list}\n          emoticon_results_count={this.state.emoticon_results_count}\n          emoticon_selected_item={this.state.emoticon_selected_item}\n          path_prefix={this.state.path_prefix}\n          textarea_ref={this.refs.message} />\n      );\n    } else if (this.state.active_autocomplete === \"slash_command\" && this.state.slash_command_list.length) {\n      autoComplete = (\n          <SlashCommandAutoComplete\n              ref=\"slash_commandAC\"\n              slash_command_results_count={this.state.slash_command_results_count}\n              slash_command_selected_item={this.state.slash_command_selected_item}\n              slash_commands_list={this.state.slash_command_list}\n              textarea_ref={this.refs.message}\n          />\n      );\n    }\n    return autoComplete;\n  },\n\n  render: function () {\n    let textInputClasses = cx({\n      \"hc-textwrapper\": true,\n      \"hc-text-input\": true,\n      \"hc-file-sharing-disabled\": !this.state.can_share_files\n    });\n    let textareaClasses = cx({\n      'mousetrap': true,\n      'textarea': true,\n      'hc-textarea': true\n    });\n    let autoComplete = this._getAutoComplete();\n\n    return (\n      <form className=\"aui\">\n        <table width=\"100%\" height=\"100%\" cellSpacing=\"0\">\n          <tbody>\n            <tr>\n              <ChatActionsButton\n                ref=\"file_btn\"\n                active_chat={this.state.active_chat}\n                on_keydown={this._onKeydown}\n                file_name={this.state.file_name}\n                attachment_expanded={this.state.attachment_expanded}\n                uploading={this.state.uploading}\n                file_error={this.state.file_error}\n                file_error_message={this.state.file_error_message}\n                file_extension={this.state.file_extension}\n                can_share_files={this.state.can_share_files}\n                chat_type={this.props.chat_type} />\n              <td height=\"100%\">\n                <div className=\"hc-text-input-autocomplete-container\">\n                   {autoComplete}\n                </div>\n                <div className={textInputClasses}>\n                  <textarea\n                    id={AppConfig.chat_input_id}\n                    className={textareaClasses}\n                    rows=\"1\"\n                    onChange={this._onValueChange}\n                    onKeyDown={this._onKeydown}\n                    onKeyUp={this._debouncedOnCaretUpdate}\n                    onClick={this._debouncedOnCaretUpdate}\n                    onPaste={this._onPaste}\n                    value={this.state.text}\n                    ref=\"message\" />\n                  <div className=\"smiley-icon\" onClick={this._onSmileyClick}>\n                    <span className=\"aui-icon hipchat-icon-small icon-emoticon\">Emoticons</span>\n                    <Tooltip type=\"smiley_selector\"/>\n                  </div>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </form>\n    );\n  },\n\n  _onChange: function (evt) {\n    this._debouncedOnCaretUpdate(evt);\n    this.setState(getInputState());\n  },\n\n  _onCaretUpdate: function(evt){\n    if (this.state.chat_type === 'chat' && evt.keyCode) {\n      this._debouncedShouldSendChatStateMessage(evt);\n    }\n    var node = ReactDOM.findDOMNode(this.refs.message),\n        caretPosn = utils.getCaretPosition(node),\n        msgText = node.value,\n        msgMention = msgText,\n        endSelectedPosition = utils.getEndSelection(node);\n    if (endSelectedPosition !== caretPosn) {\n      msgMention = msgText.slice(0, caretPosn) + msgText.slice(endSelectedPosition);\n    }\n    if (caretPosn !== lastPosn || (caretPosn === lastPosn && utils.keyCode.isSelected(evt))) {\n      lastPosn = caretPosn;\n      this._processEmoticonText(msgText, caretPosn);\n      var activeChat = this.state.active_chat;\n      if (!utils.jid.is_private_chat(activeChat)) {\n        this._processMentionText(msgMention, caretPosn);\n      }\n      this._processSlashCommandText(msgText, caretPosn);\n      ChatInputActions.setCaretPosition(caretPosn);\n    }\n  },\n\n  _processMentionText: function (msgText, caretPosn) {\n    if (this.state.active_autocomplete !== 'mention' && this.state.active_autocomplete) {\n      return;\n    }\n    AutoCompleteActions.processMentionText({\n      text: msgText,\n      caret_position: caretPosn\n    });\n  },\n\n  _processEmoticonText: function (msgText, caretPosn) {\n    if (this.state.active_autocomplete !== 'emoticon' && this.state.active_autocomplete) {\n      return;\n    }\n    AutoCompleteActions.processEmoticonText({\n      text: msgText,\n      caret_position: caretPosn\n    });\n  },\n\n  _processSlashCommandText(msgText, caretPosn){\n    if (this.state.active_autocomplete !== 'slash_command' && this.state.active_autocomplete) {\n      return;\n    }\n    AutoCompleteActions.processSlashCommandText({\n      text: msgText,\n      caret_position: caretPosn\n    });\n  },\n\n  _processPresence: function(text){\n    var index = text.indexOf(' '),\n      show_type = text,\n      payload = {\n        type: 'showAndStatus'\n      },\n      status;\n\n    if (_.includes(text, ' ')){\n      status = text.substr(index).trim();\n      if (status) {\n        payload.status = status;\n      }\n      show_type = show_type.substr(0, index);\n    }\n\n    switch (show_type.substr(1)){\n      case 'available':\n      case 'here':\n      case 'back':\n        payload.show = Presence.AVAILABLE;\n        break;\n\n      case 'away':\n        payload.show = Presence.AWAY;\n        break;\n\n      case 'dnd':\n        payload.show = Presence.DND;\n        break;\n    }\n\n    CurrentUserActions.changeStatus(payload);\n  },\n\n  _clearFileInput: function () {\n    var node = document.getElementById('fileInput');\n    if (node) {\n      node.value = null;\n    }\n  },\n\n  _onKeydown: function (evt) {\n    if (!this.state.initialized){\n      return;\n    }\n\n    this.state.text = utils.strings.stripHiddenCharacters(this.state.text);\n\n    if (this.state.active_autocomplete) {\n      mousePosition.useLatest();\n      var $node = $(ReactDOM.findDOMNode(this.refs[this.state.active_autocomplete + 'AC']));\n      if ($node.find('.aui-inline-dialog.show').length) {\n        // up\n        if (evt.keyCode === utils.keyCode.UpArrow) {\n          AutoCompleteActions.navigateAutoComplete({\n            autocomplete: this.state.active_autocomplete,\n            direction: \"up\"\n          });\n          evt.preventDefault();\n        }\n\n        // down\n        if (evt.keyCode === utils.keyCode.DownArrow) {\n          AutoCompleteActions.navigateAutoComplete({\n            autocomplete: this.state.active_autocomplete,\n            direction: \"down\"\n          });\n          evt.preventDefault();\n        }\n\n        // tab or enter\n        if (evt.keyCode === utils.keyCode.Tab || evt.keyCode === utils.keyCode.Enter) {\n          if (this.state.active_autocomplete === \"mention\") {\n            AutoCompleteActions.mentionSelected();\n          } else if (this.state.active_autocomplete === \"emoticon\") {\n            AutoCompleteActions.emoticonSelected();\n          } else if (this.state.active_autocomplete === \"slash_command\") {\n            AutoCompleteActions.slashCommandSelected();\n          }\n          evt.preventDefault();\n          return;\n        }\n      }\n    } else if (evt.keyCode === utils.keyCode.Tab) {\n      if (this.state.attachment_expanded && evt.shiftKey) {\n        // Only allow tab-backward if we're uploading\n      } else {\n        // Don't allow tab-forward (or any tab if we're not uploading)\n        evt.preventDefault();\n      }\n      return;\n    } else if (evt.keyCode === utils.keyCode.Enter && (evt.ctrlKey || evt.altKey)) {\n      // let the default shift+enter behavior bubble up, since modifying the text by adding a '\\n' results in weird behavior\n      evt.shiftKey = true;\n      return;\n    }\n    // escape\n    if (evt.keyCode === utils.keyCode.Esc) {\n      if (!this.state.active_autocomplete) {\n        // Always make sure we focus the message input\n        ReactDOM.findDOMNode(this.refs.message).focus();\n        ChatInputActions.closeTooltip({type: 'upload_preview'});\n        ChatInputActions.closeAttachment({jid: this.state.active_chat});\n      }\n      AutoCompleteActions.dismissMentionAutoComplete();\n      AutoCompleteActions.dismissEmoticonAutoComplete();\n      evt.preventDefault();\n    }\n\n    if (this.state.message_editing_enabled && this.state.text === '' &&\n        evt.keyCode === utils.keyCode.UpArrow && !utils.keyCode.isModified(evt)) {\n        evt.preventDefault();\n        ChatInputActions.getLastMessageSentByCurrentUser(this.state.active_chat, MessageActions.initiateMessageEdit);\n    }\n\n    if (evt.keyCode === utils.keyCode.Enter && !evt.shiftKey) {\n      evt.preventDefault();\n      if (this.state.text && this._invalidMessageLength(this.state.text)) {\n        // Message is too long\n        ChatInputActions.showMessageLengthError();\n      } else if (!this.state.uploading && this.state.attachment_expanded && !this.state.file_error) {\n        if (this.state.text && this._invalidFileDescriptionLength(this.state.text)) {\n          // File description is too long\n          ChatInputActions.showFileDescriptionLengthError();\n        } else {\n          FileUploaderActions.uploadFile({\n            file: this.state.file,\n            fileName: this.state.file_name,\n            jid: this.state.active_chat,\n            room_id: this.state.active_chat_id,\n            message: this.state.text\n          });\n          this._sendUploadAnalyticsEvent();\n          ChatInputActions.closeTooltip({type: 'upload_preview'});\n          ReactDOM.findDOMNode(this.refs.message).focus();\n          this._clearFileInput();\n        }\n      } else if (this.state.text.trim().length) {\n        let command = slashCommandHelper.matchCommand({\n          text: this.state.text,\n          jid: this.state.active_chat,\n          is_guest: this.props.is_guest,\n          video_enabled: this.state.video_enabled,\n          room_video_enabled: this.state.video_enabled && this.state.web_client_enso_video_enabled && this.state.web_client_enso_room_video_enabled\n        });\n\n        slashCommandHelper.executeCommand(command, {\n          jid: this.state.active_chat,\n          text: this.state.text,\n          videoService: this.state.web_client_enso_video_enabled ? VideoServiceKeys.ENSO : VideoServiceKeys.ADDLIVE,\n          room_id: this.state.active_chat_id,\n          room_is_archived: this.state.room_is_archived\n        });\n\n        if (command){\n          AnalyticsActions.slashCommandUsed({\n            room: utils.jid.is_room(this.state.active_chat) ? this.state.active_chat_id : null,\n            slashUsed: this.state.text.split(' ')[0]\n          });\n        }\n\n        if (command && command.should_send_message || !command){\n\n          if (utils.jid.is_private_chat(this.state.active_chat) && !this.state.can_use_oto_chats) {\n\n            FlagActions.showFlag({\n              type: 'warning',\n              close: 'auto',\n              body: FormsStrings.fail.oto_chats_disabled\n            });\n\n            return;\n          }\n\n          if (this.state.room_is_archived) {\n\n            FlagActions.showFlag({\n              type: 'warning',\n              close: 'auto',\n              body: FormsStrings.fail.sent_message_in_archived_room\n            });\n\n            return;\n          }\n\n          ChatInputActions.sendMessage({\n            text: this.state.text,\n            jid: this.state.active_chat,\n            id: this.state.message_id,\n            active_chat_id: this.state.active_chat_id,\n            chat_type: this.state.chat_type\n          });\n        }\n      }\n    }\n  },\n\n  _shouldSendChatStateMessage: function (evt) {\n    if (evt.keyCode === utils.keyCode.Delete ||\n      evt.keyCode === utils.keyCode.Backspace) {\n      return false;\n    }\n\n    this._updateDelay();\n    if (this.state.text.trim().length\n      && !sentComposingMessageInterval\n      && this.state.user_state === 'active') {\n      this._sendComposingStateMessage();\n    } else if (this.state.user_state === 'composing') {\n      if (!this.state.text.trim().length ||\n        !sentComposingMessageTimeout) {\n        this._sendActiveStateMessage();\n      }\n    }\n  },\n\n  _updateDelay: function() {\n    clearTimeout(sentComposingMessageTimeout);\n    sentComposingMessageTimeout = setTimeout(() => {\n      this._sendActiveStateMessage();\n      clearTimeout(sentComposingMessageTimeout);\n      sentComposingMessageTimeout = null;\n    }, sentActiveMessageDelay);\n  },\n\n  _sendComposingStateMessage: function() {\n    this._sentState('composing');\n    sentComposingMessageInterval = setInterval(() => {\n      this._sentState('composing');\n    }, composingIntervalTimer);\n  },\n\n  _sendActiveStateMessage: function() {\n    clearInterval(sentComposingMessageInterval);\n    sentComposingMessageInterval = null;\n    this._sentState('active');\n  },\n\n  _sentState: function(state) {\n    ChatInputActions.setUserState({\n      jid: this.state.active_chat,\n      type: 'chat',\n      state\n    });\n  },\n\n  _onValueChange: function (evt) {\n\n    if (!this.state.initialized){\n      return;\n    }\n\n    ChatInputActions.setMsgValue({\n      text: evt.target.value\n    });\n  },\n\n  _invalidMessageLength: function (text) {\n    return (text.length >= AppConfig.max_message_text_length);\n  },\n\n  _invalidFileDescriptionLength: function (text) {\n    return (text.length > AppConfig.max_file_description_length);\n  },\n\n  _focusingDisabled: function() {\n    var disabled = false;\n    if (window.HC && window.HC.Config && window.HC.Config.composeMessageDisabled) {\n      disabled = window.HC.Config.composeMessageDisabled;\n    }\n\n    return disabled;\n  },\n\n  _focusIfAllowed: function (e) {\n    if (!e || !$(e.target).closest('[data-no-focus]').length) {\n      _.delay(() => {\n        let activeEl = _.get(document.activeElement, 'tagName');\n        if (this.isMounted() && !this._focusingDisabled() && !_.includes([\"INPUT\", \"TEXTAREA\"], activeEl)\n          && document.querySelectorAll(\".aui-blanket\").length === 0\n          && $(\".aui-dropdown2[aria-hidden='false']\").length === 0) {\n          this._focus();\n        }\n      }, AppConfig.modal_transition_allowance);\n    }\n  },\n\n  _focus: function () {\n    var selection = getSelection();\n    if (!this._isFocused() && !selection) {\n      ReactDOM.findDOMNode(this.refs.message).focus();\n    }\n  },\n\n  _blur: function() {\n    ReactDOM.findDOMNode(this.refs.message).blur();\n  },\n\n  _moveCaretToEnd: function () {\n    if (this.state.text) {\n      utils.setCaretPosition(ReactDOM.findDOMNode(this.refs.message), this.state.text.length);\n      ChatInputActions.setCaretPosition(this.state.text.length);\n    }\n  },\n\n  _isFocused: function() {\n    return ReactDOM.findDOMNode(this.refs.message) === document.activeElement;\n  },\n\n  _onSmileyClick: function (evt) {\n    var className = evt.currentTarget.className;\n    if (!~className.indexOf(' selected')) {\n      evt.currentTarget.className += ' selected';\n\n      AnalyticsDispatcher.dispatch(\"analytics-event\", {\n        name: \"hipchat.client.emoticon.dialog.launched\"\n      });\n    } else {\n      evt.currentTarget.className = className.replace(' selected', '');\n    }\n    ChatInputActions.toggleTooltip({\n      type: 'smiley_selector',\n      data: {\n        smileys: this.state.smileys,\n        user_is_admin: this.state.user_is_admin,\n        web_server: this.state.web_server\n      }\n    });\n  },\n\n  _sendUploadAnalyticsEvent() {\n    var fileType = utils.file.get_selected_file_type(this.state.file);\n    var roomType = (utils.room.detect_chat_type(this.state.active_chat) === \"groupchat\") ? \"room\" : \"oto\";\n    AnalyticsActions.fileUploadRequested(fileType.minor, roomType, this.state.file_selection_source);\n  },\n\n  _onPaste: function(evt) {\n    if (!this.state.uploading) {\n      FileUploaderActions.filePasted(evt);\n    }\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/chat_input.js\n **/","/**\n * AutoCompleteActions\n */\n\nvar AppDispatcher = require('dispatchers/app_dispatcher');\n\nvar AutoCompleteActions = {\n\n  processEmoticonText: function (data) {\n    AppDispatcher.dispatch(\"process-emoticon-text\", {\n      text: data.text,\n      caret_position: data.caret_position\n    });\n  },\n\n  dismissEmoticonAutoComplete: function () {\n    AppDispatcher.dispatch(\"dismiss-emoticon-autocomplete\");\n  },\n\n  emoticonSelected: function () {\n    AppDispatcher.dispatch(\"emoticon-selected\");\n  },\n\n  processMentionText: function (data) {\n    AppDispatcher.dispatch('process-mention-text', {\n      text: data.text,\n      caret_position: data.caret_position\n    });\n  },\n\n  processSlashCommandText({ text, caret_position }){\n    AppDispatcher.dispatch('process-slash-command-text', { text, caret_position });\n  },\n\n  dismissMentionAutoComplete: function () {\n    AppDispatcher.dispatch(\"dismiss-mention-autocomplete\");\n  },\n\n  navigateAutoComplete: function (data) {\n    AppDispatcher.dispatch(\"navigate-autocomplete\", {\n      autocomplete: data.autocomplete,\n      direction: data.direction\n    });\n  },\n\n  mentionSelected: function () {\n    AppDispatcher.dispatch(\"mention-selected\");\n  },\n\n  menuItemHovered: function (data) {\n    AppDispatcher.dispatch(\"menu-item-hovered\", {\n      type: data.type,\n      index: data.index\n    });\n  },\n\n  slashCommandSelected(){\n    AppDispatcher.dispatch(\"slash-command-selected\");\n  }\n};\n\nmodule.exports = AutoCompleteActions;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/actions/autocomplete_actions.js\n **/","var AutoCompleteBox = require('components/common/autocomplete/auto_complete_box');\nvar utils = require('helpers/utils');\n\nmodule.exports = React.createClass({\n\n  displayName: \"MentionAutoComplete\",\n\n  componentDidUpdate: function () {\n    if (this.props.mention_results_count > 0) {\n      this._scrollIntoView();\n    }\n  },\n\n  _scrollIntoView: function () {\n    var $node = $(ReactDOM.findDOMNode(this));\n    var container = $node.find('.aui-inline-dialog-contents.contents').get(0);\n\n    utils.scrollIntoViewIfNeeded($node.find('li.hc-autocomplete-item-selected').get(0), container, false);\n  },\n\n  render: function() {\n    return (\n      <div className=\"hc-mention-ac hc-chat-input-autocomplete\">\n        <AutoCompleteBox key=\"mention_auto_complete\"\n                          type=\"mention\"\n                          list={this.props.mention_list}\n                          should_animate_avatar={this.props.should_animate_avatar}\n                          textarea_ref={this.props.textarea_ref}\n                          selected_item={this.props.mention_selected_item}\n                          ref=\"acBox\" />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/mention_autocomplete.js\n **/","var TextareaCaretMirror = require(\"./textarea_caret_mirror\");\nvar MentionAutoCompleteRow = require(\"components/chat_input/mention_autocomplete_row\");\nvar EmoticonAutoCompleteItem = require(\"components/chat_input/emoticon_autocomplete_item\");\nvar SlashCommandAutoCompleteItem = require(\"components/chat_input/slash_command_autocomplete_item\");\nvar emoticons = require('helpers/emoticons');\nvar cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: \"AutoCompleteBox\",\n\n  getDefaultProps: function() {\n    return {\n      list: []\n    };\n  },\n\n  _boxParams: {\n    boxArrowType: \"left\",\n    arrow_offsets: {\n      left: 30,\n      top: 10\n    },\n    offset_left: 30,\n    offset_top: 10,\n    offset_left_shift: 200//boxWidth - 30px - 30px\n  },\n\n  componentDidMount: function(){\n    this._positionAutoComplete();\n  },\n\n  componentDidUpdate: function() {\n    this._positionAutoComplete();\n  },\n\n  _positionAutoComplete: function () {\n    if (!this.refs.caret) {\n      return;\n    }\n    var arrowOffsets = this._boxParams.arrow_offsets;\n    var $acBox = $(ReactDOM.findDOMNode(this.refs.acBox));\n    var $caret = $(ReactDOM.findDOMNode(this.refs.caret)).find(\".hc-textarea-caret\");\n    var $textarea = $(ReactDOM.findDOMNode(this.props.textarea_ref));\n    var textareaWidth = $textarea.width();\n    var caretLeftPosition = $caret.position().left;\n\n    let css = {};\n    let left;\n    let top;\n    const isRightBox = this._isRightBoxType(textareaWidth, caretLeftPosition);\n\n    if ($caret.length){\n      left = $caret.position().left - arrowOffsets.left;\n      top = $caret.position().top - $textarea.scrollTop() - $(ReactDOM.findDOMNode(this.refs.container)).height() - arrowOffsets.top;\n\n      if (isRightBox){\n        this._boxParams.boxArrowType = 'right';\n        left -= this._boxParams.offset_left_shift;\n      } else {\n        this._boxParams.boxArrowType = 'left';\n      }\n      css.left = left + 'px';\n      css.top = top + 'px';\n    } else {\n      top = $textarea.scrollTop() - $(ReactDOM.findDOMNode(this.refs.container)).height() - arrowOffsets.top;\n      css.top = top + 'px';\n    }\n\n    $acBox.css(css);\n  },\n\n  _isRightBoxType: function (textareaWidth, caretLeftPosition) {\n    return textareaWidth / 2 < caretLeftPosition;\n  },\n\n  _getMentionAutoCompleteContent: function () {\n    var results = this.props.list.map((user, idx) => {\n      var isSelected = false,\n          mention_match_markup = `@${user.mention_match_markup}`;\n      if (idx === this.props.selected_item) {\n        isSelected = true;\n      }\n      return <MentionAutoCompleteRow show={user.presence.show}\n                                     hidden_presence={user.hidden_presence}\n                                     photo_url={user.photo_url}\n                                     name_match_markup={user.name_match_markup}\n                                     mention_match_markup={mention_match_markup}\n                                     selected={isSelected}\n                                     should_animate_avatar={this.props.should_animate_avatar}\n                                     key={idx}\n                                     idx={idx}\n                                     user_id={user.id}/>;\n    });\n    return results;\n  },\n\n  _getEmoticonAutoCompleteContent: function () {\n    var results = this.props.list.map((emoticon, idx) => {\n      var isSelected = false;\n      if (idx === this.props.selected_item) {\n        isSelected = true;\n      }\n      return <EmoticonAutoCompleteItem src={_.get(emoticons._getEmoticonInfo(emoticon.shortcut), 'src')}\n                                        match_markup={emoticon.match_markup}\n                                        shortcut={emoticon.shortcut}\n                                        selected={isSelected}\n                                        key={idx}\n                                        idx={idx}/>;\n    });\n    return results;\n  },\n\n  _getSlashCommandAutoCompleteContent(){\n    var results = this.props.list.map((command, idx) => {\n      var isSelected = false;\n      if (idx === this.props.selected_item) {\n        isSelected = true;\n      }\n      return <SlashCommandAutoCompleteItem\n                                       name={command.name}\n                                       description={command.description}\n                                       usage={command.usage}\n                                       selected={isSelected}\n                                       key={idx}\n                                       idx={idx}/>;\n    });\n    return results;\n  },\n\n  _getAutoCompleteContent: function () {\n    var content;\n    if (this.props.type) {\n      switch (this.props.type) {\n        case \"mention\":\n          content = this._getMentionAutoCompleteContent();\n          break;\n        case \"emoticon\":\n          content = this._getEmoticonAutoCompleteContent();\n          break;\n        case \"slash_command\":\n          content = this._getSlashCommandAutoCompleteContent();\n          break;\n      }\n    }\n    return content;\n  },\n\n  render: function() {\n    var content = this._getAutoCompleteContent(),\n      isRight = (this._boxParams.boxArrowType === 'right'),\n      classes = cx({\n        'aui-inline-dialog': true,\n        'show': this.props.list.length > 0\n      }),\n      arrowClasses = cx(\n        'aui-inline-dialog-arrow', 'arrow', 'aui-css-arrow', 'aui-bottom-arrow',\n        {\n          'right': isRight\n        });\n\n    return (\n      <div>\n        <div className={classes} ref=\"acBox\">\n          <div className=\"aui-inline-dialog-contents contents\" ref=\"container\">\n            <ul>\n            {content}\n            </ul>\n          </div>\n          <div className={arrowClasses}></div>\n        </div>\n        <TextareaCaretMirror ref=\"caret\" textarea_ref={this.props.textarea_ref} />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/autocomplete/auto_complete_box.js\n **/","var utils = require('helpers/utils');\n\nmodule.exports = React.createClass({\n\n  displayName: \"TextAreaCaretMirror\",\n\n  render: function() {\n    if (!this.props.textarea_ref) {\n      return <div/>;\n    }\n    var $src = $(this.props.textarea_ref);\n    if ($src.length < 1) {\n      return <div/>;\n    }\n    var caretPosn = utils.getCaretPosition($src.get(0)),\n        pre = $src.val().substring(0, caretPosn),\n        post = $src.val().substring(caretPosn),\n        containerStyles = {\n          'position': 'absolute',\n          'overflow': 'auto',\n          'whiteSpace': 'pre-wrap',\n          'wordWrap': 'break-word',\n          'top': 0,\n          'left': -9999\n        },\n        caretStyles = {\n          'position': 'absolute'\n        },\n        stylesToMirror = [\n          // Box Styles.\n          'boxSizing', 'height', 'width', 'paddingBottom'\n          , 'paddingLeft', 'paddingRight', 'paddingTop'\n\n          // Font stuff.\n          , 'fontFamily', 'fontSize', 'fontStyle'\n          , 'fontVariant', 'fontWeight'\n\n          // Spacing etc.\n          , 'wordSpacing', 'letterSpacing', 'lineHeight'\n          , 'textDecoration', 'textIndent', 'textTransform'\n\n          // The direction.\n          , 'direction'\n        ];\n    for (var i = 0; i < stylesToMirror.length; i++) {\n      containerStyles[stylesToMirror[i]] = $src.css(stylesToMirror[i]);\n    }\n    return (\n      <div style={containerStyles}>\n        {pre}\n        <span ref=\"caret\" className=\"hc-textarea-caret\" style={caretStyles}></span>\n        {post}\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/autocomplete/textarea_caret_mirror.js\n **/","import AutoCompleteActions from 'actions/autocomplete_actions';\nimport Avatar from 'components/common/avatars/person_avatar';\nimport cx from 'classnames';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: 'MentionAutoCompleteRow',\n\n  mixins: [PureRenderMixin],\n\n  _onMentionMenuItemHover(evt) {\n    if (mousePosition.hasChanged(evt)){\n      AutoCompleteActions.menuItemHovered({\n        type: 'mention',\n        index: this.props.idx\n      });\n    }\n  },\n\n  _onMentionSelected: function () {\n    AutoCompleteActions.mentionSelected();\n  },\n\n  _getAvatar: function () {\n    let avatar;\n\n    if (this.props.photo_url) {\n      avatar = <Avatar size='small'\n                       presence={this.props.show}\n                       avatar_url={this.props.photo_url}\n                       active={true}\n                       shouldAnimate={this.props.should_animate_avatar}\n                       key={this.props.user_id}\n                       uid={this.props.user_id}/>;\n    } else {\n      avatar = (\n        <span className='aui-avatar aui-avatar-project aui-avatar-small'>\n          <span className='aui-avatar-inner'>\n            <div className='mention-group-icon'></div>\n          </span>\n        </span>\n      );\n    }\n    return avatar;\n  },\n\n  render: function () {\n    let avatar = this._getAvatar(),\n        classes = cx({\n          'hc-autocomplete-item': true,\n          'hc-autocomplete-item-selected': this.props.selected\n        });\n\n    return (\n      <li className={classes} onClick={this._onMentionSelected} data-index={this.props.idx}>\n        <div className='hc-ac-row' onMouseOver={this._onMentionMenuItemHover}>\n          <div className='hc-ac-avatar'>\n            {avatar}\n          </div>\n          <span className='hc-ac-name' dangerouslySetInnerHTML={{__html: this.props.name_match_markup || ''}} />\n          <span className='hc-ac-mention-name' dangerouslySetInnerHTML={{__html: this.props.mention_match_markup || ''}} />\n        </div>\n      </li>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/mention_autocomplete_row.js\n **/","import AutoCompleteActions from\"actions/autocomplete_actions\";\nimport cx from\"classnames\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport link_utils from 'helpers/link_utils';\nimport mousePosition from 'helpers/mouse_position';\n\nconst MAX_WIDTH = 20;\n\nexport default React.createClass({\n\n  displayName: \"EmoticonAutoCompleteItem\",\n\n  propTypes: {\n    \"match_markup\": React.PropTypes.string.isRequired\n  },\n\n  mixins: [PureRenderMixin],\n\n  _onEmoticonMenuItemHover(evt) {\n    if (mousePosition.hasChanged(evt)) {\n      AutoCompleteActions.menuItemHovered({\n        type: 'emoticon',\n        index: this.props.idx\n      });\n    }\n  },\n\n  _onEmoticonSelected: function () {\n    AutoCompleteActions.emoticonSelected();\n  },\n\n  _onRetinaImageNonExistent: function (evt) {\n    evt.target.src = link_utils.remove_resolution(evt.target.src);\n  },\n\n  _getWidth(){\n    if (this.props.width && this.props.width < MAX_WIDTH){\n      return this.props.width;\n    }\n    return MAX_WIDTH;\n  },\n\n  render: function () {\n    var classes = cx({\n      'hc-autocomplete-item': true,\n      'hc-autocomplete-item-selected': this.props.selected\n    });\n\n    return (\n      <li className={classes} onClick={this._onEmoticonSelected} data-index={this.props.idx}>\n        <div onMouseOver={this._onEmoticonMenuItemHover}>\n          <div className=\"hc-ac-preview\">\n            <img src={this.props.src} alt={this.props.shortcut} key={this.props.shortcut} onError={this._onRetinaImageNonExistent}/>\n          </div>\n          <span className=\"hc-ac-name\" dangerouslySetInnerHTML={{__html: this.props.match_markup || ''}} ></span>\n        </div>\n      </li>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/emoticon_autocomplete_item.js\n **/","import AutoCompleteActions from \"actions/autocomplete_actions\";\nimport cx from \"classnames\";\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport mousePosition from 'helpers/mouse_position';\n\nexport default React.createClass({\n\n  displayName: \"SlashCommandAutoCompleteItem\",\n\n  propTypes: {\n    name: React.PropTypes.string.isRequired,\n    usage: React.PropTypes.string,\n    description: React.PropTypes.string.isRequired\n  },\n\n  mixins: [PureRenderMixin],\n\n  _onMenuItemHover(evt) {\n    if (mousePosition.hasChanged(evt)){\n      AutoCompleteActions.menuItemHovered({\n        type: 'slash_command',\n        index: this.props.idx\n      });\n    }\n  },\n\n  _onMenuItemSelected() {\n    AutoCompleteActions.slashCommandSelected();\n  },\n\n  render() {\n    let classes = cx({\n      'hc-autocomplete-item': true,\n      'hc-autocomplete-item-selected': this.props.selected\n    });\n\n    return (\n      <li className={classes} onClick={this._onMenuItemSelected} data-index={this.props.idx}>\n        <div onMouseOver={this._onMenuItemHover}>\n          <div className=\"hc-ac-name-container\">\n            <span className=\"hc-ac-name\">{this.props.name}</span>\n            <span className=\"hc-ac-usage\">{this.props.usage}</span>\n          </div>\n          <div className=\"hc-ac-description\">{this.props.description}</div>\n        </div>\n      </li>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/slash_command_autocomplete_item.js\n **/","var AutoCompleteBox = require('components/common/autocomplete/auto_complete_box');\nvar utils = require('helpers/utils');\n\nmodule.exports = React.createClass({\n\n  displayName: \"EmoticonAutoComplete\",\n\n  componentDidUpdate: function () {\n    if (this.props.emoticon_results_count > 0) {\n      this._scrollIntoView();\n    }\n  },\n\n  _scrollIntoView: function () {\n    var $node = $(ReactDOM.findDOMNode(this));\n    var container = $node.find('.aui-inline-dialog-contents.contents').get(0);\n\n    utils.scrollIntoViewIfNeeded($node.find('li.hc-autocomplete-item-selected').get(0), container, false);\n  },\n\n  render: function() {\n    return (\n      <div className=\"hc-emoticon-ac hc-chat-input-autocomplete\">\n        <AutoCompleteBox key=\"emoticon_auto_complete\"\n                          type=\"emoticon\"\n                          path_prefix={this.props.path_prefix}\n                          list={this.props.emoticon_list}\n                          box_type={this.props.box_type}\n                          textarea_ref={this.props.textarea_ref}\n                          selected_item={this.props.emoticon_selected_item}\n                          ref=\"acBox\" />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/emoticon_auto_complete.js\n **/","import AutoCompleteBox from 'components/common/autocomplete/auto_complete_box';\nimport utils from 'helpers/utils';\n\nexport default React.createClass({\n\n  displayName: \"SlashCommandAutoComplete\",\n\n  componentDidUpdate() {\n    if (this.props.slash_command_results_count > 0) {\n      this._scrollIntoView();\n    }\n  },\n\n  _scrollIntoView() {\n    var $node = $(ReactDOM.findDOMNode(this));\n    var container = $node.find('.aui-inline-dialog-contents.contents').get(0);\n\n    utils.scrollIntoViewIfNeeded($node.find('li.hc-autocomplete-item-selected').get(0), container, false);\n  },\n\n  render() {\n    return (\n      <div className=\"hc-slash-command-ac hc-chat-input-autocomplete\">\n        <AutoCompleteBox key=\"slash_command_auto_complete\"\n                          type=\"slash_command\"\n                          offset_left={-20}\n                          list={this.props.slash_commands_list}\n                          selected_item={this.props.slash_command_selected_item}\n                          textarea_ref={this.props.textarea_ref}\n                          ref=\"acBox\" />\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/slash_command_auto_complete.js\n **/","import IntegrationDropDownAction from 'components/common/actions_dropdown/integration_dropdown_action.js';\nimport DropDownAction from 'components/common/actions_dropdown/dropdown_action.js';\nimport DropDown from 'components/common/actions_dropdown/actions_dropdown';\nimport FileUploader from './file_uploader';\nimport FileErrorTooltip from './file_error_tooltip';\nimport Tooltip from 'components/tooltip/tooltip';\nimport FileUploaderActions from 'actions/file_uploader_actions';\nimport ChatInputActions from 'actions/chat_input_actions';\nimport IntegrationsStore from 'stores/integrations_store';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport IntegrationsHelper from 'helpers/integration_helper';\nimport strings from 'strings/chat_input_strings';\nimport cx from 'classnames';\nimport utils from 'helpers/utils';\n\nfunction getState() {\n  return {\n    integrations: IntegrationsStore.getExtensionsByLocation(\"hipchat.input.action\"),\n    integrations_enabled: IntegrationsStore.get('enabled')\n  };\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"ChatActionsButton\",\n\n  getInitialState() {\n    return getState();\n  },\n\n  componentDidMount() {\n    IntegrationsStore.on([\"change:integrations\", \"change:integrations_enabled\", \"change:active_chat\"], this._updateState);\n  },\n\n  componentWillUpdate(nextProps) {\n    if (nextProps.attachment_expanded && !this.props.attachment_expanded) {\n      ChatInputActions.dismissActionsDropDown();\n    }\n    if (nextProps.active_chat !== this.props.active_chat) {\n      this._clearFileInputValue();\n    }\n  },\n\n  componentWillUnmount() {\n    IntegrationsStore.off([\"change:integrations\", \"change:integrations_enabled\", \"change:active_chat\"], this._updateState);\n  },\n\n  _updateState() {\n    return this.setState(getState());\n  },\n\n  _onFileChosen(evt) {\n    FileUploaderActions.fileChosen(evt, \"browse\");\n  },\n\n  _openFilePicker(evt) {\n    evt.preventDefault();\n    if (!this.props.attachment_expanded) {\n      FileUploaderActions.openFilePicker();\n    }\n  },\n\n  _clearFileInputValue() {\n    var node = ReactDOM.findDOMNode(this.refs.fileInput);\n    if (node) {\n      node.value = null;\n    }\n  },\n\n  _getContentsState() {\n    var val = \"upload\";\n    if (this.props.attachment_expanded) {\n      val = \"uploading\";\n    } else if (this.state.integrations_enabled\n      && this.state.integrations.length > 0\n      && this.props.chat_type === \"groupchat\") {\n      val = \"integrations\";\n    } else {\n      val = \"upload\";\n    }\n    return val;\n  },\n\n  _getFileIcon() {\n    return this._getContentsState() === \"uploading\" ?\n      utils.file.get_icon_class(this.props.file_name) :\n      \"icon-attachment\";\n  },\n\n  _getAttachButton() {\n    var fileIcon = this._getFileIcon();\n    var linkClasses = cx(\"aui-icon\", \"hipchat-icon-small\", \"hc-file-icon\", fileIcon);\n\n    return (\n      <a className=\"hc-attach\" onClick={this._openFilePicker}>\n        <span className={linkClasses} title={strings.attachment}></span>\n      </a>\n    );\n  },\n\n  _getIntegrationsDropDown() {\n    return <DropDown dropdown_id=\"input_actions_dropdown\"\n                      icon=\"aui-iconfont-add\"\n                      lazy_options={this._renderOptions}\n                      onShow={this._onShow}\n                      location=\"above\"\n                      default_option=\"last\"/>;\n  },\n\n  _getFileButtonContents(contentsState) {\n    var action;\n\n    switch (contentsState) {\n      case \"uploading\":\n      case \"upload\":\n        action = this._getAttachButton();\n        break;\n\n      case \"integrations\":\n        action = this._getIntegrationsDropDown();\n        break;\n    }\n    return action;\n  },\n\n  render() {\n    var contentsState = this._getContentsState();\n    var action = this._getFileButtonContents(contentsState);\n    let showFileError = this.props.file_error && this.props.attachment_expanded;\n    var fileError = (showFileError) ? this._getFileError() : null;\n    var fileBtnClasses = cx({\n      \"hc-file-btn\": contentsState === \"uploading\" || contentsState === \"upload\",\n      \"has-file\": contentsState === \"uploading\",\n      \"input_actions_trigger\": contentsState === \"integrations\",\n      \"hidden\": !this.props.can_share_files\n    });\n\n    return (\n      <td id=\"hc-chat-actions\" ref=\"fileBtn\" className={fileBtnClasses}>\n        <input className=\"hidden\" ref=\"fileInput\" type=\"file\" id=\"fileInput\" onChange={this._onFileChosen} multiple=\"false\"/>\n        <Tooltip type=\"upload_preview\"/>\n        {fileError}\n        {action}\n        <FileUploader\n          on_keydown={this.props.on_keydown}\n          file_name={this.props.file_name}\n          file_error={this.props.file_error}\n          file_extension={this.props.file_extension}\n          attachment_expanded={this.props.attachment_expanded}\n          uploading={this.props.uploading}\n          active_chat={this.props.active_chat} />\n      </td>\n    );\n  },\n\n  _renderOptions() {\n    var options = _.map(this.state.integrations, action =>\n      <IntegrationDropDownAction key={IntegrationsHelper.to_full_key(action.addon_key, action.key)}\n                                 action={action}\n                                 msg={this.props.msg}/>);\n\n\n\n    return [\n      <ul key=\"items\" className=\"aui-list-truncate\">\n        {options}\n        <DropDownAction onClick={this._openFilePicker}\n                        key=\"upload-file\"\n                        item_id=\"hc-chat-actions-upload-file\"\n                        title={strings.upload_file}/>\n      </ul>,\n      <div key=\"arrow\" id=\"hc-chat-actions-arrow\"></div>\n    ];\n  },\n\n  _onShow: function () {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: 'hipchat.client.integrations.input.action.open'\n    });\n  },\n\n  _getFileError: function () {\n    return (\n      <FileErrorTooltip anchor={ReactDOM.findDOMNode(this.refs.fileBtn)} error={this.props.file_error_message}/>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/actions/chat_action_button.js\n **/","module.exports = React.createClass({\n\n  displayName: \"GenericDropDownAction\",\n\n  propTypes: {\n    onClick: React.PropTypes.func,\n    title: React.PropTypes.string,\n    item_id: React.PropTypes.string\n  },\n\n  componentDidMount: function () {\n    // Manually attach event listener, as event is triggered from AUI\n    ReactDOM.findDOMNode(this.refs.element).addEventListener(\"click\", this._onClick);\n  },\n\n  componentWillUnmount: function () {\n    ReactDOM.findDOMNode(this.refs.element).removeEventListener(\"click\", this._onClick);\n  },\n\n  render() {\n    return <li>\n      <a id={this.props.item_id} ref=\"element\">{this.props.title}</a>\n    </li>;\n  },\n\n  _onClick: function (evt) {\n    this.props.onClick(evt);\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/actions_dropdown/dropdown_action.js\n **/","import FileUploaderActions from 'actions/file_uploader_actions';\nimport ChatInputActions from 'actions/chat_input_actions';\nimport strings from 'strings/chat_input_strings';\nimport cx from 'classnames';\nimport utils from 'helpers/utils';\n\nmodule.exports = React.createClass({\n\n  displayName: \"ChatInputFileUploader\",\n\n  componentWillUpdate(nextProps) {\n    if (nextProps.attachment_expanded && !this.props.attachment_expanded) {\n      _.defer(this._checkShouldFocus);\n    }\n  },\n\n  _checkShouldFocus: function () {\n    var re = new RegExp(`^${strings.upload_default_name}\\\\.`);\n    if (re.test(this.props.file_name)) {\n      this._focusAndSelect();\n    }\n  },\n\n  _focusAndSelect: function () {\n    var input = ReactDOM.findDOMNode(this.refs.name_input);\n    if (input !== document.activeElement) {\n      input.focus();\n    }\n  },\n\n  _onFileNameClick: function (e) {\n    this._onFocus(e);\n  },\n\n  _onFileNameChange: function (e) {\n    FileUploaderActions.changeFileName({file_name: e.target.value});\n  },\n\n  _onFocus: function (e) {\n    var input = e.target;\n    // Perform the selection after a timeout since the default behavior will be to \"select everything\"\n    _.defer(function() {\n      var dotIndex = input.value.lastIndexOf('.');\n      if (dotIndex !== -1) {\n        input.setSelectionRange(0, dotIndex);\n      }\n    });\n  },\n\n  _onBlur: function (e) {\n    var input = e.target;\n    if (!input.value) {\n      input.value = `${strings.upload_default_name}.${this.props.file_extension}`;\n    } else if (!!this.props.file_extension && !/\\.\\S+$/.test(input.value)) {\n      // Ensure the filename ends with an extension\n      if (input.value.indexOf('.') === -1) {\n        input.value += `.${this.props.file_extension}`;\n      } else {\n        input.value += this.props.file_extension;\n      }\n    }\n    this._onFileNameChange(e);\n  },\n\n  _onKeyDown: function (e) {\n    if (e.keyCode === utils.keyCode.Tab) {\n      // Don't allow shift-tab (only tab forward into message input)\n      if (e.shiftKey) {\n        e.preventDefault();\n      }\n    } else {\n      this.props.on_keydown(e);\n    }\n  },\n\n  _closeAttachmentInput: function (e) {\n    e.stopPropagation();\n    var fileInput = document.getElementById('fileInput');\n    if (fileInput) {\n      fileInput.value = null;\n    }\n    ChatInputActions.closeTooltip({type: 'upload_preview'});\n    ChatInputActions.closeAttachment({jid: this.props.active_chat});\n  },\n\n  render() {\n    var uploadClassNames = cx({hidden: !this.props.attachment_expanded, \"upload-input\": true}),\n        linkClassNames = cx({hidden: this.props.uploading, \"close-upload\": true}),\n        progressBarClasses = cx({hidden: !this.props.uploading, \"aui-progress-indicator\": true}),\n        textInputClasses = cx({hidden: this.props.uploading, error: this.props.file_error});\n\n    return (\n      <div ref=\"file_uploader\" className={uploadClassNames}>\n        <input ref=\"name_input\" id=\"upload-name-input\" type=\"text\" value={this.props.file_name}\n               onClick={this._onFileNameClick}\n               onChange={this._onFileNameChange}\n               onFocus={this._onFocus}\n               onBlur={this._onBlur}\n               className={textInputClasses}\n               onKeyDown={this._onKeyDown}/>\n        <a ref=\"file_link\" className={linkClassNames} onClick={this._closeAttachmentInput}>\n          <span className=\"aui-icon hipchat-icon-small hc-close-icon icon-close\"/>\n        </a>\n        <div ref=\"upload_progress\" id=\"upload-progress-bar\" className={progressBarClasses}>\n          <span className=\"aui-progress-indicator-value\"></span>\n        </div>\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/actions/file_uploader.js\n **/","module.exports = React.createClass({\n\n  displayName: \"FileErrorTooltip\",\n\n  componentDidMount: function(){\n    this._positionTooltip();\n  },\n\n  componentDidUpdate: function(){\n    this._positionTooltip();\n  },\n\n  _positionTooltip: function() {\n    if (!this.props.anchor) {\n      return true;\n    }\n    var elem = ReactDOM.findDOMNode(this),\n        anchor = this.props.anchor,\n        bottom = anchor.offsetHeight,\n        left = -elem.offsetWidth / 2 + anchor.offsetWidth / 2;\n\n    elem.style.bottom = bottom + 'px';\n    elem.style.left = left + 'px';\n  },\n\n  render: function () {\n    return (\n      <div className=\"tipsy aui-form-notification-tooltip aui-form-notification-tooltip-error tipsy-s\" role=\"tooltip\">\n        <div className=\"tipsy-arrow tipsy-arrow-s\"></div>\n        <div className=\"tipsy-inner\">{this.props.error}</div>\n      </div>\n    );\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/chat_input/actions/file_error_tooltip.js\n **/","var cx = require('classnames');\n\nmodule.exports = React.createClass({\n\n  displayName: 'ResizeOverlay',\n\n  getDefaultProps: function() {\n    return {\n      'show-overlay': false\n    };\n  },\n\n  render: function(){\n      var classNames = cx({\n        'overlay': true,\n        'resize-overlay': true,\n        'show-overlay': this.props.show_overlay\n      });\n\n      return (\n        <div className={classNames}></div>\n      );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/overlays/resize-overlay.js\n **/","/*global FileViewer, videojs*/\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport FileViewerActions from 'actions/file_viewer_actions';\nimport AnalyticsDispatcher from 'dispatchers/analytics_dispatcher';\nimport fileHelper from 'helpers/file_helper';\nimport logger from 'helpers/logger';\nimport utils from 'helpers/utils';\nimport RosterStore from 'stores/roster_store';\nimport AppStore from 'stores/application_store';\nimport spi from 'spi';\n\nvar normalize = fileHelper.transformForFileViewer.bind(fileHelper);\nvar isSupported = fileHelper.fileViewerSupports.bind(fileHelper);\nvar guessMimeType = fileHelper._guessMimeType.bind(fileHelper);\n\n/**\n * Creates files loader function for FileViewer\n *\n * @returns {Function}\n */\nfunction getModuleLoader () {\n\n  let getAssetBaseUri = function () {\n    var isMacNative = utils.clientSubType.isMac(AppStore.get('client_subtype')),\n        assetBasePath = AppStore.get('asset_base_uri');\n\n    if (isMacNative) {\n      assetBasePath = '/wc/';\n    }\n    return assetBasePath;\n  };\n\n  let toInternal = function (name) {\n    return {\n      'pdf-viewer': 'pdf-view'\n    }[name];\n  };\n\n  let modules = {\n    'pdf-config': {\n      workerSrc: getAssetBaseUri() + 'vendor/pdfjs/pdf.worker.min.js',\n      viewer: getAssetBaseUri() + 'vendor/pdfjs/'\n    },\n    'pdf-viewer': null\n  };\n\n  return function (moduleName) {\n    if (!modules[moduleName]) {\n      let dfd = new $.Deferred();\n      let assetBaseUri = getAssetBaseUri();\n\n      if (moduleName === 'pdf-viewer') {\n        spi.fetchPdfViewerResources(moduleName, assetBaseUri)\n          .then((data) => {\n            dfd.resolve(FileViewer.require(toInternal(moduleName)));\n          })\n          .catch((err) => {\n            dfd.reject(err);\n          });\n\n      } else if (moduleName === 'pdf-config') {\n        dfd.resolve(modules[moduleName]);\n\n      } else {\n        dfd.reject(`Module ${moduleName} is undefined.`);\n      }\n\n      modules[moduleName] = dfd.promise();\n    }\n\n    return modules[moduleName];\n  };\n}\n\nmodule.exports = React.createClass({\n\n  displayName: 'FileViewer',\n\n  componentWillMount: function(){\n    AppDispatcher.register({\n      'open-in-file-viewer': this._open,\n      'open-external-file-in-file-viewer': this._openExternalFile,\n      'file-download-stop': this._stopDownloadIndicator,\n      'close-file-viewer': this._closeFileViewer\n    });\n  },\n\n  componentWillUnmount: function () {\n    AppDispatcher.unregister({\n      'open-in-file-viewer': this._open,\n      'open-external-file-in-file-viewer': this._openExternalFile,\n      'file-download-stop': this._stopDownloadIndicator,\n      'close-file-viewer': this._closeFileViewer,\n\n      // the following two events may or may not have been registered\n      'files-fetched': this._updateCollection,\n      'links-fetched': this._updateCollection\n    });\n\n    if (this._viewer) {\n\n      if (this._viewer.isOpen()) {\n        this._viewer.close();\n      }\n\n      this._viewer.off();\n      this._viewer = null;\n    }\n  },\n\n  render: function () {\n    var styles = {\n      display: 'none'\n    };\n    return (\n      <div style={styles}></div>\n    );\n  },\n\n  _viewer: null,\n\n  _closeFileViewer: function() {\n    if (this._viewer !== null && this._viewer.isOpen()) {\n      this._viewer.close();\n    }\n  },\n\n  _onViewerClose: function() {\n    let event = document.createEvent('CustomEvent');\n    event.initCustomEvent('click', false, false, null);\n\n    document.dispatchEvent(event);\n\n    FileViewerActions.fileViewerClosed();\n  },\n\n  _open: function (item) {\n    var currentFile = normalize(item);\n\n    if (typeof FileViewer === \"undefined\") {\n      return false;\n    }\n    if (!this._viewer) {\n      this._setupViewer();\n    }\n\n    var filesList = this._combineFilesAndLinks();\n\n    if (!this._filesHaveBeenFetched()) {\n      this._fetchFiles();\n    }\n    if (!this._linksHaveBeenFetched()) {\n      this._fetchLinks();\n    }\n\n    var filesToShow = this._findFilesToShow(currentFile, filesList);\n\n    this._viewer.setFiles(filesToShow);\n    this._viewer.open({ srcDownload: currentFile.srcDownload }, 'main');\n  },\n\n  _openExternalFile: function (data) {\n    var item = data.file;\n    var currentFile = normalize(item);\n\n    if (typeof FileViewer === 'undefined') { return; }\n    if (!this._viewer) { this._setupViewer(); }\n\n    var filesList = data.filesList || [currentFile];\n\n    for (var i = filesList.length - 1; i >= 0; i--) {\n      var tmpfile = filesList[i];\n      if (tmpfile.url === currentFile.url) {\n        tmpfile.src = currentFile.src;\n      }\n      filesList[i] = normalize(tmpfile);\n    }\n\n    var filesToShow = this._findFilesToShow(currentFile, filesList);\n\n    this._viewer.setFiles(filesToShow);\n    this._viewer.open({ srcDownload: currentFile.srcDownload }, 'main');\n  },\n\n  _setupViewer: function () {\n    this._viewer = new FileViewer({\n      metaBar: {\n        defaultAvatar: ''\n      },\n      moduleBackend: getModuleLoader(),\n      analyticsBackend: this._sendAnalytics,\n      isPreviewGenerated: this._isPreviewGenerated,\n      generatePreview: this._fetchSignedURL\n    });\n\n    this.debouncedInitiateDownload = _.debounce(this._initiateDownload, 2000, {leading: true, trailing: false});\n\n    AJS.I18n.keys['cp.error.default.header'] = \"We couldn't authenticate your account.\";\n\n    this._viewer.on('fv.close', this._onViewerClose);\n    this._viewer.on('fv.download', this._onFileDownload);\n\n    videojs.options.techOrder = ['html5', 'youtube'];\n\n    AppDispatcher.register({\n      'files-fetched': this._updateCollection,\n      'links-fetched': this._updateCollection\n    });\n  },\n\n  _onFileDownload(e) {\n    let file = this._viewer.getCurrent();\n    if (file.is_authenticated) {\n      e.preventDefault();\n      e.stopPropagation();\n      this.debouncedInitiateDownload(file);\n    }\n  },\n\n  _initiateDownload(file) {\n    // this._startDownloadIndicator();\n    this._fetchSignedURL(file, true).then((data) => {\n      spi.downloadFile(data);\n    }).fail(error => {\n      logger.warn(error);\n    });\n  },\n\n  _startDownloadIndicator() {\n    _.attempt(() => {\n      this._viewer._view.fileContentView.getLayerForName('content').$el.hide();\n      this._viewer._view.fileContentView.getLayerForName('spinner').startSpin();\n    });\n  },\n\n  _stopDownloadIndicator() {\n    _.attempt(() => {\n      this._viewer._view.fileContentView.getLayerForName('spinner').stopSpin();\n      this._viewer._view.fileContentView.getLayerForName('content').$el.show();\n    });\n  },\n\n  _filesHaveBeenFetched: function () {\n    // We can't check if the files have already been fetched. Therefore, we simply assume they haven't been fetched\n    // if there are not files in the room.\n    return RosterStore.get('files').length;\n  },\n\n  _linksHaveBeenFetched: function () {\n    // We can't check if the links have already been fetched. Therefore, we simply assume they haven't been fetched\n    // if there are not links in the room.\n    return RosterStore.get('links').length;\n  },\n\n  _fetchFiles: function () {\n    AppDispatcher.dispatch('fetch-files', { room: RosterStore.data.active_chat });\n  },\n\n  _fetchLinks: function () {\n    AppDispatcher.dispatch('fetch-links', { room: RosterStore.data.active_chat });\n  },\n\n  _fetchSignedURL(file, download = false) {\n    let deferred = new $.Deferred();\n\n    let resolveCb = data => {\n      deferred.resolve(download ? data.temp_download_url : data.temp_url, guessMimeType(data));\n    };\n\n    let rejectCb = err => {\n      deferred.reject(err);\n    };\n\n    FileViewerActions.fetchSignedFile({url: file.srcDownload || file.attributes.src}, resolveCb, rejectCb);\n    return deferred.promise();\n  },\n\n  _isPreviewGenerated(file) {\n    let deferred = new $.Deferred();\n      if (file.attributes.is_authenticated) {\n        deferred.resolve(false);\n      } else {\n        deferred.resolve(true, file.attributes.url, file.attributes.type);\n      }\n    return deferred;\n  },\n\n  // combines links and files, normalizes and then sorts them by date\n  _combineFilesAndLinks: function () {\n    var files = RosterStore.get('files');\n    var links = RosterStore.get('links').filter(isSupported);\n    return _.sortBy(files.concat(links), 'date').map(normalize);\n  },\n\n  _updateCollection: function () {\n    if (!this._viewer.isOpen()) { return; }\n\n    var filesList = this._combineFilesAndLinks();\n    var currentFile = this._viewer.getCurrent();\n    var currentSrc = currentFile && currentFile.srcDownload;\n\n    var filesToShow = this._findFilesToShow(currentFile, filesList);\n    this._viewer.setFiles(filesToShow, { srcDownload: currentSrc });\n  },\n\n  // In certain cases, the file to be shown show is not part of the files list:\n  //  - The list of files / links has not been fetched yet\n  //  - The file and link lists only include the latest items. However, a user\n  //    can open older files / links via the chat panel\n  //  - Links posted by a bot are not included in the link list.\n  // In those cases, we will only show the selected file and ignore the file/link list.\n  _findFilesToShow: function (currentFile, filesList) {\n    var val;\n    if (this._fileIsInList(currentFile, filesList)) {\n      val = filesList;\n    } else {\n      val = [currentFile];\n    }\n    return val;\n  },\n\n  _fileIsInList: function (file, list) {\n    var match = _.find(list, (x) => {\n          return x.srcDownload === file.srcDownload;\n        });\n\n    return !!match;\n  },\n\n  _sendAnalytics: function (key, data) {\n    AnalyticsDispatcher.dispatch('analytics-event', {\n      name: key,\n      properties: data\n    });\n  }\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/common/file_viewer/file_viewer.js\n **/","import {tipsify} from 'config/app_config';\n\nexport default React.createClass({\n\n  displayName: 'Tipsify',\n  mixin: [React.addons.PureRenderMixin],\n  debouncedMouseOver: null,\n\n  getInitialState() {\n    return ({\n      showTooltip: false,\n      tooltip: '',\n      currentTarget: null\n    });\n  },\n\n  componentWillMount() {\n    this.debouncedMouseOver = _.debounce( e => this._onMouseOver(e), tipsify.delay);\n    document.addEventListener('mouseover', this.debouncedMouseOver);\n    document.addEventListener('mouseout', this._onDocumentMouseOut);\n    window.addEventListener('blur', this._hideTooltip);\n  },\n\n  componentWillUnmount() {\n    document.removeEventListener('mouseover', this.debouncedMouseOver);\n    document.removeEventListener('mouseout', this._onDocumentMouseOut);\n    window.removeEventListener('blur', this._hideTooltip);\n    this.debouncedMouseOver = null;\n  },\n\n  componentDidUpdate() {\n    if (this.refs.content && this.state.currentTarget) {\n      this._positionTooltip();\n    }\n  },\n\n  _onDocumentMouseOut(e) {\n    this.debouncedMouseOver.cancel();\n  },\n\n  _onMouseOver(e) {\n    let target = this._getTarget(e.target);\n    if (!target || this._isSameTarget(target)) { return; }\n\n    let tooltip = this._getTooltip(target);\n    this._showTooltip(tooltip, target);\n  },\n\n  _onMouseOut(e) {\n    if (this._isSameTarget(this._getTarget(e.toElement))) { return; }\n    this._hideTooltip();\n  },\n\n  _onClick() {\n    this._hideTooltip();\n  },\n\n  _getTarget(target) {\n    if (!target || target === document.body) { return null; }\n\n    let iterations = 0,\n        tooltip = null;\n\n    while(target && !tooltip && iterations <= tipsify.max_dom_traverse_depth) {\n      tooltip = this._getTooltip(target);\n      if (tooltip) {\n        return target;\n      }\n      target = target.parentElement;\n      iterations++;\n    }\n\n    return null;\n  },\n\n  _getTooltip(target) {\n    if (!target || target.hasAttribute('data-tipsify-ignore')) {\n      return null;\n    }\n\n    return target.getAttribute('aria-label');\n  },\n\n  _showTooltip(tooltip, target) {\n    this.setState({\n      showTooltip: true,\n      tooltip: this._stripTags(tooltip).replace(/\\n/g, '<br />'),\n      currentTarget: target\n    });\n\n    target.addEventListener('mouseout', this._onMouseOut);\n    target.addEventListener('click', this._onClick);\n  },\n\n  _hideTooltip() {\n    if (!this.state.currentTarget) {\n      return;\n    }\n\n    this.state.currentTarget.removeEventListener('mouseout', this._onMouseOut);\n    this.state.currentTarget.removeEventListener('click', this._onClick);\n\n    this.setState({\n      showTooltip: false,\n      tooltip: '',\n      currentTarget: null\n    });\n  },\n\n  _stripTags(str) {\n    return str.replace(/<\\/?[^>]+>/g, '');\n  },\n\n  _isSameTarget(target) {\n    return target === this.state.currentTarget;\n  },\n\n  _isInvalidPosition(rect) {\n    return rect.left === 0 && rect.right === 0 && rect.top === 0 && rect.bottom === 0 && rect.width === 0 && rect.height === 0;\n  },\n\n  _positionTooltip() {\n    let content = ReactDOM.findDOMNode(this.refs.content);\n    content.style.padding = '0'; // Reset padding to make sure that we the correct width of the element\n\n    let contentRect = content.getBoundingClientRect(),\n        bodyRect = document.body.getBoundingClientRect(),\n        targetRect = this.state.currentTarget.getBoundingClientRect(),\n        left = targetRect.left + ((targetRect.width - contentRect.width) / 2),\n        top = targetRect.top + targetRect.height + tipsify.distance,\n        overflowX = (left + contentRect.width) - (bodyRect.width - tipsify.window_margin),\n        overflowY = (top + contentRect.height) - (bodyRect.height - tipsify.window_margin);\n\n    if (this._isInvalidPosition(targetRect)) {\n      this._hideTooltip();\n      return;\n    }\n\n    if (overflowX > 0) {\n      left -= overflowX;\n      content.style.padding = `0 ${overflowX * 2}px 0 0`; // This is needed for repositioning the arrow\n    }\n\n    if (overflowY > 0) {\n      top = targetRect.top - contentRect.height - tipsify.distance;\n      content.className = 'tipsify-content reversed';\n    }\n\n    content.style.left = `${left}px`;\n    content.style.top = `${top}px`;\n\n    AJS.layer(content);\n  },\n\n  _renderTooltip() {\n    if (!this.state.showTooltip) {\n      return null;\n    }\n\n    let tooltip = { __html: this.state.tooltip };\n\n    return (\n      <div className=\"tipsify-content\" ref=\"content\">\n        <div className=\"tipsify-content-inner\" dangerouslySetInnerHTML={tooltip} />\n      </div>\n    );\n  },\n\n  render() {\n    let tooltip = this._renderTooltip();\n    return (\n      <div id=\"tipsify\">\n        {tooltip}\n      </div>\n    );\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/tipsify/tipsify.js\n **/","import Store from 'lib/core/store';\nimport AppStore from 'stores/application_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport router from '../routes';\nimport logger from 'helpers/logger';\n\nclass WindowStore extends Store {\n\n  constructor() {\n    super();\n\n    this.router = router();\n    this.data = {\n      active_chat: '',\n      initialized: false\n    };\n    this.throttledSelectRoom = _.throttle((data) => {\n      this.setHash(data.jid);\n    }, 100, {leading: true, trailing: false});\n    this.registerCallbacks();\n  }\n\n  registerCallbacks() {\n    AppDispatcher.registerOnce({\n      'hc-init': () => {\n        this.setBodyClasses();\n      },\n      'before:app-state-ready': () => {\n        if (window.location.pathname === '/chat/search') {\n          this.setHash(PreferencesStore.get('chatToFocus'));\n        } else {\n          this.router.route(window.location.pathname + window.location.search);\n        }\n        this.data.initialized = true;\n      }\n    });\n    AppDispatcher.register({\n      'set-route': (data) => {\n        if (this.data.initialized && data.jid !== this.data.active_chat) {\n          this.throttledSelectRoom(data);\n        }\n      },\n      'set-multiple-routes': (data) => {\n        if (this.data.initialized && data.jid !== this.data.active_chat) {\n          this.setHash(data.jid);\n        }\n      },\n      'updated:active_chat': (jid) => {\n        this.data.active_chat = jid;\n      },\n      'updated:preferences': () => {\n        this.setBodyClasses();\n      }\n    });\n  }\n\n  setHash(jid) {\n    var allRooms = AppStore.get(\"allRooms\");\n    var newPath = this.router.reverse(jid, allRooms);\n    if (newPath !== window.location.pathname){\n      try {\n        this.router.route(newPath);\n      } catch (err){\n        logger.error(err);\n        logger.type('router').error(err);\n      }\n    }\n  }\n\n  setBodyClasses() {\n    var classes = [\n          PreferencesStore.getDensity(),\n          PreferencesStore.getTheme()\n        ].join(' '),\n        $body = document.body;\n\n    if ($body.className !== classes) {\n      $body.className = classes;\n    }\n  }\n\n}\n\nmodule.exports = new WindowStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/window_store.js\n **/","import page from 'page';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppStore from 'stores/application_store';\nimport Utils from 'helpers/utils';\nimport strings from 'strings/chat_panel_strings';\nimport IntegrationsActions from \"actions/integrations_actions\";\nimport RouteActions from \"actions/route_actions\";\n\nfunction handleInvalidAction() {\n  AppDispatcher.dispatch('show-flag', {\n    type: \"warning\",\n    body: strings.integration_does_not_exist,\n    close: \"auto\",\n    title: \"\"\n  });\n}\n\nfunction handleInvalidRoom(jid) {\n  AppDispatcher.dispatch('show-flag', {\n    type: \"warning\",\n    body: strings.room_doesnt_exist,\n    close: \"auto\",\n    title: \"\"\n  });\n  AppDispatcher.dispatch('close-room', {jid: jid});\n}\n\nvar routes = {\n\n  /**\n   * Supports:\n   * /user/<user_id>\n   * /room/<user jid>\n   * /room/<user half jid -- i.e., 10804_563@... the part before @>\n   * /user/<mention_name>\n   * */\n  '/chat/user/:id': (ctx) => {\n    RouteActions.selectOTO(decodeURIComponent(ctx.params.id));\n  },\n\n  /**\n   * Supports:\n   *   /room/<room_id>\n   *   /room/<room jid's>\n   *   /room/<room half jid's -- i.e., 10804_hc_team@... the part before @>\n   *   /room/<display name>\n   * */\n  '/chat/room/:id': (ctx) => {\n      RouteActions.selectRoom(decodeURIComponent(ctx.params.id));\n  },\n\n  /**\n   * Supports\n   * /room/<room_id>/addon/<plugin_key>/module/<module_key>\n   *\n   */\n  '/chat/room/:roomId/addon/:addonKey/module/:moduleKey': (ctx) => {\n    let roomId = decodeURIComponent(ctx.params.roomId);\n    let addonKey = decodeURIComponent(ctx.params.addonKey);\n    let moduleKey = decodeURIComponent(ctx.params.moduleKey);\n    RouteActions.selectRoom(roomId);\n    if(!IntegrationsActions.open(addonKey, moduleKey)) {\n      handleInvalidAction(roomId, addonKey, moduleKey);\n    }\n  },\n\n  '/chat/lobby': () => {\n    AppDispatcher.dispatch('new-active-chat', {jid: 'lobby'});\n  },\n\n  '/chat/search': () => {\n    AppDispatcher.dispatch('new-active-chat', {jid: 'search'});\n  }\n};\n\nAppDispatcher.registerOnce({\n  'hipchat-client-configured': () => {\n    page.start({hashbang: !AppStore.get('html5_routing_enabled'), click: false});\n    _.forOwn(routes, (cb, path) => {\n      page(path, cb);\n    });\n  }\n});\n\nfunction reverseRoute(jid, allRooms) {\n  let chatType;\n  let pathPrefix = '/chat';\n  let chatPath;\n\n  if (Utils.jid.is_chat(jid)) {\n    chatType = Utils.jid.is_room(jid) ? 'room' : 'user';\n    if (chatType === 'room') {\n      var room = allRooms[jid];\n      if (room) {\n        chatPath = `${pathPrefix}/${chatType}/${encodeURIComponent(room.id)}`;\n      } else {\n        //handle invalid room id and don't set a new route\n        handleInvalidRoom(jid);\n        return false;\n      }\n    } else {\n      var id = Utils.jid.user_id(jid);\n      chatPath = `${pathPrefix}/${chatType}/${encodeURIComponent(id)}`;\n    }\n  } else {\n    chatType = Utils.jid.is_search(jid) ? 'search' : 'lobby';\n    chatPath = `${pathPrefix}/${chatType}`;\n  }\n\n  return chatPath;\n}\n\nexport default function () {\n  return {\n    route: page,\n    reverse: reverseRoute\n  };\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/routes.js\n **/","  /* globals require, module */\n\n  'use strict';\n\n  /**\n   * Module dependencies.\n   */\n\n  var pathtoRegexp = require('path-to-regexp');\n\n  /**\n   * Module exports.\n   */\n\n  module.exports = page;\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = ('undefined' !== typeof document) && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var location = ('undefined' !== typeof window) && (window.history.location || window.location);\n\n  /**\n   * Perform initial dispatch.\n   */\n\n  var dispatch = true;\n\n\n  /**\n   * Decode URL components (query string, pathname, hash).\n   * Accommodates both regular percent encoding and x-www-form-urlencoded format.\n   */\n  var decodeURLComponents = true;\n\n  /**\n   * Base path.\n   */\n\n  var base = '';\n\n  /**\n   * Running flag.\n   */\n\n  var running;\n\n  /**\n   * HashBang option\n   */\n\n  var hashbang = false;\n\n  /**\n   * Previous context, for capturing\n   * page exit events.\n   */\n\n  var prevContext;\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page('*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path));\n      for (var i = 1; i < arguments.length; ++i) {\n        page.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      page['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      page.start(path);\n    }\n  }\n\n  /**\n   * Callback functions.\n   */\n\n  page.callbacks = [];\n  page.exits = [];\n\n  /**\n   * Current path being processed\n   * @type {string}\n   */\n  page.current = '';\n\n  /**\n   * Number of pages navigated to.\n   * @type {number}\n   *\n   *     page.len == 0;\n   *     page('/login');\n   *     page.len == 1;\n   */\n\n  page.len = 0;\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  page.base = function(path) {\n    if (0 === arguments.length) return base;\n    base = path;\n  };\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  page.start = function(options) {\n    options = options || {};\n    if (running) return;\n    running = true;\n    if (false === options.dispatch) dispatch = false;\n    if (false === options.decodeURLComponents) decodeURLComponents = false;\n    if (false !== options.popstate) window.addEventListener('popstate', onpopstate, false);\n    if (false !== options.click) {\n      document.addEventListener(clickEvent, onclick, false);\n    }\n    if (true === options.hashbang) hashbang = true;\n    if (!dispatch) return;\n    var url = (hashbang && ~location.hash.indexOf('#!')) ? location.hash.substr(2) + location.search : location.pathname + location.search + location.hash;\n    page.replace(url, null, true, dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  page.stop = function() {\n    if (!running) return;\n    page.current = '';\n    page.len = 0;\n    running = false;\n    document.removeEventListener(clickEvent, onclick, false);\n    window.removeEventListener('popstate', onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  page.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    if (false !== dispatch) page.dispatch(ctx);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  page.back = function(path, state) {\n    if (page.len > 0) {\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      history.back();\n      page.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    }else{\n      setTimeout(function() {\n        page.show(base, state);\n      });\n    }\n  };\n\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  page.redirect = function(from, to) {\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page(from, function(e) {\n        setTimeout(function() {\n          page.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        page.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  page.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state);\n    page.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) page.dispatch(ctx);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  page.dispatch = function(ctx) {\n    var prev = prevContext,\n      i = 0,\n      j = 0;\n\n    prevContext = ctx;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled(ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n\n    if (hashbang) {\n      current = base + location.hash.replace('#!', '');\n    } else {\n      current = location.pathname + location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    location.href = ctx.canonicalPath;\n  }\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  page.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return page.exit('*', path);\n    }\n\n    var route = new Route(path);\n    for (var i = 1; i < arguments.length; ++i) {\n      page.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   */\n  function decodeURLEncodedURIComponent(val) {\n    if (typeof val !== 'string') { return val; }\n    return decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state) {\n    if ('/' === path[0] && 0 !== path.indexOf(base)) path = base + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    this.path = path.replace(base, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = document.title;\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = parts[0];\n      this.hash = decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Expose `Context`.\n   */\n\n  page.Context = Context;\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    page.len++;\n    history.pushState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    history.replaceState(this.state, this.title, hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options) {\n    options = options || {};\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathtoRegexp(this.path,\n      this.keys = [],\n      options);\n  }\n\n  /**\n   * Expose `Route`.\n   */\n\n  page.Route = Route;\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) return fn(ctx, next);\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Handle \"populate\" events.\n   */\n\n  var onpopstate = (function () {\n    var loaded = false;\n    if ('undefined' === typeof window) {\n      return;\n    }\n    if (document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else {\n        page.show(location.pathname + location.hash, undefined, undefined, false);\n      }\n    };\n  })();\n  /**\n   * Handle \"click\" events.\n   */\n\n  function onclick(e) {\n\n    if (1 !== which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n\n\n    // ensure link\n    // use shadow dom when available\n    var el = e.path ? e.path[0] : e.target;\n    while (el && 'A' !== el.nodeName) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName) return;\n\n\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if (!hashbang && el.pathname === location.pathname && (el.hash || '#' === link)) return;\n\n\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    if (el.target) return;\n\n    // x-origin\n    if (!sameOrigin(el.href)) return;\n\n\n\n    // rebuild path\n    var path = el.pathname + el.search + (el.hash || '');\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (typeof process !== 'undefined' && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n\n    if (path.indexOf(base) === 0) {\n      path = path.substr(base.length);\n    }\n\n    if (hashbang) path = path.replace('#!', '');\n\n    if (base && orig === path) return;\n\n    e.preventDefault();\n    page.show(orig);\n  }\n\n  /**\n   * Event button.\n   */\n\n  function which(e) {\n    e = e || window.event;\n    return null === e.which ? e.button : e.which;\n  }\n\n  /**\n   * Check if `href` is the same origin.\n   */\n\n  function sameOrigin(href) {\n    var origin = location.protocol + '//' + location.hostname;\n    if (location.port) origin += ':' + location.port;\n    return (href && (0 === href.indexOf(origin)));\n  }\n\n  page.sameOrigin = sameOrigin;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/page/index.js\n ** module id = 615\n ** module chunks = 0\n **/","var isarray = require('isarray')\n\n/**\n * Expose `pathToRegexp`.\n */\nmodule.exports = pathToRegexp\nmodule.exports.parse = parse\nmodule.exports.compile = compile\nmodule.exports.tokensToFunction = tokensToFunction\nmodule.exports.tokensToRegExp = tokensToRegExp\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g')\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = []\n  var key = 0\n  var index = 0\n  var path = ''\n  var res\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0]\n    var escaped = res[1]\n    var offset = res.index\n    path += str.slice(index, offset)\n    index = offset + m.length\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1]\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path)\n      path = ''\n    }\n\n    var prefix = res[2]\n    var name = res[3]\n    var capture = res[4]\n    var group = res[5]\n    var suffix = res[6]\n    var asterisk = res[7]\n\n    var repeat = suffix === '+' || suffix === '*'\n    var optional = suffix === '?' || suffix === '*'\n    var delimiter = prefix || '/'\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?')\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    })\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index)\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path)\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length)\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$')\n    }\n  }\n\n  return function (obj) {\n    var path = ''\n    var data = obj || {}\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i]\n\n      if (typeof token === 'string') {\n        path += token\n\n        continue\n      }\n\n      var value = data[token.name]\n      var segment\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j])\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value)\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g)\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      })\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = []\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source)\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options))\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path)\n  var re = tokensToRegExp(tokens, options)\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i])\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {}\n\n  var strict = options.strict\n  var end = options.end !== false\n  var route = ''\n  var lastToken = tokens[tokens.length - 1]\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken)\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i]\n\n    if (typeof token === 'string') {\n      route += escapeString(token)\n    } else {\n      var prefix = escapeString(token.prefix)\n      var capture = token.pattern\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*'\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?'\n        } else {\n          capture = '(' + capture + ')?'\n        }\n      } else {\n        capture = prefix + '(' + capture + ')'\n      }\n\n      route += capture\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?'\n  }\n\n  if (end) {\n    route += '$'\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)'\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || []\n\n  if (!isarray(keys)) {\n    options = keys\n    keys = []\n  } else if (!options) {\n    options = {}\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/path-to-regexp/index.js\n ** module id = 616\n ** module chunks = 0\n **/","module.exports = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/isarray/index.js\n ** module id = 617\n ** module chunks = 0\n **/","import Header from 'components/app_header/header';\nimport InlineDialogManagerMixin from 'components/mixins/inline_dialog_manager_mixin';\nimport InlineDialogContainer from 'components/common/inline_dialog/inline_dialog_container';\nimport FlagsContainer from 'components/common/flags/flags_container';\nimport GuestBodyLayout from 'components/layout/guest_body_layout';\nimport FileViewer from 'components/common/file_viewer/file_viewer';\nimport Tipsify from 'components/tipsify/tipsify';\nimport 'stores/window_store';\n\nexport default React.createClass({\n\n  displayName: \"GuestLayout\",\n\n  mixins: [InlineDialogManagerMixin],\n\n  render () {\n    return (\n      <div id=\"page\">\n        <Header is_guest={this.props.is_guest} />\n        <GuestBodyLayout is_guest={this.props.is_guest} />\n        <InlineDialogContainer is_guest={this.props.is_guest} />\n        <FlagsContainer />\n        <FileViewer ref=\"fileViewer\" items={this.props.files} />\n        <Tipsify />\n      </div>\n    );\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/layout/guest_layout.js\n **/","var GeneralErrorsStore = require(\"stores/general_errors_store\"),\n    LayoutStore = require(\"stores/layout_store\"),\n    MainCol = require(\"components/main_column/main_col\"),\n    GeneralErrorDisplay = require(\"components/app_load/general_error_display\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"GuestBodyLayout\",\n\n  getInitialState: function() {\n    return {\n      errors: GeneralErrorsStore.get('errors'),\n      ready: LayoutStore.get('ready'),\n      web_server: GeneralErrorsStore.get('web_server')\n    };\n  },\n\n  componentDidMount: function() {\n    GeneralErrorsStore.on('change', this._onChange);\n    LayoutStore.on('change:ready', this._onChange);\n  },\n\n  componentWillUnmount: function() {\n    GeneralErrorsStore.off('change', this._onChange);\n    LayoutStore.off('change:ready', this._onChange);\n  },\n\n  componentDidUpdate: function() {\n    $(window).trigger(\"resize\");\n  },\n\n  _onChange: function () {\n    this.setState(this.getInitialState());\n  },\n\n  render: function() {\n    var body;\n\n    if (this.state.errors.length) {\n      body = <GeneralErrorDisplay errors={this.state.errors} />;\n    } else {\n      body = (\n        <div className=\"hc-layout\">\n          <MainCol ref=\"main_column\" is_guest={this.props.is_guest} />\n        </div>\n      );\n    }\n\n    return body;\n  }\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/layout/guest_body_layout.js\n **/","var GeneralError403 = require(\"./general_error_403\");\nvar GeneralError500 = require(\"./general_error_500\");\n\nmodule.exports = React.createClass({\n\n  displayName: \"GeneralErrorDisplay\",\n\n  render: function () {\n    var stanza = this.props.errors[0],\n        error;\n\n    if (stanza.error.code === \"500\") {\n      error = <GeneralError500 error={stanza} web_server={this.props.web_server} />;\n    } else {\n      error = <GeneralError403 error={stanza} web_server={this.props.web_server} />;\n    }\n    return error;\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_load/general_error_display.js\n **/","var strings = require('strings/common_strings');\n\nfunction getErrorMessage(error) {\n  var hasText = _.get(error, \"error.text.__text\");\n  return (hasText) ? error.error.text.__text : \"An error occurred\";\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"GeneralError403\",\n\n  render: function () {\n    var errorMessage = getErrorMessage(this.props.error);\n\n    return (\n      <section role=\"main\" className=\"general-error-display aui-page-notification aui-page-size-medium\">\n        <div className=\"aui-page-panel\">\n          <div className=\"aui-page-pannel-inner\">\n            <section className=\"aui-page-panel-content\">\n              <h1><img src={`https://${this.props.web_server}/wc/assets/img/embedded/notsureif@3x.png`} alt=\"Not sure if\" title=\"Not sure if\" className=\"error-emoticon\" width=\"38\" height=\"50\" /> {strings.youre_welcome}</h1>\n              <div className=\"aui-page-notification-description\">\n                <p><strong>{errorMessage}</strong></p>\n                <p><a href={`https://${this.props.web_server}/sign_in`}>{strings.sign_in}</a></p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_load/general_error_403.js\n **/","function getErrorMessage(error) {\n  var hasText = _.get(error, \"error.text.__text\");\n  return (hasText) ? error.error.text.__text : \"An error occurred\";\n}\n\nmodule.exports = React.createClass({\n\n  displayName: \"GeneralError500\",\n\n  render: function () {\n    var errorMessage = getErrorMessage(this.props.error);\n\n    return (\n      <section role=\"main\" className=\"general-error-display aui-page-notification aui-page-size-medium\">\n        <div className=\"aui-page-panel\">\n          <div className=\"aui-page-pannel-inner\">\n            <section className=\"aui-page-panel-content\">\n              <h1>Whoa! What did you do!? <img className=\"error-emoticon\" src={`https://${this.props.web_server}/wc/assets/img/embedded/troll@3x.png`} width=\"50\" height=\"50\" /></h1>\n              <div className=\"aui-page-notification-description\">\n                <p><strong>{errorMessage}</strong></p>\n              </div>\n            </section>\n          </div>\n        </div>\n      </section>\n    );\n  }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/components/app_load/general_error_500.js\n **/","/**\n * Attempt to detect unrecoverable errors\n *\n * @module ErrorDetect\n */\nconst ERRORS = {};\n\nexport default class {\n  constructor (callback) {\n    this.callback = callback || function () {};\n  }\n\n  _normalizeError (e) {\n    var err = {};\n    if (e instanceof Error) {\n      err = e;\n    } else if (typeof ErrorEvent !== \"undefined\" && e instanceof ErrorEvent) {\n      err = e.error || e;\n    }\n    return err;\n  }\n\n  trigger (err) {\n    _.each(ERRORS, (def, type) => {\n      var detected = false;\n      try {\n        detected = def.detect(err);\n      } catch (ignore) {\n        // we want to ensure we don't trigger window.onerror to avoid recursing\n      }\n\n      if (detected) {\n        var currentTime = Date.now();\n        if (currentTime <= def._last + def.time) {\n          def._count++;\n        } else {\n          def._count = 1;\n        }\n        if (def._count > def.threshold) {\n          def._count = 0;\n          this.callback.call(this, type, err);\n        }\n        def._last = currentTime;\n      }\n    });\n  }\n\n  /**\n   * Install the ErrorDetect module, adding an error event handler to the console\n   *\n   * @method install\n   */\n  install () {\n    window.addEventListener(\"error\", (e) => {\n      var err = this._normalizeError(e);\n      this.trigger(err);\n    });\n  }\n\n  /**\n   *\n   * @param {string} type the identifier for this rule\n   * @param {object} options the options hash\n   * @param {function} options.detect the function to determine if this rule is hit\n   * @param {number} options.threshold the threshold of error occurrences\n   * @param {number} options.time the sliding window time in milliseconds in which to count these errors\n   */\n  addRule (type, options) {\n    ERRORS[type] = options;\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/error_detect.js\n **/","import Store from 'lib/core/store';\nimport AppDispatcher from 'dispatchers/app_dispatcher';\nimport AppConfig from 'config/app_config';\nimport utils from 'helpers/utils';\nimport VideoChat from 'helpers/video_chat';\nimport strings from 'strings/video_call_strings';\nimport VideoServiceKeys from 'keys/video_service_keys';\nimport ConfigStore from 'stores/configuration_store';\nimport PreferencesStore from 'stores/preferences_store';\nimport AppStore from 'stores/application_store';\nimport spi from 'spi';\nimport CurrentUserActions from 'actions/current_user_actions';\n\nclass VideoChatStore extends Store {\n\n  constructor() {\n    super();\n    this.local = {};\n  }\n\n  getDefaults() {\n    return {\n      video_sessions: [],\n      video_enabled: ConfigStore.get('video_enabled'),\n      delayed_video_messages: {},\n      incoming_invites: [],\n      active_chat: '',\n      profiles: {},\n      current_user: {},\n      web_server: AppConfig.default_web_server,\n      video_chat_uri: ConfigStore.get('video_chat_uri')\n    };\n  }\n\n  registerListeners() {\n    AppDispatcher.registerOnce({\n      'app-state-ready': () => {\n        this.videoChat = new VideoChat(this);\n      }\n    });\n    AppDispatcher.register({\n      'updated:config': (config) => {\n        this.set('video_chat_uri', config.video_chat_uri);\n      },\n      'updated:current_user': (data) => {\n        this.data.current_user = data;\n      },\n      'updated:web_server': (web_server) => {\n        this.set(\"web_server\", web_server);\n      },\n      'updated:active_chat': (jid) => {\n        this.data.active_chat = jid;\n      },\n      'updated:profiles': (data) => {\n        this.handleProfiles(data);\n      },\n      'addlive.video-window-event': (data) => {\n        this.handleExternalWindowEvent(data);\n      },\n      'addlive.start-video-call': (data) => {\n        this.initiateVideoCall(data);\n      },\n      'addlive.invite-to-audio-video-call': (data) => {\n        if (data.sender.jid !== this.data.current_user.user_jid) {\n          this.handleVideoCallInvite(data);\n        }\n      },\n      'addlive.answer-audio-video-call': (data) => {\n        this.answerIncomingVideoCall(data);\n      },\n      'addlive.audio-video-call-accepted': (data) => {\n        this.videoCallAcceptedByRemoteUser(data);\n      },\n      'addlive.audio-video-call-declined': (data) => {\n        this.handleDeclinedMessage(data);\n      },\n      'addlive.decline-audio-video-call': (data) => {\n        this.declineIncomingVideoCall(data);\n      },\n      'addlive.audio-video-call-hung-up': (data) => {\n        this.handleHangupMessage(data);\n      },\n      'addlive.focus-video-window': (data) => {\n        var session = this.getVideoSession(data.jid);\n        if (session && session.window) {\n          session.window.focus();\n        }\n      }\n    });\n  }\n\n  handleProfiles(data) {\n    _.forOwn(data, (profile, jid) => {\n      if (!this.data.profiles[jid]) {\n        this.data.profiles[jid] = {\n          jid: jid,\n          name: profile.name,\n          title: profile.title,\n          timezone: profile.timezone || '',\n          timezone_utc_diff: profile.timezone ? parseFloat(profile.timezone['utc_offset']) : 0,\n          email: profile.email,\n          photo: profile.photo_large,\n          photo_small: profile.photo_small\n        };\n      }\n    });\n  }\n\n  handleVideoCallInvite(data) {\n    var user = this.getCaller(data.sender.jid),\n        session = this.getCurrentSession(),\n        doInterrupt;\n    this.videoChat.triggerVideoCall(user);\n    if (session) {\n      if (session.jid !== data.message.from) {\n        return undefined;\n      }\n      if (!session.window || !session.window.isConnected) {\n        doInterrupt = true;\n      } else {\n        return true;\n      }\n    } else {\n      AppDispatcher.dispatch('show-flag', {\n        id: `video-flag-${utils.now()}`,\n        type: 'video',\n        sender: data.sender.name,\n        photo: user.photo_url,\n        message: data.message,\n        service: VideoServiceKeys.ADDLIVE\n      });\n    }\n    this.videoChat.notifyForIncomingCall(user, PreferencesStore.getShowToasters());\n    var invite = {\n      caller: user,\n      missed_timer: setTimeout(() => {\n        this.handleMissedCall(user);\n      }, AppConfig.missed_video_call_timeout)\n    };\n    this.data.incoming_invites.push(invite);\n    if (doInterrupt) {\n      this.handleVideoInterruptMessage(data.message);\n    }\n  }\n\n  removeInvite(jid) {\n    var invite = _.find(this.data.incoming_invites, {caller: this.getCaller(jid)});\n    if (invite) {\n      clearTimeout(invite.missed_timer);\n      this.videoChat.stopAllSounds();\n      _.pull(this.data.incoming_invites, invite);\n      AppDispatcher.dispatch(\"hide-modal-dialog\");\n    }\n  }\n\n  answerIncomingVideoCall(data) {\n    this.videoChat.stopAllSounds();\n    this.videoChat.stopIncomingNotification(data.from);\n    this.removeInvite(data.from);\n    var audio_only = !_.get(data, 'x.call', {}).hasOwnProperty('video'),\n        url = _.get(data, 'x.url', '');\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.from,\n      type: 'accept',\n      service: VideoServiceKeys.ADDLIVE\n    });\n    this.initiateVideoCall({\n      jid: data.from,\n      type: 'accept',\n      audio_only: audio_only,\n      url: url,\n      service: url ? VideoServiceKeys.ENSO : VideoServiceKeys.ADDLIVE\n    });\n    window.app.get_profile(data.from, (profile) => {\n      spi.callAnswered(data.from, profile);\n      window.app.request_addlive_credentials(data.from, function(d, creds){\n        spi.addLiveCredentialsReceived(creds);\n      });\n    });\n  }\n\n  declineIncomingVideoCall(data) {\n    this.videoChat.stopAllSounds();\n    this.videoChat.stopIncomingNotification(data.from);\n    this.removeInvite(data.from);\n    AppDispatcher.dispatch('send-video-message', {\n      jid: data.from,\n      type: 'decline',\n      service: VideoServiceKeys.ADDLIVE\n    });\n  }\n\n  handleMissedCall(caller) {\n    this.videoChat.stopAllSounds();\n    this.videoChat.stopIncomingNotification(caller.jid);\n    var msg = {\n      body: strings.missed_call_message(caller.name),\n      type: \"missed-call\",\n      from: caller.jid,\n      delay: false,\n      sender: \" \"\n    };\n    AppDispatcher.dispatch(`${VideoServiceKeys.ADDLIVE}.missed-call`, msg);\n    AppDispatcher.dispatch(\"hide-modal-dialog\");\n  }\n\n  createCallSession({jid, type, uri}) {\n    this.data.video_sessions.push({\n      jid,\n      type,\n      window: this.videoChat.openVideoUI(uri, jid)\n    });\n    CurrentUserActions.onCall();\n  }\n\n  isNativeAddLiveWindow() {\n    return !!ConfigStore.get('feature_flags').web_client_native_addlive_window;\n  }\n\n  initiateVideoCall(data) {\n    var session = this.getCurrentSession();\n\n    if (!session) {\n      let native_video_uri = this.get('video_chat_uri');\n      data.uri = (native_video_uri) ? `${native_video_uri}?user_id=` : `https://${this.get('web_server')}/chat/video/`;\n      data.uri += `${encodeURIComponent(utils.jid.user_id(data.jid))}`;\n\n      if (data.audio_only) {\n        data.uri += (native_video_uri) ? '&' : '?';\n        data.uri += 'voice';\n      }\n\n      if (!this.isNativeAddLiveWindow()) {\n        this.createCallSession(data);\n      }\n\n      if (data.type === 'call') {\n        window.app.get_profile(data.jid, (profile) => {\n          spi.callPlaced(data.jid, profile);\n          if (this.isNativeAddLiveWindow()) {\n            AppDispatcher.dispatch('send-video-message', {\n              jid: data.jid,\n              type: 'call',\n              audio_only: data.audio_only,\n              service: VideoServiceKeys.ADDLIVE\n            });\n          }\n          window.app.request_addlive_credentials(data.jid, function(d, creds) {\n            spi.addLiveCredentialsReceived(creds);\n          });\n        });\n      }\n\n      return;\n    }\n\n    // focus call window if connecting or connected to the call\n    if (data.jid === session.jid && session.window) {\n      let isConnected = session.window.isConnected,\n          isConnecting = _.isUndefined(session.window.isConnected); // if disconnected, it would be 'false'\n      if (isConnected || isConnecting) {\n        session.window.focus();\n        return;\n      }\n    }\n\n    // ask if client (currently disconnected) want to switch to other call session\n    if (confirm(strings.confirm_leave) && session.window) {\n      this.deleteVideoSession(session.jid);\n      session.window.close();\n\n      this.createCallSession(data);\n    }\n  }\n\n  handleDeclinedMessage(data) {\n    var session = this.getCurrentSession();\n    if (session && session.jid !== data.message.from) {\n      return;\n    }\n\n    this.videoChat.stopAllSounds();\n    var jid = utils.jid.bare_jid(data.from),\n        user = this.getCaller(jid);\n    this.videoChat.triggerVideoDeclined(user);\n    CurrentUserActions.leaveCall();\n    window.app.get_profile(data.message.from, (profile) => {\n      spi.callDeclined(data.message.from, profile);\n    });\n  }\n\n  handleVideoInterruptMessage(data) {\n    var user = this.getCaller(data.from);\n    this.videoChat.triggerVideoInterrupt(user);\n  }\n\n  handleHangupMessage(data) {\n    var session = this.getCurrentSession();\n    if (session && session.jid !== data.sender.jid) {\n      return;\n    }\n\n    var from = _.get(data, 'message.from') || _.get(data, 'sender.jid');\n    this.videoChat.stopAllSounds();\n    this.videoChat.triggerVideoHangup(data.sender);\n    this.removeInvite(from);\n    CurrentUserActions.leaveCall();\n    window.app.get_profile(data.sender.jid, (profile) => {\n      spi.callHungup(data.sender.jid, profile);\n    });\n  }\n\n  videoCallAcceptedByRemoteUser(data) {\n    this.videoChat.stopAllSounds();\n    var jid = utils.jid.bare_jid(data.message.from),\n        user = this.getCaller(jid);\n    this.videoChat.triggerVideoAccept(user);\n  }\n\n  deleteVideoSession(jid, delay) {\n    this.videoChat.stopAllSounds();\n    var session = this.getVideoSession(jid);\n    if (delay) {\n      if (session) {\n        session.timeout = setTimeout(function(store) {\n          if (session === store.getCurrentSession()) {\n            store.destroyVideoSession(jid);\n          }\n        }, AppConfig.missed_video_call_timeout, this);\n      }\n    }\n  }\n\n  sendVideoMessage(jid, args) {\n    if (typeof args === 'string') {\n      args = JSON.parse(args);\n    }\n    // ngvideo app use 'join' instead of accept, so fix it\n    if (args.type === 'join') {\n      args.type = 'accept';\n    }\n    var type = this.determineMessageType(jid, args);\n    var audio_only = _.get(args, 'audio_only', false);\n    switch (type) {\n      case 'call':\n        if (!args.url) {\n          this.videoChat.notifyForOutgoingCall();\n        }\n        break;\n      case 'hangup':\n        this.videoChat.stopAllSounds();\n        CurrentUserActions.leaveCall();\n        break;\n      case 'accept':\n        this.videoChat.stopAllSounds();\n        break;\n    }\n    AppDispatcher.dispatch('send-video-message', {\n      jid: jid,\n      type: type,\n      audio_only: audio_only,\n      url: args.url || '',\n      service: VideoServiceKeys.ADDLIVE\n    });\n  }\n\n  handleExternalWindowEvent(args) {\n    switch (args.type) {\n      case 'video_session_started':\n        this.videoChat.stopAllSounds();\n        break;\n      case 'video_joined':\n        this.removeInvite(args.data);\n        CurrentUserActions.onCall();\n        // ensure that this client marked as `remoteAccepted` in ngvideo app\n        this.videoChat.triggerVideoAccept(this.getCaller(args.data));\n        return;\n      case 'video_hangup':\n        if (args.data === this.data.current_user.user_jid) {\n          this.sendVideoMessage(args.data, {\n            type: 'hangup'\n          });\n          CurrentUserActions.leaveCall();\n        }\n        break;\n      case 'video_declined':\n        this.sendVideoMessage(args.data, {\n          type: 'decline'\n        });\n        this.deleteVideoSession(args.data);\n        break;\n      case 'video_session_ended':\n        if (!args.data.reloading) {\n          AppDispatcher.dispatch('send-video-message', {\n            jid: args.data.jid,\n            type: 'hangup',\n            service: VideoServiceKeys.ADDLIVE\n          });\n          this.videoChat.stopAllSounds();\n          this.destroyVideoSession(args.data.jid);\n          CurrentUserActions.leaveCall();\n        }\n        break;\n    }\n  }\n\n  determineMessageType(jid, args) {\n    var session = this.getVideoSession(jid);\n    if (args.type === 'decline' || args.type === 'hangup'){\n      return args.type;\n    }\n    return session.type === 'call' && args.type === 'accept' ? 'call' : 'accept';\n  }\n\n  destroyVideoSession(jid) {\n    var session = this.getVideoSession(jid);\n    if (session && session.window) {\n      let window = session.window;\n      session.window = null;\n      window.close();\n    }\n    this.data.video_sessions = _.reject(this.data.video_sessions, {jid: jid});\n  }\n\n  getVideoSession(jid) {\n    return _.find(this.data.video_sessions, {jid: jid});\n  }\n\n  getCurrentSession() {\n    return _.find(this.data.video_sessions, (session) => {\n      return session.window && !session.timeout;\n    });\n  }\n\n  getCaller(jid) {\n    var roster = this.getRoster();\n    return _.find(roster, {jid: jid});\n  }\n\n  getRoster() {\n    return _.values(AppStore.get(\"roster\"));\n  }\n\n}\n\nexport default new VideoChatStore();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/stores/video_chat_store.js\n **/","/*global util*/\nvar notifier = require('helpers/notifier'),\n    AppActions = require('actions/app_actions'),\n    utils = require('helpers/utils'),\n    appConfig = require('config/app_config'),\n    AppDispatcher = require('dispatchers/app_dispatcher'),\n    strings = require('strings/video_call_strings'),\n    ApplicationStore = require('stores/application_store'),\n    spi = require('spi');\n\nclass VideoChat {\n\n  constructor(store) {\n    this.events = $(document);\n    this.attachBridgeComponents(store);\n    this.subscribeToExternalWindowEvents(this.events);\n  }\n\n  attachBridgeComponents(store) {\n    window.chat = {\n      events: this.events,\n      current_message_id: 0,\n      delete_video_session: _.bind(store.deleteVideoSession, store),\n      cancel_delete_video_session: function (jid) {\n        var session = this.get_video_session(jid);\n        if (session && session.timeout) {\n          clearTimeout(session.timeout);\n          delete session.timeout;\n        }\n      },\n      get_video_session: function (jid) {\n        return _.find(store.get('video_sessions'), {jid: jid});\n      },\n      set_video_session_type: function (jid, type) {\n        var session = this.get_video_session(jid);\n        if (session) {\n          session.type = type;\n        }\n      },\n      next_message_id: function () {\n        return this.current_message_id++;\n      }\n    };\n\n    window.app = {\n      get_user_info: function (jid, return_placeholder) {\n        var bare_jid = util.jid.bare_jid(jid),\n            member = _.find(store.getRoster(), {jid: bare_jid});\n        if (member) {\n          return member;\n        }\n        return return_placeholder ? { name: '' } : null;\n      },\n      current_user_jid: store.get('current_user').user_jid,\n      send_video_message: function (jid, args) {\n        store.sendVideoMessage(jid, args);\n      },\n      get_video_session: function (jid) {\n        return _.find(store.get('video_sessions'), {jid: jid});\n      },\n      send_delayed_video_message: function (to_jid, args) {\n        var jid = \"\" + to_jid;\n        if (typeof args === 'string') {\n          args = JSON.parse(args);\n        }\n        var message_id = 'msg-' + args.message_id;\n        if (args.type === 'hangup' || args.type === 'decline') {\n          notifier.stopSounds();\n        }\n        store.data.delayed_video_messages[message_id] = {\n          cancel: function () {\n            delete store.data.delayed_video_messages[message_id];\n            clearTimeout(this.timeout);\n          },\n          timeout: setTimeout(() => {\n            delete store.data.delayed_video_messages[message_id];\n            store.sendVideoMessage(jid, {\n              type: args.type\n            });\n          }, args.timeout || 5000, jid)\n        };\n        return message_id;\n      },\n      attributes: {},\n      set_video_attribute: function (name, value) {\n        this[\"\" + name] = \"\" + value;\n      },\n\n      get_video_attribute: function (name) {\n        return this[name];\n      },\n\n      remove_video_attribute: function (name) {\n        delete this[name];\n      },\n\n      cancel_delayed_video_message: function (message_id) {\n        var message = store.get('delayed_video_messages')[message_id];\n        if (message) {\n          message.cancel();\n          return true;\n        }\n        return false;\n      },\n      request_addlive_credentials: function (jid, callback) {\n        AppDispatcher.dispatch('request-addlive-credentials', {\n          jid: jid\n        }, callback);\n      },\n\n      get_profile: function (jid, callback) {\n        var info = store.get('profiles')[jid];\n\n        if (info) {\n          callback(info);\n        } else {\n          AppDispatcher.dispatch('request-profile', jid, (response) => {\n            if (!response || !response.query) {\n              return;\n            }\n            var profile = response.query;\n            var data = {\n              'jid': jid,\n              'name': profile.name,\n              'title': profile.title,\n              'timezone': profile.timezone || '',\n              'timezone_utc_diff': profile.timezone ? parseFloat(profile.timezone['utc_offset']) : 0,\n              'email': profile.email,\n              'photo': profile.photo_large,\n              'photo_small': profile.photo_small\n            };\n            callback(data);\n          });\n        }\n      }\n    };\n\n    window.util = utils;\n\n    window.hipchat = console || {log: _.noop}; // This is fucked up, but it's only used for logging\n  }\n\n  notifyForIncomingCall(caller, doNotify) {\n    notifier.playSound('incoming_call', true);\n    notifier.setTitleNotification({\n      id: caller.jid,\n      text: strings.incoming_call_notification(caller.name)\n    });\n    if (doNotify) {\n      AppActions.showNotification({\n        group_id: ApplicationStore.get('config').group_id,\n        group_name: ApplicationStore.get('config').group_name,\n        jid: caller.jid,\n        title: caller.name,\n        body: strings.incoming_call_notification(caller.name),\n        icon: ApplicationStore.get('asset_base_uri') + appConfig.notification_icon,\n        type: 'incoming_call'\n      });\n    }\n  }\n\n  notifyForOutgoingCall() {\n    notifier.playSound('outgoing_call', true);\n  }\n\n  stopAllSounds() {\n    notifier.stopSounds();\n  }\n\n  stopIncomingNotification(caller_jid) {\n    notifier.unsetTitleNotification(caller_jid);\n  }\n\n  openVideoUI(url, jid) {\n    var window_size = utils.video.size_window(appConfig.video_width, appConfig.video_height, 640, 360),\n        width = window_size.width,\n        height = window_size.height;\n\n    var width_ratio = width / appConfig.video_width;\n    var height_ratio = height / appConfig.video_height;\n\n    if (width_ratio < 1 && height_ratio < 1) {\n      if (width_ratio < height_ratio) {\n        width = Math.floor(appConfig.video_width * height_ratio);\n      } else {\n        height = Math.floor(appConfig.video_height * width_ratio);\n      }\n    } else if (height_ratio < 1) {\n      width = Math.floor(appConfig.video_width * height_ratio);\n    } else if (width_ratio < 1) {\n      height = Math.floor(appConfig.video_height * width_ratio);\n    }\n\n    var pos = utils.video.center_window(width, height),\n        props = 'resizable=yes,width=' + width + ',height=' + height + ',top=' + pos.top + ',left=' + pos.left,\n        video_window = spi.openInternalWindow(url, 'HipChat', props);\n\n    if (video_window) {\n      $(video_window).on('beforeunload', (e) => {\n        AppDispatcher.dispatch('addlive.video-window-event', {\n          type: 'video_session_ended',\n          data: {\n            jid: jid,\n            reloading: e.currentTarget.reloading\n          }\n        });\n      });\n      video_window.focus();\n      window.video_window = video_window;\n    }\n    return video_window;\n  }\n\n  subscribeToExternalWindowEvents(events) {\n    /*\n     * The following is necessary because of how the original web client video module was written\n     */\n    events.on('video_session_ended video_session_started video_declined video_joined video_hangup', (evt, data) => {\n      AppDispatcher.dispatch('addlive.video-window-event', {\n        type: evt.type,\n        data: data\n      });\n    });\n  }\n\n  triggerVideoCall(user) {\n    this.events.trigger('video_call', user);\n  }\n\n  triggerVideoAccept(user) {\n    this.events.trigger('video_accept', user);\n  }\n\n  triggerVideoHangup(user) {\n    this.events.trigger('video_hangup', user);\n  }\n\n  triggerVideoDeclined(user) {\n    this.events.trigger('video_decline', user);\n  }\n\n  triggerVideoInterrupt(user) {\n    this.events.trigger('video_interrupt', user);\n  }\n\n  triggerVideoUnsupported(data) {\n    this.events.trigger('video_unsupported', data);\n  }\n\n}\n\nmodule.exports = VideoChat;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/video_chat.js\n **/","import ChatWindowStore from 'stores/chat_window_store';\nimport ClipboardStrings from 'strings/clipboard_strings';\nimport moment from 'moment';\n\nclass ClipboardHelper {\n\n  constructor() {\n    this._initialize();\n  }\n\n  _initialize() {\n    $(document).on('copy', this._doCopy.bind(this));\n  }\n\n  _doCopy(e) {\n    var activeSelection = window.getSelection(),\n        activeRanges = this._getSelectionRanges(activeSelection);\n\n    if (!activeSelection.rangeCount) {\n      return;\n    }\n    // Abort if the target of the copy is not inside the chat panel. Let the system handle it.\n    if (!$(e.target).parents('.hc-chat-panel').length) {\n      return;\n    }\n\n    var copyableElements = this._getCopyableElements(activeRanges);\n\n    // Abort if there are less than 2 copyable elements\n    if (copyableElements.length < 2) {\n      return;\n    }\n\n    var content = this._getFormattedContent(copyableElements);\n\n    var $textarea = $(\"<textarea>\")\n      .css({\n        'width': '1px',\n        'height': '1px',\n        'padding': '0px'\n      })\n      .text(content);\n\n    // this CSS makes it so you can't actually see the textarea when it pops in but\n    // it is still \"visible\" enough to copy from for some browsers that require it\n    var $clipboardContainer = $(\"<div id='clipboard-container'>\")\n      .css({\n        'position': 'fixed',\n        'left': '0px',\n        'top': '0px',\n        'width': '0px',\n        'height': '0px',\n        'z-index': '100',\n        'display': 'block',\n        'opacity': '0'\n      })\n      .append($textarea)\n      .appendTo(document.body);\n\n    $textarea.focus().select();\n    try {\n      // Firefox needs this method\n      document.execCommand('copy');\n    } catch(err) {\n      // do nothing, the browser will pick it up.\n    }\n\n    _.defer(() => {\n      // return the previous selection\n      activeSelection.removeAllRanges();\n      activeRanges.forEach((range) => activeSelection.addRange(range));\n\n      $clipboardContainer.remove();\n    });\n  }\n\n  _getCopyableElements(selectionRanges) {\n    var copyableElements = [];\n\n    copyableElements = _.map(selectionRanges, (range) => {\n      // go through each range in selectionRanges array\n      // get array of document fragments one for each range\n      // get array of copyable DOM elements from each doc fragment\n      // the '...' is a handy way to convert a nodeList to an array\n      let docFragment = range.cloneContents();\n      return [...docFragment.querySelectorAll('[data-copyable]')];\n    });\n\n    // combine all the DOM elements into a single array\n    return _.flatten(copyableElements);\n  }\n\n  _getFormattedContent(copyableElements) {\n    // get an array of formatted strings for each DOM element\n    let formattedElements = _.reduce(copyableElements, (acc, element) => {\n        let formattedElement = this._formatElement(element);\n        // remove any empties\n        if(!_.isEmpty(formattedElement)) {\n          acc.push(formattedElement);\n        }\n\n        return acc;\n    }, []);\n\n    // combine into a string\n    return _.join(formattedElements, '\\n') || \"\";\n  }\n\n  _getSelectionRanges(selection) {\n    // Firefox creats multiple ranges. We'll collect 'em all.\n    // https://developer.mozilla.org/en-US/docs/Web/API/Selection#Multiple_ranges_in_a_selection\n    var selectionRanges = [];\n    for (var i = 0, len = selection.rangeCount; i < len; ++i) {\n      selectionRanges.push(selection.getRangeAt(i));\n    }\n    return selectionRanges;\n  }\n\n  _formatElement(el) {\n    var message = '',\n        time = '',\n        senderName = '',\n        body = '',\n        elementData = JSON.parse(el.dataset.copyable),\n        formatStyle = elementData.format;\n\n    // If we included a mid look up the message\n    if (elementData.mid) {\n      message = this._getMessageByMid(elementData.mid);\n      time = moment(message.date).format(\"h:mm A\");\n      senderName = message.sender;\n    }\n\n    if (formatStyle === \"plain-message\") {\n\n      body = this._formatBodyText(el);\n      return `[${time}] ${senderName}: ${body}`;\n\n    } else if (formatStyle === \"notification\") {\n\n      body = this._formatBodyText(el);\n      return `[${time}] ${senderName}: ${body}`;\n\n    } else if (formatStyle === \"info\") {\n\n      // this covers /topic, /me, etc.\n      body = this._formatBodyText(el);\n      body = body.split('\\n'); // for multi-line messages\n      body = _.transform(body, (result, element) => result.push(`    ${element}`), []);\n      body = body.join('\\n');\n      return `${body}`;\n\n    } else if (formatStyle === \"quotation\") {\n\n      body = this._formatBodyText(el);\n      body = body.split('\\n'); // for multi-line messages\n      body = _.transform(body, (result, element) => result.push(`    |  ${element}`), []);\n      body = body.join('\\n');\n      return `[${time}] ${senderName}:\\n${body}`;\n\n    } else if (formatStyle === \"code\") {\n\n      let multilineElement = $('li', el);\n\n      if (multilineElement.length > 0) {\n        body = [];\n        $('li', el).each((i, subElement) => {\n          body.push(`    ${subElement.lastElementChild.textContent}`);\n        });\n        body = body.join('\\n');\n      } else {\n        body = this._formatBodyText(el);\n        body = `    ${body}`;\n      }\n\n      return `[${time}] ${senderName}:\\n${body}`;\n\n    } else if (formatStyle === \"file\") {\n\n      let fileName = message.file_data.file_name;\n      let fileUrl = message.file_data.url;\n      body = this._formatBodyText(message.rendered_body);\n      return `[${time}] ${senderName}: ${body}\\n    ${ClipboardStrings.file_uploaded}: ${fileName}\\n    [${fileUrl}]` + ``;\n\n    } else if (formatStyle === \"date-divider\") {\n\n      body = this._formatBodyText(el);\n      return `---- ${body} ----`;\n\n    }\n\n    return el.lastElementChild.textContent;\n  }\n\n  _getMessageByMid(mid) {\n    let messages = ChatWindowStore.data.chats[ChatWindowStore.data.active_chat].messages;\n    return _.find(messages, {'mid': mid});\n  }\n\n  _formatBodyText(el) {\n    // We get the time stamp and name from ChatWindowStore but not the message body. We retrive the body of the message from\n    // the document fragment because it will have exactly the text the user selected, even if they only selected part of line.\n    var textString = \"\",\n        nodes = $.parseHTML(el.innerHTML || el);\n\n    if (nodes) {\n      nodes.forEach((node) => {\n        if (node.nodeName === \"BR\") {\n          textString += \"\\n\";\n        } else if (node.nodeName === \"IMG\" && $(node).hasClass('remoticon')) {\n          textString += node.alt;\n        } else {\n          textString += node.textContent;\n        }\n      });\n\n      textString = textString.trim();\n      textString = textString.replace(/\\n\\n/g, ''); // Some HTML messages have <br> tags that leave new lines at the end of messages. Clear those.\n    }\n\n    return textString;\n  }\n}\n\nexport default new ClipboardHelper();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/helpers/clipboard_helper.js\n **/","export default {\n  file_uploaded: `File uploaded`\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/app/strings/clipboard_strings.js\n **/"],"sourceRoot":""}